{
  "HypertyConnector": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBEaXNjb3ZlcnkuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNSBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5EaXNjb3Zlcnk9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGE9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJmEpcmV0dXJuIGEocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLHUsZixsPWUmYy5GLGQ9ZSZjLkcscD1lJmMuUyx2PWUmYy5QLCQ9ZSZjLkIseT1lJmMuVyxoPWQ/bzpvW3RdfHwob1t0XT17fSksYj1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGEgaW4gcil1PSFsJiZiJiZhIGluIGIsdSYmYSBpbiBofHwoZj11P2JbYV06clthXSxoW2FdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW2FdP3JbYV06JCYmdT9pKGYsbik6eSYmYlthXT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTp2JiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6Zix2JiYoKGhbc118fChoW3NdPXt9KSlbYV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksYT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgZixsLGQscD1hKGUpLHY9bihyLHUsdD8yOjEpLCQ9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihmPWMoZS5sZW5ndGgpO2Y+JDskKyspdD92KHMobD1lWyRdKVswXSxsWzFdKTp2KGVbJF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEobD1kLm5leHQoKSkuZG9uZTspbyhkLHYsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksYT1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSx2PSJAQGl0ZXJhdG9yIiwkPSJrZXlzIix5PSJ2YWx1ZXMiLGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe3Uocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBVKXJldHVybiBVW2VdO3N3aXRjaChlKXtjYXNlICQ6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT15LE09ITEsVT1lLnByb3RvdHlwZSxQPVVbZF18fFVbdl18fG0mJlVbbV0sUz1QfHxfKG0pO2lmKFApe3ZhciBFPWwoUy5jYWxsKG5ldyBlKSk7ZihFLGssITApLCFuJiZjKFUsdikmJnMoRSxkLGgpLE8mJlAubmFtZSE9PXkmJihNPSEwLFM9ZnVuY3Rpb24oKXtyZXR1cm4gUC5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFwJiYhTSYmVVtkXXx8cyhVLGQsUyksYVt0XT1TLGFba109aCxtKWlmKGo9e3ZhbHVlczpPP1M6Xyh5KSxrZXlzOmc/UzpfKCQpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6U30seClmb3IodyBpbiBqKXcgaW4gVXx8aShVLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsYT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGEpe3ZhciBwPTEsdj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGEoZCkub2JzZXJ2ZSh2LHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe3YuZGF0YT1wPS1wfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksYT1uKHIpLHU9Yy5sZW5ndGg7cmV0dXJuIDA+YXx8YT49dT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQoYSksNTUyOTY+aXx8aT41NjMxOXx8YSsxPT09dXx8KHM9Yy5jaGFyQ29kZUF0KGErMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQoYSk6aTplP2Muc2xpY2UoYSxhKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksYT1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxkPWYuc2V0SW1tZWRpYXRlLHA9Zi5jbGVhckltbWVkaWF0ZSx2PWYuTWVzc2FnZUNoYW5uZWwsJD0wLHk9e30saD0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrKyRdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKCQpLCR9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OnY/KG89bmV3IHYsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49aCBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXthLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVtoXT1mdW5jdGlvbigpe2EucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLHY9ZSgiLi8kLmZvci1vZiIpLCQ9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksaD1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PWEoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gJChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLCQodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW2hdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxVPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFA9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sUz1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LEU9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLGE9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2EoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVUocikpP2kuY2FsbChyLGMsYSk6YyhyKSk6YShuKX1jYXRjaCh1KXthKHUpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO0wobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxMPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFMKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LFI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLEUodCwhMCkpfSxUPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVUoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKFQsbiwxKSxjKFIsbiwxKSl9Y2F0Y2gobyl7Ui5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLEUociwhMSkpfWNhdGNoKG4pe1IuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhULHQsMSksYyhSLHQsMSkpfWNhdGNoKHIpe1IuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFAoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJkUobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sdSh1LlMrdS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUCh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBQKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IFAodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UyhmdW5jdGlvbigpe3YoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUCh0KSxuPXIucmVqZWN0LG89UyhmdW5jdGlvbigpe3YoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsY1siZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBuPXRoaXM7bi5tZXNzYWdlQnVzPXIsbi5kb21haW49KDAsZi5kaXZpZGVVUkwpKHQpLmRvbWFpbixuLmRpc2NvdmVyeVVSTD10fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ZSxzZWFyY2g6ImRhdGFPYmplY3RQZXJVUkwifX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihyKXt2YXIgbj1yLmJvZHkudmFsdWU7bj9lKG4pOnQoIkRhdGFPYmplY3Qgbm90IGZvdW5kIil9KX0pfX0se2tleToiZGVsZXRlRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPXt0eXBlOiJkZWxldGUiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7dmFsdWU6e25hbWU6ZX19fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS5jb2RlOzIwMD09PW4/ZShuKTp0KCJFcnJvciBvbiBkZWxldGluZyBkYXRhT2JqZWN0Iil9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyUmVwb3J0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTplLHNlYXJjaDoiZGF0YU9iamVjdFBlclJlcG9ydGVyIn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlO24/ZShuKTp0KCJObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcyxzPXZvaWQgMCxjPSgwLGYuY29udmVydFRvVXNlclVSTCkoZSk7cz1uP246by5kb21haW47dmFyIGE9e3R5cGU6InJlYWQiLGZyb206by5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrcysiLyIsYm9keTp7cmVzb3VyY2U6e3VzZXI6YyxyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0fSxzZWFyY2g6Imh5cGVydHlSZXNvdXJjZXNEYXRhU2NoZW1lcyJ9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe28ubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZTtuP2Uobik6dCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydHlQZXJVc2VyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89InVzZXI6Ly8iK2Uuc3Vic3RyaW5nKGUuaW5kZXhPZigiQCIpKzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZigiQCIpKSxzPXt0eXBlOiJyZWFkIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK24rIi8iLGJvZHk6e3Jlc291cmNlOm8sc2VhcmNoOiJIeXBlcnR5UGVyVXNlciJ9fTtyZXR1cm4gY29uc29sZS5sb2coIk1lc3NhZ2U6ICIscyxuLG8pLG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24odCxuKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtjb25zb2xlLmxvZygibWVzc2FnZSByZXBseSIscik7dmFyIG89dm9pZCAwLGk9dm9pZCAwLHM9dm9pZCAwLGM9ci5ib2R5LnZhbHVlO2ZvcihvIGluIGMpaWYodm9pZCAwIT09Y1tvXS5sYXN0TW9kaWZpZWQpaWYodm9pZCAwPT09aSlpPW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKSxzPW87ZWxzZXt2YXIgYT1uZXcgRGF0ZShjW29dLmxhc3RNb2RpZmllZCk7aS5nZXRUaW1lKCk8YS5nZXRUaW1lKCkmJihpPWEscz1vKX1jb25zb2xlLmxvZygiTGFzdCBIeXBlcnR5OiAiLHMsaSk7dmFyIHU9cztpZih2b2lkIDA9PT11KXJldHVybiBuKCJVc2VyIEh5cGVydHkgbm90IGZvdW5kIik7dmFyIGY9e2lkOmUsZGVzY3JpcHRvcjpjW3VdLmRlc2NyaXB0b3IsaHlwZXJ0eVVSTDp1fTtjb25zb2xlLmxvZygiPT09PiBoeXBlcnR5RGlzY292ZXJ5IG1lc3NhZ2VCdW5kbGU6ICIsZiksdChmKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6byxzZWFyY2g6Ikh5cGVydHlQZXJVc2VyIn19O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXI6ICIscyxuLG8pLG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtjb25zb2xlLmxvZygiZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyIHJlcGx5IixyKTt2YXIgbj1yLmJvZHkudmFsdWU7cmV0dXJuIG4/dm9pZCBlKG4pOnQoIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKX0pfSl9fSx7a2V5OiJkZWxldGVIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxvPXZvaWQgMDtvPXI/cjpuLmRvbWFpbjt2YXIgcz17dHlwZToiZGVsZXRlIixmcm9tOm4uZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK28rIi8iLGJvZHk6e3ZhbHVlOnt1c2VyOmUsaHlwZXJ0eVVSTDp0fX19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LmNvZGU7bj9lKCJIeXBlcnR5IHN1Y2Nlc3NmdWxseSBkZWxldGVkIik6dCgiRXJyb3Igb24gZGVsZXRpbmcgaHlwZXJ0eSIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsdlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBhKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksdj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1hLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBIeXBlcnR5RGlzY292ZXJ5LmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MTYgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuSHlwZXJ0eURpc2NvdmVyeT1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYyl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgdT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYyYmdSlyZXR1cm4gdShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBhPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBhLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGF9dmFyIGY9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sZixmLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5Ijo3fV0sMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjh9XSwzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjo5fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjEwfV0sNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsaVsiZGVmYXVsdCJdKShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKX0seyIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjJ9XSw3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuKG4uSlNPTiYmbi5KU09OLnN0cmluZ2lmeXx8SlNPTi5zdHJpbmdpZnkpLmFwcGx5KEpTT04sYXJndW1lbnRzKX19LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2fV0sODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6Mzh9XSw5OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo2Mn1dLDEwOltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjoxNiwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6NjMsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjY0LCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjY1LCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjY2fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwxMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwxMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0IjozMX1dLDE0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MTUsIi4vJC53a3MiOjU5fV0sMTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwxNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDE3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjExfV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjIyfV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmN0eCIpLHM9InByb3RvdHlwZSIsYz1mdW5jdGlvbihlLHQscil7dmFyIHUsYSxmLGw9ZSZjLkYsZD1lJmMuRyxwPWUmYy5TLCQ9ZSZjLlAsdj1lJmMuQix5PWUmYy5XLGg9ZD9vOm9bdF18fChvW3RdPXt9KSxiPWQ/bjpwP25bdF06KG5bdF18fHt9KVtzXTtkJiYocj10KTtmb3IodSBpbiByKWE9IWwmJmImJnUgaW4gYixhJiZ1IGluIGh8fChmPWE/Ylt1XTpyW3VdLGhbdV09ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGJbdV0/clt1XTp2JiZhP2koZixuKTp5JiZiW3VdPT1mP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFtzXT1lW3NdLHR9KGYpOiQmJiJmdW5jdGlvbiI9PXR5cGVvZiBmP2koRnVuY3Rpb24uY2FsbCxmKTpmLCQmJigoaFtzXXx8KGhbc109e30pKVt1XT1mKSl9O2MuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsdC5leHBvcnRzPWN9LHsiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmdsb2JhbCI6MjR9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDIzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLG89ZSgiLi8kLml0ZXItY2FsbCIpLGk9ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxzPWUoIi4vJC5hbi1vYmplY3QiKSxjPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBmLGwsZCxwPXUoZSksJD1uKHIsYSx0PzI6MSksdj0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBwKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKGkocCkpZm9yKGY9YyhlLmxlbmd0aCk7Zj52O3YrKyl0PyQocyhsPWVbdl0pWzBdLGxbMV0pOiQoZVt2XSk7ZWxzZSBmb3IoZD1wLmNhbGwoZSk7IShsPWQubmV4dCgpKS5kb25lOylvKGQsJCxsLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1hcnJheS1pdGVyIjozMCwiLi8kLml0ZXItY2FsbCI6MzIsIi4vJC50by1sZW5ndGgiOjU2LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6NjB9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDI1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDI2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjozOCwiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLnByb3BlcnR5LWRlc2MiOjQyfV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6MjR9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sMjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjE1fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fGlbb109PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2goaSl7dmFyIHM9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09cyYmbihzLmNhbGwoZSkpLGl9fX0seyIuLyQuYW4tb2JqZWN0IjoxM31dLDMzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxpPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLHM9e307ZSgiLi8kLmhpZGUiKShzLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShzLHtuZXh0Om8oMSxyKX0pLGkoZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjozOCwiLi8kLmhpZGUiOjI2LCIuLyQucHJvcGVydHktZGVzYyI6NDIsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxvPWUoIi4vJC5leHBvcnQiKSxpPWUoIi4vJC5yZWRlZmluZSIpLHM9ZSgiLi8kLmhpZGUiKSxjPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxhPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksbD1lKCIuLyQiKS5nZXRQcm90byxkPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxwPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLCQ9IkBAaXRlcmF0b3IiLHY9ImtleXMiLHk9InZhbHVlcyIsaD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsYixtLGcseCl7YShyLHQsYik7dmFyIGosdyxfPWZ1bmN0aW9uKGUpe2lmKCFwJiZlIGluIFApcmV0dXJuIFBbZV07c3dpdGNoKGUpe2Nhc2UgdjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSB5OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGs9dCsiIEl0ZXJhdG9yIixPPW09PXksTT0hMSxQPWUucHJvdG90eXBlLFM9UFtkXXx8UFskXXx8bSYmUFttXSxFPVN8fF8obSk7aWYoUyl7dmFyIFU9bChFLmNhbGwobmV3IGUpKTtmKFUsaywhMCksIW4mJmMoUCwkKSYmcyhVLGQsaCksTyYmUy5uYW1lIT09eSYmKE09ITAsRT1mdW5jdGlvbigpe3JldHVybiBTLmNhbGwodGhpcyl9KX1pZihuJiYheHx8IXAmJiFNJiZQW2RdfHxzKFAsZCxFKSx1W3RdPUUsdVtrXT1oLG0paWYoaj17dmFsdWVzOk8/RTpfKHkpLGtleXM6Zz9FOl8odiksZW50cmllczpPP18oImVudHJpZXMiKTpFfSx4KWZvcih3IGluIGopdyBpbiBQfHxpKFAsdyxqW3ddKTtlbHNlIG8oby5QK28uRioocHx8TSksdCxqKTtyZXR1cm4gan19LHsiLi8kIjozOCwiLi8kLmV4cG9ydCI6MjEsIi4vJC5oYXMiOjI1LCIuLyQuaGlkZSI6MjYsIi4vJC5pdGVyLWNyZWF0ZSI6MzMsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQubGlicmFyeSI6MzksIi4vJC5yZWRlZmluZSI6NDQsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aVsicmV0dXJuIl09ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2gocyl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3I9ITB9LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChjKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjU5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sMzc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDM5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQudGFzayIpLnNldCx1PXMuTXV0YXRpb25PYnNlcnZlcnx8cy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGE9cy5wcm9jZXNzLGY9cy5Qcm9taXNlLGw9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYSksZD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IobCYmKGU9YS5kb21haW4pJiYoYS5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtvPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGwpaT1mdW5jdGlvbigpe2EubmV4dFRpY2soZCl9O2Vsc2UgaWYodSl7dmFyIHA9MSwkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShkKS5vYnNlcnZlKCQse2NoYXJhY3RlckRhdGE6ITB9KSxpPWZ1bmN0aW9uKCl7JC5kYXRhPXA9LXB9fWVsc2UgaT1mJiZmLnJlc29sdmU/ZnVuY3Rpb24oKXtmLnJlc29sdmUoKS50aGVuKGQpfTpmdW5jdGlvbigpe2MuY2FsbChzLGQpfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmwmJmEuZG9tYWlufTtvJiYoby5uZXh0PXQpLG58fChuPXQsaSgpKSxvPXR9fSx7Ii4vJC5jb2YiOjE1LCIuLyQuZ2xvYmFsIjoyNCwiLi8kLnRhc2siOjUzfV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxzPXt9O3NbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixzKX19LHsiLi8kLmNvcmUiOjE2LCIuLyQuZXhwb3J0IjoyMSwiLi8kLmZhaWxzIjoyMn1dLDQyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDQzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6NDR9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjoyNn1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxvPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5hbi1vYmplY3QiKSxzPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbyh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixvKXt0cnl7bz1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxvKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGkpe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSx0KSxyP2UuX19wcm90b19fPXQ6byhlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpzfX0seyIuLyQiOjM4LCIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1vYmplY3QiOjMxfV0sNDc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxvPWUoIi4vJCIpLGk9ZSgiLi8kLmRlc2NyaXB0b3JzIikscz1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtpJiZ0JiYhdFtzXSYmby5zZXREZXNjKHQscyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjM4LCIuLyQuY29yZSI6MTYsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC53a3MiOjU5fV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLG89ZSgiLi8kLmhhcyIpLGk9ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIW8oZT1yP2U6ZS5wcm90b3R5cGUsaSkmJm4oZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjM4LCIuLyQuaGFzIjoyNSwiLi8kLndrcyI6NTl9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPSJfX2NvcmUtanNfc2hhcmVkX18iLGk9bltvXXx8KG5bb109e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0seyIuLyQuZ2xvYmFsIjoyNH1dLDUwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLG89ZSgiLi8kLmEtZnVuY3Rpb24iKSxpPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC53a3MiOjU5fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGkscyxjPVN0cmluZyhvKHQpKSx1PW4ociksYT1jLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1hP2U/IiI6dm9pZCAwOihpPWMuY2hhckNvZGVBdCh1KSw1NTI5Nj5pfHxpPjU2MzE5fHx1KzE9PT1hfHwocz1jLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fHM+NTczNDM/ZT9jLmNoYXJBdCh1KTppOmU/Yy5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsocy01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQudG8taW50ZWdlciI6NTR9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYT1lKCIuLyQuZG9tLWNyZWF0ZSIpLGY9ZSgiLi8kLmdsb2JhbCIpLGw9Zi5wcm9jZXNzLGQ9Zi5zZXRJbW1lZGlhdGUscD1mLmNsZWFySW1tZWRpYXRlLCQ9Zi5NZXNzYWdlQ2hhbm5lbCx2PTAseT17fSxoPSJvbnJlYWR5c3RhdGVjaGFuZ2UiLGI9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZih5Lmhhc093blByb3BlcnR5KGUpKXt2YXIgdD15W2VdO2RlbGV0ZSB5W2VdLHQoKX19LG09ZnVuY3Rpb24oZSl7Yi5jYWxsKGUuZGF0YSl9O2QmJnB8fChkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiB5Wysrdl09ZnVuY3Rpb24oKXtjKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgeVtlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikobCk/bj1mdW5jdGlvbihlKXtsLm5leHRUaWNrKHMoYixlLDEpKX06JD8obz1uZXcgJCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9bSxuPXMoaS5wb3N0TWVzc2FnZSxpLDEpKTpmLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtmLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtLCExKSk6bj1oIGluIGEoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYSgic2NyaXB0IikpW2hdPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0seyIuLyQuY29mIjoxNSwiLi8kLmN0eCI6MTcsIi4vJC5kb20tY3JlYXRlIjoyMCwiLi8kLmdsb2JhbCI6MjQsIi4vJC5odG1sIjoyNywiLi8kLmludm9rZSI6Mjh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0Iiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQuaW9iamVjdCI6Mjl9XSw1NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjU0fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6MTh9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsbz1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24rbykudG9TdHJpbmcoMzYpKX19LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksbz1lKCIuLyQudWlkIiksaT1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aSYmaVtlXXx8KGl8fG8pKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuc2hhcmVkIjo0OSwiLi8kLnVpZCI6NTh9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLG89ZSgiLi8kLml0ZXItc3RlcCIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpLHM9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLGkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjoxMiwiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLml0ZXItc3RlcCI6MzYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQudG8taW9iamVjdCI6NTV9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjQxLCIuLyQudG8tb2JqZWN0Ijo1N31dLDYzOltmdW5jdGlvbihlLHQscil7fSx7fV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4sbz1lKCIuLyQiKSxpPWUoIi4vJC5saWJyYXJ5Iikscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQuY3R4IiksdT1lKCIuLyQuY2xhc3NvZiIpLGE9ZSgiLi8kLmV4cG9ydCIpLGY9ZSgiLi8kLmlzLW9iamVjdCIpLGw9ZSgiLi8kLmFuLW9iamVjdCIpLGQ9ZSgiLi8kLmEtZnVuY3Rpb24iKSxwPWUoIi4vJC5zdHJpY3QtbmV3IiksJD1lKCIuLyQuZm9yLW9mIiksdj1lKCIuLyQuc2V0LXByb3RvIikuc2V0LHk9ZSgiLi8kLnNhbWUtdmFsdWUiKSxoPWUoIi4vJC53a3MiKSgic3BlY2llcyIpLGI9ZSgiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiKSxtPWUoIi4vJC5taWNyb3Rhc2siKSxnPSJQcm9taXNlIix4PXMucHJvY2VzcyxqPSJwcm9jZXNzIj09dSh4KSx3PXNbZ10sXz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgdyhmdW5jdGlvbigpe30pO3JldHVybiBlJiYodC5jb25zdHJ1Y3Rvcj1PYmplY3QpLHcucmVzb2x2ZSh0KT09PXR9LGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPW5ldyB3KGUpO3JldHVybiB2KHIsdC5wcm90b3R5cGUpLHJ9dmFyIHI9ITE7dHJ5e2lmKHI9dyYmdy5yZXNvbHZlJiZfKCksdih0LHcpLHQucHJvdG90eXBlPW8uY3JlYXRlKHcucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dH19KSx0LnJlc29sdmUoNSkudGhlbihmdW5jdGlvbigpe30paW5zdGFuY2VvZiB0fHwocj0hMSksciYmZSgiLi8kLmRlc2NyaXB0b3JzIikpe3ZhciBuPSExO3cucmVzb2x2ZShvLnNldERlc2Moe30sInRoZW4iLHtnZXQ6ZnVuY3Rpb24oKXtuPSEwfX0pKSxyPW59fWNhdGNoKGkpe3I9ITF9cmV0dXJuIHJ9KCksTz1mdW5jdGlvbihlLHQpe3JldHVybiBpJiZlPT09dyYmdD09PW4/ITA6eShlLHQpfSxNPWZ1bmN0aW9uKGUpe3ZhciB0PWwoZSlbaF07cmV0dXJuIHZvaWQgMCE9dD90OmV9LFA9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGYoZSkmJiJmdW5jdGlvbiI9PXR5cGVvZih0PWUudGhlbik/dDohMX0sUz1mdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9ZCh0KSx0aGlzLnJlamVjdD1kKHIpfSxFPWZ1bmN0aW9uKGUpe3RyeXtlKCl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fX0sVT1mdW5jdGlvbihlLHQpe2lmKCFlLm4pe2Uubj0hMDt2YXIgcj1lLmM7bShmdW5jdGlvbigpe2Zvcih2YXIgbj1lLnYsbz0xPT1lLnMsaT0wLGM9ZnVuY3Rpb24odCl7dmFyIHIsaSxzPW8/dC5vazp0LmZhaWwsYz10LnJlc29sdmUsdT10LnJlamVjdDt0cnl7cz8ob3x8KGUuaD0hMCkscj1zPT09ITA/bjpzKG4pLHI9PT10LnByb21pc2U/dShUeXBlRXJyb3IoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KGk9UChyKSk/aS5jYWxsKHIsYyx1KTpjKHIpKTp1KG4pfWNhdGNoKGEpe3UoYSl9fTtyLmxlbmd0aD5pOyljKHJbaSsrXSk7ci5sZW5ndGg9MCxlLm49ITEsdCYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0LHIsbz1lLnA7VChvKSYmKGo/eC5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLG4sbyk6KHQ9cy5vbnVuaGFuZGxlZHJlamVjdGlvbik/dCh7cHJvbWlzZTpvLHJlYXNvbjpufSk6KHI9cy5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixuKSksZS5hPXZvaWQgMH0sMSl9KX19LFQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1lLl9kLG49ci5hfHxyLmMsbz0wO2lmKHIuaClyZXR1cm4hMTtmb3IoO24ubGVuZ3RoPm87KWlmKHQ9bltvKytdLHQuZmFpbHx8IVQodC5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sRD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuZHx8KHQuZD0hMCx0PXQucnx8dCx0LnY9ZSx0LnM9Mix0LmE9dC5jLnNsaWNlKCksVSh0LCEwKSl9LEE9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLmQpe3IuZD0hMCxyPXIucnx8cjt0cnl7aWYoci5wPT09ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9UChlKSk/bShmdW5jdGlvbigpe3ZhciBuPXtyOnIsZDohMX07dHJ5e3QuY2FsbChlLGMoQSxuLDEpLGMoRCxuLDEpKX1jYXRjaChvKXtELmNhbGwobixvKX19KTooci52PWUsci5zPTEsVShyLCExKSl9Y2F0Y2gobil7RC5jYWxsKHtyOnIsZDohMX0sbil9fX07a3x8KHc9ZnVuY3Rpb24oZSl7ZChlKTt2YXIgdD10aGlzLl9kPXtwOnAodGhpcyx3LGcpLGM6W10sYTp2b2lkIDAsczowLGQ6ITEsdjp2b2lkIDAsaDohMSxuOiExfTt0cnl7ZShjKEEsdCwxKSxjKEQsdCwxKSl9Y2F0Y2gocil7RC5jYWxsKHQscil9fSxlKCIuLyQucmVkZWZpbmUtYWxsIikody5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgUyhiKHRoaXMsdykpLG49ci5wcm9taXNlLG89dGhpcy5fZDtyZXR1cm4gci5vaz0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOiEwLHIuZmFpbD0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdCxvLmMucHVzaChyKSxvLmEmJm8uYS5wdXNoKHIpLG8ucyYmVShvLCExKSxufSwiY2F0Y2giOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pKSxhKGEuRythLlcrYS5GKiFrLHtQcm9taXNlOnd9KSxlKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSh3LGcpLGUoIi4vJC5zZXQtc3BlY2llcyIpKGcpLG49ZSgiLi8kLmNvcmUiKVtnXSxhKGEuUythLkYqIWssZyx7cmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZWplY3Q7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiooIWt8fF8oITApKSxnLHtyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiB3JiZPKGUuY29uc3RydWN0b3IsdGhpcykpcmV0dXJuIGU7dmFyIHQ9bmV3IFModGhpcykscj10LnJlc29sdmU7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiohKGsmJmUoIi4vJC5pdGVyLWRldGVjdCIpKGZ1bmN0aW9uKGUpe3cuYWxsKGUpWyJjYXRjaCJdKGZ1bmN0aW9uKCl7fSl9KSksZyx7YWxsOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUyh0KSxuPXIucmVzb2x2ZSxpPXIucmVqZWN0LHM9W10sYz1FKGZ1bmN0aW9uKCl7JChlLCExLHMucHVzaCxzKTt2YXIgcj1zLmxlbmd0aCxjPUFycmF5KHIpO3I/by5lYWNoLmNhbGwocyxmdW5jdGlvbihlLG8pe3ZhciBzPSExO3QucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3N8fChzPSEwLGNbb109ZSwtLXJ8fG4oYykpfSxpKX0pOm4oYyl9KTtyZXR1cm4gYyYmaShjLmVycm9yKSxyLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9TSh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZWplY3Qsbz1FKGZ1bmN0aW9uKCl7JChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8mJm4oby5lcnJvciksci5wcm9taXNlfX0pfSx7Ii4vJCI6MzgsIi4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jbGFzc29mIjoxNCwiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mb3Itb2YiOjIzLCIuLyQuZ2xvYmFsIjoyNCwiLi8kLmlzLW9iamVjdCI6MzEsIi4vJC5pdGVyLWRldGVjdCI6MzUsIi4vJC5saWJyYXJ5IjozOSwiLi8kLm1pY3JvdGFzayI6NDAsIi4vJC5yZWRlZmluZS1hbGwiOjQzLCIuLyQuc2FtZS12YWx1ZSI6NDUsIi4vJC5zZXQtcHJvdG8iOjQ2LCIuLyQuc2V0LXNwZWNpZXMiOjQ3LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciI6NTAsIi4vJC5zdHJpY3QtbmV3Ijo1MSwiLi8kLndrcyI6NTl9XSw2NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuc3RyaW5nLWF0IikoITApO2UoIi4vJC5pdGVyLWRlZmluZSIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LHI9dGhpcy5faTtyZXR1cm4gcj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1uKHQsciksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LHsiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLnN0cmluZy1hdCI6NTJ9XSw2NjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpO24uTm9kZUxpc3Q9bi5IVE1MQ29sbGVjdGlvbj1uLkFycmF5fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuL2VzNi5hcnJheS5pdGVyYXRvciI6NjF9XSw2NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCIuL2h5cGVydHktZGlzY292ZXJ5L0h5cGVydHlEaXNjb3ZlcnkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWlbImRlZmF1bHQiXSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vaHlwZXJ0eS1kaXNjb3ZlcnkvSHlwZXJ0eURpc2NvdmVyeSI6Njh9XSw2ODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGM9bihzKSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGE9bih1KSxmPWUoIi4uL3V0aWxzL3V0aWxzIiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG49dGhpcztuLm1lc3NhZ2VCdXM9cixuLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG4uZGlzY292ZXJ5VVJMPXR9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RQZXJOYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ImRhdGFPYmplY3Q6Ly8iK2V9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZS51cmw7bj9lKG4pOnQoIkRhdGFPYmplY3QgbmFtZSBkb2VzIG5vdCBleGlzdCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eVBlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6b319O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZTogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJtZXNzYWdlIHJlcGx5IixyKTt2YXIgbz12b2lkIDAsaT12b2lkIDAscz12b2lkIDAsYz1yLmJvZHkudmFsdWU7Zm9yKG8gaW4gYylpZih2b2lkIDAhPT1jW29dLmxhc3RNb2RpZmllZClpZih2b2lkIDA9PT1pKWk9bmV3IERhdGUoY1tvXS5sYXN0TW9kaWZpZWQpLHM9bztlbHNle3ZhciB1PW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKTtpLmdldFRpbWUoKTx1LmdldFRpbWUoKSYmKGk9dSxzPW8pfWNvbnNvbGUubG9nKCJMYXN0IEh5cGVydHk6ICIscyxpKTt2YXIgYT1zO2lmKHZvaWQgMD09PWEpcmV0dXJuIG4oIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKTt2YXIgZj17aWQ6ZSxkZXNjcmlwdG9yOmNbYV0uZGVzY3JpcHRvcixoeXBlcnR5VVJMOmF9O2NvbnNvbGUubG9nKCI9PT0+IGh5cGVydHlEaXNjb3ZlcnkgbWVzc2FnZUJ1bmRsZTogIixmKSx0KGYpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPSJ1c2VyOi8vIitlLnN1YnN0cmluZyhlLmluZGV4T2YoIkAiKSsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIkAiKSkscz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTpvfX07cmV0dXJuIGNvbnNvbGUubG9nKCJNZXNzYWdlIGRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcjogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIgcmVwbHkiLHIpO3ZhciBuPXIuYm9keS52YWx1ZTtyZXR1cm4gbj92b2lkIGUobik6dCgiVXNlciBIeXBlcnR5IG5vdCBmb3VuZCIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsJFsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiB1KGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gdShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksJD1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD11LHIuZ2V0VXNlckVtYWlsRnJvbVVSTD1hLHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBJZGVudGl0eU1hbmFnZXIuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNiBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5JZGVudGl0eU1hbmFnZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJnUpcmV0dXJuIHUocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgYT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgYS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixhfXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1LGEsZixsPWUmYy5GLHA9ZSZjLkcsZD1lJmMuUywkPWUmYy5QLHY9ZSZjLkIsaD1lJmMuVyx5PXA/bzpvW3RdfHwob1t0XT17fSksYj1wP246ZD9uW3RdOihuW3RdfHx7fSlbc107cCYmKHI9dCk7Zm9yKHUgaW4gcilhPSFsJiZiJiZ1IGluIGIsYSYmdSBpbiB5fHwoZj1hP2JbdV06clt1XSx5W3VdPXAmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW3VdP3JbdV06diYmYT9pKGYsbik6aCYmYlt1XT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTokJiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6ZiwkJiYoKHlbc118fCh5W3NdPXt9KSlbdV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksdT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgZixsLHAsZD11KGUpLCQ9bihyLGEsdD8yOjEpLHY9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKGQpKWZvcihmPWMoZS5sZW5ndGgpO2Y+djt2KyspdD8kKHMobD1lW3ZdKVswXSxsWzFdKTokKGVbdl0pO2Vsc2UgZm9yKHA9ZC5jYWxsKGUpOyEobD1wLm5leHQoKSkuZG9uZTspbyhwLCQsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksdT1lKCIuLyQuaXRlcmF0b3JzIiksYT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8scD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSwkPSJAQGl0ZXJhdG9yIix2PSJrZXlzIixoPSJ2YWx1ZXMiLHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe2Eocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighZCYmZSBpbiBTKXJldHVybiBTW2VdO3N3aXRjaChlKXtjYXNlIHY6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgaDpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT1oLE09ITEsUz1lLnByb3RvdHlwZSxFPVNbcF18fFNbJF18fG0mJlNbbV0sUD1FfHxfKG0pO2lmKEUpe3ZhciBUPWwoUC5jYWxsKG5ldyBlKSk7ZihULGssITApLCFuJiZjKFMsJCkmJnMoVCxwLHkpLE8mJkUubmFtZSE9PWgmJihNPSEwLFA9ZnVuY3Rpb24oKXtyZXR1cm4gRS5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFkJiYhTSYmU1twXXx8cyhTLHAsUCksdVt0XT1QLHVba109eSxtKWlmKGo9e3ZhbHVlczpPP1A6XyhoKSxrZXlzOmc/UDpfKHYpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6UH0seClmb3IodyBpbiBqKXcgaW4gU3x8aShTLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKGR8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsdT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGEpLHA9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPWEuZG9tYWluKSYmKGEuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXthLm5leHRUaWNrKHApfTtlbHNlIGlmKHUpe3ZhciBkPTEsJD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IHUocCkub2JzZXJ2ZSgkLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpeyQuZGF0YT1kPS1kfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihwKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxwKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZhLmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksdT1uKHIpLGE9Yy5sZW5ndGg7cmV0dXJuIDA+dXx8dT49YT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQodSksNTUyOTY+aXx8aT41NjMxOXx8dSsxPT09YXx8KHM9Yy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQodSk6aTplP2Muc2xpY2UodSx1KzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksdT1lKCIuLyQuaHRtbCIpLGE9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxwPWYuc2V0SW1tZWRpYXRlLGQ9Zi5jbGVhckltbWVkaWF0ZSwkPWYuTWVzc2FnZUNoYW5uZWwsdj0wLGg9e30seT0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoaC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9aFtlXTtkZWxldGUgaFtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtwJiZkfHwocD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gaFsrK3ZdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKHYpLHZ9LGQ9ZnVuY3Rpb24oZSl7ZGVsZXRlIGhbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OiQ/KG89bmV3ICQsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49eSBpbiBhKCJzY3JpcHQiKT9mdW5jdGlvbihlKXt1LmFwcGVuZENoaWxkKGEoInNjcmlwdCIpKVt5XT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OnAsY2xlYXI6ZH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLHU9ZSgiLi8kLmNsYXNzb2YiKSxhPWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxwPWUoIi4vJC5hLWZ1bmN0aW9uIiksZD1lKCIuLyQuc3RyaWN0LW5ldyIpLCQ9ZSgiLi8kLmZvci1vZiIpLHY9ZSgiLi8kLnNldC1wcm90byIpLnNldCxoPWUoIi4vJC5zYW1lLXZhbHVlIikseT1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PXUoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gdihyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLHYodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOmgoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW3ldO3JldHVybiB2b2lkIDAhPXQ/dDplfSxTPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LEU9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPXAodCksdGhpcy5yZWplY3Q9cChyKX0sUD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFQ9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLHU9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP3UoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVMocikpP2kuY2FsbChyLGMsdSk6YyhyKSk6dShuKX1jYXRjaChhKXt1KGEpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO1UobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxVPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFVKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFQodCwhMCkpfSxDPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVMoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKEMsbiwxKSxjKEEsbiwxKSl9Y2F0Y2gobyl7QS5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFQociwhMSkpfWNhdGNoKG4pe0EuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe3AoZSk7dmFyIHQ9dGhpcy5fZD17cDpkKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhDLHQsMSksYyhBLHQsMSkpfWNhdGNoKHIpe0EuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IEUoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlQobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksYShhLkcrYS5XK2EuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sYShhLlMrYS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRSh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBFKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IEUodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UChmdW5jdGlvbigpeyQoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgRSh0KSxuPXIucmVqZWN0LG89UChmdW5jdGlvbigpeyQoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksdT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4odSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG89dGhpcztvLm1lc3NhZ2VCdXM9bixvLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG8uaHlwZXJ0eVVSTD10LG8ucnVudGltZVVSTD1yfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwLG89ZT9lOiIuIjtuPXQ/dDpyLmh5cGVydHlVUkw7dmFyIHM9e3R5cGU6InJlYWQiLGZyb206bix0bzpyLnJ1bnRpbWVVUkwrIi9yZWdpc3RyeS8iLGJvZHk6e3Jlc291cmNlOm8sY3JpdGVyaWE6bn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnJlc291cmNlO24/ZShuKTp0KCJObyB1c2VyIHdhcyBub3QgZm91bmQiKX0pfSl9fV0pLGV9KCk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscyI6NjgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6Nn1dLDY4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlKXtpZighZSl0aHJvdyBFcnJvcigiVVJMIGlzIG5lZWRlZCB0byBzcGxpdCIpO3ZhciB0PS8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpLHI9IiQxLCQyLCQzIixuPWUucmVwbGFjZSh0LHIpLnNwbGl0KCIsIik7blswXT09PWUmJihuWzBdPSJodHRwcyIsblsxXT1lKTt2YXIgbz17dHlwZTpuWzBdLGRvbWFpbjpuWzFdLGlkZW50aXR5Om5bMl19O3JldHVybiBvfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIikscj17dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX07cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlKXtyZXR1cm4hKCgwLCRbImRlZmF1bHQiXSkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGU/SlNPTi5wYXJzZSgoMCxwWyJkZWZhdWx0Il0pKGUpKTp2b2lkIDB9ZnVuY3Rpb24gdShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX1mdW5jdGlvbiBhKGUpe3ZhciB0PW8oZSk7cmV0dXJuIHQuaWRlbnRpdHkucmVwbGFjZSgiLyIsIiIpKyJAIit0LmRvbWFpbn1mdW5jdGlvbiBmKGUpe2lmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PW8oZSk7aWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIHUoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBsPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSIpLHA9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLCQ9bihkKTtyLmRpdmlkZVVSTD1vLHIuZGl2aWRlRW1haWw9aSxyLmVtcHR5T2JqZWN0PXMsci5kZWVwQ2xvbmU9YyxyLmdldFVzZXJVUkxGcm9tRW1haWw9dSxyLmdldFVzZXJFbWFpbEZyb21VUkw9YSxyLmNvbnZlcnRUb1VzZXJVUkw9Zn0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiOjEsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6M31dfSx7fSxbNjddKSg2Nyl9KTsKCgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgU3luY2hlci5qcyAKLy8gdmVyc2lvbjogMC4zLjAKLy8gTGFzdCBidWlsZDogVGh1IEp1biAwOSAyMDE2IDEyOjI4OjI0IEdNVCswMTAwIChXRVNUKQoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlN5bmNoZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGEpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJmMpcmV0dXJuIGMocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBsPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGwsbC5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe09iamVjdC5vYnNlcnZlJiYhQXJyYXkub2JzZXJ2ZSYmZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIHI9ZS5nZXROb3RpZmllcixuPSJwZXJmb3JtQ2hhbmdlIixvPSJfb3JpZ2luYWwiLGk9InNwbGljZSIscz17cHVzaDpmdW5jdGlvbiBjKGUpe3ZhciB0PWFyZ3VtZW50cyxzPWNbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnMtdC5sZW5ndGgsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHVuc2hpZnQ6ZnVuY3Rpb24gdShlKXt2YXIgdD1hcmd1bWVudHMscz11W29dLmFwcGx5KHRoaXMsdCk7cmV0dXJuIHIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDowLGFkZGVkQ291bnQ6dC5sZW5ndGgscmVtb3ZlZDpbXX19KSxzfSxwb3A6ZnVuY3Rpb24gbCgpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9bFtvXS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmxlbmd0aCE9PWUmJnIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDp0aGlzLmxlbmd0aCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzaGlmdDpmdW5jdGlvbiBmKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1mW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDowLHJlbW92ZWQ6W3RdfX0sdGhpcyksdH0sc3BsaWNlOmZ1bmN0aW9uIGQoZSx0KXt2YXIgcz1hcmd1bWVudHMsYT1kW29dLmFwcGx5KHRoaXMscyk7cmV0dXJuKGEubGVuZ3RofHxzLmxlbmd0aD4yKSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OmUsYWRkZWRDb3VudDpzLmxlbmd0aC0yLHJlbW92ZWQ6YX19LHRoaXMpLGF9fTtmb3IodmFyIGEgaW4gcylzW2FdW29dPXQucHJvdG90eXBlW2FdLHQucHJvdG90eXBlW2FdPXNbYV07dC5vYnNlcnZlPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUub2JzZXJ2ZSh0LHIsWyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLGldKX0sdC51bm9ic2VydmU9ZS51bm9ic2VydmV9KE9iamVjdCxBcnJheSl9LHt9XSwyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IjoxN31dLDM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIjoxOH1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoxOX1dLDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjoyMH1dLDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjIxfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6MjJ9XSw4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjoyM31dLDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoyNH1dLDEwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjI1fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDEyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxpWyJkZWZhdWx0Il0pKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpfSx7Ii4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSI6NH1dLDEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbz0hMDtvOyl7dmFyIGk9ZSxzPXQsYT1yO289ITEsbnVsbD09PWkmJihpPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIGM9bihpLHMpO2lmKHZvaWQgMCE9PWMpe2lmKCJ2YWx1ZSJpbiBjKXJldHVybiBjLnZhbHVlO3ZhciB1PWMuZ2V0O2lmKHZvaWQgMD09PXUpcmV0dXJuO3JldHVybiB1LmNhbGwoYSl9dmFyIGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGkpO2lmKG51bGw9PT1sKXJldHVybjtlPWwsdD1zLHI9YSxvPSEwLGM9bD12b2lkIDB9fSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjV9XSwxNDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHQpO2UucHJvdG90eXBlPW4odCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihvP28oZSx0KTplLl9fcHJvdG9fXz10KX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjh9XSwxNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsaVsiZGVmYXVsdCJdKSh0KSkmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6dH19LHsiLi4vaGVscGVycy90eXBlb2YiOjE2fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmNvbnN0cnVjdG9yPT09bj8ic3ltYm9sIjp0eXBlb2YgZX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wiOjEwfV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4obi5KU09OJiZuLkpTT04uc3RyaW5naWZ5fHxKU09OLnN0cmluZ2lmeSkuYXBwbHkoSlNPTixhcmd1bWVudHMpfX0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzF9XSwxODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ2V0RGVzYyhlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjo4MX1dLDIxOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiI6ODJ9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6ODN9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LnNldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiOjg0fV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksZSgiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIiksZSgiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIiksZSgiLi4vbW9kdWxlcy9lczYucHJvbWlzZSIpLHQuZXhwb3J0cz1lKCIuLi9tb2R1bGVzLyQuY29yZSIpLlByb21pc2V9LHsiLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vbW9kdWxlcy9lczYucHJvbWlzZSI6ODYsIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6ODcsIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6ODl9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCIpLGUoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5TeW1ib2x9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIjo4OH1dLDI2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6NDl9XSwyOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjMwLCIuLyQud2tzIjo3OH1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoyNn1dLDMzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDM0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjozOH1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDM2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0S2V5cyhlKSxyPW4uZ2V0U3ltYm9scztpZihyKWZvcih2YXIgbyxpPXIoZSkscz1uLmlzRW51bSxhPTA7aS5sZW5ndGg+YTspcy5jYWxsKGUsbz1pW2ErK10pJiZ0LnB1c2gobyk7cmV0dXJuIHR9fSx7Ii4vJCI6NTZ9XSwzNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuY3R4Iikscz0icHJvdG90eXBlIixhPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyx1LGwsZj1lJmEuRixkPWUmYS5HLHA9ZSZhLlMsYj1lJmEuUCxoPWUmYS5CLHk9ZSZhLlcsdj1kP286b1t0XXx8KG9bdF09e30pLF89ZD9uOnA/blt0XTooblt0XXx8e30pW3NdO2QmJihyPXQpO2ZvcihjIGluIHIpdT0hZiYmXyYmYyBpbiBfLHUmJmMgaW4gdnx8KGw9dT9fW2NdOnJbY10sdltjXT1kJiYiZnVuY3Rpb24iIT10eXBlb2YgX1tjXT9yW2NdOmgmJnU/aShsLG4pOnkmJl9bY109PWw/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBlP25ldyBlKHQpOmUodCl9O3JldHVybiB0W3NdPWVbc10sdH0obCk6YiYmImZ1bmN0aW9uIj09dHlwZW9mIGw/aShGdW5jdGlvbi5jYWxsLGwpOmwsYiYmKCh2W3NdfHwodltzXT17fSkpW2NdPWwpKX07YS5GPTEsYS5HPTIsYS5TPTQsYS5QPTgsYS5CPTE2LGEuVz0zMix0LmV4cG9ydHM9YX0seyIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZ2xvYmFsIjo0MX1dLDM4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaCh0KXtyZXR1cm4hMH19fSx7fV0sMzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY3R4Iiksbz1lKCIuLyQuaXRlci1jYWxsIiksaT1lKCIuLyQuaXMtYXJyYXktaXRlciIpLHM9ZSgiLi8kLmFuLW9iamVjdCIpLGE9ZSgiLi8kLnRvLWxlbmd0aCIpLGM9ZSgiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdSl7dmFyIGwsZixkLHA9YyhlKSxiPW4ocix1LHQ/MjoxKSxoPTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHApdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgaXRlcmFibGUhIik7aWYoaShwKSlmb3IobD1hKGUubGVuZ3RoKTtsPmg7aCsrKXQ/YihzKGY9ZVtoXSlbMF0sZlsxXSk6YihlW2hdKTtlbHNlIGZvcihkPXAuY2FsbChlKTshKGY9ZC5uZXh0KCkpLmRvbmU7KW8oZCxiLGYudmFsdWUsdCl9fSx7Ii4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLWFycmF5LWl0ZXIiOjQ3LCIuLyQuaXRlci1jYWxsIjo1MCwiLi8kLnRvLWxlbmd0aCI6NzUsIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIjo3OX1dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKSxvPWUoIi4vJCIpLmdldE5hbWVzLGk9e30udG9TdHJpbmcscz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxhPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaCh0KXtyZXR1cm4gcy5zbGljZSgpfX07dC5leHBvcnRzLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gcyYmIltvYmplY3QgV2luZG93XSI9PWkuY2FsbChlKT9hKGUpOm8obihlKSl9fSx7Ii4vJCI6NTYsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPW4pfSx7fV0sNDI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jYWxsKGUsdCl9fSx7fV0sNDM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIik7dC5leHBvcnRzPWUoIi4vJC5kZXNjcmlwdG9ycyIpP2Z1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxvKDEscikpfTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGVbdF09cixlfX0seyIuLyQiOjU2LCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQucHJvcGVydHktZGVzYyI6NjF9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudH0seyIuLyQuZ2xvYmFsIjo0MX1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA9PT1yO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuP2UoKTplLmNhbGwocik7Y2FzZSAxOnJldHVybiBuP2UodFswXSk6ZS5jYWxsKHIsdFswXSk7Y2FzZSAyOnJldHVybiBuP2UodFswXSx0WzFdKTplLmNhbGwocix0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0sdFszXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0sdFszXSl9cmV0dXJuIGUuYXBwbHkocix0KX19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LHsiLi8kLmNvZiI6MzB9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw0ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIkFycmF5Ij09bihlKX19LHsiLi8kLmNvZiI6MzB9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/bnVsbCE9PWU6ImZ1bmN0aW9uIj09dHlwZW9mIGV9fSx7fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG8pe3RyeXtyZXR1cm4gbz90KG4ocilbMF0sclsxXSk6dChyKX1jYXRjaChpKXt2YXIgcz1lWyJyZXR1cm4iXTt0aHJvdyB2b2lkIDAhPT1zJiZuKHMuY2FsbChlKSksaX19fSx7Ii4vJC5hbi1vYmplY3QiOjI4fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpLGk9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikscz17fTtlKCIuLyQuaGlkZSIpKHMsZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4uY3JlYXRlKHMse25leHQ6bygxLHIpfSksaShlLHQrIiBJdGVyYXRvciIpfX0seyIuLyQiOjU2LCIuLyQuaGlkZSI6NDMsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQubGlicmFyeSIpLG89ZSgiLi8kLmV4cG9ydCIpLGk9ZSgiLi8kLnJlZGVmaW5lIikscz1lKCIuLyQuaGlkZSIpLGE9ZSgiLi8kLmhhcyIpLGM9ZSgiLi8kLml0ZXJhdG9ycyIpLHU9ZSgiLi8kLml0ZXItY3JlYXRlIiksbD1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxmPWUoIi4vJCIpLmdldFByb3RvLGQ9ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLHA9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSksYj0iQEBpdGVyYXRvciIsaD0ia2V5cyIseT0idmFsdWVzIix2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixfLGcsbSxqKXt1KHIsdCxfKTt2YXIgJCx3LE89ZnVuY3Rpb24oZSl7aWYoIXAmJmUgaW4gRSlyZXR1cm4gRVtlXTtzd2l0Y2goZSl7Y2FzZSBoOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfTtjYXNlIHk6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0saz10KyIgSXRlcmF0b3IiLHg9Zz09eSxDPSExLEU9ZS5wcm90b3R5cGUsUz1FW2RdfHxFW2JdfHxnJiZFW2ddLFQ9U3x8TyhnKTtpZihTKXt2YXIgUj1mKFQuY2FsbChuZXcgZSkpO2woUixrLCEwKSwhbiYmYShFLGIpJiZzKFIsZCx2KSx4JiZTLm5hbWUhPT15JiYoQz0hMCxUPWZ1bmN0aW9uKCl7cmV0dXJuIFMuY2FsbCh0aGlzKX0pfWlmKG4mJiFqfHwhcCYmIUMmJkVbZF18fHMoRSxkLFQpLGNbdF09VCxjW2tdPXYsZylpZigkPXt2YWx1ZXM6eD9UOk8oeSksa2V5czptP1Q6TyhoKSxlbnRyaWVzOng/TygiZW50cmllcyIpOlR9LGopZm9yKHcgaW4gJCl3IGluIEV8fGkoRSx3LCRbd10pO2Vsc2UgbyhvLlArby5GKihwfHxDKSx0LCQpO3JldHVybiAkfX0seyIuLyQiOjU2LCIuLyQuZXhwb3J0IjozNywiLi8kLmhhcyI6NDIsIi4vJC5oaWRlIjo0MywiLi8kLml0ZXItY3JlYXRlIjo1MSwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC5saWJyYXJ5Ijo1OCwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxvPSExO3RyeXt2YXIgaT1bN11bbl0oKTtpWyJyZXR1cm4iXT1mdW5jdGlvbigpe289ITB9LEFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChzKXt9dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgaT1bN10scz1pW25dKCk7cy5uZXh0PWZ1bmN0aW9uKCl7cj0hMH0saVtuXT1mdW5jdGlvbigpe3JldHVybiBzfSxlKGkpfWNhdGNoKGEpe31yZXR1cm4gcn19LHsiLi8kLndrcyI6Nzh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17fX0se31dLDU2OltmdW5jdGlvbihlLHQscil7dmFyIG49T2JqZWN0O3QuZXhwb3J0cz17Y3JlYXRlOm4uY3JlYXRlLGdldFByb3RvOm4uZ2V0UHJvdG90eXBlT2YsaXNFbnVtOnt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLGdldERlc2M6bi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Isc2V0RGVzYzpuLmRlZmluZVByb3BlcnR5LHNldERlc2NzOm4uZGVmaW5lUHJvcGVydGllcyxnZXRLZXlzOm4ua2V5cyxnZXROYW1lczpuLmdldE93blByb3BlcnR5TmFtZXMsZ2V0U3ltYm9sczpuLmdldE93blByb3BlcnR5U3ltYm9scyxlYWNoOltdLmZvckVhY2h9fSx7fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLGk9byhlKSxzPW4uZ2V0S2V5cyhpKSxhPXMubGVuZ3RoLGM9MDthPmM7KWlmKGlbcj1zW2MrK11dPT09dClyZXR1cm4gcn19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ITB9LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC50YXNrIikuc2V0LGM9cy5NdXRhdGlvbk9ic2VydmVyfHxzLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsdT1zLnByb2Nlc3MsbD1zLlByb21pc2UsZj0icHJvY2VzcyI9PWUoIi4vJC5jb2YiKSh1KSxkPWZ1bmN0aW9uKCl7dmFyIGUsdCxyO2ZvcihmJiYoZT11LmRvbWFpbikmJih1LmRvbWFpbj1udWxsLGUuZXhpdCgpKTtuOyl0PW4uZG9tYWluLHI9bi5mbix0JiZ0LmVudGVyKCkscigpLHQmJnQuZXhpdCgpLG49bi5uZXh0O289dm9pZCAwLGUmJmUuZW50ZXIoKX07aWYoZilpPWZ1bmN0aW9uKCl7dS5uZXh0VGljayhkKX07ZWxzZSBpZihjKXt2YXIgcD0xLGI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyBjKGQpLm9ic2VydmUoYix7Y2hhcmFjdGVyRGF0YTohMH0pLGk9ZnVuY3Rpb24oKXtiLmRhdGE9cD0tcH19ZWxzZSBpPWwmJmwucmVzb2x2ZT9mdW5jdGlvbigpe2wucmVzb2x2ZSgpLnRoZW4oZCl9OmZ1bmN0aW9uKCl7YS5jYWxsKHMsZCl9O3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD17Zm46ZSxuZXh0OnZvaWQgMCxkb21haW46ZiYmdS5kb21haW59O28mJihvLm5leHQ9dCksbnx8KG49dCxpKCkpLG89dH19LHsiLi8kLmNvZiI6MzAsIi4vJC5nbG9iYWwiOjQxLCIuLyQudGFzayI6NzJ9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5leHBvcnQiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuZmFpbHMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0seyIuLyQuY29yZSI6MzEsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSx7fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQucmVkZWZpbmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCluKGUscix0W3JdKTtyZXR1cm4gZX19LHsiLi8kLnJlZGVmaW5lIjo2M31dLDYzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5oaWRlIil9LHsiLi8kLmhpZGUiOjQzfV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9T2JqZWN0LmlzfHxmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dD8wIT09ZXx8MS9lPT09MS90OmUhPWUmJnQhPXR9fSx7fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5nZXREZXNjLG89ZSgiLi8kLmlzLW9iamVjdCIpLGk9ZSgiLi8kLmFuLW9iamVjdCIpLHM9ZnVuY3Rpb24oZSx0KXtpZihpKGUpLCFvKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IodCsiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/ZnVuY3Rpb24odCxyLG8pe3RyeXtvPWUoIi4vJC5jdHgiKShGdW5jdGlvbi5jYWxsLG4oT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG8odCxbXSkscj0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goaSl7cj0hMH1yZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyhlLHQpLHI/ZS5fX3Byb3RvX189dDpvKGUsdCksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOnN9fSx7Ii4vJCI6NTYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLW9iamVjdCI6NDl9XSw2NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuY29yZSIpLG89ZSgiLi8kIiksaT1lKCIuLyQuZGVzY3JpcHRvcnMiKSxzPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uW2VdO2kmJnQmJiF0W3NdJiZvLnNldERlc2ModCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSx7Ii4vJCI6NTYsIi4vJC5jb3JlIjozMSwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLndrcyI6Nzh9XSw2NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLnNldERlc2Msbz1lKCIuLyQuaGFzIiksaT1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhbyhlPXI/ZTplLnByb3RvdHlwZSxpKSYmbihlLGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSx7Ii4vJCI6NTYsIi4vJC5oYXMiOjQyLCIuLyQud2tzIjo3OH1dLDY4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89Il9fY29yZS1qc19zaGFyZWRfXyIsaT1uW29dfHwobltvXT17fSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfHwoaVtlXT17fSl9fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iiksbz1lKCIuLyQuYS1mdW5jdGlvbiIpLGk9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1uKGUpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1zfHx2b2lkIDA9PShyPW4ocylbaV0pP3Q6byhyKX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLndrcyI6Nzh9XSw3MDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgVHlwZUVycm9yKHIrIjogdXNlIHRoZSAnbmV3JyBvcGVyYXRvciEiKTtyZXR1cm4gZX19LHt9XSw3MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxzLGE9U3RyaW5nKG8odCkpLGM9bihyKSx1PWEubGVuZ3RoO3JldHVybiAwPmN8fGM+PXU/ZT8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KGMpLDU1Mjk2Pml8fGk+NTYzMTl8fGMrMT09PXV8fChzPWEuY2hhckNvZGVBdChjKzEpKTw1NjMyMHx8cz41NzM0Mz9lP2EuY2hhckF0KGMpOmk6ZT9hLnNsaWNlKGMsYysyKTooaS01NTI5Njw8MTApKyhzLTU2MzIwKSs2NTUzNil9fX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC50by1pbnRlZ2VyIjo3M31dLDcyOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmludm9rZSIpLGM9ZSgiLi8kLmh0bWwiKSx1PWUoIi4vJC5kb20tY3JlYXRlIiksbD1lKCIuLyQuZ2xvYmFsIiksZj1sLnByb2Nlc3MsZD1sLnNldEltbWVkaWF0ZSxwPWwuY2xlYXJJbW1lZGlhdGUsYj1sLk1lc3NhZ2VDaGFubmVsLGg9MCx5PXt9LHY9Im9ucmVhZHlzdGF0ZWNoYW5nZSIsXz1mdW5jdGlvbigpe3ZhciBlPSt0aGlzO2lmKHkuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PXlbZV07ZGVsZXRlIHlbZV0sdCgpfX0sZz1mdW5jdGlvbihlKXtfLmNhbGwoZS5kYXRhKX07ZCYmcHx8KGQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIHlbKytoXT1mdW5jdGlvbigpe2EoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSx0KX0sbihoKSxofSxwPWZ1bmN0aW9uKGUpe2RlbGV0ZSB5W2VdfSwicHJvY2VzcyI9PWUoIi4vJC5jb2YiKShmKT9uPWZ1bmN0aW9uKGUpe2YubmV4dFRpY2socyhfLGUsMSkpfTpiPyhvPW5ldyBiLGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1nLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmwuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhbC5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2wucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxsLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGcsITEpKTpuPXYgaW4gdSgic2NyaXB0Iik/ZnVuY3Rpb24oZSl7Yy5hcHBlbmRDaGlsZCh1KCJzY3JpcHQiKSlbdl09ZnVuY3Rpb24oKXtjLnJlbW92ZUNoaWxkKHRoaXMpLF8uY2FsbChlKX19OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQocyhfLGUsMSksMCl9KSx0LmV4cG9ydHM9e3NldDpkLGNsZWFyOnB9fSx7Ii4vJC5jb2YiOjMwLCIuLyQuY3R4IjozMiwiLi8kLmRvbS1jcmVhdGUiOjM1LCIuLyQuZ2xvYmFsIjo0MSwiLi8kLmh0bWwiOjQ0LCIuLyQuaW52b2tlIjo0NX1dLDczOltmdW5jdGlvbihlLHQscil7dmFyIG49TWF0aC5jZWlsLG89TWF0aC5mbG9vcjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9vOm4pKGUpfX0se31dLDc0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlvYmplY3QiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC5pb2JqZWN0Ijo0Nn1dLDc1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP28obihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0seyIuLyQudG8taW50ZWdlciI6NzN9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSx7Ii4vJC5kZWZpbmVkIjozM31dLDc3OltmdW5jdGlvbihlLHQscil7dmFyIG49MCxvPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrbitvKS50b1N0cmluZygzNikpfX0se31dLDc4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnNoYXJlZCIpKCJ3a3MiKSxvPWUoIi4vJC51aWQiKSxpPWUoIi4vJC5nbG9iYWwiKS5TeW1ib2w7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1pJiZpW2VdfHwoaXx8bykoIlN5bWJvbC4iK2UpKX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5zaGFyZWQiOjY4LCIuLyQudWlkIjo3N31dLDc5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNsYXNzb2YiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKTt0LmV4cG9ydHM9ZSgiLi8kLmNvcmUiKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT1lP2Vbb118fGVbIkBAaXRlcmF0b3IiXXx8aVtuKGUpXTp2b2lkIDB9fSx7Ii4vJC5jbGFzc29mIjoyOSwiLi8kLmNvcmUiOjMxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw4MDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIiksbz1lKCIuLyQuaXRlci1zdGVwIiksaT1lKCIuLyQuaXRlcmF0b3JzIikscz1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1lKCIuLyQuaXRlci1kZWZpbmUiKShBcnJheSwiQXJyYXkiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD1zKGUpLHRoaXMuX2k9MCx0aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2sscj10aGlzLl9pKys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKToia2V5cyI9PXQ/bygwLHIpOiJ2YWx1ZXMiPT10P28oMCxlW3JdKTpvKDAsW3IsZVtyXV0pfSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxuKCJrZXlzIiksbigidmFsdWVzIiksbigiZW50cmllcyIpfSx7Ii4vJC5hZGQtdG8tdW5zY29wYWJsZXMiOjI3LCIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuaXRlci1zdGVwIjo1NCwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlKG4odCkscil9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8taW9iamVjdCI6NzR9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo2MCwiLi8kLnRvLW9iamVjdCI6NzZ9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDg0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjplKCIuLyQuc2V0LXByb3RvIikuc2V0fSl9LHsiLi8kLmV4cG9ydCI6MzcsIi4vJC5zZXQtcHJvdG8iOjY1fV0sODU6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSw4NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPWUoIi4vJCIpLGk9ZSgiLi8kLmxpYnJhcnkiKSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5jbGFzc29mIiksdT1lKCIuLyQuZXhwb3J0IiksbD1lKCIuLyQuaXMtb2JqZWN0IiksZj1lKCIuLyQuYW4tb2JqZWN0IiksZD1lKCIuLyQuYS1mdW5jdGlvbiIpLHA9ZSgiLi8kLnN0cmljdC1uZXciKSxiPWUoIi4vJC5mb3Itb2YiKSxoPWUoIi4vJC5zZXQtcHJvdG8iKS5zZXQseT1lKCIuLyQuc2FtZS12YWx1ZSIpLHY9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIiksXz1lKCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciIpLGc9ZSgiLi8kLm1pY3JvdGFzayIpLG09IlByb21pc2UiLGo9cy5wcm9jZXNzLCQ9InByb2Nlc3MiPT1jKGopLHc9c1ttXSxPPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB3KGZ1bmN0aW9uKCl7fSk7cmV0dXJuIGUmJih0LmNvbnN0cnVjdG9yPU9iamVjdCksdy5yZXNvbHZlKHQpPT09dH0saz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9bmV3IHcoZSk7cmV0dXJuIGgocix0LnByb3RvdHlwZSkscn12YXIgcj0hMTt0cnl7aWYocj13JiZ3LnJlc29sdmUmJk8oKSxoKHQsdyksdC5wcm90b3R5cGU9by5jcmVhdGUody5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0fX0pLHQucmVzb2x2ZSg1KS50aGVuKGZ1bmN0aW9uKCl7fSlpbnN0YW5jZW9mIHR8fChyPSExKSxyJiZlKCIuLyQuZGVzY3JpcHRvcnMiKSl7dmFyIG49ITE7dy5yZXNvbHZlKG8uc2V0RGVzYyh7fSwidGhlbiIse2dldDpmdW5jdGlvbigpe249ITB9fSkpLHI9bn19Y2F0Y2goaSl7cj0hMX1yZXR1cm4gcn0oKSx4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkmJmU9PT13JiZ0PT09bj8hMDp5KGUsdCl9LEM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZihlKVt2XTtyZXR1cm4gdm9pZCAwIT10P3Q6ZX0sRT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbChlKSYmImZ1bmN0aW9uIj09dHlwZW9mKHQ9ZS50aGVuKT90OiExfSxTPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1kKHQpLHRoaXMucmVqZWN0PWQocil9LFQ9ZnVuY3Rpb24oZSl7dHJ5e2UoKX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSxSPWZ1bmN0aW9uKGUsdCl7aWYoIWUubil7ZS5uPSEwO3ZhciByPWUuYztnKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUudixvPTE9PWUucyxpPTAsYT1mdW5jdGlvbih0KXt2YXIgcixpLHM9bz90Lm9rOnQuZmFpbCxhPXQucmVzb2x2ZSxjPXQucmVqZWN0O3RyeXtzPyhvfHwoZS5oPSEwKSxyPXM9PT0hMD9uOnMobikscj09PXQucHJvbWlzZT9jKFR5cGVFcnJvcigiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1FKHIpKT9pLmNhbGwocixhLGMpOmEocikpOmMobil9Y2F0Y2godSl7Yyh1KX19O3IubGVuZ3RoPmk7KWEocltpKytdKTtyLmxlbmd0aD0wLGUubj0hMSx0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQscixvPWUucDtNKG8pJiYoJD9qLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbixvKToodD1zLm9udW5oYW5kbGVkcmVqZWN0aW9uKT90KHtwcm9taXNlOm8scmVhc29uOm59KToocj1zLmNvbnNvbGUpJiZyLmVycm9yJiZyLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG4pKSxlLmE9dm9pZCAwfSwxKX0pfX0sTT1mdW5jdGlvbihlKXt2YXIgdCxyPWUuX2Qsbj1yLmF8fHIuYyxvPTA7aWYoci5oKXJldHVybiExO2Zvcig7bi5sZW5ndGg+bzspaWYodD1uW28rK10sdC5mYWlsfHwhTSh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxEPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5kfHwodC5kPSEwLHQ9dC5yfHx0LHQudj1lLHQucz0yLHQuYT10LmMuc2xpY2UoKSxSKHQsITApKX0sTj1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuZCl7ci5kPSEwLHI9ci5yfHxyO3RyeXtpZihyLnA9PT1lKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1FKGUpKT9nKGZ1bmN0aW9uKCl7dmFyIG49e3I6cixkOiExfTt0cnl7dC5jYWxsKGUsYShOLG4sMSksYShELG4sMSkpfWNhdGNoKG8pe0QuY2FsbChuLG8pfX0pOihyLnY9ZSxyLnM9MSxSKHIsITEpKX1jYXRjaChuKXtELmNhbGwoe3I6cixkOiExfSxuKX19fTtrfHwodz1mdW5jdGlvbihlKXtkKGUpO3ZhciB0PXRoaXMuX2Q9e3A6cCh0aGlzLHcsbSksYzpbXSxhOnZvaWQgMCxzOjAsZDohMSx2OnZvaWQgMCxoOiExLG46ITF9O3RyeXtlKGEoTix0LDEpLGEoRCx0LDEpKX1jYXRjaChyKXtELmNhbGwodCxyKX19LGUoIi4vJC5yZWRlZmluZS1hbGwiKSh3LnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBTKF8odGhpcyx3KSksbj1yLnByb21pc2Usbz10aGlzLl9kO3JldHVybiByLm9rPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ITAsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LG8uYy5wdXNoKHIpLG8uYSYmby5hLnB1c2gociksby5zJiZSKG8sITEpLG59LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSkpLHUodS5HK3UuVyt1LkYqIWsse1Byb21pc2U6d30pLGUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpKHcsbSksZSgiLi8kLnNldC1zcGVjaWVzIikobSksbj1lKCIuLyQuY29yZSIpW21dLHUodS5TK3UuRiohayxtLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFModGhpcykscj10LnJlamVjdDtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKigha3x8TyghMCkpLG0se3Jlc29sdmU6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHcmJngoZS5jb25zdHJ1Y3Rvcix0aGlzKSlyZXR1cm4gZTt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVzb2x2ZTtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKiEoayYmZSgiLi8kLml0ZXItZGV0ZWN0IikoZnVuY3Rpb24oZSl7dy5hbGwoZSlbImNhdGNoIl0oZnVuY3Rpb24oKXt9KX0pKSxtLHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9Qyh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qscz1bXSxhPVQoZnVuY3Rpb24oKXtiKGUsITEscy5wdXNoLHMpO3ZhciByPXMubGVuZ3RoLGE9QXJyYXkocik7cj9vLmVhY2guY2FsbChzLGZ1bmN0aW9uKGUsbyl7dmFyIHM9ITE7dC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHM9ITAsYVtvXT1lLC0tcnx8bihhKSl9LGkpfSk6bihhKX0pO3JldHVybiBhJiZpKGEuZXJyb3IpLHIucHJvbWlzZX0scmFjZTpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlamVjdCxvPVQoZnVuY3Rpb24oKXtiKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gbyYmbihvLmVycm9yKSxyLnByb21pc2V9fSl9LHsiLi8kIjo1NiwiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQuZXhwb3J0IjozNywiLi8kLmZvci1vZiI6MzksIi4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OSwiLi8kLml0ZXItZGV0ZWN0Ijo1MywiLi8kLmxpYnJhcnkiOjU4LCIuLyQubWljcm90YXNrIjo1OSwiLi8kLnJlZGVmaW5lLWFsbCI6NjIsIi4vJC5zYW1lLXZhbHVlIjo2NCwiLi8kLnNldC1wcm90byI6NjUsIi4vJC5zZXQtc3BlY2llcyI6NjYsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIjo2OSwiLi8kLnN0cmljdC1uZXciOjcwLCIuLyQud2tzIjo3OH1dLDg3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5zdHJpbmctYXQiKSghMCk7ZSgiLi8kLml0ZXItZGVmaW5lIikoU3RyaW5nLCJTdHJpbmciLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0seyIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuc3RyaW5nLWF0Ijo3MX1dLDg4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLmdsb2JhbCIpLGk9ZSgiLi8kLmhhcyIpLHM9ZSgiLi8kLmRlc2NyaXB0b3JzIiksYT1lKCIuLyQuZXhwb3J0IiksYz1lKCIuLyQucmVkZWZpbmUiKSx1PWUoIi4vJC5mYWlscyIpLGw9ZSgiLi8kLnNoYXJlZCIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZD1lKCIuLyQudWlkIikscD1lKCIuLyQud2tzIiksYj1lKCIuLyQua2V5b2YiKSxoPWUoIi4vJC5nZXQtbmFtZXMiKSx5PWUoIi4vJC5lbnVtLWtleXMiKSx2PWUoIi4vJC5pcy1hcnJheSIpLF89ZSgiLi8kLmFuLW9iamVjdCIpLGc9ZSgiLi8kLnRvLWlvYmplY3QiKSxtPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaj1uLmdldERlc2MsJD1uLnNldERlc2Msdz1uLmNyZWF0ZSxPPWguZ2V0LGs9by5TeW1ib2wseD1vLkpTT04sQz14JiZ4LnN0cmluZ2lmeSxFPSExLFM9cCgiX2hpZGRlbiIpLFQ9bi5pc0VudW0sUj1sKCJzeW1ib2wtcmVnaXN0cnkiKSxNPWwoInN5bWJvbHMiKSxEPSJmdW5jdGlvbiI9PXR5cGVvZiBrLE49T2JqZWN0LnByb3RvdHlwZSxQPXMmJnUoZnVuY3Rpb24oKXtyZXR1cm4gNyE9dygkKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWooTix0KTtuJiZkZWxldGUgTlt0XSwkKGUsdCxyKSxuJiZlIT09TiYmJChOLHQsbil9OiQsQT1mdW5jdGlvbihlKXt2YXIgdD1NW2VdPXcoay5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUscyYmRSYmUChOLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZnVuY3Rpb24odCl7aSh0aGlzLFMpJiZpKHRoaXNbU10sZSkmJih0aGlzW1NdW2VdPSExKSxQKHRoaXMsZSxtKDEsdCkpfX0pLHR9LEw9ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfSxGPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gciYmaShNLHQpPyhyLmVudW1lcmFibGU/KGkoZSxTKSYmZVtTXVt0XSYmKGVbU11bdF09ITEpLHI9dyhyLHtlbnVtZXJhYmxlOm0oMCwhMSl9KSk6KGkoZSxTKXx8JChlLFMsbSgxLHt9KSksZVtTXVt0XT0hMCksUChlLHQscikpOiQoZSx0LHIpfSxJPWZ1bmN0aW9uKGUsdCl7XyhlKTtmb3IodmFyIHIsbj15KHQ9Zyh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylGKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LFY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD93KGUpOkkodyhlKSx0KX0sVT1mdW5jdGlvbihlKXt2YXIgdD1ULmNhbGwodGhpcyxlKTtyZXR1cm4gdHx8IWkodGhpcyxlKXx8IWkoTSxlKXx8aSh0aGlzLFMpJiZ0aGlzW1NdW2VdP3Q6ITB9LHo9ZnVuY3Rpb24oZSx0KXt2YXIgcj1qKGU9ZyhlKSx0KTtyZXR1cm4hcnx8IWkoTSx0KXx8aShlLFMpJiZlW1NdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfSxIPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKXx8dD09U3x8bi5wdXNoKHQpO3JldHVybiBufSxCPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKSYmbi5wdXNoKE1bdF0pO3JldHVybiBufSxKPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFMKGUpKXtmb3IodmFyIHQscixuPVtlXSxvPTEsaT1hcmd1bWVudHM7aS5sZW5ndGg+bzspbi5wdXNoKGlbbysrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksIXImJnYodCl8fCh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLEwodCk/dm9pZCAwOnR9KSxuWzFdPXQsQy5hcHBseSh4LG4pfX0sVz11KGZ1bmN0aW9uKCl7dmFyIGU9aygpO3JldHVybiJbbnVsbF0iIT1DKFtlXSl8fCJ7fSIhPUMoe2E6ZX0pfHwie30iIT1DKE9iamVjdChlKSl9KTtEfHwoaz1mdW5jdGlvbigpe2lmKEwodGhpcykpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IiKTtyZXR1cm4gQShkKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSl9LGMoay5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksTD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGt9LG4uY3JlYXRlPVYsbi5pc0VudW09VSxuLmdldERlc2M9eixuLnNldERlc2M9RixuLnNldERlc2NzPUksbi5nZXROYW1lcz1oLmdldD1ILG4uZ2V0U3ltYm9scz1CLHMmJiFlKCIuLyQubGlicmFyeSIpJiZjKE4sInByb3BlcnR5SXNFbnVtZXJhYmxlIixVLCEwKSk7dmFyIFk9eyJmb3IiOmZ1bmN0aW9uKGUpe3JldHVybiBpKFIsZSs9IiIpP1JbZV06UltlXT1rKGUpfSxrZXlGb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGIoUixlKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7RT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7RT0hMX19O24uZWFjaC5jYWxsKCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxmdW5jdGlvbihlKXt2YXIgdD1wKGUpO1lbZV09RD90OkEodCl9KSxFPSEwLGEoYS5HK2EuVyx7U3ltYm9sOmt9KSxhKGEuUywiU3ltYm9sIixZKSxhKGEuUythLkYqIUQsIk9iamVjdCIse2NyZWF0ZTpWLGRlZmluZVByb3BlcnR5OkYsZGVmaW5lUHJvcGVydGllczpJLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjp6LGdldE93blByb3BlcnR5TmFtZXM6SCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Qn0pLHgmJmEoYS5TK2EuRiooIUR8fFcpLCJKU09OIix7c3RyaW5naWZ5Okp9KSxmKGssIlN5bWJvbCIpLGYoTWF0aCwiTWF0aCIsITApLGYoby5KU09OLCJKU09OIiwhMCl9LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5lbnVtLWtleXMiOjM2LCIuLyQuZXhwb3J0IjozNywiLi8kLmZhaWxzIjozOCwiLi8kLmdldC1uYW1lcyI6NDAsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaGFzIjo0MiwiLi8kLmlzLWFycmF5Ijo0OCwiLi8kLmtleW9mIjo1NywiLi8kLmxpYnJhcnkiOjU4LCIuLyQucHJvcGVydHktZGVzYyI6NjEsIi4vJC5yZWRlZmluZSI6NjMsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zaGFyZWQiOjY4LCIuLyQudG8taW9iamVjdCI6NzQsIi4vJC51aWQiOjc3LCIuLyQud2tzIjo3OH1dLDg5OltmdW5jdGlvbihlLHQscil7ZSgiLi9lczYuYXJyYXkuaXRlcmF0b3IiKTt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIik7bi5Ob2RlTGlzdD1uLkhUTUxDb2xsZWN0aW9uPW4uQXJyYXl9LHsiLi8kLml0ZXJhdG9ycyI6NTUsIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjo4MH1dLDkwOltmdW5jdGlvbihlLHQscil7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZz1bXSx0aGlzLms9ZX1mdW5jdGlvbiByKGUpeyFmdW5jdGlvbiByKCl7dmFyIG49ZS50YWtlUmVjb3JkcygpO24ubGVuZ3RoJiZlLmsobixlKSxlLmY9c2V0VGltZW91dChyLHQuX3BlcmlvZCl9KCl9ZnVuY3Rpb24gbih0KXt2YXIgcixuPXt0eXBlOm51bGwsdGFyZ2V0Om51bGwsYWRkZWROb2RlczpbXSxyZW1vdmVkTm9kZXM6W10scHJldmlvdXNTaWJsaW5nOm51bGwsbmV4dFNpYmxpbmc6bnVsbCxhdHRyaWJ1dGVOYW1lOm51bGwsYXR0cmlidXRlTmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bnVsbH07Zm9yKHIgaW4gdCluW3JdIT09ZSYmdFtyXSE9PWUmJihuW3JdPXRbcl0pO3JldHVybiBufWZ1bmN0aW9uIG8oZSx0KXt2YXIgcj1hKGUsdCk7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvLGM9bi5sZW5ndGg7dC5hJiZyLmEmJmkobixlLHIuYSx0LmQpLCh0LmJ8fHQuZSkmJihvPXMobixlLHIsdCkpLChvfHxuLmxlbmd0aCE9PWMpJiYocj1hKGUsdCkpfX1mdW5jdGlvbiBpKHQscixvLGkpe2Zvcih2YXIgcyxhLGM9e30sdT1yLmF0dHJpYnV0ZXMsbD11Lmxlbmd0aDtsLS07KXM9dVtsXSxhPXMubmFtZSxpJiZpW2FdPT09ZXx8KHMudmFsdWUhPT1vW2FdJiZ0LnB1c2gobih7dHlwZToiYXR0cmlidXRlcyIsdGFyZ2V0OnIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV0sYXR0cmlidXRlTmFtZXNwYWNlOnMubmFtZXNwYWNlVVJJfSkpLGNbYV09ITApO2ZvcihhIGluIG8pY1thXXx8dC5wdXNoKG4oe3RhcmdldDpyLHR5cGU6ImF0dHJpYnV0ZXMiLGF0dHJpYnV0ZU5hbWU6YSxvbGRWYWx1ZTpvW2FdfSkpfWZ1bmN0aW9uIHModCxyLG8scyl7ZnVuY3Rpb24gYShlLHIsbyxhLGMpe3ZhciBsPWUubGVuZ3RoLTE7Yz0tfigobC1jKS8yKTtmb3IodmFyIGYsZCxwO3A9ZS5wb3AoKTspZj1vW3AuaF0sZD1hW3AuaV0scy5iJiZjJiZNYXRoLmFicyhwLmgtcC5pKT49bCYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2ZdLHJlbW92ZWROb2RlczpbZl0sbmV4dFNpYmxpbmc6Zi5uZXh0U2libGluZyxwcmV2aW91c1NpYmxpbmc6Zi5wcmV2aW91c1NpYmxpbmd9KSksYy0tKSxzLmEmJmQuYSYmaSh0LGYsZC5hLHMuZCkscy5jJiYzPT09Zi5ub2RlVHlwZSYmZi5ub2RlVmFsdWUhPT1kLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6Zn0pKSxzLmUmJnUoZixkKX1mdW5jdGlvbiB1KHIsbyl7Zm9yKHZhciBkLHAsYixoLHksdj1yLmNoaWxkTm9kZXMsXz1vLmIsZz12Lmxlbmd0aCxtPV8/Xy5sZW5ndGg6MCxqPTAsJD0wLHc9MDtnPiR8fG0+dzspaD12WyRdLHk9KGI9X1t3XSkmJmIuaixoPT09eT8ocy5hJiZiLmEmJmkodCxoLGIuYSxzLmQpLHMuYyYmYi5jIT09ZSYmaC5ub2RlVmFsdWUhPT1iLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6aH0pKSxwJiZhKHAscix2LF8saikscy5lJiYoaC5jaGlsZE5vZGVzLmxlbmd0aHx8Yi5iJiZiLmIubGVuZ3RoKSYmdShoLGIpLCQrKyx3KyspOihsPSEwLGR8fChkPXt9LHA9W10pLGgmJihkW2I9YyhoKV18fChkW2JdPSEwLC0xPT09KGI9ZihfLGgsdywiaiIpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6cixhZGRlZE5vZGVzOltoXSxuZXh0U2libGluZzpoLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpoLnByZXZpb3VzU2libGluZ30pKSxqKyspOnAucHVzaCh7aDokLGk6Yn0pKSwkKyspLHkmJnkhPT12WyRdJiYoZFtiPWMoeSldfHwoZFtiXT0hMCwtMT09PShiPWYodix5LCQpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6by5qLHJlbW92ZWROb2RlczpbeV0sbmV4dFNpYmxpbmc6X1t3KzFdLHByZXZpb3VzU2libGluZzpfW3ctMV19KSksai0tKTpwLnB1c2goe2g6YixpOnd9KSksdysrKSk7cCYmYShwLHIsdixfLGopfXZhciBsO3JldHVybiB1KHIsbyksbH1mdW5jdGlvbiBhKGUsdCl7dmFyIHI9ITA7cmV0dXJuIGZ1bmN0aW9uIG4oZSl7dmFyIG89e2o6ZX07cmV0dXJuIXQuY3x8MyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlPyh0LmEmJnImJjE9PT1lLm5vZGVUeXBlJiYoby5hPWwoZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuZCYmIXQuZFtyLm5hbWVdfHwoZVtyLm5hbWVdPXIudmFsdWUpLGV9KSksciYmKHQuYnx8dC5jfHx0LmEmJnQuZSkmJihvLmI9dShlLmNoaWxkTm9kZXMsbikpLHI9dC5lKTpvLmM9ZS5ub2RlVmFsdWUsb30oZSl9ZnVuY3Rpb24gYyhlKXt0cnl7cmV0dXJuIGUuaWR8fChlLm1vX2lkPWUubW9faWR8fGQrKyl9Y2F0Y2godCl7dHJ5e3JldHVybiBlLm5vZGVWYWx1ZX1jYXRjaChyKXtyZXR1cm4gZCsrfX19ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgcj1bXSxuPTA7bjxlLmxlbmd0aDtuKyspcltuXT10KGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciByPXt9LG49MDtuPGUubGVuZ3RoO24rKylyPXQocixlW25dLG4sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gZihlLHQscixuKXtmb3IoO3I8ZS5sZW5ndGg7cisrKWlmKChuP2Vbcl1bbl06ZVtyXSk9PT10KXJldHVybiByO3JldHVybi0xfXQuX3BlcmlvZD0zMCx0LnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj17YTohISh0LmF0dHJpYnV0ZXN8fHQuYXR0cmlidXRlRmlsdGVyfHx0LmF0dHJpYnV0ZU9sZFZhbHVlKSxiOiEhdC5jaGlsZExpc3QsZTohIXQuc3VidHJlZSxjOiEoIXQuY2hhcmFjdGVyRGF0YSYmIXQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKX0saT10aGlzLmcscz0wO3M8aS5sZW5ndGg7cysrKWlbc10ubT09PWUmJmkuc3BsaWNlKHMsMSk7dC5hdHRyaWJ1dGVGaWx0ZXImJihuLmQ9bCh0LmF0dHJpYnV0ZUZpbHRlcixmdW5jdGlvbihlLHQpewpyZXR1cm4gZVt0XT0hMCxlfSkpLGkucHVzaCh7bTplLGw6byhlLG4pfSksdGhpcy5mfHxyKHRoaXMpfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PXRoaXMuZyxyPTA7cjx0Lmxlbmd0aDtyKyspdFtyXS5sKGUpO3JldHVybiBlfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5nPVtdLGNsZWFyVGltZW91dCh0aGlzLmYpLHRoaXMuZj1udWxsfX07dmFyIGQ9MTtyZXR1cm4gdH0odm9pZCAwKX0se31dLDkxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmV8fGZ1bmN0aW9uKGUsdCxyLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgbyxpLHM9WyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZWNvbmZpZ3VyZSIsInNldFByb3RvdHlwZSIsInByZXZlbnRFeHRlbnNpb25zIl0sYT10LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09ZS5jYWxsKHQpfX0oZS5wcm90b3R5cGUudG9TdHJpbmcpLGM9dC5wcm90b3R5cGUuaW5kZXhPZj90LmluZGV4T2Z8fGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gdC5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUscixuKX06ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1yfHwwO248ZS5sZW5ndGg7bisrKWlmKGVbbl09PT10KXJldHVybiBuO3JldHVybi0xfSx1PXIuTWFwIT09biYmTWFwLnByb3RvdHlwZS5mb3JFYWNoP2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBNYXB9OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD1bXTtyZXR1cm57c2l6ZTowLGhhczpmdW5jdGlvbih0KXtyZXR1cm4gYyhlLHQpPi0xfSxnZXQ6ZnVuY3Rpb24ocil7cmV0dXJuIHRbYyhlLHIpXX0sc2V0OmZ1bmN0aW9uKHIsbil7dmFyIG89YyhlLHIpOy0xPT09bz8oZS5wdXNoKHIpLHQucHVzaChuKSx0aGlzLnNpemUrKyk6dFtvXT1ufSwiZGVsZXRlIjpmdW5jdGlvbihyKXt2YXIgbj1jKGUscik7bj4tMSYmKGUuc3BsaWNlKG4sMSksdC5zcGxpY2UobiwxKSx0aGlzLnNpemUtLSl9LGZvckVhY2g6ZnVuY3Rpb24ocil7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspci5jYWxsKGFyZ3VtZW50c1sxXSx0W25dLGVbbl0sdGhpcyl9fX0sbD1lLmdldE93blByb3BlcnR5TmFtZXM/ZnVuY3Rpb24oKXt2YXIgdD1lLmdldE93blByb3BlcnR5TmFtZXM7dHJ5e2FyZ3VtZW50cy5jYWxsZWV9Y2F0Y2gocil7dmFyIG49KHQoYykuam9pbigiICIpKyIgIikucmVwbGFjZSgvcHJvdG90eXBlIHxsZW5ndGggfG5hbWUgL2csIiIpLnNsaWNlKDAsLTEpLnNwbGl0KCIgIik7bi5sZW5ndGgmJih0PWZ1bmN0aW9uKHQpe3ZhciByPWUuZ2V0T3duUHJvcGVydHlOYW1lcyh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClmb3IodmFyIG8saT0wO2k8bi5sZW5ndGg7KShvPWMocixuW2krK10pKT4tMSYmci5zcGxpY2UobywxKTtyZXR1cm4gcn0pfXJldHVybiB0fSgpOmZ1bmN0aW9uKHQpe3ZhciByLG4sbz1bXTtpZigiaGFzT3duUHJvcGVydHkiaW4gdClmb3IociBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJm8ucHVzaChyKTtlbHNle249ZS5oYXNPd25Qcm9wZXJ0eTtmb3IociBpbiB0KW4uY2FsbCh0LHIpJiZvLnB1c2gocil9cmV0dXJuIGEodCkmJm8ucHVzaCgibGVuZ3RoIiksb30sZj1lLmdldFByb3RvdHlwZU9mLGQ9ZS5kZWZpbmVQcm9wZXJ0aWVzJiZlLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixwPXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxyLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oKXt2YXIgZT0rbmV3IERhdGUsdD1lO3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3IoKHQ9K25ldyBEYXRlKS1lKX0sMTcpfX0oKSxiPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1vLmdldChlKTtuPyh5KG4sZSksbShlLG4sdCxyKSk6KG49aChlKSxtKGUsbix0LHIpLDE9PT1vLnNpemUmJnAodikpfSxoPWZ1bmN0aW9uKHQscil7dmFyIG4saT1sKHQpLHM9W10sYT0wLHI9e2hhbmRsZXJzOnUoKSxmcm96ZW46ZS5pc0Zyb3plbj9lLmlzRnJvemVuKHQpOiExLGV4dGVuc2libGU6ZS5pc0V4dGVuc2libGU/ZS5pc0V4dGVuc2libGUodCk6ITAscHJvdG86ZiYmZih0KSxwcm9wZXJ0aWVzOmksdmFsdWVzOnMsbm90aWZpZXI6Zyh0LHIpfTtpZihkKWZvcihuPXIuZGVzY3JpcHRvcnM9W107YTxpLmxlbmd0aDspblthXT1kKHQsaVthXSksc1thXT10W2lbYSsrXV07ZWxzZSBmb3IoO2E8aS5sZW5ndGg7KXNbYV09dFtpW2ErK11dO3JldHVybiBvLnNldCh0LHIpLHJ9LHk9ZnVuY3Rpb24oKXt2YXIgdD1kP2Z1bmN0aW9uKGUsdCxyLG4sbyl7dmFyIGk9dC5wcm9wZXJ0aWVzW3JdLHM9ZVtpXSxhPXQudmFsdWVzW3JdLGM9dC5kZXNjcmlwdG9yc1tyXTsidmFsdWUiaW4gbyYmKGE9PT1zPzA9PT1hJiYxL2EhPT0xL3M6YT09PWF8fHM9PT1zKSYmKGooZSx0LHtuYW1lOmksdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LnZhbHVlc1tyXT1zKSwhYy5jb25maWd1cmFibGV8fG8uY29uZmlndXJhYmxlJiZvLndyaXRhYmxlPT09Yy53cml0YWJsZSYmby5lbnVtZXJhYmxlPT09Yy5lbnVtZXJhYmxlJiZvLmdldD09PWMuZ2V0JiZvLnNldD09PWMuc2V0fHwoaihlLHQse25hbWU6aSx0eXBlOiJyZWNvbmZpZ3VyZSIsb2JqZWN0OmUsb2xkVmFsdWU6YX0sbiksdC5kZXNjcmlwdG9yc1tyXT1vKX06ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dC5wcm9wZXJ0aWVzW3JdLGk9ZVtvXSxzPXQudmFsdWVzW3JdOyhzPT09aT8wPT09cyYmMS9zIT09MS9pOnM9PT1zfHxpPT09aSkmJihqKGUsdCx7bmFtZTpvLHR5cGU6InVwZGF0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6c30sbiksdC52YWx1ZXNbcl09aSl9LHI9ZD9mdW5jdGlvbihlLHIsbixvLGkpe2Zvcih2YXIgcyxhPXIubGVuZ3RoO24mJmEtLTspbnVsbCE9PXJbYV0mJihzPWQoZSxyW2FdKSxuLS0scz90KGUsbyxhLGkscyk6KGooZSxvLHtuYW1lOnJbYV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpvLnZhbHVlc1thXX0saSksby5wcm9wZXJ0aWVzLnNwbGljZShhLDEpLG8udmFsdWVzLnNwbGljZShhLDEpLG8uZGVzY3JpcHRvcnMuc3BsaWNlKGEsMSkpKX06ZnVuY3Rpb24oZSx0LHIsbixvKXtmb3IodmFyIGk9dC5sZW5ndGg7ciYmaS0tOyludWxsIT09dFtpXSYmKGooZSxuLHtuYW1lOnRbaV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpuLnZhbHVlc1tpXX0sbyksbi5wcm9wZXJ0aWVzLnNwbGljZShpLDEpLG4udmFsdWVzLnNwbGljZShpLDEpLHItLSl9O3JldHVybiBmdW5jdGlvbihuLG8saSl7aWYobi5oYW5kbGVycy5zaXplJiYhbi5mcm96ZW4pe3ZhciBzLGEsdSxwLGIsaCx5LHYsXz1uLnZhbHVlcyxnPW4uZGVzY3JpcHRvcnMsbT0wO2lmKG4uZXh0ZW5zaWJsZSlpZihzPW4ucHJvcGVydGllcy5zbGljZSgpLGE9cy5sZW5ndGgsdT1sKG8pLGcpe2Zvcig7bTx1Lmxlbmd0aDspYj11W20rK10scD1jKHMsYiksdj1kKG8sYiksLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChvW2JdKSxnLnB1c2godikpOihzW3BdPW51bGwsYS0tLHQobyxuLHAsaSx2KSk7cihvLHMsYSxuLGkpLGUuaXNFeHRlbnNpYmxlKG8pfHwobi5leHRlbnNpYmxlPSExLGoobyxuLHt0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyIsb2JqZWN0Om99LGkpLG4uZnJvemVuPWUuaXNGcm96ZW4obykpfWVsc2V7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSxoPW9bYl0sLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChoKSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpKSk7cihvLHMsYSxuLGkpfWVsc2UgaWYoIW4uZnJvemVuKXtmb3IoO208cy5sZW5ndGg7bSsrKWI9c1ttXSx0KG8sbixtLGksZChvLGIpKTtlLmlzRnJvemVuKG8pJiYobi5mcm96ZW49ITApfWYmJih5PWYobykseSE9PW4ucHJvdG8mJihqKG8sbix7dHlwZToic2V0UHJvdG90eXBlIixuYW1lOiJfX3Byb3RvX18iLG9iamVjdDpvLG9sZFZhbHVlOm4ucHJvdG99KSxuLnByb3RvPXkpKX19fSgpLHY9ZnVuY3Rpb24oKXtvLnNpemUmJihvLmZvckVhY2goeSksaS5mb3JFYWNoKF8pLHAodikpfSxfPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5jaGFuZ2VSZWNvcmRzO3IubGVuZ3RoJiYoZS5jaGFuZ2VSZWNvcmRzPVtdLHQocikpfSxnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9by5nZXQoZSkpLHQmJnQubm90aWZpZXJ8fHtub3RpZnk6ZnVuY3Rpb24odCl7dC50eXBlO3ZhciByPW8uZ2V0KGUpO2lmKHIpe3ZhciBuLGk9e29iamVjdDplfTtmb3IobiBpbiB0KSJvYmplY3QiIT09biYmKGlbbl09dFtuXSk7aihlLHIsaSl9fSxwZXJmb3JtQ2hhbmdlOmZ1bmN0aW9uKHQscil7aWYoInN0cmluZyIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZyBjaGFuZ2VUeXBlIik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IHBlcmZvcm0gbm9uLWZ1bmN0aW9uIik7dmFyIGkscyxhPW8uZ2V0KGUpLGM9YXJndW1lbnRzWzJdLHU9Yz09PW4/cigpOnIuY2FsbChjKTtpZihhJiZ5KGEsZSx0KSxhJiZ1JiYib2JqZWN0Ij09dHlwZW9mIHUpe3M9e29iamVjdDplLHR5cGU6dH07Zm9yKGkgaW4gdSkib2JqZWN0IiE9PWkmJiJ0eXBlIiE9PWkmJihzW2ldPXVbaV0pO2ooZSxhLHMpfX19fSxtPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWkuZ2V0KHIpO298fGkuc2V0KHIsbz17b2JzZXJ2ZWQ6dSgpLGNoYW5nZVJlY29yZHM6W119KSxvLm9ic2VydmVkLnNldChlLHthY2NlcHRMaXN0Om4uc2xpY2UoKSxkYXRhOnR9KSx0LmhhbmRsZXJzLnNldChyLG8pfSxqPWZ1bmN0aW9uKGUsdCxyLG4pe3QuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbz10Lm9ic2VydmVkLmdldChlKS5hY2NlcHRMaXN0Oygic3RyaW5nIiE9dHlwZW9mIG58fC0xPT09YyhvLG4pKSYmYyhvLHIudHlwZSk+LTEmJnQuY2hhbmdlUmVjb3Jkcy5wdXNoKHIpfSl9O289dSgpLGk9dSgpLGUub2JzZXJ2ZT1mdW5jdGlvbih0LHIsbyl7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IG9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO2lmKGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4ocikpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gYSBmcm96ZW4gZnVuY3Rpb24gb2JqZWN0Iik7aWYobz09PW4pbz1zO2Vsc2UgaWYoIW98fCJvYmplY3QiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGlyZCBhcmd1bWVudCB0byBPYmplY3Qub2JzZXJ2ZSBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MuIik7cmV0dXJuIGIodCxyLG8pLHR9LGUudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09PWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LnVub2JzZXJ2ZSBjYW5ub3QgdW5vYnNlcnZlIG5vbi1vYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO3ZhciByLG49aS5nZXQodCk7cmV0dXJuIG4mJihyPW4ub2JzZXJ2ZWQuZ2V0KGUpKSYmKG4ub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSkscChmdW5jdGlvbigpe18obix0KX0pLDE9PT1uLm9ic2VydmVkLnNpemUmJm4ub2JzZXJ2ZWQuaGFzKGUpP2lbImRlbGV0ZSJdKHQpOm4ub2JzZXJ2ZWRbImRlbGV0ZSJdKGUpLDE9PT1yLmRhdGEuaGFuZGxlcnMuc2l6ZT9vWyJkZWxldGUiXShlKTpyLmRhdGEuaGFuZGxlcnNbImRlbGV0ZSJdKHQpKSxlfSxlLmdldE5vdGlmaWVyPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5nZXROb3RpZmllciBjYW5ub3QgZ2V0Tm90aWZpZXIgbm9uLW9iamVjdCIpO3JldHVybiBlLmlzRnJvemVuJiZlLmlzRnJvemVuKHQpP251bGw6Zyh0KX0sZS5kZWxpdmVyQ2hhbmdlUmVjb3Jkcz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHQ9aS5nZXQoZSk7dCYmKHQub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSksXyh0LGUpKX19KE9iamVjdCxBcnJheSx0aGlzKX0se31dLDkyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuRGF0YU9iamVjdE9ic2VydmVyPXIuRGF0YU9iamVjdFJlcG9ydGVyPXIuU3luY2hlcj12b2lkIDAsZSgibXV0YXRpb25vYnNlcnZlci1zaGltIiksZSgib2JqZWN0Lm9ic2VydmUiKSxlKCJhcnJheS5vYnNlcnZlIik7dmFyIG89ZSgiLi9zeW5jaGVyL1N5bmNoZXIiKSxpPW4obykscz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIiksYT1uKHMpLGM9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciIpLHU9bihjKTtyLlN5bmNoZXI9aVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdFJlcG9ydGVyPWFbImRlZmF1bHQiXSxyLkRhdGFPYmplY3RPYnNlcnZlcj11WyJkZWZhdWx0Il19LHsiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiOjk2LCIuL3N5bmNoZXIvU3luY2hlciI6OTksImFycmF5Lm9ic2VydmUiOjEsIm11dGF0aW9ub2JzZXJ2ZXItc2hpbSI6OTAsIm9iamVjdC5vYnNlcnZlIjo5MX1dLDkzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksdT1uKGMpLGw9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksZj1uKGwpLGQ9ZSgiLi9TeW5jT2JqZWN0IikscD1uKGQpLGI9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxoPW4oYikseT1lKCIuLi91dGlscy91dGlscy5qcyIpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9zeW5jaGVyPXQsYS5fdXJsPXIsYS5fc2NoZW1hPW4sYS5fc3RhdHVzPW8sYS5fc3luY09iaj1uZXcgcFsiZGVmYXVsdCJdKGkpLGEuX2NoaWxkcmVucz1zLGEuX3ZlcnNpb249MCxhLl9jaGlsZElkPTAsYS5fY2hpbGRyZW5PYmplY3RzPXt9LGEuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLGEuX293bmVyPXQuX293bmVyLGEuX2J1cz10Ll9idXN9cmV0dXJuKDAsZlsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24obil7dmFyIG89cituLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24ocil7aWYoci5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogIixyKSxyLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkQ3JlYXRlKHIpO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksKDAsYVsiZGVmYXVsdCJdKShlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5PYmplY3RzW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InBhdXNlIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJyZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6ImFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5fY2hpbGRJZCsrO3ZhciBuPXIuX293bmVyKyIjIityLl9jaGlsZElkLG89ci5fdXJsKyIvY2hpbGRyZW4vIitlLHM9e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpvLGJvZHk6e3Jlc291cmNlOm4sdmFsdWU6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUpe3ZhciBpPXIuX2J1cy5wb3N0TWVzc2FnZShzKTtjb25zb2xlLmxvZygiY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAiK3IuX293bmVyKyIgKTogIixzKTt2YXIgYT1uZXcgaFsiZGVmYXVsdCJdKHIsbix0LHIuX293bmVyLGkpO2Eub25DaGFuZ2UoZnVuY3Rpb24oZSl7ci5fb25DaGFuZ2UoZSx7cGF0aDpvLGNoaWxkSWQ6bn0pfSksci5fY2hpbGRyZW5PYmplY3RzW25dPWEsZShhKX0pfX0se2tleToib25BZGRDaGlsZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkNoaWxkQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlO2NvbnNvbGUubG9nKCJjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICIrdC5fb3duZXIrIiApOiAiLGUpO3ZhciBuPW5ldyBoWyJkZWZhdWx0Il0odCxyLGUuYm9keS52YWx1ZSk7dC5fY2hpbGRyZW5PYmplY3RzW3JdPW4sc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzb3VyY2U6dC5fb3duZXJ9fSl9KTt2YXIgbz17dHlwZTplLnR5cGUsZnJvbTplLmZyb20sdXJsOmUudG8sdmFsdWU6ZS5ib2R5LnZhbHVlLGNoaWxkSWQ6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9O3QuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiYoY29uc29sZS5sb2coIkFERC1DSElMRFJFTi1FVkVOVDogIixvKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSl9fSx7a2V5OiJfb25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKyssIm9uIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6InVwZGF0ZSIsZnJvbTpyLl91cmwsdG86ci5fdXJsKyIvY2hhbmdlcyIsYm9keTp7dmVyc2lvbjpyLl92ZXJzaW9uLHNvdXJjZTpyLl9vd25lcixhdHRyaWJ1dGU6ZS5maWVsZH19O2Uub1R5cGU9PT1kLk9iamVjdFR5cGUuT0JKRUNUP2UuY1R5cGUhPT1kLkNoYW5nZVR5cGUuUkVNT1ZFJiYobi5ib2R5LnZhbHVlPWUuZGF0YSk6KG4uYm9keS5hdHRyaWJ1dGVUeXBlPWUub1R5cGUsbi5ib2R5LnZhbHVlPWUuZGF0YSxlLmNUeXBlIT09ZC5DaGFuZ2VUeXBlLlVQREFURSYmKG4uYm9keS5vcGVyYXRpb249ZS5jVHlwZSkpLHQmJihuLnRvPXQucGF0aCxuLmJvZHkucmVzb3VyY2U9dC5jaGlsZElkKSxyLl9idXMucG9zdE1lc3NhZ2Uobil9fX0se2tleToiX2NoYW5nZU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rMT09PXQuYm9keS52ZXJzaW9uKXtyLl92ZXJzaW9uKys7dmFyIG49dC5ib2R5LmF0dHJpYnV0ZSxvPSgwLHkuZGVlcENsb25lKSh0LmJvZHkudmFsdWUpLGk9ZS5maW5kQmVmb3JlKG4pO2lmKHQuYm9keS5hdHRyaWJ1dGVUeXBlPT09ZC5PYmplY3RUeXBlLkFSUkFZKWlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuQUREKXt2YXIgcz1pLm9iaixhPWkubGFzdDtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHMsW2EsMF0uY29uY2F0KG8pKX1lbHNlIGlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuUkVNT1ZFKXt2YXIgYz1pLm9iaix1PWkubGFzdDtjLnNwbGljZSh1LG8pfWVsc2UgaS5vYmpbaS5sYXN0XT1vO2Vsc2UgdC5ib2R5LnZhbHVlP2kub2JqW2kubGFzdF09bzpkZWxldGUgaS5vYmpbaS5sYXN0XX1lbHNlIGNvbnNvbGUubG9nKCJVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiAiK3IuX3ZlcnNpb24rIiwgbXNnID0+ICIrdC5ib2R5LnZlcnNpb24rIikiKX19LHtrZXk6Il9jaGFuZ2VDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztjb25zb2xlLmxvZygiQ2hhbmdlIGNoaWxkcmVuOiAiLHQuX293bmVyLGUpO3ZhciByPWUuYm9keS5yZXNvdXJjZSxuPXQuX2NoaWxkcmVuT2JqZWN0c1tyXTtuP3QuX2NoYW5nZU9iamVjdChuLl9zeW5jT2JqLGUpOmNvbnNvbGUubG9nKCJObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICIscil9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWF9fSx7a2V5OiJzdGF0dXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXN9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleToiY2hpbGRyZW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT12LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCIuL1N5bmNPYmplY3QiOjk4LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZSgiLi9TeW5jT2JqZWN0IiksdT1uKGMpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8scyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBhPXRoaXM7YS5fcGFyZW50PXQsYS5fY2hpbGRJZD1yLGEuX293bmVyPW8sYS5fbXNnSWQ9cyxhLl9zeW5jT2JqPW5ldyB1WyJkZWZhdWx0Il0obiksYS5fYnVzPXQuX2J1cyxhLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fb3duZXImJihlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fb3duZXIsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmdC5pZD09PWUuX21zZ0lkJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOiIsdCksZS5fb25SZXNwb25zZSh0KSl9KSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyJiZlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RlbGV0ZSBlLl9wYXJlbnQuX2NoaWxkcmVuW2UuX2NoaWxkSWRdLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24odCl7ZSh0KX0pfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihyKX19LHtrZXk6ImNoaWxkSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGo9bihtKSwkPXtBTlk6ImFueSIsU1RBUlQ6InN0YXJ0IixFWEFDVDoiZXhhY3QifSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4sbyxzLGMsbCl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBmPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLHMuZGF0YSxjKSksZD1mO3JldHVybiBkLl92ZXJzaW9uPWwsZC5fZmlsdGVycz17fSxkLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7ZC5fb25GaWx0ZXIoZSl9KSwoMCxpWyJkZWZhdWx0Il0pKHMuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXMuY2hpbGRyZW5zW2VdO2QuX2NoaWxkcmVuT2JqZWN0c1tlXT1uZXcgalsiZGVmYXVsdCJdKGQsZSx0KX0pLGQuX2FsbG9jYXRlTGlzdGVuZXJzKCksZn1yZXR1cm4oMCx2WyJkZWZhdWx0Il0pKHQsZSksKDAsZlsiZGVmYXVsdCJdKSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCsiL2NoYW5nZXMiLGZ1bmN0aW9uKHQpeyJ1cGRhdGUiPT09dC50eXBlJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdfX0se2tleToidW5zdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLG49e3R5cGU6JC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZigiKiIpO289PT1lLmxlbmd0aC0xJiYoMD09PW8/bi50eXBlPSQuQU5ZOihuLnR5cGU9JC5TVEFSVCxyPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkpKSx0aGlzLl9maWx0ZXJzW3JdPW59fSx7a2V5OiJfb25GaWx0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7KDAsaVsiZGVmYXVsdCJdKSh0Ll9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX2ZpbHRlcnNbcl07bi50eXBlPT09JC5BTlk/bi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLlNUQVJUPzA9PT1lLmZpZWxkLmluZGV4T2YocikmJm4uY2FsbGJhY2soZSk6bi50eXBlPT09JC5FWEFDVCYmZS5maWVsZD09PXImJm4uY2FsbGJhY2soZSl9KX19XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09dyx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdCI6OTMsIi4vRGF0YU9iamVjdENoaWxkIjo5NCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuLi91dGlscy91dGlscy5qcyIpLGo9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLGkscyl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBjPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLGkscykpLGw9YztyZXR1cm4gbC5fc3Vic2NyaXB0aW9ucz17fSxsLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci0iK3IrIi1TRU5EOiAiLGUpLGwuX29uQ2hhbmdlKGUpfSksbC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxjfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9vYmplY3RMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdC0iK2UuX3VybCsiLVJDVjogIix0KSx0LnR5cGUpe2Nhc2UicmVzcG9uc2UiOmUuX29uUmVzcG9uc2UodCk7YnJlYWs7Y2FzZSJyZWFkIjplLl9vblJlYWQodCl9fSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiaW52aXRlT2JzZXJ2ZXJzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ImNyZWF0ZSIsZnJvbTp0Ll9zeW5jaGVyLl9vd25lcix0bzp0Ll9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6dC5fdXJsLHNjaGVtYTp0Ll9zY2hlbWEsdmFsdWU6dC5fc3luY09iai5kYXRhLGF1dGhvcmlzZTplfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZToiZGVsZXRlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fcmVwb3J0ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvblN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyPWV9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToib25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlYWRIYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogIixlKSxlLmJvZHkudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uVW5TdWJzY3JpYmUoZSl9fX0se2tleToiX29uU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj17dHlwZTplLmJvZHkudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNjZXB0OmZ1bmN0aW9uKCl7dmFyIG49e3VybDpyLHN0YXR1czoib24ifTt0Ll9zdWJzY3JpcHRpb25zW3JdPW47dmFyIG89e307cmV0dXJuKDAsaVsiZGVmYXVsdCJdKSh0Ll9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dC5fY2hpbGRyZW5PYmplY3RzW2VdLmRhdGE7b1tlXT0oMCxtLmRlZXBDbG9uZSkocil9KSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc2NoZW1hOnQuX3NjaGVtYSx2ZXJzaW9uOnQuX3ZlcnNpb24sdmFsdWU6e2RhdGE6KDAsbS5kZWVwQ2xvbmUpKHQuZGF0YSksY2hpbGRyZW5zOm99fX0pLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpyfX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixuKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXQuX3N1YnNjcmlwdGlvbnNbcl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsb2JqZWN0Om59O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsciksdC5fb25SZXNwb25zZUhhbmRsZXIocikpfX0se2tleToiX29uUmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGFjY2VwdDpmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKX19KX0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMSxkZXNjOnJ9fSl9fTt0Ll9vblJlYWRIYW5kbGVyJiYoY29uc29sZS5sb2coIlJFQUQtRVZFTlQ6ICIsciksdC5fb25SZWFkSGFuZGxlcihyKSl9fSx7a2V5OiJzdWJzY3JpcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc319XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09aix0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMDAsIi4vRGF0YU9iamVjdCI6OTMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOjE1fV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8peygwLGlbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgcz10aGlzO3MuX293bmVyPXQscy5fdXJsPXIscy5fYnVzPW4scy5fY2hpbGRyZW49byxzLl9jaGFuZ2VzPVtdLHMuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhUHJvdmlzaW9uYWwtIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlcy5wdXNoKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiYXBwbHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpfSl9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufX1dKSxlfSgpO3JbImRlZmF1bHQiXT1jLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuT2JqZWN0VHlwZT1yLkNoYW5nZVR5cGU9dm9pZCAwO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciByPXRoaXM7ci5fb2JzZXJ2ZXJzPVtdLHIuX2ZpbHRlcnM9e30sdD9yLl9kYXRhPSgwLGwuZGVlcENsb25lKSh0KTpyLl9kYXRhPXt9LHIuX2ludGVybmFsT2JzZXJ2ZShuZXcgZCxyLl9kYXRhKX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleToiZmluZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLiIpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleToiZmluZEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj1lLnNwbGl0KCIuIik7cmV0dXJuIHQubGFzdD1yLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQociksdH19LHtrZXk6Il9maW5kV2l0aFNwbGl0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6Il9pc09ic2VydmFibGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPT09T2JqZWN0fHxlLmNvbnN0cnVjdG9yPT09QXJyYXl9fSx7a2V5OiJfaW50ZXJuYWxPYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbj1mdW5jdGlvbih0KXtyLl9vbkNoYW5nZXMoZSx0KX07aWYodC5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7T2JqZWN0Lm9ic2VydmUodCxuKTtmb3IodmFyIG8gaW4gdClyLl9pc09ic2VydmFibGUodFtvXSkmJnIuX2ludGVybmFsT2JzZXJ2ZShlWyJuZXciXShvKSx0W29dKX1lbHNlIGlmKHQuY29uc3RydWN0b3I9PT1BcnJheSl7QXJyYXkub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgaSBpbiB0KWlmKHIuX2lzT2JzZXJ2YWJsZSh0W2ldKSl7dmFyIHM9ZVsibmV3Il0obmV3IHAodFtpXSxpKSk7ci5faW50ZXJuYWxPYnNlcnZlKHMsdFtpXSl9fX19fSx7a2V5OiJfb25DaGFuZ2VzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHQpe3ZhciBvPXRbbl0ub2JqZWN0LGk9dm9pZCAwO2lmKG8uY29uc3RydWN0b3I9PT1PYmplY3QmJihpPWguT0JKRUNUKSxvLmNvbnN0cnVjdG9yPT09QXJyYXkmJihpPWguQVJSQVkpLCJzcGxpY2UiPT09dFtuXS50eXBlKSFmdW5jdGlvbigpe3ZhciBzPXRbbl0uaW5kZXgsYT1lWyJuZXciXSgiIitzKSxjPWEudG9TdHJpbmcoKSx1PXRbbl0ucmVtb3ZlZC5sZW5ndGg7aWYoMCE9PXUpe3ZhciBmPXRbbl0ucmVtb3ZlZDtmLmZvckVhY2goZnVuY3Rpb24odCxuKXtyLl9pc09ic2VydmFibGUodCkmJmUucmVtb3ZlSW5kZXgocytuKX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5SRU1PVkUsb1R5cGU6aSxmaWVsZDpjLGRhdGE6dX0pfXZhciBkPXRbbl0uYWRkZWRDb3VudDtpZigwIT09ZCl7dmFyIGg9by5zbGljZShzLHMrZCk7aC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbz1lWyJuZXciXShuZXcgcCh0LHMrbikpO3IuX2ludGVybmFsT2JzZXJ2ZShvLHQpfX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDpjLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGgpfSl9cyE9PW8ubGVuZ3RoLTEmJmUucmVJbmRleEZyb20obyl9KCk7ZWxzZXt2YXIgcz1lWyJuZXciXSh0W25dLm5hbWUpLGE9cy50b1N0cmluZygpO2lmKC0xIT09YS5pbmRleE9mKCJTeW1ib2wiKSljb250aW51ZTt2YXIgYz1vW3Rbbl0ubmFtZV07InVwZGF0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5VUERBVEUsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSksImFkZCI9PT10W25dLnR5cGUmJih0aGlzLl9pbnRlcm5hbE9ic2VydmUocyxjKSx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuQURELG9UeXBlOmksZmllbGQ6YSxkYXRhOigwLGwuZGVlcENsb25lKShjKX0pKSwiZGVsZXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmF9KX19fX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLGV9KCksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSksdGhpcy5fcGF0aD1bXSx0aGlzLl9vYnNlcnZhYmxlcz17fX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InJlbW92ZUluZGV4Iix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fb2JzZXJ2YWJsZXNbZV19fSx7a2V5OiJyZUluZGV4RnJvbSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHRoaXMuX29ic2VydmFibGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX29ic2VydmFibGVzW3JdLG89ZS5pbmRleE9mKG4ub2JqKTtuLmlkeCE9byYmKG4uaWR4PW8sZGVsZXRlIHQuX29ic2VydmFibGVzW3JdLHQuX29ic2VydmFibGVzW29dPW4pfSl9fSx7a2V5OiJuZXciLHZhbHVlOmZ1bmN0aW9uKGUpe2UuY29uc3RydWN0b3I9PXAmJih0aGlzLl9vYnNlcnZhYmxlc1tlLmlkeF09ZSk7dmFyIHQ9dGhpcy5jbG9uZSgpO3JldHVybiB0Ll9wYXRoLnB1c2goZSksdH19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fcGF0aC5wdXNoKGUpfSksdH19LHtrZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24odCxyKXswPT09cj9lPXQudG9TdHJpbmcoKTplKz0iLiIrdC50b1N0cmluZygpfSksZX19XSksZX0oKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLm9iaj10LHRoaXMuaWR4PXJ9cmV0dXJuKDAsdVsiZGVmYXVsdCJdKShlLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHgudG9TdHJpbmcoKX19XSksZX0oKSxiPXIuQ2hhbmdlVHlwZT17VVBEQVRFOiJ1cGRhdGUiLEFERDoiYWRkIixSRU1PVkU6InJlbW92ZSJ9LGg9ci5PYmplY3RUeXBlPXtPQkpFQ1Q6Im9iamVjdCIsQVJSQVk6ImFycmF5In07clsiZGVmYXVsdCJdPWZ9LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYyksbD1lKCIuL0RhdGFPYmplY3RSZXBvcnRlciIpLGY9bihsKSxkPWUoIi4vRGF0YU9iamVjdE9ic2VydmVyIikscD1uKGQpLGI9ZSgiLi9EYXRhUHJvdmlzaW9uYWwiKSxoPW4oYikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4peygwLGFbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgbz10aGlzO28uX293bmVyPXQsby5fYnVzPXIsby5fc3ViVVJMPW4ucnVudGltZVVSTCsiL3NtIixvLl9yZXBvcnRlcnM9e30sby5fb2JzZXJ2ZXJzPXt9LG8uX3Byb3Zpc2lvbmFscz17fSxyLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aWYoZS5mcm9tIT09dClzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjpvLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOm8uX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjpvLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6ImNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7ci5yZXBvcnRlcj1uLl9vd25lcixyLnNjaGVtYT1lO3ZhciBvPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fb3duZXIsdG86bi5fc3ViVVJMLGJvZHk6e3NjaGVtYTplLHZhbHVlOnIsYXV0aG9yaXNlOnR9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LGkpe24uX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSxhPW5ldyBmWyJkZWZhdWx0Il0obixzLGUsIm9uIixyLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7bi5fcmVwb3J0ZXJzW3NdPWEsdChhKX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKG8saSl7ci5fYnVzLnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24obil7Y29uc29sZS5sb2coInN1YnNjcmliZS1yZXNwb25zZTogIixuKTt2YXIgcz1yLl9wcm92aXNpb25hbHNbdF07aWYoZGVsZXRlIHIuX3Byb3Zpc2lvbmFsc1t0XSxzJiZzLl9yZWxlYXNlTGlzdGVuZXJzKCksbi5ib2R5LmNvZGU8MjAwKXM9bmV3IGhbImRlZmF1bHQiXShyLl9vd25lcix0LHIuX2J1cyxuLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpLHIuX3Byb3Zpc2lvbmFsc1t0XT1zO2Vsc2UgaWYoMjAwPT09bi5ib2R5LmNvZGUpe3ZhciBhPW5ldyBwWyJkZWZhdWx0Il0ocix0LGUsIm9uIixuLmJvZHkudmFsdWUscy5jaGlsZHJlbixuLmJvZHkudmVyc2lvbik7ci5fb2JzZXJ2ZXJzW3RdPWEsbyhhKSxzLmFwcGx5KGEpfWVsc2UgaShuLmJvZHkuZGVzYyl9KX0pfX0se2tleToicmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJyZWFkIixmcm9tOnQuX293bmVyLHRvOmV9O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsbil7dC5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coInJlYWQtcmVzcG9uc2U6ICIsdCksMjAwPT09dC5ib2R5LmNvZGU/ZSh0LmJvZHkudmFsdWUpOm4odC5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtyLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbj0yMDA7ciYmKG49ciksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbiksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG4pKX19LHtrZXk6Il9vblJlbW90ZURlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXQuX29ic2VydmVyc1tyXTtpZihuKXt2YXIgbz17dHlwZTplLnR5cGUsdXJsOnIsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbz0yMDA7ciYmKG89ciksMjAwPT09byYmblsiZGVsZXRlIl0oKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpvLHNvdXJjZTp0Ll9vd25lcn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbyksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG8pKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fSx7a2V5OiJvd25lciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX293bmVyfX0se2tleToicmVwb3J0ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0ZXJzfX0se2tleToib2JzZXJ2ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT15LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiOjk1LCIuL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vRGF0YVByb3Zpc2lvbmFsIjo5NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsYlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBjKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGwoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYyhlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGY9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGYpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1hLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1jLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1sfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3fV19LHt9LFs5Ml0pKDkyKX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCgovKiBNb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZXNlIG9wdGlvbnMgYXQganNoaW50LmNvbS9kb2NzL29wdGlvbnMgKi8KLyoganNoaW50IGJyb3dzZXI6IHRydWUsIGNhbWVsY2FzZTogdHJ1ZSwgY3VybHk6IHRydWUsIGRldmVsOiB0cnVlLAogICBlcWVxZXE6IHRydWUsIGZvcmluOiBmYWxzZSwgZ2xvYmFsc3RyaWN0OiB0cnVlLCBub2RlOiB0cnVlLAogICBxdW90bWFyazogc2luZ2xlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiBzdHJpY3QgKi8KLyogZ2xvYmFsIG1velJUQ0ljZUNhbmRpZGF0ZSwgbW96UlRDUGVlckNvbm5lY3Rpb24sIFByb21pc2UsCm1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbiwgd2Via2l0UlRDUGVlckNvbm5lY3Rpb24sIE1lZGlhU3RyZWFtVHJhY2ssCk1lZGlhU3RyZWFtLCBSVENJY2VHYXRoZXJlciwgUlRDSWNlVHJhbnNwb3J0LCBSVENEdGxzVHJhbnNwb3J0LApSVENSdHBTZW5kZXIsIFJUQ1J0cFJlY2VpdmVyKi8KLyogZXhwb3J0ZWQgdHJhY2UscmVxdWVzdFVzZXJNZWRpYSAqLwoKJ3VzZSBzdHJpY3QnOwoKdmFyIGdldFVzZXJNZWRpYSA9IG51bGw7CnZhciBhdHRhY2hNZWRpYVN0cmVhbSA9IG51bGw7CnZhciByZWF0dGFjaE1lZGlhU3RyZWFtID0gbnVsbDsKdmFyIHdlYnJ0Y0RldGVjdGVkQnJvd3NlciA9IG51bGw7CnZhciB3ZWJydGNEZXRlY3RlZFZlcnNpb24gPSBudWxsOwp2YXIgd2VicnRjTWluaW11bVZlcnNpb24gPSBudWxsOwp2YXIgd2VicnRjVXRpbHMgPSB7CiAgbG9nOiBmdW5jdGlvbigpIHsKICAgIC8vIHN1cHByZXNzIGNvbnNvbGUubG9nIG91dHB1dCB3aGVuIGJlaW5nIGluY2x1ZGVkIGFzIGEgbW9kdWxlLgogICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnIHx8CiAgICAgICAgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpOwogIH0sCiAgZXh0cmFjdFZlcnNpb246IGZ1bmN0aW9uKHVhc3RyaW5nLCBleHByLCBwb3MpIHsKICAgIHZhciBtYXRjaCA9IHVhc3RyaW5nLm1hdGNoKGV4cHIpOwogICAgcmV0dXJuIG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+PSBwb3MgJiYgcGFyc2VJbnQobWF0Y2hbcG9zXSwgMTApOwogIH0KfTsKCmZ1bmN0aW9uIHRyYWNlKHRleHQpIHsKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgZm9yIGxvZ2dpbmcuCiAgaWYgKHRleHRbdGV4dC5sZW5ndGggLSAxXSA9PT0gJ1xuJykgewogICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDAsIHRleHQubGVuZ3RoIC0gMSk7CiAgfQogIGlmICh3aW5kb3cucGVyZm9ybWFuY2UpIHsKICAgIHZhciBub3cgPSAod2luZG93LnBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMCkudG9GaXhlZCgzKTsKICAgIHdlYnJ0Y1V0aWxzLmxvZyhub3cgKyAnOiAnICsgdGV4dCk7CiAgfSBlbHNlIHsKICAgIHdlYnJ0Y1V0aWxzLmxvZyh0ZXh0KTsKICB9Cn0KCmlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgewogIGlmICh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCAmJgogICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7CiAgICAvLyBTaGltIHRoZSBzcmNPYmplY3QgcHJvcGVydHksIG9uY2UsIHdoZW4gSFRNTE1lZGlhRWxlbWVudCBpcyBmb3VuZC4KICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmNPYmplY3QnLCB7CiAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gSWYgcHJlZml4ZWQgc3JjT2JqZWN0IHByb3BlcnR5IGV4aXN0cywgcmV0dXJuIGl0LgogICAgICAgIC8vIE90aGVyd2lzZSB1c2UgdGhlIHNoaW1tZWQgcHJvcGVydHksIF9zcmNPYmplY3QKICAgICAgICByZXR1cm4gJ21velNyY09iamVjdCcgaW4gdGhpcyA/IHRoaXMubW96U3JjT2JqZWN0IDogdGhpcy5fc3JjT2JqZWN0OwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICAgIGlmICgnbW96U3JjT2JqZWN0JyBpbiB0aGlzKSB7CiAgICAgICAgICB0aGlzLm1velNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gVXNlIF9zcmNPYmplY3QgYXMgYSBwcml2YXRlIHByb3BlcnR5IGZvciB0aGlzIHNoaW0KICAgICAgICAgIHRoaXMuX3NyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgIC8vIFRPRE86IHJldm9rZU9iamVjdFVybCh0aGlzLnNyYykgd2hlbiAhc3RyZWFtIHRvIHJlbGVhc2UgcmVzb3VyY2VzPwogICAgICAgICAgdGhpcy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9CiAgLy8gUHJveHkgZXhpc3RpbmcgZ2xvYmFscwogIGdldFVzZXJNZWRpYSA9IHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRvci5nZXRVc2VyTWVkaWE7Cn0KCi8vIEF0dGFjaCBhIG1lZGlhIHN0cmVhbSB0byBhbiBlbGVtZW50LgphdHRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHN0cmVhbSkgewogIGVsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtOwp9OwoKcmVhdHRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uKHRvLCBmcm9tKSB7CiAgdG8uc3JjT2JqZWN0ID0gZnJvbS5zcmNPYmplY3Q7Cn07CgppZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5uYXZpZ2F0b3IpIHsKICB3ZWJydGNVdGlscy5sb2coJ1RoaXMgZG9lcyBub3QgYXBwZWFyIHRvIGJlIGEgYnJvd3NlcicpOwogIHdlYnJ0Y0RldGVjdGVkQnJvd3NlciA9ICdub3QgYSBicm93c2VyJzsKfSBlbHNlIGlmIChuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7CiAgd2VicnRjVXRpbHMubG9nKCdUaGlzIGFwcGVhcnMgdG8gYmUgRmlyZWZveCcpOwoKICB3ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSAnZmlyZWZveCc7CgogIC8vIHRoZSBkZXRlY3RlZCBmaXJlZm94IHZlcnNpb24uCiAgd2VicnRjRGV0ZWN0ZWRWZXJzaW9uID0gd2VicnRjVXRpbHMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgL0ZpcmVmb3hcLyhbMC05XSspXC4vLCAxKTsKCiAgLy8gdGhlIG1pbmltdW0gZmlyZWZveCB2ZXJzaW9uIHN0aWxsIHN1cHBvcnRlZCBieSBhZGFwdGVyLgogIHdlYnJ0Y01pbmltdW1WZXJzaW9uID0gMzE7CgogIC8vIFNoaW0gZm9yIFJUQ1BlZXJDb25uZWN0aW9uIG9uIG9sZGVyIHZlcnNpb25zLgogIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICBpZiAod2VicnRjRGV0ZWN0ZWRWZXJzaW9uIDwgMzgpIHsKICAgICAgICAvLyAudXJscyBpcyBub3Qgc3VwcG9ydGVkIGluIEZGIDwgMzguCiAgICAgICAgLy8gY3JlYXRlIFJUQ0ljZVNlcnZlcnMgd2l0aCBhIHNpbmdsZSB1cmwuCiAgICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVNlcnZlcnMpIHsKICAgICAgICAgIHZhciBuZXdJY2VTZXJ2ZXJzID0gW107CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07CiAgICAgICAgICAgIGlmIChzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybHMnKSkgewogICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2VydmVyLnVybHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgIHZhciBuZXdTZXJ2ZXIgPSB7CiAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLnVybHNbal0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZiAoc2VydmVyLnVybHNbal0uaW5kZXhPZigndHVybicpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG5ld1NlcnZlci51c2VybmFtZSA9IHNlcnZlci51c2VybmFtZTsKICAgICAgICAgICAgICAgICAgbmV3U2VydmVyLmNyZWRlbnRpYWwgPSBzZXJ2ZXIuY3JlZGVudGlhbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChuZXdTZXJ2ZXIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2gocGNDb25maWcuaWNlU2VydmVyc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHBjQ29uZmlnLmljZVNlcnZlcnMgPSBuZXdJY2VTZXJ2ZXJzOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbmV3IG1velJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTsgLy8ganNjczppZ25vcmUgcmVxdWlyZUNhcGl0YWxpemVkQ29uc3RydWN0b3JzCiAgICB9OwogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSA9IG1velJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTsKCiAgICAvLyB3cmFwIHN0YXRpYyBtZXRob2RzLiBDdXJyZW50bHkganVzdCBnZW5lcmF0ZUNlcnRpZmljYXRlLgogICAgaWYgKG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiBtb3pSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlLmFwcGx5KG51bGwsCiAgICAgICAgICAgICAgICBhcmd1bWVudHMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gbW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uOwogICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA9IG1velJUQ0ljZUNhbmRpZGF0ZTsKICB9CgogIC8vIGdldFVzZXJNZWRpYSBjb25zdHJhaW50cyBzaGltLgogIGdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHsKICAgIHZhciBjb25zdHJhaW50c1RvRkYzNyA9IGZ1bmN0aW9uKGMpIHsKICAgICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLnJlcXVpcmUpIHsKICAgICAgICByZXR1cm4gYzsKICAgICAgfQogICAgICB2YXIgcmVxdWlyZSA9IFtdOwogICAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgIGlmIChrZXkgPT09ICdyZXF1aXJlJyB8fCBrZXkgPT09ICdhZHZhbmNlZCcgfHwga2V5ID09PSAnbWVkaWFTb3VyY2UnKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciByID0gY1trZXldID0gKHR5cGVvZiBjW2tleV0gPT09ICdvYmplY3QnKSA/CiAgICAgICAgICAgIGNba2V5XSA6IHtpZGVhbDogY1trZXldfTsKICAgICAgICBpZiAoci5taW4gIT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICByLm1heCAhPT0gdW5kZWZpbmVkIHx8IHIuZXhhY3QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVxdWlyZS5wdXNoKGtleSk7CiAgICAgICAgfQogICAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmICh0eXBlb2Ygci5leGFjdCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjW2tleV0gPSByLmV4YWN0OwogICAgICAgICAgfQogICAgICAgICAgZGVsZXRlIHIuZXhhY3Q7CiAgICAgICAgfQogICAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGMuYWR2YW5jZWQgPSBjLmFkdmFuY2VkIHx8IFtdOwogICAgICAgICAgdmFyIG9jID0ge307CiAgICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIG9jW2tleV0gPSB7bWluOiByLmlkZWFsLCBtYXg6IHIuaWRlYWx9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb2Nba2V5XSA9IHIuaWRlYWw7CiAgICAgICAgICB9CiAgICAgICAgICBjLmFkdmFuY2VkLnB1c2gob2MpOwogICAgICAgICAgZGVsZXRlIHIuaWRlYWw7CiAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHIpLmxlbmd0aCkgewogICAgICAgICAgICBkZWxldGUgY1trZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChyZXF1aXJlLmxlbmd0aCkgewogICAgICAgIGMucmVxdWlyZSA9IHJlcXVpcmU7CiAgICAgIH0KICAgICAgcmV0dXJuIGM7CiAgICB9OwogICAgaWYgKHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA8IDM4KSB7CiAgICAgIHdlYnJ0Y1V0aWxzLmxvZygnc3BlYzogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICAgIGlmIChjb25zdHJhaW50cy5hdWRpbykgewogICAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gY29uc3RyYWludHNUb0ZGMzcoY29uc3RyYWludHMuYXVkaW8pOwogICAgICB9CiAgICAgIGlmIChjb25zdHJhaW50cy52aWRlbykgewogICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0ZGMzcoY29uc3RyYWludHMudmlkZW8pOwogICAgICB9CiAgICAgIHdlYnJ0Y1V0aWxzLmxvZygnZmYzNzogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICB9CiAgICByZXR1cm4gbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYShjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKTsKICB9OwoKICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZ2V0VXNlck1lZGlhOwoKICAvLyBTaGltIGZvciBtZWRpYURldmljZXMgb24gb2xkZXIgdmVyc2lvbnMuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID0ge2dldFVzZXJNZWRpYTogcmVxdWVzdFVzZXJNZWRpYSwKICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7IH0sCiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKCkgeyB9CiAgICB9OwogIH0KICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgPQogICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgfHwgZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICB2YXIgaW5mb3MgPSBbCiAgICAgICAge2tpbmQ6ICdhdWRpb2lucHV0JywgZGV2aWNlSWQ6ICdkZWZhdWx0JywgbGFiZWw6ICcnLCBncm91cElkOiAnJ30sCiAgICAgICAge2tpbmQ6ICd2aWRlb2lucHV0JywgZGV2aWNlSWQ6ICdkZWZhdWx0JywgbGFiZWw6ICcnLCBncm91cElkOiAnJ30KICAgICAgXTsKICAgICAgcmVzb2x2ZShpbmZvcyk7CiAgICB9KTsKICB9OwoKICBpZiAod2VicnRjRGV0ZWN0ZWRWZXJzaW9uIDwgNDEpIHsKICAgIC8vIFdvcmsgYXJvdW5kIGh0dHA6Ly9idWd6aWwubGEvMTE2OTY2NQogICAgdmFyIG9yZ0VudW1lcmF0ZURldmljZXMgPQogICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcy5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBvcmdFbnVtZXJhdGVEZXZpY2VzKCkudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoZS5uYW1lID09PSAnTm90Rm91bmRFcnJvcicpIHsKICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgZTsKICAgICAgfSk7CiAgICB9OwogIH0KfSBlbHNlIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhICYmIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikgewogIHdlYnJ0Y1V0aWxzLmxvZygnVGhpcyBhcHBlYXJzIHRvIGJlIENocm9tZScpOwoKICB3ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSAnY2hyb21lJzsKCiAgLy8gdGhlIGRldGVjdGVkIGNocm9tZSB2ZXJzaW9uLgogIHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA9IHdlYnJ0Y1V0aWxzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgIC9DaHJvbShlfGl1bSlcLyhbMC05XSspXC4vLCAyKTsKCiAgLy8gdGhlIG1pbmltdW0gY2hyb21lIHZlcnNpb24gc3RpbGwgc3VwcG9ydGVkIGJ5IGFkYXB0ZXIuCiAgd2VicnRjTWluaW11bVZlcnNpb24gPSAzODsKCiAgLy8gVGhlIFJUQ1BlZXJDb25uZWN0aW9uIG9iamVjdC4KICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgLy8gVHJhbnNsYXRlIGljZVRyYW5zcG9ydFBvbGljeSB0byBpY2VUcmFuc3BvcnRzLAogICAgLy8gc2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9NDg2OQogICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSkgewogICAgICBwY0NvbmZpZy5pY2VUcmFuc3BvcnRzID0gcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgfQoKICAgIHZhciBwYyA9IG5ldyB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7IC8vIGpzY3M6aWdub3JlIHJlcXVpcmVDYXBpdGFsaXplZENvbnN0cnVjdG9ycwogICAgdmFyIG9yaWdHZXRTdGF0cyA9IHBjLmdldFN0YXRzLmJpbmQocGMpOwogICAgcGMuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3Rvciwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7IC8vIGpzaGludCBpZ25vcmU6IGxpbmUKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0CiAgICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMoc2VsZWN0b3IsIHN1Y2Nlc3NDYWxsYmFjayk7CiAgICAgIH0KCiAgICAgIHZhciBmaXhDaHJvbWVTdGF0cyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHN0YW5kYXJkUmVwb3J0ID0ge307CiAgICAgICAgdmFyIHJlcG9ydHMgPSByZXNwb25zZS5yZXN1bHQoKTsKICAgICAgICByZXBvcnRzLmZvckVhY2goZnVuY3Rpb24ocmVwb3J0KSB7CiAgICAgICAgICB2YXIgc3RhbmRhcmRTdGF0cyA9IHsKICAgICAgICAgICAgaWQ6IHJlcG9ydC5pZCwKICAgICAgICAgICAgdGltZXN0YW1wOiByZXBvcnQudGltZXN0YW1wLAogICAgICAgICAgICB0eXBlOiByZXBvcnQudHlwZQogICAgICAgICAgfTsKICAgICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICBzdGFuZGFyZFN0YXRzW25hbWVdID0gcmVwb3J0LnN0YXQobmFtZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0czsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHN0YW5kYXJkUmVwb3J0OwogICAgICB9OwoKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgewogICAgICAgIHZhciBzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyID0gZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgIGFyZ3NbMV0oZml4Q2hyb21lU3RhdHMocmVzcG9uc2UpKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIFtzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyLCBhcmd1bWVudHNbMF1dKTsKICAgICAgfQoKICAgICAgLy8gcHJvbWlzZS1zdXBwb3J0CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDEgJiYgc2VsZWN0b3IgPT09IG51bGwpIHsKICAgICAgICAgIG9yaWdHZXRTdGF0cy5hcHBseShzZWxmLCBbCiAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUuYXBwbHkobnVsbCwgW2ZpeENocm9tZVN0YXRzKHJlc3BvbnNlKV0pOwogICAgICAgICAgICAgIH0sIHJlamVjdF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvcmlnR2V0U3RhdHMuYXBwbHkoc2VsZiwgW3Jlc29sdmUsIHJlamVjdF0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIHJldHVybiBwYzsKICB9OwogIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CgogIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuCiAgaWYgKHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sICdnZW5lcmF0ZUNlcnRpZmljYXRlJywgewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZS5hcHBseShudWxsLAogICAgICAgICAgICAgIGFyZ3VtZW50cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICAvLyBhZGQgcHJvbWlzZSBzdXBwb3J0CiAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgd2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYKICAgICAgICAgIHR5cGVvZihhcmd1bWVudHNbMF0pID09PSAnb2JqZWN0JykpIHsKICAgICAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQ7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFtyZXNvbHZlLCByZWplY3QsIG9wdHNdKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH07CiAgfSk7CgogIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsCiAgICAgICdhZGRJY2VDYW5kaWRhdGUnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgd2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIG5hdGl2ZU1ldGhvZC5hcHBseShzZWxmLCBbYXJnc1swXSwKICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSAyKSB7CiAgICAgICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwsIFtdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlcnJdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1dCiAgICAgICAgICApOwogICAgICB9KTsKICAgIH07CiAgfSk7CgogIC8vIGdldFVzZXJNZWRpYSBjb25zdHJhaW50cyBzaGltLgogIHZhciBjb25zdHJhaW50c1RvQ2hyb21lID0gZnVuY3Rpb24oYykgewogICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7CiAgICAgIHJldHVybiBjOwogICAgfQogICAgdmFyIGNjID0ge307CiAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgciA9ICh0eXBlb2YgY1trZXldID09PSAnb2JqZWN0JykgPyBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07CiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7CiAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgIH0KICAgICAgdmFyIG9sZG5hbWUgPSBmdW5jdGlvbihwcmVmaXgsIG5hbWUpIHsKICAgICAgICBpZiAocHJlZml4KSB7CiAgICAgICAgICByZXR1cm4gcHJlZml4ICsgbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAobmFtZSA9PT0gJ2RldmljZUlkJykgPyAnc291cmNlSWQnIDogbmFtZTsKICAgICAgfTsKICAgICAgaWYgKHIuaWRlYWwgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGNjLm9wdGlvbmFsID0gY2Mub3B0aW9uYWwgfHwgW107CiAgICAgICAgdmFyIG9jID0ge307CiAgICAgICAgaWYgKHR5cGVvZiByLmlkZWFsID09PSAnbnVtYmVyJykgewogICAgICAgICAgb2Nbb2xkbmFtZSgnbWluJywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7CiAgICAgICAgICBvYyA9IHt9OwogICAgICAgICAgb2Nbb2xkbmFtZSgnbWF4Jywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9jW29sZG5hbWUoJycsIGtleSldID0gci5pZGVhbDsKICAgICAgICAgIGNjLm9wdGlvbmFsLnB1c2gob2MpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoci5leGFjdCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByLmV4YWN0ICE9PSAnbnVtYmVyJykgewogICAgICAgIGNjLm1hbmRhdG9yeSA9IGNjLm1hbmRhdG9yeSB8fCB7fTsKICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZSgnJywga2V5KV0gPSByLmV4YWN0OwogICAgICB9IGVsc2UgewogICAgICAgIFsnbWluJywgJ21heCddLmZvckVhY2goZnVuY3Rpb24obWl4KSB7CiAgICAgICAgICBpZiAoclttaXhdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgY2MubWFuZGF0b3J5ID0gY2MubWFuZGF0b3J5IHx8IHt9OwogICAgICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZShtaXgsIGtleSldID0gclttaXhdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGlmIChjLmFkdmFuY2VkKSB7CiAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7CiAgICB9CiAgICByZXR1cm4gY2M7CiAgfTsKCiAgZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgaWYgKGNvbnN0cmFpbnRzLmF1ZGlvKSB7CiAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gY29uc3RyYWludHNUb0Nocm9tZShjb25zdHJhaW50cy5hdWRpbyk7CiAgICB9CiAgICBpZiAoY29uc3RyYWludHMudmlkZW8pIHsKICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lKGNvbnN0cmFpbnRzLnZpZGVvKTsKICAgIH0KICAgIHdlYnJ0Y1V0aWxzLmxvZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTsKICAgIHJldHVybiBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpOwogIH07CiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYTsKCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID0ge2dldFVzZXJNZWRpYTogcmVxdWVzdFVzZXJNZWRpYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYXRlRGV2aWNlczogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgdmFyIGtpbmRzID0ge2F1ZGlvOiAnYXVkaW9pbnB1dCcsIHZpZGVvOiAndmlkZW9pbnB1dCd9OwogICAgICAgIHJldHVybiBNZWRpYVN0cmVhbVRyYWNrLmdldFNvdXJjZXMoZnVuY3Rpb24oZGV2aWNlcykgewogICAgICAgICAgcmVzb2x2ZShkZXZpY2VzLm1hcChmdW5jdGlvbihkZXZpY2UpIHsKICAgICAgICAgICAgcmV0dXJuIHtsYWJlbDogZGV2aWNlLmxhYmVsLAogICAgICAgICAgICAgICAgICAgIGtpbmQ6IGtpbmRzW2RldmljZS5raW5kXSwKICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogZGV2aWNlLmlkLAogICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6ICcnfTsKICAgICAgICAgIH0pKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9fTsKICB9CgogIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC4KICAvLyBUT0RPKEthcHRlbkphbnNzb24pIHJlbW92ZSBvbmNlIGltcGxlbWVudGVkIGluIENocm9tZSBzdGFibGUuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cykgewogICAgICByZXR1cm4gcmVxdWVzdFVzZXJNZWRpYShjb25zdHJhaW50cyk7CiAgICB9OwogIH0gZWxzZSB7CiAgICAvLyBFdmVuIHRob3VnaCBDaHJvbWUgNDUgaGFzIG5hdmlnYXRvci5tZWRpYURldmljZXMgYW5kIGEgZ2V0VXNlck1lZGlhCiAgICAvLyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSwgaXQgZG9lcyBub3QgYWNjZXB0IHNwZWMtc3R5bGUKICAgIC8vIGNvbnN0cmFpbnRzLgogICAgdmFyIG9yaWdHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS4KICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjKSB7CiAgICAgIHdlYnJ0Y1V0aWxzLmxvZygnc3BlYzogICAnICsgSlNPTi5zdHJpbmdpZnkoYykpOyAvLyB3aGl0ZXNwYWNlIGZvciBhbGlnbm1lbnQKICAgICAgYy5hdWRpbyA9IGNvbnN0cmFpbnRzVG9DaHJvbWUoYy5hdWRpbyk7CiAgICAgIGMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lKGMudmlkZW8pOwogICAgICB3ZWJydGNVdGlscy5sb2coJ2Nocm9tZTogJyArIEpTT04uc3RyaW5naWZ5KGMpKTsKICAgICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYyk7CiAgICB9OwogIH0KCiAgLy8gRHVtbXkgZGV2aWNlY2hhbmdlIGV2ZW50IG1ldGhvZHMuCiAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLgogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIHdlYnJ0Y1V0aWxzLmxvZygnRHVtbXkgbWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXIgY2FsbGVkLicpOwogICAgfTsKICB9CiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPT09ICd1bmRlZmluZWQnKSB7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbigpIHsKICAgICAgd2VicnRjVXRpbHMubG9nKCdEdW1teSBtZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciBjYWxsZWQuJyk7CiAgICB9OwogIH0KCiAgLy8gQXR0YWNoIGEgbWVkaWEgc3RyZWFtIHRvIGFuIGVsZW1lbnQuCiAgYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbihlbGVtZW50LCBzdHJlYW0pIHsKICAgIGlmICh3ZWJydGNEZXRlY3RlZFZlcnNpb24gPj0gNDMpIHsKICAgICAgZWxlbWVudC5zcmNPYmplY3QgPSBzdHJlYW07CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50LnNyYyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgZWxlbWVudC5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICB9IGVsc2UgewogICAgICB3ZWJydGNVdGlscy5sb2coJ0Vycm9yIGF0dGFjaGluZyBzdHJlYW0gdG8gZWxlbWVudC4nKTsKICAgIH0KICB9OwogIHJlYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbih0bywgZnJvbSkgewogICAgaWYgKHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA+PSA0MykgewogICAgICB0by5zcmNPYmplY3QgPSBmcm9tLnNyY09iamVjdDsKICAgIH0gZWxzZSB7CiAgICAgIHRvLnNyYyA9IGZyb20uc3JjOwogICAgfQogIH07Cgp9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgKICAgIC9FZGdlXC8oXGQrKS4oXGQrKSQvKSkgewogIHdlYnJ0Y1V0aWxzLmxvZygnVGhpcyBhcHBlYXJzIHRvIGJlIEVkZ2UnKTsKICB3ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSAnZWRnZSc7CgogIHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA9IHdlYnJ0Y1V0aWxzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgIC9FZGdlXC8oXGQrKS4oXGQrKSQvLCAyKTsKCiAgLy8gVGhlIG1pbmltdW0gdmVyc2lvbiBzdGlsbCBzdXBwb3J0ZWQgYnkgYWRhcHRlci4KICAvLyBUaGlzIGlzIHRoZSBidWlsZCBudW1iZXIgZm9yIEVkZ2UuCiAgd2VicnRjTWluaW11bVZlcnNpb24gPSAxMDU0NzsKCiAgaWYgKHdpbmRvdy5SVENJY2VHYXRoZXJlcikgewogICAgLy8gR2VuZXJhdGUgYW4gYWxwaGFudW1lcmljIGlkZW50aWZpZXIgZm9yIGNuYW1lIG9yIG1pZHMuCiAgICAvLyBUT0RPOiB1c2UgVVVJRHMgaW5zdGVhZD8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamVkLzk4Mjg4MwogICAgdmFyIGdlbmVyYXRlSWRlbnRpZmllciA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDEwKTsKICAgIH07CgogICAgLy8gVGhlIFJUQ1AgQ05BTUUgdXNlZCBieSBhbGwgcGVlcmNvbm5lY3Rpb25zIGZyb20gdGhlIHNhbWUgSlMuCiAgICB2YXIgbG9jYWxDTmFtZSA9IGdlbmVyYXRlSWRlbnRpZmllcigpOwoKICAgIC8vIFNEUCBoZWxwZXJzIC0gdG8gYmUgbW92ZWQgaW50byBzZXBhcmF0ZSBtb2R1bGUuCiAgICB2YXIgU0RQVXRpbHMgPSB7fTsKCiAgICAvLyBTcGxpdHMgU0RQIGludG8gbGluZXMsIGRlYWxpbmcgd2l0aCBib3RoIENSTEYgYW5kIExGLgogICAgU0RQVXRpbHMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uKGJsb2IpIHsKICAgICAgcmV0dXJuIGJsb2IudHJpbSgpLnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgcmV0dXJuIGxpbmUudHJpbSgpOwogICAgICB9KTsKICAgIH07CgogICAgLy8gU3BsaXRzIFNEUCBpbnRvIHNlc3Npb25wYXJ0IGFuZCBtZWRpYXNlY3Rpb25zLiBFbnN1cmVzIENSTEYuCiAgICBTRFBVdGlscy5zcGxpdFNlY3Rpb25zID0gZnVuY3Rpb24oYmxvYikgewogICAgICB2YXIgcGFydHMgPSBibG9iLnNwbGl0KCdcclxubT0nKTsKICAgICAgcmV0dXJuIHBhcnRzLm1hcChmdW5jdGlvbihwYXJ0LCBpbmRleCkgewogICAgICAgIHJldHVybiAoaW5kZXggPiAwID8gJ209JyArIHBhcnQgOiBwYXJ0KS50cmltKCkgKyAnXHJcbic7CiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LgogICAgU0RQVXRpbHMubWF0Y2hQcmVmaXggPSBmdW5jdGlvbihibG9iLCBwcmVmaXgpIHsKICAgICAgcmV0dXJuIFNEUFV0aWxzLnNwbGl0TGluZXMoYmxvYikuZmlsdGVyKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICByZXR1cm4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDA7CiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6CiAgICAvLyBjYW5kaWRhdGU6NzAyNzg2MzUwIDIgdWRwIDQxODE5OTAyIDguOC44LjggNjA3NjkgdHlwIHJlbGF5IHJhZGRyIDguOC44LjggcnBvcnQgNTU5OTYiCiAgICBTRFBVdGlscy5wYXJzZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgdmFyIHBhcnRzOwogICAgICAvLyBQYXJzZSBib3RoIHZhcmlhbnRzLgogICAgICBpZiAobGluZS5pbmRleE9mKCdhPWNhbmRpZGF0ZTonKSA9PT0gMCkgewogICAgICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFydHMgPSBsaW5lLnN1YnN0cmluZygxMCkuc3BsaXQoJyAnKTsKICAgICAgfQoKICAgICAgdmFyIGNhbmRpZGF0ZSA9IHsKICAgICAgICBmb3VuZGF0aW9uOiBwYXJ0c1swXSwKICAgICAgICBjb21wb25lbnQ6IHBhcnRzWzFdLAogICAgICAgIHByb3RvY29sOiBwYXJ0c1syXS50b0xvd2VyQ2FzZSgpLAogICAgICAgIHByaW9yaXR5OiBwYXJzZUludChwYXJ0c1szXSwgMTApLAogICAgICAgIGlwOiBwYXJ0c1s0XSwKICAgICAgICBwb3J0OiBwYXJzZUludChwYXJ0c1s1XSwgMTApLAogICAgICAgIC8vIHNraXAgcGFydHNbNl0gPT0gJ3R5cCcKICAgICAgICB0eXBlOiBwYXJ0c1s3XQogICAgICB9OwoKICAgICAgZm9yICh2YXIgaSA9IDg7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHN3aXRjaCAocGFydHNbaV0pIHsKICAgICAgICAgIGNhc2UgJ3JhZGRyJzoKICAgICAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzID0gcGFydHNbaSArIDFdOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3Jwb3J0JzoKICAgICAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRQb3J0ID0gcGFyc2VJbnQocGFydHNbaSArIDFdLCAxMCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAndGNwdHlwZSc6CiAgICAgICAgICAgIGNhbmRpZGF0ZS50Y3BUeXBlID0gcGFydHNbaSArIDFdOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6IC8vIFVua25vd24gZXh0ZW5zaW9ucyBhcmUgc2lsZW50bHkgaWdub3JlZC4KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBjYW5kaWRhdGU7CiAgICB9OwoKICAgIC8vIFRyYW5zbGF0ZXMgYSBjYW5kaWRhdGUgb2JqZWN0IGludG8gU0RQIGNhbmRpZGF0ZSBhdHRyaWJ1dGUuCiAgICBTRFBVdGlscy53cml0ZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkgewogICAgICB2YXIgc2RwID0gW107CiAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5mb3VuZGF0aW9uKTsKICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLmNvbXBvbmVudCk7CiAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKTsKICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLnByaW9yaXR5KTsKICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLmlwKTsKICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLnBvcnQpOwoKICAgICAgdmFyIHR5cGUgPSBjYW5kaWRhdGUudHlwZTsKICAgICAgc2RwLnB1c2goJ3R5cCcpOwogICAgICBzZHAucHVzaCh0eXBlKTsKICAgICAgaWYgKHR5cGUgIT09ICdob3N0JyAmJiBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgJiYKICAgICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCkgewogICAgICAgIHNkcC5wdXNoKCdyYWRkcicpOwogICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyk7IC8vIHdhczogcmVsQWRkcgogICAgICAgIHNkcC5wdXNoKCdycG9ydCcpOwogICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7IC8vIHdhczogcmVsUG9ydAogICAgICB9CiAgICAgIGlmIChjYW5kaWRhdGUudGNwVHlwZSAmJiBjYW5kaWRhdGUucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA9PT0gJ3RjcCcpIHsKICAgICAgICBzZHAucHVzaCgndGNwdHlwZScpOwogICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS50Y3BUeXBlKTsKICAgICAgfQogICAgICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTsKICAgIH07CgogICAgLy8gUGFyc2VzIGFuIHJ0cG1hcCBsaW5lLCByZXR1cm5zIFJUQ1J0cENvZGRlY1BhcmFtZXRlcnMuIFNhbXBsZSBpbnB1dDoKICAgIC8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzIKICAgIFNEUFV0aWxzLnBhcnNlUnRwTWFwID0gZnVuY3Rpb24obGluZSkgewogICAgICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpOwogICAgICB2YXIgcGFyc2VkID0gewogICAgICAgIHBheWxvYWRUeXBlOiBwYXJzZUludChwYXJ0cy5zaGlmdCgpLCAxMCkgLy8gd2FzOiBpZAogICAgICB9OwoKICAgICAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpOwoKICAgICAgcGFyc2VkLm5hbWUgPSBwYXJ0c1swXTsKICAgICAgcGFyc2VkLmNsb2NrUmF0ZSA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCk7IC8vIHdhczogY2xvY2tyYXRlCiAgICAgIHBhcnNlZC5udW1DaGFubmVscyA9IHBhcnRzLmxlbmd0aCA9PT0gMyA/IHBhcnNlSW50KHBhcnRzWzJdLCAxMCkgOiAxOyAvLyB3YXM6IGNoYW5uZWxzCiAgICAgIHJldHVybiBwYXJzZWQ7CiAgICB9OwoKICAgIC8vIEdlbmVyYXRlIGFuIGE9cnRwbWFwIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3IgUlRDUnRwQ29kZWNQYXJhbWV0ZXJzLgogICAgU0RQVXRpbHMud3JpdGVSdHBNYXAgPSBmdW5jdGlvbihjb2RlYykgewogICAgICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICAgICAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogICAgICB9CiAgICAgIHJldHVybiAnYT1ydHBtYXA6JyArIHB0ICsgJyAnICsgY29kZWMubmFtZSArICcvJyArIGNvZGVjLmNsb2NrUmF0ZSArCiAgICAgICAgICAoY29kZWMubnVtQ2hhbm5lbHMgIT09IDEgPyAnLycgKyBjb2RlYy5udW1DaGFubmVscyA6ICcnKSArICdcclxuJzsKICAgIH07CgogICAgLy8gUGFyc2VzIGFuIGZ0bXAgbGluZSwgcmV0dXJucyBkaWN0aW9uYXJ5LiBTYW1wbGUgaW5wdXQ6CiAgICAvLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vbgogICAgLy8gQWxzbyBkZWFscyB3aXRoIHZicj1vbjsgY25nPW9uCiAgICBTRFBVdGlscy5wYXJzZUZtdHAgPSBmdW5jdGlvbihsaW5lKSB7CiAgICAgIHZhciBwYXJzZWQgPSB7fTsKICAgICAgdmFyIGt2OwogICAgICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCc7Jyk7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsKICAgICAgICBrdiA9IHBhcnRzW2pdLnRyaW0oKS5zcGxpdCgnPScpOwogICAgICAgIHBhcnNlZFtrdlswXS50cmltKCldID0ga3ZbMV07CiAgICAgIH0KICAgICAgcmV0dXJuIHBhcnNlZDsKICAgIH07CgogICAgLy8gR2VuZXJhdGVzIGFuIGE9ZnRtcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy4KICAgIFNEUFV0aWxzLndyaXRlRnRtcCA9IGZ1bmN0aW9uKGNvZGVjKSB7CiAgICAgIHZhciBsaW5lID0gJyc7CiAgICAgIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlOwogICAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7CiAgICAgIH0KICAgICAgaWYgKGNvZGVjLnBhcmFtZXRlcnMgJiYgY29kZWMucGFyYW1ldGVycy5sZW5ndGgpIHsKICAgICAgICB2YXIgcGFyYW1zID0gW107CiAgICAgICAgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykuZm9yRWFjaChmdW5jdGlvbihwYXJhbSkgewogICAgICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7CiAgICAgICAgfSk7CiAgICAgICAgbGluZSArPSAnYT1mbXRwOicgKyBwdCArICcgJyArIHBhcmFtcy5qb2luKCc7JykgKyAnXHJcbic7CiAgICAgIH0KICAgICAgcmV0dXJuIGxpbmU7CiAgICB9OwoKICAgIC8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDoKICAgIC8vIGE9cnRjcC1mYjo5OCBuYWNrIHJwc2kKICAgIFNEUFV0aWxzLnBhcnNlUnRjcEZiID0gZnVuY3Rpb24obGluZSkgewogICAgICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogcGFydHMuc2hpZnQoKSwKICAgICAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKQogICAgICB9OwogICAgfTsKICAgIC8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuCiAgICBTRFBVdGlscy53cml0ZVJ0Y3BGYiA9IGZ1bmN0aW9uKGNvZGVjKSB7CiAgICAgIHZhciBsaW5lcyA9ICcnOwogICAgICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICAgICAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogICAgICB9CiAgICAgIGlmIChjb2RlYy5ydGNwRmVlZGJhY2sgJiYgY29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aCkgewogICAgICAgIC8vIEZJWE1FOiBzcGVjaWFsIGhhbmRsaW5nIGZvciB0cnItaW50PwogICAgICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKGZiKSB7CiAgICAgICAgICBsaW5lcyArPSAnYT1ydGNwLWZiOicgKyBwdCArICcgJyArIGZiLnR5cGUgKyAnICcgKyBmYi5wYXJhbWV0ZXIgKwogICAgICAgICAgICAgICdcclxuJzsKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gbGluZXM7CiAgICB9OwoKICAgIC8vIFBhcnNlcyBhbiBSRkMgNTU3NiBzc3JjIG1lZGlhIGF0dHJpYnV0ZS4gU2FtcGxlIGlucHV0OgogICAgLy8gYT1zc3JjOjM3MzU5Mjg1NTkgY25hbWU6c29tZXRoaW5nCiAgICBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgdmFyIHNwID0gbGluZS5pbmRleE9mKCcgJyk7CiAgICAgIHZhciBwYXJ0cyA9IHsKICAgICAgICBzc3JjOiBsaW5lLnN1YnN0cig3LCBzcCAtIDcpLAogICAgICB9OwogICAgICB2YXIgY29sb24gPSBsaW5lLmluZGV4T2YoJzonLCBzcCk7CiAgICAgIGlmIChjb2xvbiA+IC0xKSB7CiAgICAgICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHIoc3AgKyAxLCBjb2xvbiAtIHNwIC0gMSk7CiAgICAgICAgcGFydHMudmFsdWUgPSBsaW5lLnN1YnN0cihjb2xvbiArIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHBhcnRzOwogICAgfTsKCiAgICAvLyBFeHRyYWN0cyBEVExTIHBhcmFtZXRlcnMgZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC4KICAgIC8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQogICAgLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuCiAgICBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHsKICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICBsaW5lcyA9IGxpbmVzLmNvbmNhdChTRFBVdGlscy5zcGxpdExpbmVzKHNlc3Npb25wYXJ0KSk7IC8vIFNlYXJjaCBpbiBzZXNzaW9uIHBhcnQsIHRvby4KICAgICAgdmFyIGZwTGluZSA9IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1maW5nZXJwcmludDonKSA9PT0gMDsKICAgICAgfSlbMF0uc3Vic3RyKDE0KTsKICAgICAgLy8gTm90ZTogYT1zZXR1cCBsaW5lIGlzIGlnbm9yZWQgc2luY2Ugd2UgdXNlIHRoZSAnYXV0bycgcm9sZS4KICAgICAgdmFyIGR0bHNQYXJhbWV0ZXJzID0gewogICAgICAgIHJvbGU6ICdhdXRvJywKICAgICAgICBmaW5nZXJwcmludHM6IFt7CiAgICAgICAgICBhbGdvcml0aG06IGZwTGluZS5zcGxpdCgnICcpWzBdLAogICAgICAgICAgdmFsdWU6IGZwTGluZS5zcGxpdCgnICcpWzFdCiAgICAgICAgfV0KICAgICAgfTsKICAgICAgcmV0dXJuIGR0bHNQYXJhbWV0ZXJzOwogICAgfTsKCiAgICAvLyBTZXJpYWxpemVzIERUTFMgcGFyYW1ldGVycyB0byBTRFAuCiAgICBTRFBVdGlscy53cml0ZUR0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24ocGFyYW1zLCBzZXR1cFR5cGUpIHsKICAgICAgdmFyIHNkcCA9ICdhPXNldHVwOicgKyBzZXR1cFR5cGUgKyAnXHJcbic7CiAgICAgIHBhcmFtcy5maW5nZXJwcmludHMuZm9yRWFjaChmdW5jdGlvbihmcCkgewogICAgICAgIHNkcCArPSAnYT1maW5nZXJwcmludDonICsgZnAuYWxnb3JpdGhtICsgJyAnICsgZnAudmFsdWUgKyAnXHJcbic7CiAgICAgIH0pOwogICAgICByZXR1cm4gc2RwOwogICAgfTsKICAgIC8vIFBhcnNlcyBJQ0UgaW5mb3JtYXRpb24gZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC4KICAgIC8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQogICAgLy8gICBnZXQgdGhlIGljZS11ZnJhZyBhbmQgaWNlLXB3ZCBsaW5lcyBhcyBpbnB1dC4KICAgIFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7CiAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOyAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgICAgIHZhciBpY2VQYXJhbWV0ZXJzID0gewogICAgICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICByZXR1cm4gbGluZS5pbmRleE9mKCdhPWljZS11ZnJhZzonKSA9PT0gMDsKICAgICAgICB9KVswXS5zdWJzdHIoMTIpLAogICAgICAgIHBhc3N3b3JkOiBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkgewogICAgICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1pY2UtcHdkOicpID09PSAwOwogICAgICAgIH0pWzBdLnN1YnN0cigxMCkKICAgICAgfTsKICAgICAgcmV0dXJuIGljZVBhcmFtZXRlcnM7CiAgICB9OwoKICAgIC8vIFNlcmlhbGl6ZXMgSUNFIHBhcmFtZXRlcnMgdG8gU0RQLgogICAgU0RQVXRpbHMud3JpdGVJY2VQYXJhbWV0ZXJzID0gZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgIHJldHVybiAnYT1pY2UtdWZyYWc6JyArIHBhcmFtcy51c2VybmFtZUZyYWdtZW50ICsgJ1xyXG4nICsKICAgICAgICAgICdhPWljZS1wd2Q6JyArIHBhcmFtcy5wYXNzd29yZCArICdcclxuJzsKICAgIH07CgogICAgLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLgogICAgU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7CiAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHsKICAgICAgICBjb2RlY3M6IFtdLAogICAgICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLAogICAgICAgIGZlY01lY2hhbmlzbXM6IFtdLAogICAgICAgIHJ0Y3A6IFtdCiAgICAgIH07CiAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTsKICAgICAgZm9yICh2YXIgaSA9IDM7IGkgPCBtbGluZS5sZW5ndGg7IGkrKykgeyAvLyBmaW5kIGFsbCBjb2RlY3MgZnJvbSBtbGluZVszLi5dCiAgICAgICAgdmFyIHB0ID0gbWxpbmVbaV07CiAgICAgICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydHBtYXA6JyArIHB0ICsgJyAnKVswXTsKICAgICAgICBpZiAocnRwbWFwbGluZSkgewogICAgICAgICAgdmFyIGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7CiAgICAgICAgICB2YXIgZm10cHMgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICAgICAgICBtZWRpYVNlY3Rpb24sICdhPWZtdHA6JyArIHB0ICsgJyAnKTsKICAgICAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuCiAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzID0gZm10cHMubGVuZ3RoID8gU0RQVXRpbHMucGFyc2VGbXRwKGZtdHBzWzBdKSA6IHt9OwogICAgICAgICAgY29kZWMucnRjcEZlZWRiYWNrID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoCiAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJykKICAgICAgICAgICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7CiAgICAgICAgICBkZXNjcmlwdGlvbi5jb2RlY3MucHVzaChjb2RlYyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIEZJWE1FOiBwYXJzZSBoZWFkZXJFeHRlbnNpb25zLCBmZWNNZWNoYW5pc21zIGFuZCBydGNwLgogICAgICByZXR1cm4gZGVzY3JpcHRpb247CiAgICB9OwoKICAgIC8vIEdlbmVyYXRlcyBwYXJ0cyBvZiB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gZGVzY3JpYmluZyB0aGUgY2FwYWJpbGl0aWVzIC8gcGFyYW1ldGVycy4KICAgIFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihraW5kLCBjYXBzKSB7CiAgICAgIHZhciBzZHAgPSAnJzsKCiAgICAgIC8vIEJ1aWxkIHRoZSBtbGluZS4KICAgICAgc2RwICs9ICdtPScgKyBraW5kICsgJyAnOwogICAgICBzZHAgKz0gY2Fwcy5jb2RlY3MubGVuZ3RoID4gMCA/ICc5JyA6ICcwJzsgLy8gcmVqZWN0IGlmIG5vIGNvZGVjcy4KICAgICAgc2RwICs9ICcgVURQL1RMUy9SVFAvU0FWUEYgJzsKICAgICAgc2RwICs9IGNhcHMuY29kZWNzLm1hcChmdW5jdGlvbihjb2RlYykgewogICAgICAgIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXR1cm4gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb2RlYy5wYXlsb2FkVHlwZTsKICAgICAgfSkuam9pbignICcpICsgJ1xyXG4nOwoKICAgICAgc2RwICs9ICdjPUlOIElQNCAwLjAuMC4wXHJcbic7CiAgICAgIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcclxuJzsKCiAgICAgIC8vIEFkZCBhPXJ0cG1hcCBsaW5lcyBmb3IgZWFjaCBjb2RlYy4gQWxzbyBmbXRwIGFuZCBydGNwLWZiLgogICAgICBjYXBzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7CiAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTsKICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGdG1wKGNvZGVjKTsKICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdGNwRmIoY29kZWMpOwogICAgICB9KTsKICAgICAgLy8gRklYTUU6IGFkZCBoZWFkZXJFeHRlbnNpb25zLCBmZWNNZWNoYW5pc23FnyBhbmQgcnRjcC4KICAgICAgc2RwICs9ICdhPXJ0Y3AtbXV4XHJcbic7CiAgICAgIHJldHVybiBzZHA7CiAgICB9OwoKICAgIFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlID0gZnVuY3Rpb24oKSB7CiAgICAgIC8vIEZJWE1FOiBzZXNzLWlkIHNob3VsZCBiZSBhbiBOVFAgdGltZXN0YW1wLgogICAgICByZXR1cm4gJ3Y9MFxyXG4nICsKICAgICAgICAgICdvPXRoaXNpc2FkYXB0ZXJvcnRjIDgxNjk2Mzk5MTU2NDY5NDMxMzcgMiBJTiBJUDQgMTI3LjAuMC4xXHJcbicgKwogICAgICAgICAgJ3M9LVxyXG4nICsKICAgICAgICAgICd0PTAgMFxyXG4nOwogICAgfTsKCiAgICBTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbiA9IGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBjYXBzLCB0eXBlLCBzdHJlYW0pIHsKICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24odHJhbnNjZWl2ZXIua2luZCwgY2Fwcyk7CgogICAgICAvLyBNYXAgSUNFIHBhcmFtZXRlcnMgKHVmcmFnLCBwd2QpIHRvIFNEUC4KICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycygKICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKTsKCiAgICAgIC8vIE1hcCBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLgogICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycygKICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksCiAgICAgICAgICB0eXBlID09PSAnb2ZmZXInID8gJ2FjdHBhc3MnIDogJ2FjdGl2ZScpOwoKICAgICAgc2RwICs9ICdhPW1pZDonICsgdHJhbnNjZWl2ZXIubWlkICsgJ1xyXG4nOwoKICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikgewogICAgICAgIHNkcCArPSAnYT1zZW5kcmVjdlxyXG4nOwogICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgICAgIHNkcCArPSAnYT1zZW5kb25seVxyXG4nOwogICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgc2RwICs9ICdhPXJlY3Zvbmx5XHJcbic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2RwICs9ICdhPWluYWN0aXZlXHJcbic7CiAgICAgIH0KCiAgICAgIC8vIEZJWE1FOiBmb3IgUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlIFNTUkNzLiBOb3QgaW1wbGVtZW50ZWQgaW4gRWRnZSB5ZXQuCiAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHsKICAgICAgICB2YXIgbXNpZCA9ICdtc2lkOicgKyBzdHJlYW0uaWQgKyAnICcgKwogICAgICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2suaWQgKyAnXHJcbic7CiAgICAgICAgc2RwICs9ICdhPScgKyBtc2lkOwogICAgICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kU3NyYyArICcgJyArIG1zaWQ7CiAgICAgIH0KICAgICAgLy8gRklYTUU6IHRoaXMgc2hvdWxkIGJlIHdyaXR0ZW4gYnkgd3JpdGVSdHBEZXNjcmlwdGlvbi4KICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRTc3JjICsgJyBjbmFtZTonICsKICAgICAgICAgIGxvY2FsQ05hbWUgKyAnXHJcbic7CiAgICAgIHJldHVybiBzZHA7CiAgICB9OwoKICAgIC8vIEdldHMgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBtZWRpYVNlY3Rpb24gb3IgdGhlIHNlc3Npb25wYXJ0LgogICAgU0RQVXRpbHMuZ2V0RGlyZWN0aW9uID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogICAgICAvLyBMb29rIGZvciBzZW5kcmVjdiwgc2VuZG9ubHksIHJlY3Zvbmx5LCBpbmFjdGl2ZSwgZGVmYXVsdCB0byBzZW5kcmVjdi4KICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc3dpdGNoIChsaW5lc1tpXSkgewogICAgICAgICAgY2FzZSAnYT1zZW5kcmVjdic6CiAgICAgICAgICBjYXNlICdhPXNlbmRvbmx5JzoKICAgICAgICAgIGNhc2UgJ2E9cmVjdm9ubHknOgogICAgICAgICAgY2FzZSAnYT1pbmFjdGl2ZSc6CiAgICAgICAgICAgIHJldHVybiBsaW5lc1tpXS5zdWJzdHIoMik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChzZXNzaW9ucGFydCkgewogICAgICAgIHJldHVybiBTRFBVdGlscy5nZXREaXJlY3Rpb24oc2Vzc2lvbnBhcnQpOwogICAgICB9CiAgICAgIHJldHVybiAnc2VuZHJlY3YnOwogICAgfTsKCiAgICAvLyBPUlRDIGRlZmluZXMgYW4gUlRDSWNlQ2FuZGlkYXRlIG9iamVjdCBidXQgbm8gY29uc3RydWN0b3IuCiAgICAvLyBOb3QgaW1wbGVtZW50ZWQgaW4gRWRnZS4KICAgIGlmICghd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSkgewogICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykgewogICAgICAgIHJldHVybiBhcmdzOwogICAgICB9OwogICAgfQogICAgLy8gT1JUQyBkb2VzIG5vdCBoYXZlIGEgc2Vzc2lvbiBkZXNjcmlwdGlvbiBvYmplY3QgYnV0CiAgICAvLyBvdGhlciBicm93c2VycyAoaS5lLiBDaHJvbWUpIHRoYXQgd2lsbCBzdXBwb3J0IGJvdGggUEMgYW5kIE9SVEMKICAgIC8vIGluIHRoZSBmdXR1cmUgbWlnaHQgaGF2ZSB0aGlzIGRlZmluZWQgYWxyZWFkeS4KICAgIGlmICghd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikgewogICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24oYXJncykgewogICAgICAgIHJldHVybiBhcmdzOwogICAgICB9OwogICAgfQoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKGNvbmZpZykgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICB0aGlzLm9uaWNlY2FuZGlkYXRlID0gbnVsbDsKICAgICAgdGhpcy5vbmFkZHN0cmVhbSA9IG51bGw7CiAgICAgIHRoaXMub25yZW1vdmVzdHJlYW0gPSBudWxsOwogICAgICB0aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgPSBudWxsOwogICAgICB0aGlzLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgdGhpcy5vbm5lZ290aWF0aW9ubmVlZGVkID0gbnVsbDsKICAgICAgdGhpcy5vbmRhdGFjaGFubmVsID0gbnVsbDsKCiAgICAgIHRoaXMubG9jYWxTdHJlYW1zID0gW107CiAgICAgIHRoaXMucmVtb3RlU3RyZWFtcyA9IFtdOwogICAgICB0aGlzLmdldExvY2FsU3RyZWFtcyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VsZi5sb2NhbFN0cmVhbXM7IH07CiAgICAgIHRoaXMuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VsZi5yZW1vdGVTdHJlYW1zOyB9OwoKICAgICAgdGhpcy5sb2NhbERlc2NyaXB0aW9uID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJycsCiAgICAgICAgc2RwOiAnJwogICAgICB9KTsKICAgICAgdGhpcy5yZW1vdGVEZXNjcmlwdGlvbiA9IG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oewogICAgICAgIHR5cGU6ICcnLAogICAgICAgIHNkcDogJycKICAgICAgfSk7CiAgICAgIHRoaXMuc2lnbmFsaW5nU3RhdGUgPSAnc3RhYmxlJzsKICAgICAgdGhpcy5pY2VDb25uZWN0aW9uU3RhdGUgPSAnbmV3JzsKCiAgICAgIHRoaXMuaWNlT3B0aW9ucyA9IHsKICAgICAgICBnYXRoZXJQb2xpY3k6ICdhbGwnLAogICAgICAgIGljZVNlcnZlcnM6IFtdCiAgICAgIH07CiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSkgewogICAgICAgIHN3aXRjaCAoY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSkgewogICAgICAgICAgY2FzZSAnYWxsJzoKICAgICAgICAgIGNhc2UgJ3JlbGF5JzoKICAgICAgICAgICAgdGhpcy5pY2VPcHRpb25zLmdhdGhlclBvbGljeSA9IGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3k7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnbm9uZSc6CiAgICAgICAgICAgIC8vIEZJWE1FOiByZW1vdmUgb25jZSBpbXBsZW1lbnRhdGlvbiBhbmQgc3BlYyBoYXZlIGFkZGVkIHRoaXMuCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ljZVRyYW5zcG9ydFBvbGljeSAibm9uZSIgbm90IHN1cHBvcnRlZCcpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pY2VTZXJ2ZXJzKSB7CiAgICAgICAgLy8gRWRnZSBkb2VzIG5vdCBsaWtlCiAgICAgICAgLy8gMSkgc3R1bjoKICAgICAgICAvLyAyKSB0dXJuOiB0aGF0IGRvZXMgbm90IGhhdmUgYWxsIG9mIHR1cm46aG9zdDpwb3J0P3RyYW5zcG9ydD11ZHAKICAgICAgICAvLyAzKSBhbiBhcnJheSBvZiB1cmxzCiAgICAgICAgY29uZmlnLmljZVNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbihzZXJ2ZXIpIHsKICAgICAgICAgIGlmIChzZXJ2ZXIudXJscykgewogICAgICAgICAgICB2YXIgdXJsOwogICAgICAgICAgICBpZiAodHlwZW9mKHNlcnZlci51cmxzKSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICB1cmwgPSBzZXJ2ZXIudXJsczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB1cmwgPSBzZXJ2ZXIudXJsc1swXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3RyYW5zcG9ydD11ZHAnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICBzZWxmLmljZVNlcnZlcnMucHVzaCh7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogc2VydmVyLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgY3JlZGVudGlhbDogc2VydmVyLmNyZWRlbnRpYWwsCiAgICAgICAgICAgICAgICB1cmxzOiB1cmwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyBwZXItdHJhY2sgaWNlR2F0aGVycywgaWNlVHJhbnNwb3J0cywgZHRsc1RyYW5zcG9ydHMsIHJ0cFNlbmRlcnMsIC4uLgogICAgICAvLyBldmVyeXRoaW5nIHRoYXQgaXMgbmVlZGVkIHRvIGRlc2NyaWJlIGEgU0RQIG0tbGluZS4KICAgICAgdGhpcy50cmFuc2NlaXZlcnMgPSBbXTsKCiAgICAgIC8vIHNpbmNlIHRoZSBpY2VHYXRoZXJlciBpcyBjdXJyZW50bHkgY3JlYXRlZCBpbiBjcmVhdGVPZmZlciBidXQgd2UKICAgICAgLy8gbXVzdCBub3QgZW1pdCBjYW5kaWRhdGVzIHVudGlsIGFmdGVyIHNldExvY2FsRGVzY3JpcHRpb24gd2UgYnVmZmVyCiAgICAgIC8vIHRoZW0gaW4gdGhpcyBhcnJheS4KICAgICAgdGhpcy5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyID0gW107CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2VtaXRCdWZmZXJlZENhbmRpZGF0ZXMgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAvLyBGSVhNRTogbmVlZCB0byBhcHBseSBpY2UgY2FuZGlkYXRlcyBpbiBhIHdheSB3aGljaCBpcyBhc3luYyBidXQgaW4tb3JkZXIKICAgICAgdGhpcy5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICBpZiAoc2VsZi5vbmljZWNhbmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgc2VsZi5vbmljZWNhbmRpZGF0ZShldmVudCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyID0gW107CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHkKICAgICAgLy8gdG8gdHdvIGRpZmZlcmVudCBzZW5kZXJzIGRvZXMgbm90IHdvcmsgKGJ1aWxkIDEwNTQ3KS4KICAgICAgdGhpcy5sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0uY2xvbmUoKSk7CiAgICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgIHZhciBpZHggPSB0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSk7CiAgICAgIGlmIChpZHggPiAtMSkgewogICAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnNwbGljZShpZHgsIDEpOwogICAgICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7CiAgICAgIH0KICAgIH07CgogICAgLy8gRGV0ZXJtaW5lcyB0aGUgaW50ZXJzZWN0aW9uIG9mIGxvY2FsIGFuZCByZW1vdGUgY2FwYWJpbGl0aWVzLgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzID0KICAgICAgICBmdW5jdGlvbihsb2NhbENhcGFiaWxpdGllcywgcmVtb3RlQ2FwYWJpbGl0aWVzKSB7CiAgICAgIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSB7CiAgICAgICAgY29kZWNzOiBbXSwKICAgICAgICBoZWFkZXJFeHRlbnNpb25zOiBbXSwKICAgICAgICBmZWNNZWNoYW5pc21zOiBbXQogICAgICB9OwogICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihsQ29kZWMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciByQ29kZWMgPSByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzW2ldOwogICAgICAgICAgaWYgKGxDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHJDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgJiYKICAgICAgICAgICAgICBsQ29kZWMuY2xvY2tSYXRlID09PSByQ29kZWMuY2xvY2tSYXRlICYmCiAgICAgICAgICAgICAgbENvZGVjLm51bUNoYW5uZWxzID09PSByQ29kZWMubnVtQ2hhbm5lbHMpIHsKICAgICAgICAgICAgLy8gcHVzaCByQ29kZWMgc28gd2UgcmVwbHkgd2l0aCBvZmZlcmVyIHBheWxvYWQgdHlwZQogICAgICAgICAgICBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLnB1c2gockNvZGVjKTsKCiAgICAgICAgICAgIC8vIEZJWE1FOiBhbHNvIG5lZWQgdG8gZGV0ZXJtaW5lIGludGVyc2VjdGlvbiBiZXR3ZWVuCiAgICAgICAgICAgIC8vIC5ydGNwRmVlZGJhY2sgYW5kIC5wYXJhbWV0ZXJzCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CgogICAgICBsb2NhbENhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24obEhlYWRlckV4dGVuc2lvbikgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBySGVhZGVyRXh0ZW5zaW9uID0gcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnNbaV07CiAgICAgICAgICBpZiAobEhlYWRlckV4dGVuc2lvbi51cmkgPT09IHJIZWFkZXJFeHRlbnNpb24udXJpKSB7CiAgICAgICAgICAgIGNvbW1vbkNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLnB1c2gockhlYWRlckV4dGVuc2lvbik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBGSVhNRTogZmVjTWVjaGFuaXNtcwogICAgICByZXR1cm4gY29tbW9uQ2FwYWJpbGl0aWVzOwogICAgfTsKCiAgICAvLyBDcmVhdGUgSUNFIGdhdGhlcmVyLCBJQ0UgdHJhbnNwb3J0IGFuZCBEVExTIHRyYW5zcG9ydC4KICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzID0KICAgICAgICBmdW5jdGlvbihtaWQsIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgaWNlR2F0aGVyZXIgPSBuZXcgUlRDSWNlR2F0aGVyZXIoc2VsZi5pY2VPcHRpb25zKTsKICAgICAgdmFyIGljZVRyYW5zcG9ydCA9IG5ldyBSVENJY2VUcmFuc3BvcnQoaWNlR2F0aGVyZXIpOwogICAgICBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlID0gZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgdmFyIGV2ZW50ID0ge307CiAgICAgICAgZXZlbnQuY2FuZGlkYXRlID0ge3NkcE1pZDogbWlkLCBzZHBNTGluZUluZGV4OiBzZHBNTGluZUluZGV4fTsKCiAgICAgICAgdmFyIGNhbmQgPSBldnQuY2FuZGlkYXRlOwogICAgICAgIC8vIEVkZ2UgZW1pdHMgYW4gZW1wdHkgb2JqZWN0IGZvciBSVENJY2VDYW5kaWRhdGVDb21wbGV0ZeKApQogICAgICAgIGlmICghY2FuZCB8fCBPYmplY3Qua2V5cyhjYW5kKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIC8vIHBvbHlmaWxsIHNpbmNlIFJUQ0ljZUdhdGhlcmVyLnN0YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBpbiBFZGdlIDEwNTQ3IHlldC4KICAgICAgICAgIGlmIChpY2VHYXRoZXJlci5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGljZUdhdGhlcmVyLnN0YXRlID0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gRW1pdCBhIGNhbmRpZGF0ZSB3aXRoIHR5cGUgZW5kT2ZDYW5kaWRhdGVzIHRvIG1ha2UgdGhlIHNhbXBsZXMgd29yay4KICAgICAgICAgIC8vIEVkZ2UgcmVxdWlyZXMgYWRkSWNlQ2FuZGlkYXRlIHdpdGggdGhpcyBlbXB0eSBjYW5kaWRhdGUgdG8gc3RhcnQgY2hlY2tpbmcuCiAgICAgICAgICAvLyBUaGUgcmVhbCBzb2x1dGlvbiBpcyB0byBzaWduYWwgZW5kLW9mLWNhbmRpZGF0ZXMgdG8gdGhlIG90aGVyIHNpZGUgd2hlbgogICAgICAgICAgLy8gZ2V0dGluZyB0aGUgbnVsbCBjYW5kaWRhdGUgYnV0IHNvbWUgYXBwcyAobGlrZSB0aGUgc2FtcGxlcykgZG9uJ3QgZG8gdGhhdC4KICAgICAgICAgIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgPQogICAgICAgICAgICAgICdjYW5kaWRhdGU6MSAxIHVkcCAxIDAuMC4wLjAgOSB0eXAgZW5kT2ZDYW5kaWRhdGVzJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gUlRDSWNlQ2FuZGlkYXRlIGRvZXNuJ3QgaGF2ZSBhIGNvbXBvbmVudCwgbmVlZHMgdG8gYmUgYWRkZWQKICAgICAgICAgIGNhbmQuY29tcG9uZW50ID0gaWNlVHJhbnNwb3J0LmNvbXBvbmVudCA9PT0gJ1JUQ1AnID8gMiA6IDE7CiAgICAgICAgICBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlID0gU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgY29tcGxldGUgPSBzZWxmLnRyYW5zY2VpdmVycy5ldmVyeShmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmCiAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuc3RhdGUgPT09ICdjb21wbGV0ZWQnOwogICAgICAgIH0pOwogICAgICAgIC8vIEZJWE1FOiB1cGRhdGUgLmxvY2FsRGVzY3JpcHRpb24gd2l0aCBjYW5kaWRhdGUgYW5kIChwb3RlbnRpYWxseSkgZW5kLW9mLWNhbmRpZGF0ZXMuCiAgICAgICAgLy8gICAgIFRvIG1ha2UgdGhpcyBoYXJkZXIsIHRoZSBnYXRoZXJlciBtaWdodCBlbWl0IGNhbmRpZGF0ZXMgYmVmb3JlIGxvY2FsZGVzY3JpcHRpb24KICAgICAgICAvLyAgICAgaXMgc2V0LiBUbyBtYWtlIHRoaW5ncyB3b3JzZSwgZ2F0aGVyLmdldExvY2FsQ2FuZGlkYXRlcyBzdGlsbCBlcnJvcnMgaW4KICAgICAgICAvLyAgICAgRWRnZSAxMDU0NyB3aGVuIG5vIGNhbmRpZGF0ZXMgaGF2ZSBiZWVuIGdhdGhlcmVkIHlldC4KCiAgICAgICAgaWYgKHNlbGYub25pY2VjYW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAgICAgIC8vIEVtaXQgY2FuZGlkYXRlIGlmIGxvY2FsRGVzY3JpcHRpb24gaXMgc2V0LgogICAgICAgICAgLy8gQWxzbyBlbWl0cyBudWxsIGNhbmRpZGF0ZSB3aGVuIGFsbCBnYXRoZXJlcnMgYXJlIGNvbXBsZXRlLgogICAgICAgICAgaWYgKHNlbGYubG9jYWxEZXNjcmlwdGlvbiAmJiBzZWxmLmxvY2FsRGVzY3JpcHRpb24udHlwZSA9PT0gJycpIHsKICAgICAgICAgICAgc2VsZi5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyLnB1c2goZXZlbnQpOwogICAgICAgICAgICBpZiAoY29tcGxldGUpIHsKICAgICAgICAgICAgICBzZWxmLl9sb2NhbEljZUNhbmRpZGF0ZXNCdWZmZXIucHVzaCh7fSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYub25pY2VjYW5kaWRhdGUoZXZlbnQpOwogICAgICAgICAgICBpZiAoY29tcGxldGUpIHsKICAgICAgICAgICAgICBzZWxmLm9uaWNlY2FuZGlkYXRlKHt9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBzZWxmLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTsKICAgICAgfTsKCiAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gbmV3IFJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTsKICAgICAgZHRsc1RyYW5zcG9ydC5vbmR0bHNzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHNlbGYuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpOwogICAgICB9OwogICAgICBkdGxzVHJhbnNwb3J0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBvbmVycm9yIGRvZXMgbm90IHNldCBzdGF0ZSB0byBmYWlsZWQgYnkgaXRzZWxmLgogICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhdGUgPSAnZmFpbGVkJzsKICAgICAgICBzZWxmLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTsKICAgICAgfTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgaWNlR2F0aGVyZXI6IGljZUdhdGhlcmVyLAogICAgICAgIGljZVRyYW5zcG9ydDogaWNlVHJhbnNwb3J0LAogICAgICAgIGR0bHNUcmFuc3BvcnQ6IGR0bHNUcmFuc3BvcnQKICAgICAgfTsKICAgIH07CgogICAgLy8gU3RhcnQgdGhlIFJUUCBTZW5kZXIgYW5kIFJlY2VpdmVyIGZvciBhIHRyYW5zY2VpdmVyLgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdHJhbnNjZWl2ZSA9IGZ1bmN0aW9uKHRyYW5zY2VpdmVyLAogICAgICAgIHNlbmQsIHJlY3YpIHsKICAgICAgdmFyIHBhcmFtcyA9IHRoaXMuX2dldENvbW1vbkNhcGFiaWxpdGllcyh0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcywKICAgICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyk7CiAgICAgIGlmIChzZW5kICYmIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSBbewogICAgICAgICAgc3NyYzogdHJhbnNjZWl2ZXIuc2VuZFNzcmMKICAgICAgICB9XTsKICAgICAgICBwYXJhbXMucnRjcCA9IHsKICAgICAgICAgIGNuYW1lOiBsb2NhbENOYW1lLAogICAgICAgICAgc3NyYzogdHJhbnNjZWl2ZXIucmVjdlNzcmMKICAgICAgICB9OwogICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci5zZW5kKHBhcmFtcyk7CiAgICAgIH0KICAgICAgaWYgKHJlY3YgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gW3sKICAgICAgICAgIHNzcmM6IHRyYW5zY2VpdmVyLnJlY3ZTc3JjCiAgICAgICAgfV07CiAgICAgICAgcGFyYW1zLnJ0Y3AgPSB7CiAgICAgICAgICBjbmFtZTogdHJhbnNjZWl2ZXIuY25hbWUsCiAgICAgICAgICBzc3JjOiB0cmFuc2NlaXZlci5zZW5kU3NyYwogICAgICAgIH07CiAgICAgICAgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIucmVjZWl2ZShwYXJhbXMpOwogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9CiAgICAgICAgZnVuY3Rpb24oZGVzY3JpcHRpb24pIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykgewogICAgICAgIGlmICghdGhpcy5fcGVuZGluZ09mZmVyKSB7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzID0gdGhpcy5fcGVuZGluZ09mZmVyOwogICAgICAgICAgZGVsZXRlIHRoaXMuX3BlbmRpbmdPZmZlcjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicpIHsKICAgICAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKHNlbGYucmVtb3RlRGVzY3JpcHRpb24uc2RwKTsKICAgICAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICAgIHZhciBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyOwogICAgICAgICAgdmFyIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDsKICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDsKICAgICAgICAgIHZhciBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwogICAgICAgICAgdmFyIHJlbW90ZUNhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllczsKICAgICAgICAgIHZhciByZWplY3RlZCA9IG1lZGlhU2VjdGlvbi5zcGxpdCgnXG4nLCAxKVswXQogICAgICAgICAgICAgIC5zcGxpdCgnICcsIDIpWzFdID09PSAnMCc7CgogICAgICAgICAgaWYgKCFyZWplY3RlZCkgewogICAgICAgICAgICB2YXIgcmVtb3RlSWNlUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMobWVkaWFTZWN0aW9uLAogICAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsICdjb250cm9sbGVkJyk7CgogICAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sCiAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTsKCiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gb2YgY2FwYWJpbGl0aWVzLgogICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VsZi5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKGxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKTsKCiAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBTZW5kZXIuIFRoZSBSVENSdHBSZWNlaXZlciBmb3IgdGhpcyB0cmFuc2NlaXZlcgogICAgICAgICAgICAvLyBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgaW4gc2V0UmVtb3RlRGVzY3JpcHRpb24uCiAgICAgICAgICAgIHNlbGYuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsCiAgICAgICAgICAgICAgICBwYXJhbXMuY29kZWNzLmxlbmd0aCA+IDAsCiAgICAgICAgICAgICAgICBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMubG9jYWxEZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uOwogICAgICBzd2l0Y2ggKGRlc2NyaXB0aW9uLnR5cGUpIHsKICAgICAgICBjYXNlICdvZmZlcic6CiAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1sb2NhbC1vZmZlcicpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnYW5zd2VyJzoKICAgICAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdzdGFibGUnKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bnN1cHBvcnRlZCB0eXBlICInICsgZGVzY3JpcHRpb24udHlwZSArICciJyk7CiAgICAgIH0KCiAgICAgIC8vIElmIGEgc3VjY2VzcyBjYWxsYmFjayB3YXMgcHJvdmlkZWQsIGVtaXQgSUNFIGNhbmRpZGF0ZXMgYWZ0ZXIgaXQgaGFzIGJlZW4KICAgICAgLy8gZXhlY3V0ZWQuIE90aGVyd2lzZSwgZW1pdCBjYWxsYmFjayBhZnRlciB0aGUgUHJvbWlzZSBpcyByZXNvbHZlZC4KICAgICAgdmFyIGhhc0NhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYKICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nOwogICAgICBpZiAoaGFzQ2FsbGJhY2spIHsKICAgICAgICB2YXIgY2IgPSBhcmd1bWVudHNbMV07CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBjYigpOwogICAgICAgICAgc2VsZi5fZW1pdEJ1ZmZlcmVkQ2FuZGlkYXRlcygpOwogICAgICAgIH0sIDApOwogICAgICB9CiAgICAgIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIHAudGhlbihmdW5jdGlvbigpIHsKICAgICAgICBpZiAoIWhhc0NhbGxiYWNrKSB7CiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChzZWxmLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzLmJpbmQoc2VsZiksIDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBwOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID0KICAgICAgICBmdW5jdGlvbihkZXNjcmlwdGlvbikgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBzdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTsKICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhkZXNjcmlwdGlvbi5zZHApOwogICAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkgewogICAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgICB2YXIgbWxpbmUgPSBsaW5lc1swXS5zdWJzdHIoMikuc3BsaXQoJyAnKTsKICAgICAgICB2YXIga2luZCA9IG1saW5lWzBdOwogICAgICAgIHZhciByZWplY3RlZCA9IG1saW5lWzFdID09PSAnMCc7CiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IFNEUFV0aWxzLmdldERpcmVjdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTsKCiAgICAgICAgdmFyIHRyYW5zY2VpdmVyOwogICAgICAgIHZhciBpY2VHYXRoZXJlcjsKICAgICAgICB2YXIgaWNlVHJhbnNwb3J0OwogICAgICAgIHZhciBkdGxzVHJhbnNwb3J0OwogICAgICAgIHZhciBydHBTZW5kZXI7CiAgICAgICAgdmFyIHJ0cFJlY2VpdmVyOwogICAgICAgIHZhciBzZW5kU3NyYzsKICAgICAgICB2YXIgcmVjdlNzcmM7CiAgICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAvLyBGSVhNRTogZW5zdXJlIHRoZSBtZWRpYVNlY3Rpb24gaGFzIHJ0Y3AtbXV4IHNldC4KICAgICAgICB2YXIgcmVtb3RlQ2FwYWJpbGl0aWVzID0gU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7CiAgICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnM7CiAgICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzOwogICAgICAgIGlmICghcmVqZWN0ZWQpIHsKICAgICAgICAgIHJlbW90ZUljZVBhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbiwKICAgICAgICAgICAgICBzZXNzaW9ucGFydCk7CiAgICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbiwKICAgICAgICAgICAgICBzZXNzaW9ucGFydCk7CiAgICAgICAgfQogICAgICAgIHZhciBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKVswXS5zdWJzdHIoNik7CgogICAgICAgIHZhciBjbmFtZTsKICAgICAgICAvLyBHZXRzIHRoZSBmaXJzdCBTU1JDLiBOb3RlIHRoYXQgd2l0aCBSVFggdGhlcmUgbWlnaHQgYmUgbXVsdGlwbGUgU1NSQ3MuCiAgICAgICAgdmFyIHJlbW90ZVNzcmMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JykKICAgICAgICAgICAgLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKG9iaikgewogICAgICAgICAgICAgIHJldHVybiBvYmouYXR0cmlidXRlID09PSAnY25hbWUnOwogICAgICAgICAgICB9KVswXTsKICAgICAgICBpZiAocmVtb3RlU3NyYykgewogICAgICAgICAgcmVjdlNzcmMgPSBwYXJzZUludChyZW1vdGVTc3JjLnNzcmMsIDEwKTsKICAgICAgICAgIGNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInKSB7CiAgICAgICAgICB2YXIgdHJhbnNwb3J0cyA9IHNlbGYuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzKG1pZCwgc2RwTUxpbmVJbmRleCk7CgogICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMgPSBSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXMoa2luZCk7CiAgICAgICAgICBzZW5kU3NyYyA9ICgyICogc2RwTUxpbmVJbmRleCArIDIpICogMTAwMTsKCiAgICAgICAgICBydHBSZWNlaXZlciA9IG5ldyBSVENSdHBSZWNlaXZlcih0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsIGtpbmQpOwoKICAgICAgICAgIC8vIEZJWE1FOiBub3QgY29ycmVjdCB3aGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBzdHJlYW1zIGJ1dCB0aGF0IGlzCiAgICAgICAgICAvLyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbiB0aGlzIHNoaW0uCiAgICAgICAgICBzdHJlYW0uYWRkVHJhY2socnRwUmVjZWl2ZXIudHJhY2spOwoKICAgICAgICAgIC8vIEZJWE1FOiBsb29rIGF0IGRpcmVjdGlvbi4KICAgICAgICAgIGlmIChzZWxmLmxvY2FsU3RyZWFtcy5sZW5ndGggPiAwICYmCiAgICAgICAgICAgICAgc2VsZi5sb2NhbFN0cmVhbXNbMF0uZ2V0VHJhY2tzKCkubGVuZ3RoID49IHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgLy8gRklYTUU6IGFjdHVhbGx5IG1vcmUgY29tcGxpY2F0ZWQsIG5lZWRzIHRvIG1hdGNoIHR5cGVzIGV0YwogICAgICAgICAgICB2YXIgbG9jYWx0cmFjayA9IHNlbGYubG9jYWxTdHJlYW1zWzBdLmdldFRyYWNrcygpW3NkcE1MaW5lSW5kZXhdOwogICAgICAgICAgICBydHBTZW5kZXIgPSBuZXcgUlRDUnRwU2VuZGVyKGxvY2FsdHJhY2ssIHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCk7CiAgICAgICAgICB9CgogICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICAgIGljZUdhdGhlcmVyOiB0cmFuc3BvcnRzLmljZUdhdGhlcmVyLAogICAgICAgICAgICBpY2VUcmFuc3BvcnQ6IHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0LAogICAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsCiAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzOiBsb2NhbENhcGFiaWxpdGllcywKICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzOiByZW1vdGVDYXBhYmlsaXRpZXMsCiAgICAgICAgICAgIHJ0cFNlbmRlcjogcnRwU2VuZGVyLAogICAgICAgICAgICBydHBSZWNlaXZlcjogcnRwUmVjZWl2ZXIsCiAgICAgICAgICAgIGtpbmQ6IGtpbmQsCiAgICAgICAgICAgIG1pZDogbWlkLAogICAgICAgICAgICBjbmFtZTogY25hbWUsCiAgICAgICAgICAgIHNlbmRTc3JjOiBzZW5kU3NyYywKICAgICAgICAgICAgcmVjdlNzcmM6IHJlY3ZTc3JjCiAgICAgICAgICB9OwogICAgICAgICAgLy8gU3RhcnQgdGhlIFJUQ1J0cFJlY2VpdmVyIG5vdy4gVGhlIFJUUFNlbmRlciBpcyBzdGFydGVkIGluIHNldExvY2FsRGVzY3JpcHRpb24uCiAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLAogICAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpOwogICAgICAgIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicgJiYgIXJlamVjdGVkKSB7CiAgICAgICAgICB0cmFuc2NlaXZlciA9IHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdOwogICAgICAgICAgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjsKICAgICAgICAgIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDsKICAgICAgICAgIGR0bHNUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0OwogICAgICAgICAgcnRwU2VuZGVyID0gdHJhbnNjZWl2ZXIucnRwU2VuZGVyOwogICAgICAgICAgcnRwUmVjZWl2ZXIgPSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgICAgIHNlbmRTc3JjID0gdHJhbnNjZWl2ZXIuc2VuZFNzcmM7CiAgICAgICAgICAvL3JlY3ZTc3JjID0gdHJhbnNjZWl2ZXIucmVjdlNzcmM7CiAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJlY3ZTc3JjID0gcmVjdlNzcmM7CiAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZW1vdGVDYXBhYmlsaXRpZXMgPQogICAgICAgICAgICAgIHJlbW90ZUNhcGFiaWxpdGllczsKICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmNuYW1lID0gY25hbWU7CgogICAgICAgICAgaWNlVHJhbnNwb3J0LnN0YXJ0KGljZUdhdGhlcmVyLCByZW1vdGVJY2VQYXJhbWV0ZXJzLCAnY29udHJvbGxpbmcnKTsKICAgICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhcnQocmVtb3RlRHRsc1BhcmFtZXRlcnMpOwoKICAgICAgICAgIHNlbGYuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsCiAgICAgICAgICAgICAgZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3JlY3Zvbmx5JywKICAgICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKTsKCiAgICAgICAgICBpZiAocnRwUmVjZWl2ZXIgJiYKICAgICAgICAgICAgICAoZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5JykpIHsKICAgICAgICAgICAgc3RyZWFtLmFkZFRyYWNrKHJ0cFJlY2VpdmVyLnRyYWNrKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEZJWE1FOiBhY3R1YWxseSB0aGUgcmVjZWl2ZXIgc2hvdWxkIGJlIGNyZWF0ZWQgbGF0ZXIuCiAgICAgICAgICAgIGRlbGV0ZSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdGhpcy5yZW1vdGVEZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uOwogICAgICBzd2l0Y2ggKGRlc2NyaXB0aW9uLnR5cGUpIHsKICAgICAgICBjYXNlICdvZmZlcic6CiAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1yZW1vdGUtb2ZmZXInKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2Fuc3dlcic6CiAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnc3RhYmxlJyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5zdXBwb3J0ZWQgdHlwZSAiJyArIGRlc2NyaXB0aW9uLnR5cGUgKyAnIicpOwogICAgICB9CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChzZWxmLm9uYWRkc3RyZWFtICE9PSBudWxsICYmIHN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGgpIHsKICAgICAgICAgIHNlbGYucmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7CiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5vbmFkZHN0cmVhbSh7c3RyZWFtOiBzdHJlYW19KTsKICAgICAgICAgIH0sIDApOwogICAgICAgIH0KICAgICAgfSwgMCk7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzFdLCAwKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHsKICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIC8qIG5vdCB5ZXQKICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgICovCiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCkgewogICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0b3AoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyBGSVhNRTogY2xlYW4gdXAgdHJhY2tzLCBsb2NhbCBzdHJlYW1zLCByZW1vdGUgc3RyZWFtcywgZXRjCiAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdjbG9zZWQnKTsKICAgIH07CgogICAgLy8gVXBkYXRlIHRoZSBzaWduYWxpbmcgc3RhdGUuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVTaWduYWxpbmdTdGF0ZSA9CiAgICAgICAgZnVuY3Rpb24obmV3U3RhdGUpIHsKICAgICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9IG5ld1N0YXRlOwogICAgICBpZiAodGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlKCk7CiAgICAgIH0KICAgIH07CgogICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gZmlyZSB0aGUgbmVnb3RpYXRpb25uZWVkZWQgZXZlbnQuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCA9CiAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgIC8vIEZpcmUgYXdheSAoZm9yIG5vdykuCiAgICAgIGlmICh0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQgIT09IG51bGwpIHsKICAgICAgICB0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQoKTsKICAgICAgfQogICAgfTsKCiAgICAvLyBVcGRhdGUgdGhlIGNvbm5lY3Rpb24gc3RhdGUuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUgPQogICAgICAgIGZ1bmN0aW9uKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBuZXdTdGF0ZTsKICAgICAgdmFyIHN0YXRlcyA9IHsKICAgICAgICAnbmV3JzogMCwKICAgICAgICBjbG9zZWQ6IDAsCiAgICAgICAgY29ubmVjdGluZzogMCwKICAgICAgICBjaGVja2luZzogMCwKICAgICAgICBjb25uZWN0ZWQ6IDAsCiAgICAgICAgY29tcGxldGVkOiAwLAogICAgICAgIGZhaWxlZDogMAogICAgICB9OwogICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgfSk7CiAgICAgIC8vIElDRVRyYW5zcG9ydC5jb21wbGV0ZWQgYW5kIGNvbm5lY3RlZCBhcmUgdGhlIHNhbWUgZm9yIHRoaXMgcHVycG9zZS4KICAgICAgc3RhdGVzLmNvbm5lY3RlZCArPSBzdGF0ZXMuY29tcGxldGVkOwoKICAgICAgbmV3U3RhdGUgPSAnbmV3JzsKICAgICAgaWYgKHN0YXRlcy5mYWlsZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnZmFpbGVkJzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGluZyA+IDAgfHwgc3RhdGVzLmNoZWNraW5nID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RpbmcnOwogICAgICB9IGVsc2UgaWYgKHN0YXRlcy5kaXNjb25uZWN0ZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMubmV3ID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ25ldyc7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RpbmcgPiAwIHx8IHN0YXRlcy5jb21wbGV0ZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnY29ubmVjdGVkJzsKICAgICAgfQoKICAgICAgaWYgKG5ld1N0YXRlICE9PSBzZWxmLmljZUNvbm5lY3Rpb25TdGF0ZSkgewogICAgICAgIHNlbGYuaWNlQ29ubmVjdGlvblN0YXRlID0gbmV3U3RhdGU7CiAgICAgICAgaWYgKHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGlmICh0aGlzLl9wZW5kaW5nT2ZmZXIpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyZWF0ZU9mZmVyIGNhbGxlZCB3aGlsZSB0aGVyZSBpcyBhIHBlbmRpbmcgb2ZmZXIuJyk7CiAgICAgIH0KICAgICAgdmFyIG9mZmVyT3B0aW9uczsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIG9mZmVyT3B0aW9ucyA9IGFyZ3VtZW50c1swXTsKICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7CiAgICAgICAgb2ZmZXJPcHRpb25zID0gYXJndW1lbnRzWzJdOwogICAgICB9CgogICAgICB2YXIgdHJhY2tzID0gW107CiAgICAgIHZhciBudW1BdWRpb1RyYWNrcyA9IDA7CiAgICAgIHZhciBudW1WaWRlb1RyYWNrcyA9IDA7CiAgICAgIC8vIERlZmF1bHQgdG8gc2VuZHJlY3YuCiAgICAgIGlmICh0aGlzLmxvY2FsU3RyZWFtcy5sZW5ndGgpIHsKICAgICAgICBudW1BdWRpb1RyYWNrcyA9IHRoaXMubG9jYWxTdHJlYW1zWzBdLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoOwogICAgICAgIG51bVZpZGVvVHJhY2tzID0gdGhpcy5sb2NhbFN0cmVhbXNbMF0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGg7CiAgICAgIH0KICAgICAgLy8gRGV0ZXJtaW5lIG51bWJlciBvZiBhdWRpbyBhbmQgdmlkZW8gdHJhY2tzIHdlIG5lZWQgdG8gc2VuZC9yZWN2LgogICAgICBpZiAob2ZmZXJPcHRpb25zKSB7CiAgICAgICAgLy8gUmVqZWN0IENocm9tZSBsZWdhY3kgY29uc3RyYWludHMuCiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5tYW5kYXRvcnkgfHwgb2ZmZXJPcHRpb25zLm9wdGlvbmFsKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgICAgICdMZWdhY3kgbWFuZGF0b3J5L29wdGlvbmFsIGNvbnN0cmFpbnRzIG5vdCBzdXBwb3J0ZWQuJyk7CiAgICAgICAgfQogICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBudW1BdWRpb1RyYWNrcyA9IG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvOwogICAgICAgIH0KICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgbnVtVmlkZW9UcmFja3MgPSBvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbzsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMubG9jYWxTdHJlYW1zLmxlbmd0aCkgewogICAgICAgIC8vIFB1c2ggbG9jYWwgc3RyZWFtcy4KICAgICAgICB0aGlzLmxvY2FsU3RyZWFtc1swXS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7CiAgICAgICAgICB0cmFja3MucHVzaCh7CiAgICAgICAgICAgIGtpbmQ6IHRyYWNrLmtpbmQsCiAgICAgICAgICAgIHRyYWNrOiB0cmFjaywKICAgICAgICAgICAgd2FudFJlY2VpdmU6IHRyYWNrLmtpbmQgPT09ICdhdWRpbycgPwogICAgICAgICAgICAgICAgbnVtQXVkaW9UcmFja3MgPiAwIDogbnVtVmlkZW9UcmFja3MgPiAwCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICh0cmFjay5raW5kID09PSAnYXVkaW8nKSB7CiAgICAgICAgICAgIG51bUF1ZGlvVHJhY2tzLS07CiAgICAgICAgICB9IGVsc2UgaWYgKHRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHsKICAgICAgICAgICAgbnVtVmlkZW9UcmFja3MtLTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyBDcmVhdGUgTS1saW5lcyBmb3IgcmVjdm9ubHkgc3RyZWFtcy4KICAgICAgd2hpbGUgKG51bUF1ZGlvVHJhY2tzID4gMCB8fCBudW1WaWRlb1RyYWNrcyA+IDApIHsKICAgICAgICBpZiAobnVtQXVkaW9UcmFja3MgPiAwKSB7CiAgICAgICAgICB0cmFja3MucHVzaCh7CiAgICAgICAgICAgIGtpbmQ6ICdhdWRpbycsCiAgICAgICAgICAgIHdhbnRSZWNlaXZlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIG51bUF1ZGlvVHJhY2tzLS07CiAgICAgICAgfQogICAgICAgIGlmIChudW1WaWRlb1RyYWNrcyA+IDApIHsKICAgICAgICAgIHRyYWNrcy5wdXNoKHsKICAgICAgICAgICAga2luZDogJ3ZpZGVvJywKICAgICAgICAgICAgd2FudFJlY2VpdmU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgbnVtVmlkZW9UcmFja3MtLTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSgpOwogICAgICB2YXIgdHJhbnNjZWl2ZXJzID0gW107CiAgICAgIHRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKG1saW5lLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgLy8gRm9yIGVhY2ggdHJhY2ssIGNyZWF0ZSBhbiBpY2UgZ2F0aGVyZXIsIGljZSB0cmFuc3BvcnQsIGR0bHMgdHJhbnNwb3J0LAogICAgICAgIC8vIHBvdGVudGlhbGx5IHJ0cHNlbmRlciBhbmQgcnRwcmVjZWl2ZXIuCiAgICAgICAgdmFyIHRyYWNrID0gbWxpbmUudHJhY2s7CiAgICAgICAgdmFyIGtpbmQgPSBtbGluZS5raW5kOwogICAgICAgIHZhciBtaWQgPSBnZW5lcmF0ZUlkZW50aWZpZXIoKTsKCiAgICAgICAgdmFyIHRyYW5zcG9ydHMgPSBzZWxmLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cyhtaWQsIHNkcE1MaW5lSW5kZXgpOwoKICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSBSVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKGtpbmQpOwogICAgICAgIHZhciBydHBTZW5kZXI7CiAgICAgICAgdmFyIHJ0cFJlY2VpdmVyOwoKICAgICAgICAvLyBnZW5lcmF0ZSBhbiBzc3JjIG5vdywgdG8gYmUgdXNlZCBsYXRlciBpbiBydHBTZW5kZXIuc2VuZAogICAgICAgIHZhciBzZW5kU3NyYyA9ICgyICogc2RwTUxpbmVJbmRleCArIDEpICogMTAwMTsKICAgICAgICBpZiAodHJhY2spIHsKICAgICAgICAgIHJ0cFNlbmRlciA9IG5ldyBSVENSdHBTZW5kZXIodHJhY2ssIHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobWxpbmUud2FudFJlY2VpdmUpIHsKICAgICAgICAgIHJ0cFJlY2VpdmVyID0gbmV3IFJUQ1J0cFJlY2VpdmVyKHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCwga2luZCk7CiAgICAgICAgfQoKICAgICAgICB0cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICBpY2VHYXRoZXJlcjogdHJhbnNwb3J0cy5pY2VHYXRoZXJlciwKICAgICAgICAgIGljZVRyYW5zcG9ydDogdHJhbnNwb3J0cy5pY2VUcmFuc3BvcnQsCiAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsCiAgICAgICAgICBsb2NhbENhcGFiaWxpdGllczogbG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IG51bGwsCiAgICAgICAgICBydHBTZW5kZXI6IHJ0cFNlbmRlciwKICAgICAgICAgIHJ0cFJlY2VpdmVyOiBydHBSZWNlaXZlciwKICAgICAgICAgIGtpbmQ6IGtpbmQsCiAgICAgICAgICBtaWQ6IG1pZCwKICAgICAgICAgIHNlbmRTc3JjOiBzZW5kU3NyYywKICAgICAgICAgIHJlY3ZTc3JjOiBudWxsCiAgICAgICAgfTsKICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSB0cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07CiAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlTWVkaWFTZWN0aW9uKHRyYW5zY2VpdmVyLAogICAgICAgICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcywgJ29mZmVyJywgc2VsZi5sb2NhbFN0cmVhbXNbMF0pOwogICAgICB9KTsKCiAgICAgIHRoaXMuX3BlbmRpbmdPZmZlciA9IHRyYW5zY2VpdmVyczsKICAgICAgdmFyIGRlc2MgPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICB0eXBlOiAnb2ZmZXInLAogICAgICAgIHNkcDogc2RwCiAgICAgIH0pOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzBdLCAwLCBkZXNjKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlc2MpOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlciA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBhbnN3ZXJPcHRpb25zOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzBdICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgYW5zd2VyT3B0aW9ucyA9IGFyZ3VtZW50c1swXTsKICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7CiAgICAgICAgYW5zd2VyT3B0aW9ucyA9IGFyZ3VtZW50c1syXTsKICAgICAgfQoKICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKCk7CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIG9mIGNhcGFiaWxpdGllcy4KICAgICAgICB2YXIgY29tbW9uQ2FwYWJpbGl0aWVzID0gc2VsZi5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKAogICAgICAgICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcywKICAgICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTsKCiAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlTWVkaWFTZWN0aW9uKHRyYW5zY2VpdmVyLCBjb21tb25DYXBhYmlsaXRpZXMsCiAgICAgICAgICAgICdhbnN3ZXInLCBzZWxmLmxvY2FsU3RyZWFtc1swXSk7CiAgICAgIH0pOwoKICAgICAgdmFyIGRlc2MgPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICB0eXBlOiAnYW5zd2VyJywKICAgICAgICBzZHA6IHNkcAogICAgICB9KTsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggJiYgdHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1swXSwgMCwgZGVzYyk7CiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjKTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHsKICAgICAgdmFyIG1MaW5lSW5kZXggPSBjYW5kaWRhdGUuc2RwTUxpbmVJbmRleDsKICAgICAgaWYgKGNhbmRpZGF0ZS5zZHBNaWQpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy50cmFuc2NlaXZlcnNbaV0ubWlkID09PSBjYW5kaWRhdGUuc2RwTWlkKSB7CiAgICAgICAgICAgIG1MaW5lSW5kZXggPSBpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHRyYW5zY2VpdmVyID0gdGhpcy50cmFuc2NlaXZlcnNbbUxpbmVJbmRleF07CiAgICAgIGlmICh0cmFuc2NlaXZlcikgewogICAgICAgIHZhciBjYW5kID0gT2JqZWN0LmtleXMoY2FuZGlkYXRlLmNhbmRpZGF0ZSkubGVuZ3RoID4gMCA/CiAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmRpZGF0ZS5jYW5kaWRhdGUpIDoge307CiAgICAgICAgLy8gSWdub3JlIENocm9tZSdzIGludmFsaWQgY2FuZGlkYXRlcyBzaW5jZSBFZGdlIGRvZXMgbm90IGxpa2UgdGhlbS4KICAgICAgICBpZiAoY2FuZC5wcm90b2NvbCA9PT0gJ3RjcCcgJiYgY2FuZC5wb3J0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIElnbm9yZSBSVENQIGNhbmRpZGF0ZXMsIHdlIGFzc3VtZSBSVENQLU1VWC4KICAgICAgICBpZiAoY2FuZC5jb21wb25lbnQgIT09ICcxJykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyBBIGRpcnR5IGhhY2sgdG8gbWFrZSBzYW1wbGVzIHdvcmsuCiAgICAgICAgaWYgKGNhbmQudHlwZSA9PT0gJ2VuZE9mQ2FuZGlkYXRlcycpIHsKICAgICAgICAgIGNhbmQgPSB7fTsKICAgICAgICB9CiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZShjYW5kKTsKICAgICAgfQogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1sxXSwgMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBwcm9taXNlcyA9IFtdOwogICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgWydydHBTZW5kZXInLCAncnRwUmVjZWl2ZXInLCAnaWNlR2F0aGVyZXInLCAnaWNlVHJhbnNwb3J0JywKICAgICAgICAgICAgJ2R0bHNUcmFuc3BvcnQnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgICAgICAgaWYgKHRyYW5zY2VpdmVyW21ldGhvZF0pIHsKICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0cmFuc2NlaXZlclttZXRob2RdLmdldFN0YXRzKCkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICAgICAgYXJndW1lbnRzWzFdOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgIHZhciByZXN1bHRzID0ge307CiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICByZXMuZm9yRWFjaChmdW5jdGlvbihyZXN1bHQpIHsKICAgICAgICAgICAgT2JqZWN0LmtleXMocmVzdWx0KS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgICAgICAgcmVzdWx0c1tpZF0gPSByZXN1bHRbaWRdOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNiLCAwLCByZXN1bHRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKICB9Cn0gZWxzZSB7CiAgd2VicnRjVXRpbHMubG9nKCdCcm93c2VyIGRvZXMgbm90IGFwcGVhciB0byBiZSBXZWJSVEMtY2FwYWJsZScpOwp9CgovLyBQb2x5ZmlsbCBvbnRyYWNrIG9uIGJyb3dzZXJzIHRoYXQgZG9uJ3QgeWV0IGhhdmUgaXQKaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiAhKCdvbnRyYWNrJyBpbgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29udHJhY2snLCB7CiAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fb250cmFjazsgfSwKICAgIHNldDogZnVuY3Rpb24oZikgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGlmICh0aGlzLl9vbnRyYWNrKSB7CiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spOwogICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkpOwogICAgICB9CiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7CiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKHdlYnJ0Y0RldGVjdGVkQnJvd3NlciA9PT0gJ2Nocm9tZScpIHsKICAgICAgICAgIC8vIG9uYWRkc3RyZWFtIGRvZXMgbm90IGZpcmUgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIHRvIGFuIGV4aXN0aW5nIHN0cmVhbS4KICAgICAgICAgIC8vIGJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGjjgZ90CiAgICAgICAgICBlLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIGZ1bmN0aW9uKHRlKSB7CiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0ZS50cmFjazsKICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSB7dHJhY2s6IHRlLnRyYWNrfTsKICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZS5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpOwogICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0ge3RyYWNrOiB0cmFja307CiAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgfS5iaW5kKHRoaXMpKTsKICAgIH0KICB9KTsKfQoKLy8gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGdldFVzZXJNZWRpYSBhcyBhIFByb21pc2UuCmZ1bmN0aW9uIHJlcXVlc3RVc2VyTWVkaWEoY29uc3RyYWludHMpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBnZXRVc2VyTWVkaWEoY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdCk7CiAgfSk7Cn0KCnZhciB3ZWJydGNUZXN0aW5nID0ge307CnRyeSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdlYnJ0Y1Rlc3RpbmcsICd2ZXJzaW9uJywgewogICAgc2V0OiBmdW5jdGlvbih2ZXJzaW9uKSB7CiAgICAgIHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA9IHZlcnNpb247CiAgICB9CiAgfSk7Cn0gY2F0Y2ggKGUpIHt9CgppZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICB2YXIgUlRDUGVlckNvbm5lY3Rpb247CiAgdmFyIFJUQ0ljZUNhbmRpZGF0ZTsKICB2YXIgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uOwogIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgewogICAgUlRDUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb247CiAgICBSVENJY2VDYW5kaWRhdGUgPSB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlOwogICAgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbjsKICB9CiAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICBSVENQZWVyQ29ubmVjdGlvbjogUlRDUGVlckNvbm5lY3Rpb24sCiAgICBSVENJY2VDYW5kaWRhdGU6IFJUQ0ljZUNhbmRpZGF0ZSwKICAgIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLAogICAgZ2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWEsCiAgICBhdHRhY2hNZWRpYVN0cmVhbTogYXR0YWNoTWVkaWFTdHJlYW0sCiAgICByZWF0dGFjaE1lZGlhU3RyZWFtOiByZWF0dGFjaE1lZGlhU3RyZWFtLAogICAgd2VicnRjRGV0ZWN0ZWRCcm93c2VyOiB3ZWJydGNEZXRlY3RlZEJyb3dzZXIsCiAgICB3ZWJydGNEZXRlY3RlZFZlcnNpb246IHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiwKICAgIHdlYnJ0Y01pbmltdW1WZXJzaW9uOiB3ZWJydGNNaW5pbXVtVmVyc2lvbiwKICAgIHdlYnJ0Y1Rlc3Rpbmc6IHdlYnJ0Y1Rlc3RpbmcsCiAgICB3ZWJydGNVdGlsczogd2VicnRjVXRpbHMKICAgIC8vcmVxdWVzdFVzZXJNZWRpYTogbm90IGV4cG9zZWQgb24gcHVycG9zZS4KICAgIC8vdHJhY2U6IG5vdCBleHBvc2VkIG9uIHB1cnBvc2UuCiAgfTsKfSBlbHNlIGlmICgodHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpICYmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nKSkgewogIC8vIEV4cG9zZSBvYmplY3RzIGFuZCBmdW5jdGlvbnMgd2hlbiBSZXF1aXJlSlMgaXMgZG9pbmcgdGhlIGxvYWRpbmcuCiAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIFJUQ1BlZXJDb25uZWN0aW9uOiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sCiAgICAgIFJUQ0ljZUNhbmRpZGF0ZTogd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSwKICAgICAgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uOiB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLAogICAgICBnZXRVc2VyTWVkaWE6IGdldFVzZXJNZWRpYSwKICAgICAgYXR0YWNoTWVkaWFTdHJlYW06IGF0dGFjaE1lZGlhU3RyZWFtLAogICAgICByZWF0dGFjaE1lZGlhU3RyZWFtOiByZWF0dGFjaE1lZGlhU3RyZWFtLAogICAgICB3ZWJydGNEZXRlY3RlZEJyb3dzZXI6IHdlYnJ0Y0RldGVjdGVkQnJvd3NlciwKICAgICAgd2VicnRjRGV0ZWN0ZWRWZXJzaW9uOiB3ZWJydGNEZXRlY3RlZFZlcnNpb24sCiAgICAgIHdlYnJ0Y01pbmltdW1WZXJzaW9uOiB3ZWJydGNNaW5pbXVtVmVyc2lvbiwKICAgICAgd2VicnRjVGVzdGluZzogd2VicnRjVGVzdGluZywKICAgICAgd2VicnRjVXRpbHM6IHdlYnJ0Y1V0aWxzCiAgICAgIC8vcmVxdWVzdFVzZXJNZWRpYTogbm90IGV4cG9zZWQgb24gcHVycG9zZS4KICAgICAgLy90cmFjZTogbm90IGV4cG9zZWQgb24gcHVycG9zZS4KICAgIH07CiAgfSk7Cn0KCn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnJlcXVpcmUoJ3dlYnJ0Yy1hZGFwdGVyLXRlc3QnKTsKCnZhciBfRXZlbnRFbWl0dGVyMiA9IHJlcXVpcmUoJy4uL3V0aWxzL0V2ZW50RW1pdHRlcicpOwoKdmFyIF9FdmVudEVtaXR0ZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRXZlbnRFbWl0dGVyMik7Cgp2YXIgX2Nvbm5lY3Rpb24gPSByZXF1aXJlKCcuL2Nvbm5lY3Rpb24nKTsKCnZhciBfY29ubmVjdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb25uZWN0aW9uKTsKCnZhciBfcGVlciA9IHJlcXVpcmUoJy4vcGVlcicpOwoKdmFyIF9wZWVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BlZXIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKioKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KCi8qIGpzaGludCB1bmRlZjogdHJ1ZSAqLwovKiBnbG9iYWxzIFJUQ1BlZXJDb25uZWN0aW9uICovCi8qIGdsb2JhbHMgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uICovCi8qIGdsb2JhbHMgUlRDSWNlQ2FuZGlkYXRlICovCgp2YXIgQ29ubmVjdGlvbkNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikgewogIF9pbmhlcml0cyhDb25uZWN0aW9uQ29udHJvbGxlciwgX0V2ZW50RW1pdHRlcik7CgogIGZ1bmN0aW9uIENvbm5lY3Rpb25Db250cm9sbGVyKHN5bmNoZXIsIGRvbWFpbiwgY29uZmlndXJhdGlvbikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbm5lY3Rpb25Db250cm9sbGVyKTsKCiAgICBpZiAoIXN5bmNoZXIpIHRocm93IG5ldyBFcnJvcignVGhlIHN5bmNoZXIgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWRvbWFpbikgdGhyb3cgbmV3IEVycm9yKCdUaGUgZG9tYWluIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWd1cmF0aW9uKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ29ubmVjdGlvbkNvbnRyb2xsZXIpLmNhbGwodGhpcykpOwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKCiAgICBfdGhpcy5zeW5jaGVyID0gc3luY2hlcjsKICAgIF90aGlzLm1vZGUgPSAnb2ZmZXInOwogICAgX3RoaXMuX2RvbWFpbiA9IGRvbWFpbjsKCiAgICBfdGhpcy5fb2JqZWN0RGVzY1VSTCA9ICdoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4nICsgX3RoaXMuX2RvbWFpbiArICcvLndlbGwta25vd24vZGF0YXNjaGVtYS9Db25uZWN0aW9uJzsKCiAgICBjb25zb2xlLmluZm8oY29uZmlndXJhdGlvbik7CgogICAgX3RoaXMubWVkaWFDb25zdHJhaW50cyA9IGNvbmZpZ3VyYXRpb24ubWVkaWFDb25zdHJhaW50czsKICAgIF90aGlzLmNvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uLndlYnJ0YzsKCiAgICAvLyBQcmVwYXJlIHRoZSBQZWVyQ29ubmVjdGlvbgogICAgdmFyIHBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKF90aGlzLmNvbmZpZ3VyYXRpb24pOwoKICAgIHBlZXJDb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3NpZ25hbGluZ3N0YXRlY2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50KSB7CgogICAgICBjb25zb2xlLmluZm8oJ3NpZ25hbGluZ3N0YXRlY2hhbmdlJywgZXZlbnQuY3VycmVudFRhcmdldC5zaWduYWxpbmdTdGF0ZSk7CgogICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5zaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtbG9jYWwtb2ZmZXInKSB7CiAgICAgICAgX3RoaXMudHJpZ2dlcignY29udHJvbGxlcjpzdGF0ZTpjaGFuZ2UnLCBfdGhpcy5tb2RlKTsKICAgICAgfQoKICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuc2lnbmFsaW5nU3RhdGUgPT09ICdoYXZlLXJlbW90ZS1vZmZlcicpIHsKICAgICAgICBfdGhpcy5tb2RlID0gJ2Fuc3dlcic7CiAgICAgICAgX3RoaXMudHJpZ2dlcignY29udHJvbGxlcjpzdGF0ZTpjaGFuZ2UnLCBfdGhpcy5tb2RlKTsKICAgICAgfQogICAgfSk7CgogICAgcGVlckNvbm5lY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGNvbnNvbGUuaW5mbygnaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJywgZXZlbnQuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGUpOwogICAgICB2YXIgZGF0YSA9IF90aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXIuZGF0YTsKICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoJ2Nvbm5lY3Rpb24nKSkgewogICAgICAgIGRhdGEuY29ubmVjdGlvbi5zdGF0dXMgPSBldmVudC5jdXJyZW50VGFyZ2V0LmljZUNvbm5lY3Rpb25TdGF0ZTsKICAgICAgfQogICAgfSk7CgogICAgcGVlckNvbm5lY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgZnVuY3Rpb24gKGV2ZW50KSB7CgogICAgICBpZiAoIWV2ZW50LmNhbmRpZGF0ZSkgcmV0dXJuOwoKICAgICAgdmFyIGljZWNhbmRpZGF0ZSA9IHsKICAgICAgICB0eXBlOiAnY2FuZGlkYXRlJywKICAgICAgICBjYW5kaWRhdGU6IGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUsCiAgICAgICAgc2RwTWlkOiBldmVudC5jYW5kaWRhdGUuc2RwTWlkLAogICAgICAgIHNkcE1MaW5lSW5kZXg6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4CiAgICAgIH07CgogICAgICB2YXIgZGF0YSA9IF90aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXIuZGF0YTsKCiAgICAgIGlmIChfdGhpcy5tb2RlID09PSAnb2ZmZXInKSB7CiAgICAgICAgZGF0YS5jb25uZWN0aW9uLm93bmVyUGVlci5pY2VDYW5kaWRhdGVzLnB1c2goaWNlY2FuZGlkYXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhLnBlZXIuaWNlQ2FuZGlkYXRlcy5wdXNoKGljZWNhbmRpZGF0ZSk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIEFkZCBzdHJlYW0gdG8gUGVlckNvbm5lY3Rpb24KICAgIHBlZXJDb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zb2xlLmluZm8oJ0FkZCBTdHJlYW06ICcsIGV2ZW50KTsKICAgICAgX3RoaXMudHJpZ2dlcignc3RyZWFtOmFkZGVkJywgZXZlbnQpOwogICAgfSk7CgogICAgX3RoaXMucGVlckNvbm5lY3Rpb24gPSBwZWVyQ29ubmVjdGlvbjsKCiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgX2NyZWF0ZUNsYXNzKENvbm5lY3Rpb25Db250cm9sbGVyLCBbewogICAga2V5OiAnY2hhbmdlUGVlckluZm9ybWF0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VQZWVySW5mb3JtYXRpb24oZGF0YU9iamVjdE9ic2VydmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBkYXRhID0gZGF0YU9iamVjdE9ic2VydmVyLmRhdGE7CiAgICAgIHZhciBpc093bmVyID0gZGF0YS5oYXNPd25Qcm9wZXJ0eSgnY29ubmVjdGlvbicpOwoKICAgICAgdmFyIHBlZXJEYXRhID0gaXNPd25lciA/IGRhdGEuY29ubmVjdGlvbi5vd25lclBlZXIgOiBkYXRhLnBlZXI7CgogICAgICBjb25zb2xlLmluZm8oJ1BlZXIgRGF0YTonLCBKU09OLnN0cmluZ2lmeShwZWVyRGF0YSkpOwoKICAgICAgaWYgKHBlZXJEYXRhLmhhc093blByb3BlcnR5KCdjb25uZWN0aW9uRGVzY3JpcHRpb24nKSkgewogICAgICAgIF90aGlzLnByb2Nlc3NQZWVySW5mb3JtYXRpb24ocGVlckRhdGEuY29ubmVjdGlvbkRlc2NyaXB0aW9uKTsKICAgICAgfQoKICAgICAgaWYgKHBlZXJEYXRhLmhhc093blByb3BlcnR5KCdpY2VDYW5kaWRhdGVzJykpIHsKICAgICAgICBwZWVyRGF0YS5pY2VDYW5kaWRhdGVzLmZvckVhY2goZnVuY3Rpb24gKGljZSkgewogICAgICAgICAgX3RoaXMucHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihpY2UpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBkYXRhT2JqZWN0T2JzZXJ2ZXIub25DaGFuZ2UoJyonLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBjb25zb2xlLmluZm8oJ09ic2VydmVyIG9uIGNoYW5nZSBtZXNzYWdlOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMucHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihldmVudC5kYXRhKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAncHJvY2Vzc1BlZXJJbmZvcm1hdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihkYXRhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmluZm8oSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwoKICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ29mZmVyJyB8fCBkYXRhLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdQcm9jZXNzIENvbm5lY3Rpb24gRGVzY3JpcHRpb246ICcsIGRhdGEuc2RwKTsKICAgICAgICBfdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGRhdGEpLCBfdGhpcy5yZW1vdGVEZXNjcmlwdGlvblN1Y2Nlc3MsIF90aGlzLnJlbW90ZURlc2NyaXB0aW9uRXJyb3IpOwogICAgICB9CgogICAgICBpZiAoZGF0YS50eXBlID09PSAnY2FuZGlkYXRlJykgewogICAgICAgIGNvbnNvbGUuaW5mbygnUHJvY2VzcyBJY2UgQ2FuZGlkYXRlOiAnLCBkYXRhKTsKICAgICAgICBfdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUobmV3IFJUQ0ljZUNhbmRpZGF0ZSh7IGNhbmRpZGF0ZTogZGF0YS5jYW5kaWRhdGUgfSksIF90aGlzLnJlbW90ZURlc2NyaXB0aW9uU3VjY2VzcywgX3RoaXMucmVtb3RlRGVzY3JpcHRpb25FcnJvcik7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdyZW1vdGVEZXNjcmlwdGlvblN1Y2Nlc3MnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW90ZURlc2NyaXB0aW9uU3VjY2VzcygpIHsKICAgICAgY29uc29sZS5pbmZvKCdyZW1vdGUgc3VjY2VzcycpOwogICAgfQogIH0sIHsKICAgIGtleTogJ3JlbW90ZURlc2NyaXB0aW9uRXJyb3InLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW90ZURlc2NyaXB0aW9uRXJyb3IoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcignZXJyb3I6ICcsIGVycm9yKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdjcmVhdGVPZmZlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlT2ZmZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcihmdW5jdGlvbiAoZGVzY3JpcHRpb24pIHsKICAgICAgICBfdGhpcy5vbkxvY2FsU2Vzc2lvbkNyZWF0ZWQoZGVzY3JpcHRpb24pOwogICAgICB9LCBfdGhpcy5pbmZvRXJyb3IpOwogICAgfQogIH0sIHsKICAgIGtleTogJ2NyZWF0ZUFuc3dlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQW5zd2VyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlQW5zd2VyKGZ1bmN0aW9uIChkZXNjcmlwdGlvbikgewogICAgICAgIF90aGlzLm9uTG9jYWxTZXNzaW9uQ3JlYXRlZChkZXNjcmlwdGlvbik7CiAgICAgIH0sIF90aGlzLmluZm9FcnJvcik7CiAgICB9CiAgfSwgewogICAga2V5OiAnb25Mb2NhbFNlc3Npb25DcmVhdGVkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkxvY2FsU2Vzc2lvbkNyZWF0ZWQoZGVzY3JpcHRpb24pIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uLCBmdW5jdGlvbiAoKSB7CgogICAgICAgIHZhciBkYXRhID0gX3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlci5kYXRhOwogICAgICAgIHZhciBzZHBDb25uZWN0aW9uID0gewogICAgICAgICAgc2RwOiBkZXNjcmlwdGlvbi5zZHAsCiAgICAgICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlCiAgICAgICAgfTsKCiAgICAgICAgaWYgKF90aGlzLm1vZGUgPT09ICdvZmZlcicpIHsKICAgICAgICAgIGRhdGEuY29ubmVjdGlvbi5vd25lclBlZXIuY29ubmVjdGlvbkRlc2NyaXB0aW9uID0gc2RwQ29ubmVjdGlvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0YS5wZWVyLmNvbm5lY3Rpb25EZXNjcmlwdGlvbiA9IHNkcENvbm5lY3Rpb247CiAgICAgICAgfQogICAgICB9LCBfdGhpcy5pbmZvRXJyb3IpOwogICAgfQogIH0sIHsKICAgIGtleTogJ2luZm9FcnJvcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5mb0Vycm9yKGVycikgewogICAgICBjb25zb2xlLmVycm9yKGVyci50b1N0cmluZygpLCBlcnIpOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byBhY2NlcHQgYW4gaW5jb21pbmcgY29ubmVjdGlvbiByZXF1ZXN0LgogICAgICogQG1ldGhvZCBhY2NlcHQKICAgICAqIEByZXR1cm4ge1Byb21pc2V9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWNjZXB0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBhY2NlcHQoc3RyZWFtKSB7CiAgICAgIC8vIFRPRE86IFBhc3MgYXJndW1lbnQgb3B0aW9ucyBhcyBhIHN0cmVhbSwgYmVjYXVzZSBpcyBzcGVjaWZpYyBvZiBpbXBsZW1lbnRhdGlvbjsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBzeW5jaGVyID0gX3RoaXMuc3luY2hlcjsKCiAgICAgIGNvbnNvbGUubG9nKCdSZW1vdGUgUGVlciBJbmZvcm1hdGlvbjogJywgX3RoaXMuX3JlbW90ZVBlZXJJbmZvcm1hdGlvbik7CiAgICAgIHZhciByZW1vdGVQZWVyID0gX3RoaXMuX3JlbW90ZVBlZXJJbmZvcm1hdGlvbi5mcm9tOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdHJ5IHsKCiAgICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTeW5jaGVyIENyZWF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFxuJyk7CiAgICAgICAgICBzeW5jaGVyLmNyZWF0ZShfdGhpcy5fb2JqZWN0RGVzY1VSTCwgW3JlbW90ZVBlZXJdLCB7fSkudGhlbihmdW5jdGlvbiAoZGF0YU9iamVjdFJlcG9ydGVyKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnMi4gUmV0dXJuIHRoZSBEYXRhIE9iamVjdCBSZXBvcnRlciAnLCBkYXRhT2JqZWN0UmVwb3J0ZXIpOwoKICAgICAgICAgICAgX3RoaXMuc3RyZWFtID0gc3RyZWFtOwogICAgICAgICAgICBfdGhpcy5kYXRhT2JqZWN0UmVwb3J0ZXIgPSBkYXRhT2JqZWN0UmVwb3J0ZXI7CiAgICAgICAgICAgIHJlc29sdmUoJ2FjY2VwdGVkJyk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmVqZWN0KCdlcnJvciBhY2NlcHRpbmcgY29ubmVjdGlvbicpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFVzZWQgdG8gZGVjbGluZSBhbiBpbmNvbWluZyBjb25uZWN0aW9uIHJlcXVlc3QuCiAgICAqIEBtZXRob2QgZGVjbGluZQogICAgKiBAcmV0dXJuIHtQcm9taXNlfQogICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVjbGluZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVjbGluZSgpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBzeW5jaGVyID0gX3RoaXMuc3luY2hlcjsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnc3luY2hlcjogJywgc3luY2hlcik7CiAgICAgICAgICByZXNvbHZlKCdEZWNsaW5lZCcpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byBjbG9zZSBhbiBleGlzdGluZyBjb25uZWN0aW9uIGluc3RhbmNlLgogICAgICogQG1ldGhvZCBkaXNjb25uZWN0CiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2Rpc2Nvbm5lY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CgogICAgICAvLyBUT0RPOiBvcHRpbWl6ZSB0aGUgZGlzY29ubmVjdCBmdW5jdGlvbgoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHRyeSB7CgogICAgICAgICAgX3RoaXMucGVlckNvbm5lY3Rpb24uY2xvc2UoKTsKCiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJlamVjdCgnZXJyb3IgZGlzY29ubmVjdGluZyBjb25uZWN0aW9uJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFVzZWQgdG8gYWRkL2ludml0ZSBuZXcgcGVlcnMgb24gYW4gZXhpc3RpbmcgY29ubmVjdGlvbiBpbnN0YW5jZSAoZm9yIG11bHRpcGFydHkgY29ubmVjdGlvbnMpLgogICAgICogQG1ldGhvZCBhZGRQZWVyCiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZFBlZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFBlZXIoKSB7fQoKICAgIC8qKgogICAgICogVXNlZCB0byByZW1vdmUgYSBwZWVyIGZyb20gYW4gZXhpc3RpbmcgY29ubmVjdGlvbiBpbnN0YW5jZS4KICAgICAqIEBtZXRob2QgcmVtb3ZlUGVlcgogICAgICogQHJldHVybiB7UHJvbWlzZX0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVQZWVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVQZWVyKCkge30KCiAgICAvLyBQZWVyIEFjdGlvbnMKCiAgfSwgewogICAga2V5OiAnZGlzYWJsZU1pYycsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZU1pYygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgbG9jYWxTdHJlYW0gPSBfdGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRMb2NhbFN0cmVhbXMoKVswXTsKICAgICAgICAgIHZhciBhdWRpb1RyYWNrID0gbG9jYWxTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTsKCiAgICAgICAgICBhdWRpb1RyYWNrLmVuYWJsZWQgPSBhdWRpb1RyYWNrLmVuYWJsZWQgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICByZXNvbHZlKGF1ZGlvVHJhY2suZW5hYmxlZCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZGlzYWJsZUNhbScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZUNhbSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgbG9jYWxTdHJlYW0gPSBfdGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRMb2NhbFN0cmVhbXMoKVswXTsKICAgICAgICAgIHZhciB2aWRlb1RyYWNrID0gbG9jYWxTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTsKCiAgICAgICAgICB2aWRlb1RyYWNrLmVuYWJsZWQgPSB2aWRlb1RyYWNrLmVuYWJsZWQgPyBmYWxzZSA6IHRydWU7CgogICAgICAgICAgcmVzb2x2ZSh2aWRlb1RyYWNrLmVuYWJsZWQpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ211dGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG11dGUoKSB7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciByZW1vdGVTdHJlYW0gPSBfdGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRSZW1vdGVTdHJlYW1zKClbMF07CiAgICAgICAgICB2YXIgYXVkaW9UcmFjayA9IHJlbW90ZVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdOwoKICAgICAgICAgIGF1ZGlvVHJhY2suZW5hYmxlZCA9IGF1ZGlvVHJhY2suZW5hYmxlZCA/IGZhbHNlIDogdHJ1ZTsKCiAgICAgICAgICByZXNvbHZlKGF1ZGlvVHJhY2suZW5hYmxlZCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnc3RyZWFtJywKICAgIHNldDogZnVuY3Rpb24gc2V0KG1lZGlhU3RyZWFtKSB7CiAgICAgIGlmICghbWVkaWFTdHJlYW0pIHRocm93IG5ldyBFcnJvcignVGhlIG1lZGlhU3RyZWFtIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgY29uc29sZS5pbmZvKCdzZXQgc3RyZWFtOiAnLCBtZWRpYVN0cmVhbSk7CiAgICAgIF90aGlzLnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShtZWRpYVN0cmVhbSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZ2V0TG9jYWxTdHJlYW1zJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMucGVlckNvbm5lY3Rpb24uZ2V0TG9jYWxTdHJlYW1zKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZ2V0UmVtb3RlU3RyZWFtcycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLnBlZXJDb25uZWN0aW9uLmdldFJlbW90ZVN0cmVhbXMoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBSZW1vdGUgcGVlciBpbmZvcm1hdGlvbiwgbGlrZSBIeXBlcnR5LgogICAgICogQHBhcmFtICB7T2JqZWN0fSByZW1vdGVQZWVySW5mb3JtYXRpb24gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHBlZXI7CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3RlUGVlckluZm9ybWF0aW9uJywKICAgIHNldDogZnVuY3Rpb24gc2V0KHJlbW90ZVBlZXJJbmZvcm1hdGlvbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy5fcmVtb3RlUGVlckluZm9ybWF0aW9uID0gcmVtb3RlUGVlckluZm9ybWF0aW9uOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IGluZm9ybWF0aW9uIHJlbGF0aXZlIHRvIHRoZSBSZW1vdGUgUGVlcjsKICAgICAqIEByZXR1cm4ge09iamVjdH0gcmVtb3RlUGVlckluZm9ybWF0aW9uOwogICAgICovCiAgICAsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9yZW1vdGVQZWVySW5mb3JtYXRpb247CiAgICB9CgogICAgLyoqCiAgICAqIFNldCB0aGUgZGF0YU9iamVjdCBpbiB0aGUgY29udHJvbGxlcgogICAgKiBAcGFyYW0ge0Nvbm5lY3Rpb25EYXRhT2JqZWN0fSBkYXRhT2JqZWN0IC0gaGF2ZSBhbGwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHN5bmNoZXIgb2JqZWN0OwogICAgKi8KCiAgfSwgewogICAga2V5OiAnZGF0YU9iamVjdFJlcG9ydGVyJywKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGFPYmplY3RSZXBvcnRlcikgewogICAgICBpZiAoIWRhdGFPYmplY3RSZXBvcnRlcikgdGhyb3cgbmV3IEVycm9yKCdUaGUgRGF0YSBPYmplY3QgUmVwb3J0ZXIgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyID0gZGF0YU9iamVjdFJlcG9ydGVyOwoKICAgICAgdmFyIGRhdGEgPSBfdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyLmRhdGE7CgogICAgICBkYXRhT2JqZWN0UmVwb3J0ZXIub25TdWJzY3JpcHRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgZXZlbnQuYWNjZXB0KCk7CiAgICAgIH0pOwoKICAgICAgaWYgKF90aGlzLm1vZGUgPT09ICdvZmZlcicpIHsKICAgICAgICBkYXRhLmNvbm5lY3Rpb24gPSBfY29ubmVjdGlvbjIuZGVmYXVsdDsKCiAgICAgICAgX3RoaXMuY3JlYXRlT2ZmZXIoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhLnBlZXIgPSBfcGVlcjIuZGVmYXVsdDsKCiAgICAgICAgX3RoaXMuY3JlYXRlQW5zd2VyKCk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUuZGVidWcoX3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlcik7CiAgICB9CgogICAgLyoqCiAgICAqIHJldHVybiB0aGUgZGF0YU9iamVjdCBpbiB0aGUgY29udHJvbGxlcgogICAgKiBAcmV0dXJuIHtDb25uZWN0aW9uRGF0YU9iamVjdH0gZGF0YU9iamVjdAogICAgKi8KICAgICwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlcjsKICAgIH0KCiAgICAvKioKICAgICogU2V0IHRoZSBkYXRhT2JqZWN0IGluIHRoZSBjb250cm9sbGVyCiAgICAqIEBwYXJhbSB7Q29ubmVjdGlvbkRhdGFPYmplY3R9IGRhdGFPYmplY3QgLSBoYXZlIGFsbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc3luY2hlciBvYmplY3Q7CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkYXRhT2JqZWN0T2JzZXJ2ZXInLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0YU9iamVjdE9ic2VydmVyKSB7CiAgICAgIGlmICghZGF0YU9iamVjdE9ic2VydmVyKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBEYXRhIE9iamVjdCBPYnNlcnZlciBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIgPSBkYXRhT2JqZWN0T2JzZXJ2ZXI7CiAgICAgIF90aGlzLmNoYW5nZVBlZXJJbmZvcm1hdGlvbihkYXRhT2JqZWN0T2JzZXJ2ZXIpOwogICAgfQoKICAgIC8qKgogICAgKiByZXR1cm4gdGhlIGRhdGFPYmplY3QgaW4gdGhlIGNvbnRyb2xsZXIKICAgICogQHJldHVybiB7Q29ubmVjdGlvbkRhdGFPYmplY3R9IGRhdGFPYmplY3QKICAgICovCiAgICAsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXI7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ29ubmVjdGlvbkNvbnRyb2xsZXI7Cn0oX0V2ZW50RW1pdHRlcjMuZGVmYXVsdCk7CgpleHBvcnRzLmRlZmF1bHQgPSBDb25uZWN0aW9uQ29udHJvbGxlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvRXZlbnRFbWl0dGVyIjoxMCwiLi9jb25uZWN0aW9uIjo4LCIuL3BlZXIiOjksIndlYnJ0Yy1hZGFwdGVyLXRlc3QiOjV9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfSHlwZXJ0eURpc2NvdmVyeSA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSHlwZXJ0eURpc2NvdmVyeScpOwoKdmFyIF9IeXBlcnR5RGlzY292ZXJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0h5cGVydHlEaXNjb3ZlcnkpOwoKdmFyIF9JZGVudGl0eU1hbmFnZXIgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0lkZW50aXR5TWFuYWdlcicpOwoKdmFyIF9JZGVudGl0eU1hbmFnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWRlbnRpdHlNYW5hZ2VyKTsKCnZhciBfRGlzY292ZXJ5ID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9EaXNjb3ZlcnknKTsKCnZhciBfRGlzY292ZXJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Rpc2NvdmVyeSk7Cgp2YXIgX1N5bmNoZXIgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXInKTsKCnZhciBfRXZlbnRFbWl0dGVyMiA9IHJlcXVpcmUoJy4uL3V0aWxzL0V2ZW50RW1pdHRlcicpOwoKdmFyIF9FdmVudEVtaXR0ZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRXZlbnRFbWl0dGVyMik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTsKCnZhciBfQ29ubmVjdGlvbkNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL0Nvbm5lY3Rpb25Db250cm9sbGVyJyk7Cgp2YXIgX0Nvbm5lY3Rpb25Db250cm9sbGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Nvbm5lY3Rpb25Db250cm9sbGVyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0gLyoqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiovCgovKiBqc2hpbnQgdW5kZWY6IHRydWUgKi8KCi8vIFNlcnZpY2UgRnJhbWV3b3JrCgoKLy8gVXRpbHMKCgovLyBJbnRlcm5hbHMKCgovKioKKiBIeXBlcnR5IENvbm5lY3RvcjsKKiBAYXV0aG9yIFZpdG9yIFNpbHZhIFt2aXRvci10LXNpbHZhQHRlbGVjb20ucHRdCiogQHZlcnNpb24gMC4xLjAKKi8KCnZhciBIeXBlcnR5Q29ubmVjdG9yID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoSHlwZXJ0eUNvbm5lY3RvciwgX0V2ZW50RW1pdHRlcik7CgogIC8qKgogICogQ3JlYXRlIGEgbmV3IEh5cGVydHkgQ29ubmVjdG9yCiAgKiBAcGFyYW0gIHtTeW5jaGVyfSBzeW5jaGVyIC0gU3luY2hlciBwcm92aWRlZCBmcm9tIHRoZSBydW50aW1lIGNvcmUKICAqLwoKICBmdW5jdGlvbiBIeXBlcnR5Q29ubmVjdG9yKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEh5cGVydHlDb25uZWN0b3IpOwoKICAgIGlmICghaHlwZXJ0eVVSTCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgaHlwZXJ0eVVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghYnVzKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBNaW5pQnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWd1cmF0aW9uKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSHlwZXJ0eUNvbm5lY3RvcikuY2FsbCh0aGlzLCBoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICBfdGhpcy5faHlwZXJ0eVVSTCA9IGh5cGVydHlVUkw7CiAgICBfdGhpcy5fYnVzID0gYnVzOwogICAgX3RoaXMuX2NvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uOwogICAgX3RoaXMuX2RvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShoeXBlcnR5VVJMKS5kb21haW47CgogICAgX3RoaXMuX29iamVjdERlc2NVUkwgPSAnaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuJyArIF90aGlzLl9kb21haW4gKyAnLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29ubmVjdGlvbic7CgogICAgX3RoaXMuX2NvbnRyb2xsZXJzID0ge307CgogICAgdmFyIGh5cGVydHlEaXNjb3ZlcnkgPSBuZXcgX0h5cGVydHlEaXNjb3ZlcnkyLmRlZmF1bHQoaHlwZXJ0eVVSTCwgYnVzKTsKICAgIHZhciBkaXNjb3ZlcnkgPSBuZXcgX0Rpc2NvdmVyeTIuZGVmYXVsdChoeXBlcnR5VVJMLCBidXMpOwogICAgdmFyIGlkZW50aXR5TWFuYWdlciA9IG5ldyBfSWRlbnRpdHlNYW5hZ2VyMi5kZWZhdWx0KGh5cGVydHlVUkwsIGNvbmZpZ3VyYXRpb24ucnVudGltZVVSTCwgYnVzKTsKCiAgICBfdGhpcy5oeXBlcnR5RGlzY292ZXJ5ID0gaHlwZXJ0eURpc2NvdmVyeTsKICAgIF90aGlzLmRpc2NvdmVyeSA9IGRpc2NvdmVyeTsKICAgIF90aGlzLmlkZW50aXR5TWFuYWdlciA9IGlkZW50aXR5TWFuYWdlcjsKCiAgICBjb25zb2xlLmxvZygnRGlzY292ZXI6ICcsIGRpc2NvdmVyeSk7CiAgICBjb25zb2xlLmxvZygnSWRlbnRpdHkgTWFuYWdlcjogJywgaWRlbnRpdHlNYW5hZ2VyKTsKICAgIGNvbnNvbGUubG9nKCdIeXBlcnR5IERpc2NvdmVyeTogJywgaHlwZXJ0eURpc2NvdmVyeSk7CgogICAgdmFyIHN5bmNoZXIgPSBuZXcgX1N5bmNoZXIuU3luY2hlcihoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pOwogICAgc3luY2hlci5vbk5vdGlmaWNhdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uKGV2ZW50KTsKICAgIH0pOwoKICAgIF90aGlzLl9zeW5jaGVyID0gc3luY2hlcjsKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSHlwZXJ0eUNvbm5lY3RvciwgW3sKICAgIGtleTogJ19vbk5vdGlmaWNhdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTm90aWZpY2F0aW9uKGV2ZW50KSB7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0gQWNrbm93bGVkZ2VzIHRoZSBSZXBvcnRlciAtLS0tLS0tLS0tLS0gXG4nKTsKICAgICAgZXZlbnQuYWNrKCk7CiAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFxuJyk7CgogICAgICBpZiAoX3RoaXMuX2NvbnRyb2xsZXJzW2V2ZW50LmZyb21dKSB7CiAgICAgICAgX3RoaXMuX2F1dG9TdWJzY3JpYmUoZXZlbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLl9hdXRvQWNjZXB0KGV2ZW50KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19hdXRvU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYXV0b1N1YnNjcmliZShldmVudCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgc3luY2hlciA9IF90aGlzLl9zeW5jaGVyOwoKICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tIFN5bmNoZXIgQXV0byBTdWJzY3JpYmUgLS0tLS0tLS0tLS0tLS0tLSBcbicpOwogICAgICBjb25zb2xlLmluZm8oJ1N1YnNjcmliZSBVUkwgT2JqZWN0ICcsIGV2ZW50LCBzeW5jaGVyKTsKICAgICAgc3luY2hlci5zdWJzY3JpYmUoX3RoaXMuX29iamVjdERlc2NVUkwsIGV2ZW50LnVybCkudGhlbihmdW5jdGlvbiAoZGF0YU9iamVjdE9ic2VydmVyKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCcxLiBSZXR1cm4gU3Vic2NyaWJlIERhdGEgT2JqZWN0IE9ic2VydmVyJywgZGF0YU9iamVjdE9ic2VydmVyKTsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5fY29udHJvbGxlcnMpOwogICAgICAgIF90aGlzLl9jb250cm9sbGVyc1tldmVudC5mcm9tXS5kYXRhT2JqZWN0T2JzZXJ2ZXIgPSBkYXRhT2JqZWN0T2JzZXJ2ZXI7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19hdXRvQWNjZXB0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYXV0b0FjY2VwdChldmVudCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgc3luY2hlciA9IF90aGlzLl9zeW5jaGVyOwoKICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLSBTeW5jaGVyIFN1YnNjcmliZSAoQXV0byBBY2NlcHQpIC0tLS0tLS0tLS0tLS0gXG4nKTsKICAgICAgY29uc29sZS5pbmZvKCdTdWJzY3JpYmUgVVJMIE9iamVjdCAnLCBldmVudCwgc3luY2hlcik7CiAgICAgIHN5bmNoZXIuc3Vic2NyaWJlKF90aGlzLl9vYmplY3REZXNjVVJMLCBldmVudC51cmwpLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3RPYnNlcnZlcikgewogICAgICAgIGNvbnNvbGUuaW5mbygnMS4gUmV0dXJuIFN1YnNjcmliZSBEYXRhIE9iamVjdCBPYnNlcnZlcicsIGRhdGFPYmplY3RPYnNlcnZlcik7CgogICAgICAgIHZhciBjb25uZWN0aW9uQ29udHJvbGxlciA9IG5ldyBfQ29ubmVjdGlvbkNvbnRyb2xsZXIyLmRlZmF1bHQoc3luY2hlciwgX3RoaXMuX2RvbWFpbiwgX3RoaXMuX2NvbmZpZ3VyYXRpb24pOwogICAgICAgIGNvbm5lY3Rpb25Db250cm9sbGVyLnJlbW90ZVBlZXJJbmZvcm1hdGlvbiA9IGV2ZW50OwogICAgICAgIGNvbm5lY3Rpb25Db250cm9sbGVyLmRhdGFPYmplY3RPYnNlcnZlciA9IGRhdGFPYmplY3RPYnNlcnZlcjsKCiAgICAgICAgX3RoaXMudHJpZ2dlcignY29ubmVjdG9yOmNvbm5lY3RlZCcsIGNvbm5lY3Rpb25Db250cm9sbGVyKTsKICAgICAgICBfdGhpcy50cmlnZ2VyKCdoYXZlOm5vdGlmaWNhdGlvbicsIGV2ZW50KTsKCiAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG4nKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIEVzdGFibGlzaCBjb25uZWN0aW9uIHdpdGggb3RoZXIgY2xpZW50IGlkZW50aWZpZXIKICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTH0gSHlwZXJ0eVVSTCAtIERlZmluZSB0aGUgaWRlbnRpZmllciBvZiB0aGUgb3RoZXIgY29tcG9uZW50CiAgICAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9ucyAtIE9iamVjdCB3aXRoIG9wdGlvbnMgdG8gaW1wcm92ZSB0aGUgY29ubmVjdAogICAgKi8KCiAgfSwgewogICAga2V5OiAnY29ubmVjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdChlbWFpbCwgc3RyZWFtLCBkb21haW4pIHsKICAgICAgLy8gVE9ETzogUGFzcyBhcmd1bWVudCBvcHRpb25zIGFzIGEgc3RyZWFtLCBiZWNhdXNlIGlzIHNwZWNpZmljIG9mIGltcGxlbWVudGF0aW9uOwogICAgICAvLyBUT0RPOiBDSGFuZ2UgdGhlIGh5cGVydHlVUkwgZm9yIGEgbGlzdCBvZiBVUkxTCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBzeW5jaGVyID0gX3RoaXMuX3N5bmNoZXI7CiAgICAgIHZhciBoeXBlcnR5VVJMID0gdm9pZCAwOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIGNvbm5lY3Rpb25Db250cm9sbGVyID0gdm9pZCAwOwogICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFN5bmNoZXIgQ3JlYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG4nKTsKCiAgICAgICAgY29uc29sZS5pbmZvKCdlbWFpbDogJywgZW1haWwsICcgc3RyZWFtOiAnLCBzdHJlYW0sICcgZG9tYWluOicsIGRvbWFpbik7CgogICAgICAgIC8vIHVzZXIsIHNjaGVtZSwgcmVzb3VyY2VzLCBkb21haW4KICAgICAgICAvLyBzY2hlbWU6IFsnQ09NTScsICdDT05ORUNUSU9OJywgJ0NUWFQnLCAnSURFTlRJVFknXQogICAgICAgIF90aGlzLmRpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHlQZXJVc2VyKGVtYWlsLCBkb21haW4pLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKCiAgICAgICAgICBoeXBlcnR5VVJMID0gdXNlci5oeXBlcnR5VVJMOwoKICAgICAgICAgIGNvbnNvbGUubG9nKCdIeXBlcnR5OiAnLCB1c2VyKTsKCiAgICAgICAgICByZXR1cm4gc3luY2hlci5jcmVhdGUoX3RoaXMuX29iamVjdERlc2NVUkwsIFtoeXBlcnR5VVJMXSwge30pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3RSZXBvcnRlcikgewogICAgICAgICAgY29uc29sZS5pbmZvKCcxLiBSZXR1cm4gQ3JlYXRlIERhdGEgT2JqZWN0IFJlcG9ydGVyJywgZGF0YU9iamVjdFJlcG9ydGVyKTsKCiAgICAgICAgICBjb25uZWN0aW9uQ29udHJvbGxlciA9IG5ldyBfQ29ubmVjdGlvbkNvbnRyb2xsZXIyLmRlZmF1bHQoc3luY2hlciwgX3RoaXMuX2RvbWFpbiwgX3RoaXMuX2NvbmZpZ3VyYXRpb24pOwogICAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXIuc3RyZWFtID0gc3RyZWFtOwogICAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXIuZGF0YU9iamVjdFJlcG9ydGVyID0gZGF0YU9iamVjdFJlcG9ydGVyOwoKICAgICAgICAgIF90aGlzLl9jb250cm9sbGVyc1toeXBlcnR5VVJMXSA9IGNvbm5lY3Rpb25Db250cm9sbGVyOwoKICAgICAgICAgIHJlc29sdmUoY29ubmVjdGlvbkNvbnRyb2xsZXIpOwogICAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBcbicpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBIeXBlcnR5Q29ubmVjdG9yOwp9KF9FdmVudEVtaXR0ZXIzLmRlZmF1bHQpOwoKZnVuY3Rpb24gYWN0aXZhdGUoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKSB7CgogIHJldHVybiB7CiAgICBuYW1lOiAnSHlwZXJ0eUNvbm5lY3RvcicsCiAgICBpbnN0YW5jZTogbmV3IEh5cGVydHlDb25uZWN0b3IoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKQogIH07Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvRXZlbnRFbWl0dGVyIjoxMCwiLi4vdXRpbHMvdXRpbHMiOjExLCIuL0Nvbm5lY3Rpb25Db250cm9sbGVyIjo2LCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0Rpc2NvdmVyeSI6MSwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9IeXBlcnR5RGlzY292ZXJ5IjoyLCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0lkZW50aXR5TWFuYWdlciI6Mywic2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyIjo0fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICcnTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKLy8gZGF0YU9iamVjdFJlcG9ydGVyLmRhdGEgPSB7Ci8vICAgIHN0YXR1cyA6ICJjb25uZWN0ZWQiLAovLyAgICBvd25lciA6ICJoeXBlcnR5Oi8vZXhhbXBsZS5jb20vYWxpY2VoeSIsCi8vICAgIHBlZXIgOiAiY29ubmVjdGlvbjovL2V4YW1wbGUuY29tL2FsaWNlL2JvYjI3MDEyMDE2IiwKLy8gICAgb3duZXJQZWVyIDogewovLyAgICAgICAgICBjb25uZWN0aW9uRGVzY3JpcHRpb246IHsKLy8gICAgICAgICAgICAgc2RwOiAnczRkZmFmMXNhM2YxYXNkNWY0c2RhZmEnLAovLyAgICAgICAgICAgICB0eXBlOiAnb2ZmZXInCi8vICAgICAgICAgIH0sCi8vICAgICAgICAgIGljZUNhbmRpZGF0ZXM6IFt7Ci8vICAgICAgICAgICAgICB0eXBlOiAnY2FuZGlkYXRlJywKLy8gICAgICAgICAgICAgIGNhbmRpZGF0ZTogZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSwKLy8gICAgICAgICAgICAgIHNkcE1pZDogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCwKLy8gICAgICAgICAgICAgIHNkcE1MaW5lSW5kZXg6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4Ci8vICAgICAgICAgICAgfSwKLy8gICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICB0eXBlOiAnY2FuZGlkYXRlJywKLy8gICAgICAgICAgICAgIGNhbmRpZGF0ZTogZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSwKLy8gICAgICAgICAgICAgIHNkcE1pZDogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCwKLy8gICAgICAgICAgICAgIHNkcE1MaW5lSW5kZXg6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4Ci8vICAgICAgICAgICAgfSwKLy8gICAgICAgICAgICAuLi4uLgovLyAgICAgICAgXQovLyAgICAgIH0KLy8gIH0KCnZhciBjb25uZWN0aW9uID0gewogIG5hbWU6ICcnLAogIHN0YXR1czogJycsCiAgb3duZXI6ICcnLAogIHBlZXI6ICcnLAogIG93bmVyUGVlcjogewogICAgY29ubmVjdGlvbkRlc2NyaXB0aW9uOiB7fSwKICAgIGljZUNhbmRpZGF0ZXM6IFtdCiAgfQp9OwoKZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdGlvbjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCnZhciBwZWVyID0gewogIG5hbWU6ICcnLAogIGNvbm5lY3Rpb25EZXNjcmlwdGlvbjoge30sCiAgaWNlQ2FuZGlkYXRlczogW10KfTsKCmV4cG9ydHMuZGVmYXVsdCA9IHBlZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKICogRXZlbnRFbWl0dGVyCiAqIEFsbCBjbGFzc2VzIHdoaWNoIGV4dGVuZHMgdGhpcywgY2FuIGhhdmUgYWRkRXZlbnRMaXN0ZW5lciBhbmQgdHJpZ2dlciBldmVudHM7CiAqLwoKdmFyIEV2ZW50RW1pdHRlciA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRFbWl0dGVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhFdmVudEVtaXR0ZXIsIFt7CiAgICBrZXk6ICJhZGRFdmVudExpc3RlbmVyIiwKCgogICAgLyoqCiAgICAgKiBhZGRFdmVudExpc3RlbmVyIGxpc3RlbiBmb3IgYW4gZXZlbnRUeXBlCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgZXZlbnRUeXBlIC0gbGlzdGVuaW5nIGZvciB0aGlzIHR5cGUgb2YgZXZlbnQKICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgICBjYiAgICAgICAgLSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGV2ZW50IGl0IGlzIGludm9rZWQKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpc1tldmVudFR5cGVdID0gY2I7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnZva2UgdGhlIGV2ZW50VHlwZQogICAgICogQHBhcmFtICB7c3RyaW5nfSBldmVudFR5cGUgLSBldmVudCB3aWxsIGJlIGludm9rZWQKICAgICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zIC0gcGFyYW1ldGVycyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYWRkRXZlbnRMaXN0ZW5lcgogICAgICovCgogIH0sIHsKICAgIGtleTogInRyaWdnZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnRUeXBlLCBwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpc1tldmVudFR5cGVdKSB7CiAgICAgICAgX3RoaXNbZXZlbnRUeXBlXShwYXJhbXMpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRXZlbnRFbWl0dGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBFdmVudEVtaXR0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGl2aWRlVVJMID0gZGl2aWRlVVJMOwpleHBvcnRzLmRlZXBDbG9uZSA9IGRlZXBDbG9uZTsKZXhwb3J0cy5nZXRDb25maWcgPSBnZXRDb25maWc7CmV4cG9ydHMuZ2V0VXNlck1lZGlhID0gZ2V0VXNlck1lZGlhOwpleHBvcnRzLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTsKZXhwb3J0cy5nZXRUZW1wbGF0ZSA9IGdldFRlbXBsYXRlOwovKioKICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqKi8KCi8vIGpzaGludCBicm93c2VyOnRydWUsIGpxdWVyeTogdHJ1ZQovLyBqc2hpbnQgdmFyc3RtdDogdHJ1ZQovKiBnbG9iYWwgSGFuZGxlYmFycyAqLwoKLyoqCiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWwKICogQG1vZHVsZSB1dGlscwogKi8KCi8qKgogKiBAdHlwZWRlZiBkaXZpZGVVUkwKICogQHR5cGUgT2JqZWN0CiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMCiAqLwoKLyoqCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1cmwgLSB1cmwgYWRkcmVzcwogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAqLwpmdW5jdGlvbiBkaXZpZGVVUkwodXJsKSB7CgogIC8vIGxldCByZSA9IC8oW2EtekEtWi1dKik/OlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIpKihcL1tcL1xkXHdcLi1dKikqKD86W1w/XSkqKC4rKSovZ2k7CiAgdmFyIHJlID0gLyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7CiAgdmFyIHN1YnN0ID0gJyQxLCQyLCQzJzsKICB2YXIgcGFydHMgPSB1cmwucmVwbGFjZShyZSwgc3Vic3QpLnNwbGl0KCcsJyk7CgogIC8vIElmIHRoZSB1cmwgaGFzIG5vIHByb3RvY29sLCB0aGUgZGVmYXVsdCBwcm90b2NvbCBzZXQgaXMgaHR0cHMKICBpZiAocGFydHNbMF0gPT09IHVybCkgewogICAgcGFydHNbMF0gPSAnaHR0cHMnOwogICAgcGFydHNbMV0gPSB1cmw7CiAgfQoKICB2YXIgcmVzdWx0ID0gewogICAgdHlwZTogcGFydHNbMF0sCiAgICBkb21haW46IHBhcnRzWzFdLAogICAgaWRlbnRpdHk6IHBhcnRzWzJdCiAgfTsKCiAgcmV0dXJuIHJlc3VsdDsKfQoKLyoqCiAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQKICogQHJldHVybiB7T2JqZWN0fQogKi8KZnVuY3Rpb24gZGVlcENsb25lKG9iaikgewogIC8vVE9ETzogc2ltcGxlIGJ1dCBpbmVmZmljaWVudCBKU09OIGRlZXAgY2xvbmUuLi4KICBpZiAob2JqKSByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTsKfQoKLyoqCiAqIEdldCB0aGUgY29uZmlndXJhdGlvbiBmcm9tIGFuIGpzb24gZmlsZTsKICogQHBhcmFtICB7SlNPTk9iamVjdH0ganNvbkZpbGUKICogQHJldHVybiB7b2JqZWN0fQogKi8KZnVuY3Rpb24gZ2V0Q29uZmlnKEpTT05PYmplY3QpIHsKICBjb25zb2xlLmxvZygnZGV2ZWxvcCcpOwogIHJldHVybiBKU09OT2JqZWN0WydkZXZlbG9wJ107Cn0KCi8qKgogKiBHZXQgV2ViUlRDIEFQSSByZXNvdXJjZXMKICogQHBhcmFtICB7T2JqZWN0fSAgICAgb3B0aW9ucyBPYmplY3QgY29udGFpbmluZyB0aGUgaW5mb3JtYXRpb24gdGhhdCByZXNvdXJjZXMgd2lsbCBiZSB1c2VkIChjYW1lcmEsIG1pYywgcmVzb2x1dGlvbiwgZXRjKTsKICogQHJldHVybiB7UHJvbWlzZX0KICovCmZ1bmN0aW9uIGdldFVzZXJNZWRpYShjb25zdHJhaW50cykgewoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uIChtZWRpYVN0cmVhbSkgewogICAgICByZXNvbHZlKG1lZGlhU3RyZWFtKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICB9KTsKICB9KTsKfQoKZnVuY3Rpb24gc2VyaWFsaXplKCkgewoKICAkLmZuLnNlcmlhbGl6ZU9iamVjdCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBvID0ge307CiAgICB2YXIgYSA9IHRoaXMuc2VyaWFsaXplQXJyYXkoKTsKICAgICQuZWFjaChhLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChvW3RoaXMubmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmICghb1t0aGlzLm5hbWVdLnB1c2gpIHsKICAgICAgICAgIG9bdGhpcy5uYW1lXSA9IFtvW3RoaXMubmFtZV1dOwogICAgICAgIH0KCiAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSB8fCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb1t0aGlzLm5hbWVdID0gdGhpcy52YWx1ZSB8fCAnJzsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIG87CiAgfTsKCiAgJC5mbi5zZXJpYWxpemVPYmplY3RBcnJheSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBvID0ge307CiAgICB2YXIgYSA9IHRoaXMuc2VyaWFsaXplQXJyYXkoKTsKICAgICQuZWFjaChhLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChvW3RoaXMubmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmICghb1t0aGlzLm5hbWVdLnB1c2gpIHsKICAgICAgICAgIG9bdGhpcy5uYW1lXSA9IFtvW3RoaXMubmFtZV1dOwogICAgICAgIH0KCiAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSB8fCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0pIG9bdGhpcy5uYW1lXSA9IFtdOwogICAgICAgIG9bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWUgfHwgJycpOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbzsKICB9Owp9CgpmdW5jdGlvbiBnZXRUZW1wbGF0ZShwYXRoLCBzY3JpcHQpIHsKCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICBpZiAoSGFuZGxlYmFycy50ZW1wbGF0ZXMgPT09IHVuZGVmaW5lZCB8fCBIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIEhhbmRsZWJhcnMudGVtcGxhdGVzID0ge307CiAgICB9IGVsc2UgewogICAgICByZXNvbHZlKEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdKTsKICAgIH0KCiAgICB2YXIgdGVtcGxhdGVGaWxlID0gJC5hamF4KHsKICAgICAgdXJsOiBwYXRoICsgJy5oYnMnLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHsKICAgICAgICBIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXSA9IEhhbmRsZWJhcnMuY29tcGlsZShkYXRhKTsKICAgICAgfSwKCiAgICAgIGZhaWw6IGZ1bmN0aW9uIGZhaWwocmVhc29uKSB7CiAgICAgICAgcmV0dXJuIHJlYXNvbjsKICAgICAgfQogICAgfSk7CgogICAgdmFyIHNjcmlwdEZpbGUgPSAkLmdldFNjcmlwdChzY3JpcHQpOwoKICAgIHZhciByZXF1ZXN0cyA9IFtdOwogICAgaWYgKHBhdGgpIHJlcXVlc3RzLnB1c2godGVtcGxhdGVGaWxlKTsKICAgIGlmIChzY3JpcHQpIHJlcXVlc3RzLnB1c2goc2NyaXB0RmlsZSk7CgogICAgUHJvbWlzZS5hbGwocmVxdWVzdHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICByZXNvbHZlKEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICB9KTsKICB9KTsKfQoKfSx7fV19LHt9LFs3XSkoNykKfSk7",
      "sourceCodeClassname": "HypertyConnector",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10001,
    "hypertyType": [
      "audio",
      "video"
    ],
    "version": "0.1",
    "description": "Description of HypertyConnector",
    "objectName": "HypertyConnector",
    "configuration": {
      "webrtc": {
        "iceServers": [
          {
            "url": "stun:stun.l.google.com:19302"
          },
          {
            "url": "turn:194.65.138.95:3478",
            "credential": "luis123",
            "username": "luis"
          }
        ]
      }
    },
    "constraints": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "HelloWorldObserver": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBTeW5jaGVyLmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MjQgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuU3luY2hlcj1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYSl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmYylyZXR1cm4gYyhzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciB1PW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyB1LmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLHV9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sbCxsLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmUmJiFBcnJheS5vYnNlcnZlJiZmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1lLmdldE5vdGlmaWVyLG49InBlcmZvcm1DaGFuZ2UiLG89Il9vcmlnaW5hbCIsaT0ic3BsaWNlIixzPXtwdXNoOmZ1bmN0aW9uIGMoZSl7dmFyIHQ9YXJndW1lbnRzLHM9Y1tvXS5hcHBseSh0aGlzLHQpO3JldHVybiByKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6cy10Lmxlbmd0aCxhZGRlZENvdW50OnQubGVuZ3RoLHJlbW92ZWQ6W119fSksc30sdW5zaGlmdDpmdW5jdGlvbiB1KGUpe3ZhciB0PWFyZ3VtZW50cyxzPXVbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHBvcDpmdW5jdGlvbiBsKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1sW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnRoaXMubGVuZ3RoLGFkZGVkQ291bnQ6MCxyZW1vdmVkOlt0XX19LHRoaXMpLHR9LHNoaWZ0OmZ1bmN0aW9uIGYoKXt2YXIgZT10aGlzLmxlbmd0aCx0PWZbb10uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5sZW5ndGghPT1lJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6MCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzcGxpY2U6ZnVuY3Rpb24gZChlLHQpe3ZhciBzPWFyZ3VtZW50cyxhPWRbb10uYXBwbHkodGhpcyxzKTtyZXR1cm4oYS5sZW5ndGh8fHMubGVuZ3RoPjIpJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6ZSxhZGRlZENvdW50OnMubGVuZ3RoLTIscmVtb3ZlZDphfX0sdGhpcyksYX19O2Zvcih2YXIgYSBpbiBzKXNbYV1bb109dC5wcm90b3R5cGVbYV0sdC5wcm90b3R5cGVbYV09c1thXTt0Lm9ic2VydmU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5vYnNlcnZlKHQscixbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsaV0pfSx0LnVub2JzZXJ2ZT1lLnVub2JzZXJ2ZX0oT2JqZWN0LEFycmF5KX0se31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiOjE3fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjE4fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjE5fV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjIwfV0sNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjF9XSw3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjoyMn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjIzfV0sOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjI0fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCI6MjV9XSwxMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo0fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBvPSEwO287KXt2YXIgaT1lLHM9dCxhPXI7bz0hMSxudWxsPT09aSYmKGk9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgYz1uKGkscyk7aWYodm9pZCAwIT09Yyl7aWYoInZhbHVlImluIGMpcmV0dXJuIGMudmFsdWU7dmFyIHU9Yy5nZXQ7aWYodm9pZCAwPT09dSlyZXR1cm47cmV0dXJuIHUuY2FsbChhKX12YXIgbD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaSk7aWYobnVsbD09PWwpcmV0dXJuO2U9bCx0PXMscj1hLG89ITAsYz1sPXZvaWQgMH19LHIuX19lc01vZHVsZT0hMH0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NX1dLDE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9bih0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKG8/byhlLHQpOmUuX19wcm90b19fPXQpfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6OH1dLDE1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2hlbHBlcnMvdHlwZW9mIiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxpWyJkZWZhdWx0Il0pKHQpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fX0seyIuLi9oZWxwZXJzL3R5cGVvZiI6MTZ9XSwxNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuY29uc3RydWN0b3I9PT1uPyJzeW1ib2wiOnR5cGVvZiBlfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCI6MTB9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMX1dLDE4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY3JlYXRlKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwxOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwyMDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXREZXNjKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjgxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjo4Mn1dLDIyOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo4M31dLDIzOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiI6ODR9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo4NiwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo4NywiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo4OX1dLDI1OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIiksZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLlN5bWJvbH0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiOjg4fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwyNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0Ijo0OX1dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MzAsIi4vJC53a3MiOjc4fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2fV0sMzM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjM4fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRLZXlzKGUpLHI9bi5nZXRTeW1ib2xzO2lmKHIpZm9yKHZhciBvLGk9cihlKSxzPW4uaXNFbnVtLGE9MDtpLmxlbmd0aD5hOylzLmNhbGwoZSxvPWlbYSsrXSkmJnQucHVzaChvKTtyZXR1cm4gdH19LHsiLi8kIjo1Nn1dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLHUsbCxmPWUmYS5GLGQ9ZSZhLkcscD1lJmEuUyxiPWUmYS5QLGg9ZSZhLkIseT1lJmEuVyx2PWQ/bzpvW3RdfHwob1t0XT17fSksXz1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGMgaW4gcil1PSFmJiZfJiZjIGluIF8sdSYmYyBpbiB2fHwobD11P19bY106cltjXSx2W2NdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBfW2NdP3JbY106aCYmdT9pKGwsbik6eSYmX1tjXT09bD9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShsKTpiJiYiZnVuY3Rpb24iPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxiJiYoKHZbc118fCh2W3NdPXt9KSlbY109bCkpfTthLkY9MSxhLkc9MixhLlM9NCxhLlA9OCxhLkI9MTYsYS5XPTMyLHQuZXhwb3J0cz1hfSx7Ii4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5nbG9iYWwiOjQxfV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYT1lKCIuLyQudG8tbGVuZ3RoIiksYz1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgbCxmLGQscD1jKGUpLGI9bihyLHUsdD8yOjEpLGg9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihsPWEoZS5sZW5ndGgpO2w+aDtoKyspdD9iKHMoZj1lW2hdKVswXSxmWzFdKTpiKGVbaF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEoZj1kLm5leHQoKSkuZG9uZTspbyhkLGIsZi52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtYXJyYXktaXRlciI6NDcsIi4vJC5pdGVyLWNhbGwiOjUwLCIuLyQudG8tbGVuZ3RoIjo3NSwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjc5fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpLG89ZSgiLi8kIikuZ2V0TmFtZXMsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBvKGUpfWNhdGNoKHQpe3JldHVybiBzLnNsaWNlKCl9fTt0LmV4cG9ydHMuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6NTYsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MX1dLDQ0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjozMH1dLDQ3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0seyIuLyQuY29mIjozMH1dLDQ5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6Mjh9XSw1MTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6NTYsIi4vJC5oaWRlIjo0MywiLi8kLnByb3BlcnR5LWRlc2MiOjYxLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYT1lKCIuLyQuaGFzIiksYz1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxsPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGY9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSxiPSJAQGl0ZXJhdG9yIixoPSJrZXlzIix5PSJ2YWx1ZXMiLHY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLF8sZyxtLGope3Uocix0LF8pO3ZhciAkLHcsTz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBFKXJldHVybiBFW2VdO3N3aXRjaChlKXtjYXNlIGg6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIseD1nPT15LEM9ITEsRT1lLnByb3RvdHlwZSxTPUVbZF18fEVbYl18fGcmJkVbZ10sVD1TfHxPKGcpO2lmKFMpe3ZhciBSPWYoVC5jYWxsKG5ldyBlKSk7bChSLGssITApLCFuJiZhKEUsYikmJnMoUixkLHYpLHgmJlMubmFtZSE9PXkmJihDPSEwLFQ9ZnVuY3Rpb24oKXtyZXR1cm4gUy5jYWxsKHRoaXMpfSl9aWYobiYmIWp8fCFwJiYhQyYmRVtkXXx8cyhFLGQsVCksY1t0XT1ULGNba109dixnKWlmKCQ9e3ZhbHVlczp4P1Q6Tyh5KSxrZXlzOm0/VDpPKGgpLGVudHJpZXM6eD9PKCJlbnRyaWVzIik6VH0sailmb3IodyBpbiAkKXcgaW4gRXx8aShFLHcsJFt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fEMpLHQsJCk7cmV0dXJuICR9fSx7Ii4vJCI6NTYsIi4vJC5leHBvcnQiOjM3LCIuLyQuaGFzIjo0MiwiLi8kLmhpZGUiOjQzLCIuLyQuaXRlci1jcmVhdGUiOjUxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLmxpYnJhcnkiOjU4LCIuLyQucmVkZWZpbmUiOjYzLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYSl7fXJldHVybiByfX0seyIuLyQud2tzIjo3OH1dLDU0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDU1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSw1NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaT1vKGUpLHM9bi5nZXRLZXlzKGkpLGE9cy5sZW5ndGgsYz0wO2E+YzspaWYoaVtyPXNbYysrXV09PT10KXJldHVybiByfX0seyIuLyQiOjU2LCIuLyQudG8taW9iamVjdCI6NzR9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLnRhc2siKS5zZXQsYz1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxsPXMuUHJvbWlzZSxmPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGYmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihmKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGMpe3ZhciBwPTEsYj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGMoZCkub2JzZXJ2ZShiLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe2IuZGF0YT1wPS1wfX1lbHNlIGk9bCYmbC5yZXNvbHZlP2Z1bmN0aW9uKCl7bC5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXthLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpmJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjozMCwiLi8kLmdsb2JhbCI6NDEsIi4vJC50YXNrIjo3Mn1dLDYwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjozMSwiLi8kLmV4cG9ydCI6MzcsIi4vJC5mYWlscyI6Mzh9XSw2MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjYzfV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6NDN9XSw2NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw2NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDY2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjo1NiwiLi8kLmNvcmUiOjMxLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQud2tzIjo3OH1dLDY3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjo1NiwiLi8kLmhhcyI6NDIsIi4vJC53a3MiOjc4fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6NDF9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQud2tzIjo3OH1dLDcwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDcxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYT1TdHJpbmcobyh0KSksYz1uKHIpLHU9YS5sZW5ndGg7cmV0dXJuIDA+Y3x8Yz49dT9lPyIiOnZvaWQgMDooaT1hLmNoYXJDb2RlQXQoYyksNTUyOTY+aXx8aT41NjMxOXx8YysxPT09dXx8KHM9YS5jaGFyQ29kZUF0KGMrMSkpPDU2MzIwfHxzPjU3MzQzP2U/YS5jaGFyQXQoYyk6aTplP2Euc2xpY2UoYyxjKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLnRvLWludGVnZXIiOjczfV0sNzI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYT1lKCIuLyQuaW52b2tlIiksYz1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxsPWUoIi4vJC5nbG9iYWwiKSxmPWwucHJvY2VzcyxkPWwuc2V0SW1tZWRpYXRlLHA9bC5jbGVhckltbWVkaWF0ZSxiPWwuTWVzc2FnZUNoYW5uZWwsaD0wLHk9e30sdj0ib25yZWFkeXN0YXRlY2hhbmdlIixfPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxnPWZ1bmN0aW9uKGUpe18uY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrK2hdPWZ1bmN0aW9uKCl7YSgiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKGgpLGh9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGYpP249ZnVuY3Rpb24oZSl7Zi5uZXh0VGljayhzKF8sZSwxKSl9OmI/KG89bmV3IGIsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcsbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6bC5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFsLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7bC5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZywhMSkpOm49diBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXtjLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVt2XT1mdW5jdGlvbigpe2MucmVtb3ZlQ2hpbGQodGhpcyksXy5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKF8sZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MzAsIi4vJC5jdHgiOjMyLCIuLyQuZG9tLWNyZWF0ZSI6MzUsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaHRtbCI6NDQsIi4vJC5pbnZva2UiOjQ1fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLmlvYmplY3QiOjQ2fV0sNzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo3M31dLDc2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjMzfV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjo0MSwiLi8kLnNoYXJlZCI6NjgsIi4vJC51aWQiOjc3fV0sNzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDgwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MjcsIi4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5pdGVyLXN0ZXAiOjU0LCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLnRvLWlvYmplY3QiOjc0fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIGUobih0KSxyKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDgzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImtleXMiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZShuKHQpKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1vYmplY3QiOjc2fV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vJC5zZXQtcHJvdG8iKS5zZXR9KX0seyIuLyQuZXhwb3J0IjozNywiLi8kLnNldC1wcm90byI6NjV9XSw4NTpbZnVuY3Rpb24oZSx0LHIpe30se31dLDg2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLmN0eCIpLGM9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxsPWUoIi4vJC5pcy1vYmplY3QiKSxmPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLGI9ZSgiLi8kLmZvci1vZiIpLGg9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksdj1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxfPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksZz1lKCIuLyQubWljcm90YXNrIiksbT0iUHJvbWlzZSIsaj1zLnByb2Nlc3MsJD0icHJvY2VzcyI9PWMoaiksdz1zW21dLE89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gaChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmTygpLGgodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLHg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sQz1mdW5jdGlvbihlKXt2YXIgdD1mKGUpW3ZdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxFPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBsKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFM9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sVD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFI9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO2coZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxhPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGE9dC5yZXNvbHZlLGM9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2MoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPUUocikpP2kuY2FsbChyLGEsYyk6YShyKSk6YyhuKX1jYXRjaCh1KXtjKHUpfX07ci5sZW5ndGg+aTspYShyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO00obykmJigkP2ouZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxNPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFNKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFIodCwhMCkpfSxOPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PUUoZSkpP2coZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxhKE4sbiwxKSxhKEQsbiwxKSl9Y2F0Y2gobyl7RC5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFIociwhMSkpfWNhdGNoKG4pe0QuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxtKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYShOLHQsMSksYShELHQsMSkpfWNhdGNoKHIpe0QuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFMoXyh0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlIobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxtKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShtKSxuPWUoIi4vJC5jb3JlIilbbV0sdSh1LlMrdS5GKiFrLG0se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxPKCEwKSksbSx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmeChlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLG0se2FsbDpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGE9VChmdW5jdGlvbigpe2IoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYT1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxhW29dPWUsLS1yfHxuKGEpKX0saSl9KTpuKGEpfSk7cmV0dXJuIGEmJmkoYS5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PUModGhpcykscj1uZXcgUyh0KSxuPXIucmVqZWN0LG89VChmdW5jdGlvbigpe2IoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjU2LCIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY2xhc3NvZiI6MjksIi4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5leHBvcnQiOjM3LCIuLyQuZm9yLW9mIjozOSwiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5LCIuLyQuaXRlci1kZXRlY3QiOjUzLCIuLyQubGlicmFyeSI6NTgsIi4vJC5taWNyb3Rhc2siOjU5LCIuLyQucmVkZWZpbmUtYWxsIjo2MiwiLi8kLnNhbWUtdmFsdWUiOjY0LCIuLyQuc2V0LXByb3RvIjo2NSwiLi8kLnNldC1zcGVjaWVzIjo2NiwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjY5LCIuLyQuc3RyaWN0LW5ldyI6NzAsIi4vJC53a3MiOjc4fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5zdHJpbmctYXQiOjcxfV0sODg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQuZ2xvYmFsIiksaT1lKCIuLyQuaGFzIikscz1lKCIuLyQuZGVzY3JpcHRvcnMiKSxhPWUoIi4vJC5leHBvcnQiKSxjPWUoIi4vJC5yZWRlZmluZSIpLHU9ZSgiLi8kLmZhaWxzIiksbD1lKCIuLyQuc2hhcmVkIiksZj1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxkPWUoIi4vJC51aWQiKSxwPWUoIi4vJC53a3MiKSxiPWUoIi4vJC5rZXlvZiIpLGg9ZSgiLi8kLmdldC1uYW1lcyIpLHk9ZSgiLi8kLmVudW0ta2V5cyIpLHY9ZSgiLi8kLmlzLWFycmF5IiksXz1lKCIuLyQuYW4tb2JqZWN0IiksZz1lKCIuLyQudG8taW9iamVjdCIpLG09ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxqPW4uZ2V0RGVzYywkPW4uc2V0RGVzYyx3PW4uY3JlYXRlLE89aC5nZXQsaz1vLlN5bWJvbCx4PW8uSlNPTixDPXgmJnguc3RyaW5naWZ5LEU9ITEsUz1wKCJfaGlkZGVuIiksVD1uLmlzRW51bSxSPWwoInN5bWJvbC1yZWdpc3RyeSIpLE09bCgic3ltYm9scyIpLEQ9ImZ1bmN0aW9uIj09dHlwZW9mIGssTj1PYmplY3QucHJvdG90eXBlLFA9cyYmdShmdW5jdGlvbigpe3JldHVybiA3IT13KCQoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49aihOLHQpO24mJmRlbGV0ZSBOW3RdLCQoZSx0LHIpLG4mJmUhPT1OJiYkKE4sdCxuKX06JCxBPWZ1bmN0aW9uKGUpe3ZhciB0PU1bZV09dyhrLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSxzJiZFJiZQKE4sZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtpKHRoaXMsUykmJmkodGhpc1tTXSxlKSYmKHRoaXNbU11bZV09ITEpLFAodGhpcyxlLG0oMSx0KSl9fSksdH0sTD1mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9LEY9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByJiZpKE0sdCk/KHIuZW51bWVyYWJsZT8oaShlLFMpJiZlW1NdW3RdJiYoZVtTXVt0XT0hMSkscj13KHIse2VudW1lcmFibGU6bSgwLCExKX0pKTooaShlLFMpfHwkKGUsUyxtKDEse30pKSxlW1NdW3RdPSEwKSxQKGUsdCxyKSk6JChlLHQscil9LEk9ZnVuY3Rpb24oZSx0KXtfKGUpO2Zvcih2YXIgcixuPXkodD1nKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KUYoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sVj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3coZSk6SSh3KGUpLHQpfSxVPWZ1bmN0aW9uKGUpe3ZhciB0PVQuY2FsbCh0aGlzLGUpO3JldHVybiB0fHwhaSh0aGlzLGUpfHwhaShNLGUpfHxpKHRoaXMsUykmJnRoaXNbU11bZV0/dDohMH0sej1mdW5jdGlvbihlLHQpe3ZhciByPWooZT1nKGUpLHQpO3JldHVybiFyfHwhaShNLHQpfHxpKGUsUykmJmVbU11bdF18fChyLmVudW1lcmFibGU9ITApLHJ9LEg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pfHx0PT1TfHxuLnB1c2godCk7cmV0dXJuIG59LEI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pJiZuLnB1c2goTVt0XSk7cmV0dXJuIG59LEo9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIUwoZSkpe2Zvcih2YXIgdCxyLG49W2VdLG89MSxpPWFyZ3VtZW50cztpLmxlbmd0aD5vOyluLnB1c2goaVtvKytdKTtyZXR1cm4gdD1uWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10KSwhciYmdih0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksTCh0KT92b2lkIDA6dH0pLG5bMV09dCxDLmFwcGx5KHgsbil9fSxXPXUoZnVuY3Rpb24oKXt2YXIgZT1rKCk7cmV0dXJuIltudWxsXSIhPUMoW2VdKXx8Int9IiE9Qyh7YTplfSl8fCJ7fSIhPUMoT2JqZWN0KGUpKX0pO0R8fChrPWZ1bmN0aW9uKCl7aWYoTCh0aGlzKSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3JldHVybiBBKGQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApKX0sYyhrLnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxMPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Yga30sbi5jcmVhdGU9VixuLmlzRW51bT1VLG4uZ2V0RGVzYz16LG4uc2V0RGVzYz1GLG4uc2V0RGVzY3M9SSxuLmdldE5hbWVzPWguZ2V0PUgsbi5nZXRTeW1ib2xzPUIscyYmIWUoIi4vJC5saWJyYXJ5IikmJmMoTiwicHJvcGVydHlJc0VudW1lcmFibGUiLFUsITApKTt2YXIgWT17ImZvciI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoUixlKz0iIik/UltlXTpSW2VdPWsoZSl9LGtleUZvcjpmdW5jdGlvbihlKXtyZXR1cm4gYihSLGUpfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtFPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtFPSExfX07bi5lYWNoLmNhbGwoImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGZ1bmN0aW9uKGUpe3ZhciB0PXAoZSk7WVtlXT1EP3Q6QSh0KX0pLEU9ITAsYShhLkcrYS5XLHtTeW1ib2w6a30pLGEoYS5TLCJTeW1ib2wiLFkpLGEoYS5TK2EuRiohRCwiT2JqZWN0Iix7Y3JlYXRlOlYsZGVmaW5lUHJvcGVydHk6RixkZWZpbmVQcm9wZXJ0aWVzOkksZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOnosZ2V0T3duUHJvcGVydHlOYW1lczpILGdldE93blByb3BlcnR5U3ltYm9sczpCfSkseCYmYShhLlMrYS5GKighRHx8VyksIkpTT04iLHtzdHJpbmdpZnk6Sn0pLGYoaywiU3ltYm9sIiksZihNYXRoLCJNYXRoIiwhMCksZihvLkpTT04sIkpTT04iLCEwKX0seyIuLyQiOjU2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLmVudW0ta2V5cyI6MzYsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4LCIuLyQuZ2V0LW5hbWVzIjo0MCwiLi8kLmdsb2JhbCI6NDEsIi4vJC5oYXMiOjQyLCIuLyQuaXMtYXJyYXkiOjQ4LCIuLyQua2V5b2YiOjU3LCIuLyQubGlicmFyeSI6NTgsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNoYXJlZCI6NjgsIi4vJC50by1pb2JqZWN0Ijo3NCwiLi8kLnVpZCI6NzcsIi4vJC53a3MiOjc4fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjgwfV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXt3aW5kb3cuTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5nPVtdLHRoaXMuaz1lfWZ1bmN0aW9uIHIoZSl7IWZ1bmN0aW9uIHIoKXt2YXIgbj1lLnRha2VSZWNvcmRzKCk7bi5sZW5ndGgmJmUuayhuLGUpLGUuZj1zZXRUaW1lb3V0KHIsdC5fcGVyaW9kKX0oKX1mdW5jdGlvbiBuKHQpe3ZhciByLG49e3R5cGU6bnVsbCx0YXJnZXQ6bnVsbCxhZGRlZE5vZGVzOltdLHJlbW92ZWROb2RlczpbXSxwcmV2aW91c1NpYmxpbmc6bnVsbCxuZXh0U2libGluZzpudWxsLGF0dHJpYnV0ZU5hbWU6bnVsbCxhdHRyaWJ1dGVOYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpudWxsfTtmb3IociBpbiB0KW5bcl0hPT1lJiZ0W3JdIT09ZSYmKG5bcl09dFtyXSk7cmV0dXJuIG59ZnVuY3Rpb24gbyhlLHQpe3ZhciByPWEoZSx0KTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIG8sYz1uLmxlbmd0aDt0LmEmJnIuYSYmaShuLGUsci5hLHQuZCksKHQuYnx8dC5lKSYmKG89cyhuLGUscix0KSksKG98fG4ubGVuZ3RoIT09YykmJihyPWEoZSx0KSl9fWZ1bmN0aW9uIGkodCxyLG8saSl7Zm9yKHZhciBzLGEsYz17fSx1PXIuYXR0cmlidXRlcyxsPXUubGVuZ3RoO2wtLTspcz11W2xdLGE9cy5uYW1lLGkmJmlbYV09PT1lfHwocy52YWx1ZSE9PW9bYV0mJnQucHVzaChuKHt0eXBlOiJhdHRyaWJ1dGVzIix0YXJnZXQ6cixhdHRyaWJ1dGVOYW1lOmEsb2xkVmFsdWU6b1thXSxhdHRyaWJ1dGVOYW1lc3BhY2U6cy5uYW1lc3BhY2VVUkl9KSksY1thXT0hMCk7Zm9yKGEgaW4gbyljW2FdfHx0LnB1c2gobih7dGFyZ2V0OnIsdHlwZToiYXR0cmlidXRlcyIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV19KSl9ZnVuY3Rpb24gcyh0LHIsbyxzKXtmdW5jdGlvbiBhKGUscixvLGEsYyl7dmFyIGw9ZS5sZW5ndGgtMTtjPS1+KChsLWMpLzIpO2Zvcih2YXIgZixkLHA7cD1lLnBvcCgpOylmPW9bcC5oXSxkPWFbcC5pXSxzLmImJmMmJk1hdGguYWJzKHAuaC1wLmkpPj1sJiYodC5wdXNoKG4oe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0OnIsYWRkZWROb2RlczpbZl0scmVtb3ZlZE5vZGVzOltmXSxuZXh0U2libGluZzpmLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpmLnByZXZpb3VzU2libGluZ30pKSxjLS0pLHMuYSYmZC5hJiZpKHQsZixkLmEscy5kKSxzLmMmJjM9PT1mLm5vZGVUeXBlJiZmLm5vZGVWYWx1ZSE9PWQuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpmfSkpLHMuZSYmdShmLGQpfWZ1bmN0aW9uIHUocixvKXtmb3IodmFyIGQscCxiLGgseSx2PXIuY2hpbGROb2RlcyxfPW8uYixnPXYubGVuZ3RoLG09Xz9fLmxlbmd0aDowLGo9MCwkPTAsdz0wO2c+JHx8bT53OyloPXZbJF0seT0oYj1fW3ddKSYmYi5qLGg9PT15PyhzLmEmJmIuYSYmaSh0LGgsYi5hLHMuZCkscy5jJiZiLmMhPT1lJiZoLm5vZGVWYWx1ZSE9PWIuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpofSkpLHAmJmEocCxyLHYsXyxqKSxzLmUmJihoLmNoaWxkTm9kZXMubGVuZ3RofHxiLmImJmIuYi5sZW5ndGgpJiZ1KGgsYiksJCsrLHcrKyk6KGw9ITAsZHx8KGQ9e30scD1bXSksaCYmKGRbYj1jKGgpXXx8KGRbYl09ITAsLTE9PT0oYj1mKF8saCx3LCJqIikpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2hdLG5leHRTaWJsaW5nOmgubmV4dFNpYmxpbmcscHJldmlvdXNTaWJsaW5nOmgucHJldmlvdXNTaWJsaW5nfSkpLGorKyk6cC5wdXNoKHtoOiQsaTpifSkpLCQrKykseSYmeSE9PXZbJF0mJihkW2I9Yyh5KV18fChkW2JdPSEwLC0xPT09KGI9Zih2LHksJCkpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpvLmoscmVtb3ZlZE5vZGVzOlt5XSxuZXh0U2libGluZzpfW3crMV0scHJldmlvdXNTaWJsaW5nOl9bdy0xXX0pKSxqLS0pOnAucHVzaCh7aDpiLGk6d30pKSx3KyspKTtwJiZhKHAscix2LF8sail9dmFyIGw7cmV0dXJuIHUocixvKSxsfWZ1bmN0aW9uIGEoZSx0KXt2YXIgcj0hMDtyZXR1cm4gZnVuY3Rpb24gbihlKXt2YXIgbz17ajplfTtyZXR1cm4hdC5jfHwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGU/KHQuYSYmciYmMT09PWUubm9kZVR5cGUmJihvLmE9bChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5kJiYhdC5kW3IubmFtZV18fChlW3IubmFtZV09ci52YWx1ZSksZX0pKSxyJiYodC5ifHx0LmN8fHQuYSYmdC5lKSYmKG8uYj11KGUuY2hpbGROb2RlcyxuKSkscj10LmUpOm8uYz1lLm5vZGVWYWx1ZSxvfShlKX1mdW5jdGlvbiBjKGUpe3RyeXtyZXR1cm4gZS5pZHx8KGUubW9faWQ9ZS5tb19pZHx8ZCsrKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGUubm9kZVZhbHVlfWNhdGNoKHIpe3JldHVybiBkKyt9fX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciByPVtdLG49MDtuPGUubGVuZ3RoO24rKylyW25dPXQoZVtuXSxuLGUpO3JldHVybiByfWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIHI9e30sbj0wO248ZS5sZW5ndGg7bisrKXI9dChyLGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBmKGUsdCxyLG4pe2Zvcig7cjxlLmxlbmd0aDtyKyspaWYoKG4/ZVtyXVtuXTplW3JdKT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9dC5fcGVyaW9kPTMwLHQucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXthOiEhKHQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXJ8fHQuYXR0cmlidXRlT2xkVmFsdWUpLGI6ISF0LmNoaWxkTGlzdCxlOiEhdC5zdWJ0cmVlLGM6ISghdC5jaGFyYWN0ZXJEYXRhJiYhdC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpfSxpPXRoaXMuZyxzPTA7czxpLmxlbmd0aDtzKyspaVtzXS5tPT09ZSYmaS5zcGxpY2UocywxKTt0LmF0dHJpYnV0ZUZpbHRlciYmKG4uZD1sKHQuYXR0cmlidXRlRmlsdGVyLGZ1bmN0aW9uKGUsdCl7CnJldHVybiBlW3RdPSEwLGV9KSksaS5wdXNoKHttOmUsbDpvKGUsbil9KSx0aGlzLmZ8fHIodGhpcyl9LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5nLHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdLmwoZSk7cmV0dXJuIGV9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmc9W10sY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGx9fTt2YXIgZD0xO3JldHVybiB0fSh2b2lkIDApfSx7fV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXtPYmplY3Qub2JzZXJ2ZXx8ZnVuY3Rpb24oZSx0LHIsbil7InVzZSBzdHJpY3QiO3ZhciBvLGkscz1bImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInJlY29uZmlndXJlIiwic2V0UHJvdG90eXBlIiwicHJldmVudEV4dGVuc2lvbnMiXSxhPXQuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1lLmNhbGwodCl9fShlLnByb3RvdHlwZS50b1N0cmluZyksYz10LnByb3RvdHlwZS5pbmRleE9mP3QuaW5kZXhPZnx8ZnVuY3Rpb24oZSxyLG4pe3JldHVybiB0LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxyLG4pfTpmdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPXJ8fDA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LHU9ci5NYXAhPT1uJiZNYXAucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE1hcH06ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PVtdO3JldHVybntzaXplOjAsaGFzOmZ1bmN0aW9uKHQpe3JldHVybiBjKGUsdCk+LTF9LGdldDpmdW5jdGlvbihyKXtyZXR1cm4gdFtjKGUscildfSxzZXQ6ZnVuY3Rpb24ocixuKXt2YXIgbz1jKGUscik7LTE9PT1vPyhlLnB1c2gociksdC5wdXNoKG4pLHRoaXMuc2l6ZSsrKTp0W29dPW59LCJkZWxldGUiOmZ1bmN0aW9uKHIpe3ZhciBuPWMoZSxyKTtuPi0xJiYoZS5zcGxpY2UobiwxKSx0LnNwbGljZShuLDEpLHRoaXMuc2l6ZS0tKX0sZm9yRWFjaDpmdW5jdGlvbihyKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylyLmNhbGwoYXJndW1lbnRzWzFdLHRbbl0sZVtuXSx0aGlzKX19fSxsPWUuZ2V0T3duUHJvcGVydHlOYW1lcz9mdW5jdGlvbigpe3ZhciB0PWUuZ2V0T3duUHJvcGVydHlOYW1lczt0cnl7YXJndW1lbnRzLmNhbGxlZX1jYXRjaChyKXt2YXIgbj0odChjKS5qb2luKCIgIikrIiAiKS5yZXBsYWNlKC9wcm90b3R5cGUgfGxlbmd0aCB8bmFtZSAvZywiIikuc2xpY2UoMCwtMSkuc3BsaXQoIiAiKTtuLmxlbmd0aCYmKHQ9ZnVuY3Rpb24odCl7dmFyIHI9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KWZvcih2YXIgbyxpPTA7aTxuLmxlbmd0aDspKG89YyhyLG5baSsrXSkpPi0xJiZyLnNwbGljZShvLDEpO3JldHVybiByfSl9cmV0dXJuIHR9KCk6ZnVuY3Rpb24odCl7dmFyIHIsbixvPVtdO2lmKCJoYXNPd25Qcm9wZXJ0eSJpbiB0KWZvcihyIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmby5wdXNoKHIpO2Vsc2V7bj1lLmhhc093blByb3BlcnR5O2ZvcihyIGluIHQpbi5jYWxsKHQscikmJm8ucHVzaChyKX1yZXR1cm4gYSh0KSYmby5wdXNoKCJsZW5ndGgiKSxvfSxmPWUuZ2V0UHJvdG90eXBlT2YsZD1lLmRlZmluZVByb3BlcnRpZXMmJmUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHA9ci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbigpe3ZhciBlPStuZXcgRGF0ZSx0PWU7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cigodD0rbmV3IERhdGUpLWUpfSwxNyl9fSgpLGI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW8uZ2V0KGUpO24/KHkobixlKSxtKGUsbix0LHIpKToobj1oKGUpLG0oZSxuLHQsciksMT09PW8uc2l6ZSYmcCh2KSl9LGg9ZnVuY3Rpb24odCxyKXt2YXIgbixpPWwodCkscz1bXSxhPTAscj17aGFuZGxlcnM6dSgpLGZyb3plbjplLmlzRnJvemVuP2UuaXNGcm96ZW4odCk6ITEsZXh0ZW5zaWJsZTplLmlzRXh0ZW5zaWJsZT9lLmlzRXh0ZW5zaWJsZSh0KTohMCxwcm90bzpmJiZmKHQpLHByb3BlcnRpZXM6aSx2YWx1ZXM6cyxub3RpZmllcjpnKHQscil9O2lmKGQpZm9yKG49ci5kZXNjcmlwdG9ycz1bXTthPGkubGVuZ3RoOyluW2FdPWQodCxpW2FdKSxzW2FdPXRbaVthKytdXTtlbHNlIGZvcig7YTxpLmxlbmd0aDspc1thXT10W2lbYSsrXV07cmV0dXJuIG8uc2V0KHQscikscn0seT1mdW5jdGlvbigpe3ZhciB0PWQ/ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaT10LnByb3BlcnRpZXNbcl0scz1lW2ldLGE9dC52YWx1ZXNbcl0sYz10LmRlc2NyaXB0b3JzW3JdOyJ2YWx1ZSJpbiBvJiYoYT09PXM/MD09PWEmJjEvYSE9PTEvczphPT09YXx8cz09PXMpJiYoaihlLHQse25hbWU6aSx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOmF9LG4pLHQudmFsdWVzW3JdPXMpLCFjLmNvbmZpZ3VyYWJsZXx8by5jb25maWd1cmFibGUmJm8ud3JpdGFibGU9PT1jLndyaXRhYmxlJiZvLmVudW1lcmFibGU9PT1jLmVudW1lcmFibGUmJm8uZ2V0PT09Yy5nZXQmJm8uc2V0PT09Yy5zZXR8fChqKGUsdCx7bmFtZTppLHR5cGU6InJlY29uZmlndXJlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LmRlc2NyaXB0b3JzW3JdPW8pfTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10LnByb3BlcnRpZXNbcl0saT1lW29dLHM9dC52YWx1ZXNbcl07KHM9PT1pPzA9PT1zJiYxL3MhPT0xL2k6cz09PXN8fGk9PT1pKSYmKGooZSx0LHtuYW1lOm8sdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpzfSxuKSx0LnZhbHVlc1tyXT1pKX0scj1kP2Z1bmN0aW9uKGUscixuLG8saSl7Zm9yKHZhciBzLGE9ci5sZW5ndGg7biYmYS0tOyludWxsIT09clthXSYmKHM9ZChlLHJbYV0pLG4tLSxzP3QoZSxvLGEsaSxzKTooaihlLG8se25hbWU6clthXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm8udmFsdWVzW2FdfSxpKSxvLnByb3BlcnRpZXMuc3BsaWNlKGEsMSksby52YWx1ZXMuc3BsaWNlKGEsMSksby5kZXNjcmlwdG9ycy5zcGxpY2UoYSwxKSkpfTpmdW5jdGlvbihlLHQscixuLG8pe2Zvcih2YXIgaT10Lmxlbmd0aDtyJiZpLS07KW51bGwhPT10W2ldJiYoaihlLG4se25hbWU6dFtpXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm4udmFsdWVzW2ldfSxvKSxuLnByb3BlcnRpZXMuc3BsaWNlKGksMSksbi52YWx1ZXMuc3BsaWNlKGksMSksci0tKX07cmV0dXJuIGZ1bmN0aW9uKG4sbyxpKXtpZihuLmhhbmRsZXJzLnNpemUmJiFuLmZyb3plbil7dmFyIHMsYSx1LHAsYixoLHksdixfPW4udmFsdWVzLGc9bi5kZXNjcmlwdG9ycyxtPTA7aWYobi5leHRlbnNpYmxlKWlmKHM9bi5wcm9wZXJ0aWVzLnNsaWNlKCksYT1zLmxlbmd0aCx1PWwobyksZyl7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSx2PWQobyxiKSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKG9bYl0pLGcucHVzaCh2KSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpLHYpKTtyKG8scyxhLG4saSksZS5pc0V4dGVuc2libGUobyl8fChuLmV4dGVuc2libGU9ITEsaihvLG4se3R5cGU6InByZXZlbnRFeHRlbnNpb25zIixvYmplY3Q6b30saSksbi5mcm96ZW49ZS5pc0Zyb3plbihvKSl9ZWxzZXtmb3IoO208dS5sZW5ndGg7KWI9dVttKytdLHA9YyhzLGIpLGg9b1tiXSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKGgpKTooc1twXT1udWxsLGEtLSx0KG8sbixwLGkpKTtyKG8scyxhLG4saSl9ZWxzZSBpZighbi5mcm96ZW4pe2Zvcig7bTxzLmxlbmd0aDttKyspYj1zW21dLHQobyxuLG0saSxkKG8sYikpO2UuaXNGcm96ZW4obykmJihuLmZyb3plbj0hMCl9ZiYmKHk9ZihvKSx5IT09bi5wcm90byYmKGoobyxuLHt0eXBlOiJzZXRQcm90b3R5cGUiLG5hbWU6Il9fcHJvdG9fXyIsb2JqZWN0Om8sb2xkVmFsdWU6bi5wcm90b30pLG4ucHJvdG89eSkpfX19KCksdj1mdW5jdGlvbigpe28uc2l6ZSYmKG8uZm9yRWFjaCh5KSxpLmZvckVhY2goXykscCh2KSl9LF89ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmNoYW5nZVJlY29yZHM7ci5sZW5ndGgmJihlLmNoYW5nZVJlY29yZHM9W10sdChyKSl9LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyJiYodD1vLmdldChlKSksdCYmdC5ub3RpZmllcnx8e25vdGlmeTpmdW5jdGlvbih0KXt0LnR5cGU7dmFyIHI9by5nZXQoZSk7aWYocil7dmFyIG4saT17b2JqZWN0OmV9O2ZvcihuIGluIHQpIm9iamVjdCIhPT1uJiYoaVtuXT10W25dKTtqKGUscixpKX19LHBlcmZvcm1DaGFuZ2U6ZnVuY3Rpb24odCxyKXtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBub24tc3RyaW5nIGNoYW5nZVR5cGUiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgcGVyZm9ybSBub24tZnVuY3Rpb24iKTt2YXIgaSxzLGE9by5nZXQoZSksYz1hcmd1bWVudHNbMl0sdT1jPT09bj9yKCk6ci5jYWxsKGMpO2lmKGEmJnkoYSxlLHQpLGEmJnUmJiJvYmplY3QiPT10eXBlb2YgdSl7cz17b2JqZWN0OmUsdHlwZTp0fTtmb3IoaSBpbiB1KSJvYmplY3QiIT09aSYmInR5cGUiIT09aSYmKHNbaV09dVtpXSk7aihlLGEscyl9fX19LG09ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89aS5nZXQocik7b3x8aS5zZXQocixvPXtvYnNlcnZlZDp1KCksY2hhbmdlUmVjb3JkczpbXX0pLG8ub2JzZXJ2ZWQuc2V0KGUse2FjY2VwdExpc3Q6bi5zbGljZSgpLGRhdGE6dH0pLHQuaGFuZGxlcnMuc2V0KHIsbyl9LGo9ZnVuY3Rpb24oZSx0LHIsbil7dC5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXQub2JzZXJ2ZWQuZ2V0KGUpLmFjY2VwdExpc3Q7KCJzdHJpbmciIT10eXBlb2Ygbnx8LTE9PT1jKG8sbikpJiZjKG8sci50eXBlKT4tMSYmdC5jaGFuZ2VSZWNvcmRzLnB1c2gocil9KX07bz11KCksaT11KCksZS5vYnNlcnZlPWZ1bmN0aW9uKHQscixvKXtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3Qgb2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7aWYoZS5pc0Zyb3plbiYmZS5pc0Zyb3plbihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBhIGZyb3plbiBmdW5jdGlvbiBvYmplY3QiKTtpZihvPT09bilvPXM7ZWxzZSBpZighb3x8Im9iamVjdCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoaXJkIGFyZ3VtZW50IHRvIE9iamVjdC5vYnNlcnZlIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncy4iKTtyZXR1cm4gYih0LHIsbyksdH0sZS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCB1bm9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHIsbj1pLmdldCh0KTtyZXR1cm4gbiYmKHI9bi5vYnNlcnZlZC5nZXQoZSkpJiYobi5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxwKGZ1bmN0aW9uKCl7XyhuLHQpfSksMT09PW4ub2JzZXJ2ZWQuc2l6ZSYmbi5vYnNlcnZlZC5oYXMoZSk/aVsiZGVsZXRlIl0odCk6bi5vYnNlcnZlZFsiZGVsZXRlIl0oZSksMT09PXIuZGF0YS5oYW5kbGVycy5zaXplP29bImRlbGV0ZSJdKGUpOnIuZGF0YS5oYW5kbGVyc1siZGVsZXRlIl0odCkpLGV9LGUuZ2V0Tm90aWZpZXI9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmdldE5vdGlmaWVyIGNhbm5vdCBnZXROb3RpZmllciBub24tb2JqZWN0Iik7cmV0dXJuIGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4odCk/bnVsbDpnKHQpfSxlLmRlbGl2ZXJDaGFuZ2VSZWNvcmRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgdD1pLmdldChlKTt0JiYodC5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxfKHQsZSkpfX0oT2JqZWN0LEFycmF5LHRoaXMpfSx7fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5EYXRhT2JqZWN0T2JzZXJ2ZXI9ci5EYXRhT2JqZWN0UmVwb3J0ZXI9ci5TeW5jaGVyPXZvaWQgMCxlKCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iKSxlKCJvYmplY3Qub2JzZXJ2ZSIpLGUoImFycmF5Lm9ic2VydmUiKTt2YXIgbz1lKCIuL3N5bmNoZXIvU3luY2hlciIpLGk9bihvKSxzPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxhPW4ocyksYz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIiksdT1uKGMpO3IuU3luY2hlcj1pWyJkZWZhdWx0Il0sci5EYXRhT2JqZWN0UmVwb3J0ZXI9YVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdE9ic2VydmVyPXVbImRlZmF1bHQiXX0seyIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjo5NSwiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vc3luY2hlci9TeW5jaGVyIjo5OSwiYXJyYXkub2JzZXJ2ZSI6MSwibXV0YXRpb25vYnNlcnZlci1zaGltIjo5MCwib2JqZWN0Lm9ic2VydmUiOjkxfV0sOTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCIuL1N5bmNPYmplY3QiKSxwPW4oZCksYj1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGg9bihiKSx5PWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxpLHMpeygwLHVbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgYT10aGlzO2EuX3N5bmNoZXI9dCxhLl91cmw9cixhLl9zY2hlbWE9bixhLl9zdGF0dXM9byxhLl9zeW5jT2JqPW5ldyBwWyJkZWZhdWx0Il0oaSksYS5fY2hpbGRyZW5zPXMsYS5fdmVyc2lvbj0wLGEuX2NoaWxkSWQ9MCxhLl9jaGlsZHJlbk9iamVjdHM9e30sYS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYS5fb3duZXI9dC5fb3duZXIsYS5fYnVzPXQuX2J1c31yZXR1cm4oMCxmWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXQuX3VybCsiL2NoaWxkcmVuLyI7dC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz1yK24saT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihyKXtpZihyLmZyb20hPT1lLl9vd25lcilzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uQ2hpbGRDcmVhdGUocik7YnJlYWs7Y2FzZSJkZWxldGUiOmNvbnNvbGUubG9nKHIpO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4ocil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSwoMCxhWyJkZWZhdWx0Il0pKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGlsZHJlbk9iamVjdHNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicGF1c2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InJlc3VtZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToic3RvcCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToiYWRkQ2hpbGQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyLl9jaGlsZElkKys7dmFyIG49ci5fb3duZXIrIiMiK3IuX2NoaWxkSWQsbz1yLl91cmwrIi9jaGlsZHJlbi8iK2Uscz17dHlwZToiY3JlYXRlIixmcm9tOnIuX293bmVyLHRvOm8sYm9keTp7cmVzb3VyY2U6bix2YWx1ZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSl7dmFyIGk9ci5fYnVzLnBvc3RNZXNzYWdlKHMpO2NvbnNvbGUubG9nKCJjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICIrci5fb3duZXIrIiApOiAiLHMpO3ZhciBhPW5ldyBoWyJkZWZhdWx0Il0ocixuLHQsci5fb3duZXIsaSk7YS5vbkNoYW5nZShmdW5jdGlvbihlKXtyLl9vbkNoYW5nZShlLHtwYXRoOm8sY2hpbGRJZDpufSl9KSxyLl9jaGlsZHJlbk9iamVjdHNbbl09YSxlKGEpfSl9fSx7a2V5OiJvbkFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleToiX29uQ2hpbGRDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2U7Y29uc29sZS5sb2coImNyZWF0ZS1vYnNlcnZlci1jaGlsZCggIit0Ll9vd25lcisiICk6ICIsZSk7dmFyIG49bmV3IGhbImRlZmF1bHQiXSh0LHIsZS5ib2R5LnZhbHVlKTt0Ll9jaGlsZHJlbk9iamVjdHNbcl09bixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNvdXJjZTp0Ll9vd25lcn19KX0pO3ZhciBvPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTplLmJvZHkudmFsdWUsY2hpbGRJZDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX07dC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJihjb25zb2xlLmxvZygiQURELUNISUxEUkVOLUVWRU5UOiAiLG8pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pKX19LHtrZXk6Il9vbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rKywib24iPT09ci5fc3RhdHVzKXt2YXIgbj17dHlwZToidXBkYXRlIixmcm9tOnIuX3VybCx0bzpyLl91cmwrIi9jaGFuZ2VzIixib2R5Ont2ZXJzaW9uOnIuX3ZlcnNpb24sc291cmNlOnIuX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PWQuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PWQuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1kLkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAseS5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT1kLk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBjPWkub2JqLHU9aS5sYXN0O2Muc3BsaWNlKHUsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCIuL0RhdGFPYmplY3RDaGlsZCI6OTQsIi4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1lKCIuL1N5bmNPYmplY3QiKSx1PW4oYyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxzKXsoMCxpWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9wYXJlbnQ9dCxhLl9jaGlsZElkPXIsYS5fb3duZXI9byxhLl9tc2dJZD1zLGEuX3N5bmNPYmo9bmV3IHVbImRlZmF1bHQiXShuKSxhLl9idXM9dC5fYnVzLGEuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0Ijo5OCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4vRGF0YU9iamVjdENoaWxkIiksaj1uKG0pLCQ9e0FOWToiYW55IixTVEFSVDoic3RhcnQiLEVYQUNUOiJleGFjdCJ9LHc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLHMsYyxsKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGY9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8scy5kYXRhLGMpKSxkPWY7cmV0dXJuIGQuX3ZlcnNpb249bCxkLl9maWx0ZXJzPXt9LGQuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtkLl9vbkZpbHRlcihlKX0pLCgwLGlbImRlZmF1bHQiXSkocy5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cy5jaGlsZHJlbnNbZV07ZC5fY2hpbGRyZW5PYmplY3RzW2VdPW5ldyBqWyJkZWZhdWx0Il0oZCxlLHQpfSksZC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxmfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsKyIvY2hhbmdlcyIsZnVuY3Rpb24odCl7InVwZGF0ZSI9PT10LnR5cGUmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTokLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9JC5BTlk6KG4udHlwZT0kLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fZmlsdGVyc1tyXTtuLnR5cGU9PT0kLkFOWT9uLmNhbGxiYWNrKGUpOm4udHlwZT09PSQuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihyKSYmbi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLkVYQUNUJiZlLmZpZWxkPT09ciYmbi5jYWxsYmFjayhlKX0pfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT13LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0Ijo5MywiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjoxNX1dLDk2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksaj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGM9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8saSxzKSksbD1jO3JldHVybiBsLl9zdWJzY3JpcHRpb25zPXt9LGwuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrcisiLVNFTkQ6ICIsZSksbC5fb25DaGFuZ2UoZSl9KSxsLl9hbGxvY2F0ZUxpc3RlbmVycygpLGN9cmV0dXJuKDAsdlsiZGVmYXVsdCJdKSh0LGUpLCgwLGZbImRlZmF1bHQiXSkodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LSIrZS5fdXJsKyItUkNWOiAiLHQpLHQudHlwZSl7Y2FzZSJyZXNwb25zZSI6ZS5fb25SZXNwb25zZSh0KTticmVhaztjYXNlInJlYWQiOmUuX29uUmVhZCh0KX19KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJpbnZpdGVPYnNlcnZlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToiY3JlYXRlIixmcm9tOnQuX3N5bmNoZXIuX293bmVyLHRvOnQuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTp0Ll91cmwsc2NoZW1hOnQuX3NjaGVtYSx2YWx1ZTp0Ll9zeW5jT2JqLmRhdGEsYXV0aG9yaXNlOmV9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJvblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVhZEhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2NlcHQ6ZnVuY3Rpb24oKXt2YXIgbj17dXJsOnIsc3RhdHVzOiJvbiJ9O3QuX3N1YnNjcmlwdGlvbnNbcl09bjt2YXIgbz17fTtyZXR1cm4oMCxpWyJkZWZhdWx0Il0pKHQuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10Ll9jaGlsZHJlbk9iamVjdHNbZV0uZGF0YTtvW2VdPSgwLG0uZGVlcENsb25lKShyKX0pLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzY2hlbWE6dC5fc2NoZW1hLHZlcnNpb246dC5fdmVyc2lvbix2YWx1ZTp7ZGF0YTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKSxjaGlsZHJlbnM6b319fSksbn0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOnJ9fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiU1VCU0NSSVBUSU9OLUVWRU5UOiAiLG4pLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihuKSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5mcm9tLG49dC5fc3Vic2NyaXB0aW9uc1tyXTtkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXTt2YXIgbz17dHlwZTplLmJvZHkudHlwZSx1cmw6cixvYmplY3Q6bn07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlVOLVNVQlNDUklQVElPTi1FVkVOVDogIixvKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobykpfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKGNvbnNvbGUubG9nKCJSRVNQT05TRS1FVkVOVDogIixyKSx0Ll9vblJlc3BvbnNlSGFuZGxlcihyKSl9fSx7a2V5OiJfb25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sYWNjZXB0OmZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOigwLG0uZGVlcENsb25lKSh0LmRhdGEpfX0pfSxyZWplY3Q6ZnVuY3Rpb24ocil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAxLGRlc2M6cn19KX19O3QuX29uUmVhZEhhbmRsZXImJihjb25zb2xlLmxvZygiUkVBRC1FVkVOVDogIixyKSx0Ll9vblJlYWRIYW5kbGVyKHIpKX19LHtrZXk6InN1YnNjcmlwdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1qLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Ijo5MywiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBzPXRoaXM7cy5fb3duZXI9dCxzLl91cmw9cixzLl9idXM9bixzLl9jaGlsZHJlbj1vLHMuX2NoYW5nZXM9W10scy5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4oMCxhWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7clsiZGVmYXVsdCJdPWMsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5PYmplY3RUeXBlPXIuQ2hhbmdlVHlwZT12b2lkIDA7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksdT1uKGMpLGw9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIHI9dGhpcztyLl9vYnNlcnZlcnM9W10sci5fZmlsdGVycz17fSx0P3IuX2RhdGE9KDAsbC5kZWVwQ2xvbmUpKHQpOnIuX2RhdGE9e30sci5faW50ZXJuYWxPYnNlcnZlKG5ldyBkLHIuX2RhdGEpfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToib2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSl9fSx7a2V5OiJmaW5kIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIuIik7cmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQodCl9fSx7a2V5OiJmaW5kQmVmb3JlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxyPWUuc3BsaXQoIi4iKTtyZXR1cm4gdC5sYXN0PXIucG9wKCksdC5vYmo9dGhpcy5fZmluZFdpdGhTcGxpdChyKSx0fX0se2tleToiX2ZpbmRXaXRoU3BsaXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt0PXRbZV19KSx0fX0se2tleToiX2ZpcmVFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfX0se2tleToiX2lzT2JzZXJ2YWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1PYmplY3R8fGUuY29uc3RydWN0b3I9PT1BcnJheX19LHtrZXk6Il9pbnRlcm5hbE9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBuPWZ1bmN0aW9uKHQpe3IuX29uQ2hhbmdlcyhlLHQpfTtpZih0LmNvbnN0cnVjdG9yPT09T2JqZWN0KXtPYmplY3Qub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgbyBpbiB0KXIuX2lzT2JzZXJ2YWJsZSh0W29dKSYmci5faW50ZXJuYWxPYnNlcnZlKGVbIm5ldyJdKG8pLHRbb10pfWVsc2UgaWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5KXtBcnJheS5vYnNlcnZlKHQsbik7Zm9yKHZhciBpIGluIHQpaWYoci5faXNPYnNlcnZhYmxlKHRbaV0pKXt2YXIgcz1lWyJuZXciXShuZXcgcCh0W2ldLGkpKTtyLl9pbnRlcm5hbE9ic2VydmUocyx0W2ldKX19fX19LHtrZXk6Il9vbkNoYW5nZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztmb3IodmFyIG4gaW4gdCl7dmFyIG89dFtuXS5vYmplY3QsaT12b2lkIDA7aWYoby5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmKGk9aC5PQkpFQ1QpLG8uY29uc3RydWN0b3I9PT1BcnJheSYmKGk9aC5BUlJBWSksInNwbGljZSI9PT10W25dLnR5cGUpIWZ1bmN0aW9uKCl7dmFyIHM9dFtuXS5pbmRleCxhPWVbIm5ldyJdKCIiK3MpLGM9YS50b1N0cmluZygpLHU9dFtuXS5yZW1vdmVkLmxlbmd0aDtpZigwIT09dSl7dmFyIGY9dFtuXS5yZW1vdmVkO2YuZm9yRWFjaChmdW5jdGlvbih0LG4pe3IuX2lzT2JzZXJ2YWJsZSh0KSYmZS5yZW1vdmVJbmRleChzK24pfSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmMsZGF0YTp1fSl9dmFyIGQ9dFtuXS5hZGRlZENvdW50O2lmKDAhPT1kKXt2YXIgaD1vLnNsaWNlKHMscytkKTtoLmZvckVhY2goZnVuY3Rpb24odCxuKXtpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBvPWVbIm5ldyJdKG5ldyBwKHQscytuKSk7ci5faW50ZXJuYWxPYnNlcnZlKG8sdCl9fSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLkFERCxvVHlwZTppLGZpZWxkOmMsZGF0YTooMCxsLmRlZXBDbG9uZSkoaCl9KX1zIT09by5sZW5ndGgtMSYmZS5yZUluZGV4RnJvbShvKX0oKTtlbHNle3ZhciBzPWVbIm5ldyJdKHRbbl0ubmFtZSksYT1zLnRvU3RyaW5nKCk7aWYoLTEhPT1hLmluZGV4T2YoIlN5bWJvbCIpKWNvbnRpbnVlO3ZhciBjPW9bdFtuXS5uYW1lXTsidXBkYXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlVQREFURSxvVHlwZTppLGZpZWxkOmEsZGF0YTooMCxsLmRlZXBDbG9uZSkoYyl9KSwiYWRkIj09PXRbbl0udHlwZSYmKHRoaXMuX2ludGVybmFsT2JzZXJ2ZShzLGMpLHRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSkpLCJkZWxldGUiPT09dFtuXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuUkVNT1ZFLG9UeXBlOmksZmllbGQ6YX0pfX19fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksZX0oKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLl9wYXRoPVtdLHRoaXMuX29ic2VydmFibGVzPXt9fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToicmVtb3ZlSW5kZXgiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9vYnNlcnZhYmxlc1tlXX19LHtrZXk6InJlSW5kZXhGcm9tIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOygwLGlbImRlZmF1bHQiXSkodGhpcy5fb2JzZXJ2YWJsZXMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fb2JzZXJ2YWJsZXNbcl0sbz1lLmluZGV4T2Yobi5vYmopO24uaWR4IT1vJiYobi5pZHg9byxkZWxldGUgdC5fb2JzZXJ2YWJsZXNbcl0sdC5fb2JzZXJ2YWJsZXNbb109bil9KX19LHtrZXk6Im5ldyIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5jb25zdHJ1Y3Rvcj09cCYmKHRoaXMuX29ic2VydmFibGVzW2UuaWR4XT1lKTt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIHQuX3BhdGgucHVzaChlKSx0fX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9wYXRoLnB1c2goZSl9KSx0fX0se2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbih0LHIpezA9PT1yP2U9dC50b1N0cmluZygpOmUrPSIuIit0LnRvU3RyaW5nKCl9KSxlfX1dKSxlfSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpLHRoaXMub2JqPXQsdGhpcy5pZHg9cn1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGI9ci5DaGFuZ2VUeXBlPXtVUERBVEU6InVwZGF0ZSIsQUREOiJhZGQiLFJFTU9WRToicmVtb3ZlIn0saD1yLk9iamVjdFR5cGU9e09CSkVDVDoib2JqZWN0IixBUlJBWToiYXJyYXkifTtyWyJkZWZhdWx0Il09Zn0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5OTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4vRGF0YU9iamVjdFJlcG9ydGVyIiksZj1uKGwpLGQ9ZSgiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxwPW4oZCksYj1lKCIuL0RhdGFQcm92aXNpb25hbCIpLGg9bihiKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBvPXRoaXM7by5fb3duZXI9dCxvLl9idXM9cixvLl9zdWJVUkw9bi5ydW50aW1lVVJMKyIvc20iLG8uX3JlcG9ydGVycz17fSxvLl9vYnNlcnZlcnM9e30sby5fcHJvdmlzaW9uYWxzPXt9LHIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtpZihlLmZyb20hPT10KXN3aXRjaChjb25zb2xlLmxvZygiU3luY2hlci1SQ1Y6ICIsZSksZS50eXBlKXtjYXNlImZvcndhcmQiOm8uX29uRm9yd2FyZChlKTticmVhaztjYXNlImNyZWF0ZSI6by5fb25SZW1vdGVDcmVhdGUoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOm8uX29uUmVtb3RlRGVsZXRlKGUpfX0pfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiY3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyLnJlcG9ydGVyPW4uX293bmVyLHIuc2NoZW1hPWU7dmFyIG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6cixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKHQsaSl7bi5fYnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24obyl7aWYoY29uc29sZS5sb2coImNyZWF0ZS1yZXNwb25zZTogIixvKSwyMDA9PT1vLmJvZHkuY29kZSl7dmFyIHM9by5ib2R5LnJlc291cmNlLGE9bmV3IGZbImRlZmF1bHQiXShuLHMsZSwib24iLHIsby5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTtuLl9yZXBvcnRlcnNbc109YSx0KGEpfWVsc2UgaShvLmJvZHkuZGVzYyl9KX0pfX0se2tleToic3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX293bmVyLHRvOnIuX3N1YlVSTCxib2R5OntzY2hlbWE6ZSxyZXNvdXJjZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24obyxpKXtyLl9idXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihuKXtjb25zb2xlLmxvZygic3Vic2NyaWJlLXJlc3BvbnNlOiAiLG4pO3ZhciBzPXIuX3Byb3Zpc2lvbmFsc1t0XTtpZihkZWxldGUgci5fcHJvdmlzaW9uYWxzW3RdLHMmJnMuX3JlbGVhc2VMaXN0ZW5lcnMoKSxuLmJvZHkuY29kZTwyMDApcz1uZXcgaFsiZGVmYXVsdCJdKHIuX293bmVyLHQsci5fYnVzLG4uYm9keS5jaGlsZHJlblJlc291cmNlcyksci5fcHJvdmlzaW9uYWxzW3RdPXM7ZWxzZSBpZigyMDA9PT1uLmJvZHkuY29kZSl7dmFyIGE9bmV3IHBbImRlZmF1bHQiXShyLHQsZSwib24iLG4uYm9keS52YWx1ZSxzLmNoaWxkcmVuLG4uYm9keS52ZXJzaW9uKTtyLl9vYnNlcnZlcnNbdF09YSxvKGEpLHMuYXBwbHkoYSl9ZWxzZSBpKG4uYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJyZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InJlYWQiLGZyb206dC5fb3duZXIsdG86ZX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSxuKXt0Ll9idXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbih0KXtjb25zb2xlLmxvZygicmVhZC1yZXNwb25zZTogIix0KSwyMDA9PT10LmJvZHkuY29kZT9lKHQuYm9keS52YWx1ZSk6bih0LmJvZHkuZGVzYyl9KX0pfX0se2tleToib25Ob3RpZmljYXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcj1lfX0se2tleToiX29uRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuX3JlcG9ydGVyc1tlLmJvZHkudG9dO3IuX29uRm9yd2FyZChlKX19LHtrZXk6Il9vblJlbW90ZUNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbS5zbGljZSgwLC0xMyksbj17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixuKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdO2lmKG4pe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBvPTIwMDtyJiYobz1yKSwyMDA9PT1vJiZuWyJkZWxldGUiXSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixvKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobykpfWVsc2UgdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6Im93bmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXJ9fSx7a2V5OiJyZXBvcnRlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXBvcnRlcnN9fSx7a2V5OiJvYnNlcnZlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXksdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjo5NiwiLi9EYXRhUHJvdmlzaW9uYWwiOjk3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDEwMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSl7aWYoIWUpdGhyb3cgRXJyb3IoIlVSTCBpcyBuZWVkZWQgdG8gc3BsaXQiKTt2YXIgdD0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSxyPSIkMSwkMiwkMyIsbj1lLnJlcGxhY2UodCxyKS5zcGxpdCgiLCIpO25bMF09PT1lJiYoblswXT0iaHR0cHMiLG5bMV09ZSk7dmFyIG89e3R5cGU6blswXSxkb21haW46blsxXSxpZGVudGl0eTpuWzJdfTtyZXR1cm4gb31mdW5jdGlvbiBpKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpLHI9e3VzZXJuYW1lOmUuc3Vic3RyaW5nKDAsdCksZG9tYWluOmUuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCl9O3JldHVybiByfWZ1bmN0aW9uIHMoZSl7cmV0dXJuISgoMCxiWyJkZWZhdWx0Il0pKGUpLmxlbmd0aD4wKX1mdW5jdGlvbiBhKGUpe3JldHVybiBlP0pTT04ucGFyc2UoKDAsZFsiZGVmYXVsdCJdKShlKSk6dm9pZCAwfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIik7cmV0dXJuInVzZXI6Ly8iK2Uuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsdCl9ZnVuY3Rpb24gdShlKXt2YXIgdD1vKGUpO3JldHVybiB0LmlkZW50aXR5LnJlcGxhY2UoIi8iLCIiKSsiQCIrdC5kb21haW59ZnVuY3Rpb24gbChlKXtpZigidXNlcjovLyI9PT1lLnN1YnN0cmluZygwLDcpKXt2YXIgdD1vKGUpO2lmKHQuZG9tYWluJiZ0LmlkZW50aXR5KXJldHVybiBlO3Rocm93InVzZXJVUkwgd2l0aCB3cm9uZyBmb3JtYXQifXJldHVybiBjKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgZj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiKSxkPW4oZikscD1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxiPW4ocCk7ci5kaXZpZGVVUkw9byxyLmRpdmlkZUVtYWlsPWksci5lbXB0eU9iamVjdD1zLHIuZGVlcENsb25lPWEsci5nZXRVc2VyVVJMRnJvbUVtYWlsPWMsci5nZXRVc2VyRW1haWxGcm9tVVJMPXUsci5jb252ZXJ0VG9Vc2VyVVJMPWx9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IjoyLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjd9XX0se30sWzkyXSkoOTIpfSk7CgoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IGFjdGl2YXRlOwoKdmFyIF9TeW5jaGVyID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyJyk7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTsKCnZhciBfRXZlbnRFbWl0dGVyMiA9IHJlcXVpcmUoJy4uL3V0aWxzL0V2ZW50RW1pdHRlcicpOwoKdmFyIF9FdmVudEVtaXR0ZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRXZlbnRFbWl0dGVyMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qIGpzaGludCB1bmRlZjogdHJ1ZSAqLwoKLyoqCiogSGVsbG8gV29ybGQgT2JzZXJ2ZXIKKiBAYXV0aG9yIFBhdWxvIENoYWluaG8gW3BhdWxvLWctY2hhaW5ob0B0ZWxlY29tLnB0XQoqIEB2ZXJzaW9uIDAuMS4wCiovCgp2YXIgSGVsbG9Xb3JsZE9ic2VydmVyID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoSGVsbG9Xb3JsZE9ic2VydmVyLCBfRXZlbnRFbWl0dGVyKTsKCiAgLyoqCiAgKiBDcmVhdGUgYSBuZXcgSGVsbG9Xb3JsZE9ic2VydmVyCiAgKiBAcGFyYW0gIHtTeW5jaGVyfSBzeW5jaGVyIC0gU3luY2hlciBwcm92aWRlZCBmcm9tIHRoZSBydW50aW1lIGNvcmUKICAqLwoKICBmdW5jdGlvbiBIZWxsb1dvcmxkT2JzZXJ2ZXIoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVsbG9Xb3JsZE9ic2VydmVyKTsKCiAgICBpZiAoIWh5cGVydHlVUkwpIHRocm93IG5ldyBFcnJvcignVGhlIGh5cGVydHlVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghY29uZmlndXJhdGlvbikgdGhyb3cgbmV3IEVycm9yKCdUaGUgY29uZmlndXJhdGlvbiBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCiAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKEhlbGxvV29ybGRPYnNlcnZlcikuY2FsbCh0aGlzKSk7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShoeXBlcnR5VVJMKS5kb21haW47CiAgICBfdGhpcy5fZG9tYWluID0gZG9tYWluOwoKICAgIF90aGlzLl9vYmplY3REZXNjVVJMID0gJ2h5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLicgKyBkb21haW4gKyAnLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvSGVsbG9Xb3JsZERhdGFTY2hlbWEnOwoKICAgIHZhciBzeW5jaGVyID0gbmV3IF9TeW5jaGVyLlN5bmNoZXIoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKTsKICAgIHN5bmNoZXIub25Ob3RpZmljYXRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIF90aGlzLl9vbk5vdGlmaWNhdGlvbihldmVudCk7CiAgICB9KTsKCiAgICBfdGhpcy5fc3luY2hlciA9IHN5bmNoZXI7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEhlbGxvV29ybGRPYnNlcnZlciwgW3sKICAgIGtleTogJ19vbk5vdGlmaWNhdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTm90aWZpY2F0aW9uKGV2ZW50KSB7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5pbmZvKCdFdmVudCBSZWNlaXZlZDogJywgZXZlbnQpOwoKICAgICAgX3RoaXMudHJpZ2dlcignaW52aXRhdGlvbicsIGV2ZW50LmlkZW50aXR5KTsKCiAgICAgIC8vIEFja25vd2xlZGdlIHJlcG9ydGVyIGFib3V0IHRoZSBJbnZpdGF0aW9uIHdhcyByZWNlaXZlZAogICAgICBldmVudC5hY2soKTsKCiAgICAgIC8vIFN1YnNjcmliZSBIZWxsbyBXb3JsZCBPYmplY3QKICAgICAgX3RoaXMuX3N5bmNoZXIuc3Vic2NyaWJlKF90aGlzLl9vYmplY3REZXNjVVJMLCBldmVudC51cmwpLnRoZW4oZnVuY3Rpb24gKGhlbGxvT2JqdE9ic2VydmVyKSB7CgogICAgICAgIC8vIEhlbGxvIFdvcmxkIE9iamVjdCB3YXMgc3Vic2NyaWJlZAogICAgICAgIGNvbnNvbGUuaW5mbyhoZWxsb09ianRPYnNlcnZlcik7CgogICAgICAgIC8vIGxldHMgbm90aWZ5IHRoZSBBcHAgdGhlIHN1YnNjcmlwdGlvbiB3YXMgYWNjZXB0ZWQgd2l0aCB0aGUgbW5vc3QgdXBkYXRlZCB2ZXJzaW9uIG9mIEhlbGxvIFdvcmxkIE9iamVjdAoKICAgICAgICBfdGhpcy50cmlnZ2VyKCdoZWxsbycsIGhlbGxvT2JqdE9ic2VydmVyLmRhdGEpOwoKICAgICAgICAvLyBsZXRzIG5vdyBvYnNlcnZlIGFueSBjaGFuZ2VzIGRvbmUgaW4gSGVsbG8gV29ybGQgT2JqZWN0CgogICAgICAgIGhlbGxvT2JqdE9ic2VydmVyLm9uQ2hhbmdlKCcqJywgZnVuY3Rpb24gKGV2ZW50KSB7CgogICAgICAgICAgLy8gSGVsbG8gV29ybGQgT2JqZWN0IHdhcyBjaGFuZ2VkCiAgICAgICAgICBjb25zb2xlLmluZm8oJ21lc3NhZ2UgcmVjZWl2ZWQ6JywgZXZlbnQpOwoKICAgICAgICAgIC8vIGxldHMgbm90aWZ5IHRoZSBBcHAgYWJvdXQgdGhlIGNoYW5nZQogICAgICAgICAgX3RoaXMudHJpZ2dlcignaGVsbG8nLCBoZWxsb09ianRPYnNlcnZlci5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSGVsbG9Xb3JsZE9ic2VydmVyOwp9KF9FdmVudEVtaXR0ZXIzLmRlZmF1bHQpOwoKZnVuY3Rpb24gYWN0aXZhdGUoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKSB7CgogIHJldHVybiB7CiAgICBuYW1lOiAnSGVsbG9Xb3JsZE9ic2VydmVyJywKICAgIGluc3RhbmNlOiBuZXcgSGVsbG9Xb3JsZE9ic2VydmVyKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbikKICB9Owp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL0V2ZW50RW1pdHRlciI6MywiLi4vdXRpbHMvdXRpbHMiOjQsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlciI6MX1dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKICogRXZlbnRFbWl0dGVyCiAqIEFsbCBjbGFzc2VzIHdoaWNoIGV4dGVuZHMgdGhpcywgY2FuIGhhdmUgYWRkRXZlbnRMaXN0ZW5lciBhbmQgdHJpZ2dlciBldmVudHM7CiAqLwoKdmFyIEV2ZW50RW1pdHRlciA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRFbWl0dGVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhFdmVudEVtaXR0ZXIsIFt7CiAgICBrZXk6ICJhZGRFdmVudExpc3RlbmVyIiwKCgogICAgLyoqCiAgICAgKiBhZGRFdmVudExpc3RlbmVyIGxpc3RlbiBmb3IgYW4gZXZlbnRUeXBlCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgZXZlbnRUeXBlIC0gbGlzdGVuaW5nIGZvciB0aGlzIHR5cGUgb2YgZXZlbnQKICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgICBjYiAgICAgICAgLSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGV2ZW50IGl0IGlzIGludm9rZWQKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpc1tldmVudFR5cGVdID0gY2I7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnZva2UgdGhlIGV2ZW50VHlwZQogICAgICogQHBhcmFtICB7c3RyaW5nfSBldmVudFR5cGUgLSBldmVudCB3aWxsIGJlIGludm9rZWQKICAgICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zIC0gcGFyYW1ldGVycyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYWRkRXZlbnRMaXN0ZW5lcgogICAgICovCgogIH0sIHsKICAgIGtleTogInRyaWdnZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnRUeXBlLCBwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpc1tldmVudFR5cGVdKSB7CiAgICAgICAgX3RoaXNbZXZlbnRUeXBlXShwYXJhbXMpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRXZlbnRFbWl0dGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBFdmVudEVtaXR0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kaXZpZGVVUkwgPSBkaXZpZGVVUkw7CmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOwpleHBvcnRzLmdldENvbmZpZyA9IGdldENvbmZpZzsKZXhwb3J0cy5nZXRVc2VyTWVkaWEgPSBnZXRVc2VyTWVkaWE7CmV4cG9ydHMuc2VyaWFsaXplID0gc2VyaWFsaXplOwpleHBvcnRzLmdldFRlbXBsYXRlID0gZ2V0VGVtcGxhdGU7Ci8qKgogKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoqLwoKLy8ganNoaW50IGJyb3dzZXI6dHJ1ZSwganF1ZXJ5OiB0cnVlCi8vIGpzaGludCB2YXJzdG10OiB0cnVlCi8qIGdsb2JhbCBIYW5kbGViYXJzICovCgovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwoKLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovCgovKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsKCiAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKICB2YXIgcmUgPSAvKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsKICB2YXIgc3Vic3QgPSAnJDEsJDIsJDMnOwogIHZhciBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTsKCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gcHJvdG9jb2wsIHRoZSBkZWZhdWx0IHByb3RvY29sIHNldCBpcyBodHRwcwogIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7CiAgICBwYXJ0c1swXSA9ICdodHRwcyc7CiAgICBwYXJ0c1sxXSA9IHVybDsKICB9CgogIHZhciByZXN1bHQgPSB7CiAgICB0eXBlOiBwYXJ0c1swXSwKICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICBpZGVudGl0eTogcGFydHNbMl0KICB9OwoKICByZXR1cm4gcmVzdWx0Owp9CgovKioKICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZAogKiBAcmV0dXJuIHtPYmplY3R9CiAqLwpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7CiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOwp9CgovKioKICogR2V0IHRoZSBjb25maWd1cmF0aW9uIGZyb20gYW4ganNvbiBmaWxlOwogKiBAcGFyYW0gIHtKU09OT2JqZWN0fSBqc29uRmlsZQogKiBAcmV0dXJuIHtvYmplY3R9CiAqLwpmdW5jdGlvbiBnZXRDb25maWcoSlNPTk9iamVjdCkgewogIGNvbnNvbGUubG9nKCdkZXZlbG9wJyk7CiAgcmV0dXJuIEpTT05PYmplY3RbJ2RldmVsb3AnXTsKfQoKLyoqCiAqIEdldCBXZWJSVEMgQVBJIHJlc291cmNlcwogKiBAcGFyYW0gIHtPYmplY3R9ICAgICBvcHRpb25zIE9iamVjdCBjb250YWluaW5nIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlc291cmNlcyB3aWxsIGJlIHVzZWQgKGNhbWVyYSwgbWljLCByZXNvbHV0aW9uLCBldGMpOwogKiBAcmV0dXJuIHtQcm9taXNlfQogKi8KZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKSB7CgogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oZnVuY3Rpb24gKG1lZGlhU3RyZWFtKSB7CiAgICAgIHJlc29sdmUobWVkaWFTdHJlYW0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICByZWplY3QocmVhc29uKTsKICAgIH0pOwogIH0pOwp9CgpmdW5jdGlvbiBzZXJpYWxpemUoKSB7CgogICQuZm4uc2VyaWFsaXplT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG8gPSB7fTsKICAgIHZhciBhID0gdGhpcy5zZXJpYWxpemVBcnJheSgpOwogICAgJC5lYWNoKGEsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0ucHVzaCkgewogICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07CiAgICAgICAgfQoKICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlIHx8ICcnOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbzsKICB9OwoKICAkLmZuLnNlcmlhbGl6ZU9iamVjdEFycmF5ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG8gPSB7fTsKICAgIHZhciBhID0gdGhpcy5zZXJpYWxpemVBcnJheSgpOwogICAgJC5lYWNoKGEsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0ucHVzaCkgewogICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07CiAgICAgICAgfQoKICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIW9bdGhpcy5uYW1lXSkgb1t0aGlzLm5hbWVdID0gW107CiAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSB8fCAnJyk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBvOwogIH07Cn0KCmZ1bmN0aW9uIGdldFRlbXBsYXRlKHBhdGgsIHNjcmlwdCkgewoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgIGlmIChIYW5kbGViYXJzLnRlbXBsYXRlcyA9PT0gdW5kZWZpbmVkIHx8IEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgSGFuZGxlYmFycy50ZW1wbGF0ZXMgPSB7fTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pOwogICAgfQoKICAgIHZhciB0ZW1wbGF0ZUZpbGUgPSAkLmFqYXgoewogICAgICB1cmw6IHBhdGggKyAnLmhicycsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkgewogICAgICAgIEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdID0gSGFuZGxlYmFycy5jb21waWxlKGRhdGEpOwogICAgICB9LAoKICAgICAgZmFpbDogZnVuY3Rpb24gZmFpbChyZWFzb24pIHsKICAgICAgICByZXR1cm4gcmVhc29uOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgc2NyaXB0RmlsZSA9ICQuZ2V0U2NyaXB0KHNjcmlwdCk7CgogICAgdmFyIHJlcXVlc3RzID0gW107CiAgICBpZiAocGF0aCkgcmVxdWVzdHMucHVzaCh0ZW1wbGF0ZUZpbGUpOwogICAgaWYgKHNjcmlwdCkgcmVxdWVzdHMucHVzaChzY3JpcHRGaWxlKTsKCiAgICBQcm9taXNlLmFsbChyZXF1ZXN0cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgIHJlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICByZWplY3QocmVhc29uKTsKICAgIH0pOwogIH0pOwp9Cgp9LHt9XX0se30sWzJdKSgyKQp9KTs=",
      "sourceCodeClassname": "HelloWorldObserver",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10002,
    "version": "0.1",
    "description": "Description of HelloWorldObserver",
    "objectName": "HelloWorldObserver",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "hypertyType": [
      "audio",
      "video"
    ]
  },
  "HelloWorldReporter": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBTeW5jaGVyLmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MjQgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuU3luY2hlcj1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYSl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmYylyZXR1cm4gYyhzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciB1PW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyB1LmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLHV9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sbCxsLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmUmJiFBcnJheS5vYnNlcnZlJiZmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1lLmdldE5vdGlmaWVyLG49InBlcmZvcm1DaGFuZ2UiLG89Il9vcmlnaW5hbCIsaT0ic3BsaWNlIixzPXtwdXNoOmZ1bmN0aW9uIGMoZSl7dmFyIHQ9YXJndW1lbnRzLHM9Y1tvXS5hcHBseSh0aGlzLHQpO3JldHVybiByKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6cy10Lmxlbmd0aCxhZGRlZENvdW50OnQubGVuZ3RoLHJlbW92ZWQ6W119fSksc30sdW5zaGlmdDpmdW5jdGlvbiB1KGUpe3ZhciB0PWFyZ3VtZW50cyxzPXVbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHBvcDpmdW5jdGlvbiBsKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1sW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnRoaXMubGVuZ3RoLGFkZGVkQ291bnQ6MCxyZW1vdmVkOlt0XX19LHRoaXMpLHR9LHNoaWZ0OmZ1bmN0aW9uIGYoKXt2YXIgZT10aGlzLmxlbmd0aCx0PWZbb10uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5sZW5ndGghPT1lJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6MCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzcGxpY2U6ZnVuY3Rpb24gZChlLHQpe3ZhciBzPWFyZ3VtZW50cyxhPWRbb10uYXBwbHkodGhpcyxzKTtyZXR1cm4oYS5sZW5ndGh8fHMubGVuZ3RoPjIpJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6ZSxhZGRlZENvdW50OnMubGVuZ3RoLTIscmVtb3ZlZDphfX0sdGhpcyksYX19O2Zvcih2YXIgYSBpbiBzKXNbYV1bb109dC5wcm90b3R5cGVbYV0sdC5wcm90b3R5cGVbYV09c1thXTt0Lm9ic2VydmU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5vYnNlcnZlKHQscixbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsaV0pfSx0LnVub2JzZXJ2ZT1lLnVub2JzZXJ2ZX0oT2JqZWN0LEFycmF5KX0se31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiOjE3fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjE4fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjE5fV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjIwfV0sNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjF9XSw3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjoyMn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjIzfV0sOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjI0fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCI6MjV9XSwxMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo0fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBvPSEwO287KXt2YXIgaT1lLHM9dCxhPXI7bz0hMSxudWxsPT09aSYmKGk9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgYz1uKGkscyk7aWYodm9pZCAwIT09Yyl7aWYoInZhbHVlImluIGMpcmV0dXJuIGMudmFsdWU7dmFyIHU9Yy5nZXQ7aWYodm9pZCAwPT09dSlyZXR1cm47cmV0dXJuIHUuY2FsbChhKX12YXIgbD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaSk7aWYobnVsbD09PWwpcmV0dXJuO2U9bCx0PXMscj1hLG89ITAsYz1sPXZvaWQgMH19LHIuX19lc01vZHVsZT0hMH0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NX1dLDE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9bih0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKG8/byhlLHQpOmUuX19wcm90b19fPXQpfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6OH1dLDE1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2hlbHBlcnMvdHlwZW9mIiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxpWyJkZWZhdWx0Il0pKHQpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fX0seyIuLi9oZWxwZXJzL3R5cGVvZiI6MTZ9XSwxNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuY29uc3RydWN0b3I9PT1uPyJzeW1ib2wiOnR5cGVvZiBlfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCI6MTB9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMX1dLDE4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY3JlYXRlKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwxOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwyMDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXREZXNjKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjgxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjo4Mn1dLDIyOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo4M31dLDIzOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiI6ODR9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo4NiwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo4NywiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo4OX1dLDI1OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIiksZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLlN5bWJvbH0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiOjg4fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwyNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0Ijo0OX1dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MzAsIi4vJC53a3MiOjc4fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2fV0sMzM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjM4fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRLZXlzKGUpLHI9bi5nZXRTeW1ib2xzO2lmKHIpZm9yKHZhciBvLGk9cihlKSxzPW4uaXNFbnVtLGE9MDtpLmxlbmd0aD5hOylzLmNhbGwoZSxvPWlbYSsrXSkmJnQucHVzaChvKTtyZXR1cm4gdH19LHsiLi8kIjo1Nn1dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLHUsbCxmPWUmYS5GLGQ9ZSZhLkcscD1lJmEuUyxiPWUmYS5QLGg9ZSZhLkIseT1lJmEuVyx2PWQ/bzpvW3RdfHwob1t0XT17fSksXz1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGMgaW4gcil1PSFmJiZfJiZjIGluIF8sdSYmYyBpbiB2fHwobD11P19bY106cltjXSx2W2NdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBfW2NdP3JbY106aCYmdT9pKGwsbik6eSYmX1tjXT09bD9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShsKTpiJiYiZnVuY3Rpb24iPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxiJiYoKHZbc118fCh2W3NdPXt9KSlbY109bCkpfTthLkY9MSxhLkc9MixhLlM9NCxhLlA9OCxhLkI9MTYsYS5XPTMyLHQuZXhwb3J0cz1hfSx7Ii4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5nbG9iYWwiOjQxfV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYT1lKCIuLyQudG8tbGVuZ3RoIiksYz1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgbCxmLGQscD1jKGUpLGI9bihyLHUsdD8yOjEpLGg9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihsPWEoZS5sZW5ndGgpO2w+aDtoKyspdD9iKHMoZj1lW2hdKVswXSxmWzFdKTpiKGVbaF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEoZj1kLm5leHQoKSkuZG9uZTspbyhkLGIsZi52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtYXJyYXktaXRlciI6NDcsIi4vJC5pdGVyLWNhbGwiOjUwLCIuLyQudG8tbGVuZ3RoIjo3NSwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjc5fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpLG89ZSgiLi8kIikuZ2V0TmFtZXMsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBvKGUpfWNhdGNoKHQpe3JldHVybiBzLnNsaWNlKCl9fTt0LmV4cG9ydHMuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6NTYsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MX1dLDQ0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjozMH1dLDQ3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0seyIuLyQuY29mIjozMH1dLDQ5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6Mjh9XSw1MTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6NTYsIi4vJC5oaWRlIjo0MywiLi8kLnByb3BlcnR5LWRlc2MiOjYxLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYT1lKCIuLyQuaGFzIiksYz1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxsPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGY9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSxiPSJAQGl0ZXJhdG9yIixoPSJrZXlzIix5PSJ2YWx1ZXMiLHY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLF8sZyxtLGope3Uocix0LF8pO3ZhciAkLHcsTz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBFKXJldHVybiBFW2VdO3N3aXRjaChlKXtjYXNlIGg6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIseD1nPT15LEM9ITEsRT1lLnByb3RvdHlwZSxTPUVbZF18fEVbYl18fGcmJkVbZ10sVD1TfHxPKGcpO2lmKFMpe3ZhciBSPWYoVC5jYWxsKG5ldyBlKSk7bChSLGssITApLCFuJiZhKEUsYikmJnMoUixkLHYpLHgmJlMubmFtZSE9PXkmJihDPSEwLFQ9ZnVuY3Rpb24oKXtyZXR1cm4gUy5jYWxsKHRoaXMpfSl9aWYobiYmIWp8fCFwJiYhQyYmRVtkXXx8cyhFLGQsVCksY1t0XT1ULGNba109dixnKWlmKCQ9e3ZhbHVlczp4P1Q6Tyh5KSxrZXlzOm0/VDpPKGgpLGVudHJpZXM6eD9PKCJlbnRyaWVzIik6VH0sailmb3IodyBpbiAkKXcgaW4gRXx8aShFLHcsJFt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fEMpLHQsJCk7cmV0dXJuICR9fSx7Ii4vJCI6NTYsIi4vJC5leHBvcnQiOjM3LCIuLyQuaGFzIjo0MiwiLi8kLmhpZGUiOjQzLCIuLyQuaXRlci1jcmVhdGUiOjUxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLmxpYnJhcnkiOjU4LCIuLyQucmVkZWZpbmUiOjYzLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYSl7fXJldHVybiByfX0seyIuLyQud2tzIjo3OH1dLDU0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDU1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSw1NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaT1vKGUpLHM9bi5nZXRLZXlzKGkpLGE9cy5sZW5ndGgsYz0wO2E+YzspaWYoaVtyPXNbYysrXV09PT10KXJldHVybiByfX0seyIuLyQiOjU2LCIuLyQudG8taW9iamVjdCI6NzR9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLnRhc2siKS5zZXQsYz1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxsPXMuUHJvbWlzZSxmPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGYmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihmKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGMpe3ZhciBwPTEsYj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGMoZCkub2JzZXJ2ZShiLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe2IuZGF0YT1wPS1wfX1lbHNlIGk9bCYmbC5yZXNvbHZlP2Z1bmN0aW9uKCl7bC5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXthLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpmJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjozMCwiLi8kLmdsb2JhbCI6NDEsIi4vJC50YXNrIjo3Mn1dLDYwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjozMSwiLi8kLmV4cG9ydCI6MzcsIi4vJC5mYWlscyI6Mzh9XSw2MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjYzfV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6NDN9XSw2NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw2NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDY2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjo1NiwiLi8kLmNvcmUiOjMxLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQud2tzIjo3OH1dLDY3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjo1NiwiLi8kLmhhcyI6NDIsIi4vJC53a3MiOjc4fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6NDF9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQud2tzIjo3OH1dLDcwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDcxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYT1TdHJpbmcobyh0KSksYz1uKHIpLHU9YS5sZW5ndGg7cmV0dXJuIDA+Y3x8Yz49dT9lPyIiOnZvaWQgMDooaT1hLmNoYXJDb2RlQXQoYyksNTUyOTY+aXx8aT41NjMxOXx8YysxPT09dXx8KHM9YS5jaGFyQ29kZUF0KGMrMSkpPDU2MzIwfHxzPjU3MzQzP2U/YS5jaGFyQXQoYyk6aTplP2Euc2xpY2UoYyxjKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLnRvLWludGVnZXIiOjczfV0sNzI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYT1lKCIuLyQuaW52b2tlIiksYz1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxsPWUoIi4vJC5nbG9iYWwiKSxmPWwucHJvY2VzcyxkPWwuc2V0SW1tZWRpYXRlLHA9bC5jbGVhckltbWVkaWF0ZSxiPWwuTWVzc2FnZUNoYW5uZWwsaD0wLHk9e30sdj0ib25yZWFkeXN0YXRlY2hhbmdlIixfPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxnPWZ1bmN0aW9uKGUpe18uY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrK2hdPWZ1bmN0aW9uKCl7YSgiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKGgpLGh9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGYpP249ZnVuY3Rpb24oZSl7Zi5uZXh0VGljayhzKF8sZSwxKSl9OmI/KG89bmV3IGIsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcsbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6bC5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFsLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7bC5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZywhMSkpOm49diBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXtjLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVt2XT1mdW5jdGlvbigpe2MucmVtb3ZlQ2hpbGQodGhpcyksXy5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKF8sZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MzAsIi4vJC5jdHgiOjMyLCIuLyQuZG9tLWNyZWF0ZSI6MzUsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaHRtbCI6NDQsIi4vJC5pbnZva2UiOjQ1fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLmlvYmplY3QiOjQ2fV0sNzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo3M31dLDc2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjMzfV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjo0MSwiLi8kLnNoYXJlZCI6NjgsIi4vJC51aWQiOjc3fV0sNzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDgwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MjcsIi4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5pdGVyLXN0ZXAiOjU0LCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLnRvLWlvYmplY3QiOjc0fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIGUobih0KSxyKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDgzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImtleXMiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZShuKHQpKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1vYmplY3QiOjc2fV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vJC5zZXQtcHJvdG8iKS5zZXR9KX0seyIuLyQuZXhwb3J0IjozNywiLi8kLnNldC1wcm90byI6NjV9XSw4NTpbZnVuY3Rpb24oZSx0LHIpe30se31dLDg2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLmN0eCIpLGM9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxsPWUoIi4vJC5pcy1vYmplY3QiKSxmPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLGI9ZSgiLi8kLmZvci1vZiIpLGg9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksdj1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxfPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksZz1lKCIuLyQubWljcm90YXNrIiksbT0iUHJvbWlzZSIsaj1zLnByb2Nlc3MsJD0icHJvY2VzcyI9PWMoaiksdz1zW21dLE89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gaChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmTygpLGgodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLHg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sQz1mdW5jdGlvbihlKXt2YXIgdD1mKGUpW3ZdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxFPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBsKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFM9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sVD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFI9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO2coZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxhPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGE9dC5yZXNvbHZlLGM9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2MoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPUUocikpP2kuY2FsbChyLGEsYyk6YShyKSk6YyhuKX1jYXRjaCh1KXtjKHUpfX07ci5sZW5ndGg+aTspYShyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO00obykmJigkP2ouZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxNPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFNKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFIodCwhMCkpfSxOPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PUUoZSkpP2coZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxhKE4sbiwxKSxhKEQsbiwxKSl9Y2F0Y2gobyl7RC5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFIociwhMSkpfWNhdGNoKG4pe0QuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxtKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYShOLHQsMSksYShELHQsMSkpfWNhdGNoKHIpe0QuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFMoXyh0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlIobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxtKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShtKSxuPWUoIi4vJC5jb3JlIilbbV0sdSh1LlMrdS5GKiFrLG0se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxPKCEwKSksbSx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmeChlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLG0se2FsbDpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGE9VChmdW5jdGlvbigpe2IoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYT1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxhW29dPWUsLS1yfHxuKGEpKX0saSl9KTpuKGEpfSk7cmV0dXJuIGEmJmkoYS5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PUModGhpcykscj1uZXcgUyh0KSxuPXIucmVqZWN0LG89VChmdW5jdGlvbigpe2IoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjU2LCIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY2xhc3NvZiI6MjksIi4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5leHBvcnQiOjM3LCIuLyQuZm9yLW9mIjozOSwiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5LCIuLyQuaXRlci1kZXRlY3QiOjUzLCIuLyQubGlicmFyeSI6NTgsIi4vJC5taWNyb3Rhc2siOjU5LCIuLyQucmVkZWZpbmUtYWxsIjo2MiwiLi8kLnNhbWUtdmFsdWUiOjY0LCIuLyQuc2V0LXByb3RvIjo2NSwiLi8kLnNldC1zcGVjaWVzIjo2NiwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjY5LCIuLyQuc3RyaWN0LW5ldyI6NzAsIi4vJC53a3MiOjc4fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5zdHJpbmctYXQiOjcxfV0sODg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQuZ2xvYmFsIiksaT1lKCIuLyQuaGFzIikscz1lKCIuLyQuZGVzY3JpcHRvcnMiKSxhPWUoIi4vJC5leHBvcnQiKSxjPWUoIi4vJC5yZWRlZmluZSIpLHU9ZSgiLi8kLmZhaWxzIiksbD1lKCIuLyQuc2hhcmVkIiksZj1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxkPWUoIi4vJC51aWQiKSxwPWUoIi4vJC53a3MiKSxiPWUoIi4vJC5rZXlvZiIpLGg9ZSgiLi8kLmdldC1uYW1lcyIpLHk9ZSgiLi8kLmVudW0ta2V5cyIpLHY9ZSgiLi8kLmlzLWFycmF5IiksXz1lKCIuLyQuYW4tb2JqZWN0IiksZz1lKCIuLyQudG8taW9iamVjdCIpLG09ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxqPW4uZ2V0RGVzYywkPW4uc2V0RGVzYyx3PW4uY3JlYXRlLE89aC5nZXQsaz1vLlN5bWJvbCx4PW8uSlNPTixDPXgmJnguc3RyaW5naWZ5LEU9ITEsUz1wKCJfaGlkZGVuIiksVD1uLmlzRW51bSxSPWwoInN5bWJvbC1yZWdpc3RyeSIpLE09bCgic3ltYm9scyIpLEQ9ImZ1bmN0aW9uIj09dHlwZW9mIGssTj1PYmplY3QucHJvdG90eXBlLFA9cyYmdShmdW5jdGlvbigpe3JldHVybiA3IT13KCQoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49aihOLHQpO24mJmRlbGV0ZSBOW3RdLCQoZSx0LHIpLG4mJmUhPT1OJiYkKE4sdCxuKX06JCxBPWZ1bmN0aW9uKGUpe3ZhciB0PU1bZV09dyhrLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSxzJiZFJiZQKE4sZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtpKHRoaXMsUykmJmkodGhpc1tTXSxlKSYmKHRoaXNbU11bZV09ITEpLFAodGhpcyxlLG0oMSx0KSl9fSksdH0sTD1mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9LEY9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByJiZpKE0sdCk/KHIuZW51bWVyYWJsZT8oaShlLFMpJiZlW1NdW3RdJiYoZVtTXVt0XT0hMSkscj13KHIse2VudW1lcmFibGU6bSgwLCExKX0pKTooaShlLFMpfHwkKGUsUyxtKDEse30pKSxlW1NdW3RdPSEwKSxQKGUsdCxyKSk6JChlLHQscil9LEk9ZnVuY3Rpb24oZSx0KXtfKGUpO2Zvcih2YXIgcixuPXkodD1nKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KUYoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sVj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3coZSk6SSh3KGUpLHQpfSxVPWZ1bmN0aW9uKGUpe3ZhciB0PVQuY2FsbCh0aGlzLGUpO3JldHVybiB0fHwhaSh0aGlzLGUpfHwhaShNLGUpfHxpKHRoaXMsUykmJnRoaXNbU11bZV0/dDohMH0sej1mdW5jdGlvbihlLHQpe3ZhciByPWooZT1nKGUpLHQpO3JldHVybiFyfHwhaShNLHQpfHxpKGUsUykmJmVbU11bdF18fChyLmVudW1lcmFibGU9ITApLHJ9LEg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pfHx0PT1TfHxuLnB1c2godCk7cmV0dXJuIG59LEI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pJiZuLnB1c2goTVt0XSk7cmV0dXJuIG59LEo9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIUwoZSkpe2Zvcih2YXIgdCxyLG49W2VdLG89MSxpPWFyZ3VtZW50cztpLmxlbmd0aD5vOyluLnB1c2goaVtvKytdKTtyZXR1cm4gdD1uWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10KSwhciYmdih0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksTCh0KT92b2lkIDA6dH0pLG5bMV09dCxDLmFwcGx5KHgsbil9fSxXPXUoZnVuY3Rpb24oKXt2YXIgZT1rKCk7cmV0dXJuIltudWxsXSIhPUMoW2VdKXx8Int9IiE9Qyh7YTplfSl8fCJ7fSIhPUMoT2JqZWN0KGUpKX0pO0R8fChrPWZ1bmN0aW9uKCl7aWYoTCh0aGlzKSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3JldHVybiBBKGQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApKX0sYyhrLnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxMPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Yga30sbi5jcmVhdGU9VixuLmlzRW51bT1VLG4uZ2V0RGVzYz16LG4uc2V0RGVzYz1GLG4uc2V0RGVzY3M9SSxuLmdldE5hbWVzPWguZ2V0PUgsbi5nZXRTeW1ib2xzPUIscyYmIWUoIi4vJC5saWJyYXJ5IikmJmMoTiwicHJvcGVydHlJc0VudW1lcmFibGUiLFUsITApKTt2YXIgWT17ImZvciI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoUixlKz0iIik/UltlXTpSW2VdPWsoZSl9LGtleUZvcjpmdW5jdGlvbihlKXtyZXR1cm4gYihSLGUpfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtFPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtFPSExfX07bi5lYWNoLmNhbGwoImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGZ1bmN0aW9uKGUpe3ZhciB0PXAoZSk7WVtlXT1EP3Q6QSh0KX0pLEU9ITAsYShhLkcrYS5XLHtTeW1ib2w6a30pLGEoYS5TLCJTeW1ib2wiLFkpLGEoYS5TK2EuRiohRCwiT2JqZWN0Iix7Y3JlYXRlOlYsZGVmaW5lUHJvcGVydHk6RixkZWZpbmVQcm9wZXJ0aWVzOkksZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOnosZ2V0T3duUHJvcGVydHlOYW1lczpILGdldE93blByb3BlcnR5U3ltYm9sczpCfSkseCYmYShhLlMrYS5GKighRHx8VyksIkpTT04iLHtzdHJpbmdpZnk6Sn0pLGYoaywiU3ltYm9sIiksZihNYXRoLCJNYXRoIiwhMCksZihvLkpTT04sIkpTT04iLCEwKX0seyIuLyQiOjU2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLmVudW0ta2V5cyI6MzYsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4LCIuLyQuZ2V0LW5hbWVzIjo0MCwiLi8kLmdsb2JhbCI6NDEsIi4vJC5oYXMiOjQyLCIuLyQuaXMtYXJyYXkiOjQ4LCIuLyQua2V5b2YiOjU3LCIuLyQubGlicmFyeSI6NTgsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNoYXJlZCI6NjgsIi4vJC50by1pb2JqZWN0Ijo3NCwiLi8kLnVpZCI6NzcsIi4vJC53a3MiOjc4fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjgwfV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXt3aW5kb3cuTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5nPVtdLHRoaXMuaz1lfWZ1bmN0aW9uIHIoZSl7IWZ1bmN0aW9uIHIoKXt2YXIgbj1lLnRha2VSZWNvcmRzKCk7bi5sZW5ndGgmJmUuayhuLGUpLGUuZj1zZXRUaW1lb3V0KHIsdC5fcGVyaW9kKX0oKX1mdW5jdGlvbiBuKHQpe3ZhciByLG49e3R5cGU6bnVsbCx0YXJnZXQ6bnVsbCxhZGRlZE5vZGVzOltdLHJlbW92ZWROb2RlczpbXSxwcmV2aW91c1NpYmxpbmc6bnVsbCxuZXh0U2libGluZzpudWxsLGF0dHJpYnV0ZU5hbWU6bnVsbCxhdHRyaWJ1dGVOYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpudWxsfTtmb3IociBpbiB0KW5bcl0hPT1lJiZ0W3JdIT09ZSYmKG5bcl09dFtyXSk7cmV0dXJuIG59ZnVuY3Rpb24gbyhlLHQpe3ZhciByPWEoZSx0KTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIG8sYz1uLmxlbmd0aDt0LmEmJnIuYSYmaShuLGUsci5hLHQuZCksKHQuYnx8dC5lKSYmKG89cyhuLGUscix0KSksKG98fG4ubGVuZ3RoIT09YykmJihyPWEoZSx0KSl9fWZ1bmN0aW9uIGkodCxyLG8saSl7Zm9yKHZhciBzLGEsYz17fSx1PXIuYXR0cmlidXRlcyxsPXUubGVuZ3RoO2wtLTspcz11W2xdLGE9cy5uYW1lLGkmJmlbYV09PT1lfHwocy52YWx1ZSE9PW9bYV0mJnQucHVzaChuKHt0eXBlOiJhdHRyaWJ1dGVzIix0YXJnZXQ6cixhdHRyaWJ1dGVOYW1lOmEsb2xkVmFsdWU6b1thXSxhdHRyaWJ1dGVOYW1lc3BhY2U6cy5uYW1lc3BhY2VVUkl9KSksY1thXT0hMCk7Zm9yKGEgaW4gbyljW2FdfHx0LnB1c2gobih7dGFyZ2V0OnIsdHlwZToiYXR0cmlidXRlcyIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV19KSl9ZnVuY3Rpb24gcyh0LHIsbyxzKXtmdW5jdGlvbiBhKGUscixvLGEsYyl7dmFyIGw9ZS5sZW5ndGgtMTtjPS1+KChsLWMpLzIpO2Zvcih2YXIgZixkLHA7cD1lLnBvcCgpOylmPW9bcC5oXSxkPWFbcC5pXSxzLmImJmMmJk1hdGguYWJzKHAuaC1wLmkpPj1sJiYodC5wdXNoKG4oe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0OnIsYWRkZWROb2RlczpbZl0scmVtb3ZlZE5vZGVzOltmXSxuZXh0U2libGluZzpmLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpmLnByZXZpb3VzU2libGluZ30pKSxjLS0pLHMuYSYmZC5hJiZpKHQsZixkLmEscy5kKSxzLmMmJjM9PT1mLm5vZGVUeXBlJiZmLm5vZGVWYWx1ZSE9PWQuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpmfSkpLHMuZSYmdShmLGQpfWZ1bmN0aW9uIHUocixvKXtmb3IodmFyIGQscCxiLGgseSx2PXIuY2hpbGROb2RlcyxfPW8uYixnPXYubGVuZ3RoLG09Xz9fLmxlbmd0aDowLGo9MCwkPTAsdz0wO2c+JHx8bT53OyloPXZbJF0seT0oYj1fW3ddKSYmYi5qLGg9PT15PyhzLmEmJmIuYSYmaSh0LGgsYi5hLHMuZCkscy5jJiZiLmMhPT1lJiZoLm5vZGVWYWx1ZSE9PWIuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpofSkpLHAmJmEocCxyLHYsXyxqKSxzLmUmJihoLmNoaWxkTm9kZXMubGVuZ3RofHxiLmImJmIuYi5sZW5ndGgpJiZ1KGgsYiksJCsrLHcrKyk6KGw9ITAsZHx8KGQ9e30scD1bXSksaCYmKGRbYj1jKGgpXXx8KGRbYl09ITAsLTE9PT0oYj1mKF8saCx3LCJqIikpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2hdLG5leHRTaWJsaW5nOmgubmV4dFNpYmxpbmcscHJldmlvdXNTaWJsaW5nOmgucHJldmlvdXNTaWJsaW5nfSkpLGorKyk6cC5wdXNoKHtoOiQsaTpifSkpLCQrKykseSYmeSE9PXZbJF0mJihkW2I9Yyh5KV18fChkW2JdPSEwLC0xPT09KGI9Zih2LHksJCkpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpvLmoscmVtb3ZlZE5vZGVzOlt5XSxuZXh0U2libGluZzpfW3crMV0scHJldmlvdXNTaWJsaW5nOl9bdy0xXX0pKSxqLS0pOnAucHVzaCh7aDpiLGk6d30pKSx3KyspKTtwJiZhKHAscix2LF8sail9dmFyIGw7cmV0dXJuIHUocixvKSxsfWZ1bmN0aW9uIGEoZSx0KXt2YXIgcj0hMDtyZXR1cm4gZnVuY3Rpb24gbihlKXt2YXIgbz17ajplfTtyZXR1cm4hdC5jfHwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGU/KHQuYSYmciYmMT09PWUubm9kZVR5cGUmJihvLmE9bChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5kJiYhdC5kW3IubmFtZV18fChlW3IubmFtZV09ci52YWx1ZSksZX0pKSxyJiYodC5ifHx0LmN8fHQuYSYmdC5lKSYmKG8uYj11KGUuY2hpbGROb2RlcyxuKSkscj10LmUpOm8uYz1lLm5vZGVWYWx1ZSxvfShlKX1mdW5jdGlvbiBjKGUpe3RyeXtyZXR1cm4gZS5pZHx8KGUubW9faWQ9ZS5tb19pZHx8ZCsrKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGUubm9kZVZhbHVlfWNhdGNoKHIpe3JldHVybiBkKyt9fX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciByPVtdLG49MDtuPGUubGVuZ3RoO24rKylyW25dPXQoZVtuXSxuLGUpO3JldHVybiByfWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIHI9e30sbj0wO248ZS5sZW5ndGg7bisrKXI9dChyLGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBmKGUsdCxyLG4pe2Zvcig7cjxlLmxlbmd0aDtyKyspaWYoKG4/ZVtyXVtuXTplW3JdKT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9dC5fcGVyaW9kPTMwLHQucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXthOiEhKHQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXJ8fHQuYXR0cmlidXRlT2xkVmFsdWUpLGI6ISF0LmNoaWxkTGlzdCxlOiEhdC5zdWJ0cmVlLGM6ISghdC5jaGFyYWN0ZXJEYXRhJiYhdC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpfSxpPXRoaXMuZyxzPTA7czxpLmxlbmd0aDtzKyspaVtzXS5tPT09ZSYmaS5zcGxpY2UocywxKTt0LmF0dHJpYnV0ZUZpbHRlciYmKG4uZD1sKHQuYXR0cmlidXRlRmlsdGVyLGZ1bmN0aW9uKGUsdCl7CnJldHVybiBlW3RdPSEwLGV9KSksaS5wdXNoKHttOmUsbDpvKGUsbil9KSx0aGlzLmZ8fHIodGhpcyl9LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5nLHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdLmwoZSk7cmV0dXJuIGV9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmc9W10sY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGx9fTt2YXIgZD0xO3JldHVybiB0fSh2b2lkIDApfSx7fV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXtPYmplY3Qub2JzZXJ2ZXx8ZnVuY3Rpb24oZSx0LHIsbil7InVzZSBzdHJpY3QiO3ZhciBvLGkscz1bImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInJlY29uZmlndXJlIiwic2V0UHJvdG90eXBlIiwicHJldmVudEV4dGVuc2lvbnMiXSxhPXQuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1lLmNhbGwodCl9fShlLnByb3RvdHlwZS50b1N0cmluZyksYz10LnByb3RvdHlwZS5pbmRleE9mP3QuaW5kZXhPZnx8ZnVuY3Rpb24oZSxyLG4pe3JldHVybiB0LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxyLG4pfTpmdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPXJ8fDA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LHU9ci5NYXAhPT1uJiZNYXAucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE1hcH06ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PVtdO3JldHVybntzaXplOjAsaGFzOmZ1bmN0aW9uKHQpe3JldHVybiBjKGUsdCk+LTF9LGdldDpmdW5jdGlvbihyKXtyZXR1cm4gdFtjKGUscildfSxzZXQ6ZnVuY3Rpb24ocixuKXt2YXIgbz1jKGUscik7LTE9PT1vPyhlLnB1c2gociksdC5wdXNoKG4pLHRoaXMuc2l6ZSsrKTp0W29dPW59LCJkZWxldGUiOmZ1bmN0aW9uKHIpe3ZhciBuPWMoZSxyKTtuPi0xJiYoZS5zcGxpY2UobiwxKSx0LnNwbGljZShuLDEpLHRoaXMuc2l6ZS0tKX0sZm9yRWFjaDpmdW5jdGlvbihyKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylyLmNhbGwoYXJndW1lbnRzWzFdLHRbbl0sZVtuXSx0aGlzKX19fSxsPWUuZ2V0T3duUHJvcGVydHlOYW1lcz9mdW5jdGlvbigpe3ZhciB0PWUuZ2V0T3duUHJvcGVydHlOYW1lczt0cnl7YXJndW1lbnRzLmNhbGxlZX1jYXRjaChyKXt2YXIgbj0odChjKS5qb2luKCIgIikrIiAiKS5yZXBsYWNlKC9wcm90b3R5cGUgfGxlbmd0aCB8bmFtZSAvZywiIikuc2xpY2UoMCwtMSkuc3BsaXQoIiAiKTtuLmxlbmd0aCYmKHQ9ZnVuY3Rpb24odCl7dmFyIHI9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KWZvcih2YXIgbyxpPTA7aTxuLmxlbmd0aDspKG89YyhyLG5baSsrXSkpPi0xJiZyLnNwbGljZShvLDEpO3JldHVybiByfSl9cmV0dXJuIHR9KCk6ZnVuY3Rpb24odCl7dmFyIHIsbixvPVtdO2lmKCJoYXNPd25Qcm9wZXJ0eSJpbiB0KWZvcihyIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmby5wdXNoKHIpO2Vsc2V7bj1lLmhhc093blByb3BlcnR5O2ZvcihyIGluIHQpbi5jYWxsKHQscikmJm8ucHVzaChyKX1yZXR1cm4gYSh0KSYmby5wdXNoKCJsZW5ndGgiKSxvfSxmPWUuZ2V0UHJvdG90eXBlT2YsZD1lLmRlZmluZVByb3BlcnRpZXMmJmUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHA9ci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbigpe3ZhciBlPStuZXcgRGF0ZSx0PWU7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cigodD0rbmV3IERhdGUpLWUpfSwxNyl9fSgpLGI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW8uZ2V0KGUpO24/KHkobixlKSxtKGUsbix0LHIpKToobj1oKGUpLG0oZSxuLHQsciksMT09PW8uc2l6ZSYmcCh2KSl9LGg9ZnVuY3Rpb24odCxyKXt2YXIgbixpPWwodCkscz1bXSxhPTAscj17aGFuZGxlcnM6dSgpLGZyb3plbjplLmlzRnJvemVuP2UuaXNGcm96ZW4odCk6ITEsZXh0ZW5zaWJsZTplLmlzRXh0ZW5zaWJsZT9lLmlzRXh0ZW5zaWJsZSh0KTohMCxwcm90bzpmJiZmKHQpLHByb3BlcnRpZXM6aSx2YWx1ZXM6cyxub3RpZmllcjpnKHQscil9O2lmKGQpZm9yKG49ci5kZXNjcmlwdG9ycz1bXTthPGkubGVuZ3RoOyluW2FdPWQodCxpW2FdKSxzW2FdPXRbaVthKytdXTtlbHNlIGZvcig7YTxpLmxlbmd0aDspc1thXT10W2lbYSsrXV07cmV0dXJuIG8uc2V0KHQscikscn0seT1mdW5jdGlvbigpe3ZhciB0PWQ/ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaT10LnByb3BlcnRpZXNbcl0scz1lW2ldLGE9dC52YWx1ZXNbcl0sYz10LmRlc2NyaXB0b3JzW3JdOyJ2YWx1ZSJpbiBvJiYoYT09PXM/MD09PWEmJjEvYSE9PTEvczphPT09YXx8cz09PXMpJiYoaihlLHQse25hbWU6aSx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOmF9LG4pLHQudmFsdWVzW3JdPXMpLCFjLmNvbmZpZ3VyYWJsZXx8by5jb25maWd1cmFibGUmJm8ud3JpdGFibGU9PT1jLndyaXRhYmxlJiZvLmVudW1lcmFibGU9PT1jLmVudW1lcmFibGUmJm8uZ2V0PT09Yy5nZXQmJm8uc2V0PT09Yy5zZXR8fChqKGUsdCx7bmFtZTppLHR5cGU6InJlY29uZmlndXJlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LmRlc2NyaXB0b3JzW3JdPW8pfTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10LnByb3BlcnRpZXNbcl0saT1lW29dLHM9dC52YWx1ZXNbcl07KHM9PT1pPzA9PT1zJiYxL3MhPT0xL2k6cz09PXN8fGk9PT1pKSYmKGooZSx0LHtuYW1lOm8sdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpzfSxuKSx0LnZhbHVlc1tyXT1pKX0scj1kP2Z1bmN0aW9uKGUscixuLG8saSl7Zm9yKHZhciBzLGE9ci5sZW5ndGg7biYmYS0tOyludWxsIT09clthXSYmKHM9ZChlLHJbYV0pLG4tLSxzP3QoZSxvLGEsaSxzKTooaihlLG8se25hbWU6clthXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm8udmFsdWVzW2FdfSxpKSxvLnByb3BlcnRpZXMuc3BsaWNlKGEsMSksby52YWx1ZXMuc3BsaWNlKGEsMSksby5kZXNjcmlwdG9ycy5zcGxpY2UoYSwxKSkpfTpmdW5jdGlvbihlLHQscixuLG8pe2Zvcih2YXIgaT10Lmxlbmd0aDtyJiZpLS07KW51bGwhPT10W2ldJiYoaihlLG4se25hbWU6dFtpXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm4udmFsdWVzW2ldfSxvKSxuLnByb3BlcnRpZXMuc3BsaWNlKGksMSksbi52YWx1ZXMuc3BsaWNlKGksMSksci0tKX07cmV0dXJuIGZ1bmN0aW9uKG4sbyxpKXtpZihuLmhhbmRsZXJzLnNpemUmJiFuLmZyb3plbil7dmFyIHMsYSx1LHAsYixoLHksdixfPW4udmFsdWVzLGc9bi5kZXNjcmlwdG9ycyxtPTA7aWYobi5leHRlbnNpYmxlKWlmKHM9bi5wcm9wZXJ0aWVzLnNsaWNlKCksYT1zLmxlbmd0aCx1PWwobyksZyl7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSx2PWQobyxiKSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKG9bYl0pLGcucHVzaCh2KSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpLHYpKTtyKG8scyxhLG4saSksZS5pc0V4dGVuc2libGUobyl8fChuLmV4dGVuc2libGU9ITEsaihvLG4se3R5cGU6InByZXZlbnRFeHRlbnNpb25zIixvYmplY3Q6b30saSksbi5mcm96ZW49ZS5pc0Zyb3plbihvKSl9ZWxzZXtmb3IoO208dS5sZW5ndGg7KWI9dVttKytdLHA9YyhzLGIpLGg9b1tiXSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKGgpKTooc1twXT1udWxsLGEtLSx0KG8sbixwLGkpKTtyKG8scyxhLG4saSl9ZWxzZSBpZighbi5mcm96ZW4pe2Zvcig7bTxzLmxlbmd0aDttKyspYj1zW21dLHQobyxuLG0saSxkKG8sYikpO2UuaXNGcm96ZW4obykmJihuLmZyb3plbj0hMCl9ZiYmKHk9ZihvKSx5IT09bi5wcm90byYmKGoobyxuLHt0eXBlOiJzZXRQcm90b3R5cGUiLG5hbWU6Il9fcHJvdG9fXyIsb2JqZWN0Om8sb2xkVmFsdWU6bi5wcm90b30pLG4ucHJvdG89eSkpfX19KCksdj1mdW5jdGlvbigpe28uc2l6ZSYmKG8uZm9yRWFjaCh5KSxpLmZvckVhY2goXykscCh2KSl9LF89ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmNoYW5nZVJlY29yZHM7ci5sZW5ndGgmJihlLmNoYW5nZVJlY29yZHM9W10sdChyKSl9LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyJiYodD1vLmdldChlKSksdCYmdC5ub3RpZmllcnx8e25vdGlmeTpmdW5jdGlvbih0KXt0LnR5cGU7dmFyIHI9by5nZXQoZSk7aWYocil7dmFyIG4saT17b2JqZWN0OmV9O2ZvcihuIGluIHQpIm9iamVjdCIhPT1uJiYoaVtuXT10W25dKTtqKGUscixpKX19LHBlcmZvcm1DaGFuZ2U6ZnVuY3Rpb24odCxyKXtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBub24tc3RyaW5nIGNoYW5nZVR5cGUiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgcGVyZm9ybSBub24tZnVuY3Rpb24iKTt2YXIgaSxzLGE9by5nZXQoZSksYz1hcmd1bWVudHNbMl0sdT1jPT09bj9yKCk6ci5jYWxsKGMpO2lmKGEmJnkoYSxlLHQpLGEmJnUmJiJvYmplY3QiPT10eXBlb2YgdSl7cz17b2JqZWN0OmUsdHlwZTp0fTtmb3IoaSBpbiB1KSJvYmplY3QiIT09aSYmInR5cGUiIT09aSYmKHNbaV09dVtpXSk7aihlLGEscyl9fX19LG09ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89aS5nZXQocik7b3x8aS5zZXQocixvPXtvYnNlcnZlZDp1KCksY2hhbmdlUmVjb3JkczpbXX0pLG8ub2JzZXJ2ZWQuc2V0KGUse2FjY2VwdExpc3Q6bi5zbGljZSgpLGRhdGE6dH0pLHQuaGFuZGxlcnMuc2V0KHIsbyl9LGo9ZnVuY3Rpb24oZSx0LHIsbil7dC5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXQub2JzZXJ2ZWQuZ2V0KGUpLmFjY2VwdExpc3Q7KCJzdHJpbmciIT10eXBlb2Ygbnx8LTE9PT1jKG8sbikpJiZjKG8sci50eXBlKT4tMSYmdC5jaGFuZ2VSZWNvcmRzLnB1c2gocil9KX07bz11KCksaT11KCksZS5vYnNlcnZlPWZ1bmN0aW9uKHQscixvKXtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3Qgb2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7aWYoZS5pc0Zyb3plbiYmZS5pc0Zyb3plbihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBhIGZyb3plbiBmdW5jdGlvbiBvYmplY3QiKTtpZihvPT09bilvPXM7ZWxzZSBpZighb3x8Im9iamVjdCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoaXJkIGFyZ3VtZW50IHRvIE9iamVjdC5vYnNlcnZlIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncy4iKTtyZXR1cm4gYih0LHIsbyksdH0sZS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCB1bm9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHIsbj1pLmdldCh0KTtyZXR1cm4gbiYmKHI9bi5vYnNlcnZlZC5nZXQoZSkpJiYobi5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxwKGZ1bmN0aW9uKCl7XyhuLHQpfSksMT09PW4ub2JzZXJ2ZWQuc2l6ZSYmbi5vYnNlcnZlZC5oYXMoZSk/aVsiZGVsZXRlIl0odCk6bi5vYnNlcnZlZFsiZGVsZXRlIl0oZSksMT09PXIuZGF0YS5oYW5kbGVycy5zaXplP29bImRlbGV0ZSJdKGUpOnIuZGF0YS5oYW5kbGVyc1siZGVsZXRlIl0odCkpLGV9LGUuZ2V0Tm90aWZpZXI9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmdldE5vdGlmaWVyIGNhbm5vdCBnZXROb3RpZmllciBub24tb2JqZWN0Iik7cmV0dXJuIGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4odCk/bnVsbDpnKHQpfSxlLmRlbGl2ZXJDaGFuZ2VSZWNvcmRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgdD1pLmdldChlKTt0JiYodC5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxfKHQsZSkpfX0oT2JqZWN0LEFycmF5LHRoaXMpfSx7fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5EYXRhT2JqZWN0T2JzZXJ2ZXI9ci5EYXRhT2JqZWN0UmVwb3J0ZXI9ci5TeW5jaGVyPXZvaWQgMCxlKCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iKSxlKCJvYmplY3Qub2JzZXJ2ZSIpLGUoImFycmF5Lm9ic2VydmUiKTt2YXIgbz1lKCIuL3N5bmNoZXIvU3luY2hlciIpLGk9bihvKSxzPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxhPW4ocyksYz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIiksdT1uKGMpO3IuU3luY2hlcj1pWyJkZWZhdWx0Il0sci5EYXRhT2JqZWN0UmVwb3J0ZXI9YVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdE9ic2VydmVyPXVbImRlZmF1bHQiXX0seyIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjo5NSwiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vc3luY2hlci9TeW5jaGVyIjo5OSwiYXJyYXkub2JzZXJ2ZSI6MSwibXV0YXRpb25vYnNlcnZlci1zaGltIjo5MCwib2JqZWN0Lm9ic2VydmUiOjkxfV0sOTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCIuL1N5bmNPYmplY3QiKSxwPW4oZCksYj1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGg9bihiKSx5PWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxpLHMpeygwLHVbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgYT10aGlzO2EuX3N5bmNoZXI9dCxhLl91cmw9cixhLl9zY2hlbWE9bixhLl9zdGF0dXM9byxhLl9zeW5jT2JqPW5ldyBwWyJkZWZhdWx0Il0oaSksYS5fY2hpbGRyZW5zPXMsYS5fdmVyc2lvbj0wLGEuX2NoaWxkSWQ9MCxhLl9jaGlsZHJlbk9iamVjdHM9e30sYS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYS5fb3duZXI9dC5fb3duZXIsYS5fYnVzPXQuX2J1c31yZXR1cm4oMCxmWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXQuX3VybCsiL2NoaWxkcmVuLyI7dC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz1yK24saT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihyKXtpZihyLmZyb20hPT1lLl9vd25lcilzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uQ2hpbGRDcmVhdGUocik7YnJlYWs7Y2FzZSJkZWxldGUiOmNvbnNvbGUubG9nKHIpO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4ocil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSwoMCxhWyJkZWZhdWx0Il0pKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGlsZHJlbk9iamVjdHNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicGF1c2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InJlc3VtZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToic3RvcCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToiYWRkQ2hpbGQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyLl9jaGlsZElkKys7dmFyIG49ci5fb3duZXIrIiMiK3IuX2NoaWxkSWQsbz1yLl91cmwrIi9jaGlsZHJlbi8iK2Uscz17dHlwZToiY3JlYXRlIixmcm9tOnIuX293bmVyLHRvOm8sYm9keTp7cmVzb3VyY2U6bix2YWx1ZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSl7dmFyIGk9ci5fYnVzLnBvc3RNZXNzYWdlKHMpO2NvbnNvbGUubG9nKCJjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICIrci5fb3duZXIrIiApOiAiLHMpO3ZhciBhPW5ldyBoWyJkZWZhdWx0Il0ocixuLHQsci5fb3duZXIsaSk7YS5vbkNoYW5nZShmdW5jdGlvbihlKXtyLl9vbkNoYW5nZShlLHtwYXRoOm8sY2hpbGRJZDpufSl9KSxyLl9jaGlsZHJlbk9iamVjdHNbbl09YSxlKGEpfSl9fSx7a2V5OiJvbkFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleToiX29uQ2hpbGRDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2U7Y29uc29sZS5sb2coImNyZWF0ZS1vYnNlcnZlci1jaGlsZCggIit0Ll9vd25lcisiICk6ICIsZSk7dmFyIG49bmV3IGhbImRlZmF1bHQiXSh0LHIsZS5ib2R5LnZhbHVlKTt0Ll9jaGlsZHJlbk9iamVjdHNbcl09bixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNvdXJjZTp0Ll9vd25lcn19KX0pO3ZhciBvPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTplLmJvZHkudmFsdWUsY2hpbGRJZDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX07dC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJihjb25zb2xlLmxvZygiQURELUNISUxEUkVOLUVWRU5UOiAiLG8pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pKX19LHtrZXk6Il9vbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rKywib24iPT09ci5fc3RhdHVzKXt2YXIgbj17dHlwZToidXBkYXRlIixmcm9tOnIuX3VybCx0bzpyLl91cmwrIi9jaGFuZ2VzIixib2R5Ont2ZXJzaW9uOnIuX3ZlcnNpb24sc291cmNlOnIuX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PWQuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PWQuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1kLkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAseS5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT1kLk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBjPWkub2JqLHU9aS5sYXN0O2Muc3BsaWNlKHUsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCIuL0RhdGFPYmplY3RDaGlsZCI6OTQsIi4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1lKCIuL1N5bmNPYmplY3QiKSx1PW4oYyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxzKXsoMCxpWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9wYXJlbnQ9dCxhLl9jaGlsZElkPXIsYS5fb3duZXI9byxhLl9tc2dJZD1zLGEuX3N5bmNPYmo9bmV3IHVbImRlZmF1bHQiXShuKSxhLl9idXM9dC5fYnVzLGEuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0Ijo5OCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4vRGF0YU9iamVjdENoaWxkIiksaj1uKG0pLCQ9e0FOWToiYW55IixTVEFSVDoic3RhcnQiLEVYQUNUOiJleGFjdCJ9LHc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLHMsYyxsKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGY9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8scy5kYXRhLGMpKSxkPWY7cmV0dXJuIGQuX3ZlcnNpb249bCxkLl9maWx0ZXJzPXt9LGQuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtkLl9vbkZpbHRlcihlKX0pLCgwLGlbImRlZmF1bHQiXSkocy5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cy5jaGlsZHJlbnNbZV07ZC5fY2hpbGRyZW5PYmplY3RzW2VdPW5ldyBqWyJkZWZhdWx0Il0oZCxlLHQpfSksZC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxmfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsKyIvY2hhbmdlcyIsZnVuY3Rpb24odCl7InVwZGF0ZSI9PT10LnR5cGUmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTokLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9JC5BTlk6KG4udHlwZT0kLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fZmlsdGVyc1tyXTtuLnR5cGU9PT0kLkFOWT9uLmNhbGxiYWNrKGUpOm4udHlwZT09PSQuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihyKSYmbi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLkVYQUNUJiZlLmZpZWxkPT09ciYmbi5jYWxsYmFjayhlKX0pfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT13LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0Ijo5MywiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjoxNX1dLDk2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksaj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGM9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8saSxzKSksbD1jO3JldHVybiBsLl9zdWJzY3JpcHRpb25zPXt9LGwuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrcisiLVNFTkQ6ICIsZSksbC5fb25DaGFuZ2UoZSl9KSxsLl9hbGxvY2F0ZUxpc3RlbmVycygpLGN9cmV0dXJuKDAsdlsiZGVmYXVsdCJdKSh0LGUpLCgwLGZbImRlZmF1bHQiXSkodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LSIrZS5fdXJsKyItUkNWOiAiLHQpLHQudHlwZSl7Y2FzZSJyZXNwb25zZSI6ZS5fb25SZXNwb25zZSh0KTticmVhaztjYXNlInJlYWQiOmUuX29uUmVhZCh0KX19KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJpbnZpdGVPYnNlcnZlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToiY3JlYXRlIixmcm9tOnQuX3N5bmNoZXIuX293bmVyLHRvOnQuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTp0Ll91cmwsc2NoZW1hOnQuX3NjaGVtYSx2YWx1ZTp0Ll9zeW5jT2JqLmRhdGEsYXV0aG9yaXNlOmV9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJvblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVhZEhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2NlcHQ6ZnVuY3Rpb24oKXt2YXIgbj17dXJsOnIsc3RhdHVzOiJvbiJ9O3QuX3N1YnNjcmlwdGlvbnNbcl09bjt2YXIgbz17fTtyZXR1cm4oMCxpWyJkZWZhdWx0Il0pKHQuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10Ll9jaGlsZHJlbk9iamVjdHNbZV0uZGF0YTtvW2VdPSgwLG0uZGVlcENsb25lKShyKX0pLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzY2hlbWE6dC5fc2NoZW1hLHZlcnNpb246dC5fdmVyc2lvbix2YWx1ZTp7ZGF0YTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKSxjaGlsZHJlbnM6b319fSksbn0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOnJ9fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiU1VCU0NSSVBUSU9OLUVWRU5UOiAiLG4pLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihuKSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5mcm9tLG49dC5fc3Vic2NyaXB0aW9uc1tyXTtkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXTt2YXIgbz17dHlwZTplLmJvZHkudHlwZSx1cmw6cixvYmplY3Q6bn07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlVOLVNVQlNDUklQVElPTi1FVkVOVDogIixvKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobykpfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKGNvbnNvbGUubG9nKCJSRVNQT05TRS1FVkVOVDogIixyKSx0Ll9vblJlc3BvbnNlSGFuZGxlcihyKSl9fSx7a2V5OiJfb25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sYWNjZXB0OmZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOigwLG0uZGVlcENsb25lKSh0LmRhdGEpfX0pfSxyZWplY3Q6ZnVuY3Rpb24ocil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAxLGRlc2M6cn19KX19O3QuX29uUmVhZEhhbmRsZXImJihjb25zb2xlLmxvZygiUkVBRC1FVkVOVDogIixyKSx0Ll9vblJlYWRIYW5kbGVyKHIpKX19LHtrZXk6InN1YnNjcmlwdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1qLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Ijo5MywiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBzPXRoaXM7cy5fb3duZXI9dCxzLl91cmw9cixzLl9idXM9bixzLl9jaGlsZHJlbj1vLHMuX2NoYW5nZXM9W10scy5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4oMCxhWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7clsiZGVmYXVsdCJdPWMsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5PYmplY3RUeXBlPXIuQ2hhbmdlVHlwZT12b2lkIDA7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksdT1uKGMpLGw9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIHI9dGhpcztyLl9vYnNlcnZlcnM9W10sci5fZmlsdGVycz17fSx0P3IuX2RhdGE9KDAsbC5kZWVwQ2xvbmUpKHQpOnIuX2RhdGE9e30sci5faW50ZXJuYWxPYnNlcnZlKG5ldyBkLHIuX2RhdGEpfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToib2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSl9fSx7a2V5OiJmaW5kIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIuIik7cmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQodCl9fSx7a2V5OiJmaW5kQmVmb3JlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxyPWUuc3BsaXQoIi4iKTtyZXR1cm4gdC5sYXN0PXIucG9wKCksdC5vYmo9dGhpcy5fZmluZFdpdGhTcGxpdChyKSx0fX0se2tleToiX2ZpbmRXaXRoU3BsaXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt0PXRbZV19KSx0fX0se2tleToiX2ZpcmVFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfX0se2tleToiX2lzT2JzZXJ2YWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1PYmplY3R8fGUuY29uc3RydWN0b3I9PT1BcnJheX19LHtrZXk6Il9pbnRlcm5hbE9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBuPWZ1bmN0aW9uKHQpe3IuX29uQ2hhbmdlcyhlLHQpfTtpZih0LmNvbnN0cnVjdG9yPT09T2JqZWN0KXtPYmplY3Qub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgbyBpbiB0KXIuX2lzT2JzZXJ2YWJsZSh0W29dKSYmci5faW50ZXJuYWxPYnNlcnZlKGVbIm5ldyJdKG8pLHRbb10pfWVsc2UgaWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5KXtBcnJheS5vYnNlcnZlKHQsbik7Zm9yKHZhciBpIGluIHQpaWYoci5faXNPYnNlcnZhYmxlKHRbaV0pKXt2YXIgcz1lWyJuZXciXShuZXcgcCh0W2ldLGkpKTtyLl9pbnRlcm5hbE9ic2VydmUocyx0W2ldKX19fX19LHtrZXk6Il9vbkNoYW5nZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztmb3IodmFyIG4gaW4gdCl7dmFyIG89dFtuXS5vYmplY3QsaT12b2lkIDA7aWYoby5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmKGk9aC5PQkpFQ1QpLG8uY29uc3RydWN0b3I9PT1BcnJheSYmKGk9aC5BUlJBWSksInNwbGljZSI9PT10W25dLnR5cGUpIWZ1bmN0aW9uKCl7dmFyIHM9dFtuXS5pbmRleCxhPWVbIm5ldyJdKCIiK3MpLGM9YS50b1N0cmluZygpLHU9dFtuXS5yZW1vdmVkLmxlbmd0aDtpZigwIT09dSl7dmFyIGY9dFtuXS5yZW1vdmVkO2YuZm9yRWFjaChmdW5jdGlvbih0LG4pe3IuX2lzT2JzZXJ2YWJsZSh0KSYmZS5yZW1vdmVJbmRleChzK24pfSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmMsZGF0YTp1fSl9dmFyIGQ9dFtuXS5hZGRlZENvdW50O2lmKDAhPT1kKXt2YXIgaD1vLnNsaWNlKHMscytkKTtoLmZvckVhY2goZnVuY3Rpb24odCxuKXtpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBvPWVbIm5ldyJdKG5ldyBwKHQscytuKSk7ci5faW50ZXJuYWxPYnNlcnZlKG8sdCl9fSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLkFERCxvVHlwZTppLGZpZWxkOmMsZGF0YTooMCxsLmRlZXBDbG9uZSkoaCl9KX1zIT09by5sZW5ndGgtMSYmZS5yZUluZGV4RnJvbShvKX0oKTtlbHNle3ZhciBzPWVbIm5ldyJdKHRbbl0ubmFtZSksYT1zLnRvU3RyaW5nKCk7aWYoLTEhPT1hLmluZGV4T2YoIlN5bWJvbCIpKWNvbnRpbnVlO3ZhciBjPW9bdFtuXS5uYW1lXTsidXBkYXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlVQREFURSxvVHlwZTppLGZpZWxkOmEsZGF0YTooMCxsLmRlZXBDbG9uZSkoYyl9KSwiYWRkIj09PXRbbl0udHlwZSYmKHRoaXMuX2ludGVybmFsT2JzZXJ2ZShzLGMpLHRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSkpLCJkZWxldGUiPT09dFtuXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuUkVNT1ZFLG9UeXBlOmksZmllbGQ6YX0pfX19fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksZX0oKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLl9wYXRoPVtdLHRoaXMuX29ic2VydmFibGVzPXt9fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToicmVtb3ZlSW5kZXgiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9vYnNlcnZhYmxlc1tlXX19LHtrZXk6InJlSW5kZXhGcm9tIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOygwLGlbImRlZmF1bHQiXSkodGhpcy5fb2JzZXJ2YWJsZXMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fb2JzZXJ2YWJsZXNbcl0sbz1lLmluZGV4T2Yobi5vYmopO24uaWR4IT1vJiYobi5pZHg9byxkZWxldGUgdC5fb2JzZXJ2YWJsZXNbcl0sdC5fb2JzZXJ2YWJsZXNbb109bil9KX19LHtrZXk6Im5ldyIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5jb25zdHJ1Y3Rvcj09cCYmKHRoaXMuX29ic2VydmFibGVzW2UuaWR4XT1lKTt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIHQuX3BhdGgucHVzaChlKSx0fX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9wYXRoLnB1c2goZSl9KSx0fX0se2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbih0LHIpezA9PT1yP2U9dC50b1N0cmluZygpOmUrPSIuIit0LnRvU3RyaW5nKCl9KSxlfX1dKSxlfSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpLHRoaXMub2JqPXQsdGhpcy5pZHg9cn1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGI9ci5DaGFuZ2VUeXBlPXtVUERBVEU6InVwZGF0ZSIsQUREOiJhZGQiLFJFTU9WRToicmVtb3ZlIn0saD1yLk9iamVjdFR5cGU9e09CSkVDVDoib2JqZWN0IixBUlJBWToiYXJyYXkifTtyWyJkZWZhdWx0Il09Zn0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5OTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4vRGF0YU9iamVjdFJlcG9ydGVyIiksZj1uKGwpLGQ9ZSgiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxwPW4oZCksYj1lKCIuL0RhdGFQcm92aXNpb25hbCIpLGg9bihiKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBvPXRoaXM7by5fb3duZXI9dCxvLl9idXM9cixvLl9zdWJVUkw9bi5ydW50aW1lVVJMKyIvc20iLG8uX3JlcG9ydGVycz17fSxvLl9vYnNlcnZlcnM9e30sby5fcHJvdmlzaW9uYWxzPXt9LHIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtpZihlLmZyb20hPT10KXN3aXRjaChjb25zb2xlLmxvZygiU3luY2hlci1SQ1Y6ICIsZSksZS50eXBlKXtjYXNlImZvcndhcmQiOm8uX29uRm9yd2FyZChlKTticmVhaztjYXNlImNyZWF0ZSI6by5fb25SZW1vdGVDcmVhdGUoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOm8uX29uUmVtb3RlRGVsZXRlKGUpfX0pfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiY3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyLnJlcG9ydGVyPW4uX293bmVyLHIuc2NoZW1hPWU7dmFyIG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6cixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKHQsaSl7bi5fYnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24obyl7aWYoY29uc29sZS5sb2coImNyZWF0ZS1yZXNwb25zZTogIixvKSwyMDA9PT1vLmJvZHkuY29kZSl7dmFyIHM9by5ib2R5LnJlc291cmNlLGE9bmV3IGZbImRlZmF1bHQiXShuLHMsZSwib24iLHIsby5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTtuLl9yZXBvcnRlcnNbc109YSx0KGEpfWVsc2UgaShvLmJvZHkuZGVzYyl9KX0pfX0se2tleToic3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX293bmVyLHRvOnIuX3N1YlVSTCxib2R5OntzY2hlbWE6ZSxyZXNvdXJjZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24obyxpKXtyLl9idXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihuKXtjb25zb2xlLmxvZygic3Vic2NyaWJlLXJlc3BvbnNlOiAiLG4pO3ZhciBzPXIuX3Byb3Zpc2lvbmFsc1t0XTtpZihkZWxldGUgci5fcHJvdmlzaW9uYWxzW3RdLHMmJnMuX3JlbGVhc2VMaXN0ZW5lcnMoKSxuLmJvZHkuY29kZTwyMDApcz1uZXcgaFsiZGVmYXVsdCJdKHIuX293bmVyLHQsci5fYnVzLG4uYm9keS5jaGlsZHJlblJlc291cmNlcyksci5fcHJvdmlzaW9uYWxzW3RdPXM7ZWxzZSBpZigyMDA9PT1uLmJvZHkuY29kZSl7dmFyIGE9bmV3IHBbImRlZmF1bHQiXShyLHQsZSwib24iLG4uYm9keS52YWx1ZSxzLmNoaWxkcmVuLG4uYm9keS52ZXJzaW9uKTtyLl9vYnNlcnZlcnNbdF09YSxvKGEpLHMuYXBwbHkoYSl9ZWxzZSBpKG4uYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJyZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InJlYWQiLGZyb206dC5fb3duZXIsdG86ZX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSxuKXt0Ll9idXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbih0KXtjb25zb2xlLmxvZygicmVhZC1yZXNwb25zZTogIix0KSwyMDA9PT10LmJvZHkuY29kZT9lKHQuYm9keS52YWx1ZSk6bih0LmJvZHkuZGVzYyl9KX0pfX0se2tleToib25Ob3RpZmljYXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcj1lfX0se2tleToiX29uRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuX3JlcG9ydGVyc1tlLmJvZHkudG9dO3IuX29uRm9yd2FyZChlKX19LHtrZXk6Il9vblJlbW90ZUNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbS5zbGljZSgwLC0xMyksbj17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixuKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdO2lmKG4pe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBvPTIwMDtyJiYobz1yKSwyMDA9PT1vJiZuWyJkZWxldGUiXSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixvKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobykpfWVsc2UgdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6Im93bmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXJ9fSx7a2V5OiJyZXBvcnRlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXBvcnRlcnN9fSx7a2V5OiJvYnNlcnZlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXksdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjo5NiwiLi9EYXRhUHJvdmlzaW9uYWwiOjk3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDEwMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSl7aWYoIWUpdGhyb3cgRXJyb3IoIlVSTCBpcyBuZWVkZWQgdG8gc3BsaXQiKTt2YXIgdD0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSxyPSIkMSwkMiwkMyIsbj1lLnJlcGxhY2UodCxyKS5zcGxpdCgiLCIpO25bMF09PT1lJiYoblswXT0iaHR0cHMiLG5bMV09ZSk7dmFyIG89e3R5cGU6blswXSxkb21haW46blsxXSxpZGVudGl0eTpuWzJdfTtyZXR1cm4gb31mdW5jdGlvbiBpKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpLHI9e3VzZXJuYW1lOmUuc3Vic3RyaW5nKDAsdCksZG9tYWluOmUuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCl9O3JldHVybiByfWZ1bmN0aW9uIHMoZSl7cmV0dXJuISgoMCxiWyJkZWZhdWx0Il0pKGUpLmxlbmd0aD4wKX1mdW5jdGlvbiBhKGUpe3JldHVybiBlP0pTT04ucGFyc2UoKDAsZFsiZGVmYXVsdCJdKShlKSk6dm9pZCAwfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIik7cmV0dXJuInVzZXI6Ly8iK2Uuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsdCl9ZnVuY3Rpb24gdShlKXt2YXIgdD1vKGUpO3JldHVybiB0LmlkZW50aXR5LnJlcGxhY2UoIi8iLCIiKSsiQCIrdC5kb21haW59ZnVuY3Rpb24gbChlKXtpZigidXNlcjovLyI9PT1lLnN1YnN0cmluZygwLDcpKXt2YXIgdD1vKGUpO2lmKHQuZG9tYWluJiZ0LmlkZW50aXR5KXJldHVybiBlO3Rocm93InVzZXJVUkwgd2l0aCB3cm9uZyBmb3JtYXQifXJldHVybiBjKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgZj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiKSxkPW4oZikscD1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxiPW4ocCk7ci5kaXZpZGVVUkw9byxyLmRpdmlkZUVtYWlsPWksci5lbXB0eU9iamVjdD1zLHIuZGVlcENsb25lPWEsci5nZXRVc2VyVVJMRnJvbUVtYWlsPWMsci5nZXRVc2VyRW1haWxGcm9tVVJMPXUsci5jb252ZXJ0VG9Vc2VyVVJMPWx9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IjoyLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjd9XX0se30sWzkyXSkoOTIpfSk7CgoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsgLyoganNoaW50IHVuZGVmOiB0cnVlICovCgpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7Cgp2YXIgX2hlbGxvMiA9IHJlcXVpcmUoJy4vaGVsbG8nKTsKCnZhciBfaGVsbG8zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVsbG8yKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIEh5cGVydHkgQ29ubmVjdG9yOwoqIEBhdXRob3IgUGF1bG8gQ2hhaW5obyBbcGF1bG8tZy1jaGFpbmhvQHRlbGVjb20ucHRdCiogQHZlcnNpb24gMC4xLjAKKi8KCnZhciBIZWxsb1dvcmxkUmVwb3J0ZXIgPSBmdW5jdGlvbiAoKSB7CgogIC8qKgogICogQ3JlYXRlIGEgbmV3IEhlbGxvV29ybGRSZXBvcnRlcgogICogQHBhcmFtICB7U3luY2hlcn0gc3luY2hlciAtIFN5bmNoZXIgcHJvdmlkZWQgZnJvbSB0aGUgcnVudGltZSBjb3JlCiAgKi8KCiAgZnVuY3Rpb24gSGVsbG9Xb3JsZFJlcG9ydGVyKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhlbGxvV29ybGRSZXBvcnRlcik7CgogICAgaWYgKCFoeXBlcnR5VVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBoeXBlcnR5VVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFidXMpIHRocm93IG5ldyBFcnJvcignVGhlIE1pbmlCdXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKGh5cGVydHlVUkwpLmRvbWFpbjsKICAgIF90aGlzLl9kb21haW4gPSBkb21haW47CiAgICBfdGhpcy5fb2JqZWN0RGVzY1VSTCA9ICdoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4nICsgZG9tYWluICsgJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0hlbGxvV29ybGREYXRhU2NoZW1hJzsKCiAgICB2YXIgc3luY2hlciA9IG5ldyBfU3luY2hlci5TeW5jaGVyKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbik7CgogICAgX3RoaXMuX3N5bmNoZXIgPSBzeW5jaGVyOwogIH0KCiAgLyoqCiAgKiBDcmVhdGUgSGVsbG9Xb3JsZCBEYXRhIE9iamVjdAogICogQHBhcmFtICB7SHlwZXJ0eVVSTH0gSHlwZXJ0eVVSTCAtIEludml0ZWQKICAqLwoKICBfY3JlYXRlQ2xhc3MoSGVsbG9Xb3JsZFJlcG9ydGVyLCBbewogICAga2V5OiAnaGVsbG8nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhlbGxvKGh5cGVydHlVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHN5bmNoZXIgPSBfdGhpcy5fc3luY2hlcjsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHN5bmNoZXIuY3JlYXRlKF90aGlzLl9vYmplY3REZXNjVVJMLCBbaHlwZXJ0eVVSTF0sIF9oZWxsbzMuZGVmYXVsdCkudGhlbihmdW5jdGlvbiAoaGVsbG9PYmp0UmVwb3J0ZXIpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMS4gUmV0dXJuIENyZWF0ZWQgSGVsbG8gV29ybGQgRGF0YSBPYmplY3QgUmVwb3J0ZXInLCBoZWxsb09ianRSZXBvcnRlcik7CgogICAgICAgICAgX3RoaXMuaGVsbG9PYmp0UmVwb3J0ZXIgPSBoZWxsb09ianRSZXBvcnRlcjsKCiAgICAgICAgICBoZWxsb09ianRSZXBvcnRlci5vblN1YnNjcmlwdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLSBIZWxsbyBXb3JsZCBSZXBvcnRlciByZWNlaXZlZCBzdWJzY3JpcHRpb24gcmVxdWVzdCAtLS0tLS0tLS0gXG4nKTsKCiAgICAgICAgICAgIC8vIEFsbCBzdWJzY3JpcHRpb24gcmVxdWVzdGVkIGFyZSBhY2NlcHRlZAoKICAgICAgICAgICAgZXZlbnQuYWNjZXB0KCk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXNvbHZlKGhlbGxvT2JqdFJlcG9ydGVyKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFVwZGF0ZSBIZWxsb1dvcmxkIERhdGEgT2JqZWN0CiAgICAqCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdieWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJ5ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCdieWU6JywgX3RoaXMuaGVsbG9PYmp0UmVwb3J0ZXIpOwoKICAgICAgX3RoaXMuaGVsbG9PYmp0UmVwb3J0ZXIuZGF0YS5oZWxsbyA9ICJCeWUhISI7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSGVsbG9Xb3JsZFJlcG9ydGVyOwp9KCk7CgpmdW5jdGlvbiBhY3RpdmF0ZShoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pIHsKCiAgcmV0dXJuIHsKICAgIG5hbWU6ICdIZWxsb1dvcmxkUmVwb3J0ZXInLAogICAgaW5zdGFuY2U6IG5ldyBIZWxsb1dvcmxkUmVwb3J0ZXIoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKQogIH07Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvdXRpbHMiOjQsIi4vaGVsbG8iOjMsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlciI6MX1dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CgoKdmFyIGhlbGxvID0gewogIG5hbWU6ICJoZWxsbyIsCiAgaGVsbG86ICJIZWxsbyBXb3JsZCEhIgp9OwoKZXhwb3J0cy5kZWZhdWx0ID0gaGVsbG87Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kaXZpZGVVUkwgPSBkaXZpZGVVUkw7CmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOwpleHBvcnRzLmdldENvbmZpZyA9IGdldENvbmZpZzsKZXhwb3J0cy5nZXRVc2VyTWVkaWEgPSBnZXRVc2VyTWVkaWE7CmV4cG9ydHMuc2VyaWFsaXplID0gc2VyaWFsaXplOwpleHBvcnRzLmdldFRlbXBsYXRlID0gZ2V0VGVtcGxhdGU7Ci8qKgogKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoqLwoKLy8ganNoaW50IGJyb3dzZXI6dHJ1ZSwganF1ZXJ5OiB0cnVlCi8vIGpzaGludCB2YXJzdG10OiB0cnVlCi8qIGdsb2JhbCBIYW5kbGViYXJzICovCgovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwoKLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovCgovKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsKCiAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKICB2YXIgcmUgPSAvKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsKICB2YXIgc3Vic3QgPSAnJDEsJDIsJDMnOwogIHZhciBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTsKCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gcHJvdG9jb2wsIHRoZSBkZWZhdWx0IHByb3RvY29sIHNldCBpcyBodHRwcwogIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7CiAgICBwYXJ0c1swXSA9ICdodHRwcyc7CiAgICBwYXJ0c1sxXSA9IHVybDsKICB9CgogIHZhciByZXN1bHQgPSB7CiAgICB0eXBlOiBwYXJ0c1swXSwKICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICBpZGVudGl0eTogcGFydHNbMl0KICB9OwoKICByZXR1cm4gcmVzdWx0Owp9CgovKioKICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZAogKiBAcmV0dXJuIHtPYmplY3R9CiAqLwpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7CiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOwp9CgovKioKICogR2V0IHRoZSBjb25maWd1cmF0aW9uIGZyb20gYW4ganNvbiBmaWxlOwogKiBAcGFyYW0gIHtKU09OT2JqZWN0fSBqc29uRmlsZQogKiBAcmV0dXJuIHtvYmplY3R9CiAqLwpmdW5jdGlvbiBnZXRDb25maWcoSlNPTk9iamVjdCkgewogIGNvbnNvbGUubG9nKCdkZXZlbG9wJyk7CiAgcmV0dXJuIEpTT05PYmplY3RbJ2RldmVsb3AnXTsKfQoKLyoqCiAqIEdldCBXZWJSVEMgQVBJIHJlc291cmNlcwogKiBAcGFyYW0gIHtPYmplY3R9ICAgICBvcHRpb25zIE9iamVjdCBjb250YWluaW5nIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlc291cmNlcyB3aWxsIGJlIHVzZWQgKGNhbWVyYSwgbWljLCByZXNvbHV0aW9uLCBldGMpOwogKiBAcmV0dXJuIHtQcm9taXNlfQogKi8KZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKSB7CgogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oZnVuY3Rpb24gKG1lZGlhU3RyZWFtKSB7CiAgICAgIHJlc29sdmUobWVkaWFTdHJlYW0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICByZWplY3QocmVhc29uKTsKICAgIH0pOwogIH0pOwp9CgpmdW5jdGlvbiBzZXJpYWxpemUoKSB7CgogICQuZm4uc2VyaWFsaXplT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG8gPSB7fTsKICAgIHZhciBhID0gdGhpcy5zZXJpYWxpemVBcnJheSgpOwogICAgJC5lYWNoKGEsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0ucHVzaCkgewogICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07CiAgICAgICAgfQoKICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlIHx8ICcnOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbzsKICB9OwoKICAkLmZuLnNlcmlhbGl6ZU9iamVjdEFycmF5ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG8gPSB7fTsKICAgIHZhciBhID0gdGhpcy5zZXJpYWxpemVBcnJheSgpOwogICAgJC5lYWNoKGEsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0ucHVzaCkgewogICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07CiAgICAgICAgfQoKICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIW9bdGhpcy5uYW1lXSkgb1t0aGlzLm5hbWVdID0gW107CiAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSB8fCAnJyk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBvOwogIH07Cn0KCmZ1bmN0aW9uIGdldFRlbXBsYXRlKHBhdGgsIHNjcmlwdCkgewoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgIGlmIChIYW5kbGViYXJzLnRlbXBsYXRlcyA9PT0gdW5kZWZpbmVkIHx8IEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgSGFuZGxlYmFycy50ZW1wbGF0ZXMgPSB7fTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pOwogICAgfQoKICAgIHZhciB0ZW1wbGF0ZUZpbGUgPSAkLmFqYXgoewogICAgICB1cmw6IHBhdGggKyAnLmhicycsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkgewogICAgICAgIEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdID0gSGFuZGxlYmFycy5jb21waWxlKGRhdGEpOwogICAgICB9LAoKICAgICAgZmFpbDogZnVuY3Rpb24gZmFpbChyZWFzb24pIHsKICAgICAgICByZXR1cm4gcmVhc29uOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgc2NyaXB0RmlsZSA9ICQuZ2V0U2NyaXB0KHNjcmlwdCk7CgogICAgdmFyIHJlcXVlc3RzID0gW107CiAgICBpZiAocGF0aCkgcmVxdWVzdHMucHVzaCh0ZW1wbGF0ZUZpbGUpOwogICAgaWYgKHNjcmlwdCkgcmVxdWVzdHMucHVzaChzY3JpcHRGaWxlKTsKCiAgICBQcm9taXNlLmFsbChyZXF1ZXN0cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgIHJlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICByZWplY3QocmVhc29uKTsKICAgIH0pOwogIH0pOwp9Cgp9LHt9XX0se30sWzJdKSgyKQp9KTs=",
      "sourceCodeClassname": "HelloWorldReporter",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10003,
    "version": "0.1",
    "description": "Description of HelloWorldReporter",
    "objectName": "HelloWorldReporter",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "hypertyType": [
      "audio",
      "video"
    ]
  },
  "HypertyChat": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBEaXNjb3ZlcnkuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNSBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5EaXNjb3Zlcnk9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGE9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJmEpcmV0dXJuIGEocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLHUsZixsPWUmYy5GLGQ9ZSZjLkcscD1lJmMuUyx2PWUmYy5QLCQ9ZSZjLkIseT1lJmMuVyxoPWQ/bzpvW3RdfHwob1t0XT17fSksYj1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGEgaW4gcil1PSFsJiZiJiZhIGluIGIsdSYmYSBpbiBofHwoZj11P2JbYV06clthXSxoW2FdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW2FdP3JbYV06JCYmdT9pKGYsbik6eSYmYlthXT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTp2JiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6Zix2JiYoKGhbc118fChoW3NdPXt9KSlbYV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksYT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgZixsLGQscD1hKGUpLHY9bihyLHUsdD8yOjEpLCQ9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihmPWMoZS5sZW5ndGgpO2Y+JDskKyspdD92KHMobD1lWyRdKVswXSxsWzFdKTp2KGVbJF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEobD1kLm5leHQoKSkuZG9uZTspbyhkLHYsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksYT1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSx2PSJAQGl0ZXJhdG9yIiwkPSJrZXlzIix5PSJ2YWx1ZXMiLGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe3Uocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBVKXJldHVybiBVW2VdO3N3aXRjaChlKXtjYXNlICQ6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT15LE09ITEsVT1lLnByb3RvdHlwZSxQPVVbZF18fFVbdl18fG0mJlVbbV0sUz1QfHxfKG0pO2lmKFApe3ZhciBFPWwoUy5jYWxsKG5ldyBlKSk7ZihFLGssITApLCFuJiZjKFUsdikmJnMoRSxkLGgpLE8mJlAubmFtZSE9PXkmJihNPSEwLFM9ZnVuY3Rpb24oKXtyZXR1cm4gUC5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFwJiYhTSYmVVtkXXx8cyhVLGQsUyksYVt0XT1TLGFba109aCxtKWlmKGo9e3ZhbHVlczpPP1M6Xyh5KSxrZXlzOmc/UzpfKCQpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6U30seClmb3IodyBpbiBqKXcgaW4gVXx8aShVLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsYT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGEpe3ZhciBwPTEsdj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGEoZCkub2JzZXJ2ZSh2LHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe3YuZGF0YT1wPS1wfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksYT1uKHIpLHU9Yy5sZW5ndGg7cmV0dXJuIDA+YXx8YT49dT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQoYSksNTUyOTY+aXx8aT41NjMxOXx8YSsxPT09dXx8KHM9Yy5jaGFyQ29kZUF0KGErMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQoYSk6aTplP2Muc2xpY2UoYSxhKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksYT1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxkPWYuc2V0SW1tZWRpYXRlLHA9Zi5jbGVhckltbWVkaWF0ZSx2PWYuTWVzc2FnZUNoYW5uZWwsJD0wLHk9e30saD0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrKyRdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKCQpLCR9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OnY/KG89bmV3IHYsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49aCBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXthLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVtoXT1mdW5jdGlvbigpe2EucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLHY9ZSgiLi8kLmZvci1vZiIpLCQ9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksaD1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PWEoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gJChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLCQodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW2hdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxVPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFA9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sUz1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LEU9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLGE9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2EoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVUocikpP2kuY2FsbChyLGMsYSk6YyhyKSk6YShuKX1jYXRjaCh1KXthKHUpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO0wobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxMPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFMKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LFI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLEUodCwhMCkpfSxUPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVUoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKFQsbiwxKSxjKFIsbiwxKSl9Y2F0Y2gobyl7Ui5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLEUociwhMSkpfWNhdGNoKG4pe1IuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhULHQsMSksYyhSLHQsMSkpfWNhdGNoKHIpe1IuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFAoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJkUobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sdSh1LlMrdS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUCh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBQKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IFAodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UyhmdW5jdGlvbigpe3YoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUCh0KSxuPXIucmVqZWN0LG89UyhmdW5jdGlvbigpe3YoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsY1siZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBuPXRoaXM7bi5tZXNzYWdlQnVzPXIsbi5kb21haW49KDAsZi5kaXZpZGVVUkwpKHQpLmRvbWFpbixuLmRpc2NvdmVyeVVSTD10fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ZSxzZWFyY2g6ImRhdGFPYmplY3RQZXJVUkwifX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihyKXt2YXIgbj1yLmJvZHkudmFsdWU7bj9lKG4pOnQoIkRhdGFPYmplY3Qgbm90IGZvdW5kIil9KX0pfX0se2tleToiZGVsZXRlRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPXt0eXBlOiJkZWxldGUiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7dmFsdWU6e25hbWU6ZX19fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS5jb2RlOzIwMD09PW4/ZShuKTp0KCJFcnJvciBvbiBkZWxldGluZyBkYXRhT2JqZWN0Iil9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyUmVwb3J0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTplLHNlYXJjaDoiZGF0YU9iamVjdFBlclJlcG9ydGVyIn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlO24/ZShuKTp0KCJObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcyxzPXZvaWQgMCxjPSgwLGYuY29udmVydFRvVXNlclVSTCkoZSk7cz1uP246by5kb21haW47dmFyIGE9e3R5cGU6InJlYWQiLGZyb206by5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrcysiLyIsYm9keTp7cmVzb3VyY2U6e3VzZXI6YyxyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0fSxzZWFyY2g6Imh5cGVydHlSZXNvdXJjZXNEYXRhU2NoZW1lcyJ9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe28ubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZTtuP2Uobik6dCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydHlQZXJVc2VyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89InVzZXI6Ly8iK2Uuc3Vic3RyaW5nKGUuaW5kZXhPZigiQCIpKzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZigiQCIpKSxzPXt0eXBlOiJyZWFkIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK24rIi8iLGJvZHk6e3Jlc291cmNlOm8sc2VhcmNoOiJIeXBlcnR5UGVyVXNlciJ9fTtyZXR1cm4gY29uc29sZS5sb2coIk1lc3NhZ2U6ICIscyxuLG8pLG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24odCxuKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtjb25zb2xlLmxvZygibWVzc2FnZSByZXBseSIscik7dmFyIG89dm9pZCAwLGk9dm9pZCAwLHM9dm9pZCAwLGM9ci5ib2R5LnZhbHVlO2ZvcihvIGluIGMpaWYodm9pZCAwIT09Y1tvXS5sYXN0TW9kaWZpZWQpaWYodm9pZCAwPT09aSlpPW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKSxzPW87ZWxzZXt2YXIgYT1uZXcgRGF0ZShjW29dLmxhc3RNb2RpZmllZCk7aS5nZXRUaW1lKCk8YS5nZXRUaW1lKCkmJihpPWEscz1vKX1jb25zb2xlLmxvZygiTGFzdCBIeXBlcnR5OiAiLHMsaSk7dmFyIHU9cztpZih2b2lkIDA9PT11KXJldHVybiBuKCJVc2VyIEh5cGVydHkgbm90IGZvdW5kIik7dmFyIGY9e2lkOmUsZGVzY3JpcHRvcjpjW3VdLmRlc2NyaXB0b3IsaHlwZXJ0eVVSTDp1fTtjb25zb2xlLmxvZygiPT09PiBoeXBlcnR5RGlzY292ZXJ5IG1lc3NhZ2VCdW5kbGU6ICIsZiksdChmKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6byxzZWFyY2g6Ikh5cGVydHlQZXJVc2VyIn19O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXI6ICIscyxuLG8pLG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtjb25zb2xlLmxvZygiZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyIHJlcGx5IixyKTt2YXIgbj1yLmJvZHkudmFsdWU7cmV0dXJuIG4/dm9pZCBlKG4pOnQoIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKX0pfSl9fSx7a2V5OiJkZWxldGVIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxvPXZvaWQgMDtvPXI/cjpuLmRvbWFpbjt2YXIgcz17dHlwZToiZGVsZXRlIixmcm9tOm4uZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK28rIi8iLGJvZHk6e3ZhbHVlOnt1c2VyOmUsaHlwZXJ0eVVSTDp0fX19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LmNvZGU7bj9lKCJIeXBlcnR5IHN1Y2Nlc3NmdWxseSBkZWxldGVkIik6dCgiRXJyb3Igb24gZGVsZXRpbmcgaHlwZXJ0eSIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsdlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBhKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksdj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1hLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBIeXBlcnR5RGlzY292ZXJ5LmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MTYgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuSHlwZXJ0eURpc2NvdmVyeT1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYyl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgdT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYyYmdSlyZXR1cm4gdShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBhPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBhLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGF9dmFyIGY9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sZixmLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5Ijo3fV0sMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjh9XSwzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjo5fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjEwfV0sNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsaVsiZGVmYXVsdCJdKShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKX0seyIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjJ9XSw3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuKG4uSlNPTiYmbi5KU09OLnN0cmluZ2lmeXx8SlNPTi5zdHJpbmdpZnkpLmFwcGx5KEpTT04sYXJndW1lbnRzKX19LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2fV0sODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6Mzh9XSw5OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo2Mn1dLDEwOltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjoxNiwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6NjMsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjY0LCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjY1LCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjY2fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwxMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwxMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0IjozMX1dLDE0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MTUsIi4vJC53a3MiOjU5fV0sMTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwxNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDE3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjExfV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjIyfV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmN0eCIpLHM9InByb3RvdHlwZSIsYz1mdW5jdGlvbihlLHQscil7dmFyIHUsYSxmLGw9ZSZjLkYsZD1lJmMuRyxwPWUmYy5TLCQ9ZSZjLlAsdj1lJmMuQix5PWUmYy5XLGg9ZD9vOm9bdF18fChvW3RdPXt9KSxiPWQ/bjpwP25bdF06KG5bdF18fHt9KVtzXTtkJiYocj10KTtmb3IodSBpbiByKWE9IWwmJmImJnUgaW4gYixhJiZ1IGluIGh8fChmPWE/Ylt1XTpyW3VdLGhbdV09ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGJbdV0/clt1XTp2JiZhP2koZixuKTp5JiZiW3VdPT1mP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFtzXT1lW3NdLHR9KGYpOiQmJiJmdW5jdGlvbiI9PXR5cGVvZiBmP2koRnVuY3Rpb24uY2FsbCxmKTpmLCQmJigoaFtzXXx8KGhbc109e30pKVt1XT1mKSl9O2MuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsdC5leHBvcnRzPWN9LHsiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmdsb2JhbCI6MjR9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDIzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLG89ZSgiLi8kLml0ZXItY2FsbCIpLGk9ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxzPWUoIi4vJC5hbi1vYmplY3QiKSxjPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBmLGwsZCxwPXUoZSksJD1uKHIsYSx0PzI6MSksdj0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBwKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKGkocCkpZm9yKGY9YyhlLmxlbmd0aCk7Zj52O3YrKyl0PyQocyhsPWVbdl0pWzBdLGxbMV0pOiQoZVt2XSk7ZWxzZSBmb3IoZD1wLmNhbGwoZSk7IShsPWQubmV4dCgpKS5kb25lOylvKGQsJCxsLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1hcnJheS1pdGVyIjozMCwiLi8kLml0ZXItY2FsbCI6MzIsIi4vJC50by1sZW5ndGgiOjU2LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6NjB9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDI1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDI2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjozOCwiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLnByb3BlcnR5LWRlc2MiOjQyfV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6MjR9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sMjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjE1fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fGlbb109PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2goaSl7dmFyIHM9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09cyYmbihzLmNhbGwoZSkpLGl9fX0seyIuLyQuYW4tb2JqZWN0IjoxM31dLDMzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxpPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLHM9e307ZSgiLi8kLmhpZGUiKShzLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShzLHtuZXh0Om8oMSxyKX0pLGkoZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjozOCwiLi8kLmhpZGUiOjI2LCIuLyQucHJvcGVydHktZGVzYyI6NDIsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxvPWUoIi4vJC5leHBvcnQiKSxpPWUoIi4vJC5yZWRlZmluZSIpLHM9ZSgiLi8kLmhpZGUiKSxjPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxhPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksbD1lKCIuLyQiKS5nZXRQcm90byxkPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxwPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLCQ9IkBAaXRlcmF0b3IiLHY9ImtleXMiLHk9InZhbHVlcyIsaD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsYixtLGcseCl7YShyLHQsYik7dmFyIGosdyxfPWZ1bmN0aW9uKGUpe2lmKCFwJiZlIGluIFApcmV0dXJuIFBbZV07c3dpdGNoKGUpe2Nhc2UgdjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSB5OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGs9dCsiIEl0ZXJhdG9yIixPPW09PXksTT0hMSxQPWUucHJvdG90eXBlLFM9UFtkXXx8UFskXXx8bSYmUFttXSxFPVN8fF8obSk7aWYoUyl7dmFyIFU9bChFLmNhbGwobmV3IGUpKTtmKFUsaywhMCksIW4mJmMoUCwkKSYmcyhVLGQsaCksTyYmUy5uYW1lIT09eSYmKE09ITAsRT1mdW5jdGlvbigpe3JldHVybiBTLmNhbGwodGhpcyl9KX1pZihuJiYheHx8IXAmJiFNJiZQW2RdfHxzKFAsZCxFKSx1W3RdPUUsdVtrXT1oLG0paWYoaj17dmFsdWVzOk8/RTpfKHkpLGtleXM6Zz9FOl8odiksZW50cmllczpPP18oImVudHJpZXMiKTpFfSx4KWZvcih3IGluIGopdyBpbiBQfHxpKFAsdyxqW3ddKTtlbHNlIG8oby5QK28uRioocHx8TSksdCxqKTtyZXR1cm4gan19LHsiLi8kIjozOCwiLi8kLmV4cG9ydCI6MjEsIi4vJC5oYXMiOjI1LCIuLyQuaGlkZSI6MjYsIi4vJC5pdGVyLWNyZWF0ZSI6MzMsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQubGlicmFyeSI6MzksIi4vJC5yZWRlZmluZSI6NDQsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aVsicmV0dXJuIl09ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2gocyl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3I9ITB9LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChjKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjU5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sMzc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDM5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQudGFzayIpLnNldCx1PXMuTXV0YXRpb25PYnNlcnZlcnx8cy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGE9cy5wcm9jZXNzLGY9cy5Qcm9taXNlLGw9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYSksZD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IobCYmKGU9YS5kb21haW4pJiYoYS5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtvPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGwpaT1mdW5jdGlvbigpe2EubmV4dFRpY2soZCl9O2Vsc2UgaWYodSl7dmFyIHA9MSwkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShkKS5vYnNlcnZlKCQse2NoYXJhY3RlckRhdGE6ITB9KSxpPWZ1bmN0aW9uKCl7JC5kYXRhPXA9LXB9fWVsc2UgaT1mJiZmLnJlc29sdmU/ZnVuY3Rpb24oKXtmLnJlc29sdmUoKS50aGVuKGQpfTpmdW5jdGlvbigpe2MuY2FsbChzLGQpfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmwmJmEuZG9tYWlufTtvJiYoby5uZXh0PXQpLG58fChuPXQsaSgpKSxvPXR9fSx7Ii4vJC5jb2YiOjE1LCIuLyQuZ2xvYmFsIjoyNCwiLi8kLnRhc2siOjUzfV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxzPXt9O3NbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixzKX19LHsiLi8kLmNvcmUiOjE2LCIuLyQuZXhwb3J0IjoyMSwiLi8kLmZhaWxzIjoyMn1dLDQyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDQzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6NDR9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjoyNn1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxvPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5hbi1vYmplY3QiKSxzPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbyh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixvKXt0cnl7bz1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxvKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGkpe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSx0KSxyP2UuX19wcm90b19fPXQ6byhlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpzfX0seyIuLyQiOjM4LCIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1vYmplY3QiOjMxfV0sNDc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxvPWUoIi4vJCIpLGk9ZSgiLi8kLmRlc2NyaXB0b3JzIikscz1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtpJiZ0JiYhdFtzXSYmby5zZXREZXNjKHQscyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjM4LCIuLyQuY29yZSI6MTYsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC53a3MiOjU5fV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLG89ZSgiLi8kLmhhcyIpLGk9ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIW8oZT1yP2U6ZS5wcm90b3R5cGUsaSkmJm4oZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjM4LCIuLyQuaGFzIjoyNSwiLi8kLndrcyI6NTl9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPSJfX2NvcmUtanNfc2hhcmVkX18iLGk9bltvXXx8KG5bb109e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0seyIuLyQuZ2xvYmFsIjoyNH1dLDUwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLG89ZSgiLi8kLmEtZnVuY3Rpb24iKSxpPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC53a3MiOjU5fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGkscyxjPVN0cmluZyhvKHQpKSx1PW4ociksYT1jLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1hP2U/IiI6dm9pZCAwOihpPWMuY2hhckNvZGVBdCh1KSw1NTI5Nj5pfHxpPjU2MzE5fHx1KzE9PT1hfHwocz1jLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fHM+NTczNDM/ZT9jLmNoYXJBdCh1KTppOmU/Yy5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsocy01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQudG8taW50ZWdlciI6NTR9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYT1lKCIuLyQuZG9tLWNyZWF0ZSIpLGY9ZSgiLi8kLmdsb2JhbCIpLGw9Zi5wcm9jZXNzLGQ9Zi5zZXRJbW1lZGlhdGUscD1mLmNsZWFySW1tZWRpYXRlLCQ9Zi5NZXNzYWdlQ2hhbm5lbCx2PTAseT17fSxoPSJvbnJlYWR5c3RhdGVjaGFuZ2UiLGI9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZih5Lmhhc093blByb3BlcnR5KGUpKXt2YXIgdD15W2VdO2RlbGV0ZSB5W2VdLHQoKX19LG09ZnVuY3Rpb24oZSl7Yi5jYWxsKGUuZGF0YSl9O2QmJnB8fChkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiB5Wysrdl09ZnVuY3Rpb24oKXtjKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgeVtlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikobCk/bj1mdW5jdGlvbihlKXtsLm5leHRUaWNrKHMoYixlLDEpKX06JD8obz1uZXcgJCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9bSxuPXMoaS5wb3N0TWVzc2FnZSxpLDEpKTpmLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtmLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtLCExKSk6bj1oIGluIGEoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYSgic2NyaXB0IikpW2hdPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0seyIuLyQuY29mIjoxNSwiLi8kLmN0eCI6MTcsIi4vJC5kb20tY3JlYXRlIjoyMCwiLi8kLmdsb2JhbCI6MjQsIi4vJC5odG1sIjoyNywiLi8kLmludm9rZSI6Mjh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0Iiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQuaW9iamVjdCI6Mjl9XSw1NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjU0fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6MTh9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsbz1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24rbykudG9TdHJpbmcoMzYpKX19LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksbz1lKCIuLyQudWlkIiksaT1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aSYmaVtlXXx8KGl8fG8pKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuc2hhcmVkIjo0OSwiLi8kLnVpZCI6NTh9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLG89ZSgiLi8kLml0ZXItc3RlcCIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpLHM9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLGkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjoxMiwiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLml0ZXItc3RlcCI6MzYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQudG8taW9iamVjdCI6NTV9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjQxLCIuLyQudG8tb2JqZWN0Ijo1N31dLDYzOltmdW5jdGlvbihlLHQscil7fSx7fV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4sbz1lKCIuLyQiKSxpPWUoIi4vJC5saWJyYXJ5Iikscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQuY3R4IiksdT1lKCIuLyQuY2xhc3NvZiIpLGE9ZSgiLi8kLmV4cG9ydCIpLGY9ZSgiLi8kLmlzLW9iamVjdCIpLGw9ZSgiLi8kLmFuLW9iamVjdCIpLGQ9ZSgiLi8kLmEtZnVuY3Rpb24iKSxwPWUoIi4vJC5zdHJpY3QtbmV3IiksJD1lKCIuLyQuZm9yLW9mIiksdj1lKCIuLyQuc2V0LXByb3RvIikuc2V0LHk9ZSgiLi8kLnNhbWUtdmFsdWUiKSxoPWUoIi4vJC53a3MiKSgic3BlY2llcyIpLGI9ZSgiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiKSxtPWUoIi4vJC5taWNyb3Rhc2siKSxnPSJQcm9taXNlIix4PXMucHJvY2VzcyxqPSJwcm9jZXNzIj09dSh4KSx3PXNbZ10sXz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgdyhmdW5jdGlvbigpe30pO3JldHVybiBlJiYodC5jb25zdHJ1Y3Rvcj1PYmplY3QpLHcucmVzb2x2ZSh0KT09PXR9LGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPW5ldyB3KGUpO3JldHVybiB2KHIsdC5wcm90b3R5cGUpLHJ9dmFyIHI9ITE7dHJ5e2lmKHI9dyYmdy5yZXNvbHZlJiZfKCksdih0LHcpLHQucHJvdG90eXBlPW8uY3JlYXRlKHcucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dH19KSx0LnJlc29sdmUoNSkudGhlbihmdW5jdGlvbigpe30paW5zdGFuY2VvZiB0fHwocj0hMSksciYmZSgiLi8kLmRlc2NyaXB0b3JzIikpe3ZhciBuPSExO3cucmVzb2x2ZShvLnNldERlc2Moe30sInRoZW4iLHtnZXQ6ZnVuY3Rpb24oKXtuPSEwfX0pKSxyPW59fWNhdGNoKGkpe3I9ITF9cmV0dXJuIHJ9KCksTz1mdW5jdGlvbihlLHQpe3JldHVybiBpJiZlPT09dyYmdD09PW4/ITA6eShlLHQpfSxNPWZ1bmN0aW9uKGUpe3ZhciB0PWwoZSlbaF07cmV0dXJuIHZvaWQgMCE9dD90OmV9LFA9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGYoZSkmJiJmdW5jdGlvbiI9PXR5cGVvZih0PWUudGhlbik/dDohMX0sUz1mdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9ZCh0KSx0aGlzLnJlamVjdD1kKHIpfSxFPWZ1bmN0aW9uKGUpe3RyeXtlKCl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fX0sVT1mdW5jdGlvbihlLHQpe2lmKCFlLm4pe2Uubj0hMDt2YXIgcj1lLmM7bShmdW5jdGlvbigpe2Zvcih2YXIgbj1lLnYsbz0xPT1lLnMsaT0wLGM9ZnVuY3Rpb24odCl7dmFyIHIsaSxzPW8/dC5vazp0LmZhaWwsYz10LnJlc29sdmUsdT10LnJlamVjdDt0cnl7cz8ob3x8KGUuaD0hMCkscj1zPT09ITA/bjpzKG4pLHI9PT10LnByb21pc2U/dShUeXBlRXJyb3IoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KGk9UChyKSk/aS5jYWxsKHIsYyx1KTpjKHIpKTp1KG4pfWNhdGNoKGEpe3UoYSl9fTtyLmxlbmd0aD5pOyljKHJbaSsrXSk7ci5sZW5ndGg9MCxlLm49ITEsdCYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0LHIsbz1lLnA7VChvKSYmKGo/eC5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLG4sbyk6KHQ9cy5vbnVuaGFuZGxlZHJlamVjdGlvbik/dCh7cHJvbWlzZTpvLHJlYXNvbjpufSk6KHI9cy5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixuKSksZS5hPXZvaWQgMH0sMSl9KX19LFQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1lLl9kLG49ci5hfHxyLmMsbz0wO2lmKHIuaClyZXR1cm4hMTtmb3IoO24ubGVuZ3RoPm87KWlmKHQ9bltvKytdLHQuZmFpbHx8IVQodC5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sRD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuZHx8KHQuZD0hMCx0PXQucnx8dCx0LnY9ZSx0LnM9Mix0LmE9dC5jLnNsaWNlKCksVSh0LCEwKSl9LEE9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLmQpe3IuZD0hMCxyPXIucnx8cjt0cnl7aWYoci5wPT09ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9UChlKSk/bShmdW5jdGlvbigpe3ZhciBuPXtyOnIsZDohMX07dHJ5e3QuY2FsbChlLGMoQSxuLDEpLGMoRCxuLDEpKX1jYXRjaChvKXtELmNhbGwobixvKX19KTooci52PWUsci5zPTEsVShyLCExKSl9Y2F0Y2gobil7RC5jYWxsKHtyOnIsZDohMX0sbil9fX07a3x8KHc9ZnVuY3Rpb24oZSl7ZChlKTt2YXIgdD10aGlzLl9kPXtwOnAodGhpcyx3LGcpLGM6W10sYTp2b2lkIDAsczowLGQ6ITEsdjp2b2lkIDAsaDohMSxuOiExfTt0cnl7ZShjKEEsdCwxKSxjKEQsdCwxKSl9Y2F0Y2gocil7RC5jYWxsKHQscil9fSxlKCIuLyQucmVkZWZpbmUtYWxsIikody5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgUyhiKHRoaXMsdykpLG49ci5wcm9taXNlLG89dGhpcy5fZDtyZXR1cm4gci5vaz0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOiEwLHIuZmFpbD0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdCxvLmMucHVzaChyKSxvLmEmJm8uYS5wdXNoKHIpLG8ucyYmVShvLCExKSxufSwiY2F0Y2giOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pKSxhKGEuRythLlcrYS5GKiFrLHtQcm9taXNlOnd9KSxlKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSh3LGcpLGUoIi4vJC5zZXQtc3BlY2llcyIpKGcpLG49ZSgiLi8kLmNvcmUiKVtnXSxhKGEuUythLkYqIWssZyx7cmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZWplY3Q7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiooIWt8fF8oITApKSxnLHtyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiB3JiZPKGUuY29uc3RydWN0b3IsdGhpcykpcmV0dXJuIGU7dmFyIHQ9bmV3IFModGhpcykscj10LnJlc29sdmU7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiohKGsmJmUoIi4vJC5pdGVyLWRldGVjdCIpKGZ1bmN0aW9uKGUpe3cuYWxsKGUpWyJjYXRjaCJdKGZ1bmN0aW9uKCl7fSl9KSksZyx7YWxsOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUyh0KSxuPXIucmVzb2x2ZSxpPXIucmVqZWN0LHM9W10sYz1FKGZ1bmN0aW9uKCl7JChlLCExLHMucHVzaCxzKTt2YXIgcj1zLmxlbmd0aCxjPUFycmF5KHIpO3I/by5lYWNoLmNhbGwocyxmdW5jdGlvbihlLG8pe3ZhciBzPSExO3QucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3N8fChzPSEwLGNbb109ZSwtLXJ8fG4oYykpfSxpKX0pOm4oYyl9KTtyZXR1cm4gYyYmaShjLmVycm9yKSxyLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9TSh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZWplY3Qsbz1FKGZ1bmN0aW9uKCl7JChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8mJm4oby5lcnJvciksci5wcm9taXNlfX0pfSx7Ii4vJCI6MzgsIi4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jbGFzc29mIjoxNCwiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mb3Itb2YiOjIzLCIuLyQuZ2xvYmFsIjoyNCwiLi8kLmlzLW9iamVjdCI6MzEsIi4vJC5pdGVyLWRldGVjdCI6MzUsIi4vJC5saWJyYXJ5IjozOSwiLi8kLm1pY3JvdGFzayI6NDAsIi4vJC5yZWRlZmluZS1hbGwiOjQzLCIuLyQuc2FtZS12YWx1ZSI6NDUsIi4vJC5zZXQtcHJvdG8iOjQ2LCIuLyQuc2V0LXNwZWNpZXMiOjQ3LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciI6NTAsIi4vJC5zdHJpY3QtbmV3Ijo1MSwiLi8kLndrcyI6NTl9XSw2NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuc3RyaW5nLWF0IikoITApO2UoIi4vJC5pdGVyLWRlZmluZSIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LHI9dGhpcy5faTtyZXR1cm4gcj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1uKHQsciksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LHsiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLnN0cmluZy1hdCI6NTJ9XSw2NjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpO24uTm9kZUxpc3Q9bi5IVE1MQ29sbGVjdGlvbj1uLkFycmF5fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuL2VzNi5hcnJheS5pdGVyYXRvciI6NjF9XSw2NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCIuL2h5cGVydHktZGlzY292ZXJ5L0h5cGVydHlEaXNjb3ZlcnkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWlbImRlZmF1bHQiXSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vaHlwZXJ0eS1kaXNjb3ZlcnkvSHlwZXJ0eURpc2NvdmVyeSI6Njh9XSw2ODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGM9bihzKSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGE9bih1KSxmPWUoIi4uL3V0aWxzL3V0aWxzIiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG49dGhpcztuLm1lc3NhZ2VCdXM9cixuLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG4uZGlzY292ZXJ5VVJMPXR9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RQZXJOYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ImRhdGFPYmplY3Q6Ly8iK2V9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZS51cmw7bj9lKG4pOnQoIkRhdGFPYmplY3QgbmFtZSBkb2VzIG5vdCBleGlzdCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eVBlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6b319O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZTogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJtZXNzYWdlIHJlcGx5IixyKTt2YXIgbz12b2lkIDAsaT12b2lkIDAscz12b2lkIDAsYz1yLmJvZHkudmFsdWU7Zm9yKG8gaW4gYylpZih2b2lkIDAhPT1jW29dLmxhc3RNb2RpZmllZClpZih2b2lkIDA9PT1pKWk9bmV3IERhdGUoY1tvXS5sYXN0TW9kaWZpZWQpLHM9bztlbHNle3ZhciB1PW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKTtpLmdldFRpbWUoKTx1LmdldFRpbWUoKSYmKGk9dSxzPW8pfWNvbnNvbGUubG9nKCJMYXN0IEh5cGVydHk6ICIscyxpKTt2YXIgYT1zO2lmKHZvaWQgMD09PWEpcmV0dXJuIG4oIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKTt2YXIgZj17aWQ6ZSxkZXNjcmlwdG9yOmNbYV0uZGVzY3JpcHRvcixoeXBlcnR5VVJMOmF9O2NvbnNvbGUubG9nKCI9PT0+IGh5cGVydHlEaXNjb3ZlcnkgbWVzc2FnZUJ1bmRsZTogIixmKSx0KGYpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPSJ1c2VyOi8vIitlLnN1YnN0cmluZyhlLmluZGV4T2YoIkAiKSsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIkAiKSkscz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTpvfX07cmV0dXJuIGNvbnNvbGUubG9nKCJNZXNzYWdlIGRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcjogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIgcmVwbHkiLHIpO3ZhciBuPXIuYm9keS52YWx1ZTtyZXR1cm4gbj92b2lkIGUobik6dCgiVXNlciBIeXBlcnR5IG5vdCBmb3VuZCIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsJFsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiB1KGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gdShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksJD1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD11LHIuZ2V0VXNlckVtYWlsRnJvbVVSTD1hLHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBJZGVudGl0eU1hbmFnZXIuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNiBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5JZGVudGl0eU1hbmFnZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJnUpcmV0dXJuIHUocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgYT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgYS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixhfXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1LGEsZixsPWUmYy5GLHA9ZSZjLkcsZD1lJmMuUywkPWUmYy5QLHY9ZSZjLkIsaD1lJmMuVyx5PXA/bzpvW3RdfHwob1t0XT17fSksYj1wP246ZD9uW3RdOihuW3RdfHx7fSlbc107cCYmKHI9dCk7Zm9yKHUgaW4gcilhPSFsJiZiJiZ1IGluIGIsYSYmdSBpbiB5fHwoZj1hP2JbdV06clt1XSx5W3VdPXAmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW3VdP3JbdV06diYmYT9pKGYsbik6aCYmYlt1XT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTokJiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6ZiwkJiYoKHlbc118fCh5W3NdPXt9KSlbdV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksdT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgZixsLHAsZD11KGUpLCQ9bihyLGEsdD8yOjEpLHY9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKGQpKWZvcihmPWMoZS5sZW5ndGgpO2Y+djt2KyspdD8kKHMobD1lW3ZdKVswXSxsWzFdKTokKGVbdl0pO2Vsc2UgZm9yKHA9ZC5jYWxsKGUpOyEobD1wLm5leHQoKSkuZG9uZTspbyhwLCQsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksdT1lKCIuLyQuaXRlcmF0b3JzIiksYT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8scD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSwkPSJAQGl0ZXJhdG9yIix2PSJrZXlzIixoPSJ2YWx1ZXMiLHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe2Eocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighZCYmZSBpbiBTKXJldHVybiBTW2VdO3N3aXRjaChlKXtjYXNlIHY6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgaDpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT1oLE09ITEsUz1lLnByb3RvdHlwZSxFPVNbcF18fFNbJF18fG0mJlNbbV0sUD1FfHxfKG0pO2lmKEUpe3ZhciBUPWwoUC5jYWxsKG5ldyBlKSk7ZihULGssITApLCFuJiZjKFMsJCkmJnMoVCxwLHkpLE8mJkUubmFtZSE9PWgmJihNPSEwLFA9ZnVuY3Rpb24oKXtyZXR1cm4gRS5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFkJiYhTSYmU1twXXx8cyhTLHAsUCksdVt0XT1QLHVba109eSxtKWlmKGo9e3ZhbHVlczpPP1A6XyhoKSxrZXlzOmc/UDpfKHYpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6UH0seClmb3IodyBpbiBqKXcgaW4gU3x8aShTLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKGR8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsdT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGEpLHA9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPWEuZG9tYWluKSYmKGEuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXthLm5leHRUaWNrKHApfTtlbHNlIGlmKHUpe3ZhciBkPTEsJD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IHUocCkub2JzZXJ2ZSgkLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpeyQuZGF0YT1kPS1kfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihwKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxwKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZhLmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksdT1uKHIpLGE9Yy5sZW5ndGg7cmV0dXJuIDA+dXx8dT49YT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQodSksNTUyOTY+aXx8aT41NjMxOXx8dSsxPT09YXx8KHM9Yy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQodSk6aTplP2Muc2xpY2UodSx1KzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksdT1lKCIuLyQuaHRtbCIpLGE9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxwPWYuc2V0SW1tZWRpYXRlLGQ9Zi5jbGVhckltbWVkaWF0ZSwkPWYuTWVzc2FnZUNoYW5uZWwsdj0wLGg9e30seT0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoaC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9aFtlXTtkZWxldGUgaFtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtwJiZkfHwocD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gaFsrK3ZdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKHYpLHZ9LGQ9ZnVuY3Rpb24oZSl7ZGVsZXRlIGhbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OiQ/KG89bmV3ICQsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49eSBpbiBhKCJzY3JpcHQiKT9mdW5jdGlvbihlKXt1LmFwcGVuZENoaWxkKGEoInNjcmlwdCIpKVt5XT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OnAsY2xlYXI6ZH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLHU9ZSgiLi8kLmNsYXNzb2YiKSxhPWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxwPWUoIi4vJC5hLWZ1bmN0aW9uIiksZD1lKCIuLyQuc3RyaWN0LW5ldyIpLCQ9ZSgiLi8kLmZvci1vZiIpLHY9ZSgiLi8kLnNldC1wcm90byIpLnNldCxoPWUoIi4vJC5zYW1lLXZhbHVlIikseT1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PXUoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gdihyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLHYodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOmgoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW3ldO3JldHVybiB2b2lkIDAhPXQ/dDplfSxTPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LEU9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPXAodCksdGhpcy5yZWplY3Q9cChyKX0sUD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFQ9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLHU9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP3UoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVMocikpP2kuY2FsbChyLGMsdSk6YyhyKSk6dShuKX1jYXRjaChhKXt1KGEpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO1UobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxVPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFVKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFQodCwhMCkpfSxDPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVMoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKEMsbiwxKSxjKEEsbiwxKSl9Y2F0Y2gobyl7QS5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFQociwhMSkpfWNhdGNoKG4pe0EuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe3AoZSk7dmFyIHQ9dGhpcy5fZD17cDpkKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhDLHQsMSksYyhBLHQsMSkpfWNhdGNoKHIpe0EuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IEUoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlQobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksYShhLkcrYS5XK2EuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sYShhLlMrYS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRSh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBFKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IEUodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UChmdW5jdGlvbigpeyQoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgRSh0KSxuPXIucmVqZWN0LG89UChmdW5jdGlvbigpeyQoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksdT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4odSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG89dGhpcztvLm1lc3NhZ2VCdXM9bixvLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG8uaHlwZXJ0eVVSTD10LG8ucnVudGltZVVSTD1yfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwLG89ZT9lOiIuIjtuPXQ/dDpyLmh5cGVydHlVUkw7dmFyIHM9e3R5cGU6InJlYWQiLGZyb206bix0bzpyLnJ1bnRpbWVVUkwrIi9yZWdpc3RyeS8iLGJvZHk6e3Jlc291cmNlOm8sY3JpdGVyaWE6bn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnJlc291cmNlO24/ZShuKTp0KCJObyB1c2VyIHdhcyBub3QgZm91bmQiKX0pfSl9fV0pLGV9KCk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscyI6NjgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6Nn1dLDY4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlKXtpZighZSl0aHJvdyBFcnJvcigiVVJMIGlzIG5lZWRlZCB0byBzcGxpdCIpO3ZhciB0PS8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpLHI9IiQxLCQyLCQzIixuPWUucmVwbGFjZSh0LHIpLnNwbGl0KCIsIik7blswXT09PWUmJihuWzBdPSJodHRwcyIsblsxXT1lKTt2YXIgbz17dHlwZTpuWzBdLGRvbWFpbjpuWzFdLGlkZW50aXR5Om5bMl19O3JldHVybiBvfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIikscj17dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX07cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlKXtyZXR1cm4hKCgwLCRbImRlZmF1bHQiXSkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGU/SlNPTi5wYXJzZSgoMCxwWyJkZWZhdWx0Il0pKGUpKTp2b2lkIDB9ZnVuY3Rpb24gdShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX1mdW5jdGlvbiBhKGUpe3ZhciB0PW8oZSk7cmV0dXJuIHQuaWRlbnRpdHkucmVwbGFjZSgiLyIsIiIpKyJAIit0LmRvbWFpbn1mdW5jdGlvbiBmKGUpe2lmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PW8oZSk7aWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIHUoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBsPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSIpLHA9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLCQ9bihkKTtyLmRpdmlkZVVSTD1vLHIuZGl2aWRlRW1haWw9aSxyLmVtcHR5T2JqZWN0PXMsci5kZWVwQ2xvbmU9YyxyLmdldFVzZXJVUkxGcm9tRW1haWw9dSxyLmdldFVzZXJFbWFpbEZyb21VUkw9YSxyLmNvbnZlcnRUb1VzZXJVUkw9Zn0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiOjEsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6M31dfSx7fSxbNjddKSg2Nyl9KTsKCgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgU3luY2hlci5qcyAKLy8gdmVyc2lvbjogMC4zLjAKLy8gTGFzdCBidWlsZDogVGh1IEp1biAwOSAyMDE2IDEyOjI4OjI0IEdNVCswMTAwIChXRVNUKQoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlN5bmNoZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGEpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJmMpcmV0dXJuIGMocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBsPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGwsbC5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe09iamVjdC5vYnNlcnZlJiYhQXJyYXkub2JzZXJ2ZSYmZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIHI9ZS5nZXROb3RpZmllcixuPSJwZXJmb3JtQ2hhbmdlIixvPSJfb3JpZ2luYWwiLGk9InNwbGljZSIscz17cHVzaDpmdW5jdGlvbiBjKGUpe3ZhciB0PWFyZ3VtZW50cyxzPWNbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnMtdC5sZW5ndGgsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHVuc2hpZnQ6ZnVuY3Rpb24gdShlKXt2YXIgdD1hcmd1bWVudHMscz11W29dLmFwcGx5KHRoaXMsdCk7cmV0dXJuIHIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDowLGFkZGVkQ291bnQ6dC5sZW5ndGgscmVtb3ZlZDpbXX19KSxzfSxwb3A6ZnVuY3Rpb24gbCgpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9bFtvXS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmxlbmd0aCE9PWUmJnIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDp0aGlzLmxlbmd0aCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzaGlmdDpmdW5jdGlvbiBmKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1mW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDowLHJlbW92ZWQ6W3RdfX0sdGhpcyksdH0sc3BsaWNlOmZ1bmN0aW9uIGQoZSx0KXt2YXIgcz1hcmd1bWVudHMsYT1kW29dLmFwcGx5KHRoaXMscyk7cmV0dXJuKGEubGVuZ3RofHxzLmxlbmd0aD4yKSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OmUsYWRkZWRDb3VudDpzLmxlbmd0aC0yLHJlbW92ZWQ6YX19LHRoaXMpLGF9fTtmb3IodmFyIGEgaW4gcylzW2FdW29dPXQucHJvdG90eXBlW2FdLHQucHJvdG90eXBlW2FdPXNbYV07dC5vYnNlcnZlPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUub2JzZXJ2ZSh0LHIsWyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLGldKX0sdC51bm9ic2VydmU9ZS51bm9ic2VydmV9KE9iamVjdCxBcnJheSl9LHt9XSwyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IjoxN31dLDM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIjoxOH1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoxOX1dLDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjoyMH1dLDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjIxfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6MjJ9XSw4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjoyM31dLDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoyNH1dLDEwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjI1fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDEyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxpWyJkZWZhdWx0Il0pKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpfSx7Ii4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSI6NH1dLDEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbz0hMDtvOyl7dmFyIGk9ZSxzPXQsYT1yO289ITEsbnVsbD09PWkmJihpPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIGM9bihpLHMpO2lmKHZvaWQgMCE9PWMpe2lmKCJ2YWx1ZSJpbiBjKXJldHVybiBjLnZhbHVlO3ZhciB1PWMuZ2V0O2lmKHZvaWQgMD09PXUpcmV0dXJuO3JldHVybiB1LmNhbGwoYSl9dmFyIGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGkpO2lmKG51bGw9PT1sKXJldHVybjtlPWwsdD1zLHI9YSxvPSEwLGM9bD12b2lkIDB9fSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjV9XSwxNDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHQpO2UucHJvdG90eXBlPW4odCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihvP28oZSx0KTplLl9fcHJvdG9fXz10KX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjh9XSwxNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsaVsiZGVmYXVsdCJdKSh0KSkmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6dH19LHsiLi4vaGVscGVycy90eXBlb2YiOjE2fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmNvbnN0cnVjdG9yPT09bj8ic3ltYm9sIjp0eXBlb2YgZX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wiOjEwfV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4obi5KU09OJiZuLkpTT04uc3RyaW5naWZ5fHxKU09OLnN0cmluZ2lmeSkuYXBwbHkoSlNPTixhcmd1bWVudHMpfX0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzF9XSwxODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ2V0RGVzYyhlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjo4MX1dLDIxOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiI6ODJ9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6ODN9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LnNldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiOjg0fV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksZSgiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIiksZSgiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIiksZSgiLi4vbW9kdWxlcy9lczYucHJvbWlzZSIpLHQuZXhwb3J0cz1lKCIuLi9tb2R1bGVzLyQuY29yZSIpLlByb21pc2V9LHsiLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vbW9kdWxlcy9lczYucHJvbWlzZSI6ODYsIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6ODcsIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6ODl9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCIpLGUoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5TeW1ib2x9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIjo4OH1dLDI2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6NDl9XSwyOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjMwLCIuLyQud2tzIjo3OH1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoyNn1dLDMzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDM0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjozOH1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDM2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0S2V5cyhlKSxyPW4uZ2V0U3ltYm9scztpZihyKWZvcih2YXIgbyxpPXIoZSkscz1uLmlzRW51bSxhPTA7aS5sZW5ndGg+YTspcy5jYWxsKGUsbz1pW2ErK10pJiZ0LnB1c2gobyk7cmV0dXJuIHR9fSx7Ii4vJCI6NTZ9XSwzNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuY3R4Iikscz0icHJvdG90eXBlIixhPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyx1LGwsZj1lJmEuRixkPWUmYS5HLHA9ZSZhLlMsYj1lJmEuUCxoPWUmYS5CLHk9ZSZhLlcsdj1kP286b1t0XXx8KG9bdF09e30pLF89ZD9uOnA/blt0XTooblt0XXx8e30pW3NdO2QmJihyPXQpO2ZvcihjIGluIHIpdT0hZiYmXyYmYyBpbiBfLHUmJmMgaW4gdnx8KGw9dT9fW2NdOnJbY10sdltjXT1kJiYiZnVuY3Rpb24iIT10eXBlb2YgX1tjXT9yW2NdOmgmJnU/aShsLG4pOnkmJl9bY109PWw/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBlP25ldyBlKHQpOmUodCl9O3JldHVybiB0W3NdPWVbc10sdH0obCk6YiYmImZ1bmN0aW9uIj09dHlwZW9mIGw/aShGdW5jdGlvbi5jYWxsLGwpOmwsYiYmKCh2W3NdfHwodltzXT17fSkpW2NdPWwpKX07YS5GPTEsYS5HPTIsYS5TPTQsYS5QPTgsYS5CPTE2LGEuVz0zMix0LmV4cG9ydHM9YX0seyIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZ2xvYmFsIjo0MX1dLDM4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaCh0KXtyZXR1cm4hMH19fSx7fV0sMzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY3R4Iiksbz1lKCIuLyQuaXRlci1jYWxsIiksaT1lKCIuLyQuaXMtYXJyYXktaXRlciIpLHM9ZSgiLi8kLmFuLW9iamVjdCIpLGE9ZSgiLi8kLnRvLWxlbmd0aCIpLGM9ZSgiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdSl7dmFyIGwsZixkLHA9YyhlKSxiPW4ocix1LHQ/MjoxKSxoPTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHApdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgaXRlcmFibGUhIik7aWYoaShwKSlmb3IobD1hKGUubGVuZ3RoKTtsPmg7aCsrKXQ/YihzKGY9ZVtoXSlbMF0sZlsxXSk6YihlW2hdKTtlbHNlIGZvcihkPXAuY2FsbChlKTshKGY9ZC5uZXh0KCkpLmRvbmU7KW8oZCxiLGYudmFsdWUsdCl9fSx7Ii4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLWFycmF5LWl0ZXIiOjQ3LCIuLyQuaXRlci1jYWxsIjo1MCwiLi8kLnRvLWxlbmd0aCI6NzUsIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIjo3OX1dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKSxvPWUoIi4vJCIpLmdldE5hbWVzLGk9e30udG9TdHJpbmcscz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxhPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaCh0KXtyZXR1cm4gcy5zbGljZSgpfX07dC5leHBvcnRzLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gcyYmIltvYmplY3QgV2luZG93XSI9PWkuY2FsbChlKT9hKGUpOm8obihlKSl9fSx7Ii4vJCI6NTYsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPW4pfSx7fV0sNDI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jYWxsKGUsdCl9fSx7fV0sNDM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIik7dC5leHBvcnRzPWUoIi4vJC5kZXNjcmlwdG9ycyIpP2Z1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxvKDEscikpfTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGVbdF09cixlfX0seyIuLyQiOjU2LCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQucHJvcGVydHktZGVzYyI6NjF9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudH0seyIuLyQuZ2xvYmFsIjo0MX1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA9PT1yO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuP2UoKTplLmNhbGwocik7Y2FzZSAxOnJldHVybiBuP2UodFswXSk6ZS5jYWxsKHIsdFswXSk7Y2FzZSAyOnJldHVybiBuP2UodFswXSx0WzFdKTplLmNhbGwocix0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0sdFszXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0sdFszXSl9cmV0dXJuIGUuYXBwbHkocix0KX19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LHsiLi8kLmNvZiI6MzB9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw0ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIkFycmF5Ij09bihlKX19LHsiLi8kLmNvZiI6MzB9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/bnVsbCE9PWU6ImZ1bmN0aW9uIj09dHlwZW9mIGV9fSx7fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG8pe3RyeXtyZXR1cm4gbz90KG4ocilbMF0sclsxXSk6dChyKX1jYXRjaChpKXt2YXIgcz1lWyJyZXR1cm4iXTt0aHJvdyB2b2lkIDAhPT1zJiZuKHMuY2FsbChlKSksaX19fSx7Ii4vJC5hbi1vYmplY3QiOjI4fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpLGk9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikscz17fTtlKCIuLyQuaGlkZSIpKHMsZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4uY3JlYXRlKHMse25leHQ6bygxLHIpfSksaShlLHQrIiBJdGVyYXRvciIpfX0seyIuLyQiOjU2LCIuLyQuaGlkZSI6NDMsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQubGlicmFyeSIpLG89ZSgiLi8kLmV4cG9ydCIpLGk9ZSgiLi8kLnJlZGVmaW5lIikscz1lKCIuLyQuaGlkZSIpLGE9ZSgiLi8kLmhhcyIpLGM9ZSgiLi8kLml0ZXJhdG9ycyIpLHU9ZSgiLi8kLml0ZXItY3JlYXRlIiksbD1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxmPWUoIi4vJCIpLmdldFByb3RvLGQ9ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLHA9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSksYj0iQEBpdGVyYXRvciIsaD0ia2V5cyIseT0idmFsdWVzIix2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixfLGcsbSxqKXt1KHIsdCxfKTt2YXIgJCx3LE89ZnVuY3Rpb24oZSl7aWYoIXAmJmUgaW4gRSlyZXR1cm4gRVtlXTtzd2l0Y2goZSl7Y2FzZSBoOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfTtjYXNlIHk6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0saz10KyIgSXRlcmF0b3IiLHg9Zz09eSxDPSExLEU9ZS5wcm90b3R5cGUsUz1FW2RdfHxFW2JdfHxnJiZFW2ddLFQ9U3x8TyhnKTtpZihTKXt2YXIgUj1mKFQuY2FsbChuZXcgZSkpO2woUixrLCEwKSwhbiYmYShFLGIpJiZzKFIsZCx2KSx4JiZTLm5hbWUhPT15JiYoQz0hMCxUPWZ1bmN0aW9uKCl7cmV0dXJuIFMuY2FsbCh0aGlzKX0pfWlmKG4mJiFqfHwhcCYmIUMmJkVbZF18fHMoRSxkLFQpLGNbdF09VCxjW2tdPXYsZylpZigkPXt2YWx1ZXM6eD9UOk8oeSksa2V5czptP1Q6TyhoKSxlbnRyaWVzOng/TygiZW50cmllcyIpOlR9LGopZm9yKHcgaW4gJCl3IGluIEV8fGkoRSx3LCRbd10pO2Vsc2UgbyhvLlArby5GKihwfHxDKSx0LCQpO3JldHVybiAkfX0seyIuLyQiOjU2LCIuLyQuZXhwb3J0IjozNywiLi8kLmhhcyI6NDIsIi4vJC5oaWRlIjo0MywiLi8kLml0ZXItY3JlYXRlIjo1MSwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC5saWJyYXJ5Ijo1OCwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxvPSExO3RyeXt2YXIgaT1bN11bbl0oKTtpWyJyZXR1cm4iXT1mdW5jdGlvbigpe289ITB9LEFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChzKXt9dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgaT1bN10scz1pW25dKCk7cy5uZXh0PWZ1bmN0aW9uKCl7cj0hMH0saVtuXT1mdW5jdGlvbigpe3JldHVybiBzfSxlKGkpfWNhdGNoKGEpe31yZXR1cm4gcn19LHsiLi8kLndrcyI6Nzh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17fX0se31dLDU2OltmdW5jdGlvbihlLHQscil7dmFyIG49T2JqZWN0O3QuZXhwb3J0cz17Y3JlYXRlOm4uY3JlYXRlLGdldFByb3RvOm4uZ2V0UHJvdG90eXBlT2YsaXNFbnVtOnt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLGdldERlc2M6bi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Isc2V0RGVzYzpuLmRlZmluZVByb3BlcnR5LHNldERlc2NzOm4uZGVmaW5lUHJvcGVydGllcyxnZXRLZXlzOm4ua2V5cyxnZXROYW1lczpuLmdldE93blByb3BlcnR5TmFtZXMsZ2V0U3ltYm9sczpuLmdldE93blByb3BlcnR5U3ltYm9scyxlYWNoOltdLmZvckVhY2h9fSx7fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLGk9byhlKSxzPW4uZ2V0S2V5cyhpKSxhPXMubGVuZ3RoLGM9MDthPmM7KWlmKGlbcj1zW2MrK11dPT09dClyZXR1cm4gcn19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ITB9LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC50YXNrIikuc2V0LGM9cy5NdXRhdGlvbk9ic2VydmVyfHxzLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsdT1zLnByb2Nlc3MsbD1zLlByb21pc2UsZj0icHJvY2VzcyI9PWUoIi4vJC5jb2YiKSh1KSxkPWZ1bmN0aW9uKCl7dmFyIGUsdCxyO2ZvcihmJiYoZT11LmRvbWFpbikmJih1LmRvbWFpbj1udWxsLGUuZXhpdCgpKTtuOyl0PW4uZG9tYWluLHI9bi5mbix0JiZ0LmVudGVyKCkscigpLHQmJnQuZXhpdCgpLG49bi5uZXh0O289dm9pZCAwLGUmJmUuZW50ZXIoKX07aWYoZilpPWZ1bmN0aW9uKCl7dS5uZXh0VGljayhkKX07ZWxzZSBpZihjKXt2YXIgcD0xLGI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyBjKGQpLm9ic2VydmUoYix7Y2hhcmFjdGVyRGF0YTohMH0pLGk9ZnVuY3Rpb24oKXtiLmRhdGE9cD0tcH19ZWxzZSBpPWwmJmwucmVzb2x2ZT9mdW5jdGlvbigpe2wucmVzb2x2ZSgpLnRoZW4oZCl9OmZ1bmN0aW9uKCl7YS5jYWxsKHMsZCl9O3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD17Zm46ZSxuZXh0OnZvaWQgMCxkb21haW46ZiYmdS5kb21haW59O28mJihvLm5leHQ9dCksbnx8KG49dCxpKCkpLG89dH19LHsiLi8kLmNvZiI6MzAsIi4vJC5nbG9iYWwiOjQxLCIuLyQudGFzayI6NzJ9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5leHBvcnQiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuZmFpbHMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0seyIuLyQuY29yZSI6MzEsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSx7fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQucmVkZWZpbmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCluKGUscix0W3JdKTtyZXR1cm4gZX19LHsiLi8kLnJlZGVmaW5lIjo2M31dLDYzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5oaWRlIil9LHsiLi8kLmhpZGUiOjQzfV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9T2JqZWN0LmlzfHxmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dD8wIT09ZXx8MS9lPT09MS90OmUhPWUmJnQhPXR9fSx7fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5nZXREZXNjLG89ZSgiLi8kLmlzLW9iamVjdCIpLGk9ZSgiLi8kLmFuLW9iamVjdCIpLHM9ZnVuY3Rpb24oZSx0KXtpZihpKGUpLCFvKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IodCsiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/ZnVuY3Rpb24odCxyLG8pe3RyeXtvPWUoIi4vJC5jdHgiKShGdW5jdGlvbi5jYWxsLG4oT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG8odCxbXSkscj0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goaSl7cj0hMH1yZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyhlLHQpLHI/ZS5fX3Byb3RvX189dDpvKGUsdCksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOnN9fSx7Ii4vJCI6NTYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLW9iamVjdCI6NDl9XSw2NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuY29yZSIpLG89ZSgiLi8kIiksaT1lKCIuLyQuZGVzY3JpcHRvcnMiKSxzPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uW2VdO2kmJnQmJiF0W3NdJiZvLnNldERlc2ModCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSx7Ii4vJCI6NTYsIi4vJC5jb3JlIjozMSwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLndrcyI6Nzh9XSw2NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLnNldERlc2Msbz1lKCIuLyQuaGFzIiksaT1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhbyhlPXI/ZTplLnByb3RvdHlwZSxpKSYmbihlLGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSx7Ii4vJCI6NTYsIi4vJC5oYXMiOjQyLCIuLyQud2tzIjo3OH1dLDY4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89Il9fY29yZS1qc19zaGFyZWRfXyIsaT1uW29dfHwobltvXT17fSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfHwoaVtlXT17fSl9fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iiksbz1lKCIuLyQuYS1mdW5jdGlvbiIpLGk9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1uKGUpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1zfHx2b2lkIDA9PShyPW4ocylbaV0pP3Q6byhyKX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLndrcyI6Nzh9XSw3MDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgVHlwZUVycm9yKHIrIjogdXNlIHRoZSAnbmV3JyBvcGVyYXRvciEiKTtyZXR1cm4gZX19LHt9XSw3MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxzLGE9U3RyaW5nKG8odCkpLGM9bihyKSx1PWEubGVuZ3RoO3JldHVybiAwPmN8fGM+PXU/ZT8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KGMpLDU1Mjk2Pml8fGk+NTYzMTl8fGMrMT09PXV8fChzPWEuY2hhckNvZGVBdChjKzEpKTw1NjMyMHx8cz41NzM0Mz9lP2EuY2hhckF0KGMpOmk6ZT9hLnNsaWNlKGMsYysyKTooaS01NTI5Njw8MTApKyhzLTU2MzIwKSs2NTUzNil9fX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC50by1pbnRlZ2VyIjo3M31dLDcyOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmludm9rZSIpLGM9ZSgiLi8kLmh0bWwiKSx1PWUoIi4vJC5kb20tY3JlYXRlIiksbD1lKCIuLyQuZ2xvYmFsIiksZj1sLnByb2Nlc3MsZD1sLnNldEltbWVkaWF0ZSxwPWwuY2xlYXJJbW1lZGlhdGUsYj1sLk1lc3NhZ2VDaGFubmVsLGg9MCx5PXt9LHY9Im9ucmVhZHlzdGF0ZWNoYW5nZSIsXz1mdW5jdGlvbigpe3ZhciBlPSt0aGlzO2lmKHkuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PXlbZV07ZGVsZXRlIHlbZV0sdCgpfX0sZz1mdW5jdGlvbihlKXtfLmNhbGwoZS5kYXRhKX07ZCYmcHx8KGQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIHlbKytoXT1mdW5jdGlvbigpe2EoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSx0KX0sbihoKSxofSxwPWZ1bmN0aW9uKGUpe2RlbGV0ZSB5W2VdfSwicHJvY2VzcyI9PWUoIi4vJC5jb2YiKShmKT9uPWZ1bmN0aW9uKGUpe2YubmV4dFRpY2socyhfLGUsMSkpfTpiPyhvPW5ldyBiLGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1nLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmwuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhbC5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2wucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxsLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGcsITEpKTpuPXYgaW4gdSgic2NyaXB0Iik/ZnVuY3Rpb24oZSl7Yy5hcHBlbmRDaGlsZCh1KCJzY3JpcHQiKSlbdl09ZnVuY3Rpb24oKXtjLnJlbW92ZUNoaWxkKHRoaXMpLF8uY2FsbChlKX19OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQocyhfLGUsMSksMCl9KSx0LmV4cG9ydHM9e3NldDpkLGNsZWFyOnB9fSx7Ii4vJC5jb2YiOjMwLCIuLyQuY3R4IjozMiwiLi8kLmRvbS1jcmVhdGUiOjM1LCIuLyQuZ2xvYmFsIjo0MSwiLi8kLmh0bWwiOjQ0LCIuLyQuaW52b2tlIjo0NX1dLDczOltmdW5jdGlvbihlLHQscil7dmFyIG49TWF0aC5jZWlsLG89TWF0aC5mbG9vcjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9vOm4pKGUpfX0se31dLDc0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlvYmplY3QiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC5pb2JqZWN0Ijo0Nn1dLDc1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP28obihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0seyIuLyQudG8taW50ZWdlciI6NzN9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSx7Ii4vJC5kZWZpbmVkIjozM31dLDc3OltmdW5jdGlvbihlLHQscil7dmFyIG49MCxvPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrbitvKS50b1N0cmluZygzNikpfX0se31dLDc4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnNoYXJlZCIpKCJ3a3MiKSxvPWUoIi4vJC51aWQiKSxpPWUoIi4vJC5nbG9iYWwiKS5TeW1ib2w7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1pJiZpW2VdfHwoaXx8bykoIlN5bWJvbC4iK2UpKX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5zaGFyZWQiOjY4LCIuLyQudWlkIjo3N31dLDc5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNsYXNzb2YiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKTt0LmV4cG9ydHM9ZSgiLi8kLmNvcmUiKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT1lP2Vbb118fGVbIkBAaXRlcmF0b3IiXXx8aVtuKGUpXTp2b2lkIDB9fSx7Ii4vJC5jbGFzc29mIjoyOSwiLi8kLmNvcmUiOjMxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw4MDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIiksbz1lKCIuLyQuaXRlci1zdGVwIiksaT1lKCIuLyQuaXRlcmF0b3JzIikscz1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1lKCIuLyQuaXRlci1kZWZpbmUiKShBcnJheSwiQXJyYXkiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD1zKGUpLHRoaXMuX2k9MCx0aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2sscj10aGlzLl9pKys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKToia2V5cyI9PXQ/bygwLHIpOiJ2YWx1ZXMiPT10P28oMCxlW3JdKTpvKDAsW3IsZVtyXV0pfSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxuKCJrZXlzIiksbigidmFsdWVzIiksbigiZW50cmllcyIpfSx7Ii4vJC5hZGQtdG8tdW5zY29wYWJsZXMiOjI3LCIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuaXRlci1zdGVwIjo1NCwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlKG4odCkscil9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8taW9iamVjdCI6NzR9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo2MCwiLi8kLnRvLW9iamVjdCI6NzZ9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDg0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjplKCIuLyQuc2V0LXByb3RvIikuc2V0fSl9LHsiLi8kLmV4cG9ydCI6MzcsIi4vJC5zZXQtcHJvdG8iOjY1fV0sODU6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSw4NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPWUoIi4vJCIpLGk9ZSgiLi8kLmxpYnJhcnkiKSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5jbGFzc29mIiksdT1lKCIuLyQuZXhwb3J0IiksbD1lKCIuLyQuaXMtb2JqZWN0IiksZj1lKCIuLyQuYW4tb2JqZWN0IiksZD1lKCIuLyQuYS1mdW5jdGlvbiIpLHA9ZSgiLi8kLnN0cmljdC1uZXciKSxiPWUoIi4vJC5mb3Itb2YiKSxoPWUoIi4vJC5zZXQtcHJvdG8iKS5zZXQseT1lKCIuLyQuc2FtZS12YWx1ZSIpLHY9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIiksXz1lKCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciIpLGc9ZSgiLi8kLm1pY3JvdGFzayIpLG09IlByb21pc2UiLGo9cy5wcm9jZXNzLCQ9InByb2Nlc3MiPT1jKGopLHc9c1ttXSxPPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB3KGZ1bmN0aW9uKCl7fSk7cmV0dXJuIGUmJih0LmNvbnN0cnVjdG9yPU9iamVjdCksdy5yZXNvbHZlKHQpPT09dH0saz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9bmV3IHcoZSk7cmV0dXJuIGgocix0LnByb3RvdHlwZSkscn12YXIgcj0hMTt0cnl7aWYocj13JiZ3LnJlc29sdmUmJk8oKSxoKHQsdyksdC5wcm90b3R5cGU9by5jcmVhdGUody5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0fX0pLHQucmVzb2x2ZSg1KS50aGVuKGZ1bmN0aW9uKCl7fSlpbnN0YW5jZW9mIHR8fChyPSExKSxyJiZlKCIuLyQuZGVzY3JpcHRvcnMiKSl7dmFyIG49ITE7dy5yZXNvbHZlKG8uc2V0RGVzYyh7fSwidGhlbiIse2dldDpmdW5jdGlvbigpe249ITB9fSkpLHI9bn19Y2F0Y2goaSl7cj0hMX1yZXR1cm4gcn0oKSx4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkmJmU9PT13JiZ0PT09bj8hMDp5KGUsdCl9LEM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZihlKVt2XTtyZXR1cm4gdm9pZCAwIT10P3Q6ZX0sRT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbChlKSYmImZ1bmN0aW9uIj09dHlwZW9mKHQ9ZS50aGVuKT90OiExfSxTPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1kKHQpLHRoaXMucmVqZWN0PWQocil9LFQ9ZnVuY3Rpb24oZSl7dHJ5e2UoKX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSxSPWZ1bmN0aW9uKGUsdCl7aWYoIWUubil7ZS5uPSEwO3ZhciByPWUuYztnKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUudixvPTE9PWUucyxpPTAsYT1mdW5jdGlvbih0KXt2YXIgcixpLHM9bz90Lm9rOnQuZmFpbCxhPXQucmVzb2x2ZSxjPXQucmVqZWN0O3RyeXtzPyhvfHwoZS5oPSEwKSxyPXM9PT0hMD9uOnMobikscj09PXQucHJvbWlzZT9jKFR5cGVFcnJvcigiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1FKHIpKT9pLmNhbGwocixhLGMpOmEocikpOmMobil9Y2F0Y2godSl7Yyh1KX19O3IubGVuZ3RoPmk7KWEocltpKytdKTtyLmxlbmd0aD0wLGUubj0hMSx0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQscixvPWUucDtNKG8pJiYoJD9qLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbixvKToodD1zLm9udW5oYW5kbGVkcmVqZWN0aW9uKT90KHtwcm9taXNlOm8scmVhc29uOm59KToocj1zLmNvbnNvbGUpJiZyLmVycm9yJiZyLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG4pKSxlLmE9dm9pZCAwfSwxKX0pfX0sTT1mdW5jdGlvbihlKXt2YXIgdCxyPWUuX2Qsbj1yLmF8fHIuYyxvPTA7aWYoci5oKXJldHVybiExO2Zvcig7bi5sZW5ndGg+bzspaWYodD1uW28rK10sdC5mYWlsfHwhTSh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxEPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5kfHwodC5kPSEwLHQ9dC5yfHx0LHQudj1lLHQucz0yLHQuYT10LmMuc2xpY2UoKSxSKHQsITApKX0sTj1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuZCl7ci5kPSEwLHI9ci5yfHxyO3RyeXtpZihyLnA9PT1lKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1FKGUpKT9nKGZ1bmN0aW9uKCl7dmFyIG49e3I6cixkOiExfTt0cnl7dC5jYWxsKGUsYShOLG4sMSksYShELG4sMSkpfWNhdGNoKG8pe0QuY2FsbChuLG8pfX0pOihyLnY9ZSxyLnM9MSxSKHIsITEpKX1jYXRjaChuKXtELmNhbGwoe3I6cixkOiExfSxuKX19fTtrfHwodz1mdW5jdGlvbihlKXtkKGUpO3ZhciB0PXRoaXMuX2Q9e3A6cCh0aGlzLHcsbSksYzpbXSxhOnZvaWQgMCxzOjAsZDohMSx2OnZvaWQgMCxoOiExLG46ITF9O3RyeXtlKGEoTix0LDEpLGEoRCx0LDEpKX1jYXRjaChyKXtELmNhbGwodCxyKX19LGUoIi4vJC5yZWRlZmluZS1hbGwiKSh3LnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBTKF8odGhpcyx3KSksbj1yLnByb21pc2Usbz10aGlzLl9kO3JldHVybiByLm9rPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ITAsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LG8uYy5wdXNoKHIpLG8uYSYmby5hLnB1c2gociksby5zJiZSKG8sITEpLG59LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSkpLHUodS5HK3UuVyt1LkYqIWsse1Byb21pc2U6d30pLGUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpKHcsbSksZSgiLi8kLnNldC1zcGVjaWVzIikobSksbj1lKCIuLyQuY29yZSIpW21dLHUodS5TK3UuRiohayxtLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFModGhpcykscj10LnJlamVjdDtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKigha3x8TyghMCkpLG0se3Jlc29sdmU6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHcmJngoZS5jb25zdHJ1Y3Rvcix0aGlzKSlyZXR1cm4gZTt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVzb2x2ZTtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKiEoayYmZSgiLi8kLml0ZXItZGV0ZWN0IikoZnVuY3Rpb24oZSl7dy5hbGwoZSlbImNhdGNoIl0oZnVuY3Rpb24oKXt9KX0pKSxtLHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9Qyh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qscz1bXSxhPVQoZnVuY3Rpb24oKXtiKGUsITEscy5wdXNoLHMpO3ZhciByPXMubGVuZ3RoLGE9QXJyYXkocik7cj9vLmVhY2guY2FsbChzLGZ1bmN0aW9uKGUsbyl7dmFyIHM9ITE7dC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHM9ITAsYVtvXT1lLC0tcnx8bihhKSl9LGkpfSk6bihhKX0pO3JldHVybiBhJiZpKGEuZXJyb3IpLHIucHJvbWlzZX0scmFjZTpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlamVjdCxvPVQoZnVuY3Rpb24oKXtiKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gbyYmbihvLmVycm9yKSxyLnByb21pc2V9fSl9LHsiLi8kIjo1NiwiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQuZXhwb3J0IjozNywiLi8kLmZvci1vZiI6MzksIi4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OSwiLi8kLml0ZXItZGV0ZWN0Ijo1MywiLi8kLmxpYnJhcnkiOjU4LCIuLyQubWljcm90YXNrIjo1OSwiLi8kLnJlZGVmaW5lLWFsbCI6NjIsIi4vJC5zYW1lLXZhbHVlIjo2NCwiLi8kLnNldC1wcm90byI6NjUsIi4vJC5zZXQtc3BlY2llcyI6NjYsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIjo2OSwiLi8kLnN0cmljdC1uZXciOjcwLCIuLyQud2tzIjo3OH1dLDg3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5zdHJpbmctYXQiKSghMCk7ZSgiLi8kLml0ZXItZGVmaW5lIikoU3RyaW5nLCJTdHJpbmciLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0seyIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuc3RyaW5nLWF0Ijo3MX1dLDg4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLmdsb2JhbCIpLGk9ZSgiLi8kLmhhcyIpLHM9ZSgiLi8kLmRlc2NyaXB0b3JzIiksYT1lKCIuLyQuZXhwb3J0IiksYz1lKCIuLyQucmVkZWZpbmUiKSx1PWUoIi4vJC5mYWlscyIpLGw9ZSgiLi8kLnNoYXJlZCIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZD1lKCIuLyQudWlkIikscD1lKCIuLyQud2tzIiksYj1lKCIuLyQua2V5b2YiKSxoPWUoIi4vJC5nZXQtbmFtZXMiKSx5PWUoIi4vJC5lbnVtLWtleXMiKSx2PWUoIi4vJC5pcy1hcnJheSIpLF89ZSgiLi8kLmFuLW9iamVjdCIpLGc9ZSgiLi8kLnRvLWlvYmplY3QiKSxtPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaj1uLmdldERlc2MsJD1uLnNldERlc2Msdz1uLmNyZWF0ZSxPPWguZ2V0LGs9by5TeW1ib2wseD1vLkpTT04sQz14JiZ4LnN0cmluZ2lmeSxFPSExLFM9cCgiX2hpZGRlbiIpLFQ9bi5pc0VudW0sUj1sKCJzeW1ib2wtcmVnaXN0cnkiKSxNPWwoInN5bWJvbHMiKSxEPSJmdW5jdGlvbiI9PXR5cGVvZiBrLE49T2JqZWN0LnByb3RvdHlwZSxQPXMmJnUoZnVuY3Rpb24oKXtyZXR1cm4gNyE9dygkKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWooTix0KTtuJiZkZWxldGUgTlt0XSwkKGUsdCxyKSxuJiZlIT09TiYmJChOLHQsbil9OiQsQT1mdW5jdGlvbihlKXt2YXIgdD1NW2VdPXcoay5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUscyYmRSYmUChOLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZnVuY3Rpb24odCl7aSh0aGlzLFMpJiZpKHRoaXNbU10sZSkmJih0aGlzW1NdW2VdPSExKSxQKHRoaXMsZSxtKDEsdCkpfX0pLHR9LEw9ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfSxGPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gciYmaShNLHQpPyhyLmVudW1lcmFibGU/KGkoZSxTKSYmZVtTXVt0XSYmKGVbU11bdF09ITEpLHI9dyhyLHtlbnVtZXJhYmxlOm0oMCwhMSl9KSk6KGkoZSxTKXx8JChlLFMsbSgxLHt9KSksZVtTXVt0XT0hMCksUChlLHQscikpOiQoZSx0LHIpfSxJPWZ1bmN0aW9uKGUsdCl7XyhlKTtmb3IodmFyIHIsbj15KHQ9Zyh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylGKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LFY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD93KGUpOkkodyhlKSx0KX0sVT1mdW5jdGlvbihlKXt2YXIgdD1ULmNhbGwodGhpcyxlKTtyZXR1cm4gdHx8IWkodGhpcyxlKXx8IWkoTSxlKXx8aSh0aGlzLFMpJiZ0aGlzW1NdW2VdP3Q6ITB9LHo9ZnVuY3Rpb24oZSx0KXt2YXIgcj1qKGU9ZyhlKSx0KTtyZXR1cm4hcnx8IWkoTSx0KXx8aShlLFMpJiZlW1NdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfSxIPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKXx8dD09U3x8bi5wdXNoKHQpO3JldHVybiBufSxCPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKSYmbi5wdXNoKE1bdF0pO3JldHVybiBufSxKPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFMKGUpKXtmb3IodmFyIHQscixuPVtlXSxvPTEsaT1hcmd1bWVudHM7aS5sZW5ndGg+bzspbi5wdXNoKGlbbysrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksIXImJnYodCl8fCh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLEwodCk/dm9pZCAwOnR9KSxuWzFdPXQsQy5hcHBseSh4LG4pfX0sVz11KGZ1bmN0aW9uKCl7dmFyIGU9aygpO3JldHVybiJbbnVsbF0iIT1DKFtlXSl8fCJ7fSIhPUMoe2E6ZX0pfHwie30iIT1DKE9iamVjdChlKSl9KTtEfHwoaz1mdW5jdGlvbigpe2lmKEwodGhpcykpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IiKTtyZXR1cm4gQShkKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSl9LGMoay5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksTD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGt9LG4uY3JlYXRlPVYsbi5pc0VudW09VSxuLmdldERlc2M9eixuLnNldERlc2M9RixuLnNldERlc2NzPUksbi5nZXROYW1lcz1oLmdldD1ILG4uZ2V0U3ltYm9scz1CLHMmJiFlKCIuLyQubGlicmFyeSIpJiZjKE4sInByb3BlcnR5SXNFbnVtZXJhYmxlIixVLCEwKSk7dmFyIFk9eyJmb3IiOmZ1bmN0aW9uKGUpe3JldHVybiBpKFIsZSs9IiIpP1JbZV06UltlXT1rKGUpfSxrZXlGb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGIoUixlKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7RT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7RT0hMX19O24uZWFjaC5jYWxsKCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxmdW5jdGlvbihlKXt2YXIgdD1wKGUpO1lbZV09RD90OkEodCl9KSxFPSEwLGEoYS5HK2EuVyx7U3ltYm9sOmt9KSxhKGEuUywiU3ltYm9sIixZKSxhKGEuUythLkYqIUQsIk9iamVjdCIse2NyZWF0ZTpWLGRlZmluZVByb3BlcnR5OkYsZGVmaW5lUHJvcGVydGllczpJLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjp6LGdldE93blByb3BlcnR5TmFtZXM6SCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Qn0pLHgmJmEoYS5TK2EuRiooIUR8fFcpLCJKU09OIix7c3RyaW5naWZ5Okp9KSxmKGssIlN5bWJvbCIpLGYoTWF0aCwiTWF0aCIsITApLGYoby5KU09OLCJKU09OIiwhMCl9LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5lbnVtLWtleXMiOjM2LCIuLyQuZXhwb3J0IjozNywiLi8kLmZhaWxzIjozOCwiLi8kLmdldC1uYW1lcyI6NDAsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaGFzIjo0MiwiLi8kLmlzLWFycmF5Ijo0OCwiLi8kLmtleW9mIjo1NywiLi8kLmxpYnJhcnkiOjU4LCIuLyQucHJvcGVydHktZGVzYyI6NjEsIi4vJC5yZWRlZmluZSI6NjMsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zaGFyZWQiOjY4LCIuLyQudG8taW9iamVjdCI6NzQsIi4vJC51aWQiOjc3LCIuLyQud2tzIjo3OH1dLDg5OltmdW5jdGlvbihlLHQscil7ZSgiLi9lczYuYXJyYXkuaXRlcmF0b3IiKTt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIik7bi5Ob2RlTGlzdD1uLkhUTUxDb2xsZWN0aW9uPW4uQXJyYXl9LHsiLi8kLml0ZXJhdG9ycyI6NTUsIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjo4MH1dLDkwOltmdW5jdGlvbihlLHQscil7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZz1bXSx0aGlzLms9ZX1mdW5jdGlvbiByKGUpeyFmdW5jdGlvbiByKCl7dmFyIG49ZS50YWtlUmVjb3JkcygpO24ubGVuZ3RoJiZlLmsobixlKSxlLmY9c2V0VGltZW91dChyLHQuX3BlcmlvZCl9KCl9ZnVuY3Rpb24gbih0KXt2YXIgcixuPXt0eXBlOm51bGwsdGFyZ2V0Om51bGwsYWRkZWROb2RlczpbXSxyZW1vdmVkTm9kZXM6W10scHJldmlvdXNTaWJsaW5nOm51bGwsbmV4dFNpYmxpbmc6bnVsbCxhdHRyaWJ1dGVOYW1lOm51bGwsYXR0cmlidXRlTmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bnVsbH07Zm9yKHIgaW4gdCluW3JdIT09ZSYmdFtyXSE9PWUmJihuW3JdPXRbcl0pO3JldHVybiBufWZ1bmN0aW9uIG8oZSx0KXt2YXIgcj1hKGUsdCk7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvLGM9bi5sZW5ndGg7dC5hJiZyLmEmJmkobixlLHIuYSx0LmQpLCh0LmJ8fHQuZSkmJihvPXMobixlLHIsdCkpLChvfHxuLmxlbmd0aCE9PWMpJiYocj1hKGUsdCkpfX1mdW5jdGlvbiBpKHQscixvLGkpe2Zvcih2YXIgcyxhLGM9e30sdT1yLmF0dHJpYnV0ZXMsbD11Lmxlbmd0aDtsLS07KXM9dVtsXSxhPXMubmFtZSxpJiZpW2FdPT09ZXx8KHMudmFsdWUhPT1vW2FdJiZ0LnB1c2gobih7dHlwZToiYXR0cmlidXRlcyIsdGFyZ2V0OnIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV0sYXR0cmlidXRlTmFtZXNwYWNlOnMubmFtZXNwYWNlVVJJfSkpLGNbYV09ITApO2ZvcihhIGluIG8pY1thXXx8dC5wdXNoKG4oe3RhcmdldDpyLHR5cGU6ImF0dHJpYnV0ZXMiLGF0dHJpYnV0ZU5hbWU6YSxvbGRWYWx1ZTpvW2FdfSkpfWZ1bmN0aW9uIHModCxyLG8scyl7ZnVuY3Rpb24gYShlLHIsbyxhLGMpe3ZhciBsPWUubGVuZ3RoLTE7Yz0tfigobC1jKS8yKTtmb3IodmFyIGYsZCxwO3A9ZS5wb3AoKTspZj1vW3AuaF0sZD1hW3AuaV0scy5iJiZjJiZNYXRoLmFicyhwLmgtcC5pKT49bCYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2ZdLHJlbW92ZWROb2RlczpbZl0sbmV4dFNpYmxpbmc6Zi5uZXh0U2libGluZyxwcmV2aW91c1NpYmxpbmc6Zi5wcmV2aW91c1NpYmxpbmd9KSksYy0tKSxzLmEmJmQuYSYmaSh0LGYsZC5hLHMuZCkscy5jJiYzPT09Zi5ub2RlVHlwZSYmZi5ub2RlVmFsdWUhPT1kLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6Zn0pKSxzLmUmJnUoZixkKX1mdW5jdGlvbiB1KHIsbyl7Zm9yKHZhciBkLHAsYixoLHksdj1yLmNoaWxkTm9kZXMsXz1vLmIsZz12Lmxlbmd0aCxtPV8/Xy5sZW5ndGg6MCxqPTAsJD0wLHc9MDtnPiR8fG0+dzspaD12WyRdLHk9KGI9X1t3XSkmJmIuaixoPT09eT8ocy5hJiZiLmEmJmkodCxoLGIuYSxzLmQpLHMuYyYmYi5jIT09ZSYmaC5ub2RlVmFsdWUhPT1iLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6aH0pKSxwJiZhKHAscix2LF8saikscy5lJiYoaC5jaGlsZE5vZGVzLmxlbmd0aHx8Yi5iJiZiLmIubGVuZ3RoKSYmdShoLGIpLCQrKyx3KyspOihsPSEwLGR8fChkPXt9LHA9W10pLGgmJihkW2I9YyhoKV18fChkW2JdPSEwLC0xPT09KGI9ZihfLGgsdywiaiIpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6cixhZGRlZE5vZGVzOltoXSxuZXh0U2libGluZzpoLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpoLnByZXZpb3VzU2libGluZ30pKSxqKyspOnAucHVzaCh7aDokLGk6Yn0pKSwkKyspLHkmJnkhPT12WyRdJiYoZFtiPWMoeSldfHwoZFtiXT0hMCwtMT09PShiPWYodix5LCQpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6by5qLHJlbW92ZWROb2RlczpbeV0sbmV4dFNpYmxpbmc6X1t3KzFdLHByZXZpb3VzU2libGluZzpfW3ctMV19KSksai0tKTpwLnB1c2goe2g6YixpOnd9KSksdysrKSk7cCYmYShwLHIsdixfLGopfXZhciBsO3JldHVybiB1KHIsbyksbH1mdW5jdGlvbiBhKGUsdCl7dmFyIHI9ITA7cmV0dXJuIGZ1bmN0aW9uIG4oZSl7dmFyIG89e2o6ZX07cmV0dXJuIXQuY3x8MyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlPyh0LmEmJnImJjE9PT1lLm5vZGVUeXBlJiYoby5hPWwoZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuZCYmIXQuZFtyLm5hbWVdfHwoZVtyLm5hbWVdPXIudmFsdWUpLGV9KSksciYmKHQuYnx8dC5jfHx0LmEmJnQuZSkmJihvLmI9dShlLmNoaWxkTm9kZXMsbikpLHI9dC5lKTpvLmM9ZS5ub2RlVmFsdWUsb30oZSl9ZnVuY3Rpb24gYyhlKXt0cnl7cmV0dXJuIGUuaWR8fChlLm1vX2lkPWUubW9faWR8fGQrKyl9Y2F0Y2godCl7dHJ5e3JldHVybiBlLm5vZGVWYWx1ZX1jYXRjaChyKXtyZXR1cm4gZCsrfX19ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgcj1bXSxuPTA7bjxlLmxlbmd0aDtuKyspcltuXT10KGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciByPXt9LG49MDtuPGUubGVuZ3RoO24rKylyPXQocixlW25dLG4sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gZihlLHQscixuKXtmb3IoO3I8ZS5sZW5ndGg7cisrKWlmKChuP2Vbcl1bbl06ZVtyXSk9PT10KXJldHVybiByO3JldHVybi0xfXQuX3BlcmlvZD0zMCx0LnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj17YTohISh0LmF0dHJpYnV0ZXN8fHQuYXR0cmlidXRlRmlsdGVyfHx0LmF0dHJpYnV0ZU9sZFZhbHVlKSxiOiEhdC5jaGlsZExpc3QsZTohIXQuc3VidHJlZSxjOiEoIXQuY2hhcmFjdGVyRGF0YSYmIXQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKX0saT10aGlzLmcscz0wO3M8aS5sZW5ndGg7cysrKWlbc10ubT09PWUmJmkuc3BsaWNlKHMsMSk7dC5hdHRyaWJ1dGVGaWx0ZXImJihuLmQ9bCh0LmF0dHJpYnV0ZUZpbHRlcixmdW5jdGlvbihlLHQpewpyZXR1cm4gZVt0XT0hMCxlfSkpLGkucHVzaCh7bTplLGw6byhlLG4pfSksdGhpcy5mfHxyKHRoaXMpfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PXRoaXMuZyxyPTA7cjx0Lmxlbmd0aDtyKyspdFtyXS5sKGUpO3JldHVybiBlfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5nPVtdLGNsZWFyVGltZW91dCh0aGlzLmYpLHRoaXMuZj1udWxsfX07dmFyIGQ9MTtyZXR1cm4gdH0odm9pZCAwKX0se31dLDkxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmV8fGZ1bmN0aW9uKGUsdCxyLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgbyxpLHM9WyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZWNvbmZpZ3VyZSIsInNldFByb3RvdHlwZSIsInByZXZlbnRFeHRlbnNpb25zIl0sYT10LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09ZS5jYWxsKHQpfX0oZS5wcm90b3R5cGUudG9TdHJpbmcpLGM9dC5wcm90b3R5cGUuaW5kZXhPZj90LmluZGV4T2Z8fGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gdC5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUscixuKX06ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1yfHwwO248ZS5sZW5ndGg7bisrKWlmKGVbbl09PT10KXJldHVybiBuO3JldHVybi0xfSx1PXIuTWFwIT09biYmTWFwLnByb3RvdHlwZS5mb3JFYWNoP2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBNYXB9OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD1bXTtyZXR1cm57c2l6ZTowLGhhczpmdW5jdGlvbih0KXtyZXR1cm4gYyhlLHQpPi0xfSxnZXQ6ZnVuY3Rpb24ocil7cmV0dXJuIHRbYyhlLHIpXX0sc2V0OmZ1bmN0aW9uKHIsbil7dmFyIG89YyhlLHIpOy0xPT09bz8oZS5wdXNoKHIpLHQucHVzaChuKSx0aGlzLnNpemUrKyk6dFtvXT1ufSwiZGVsZXRlIjpmdW5jdGlvbihyKXt2YXIgbj1jKGUscik7bj4tMSYmKGUuc3BsaWNlKG4sMSksdC5zcGxpY2UobiwxKSx0aGlzLnNpemUtLSl9LGZvckVhY2g6ZnVuY3Rpb24ocil7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspci5jYWxsKGFyZ3VtZW50c1sxXSx0W25dLGVbbl0sdGhpcyl9fX0sbD1lLmdldE93blByb3BlcnR5TmFtZXM/ZnVuY3Rpb24oKXt2YXIgdD1lLmdldE93blByb3BlcnR5TmFtZXM7dHJ5e2FyZ3VtZW50cy5jYWxsZWV9Y2F0Y2gocil7dmFyIG49KHQoYykuam9pbigiICIpKyIgIikucmVwbGFjZSgvcHJvdG90eXBlIHxsZW5ndGggfG5hbWUgL2csIiIpLnNsaWNlKDAsLTEpLnNwbGl0KCIgIik7bi5sZW5ndGgmJih0PWZ1bmN0aW9uKHQpe3ZhciByPWUuZ2V0T3duUHJvcGVydHlOYW1lcyh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClmb3IodmFyIG8saT0wO2k8bi5sZW5ndGg7KShvPWMocixuW2krK10pKT4tMSYmci5zcGxpY2UobywxKTtyZXR1cm4gcn0pfXJldHVybiB0fSgpOmZ1bmN0aW9uKHQpe3ZhciByLG4sbz1bXTtpZigiaGFzT3duUHJvcGVydHkiaW4gdClmb3IociBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJm8ucHVzaChyKTtlbHNle249ZS5oYXNPd25Qcm9wZXJ0eTtmb3IociBpbiB0KW4uY2FsbCh0LHIpJiZvLnB1c2gocil9cmV0dXJuIGEodCkmJm8ucHVzaCgibGVuZ3RoIiksb30sZj1lLmdldFByb3RvdHlwZU9mLGQ9ZS5kZWZpbmVQcm9wZXJ0aWVzJiZlLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixwPXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxyLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oKXt2YXIgZT0rbmV3IERhdGUsdD1lO3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3IoKHQ9K25ldyBEYXRlKS1lKX0sMTcpfX0oKSxiPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1vLmdldChlKTtuPyh5KG4sZSksbShlLG4sdCxyKSk6KG49aChlKSxtKGUsbix0LHIpLDE9PT1vLnNpemUmJnAodikpfSxoPWZ1bmN0aW9uKHQscil7dmFyIG4saT1sKHQpLHM9W10sYT0wLHI9e2hhbmRsZXJzOnUoKSxmcm96ZW46ZS5pc0Zyb3plbj9lLmlzRnJvemVuKHQpOiExLGV4dGVuc2libGU6ZS5pc0V4dGVuc2libGU/ZS5pc0V4dGVuc2libGUodCk6ITAscHJvdG86ZiYmZih0KSxwcm9wZXJ0aWVzOmksdmFsdWVzOnMsbm90aWZpZXI6Zyh0LHIpfTtpZihkKWZvcihuPXIuZGVzY3JpcHRvcnM9W107YTxpLmxlbmd0aDspblthXT1kKHQsaVthXSksc1thXT10W2lbYSsrXV07ZWxzZSBmb3IoO2E8aS5sZW5ndGg7KXNbYV09dFtpW2ErK11dO3JldHVybiBvLnNldCh0LHIpLHJ9LHk9ZnVuY3Rpb24oKXt2YXIgdD1kP2Z1bmN0aW9uKGUsdCxyLG4sbyl7dmFyIGk9dC5wcm9wZXJ0aWVzW3JdLHM9ZVtpXSxhPXQudmFsdWVzW3JdLGM9dC5kZXNjcmlwdG9yc1tyXTsidmFsdWUiaW4gbyYmKGE9PT1zPzA9PT1hJiYxL2EhPT0xL3M6YT09PWF8fHM9PT1zKSYmKGooZSx0LHtuYW1lOmksdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LnZhbHVlc1tyXT1zKSwhYy5jb25maWd1cmFibGV8fG8uY29uZmlndXJhYmxlJiZvLndyaXRhYmxlPT09Yy53cml0YWJsZSYmby5lbnVtZXJhYmxlPT09Yy5lbnVtZXJhYmxlJiZvLmdldD09PWMuZ2V0JiZvLnNldD09PWMuc2V0fHwoaihlLHQse25hbWU6aSx0eXBlOiJyZWNvbmZpZ3VyZSIsb2JqZWN0OmUsb2xkVmFsdWU6YX0sbiksdC5kZXNjcmlwdG9yc1tyXT1vKX06ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dC5wcm9wZXJ0aWVzW3JdLGk9ZVtvXSxzPXQudmFsdWVzW3JdOyhzPT09aT8wPT09cyYmMS9zIT09MS9pOnM9PT1zfHxpPT09aSkmJihqKGUsdCx7bmFtZTpvLHR5cGU6InVwZGF0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6c30sbiksdC52YWx1ZXNbcl09aSl9LHI9ZD9mdW5jdGlvbihlLHIsbixvLGkpe2Zvcih2YXIgcyxhPXIubGVuZ3RoO24mJmEtLTspbnVsbCE9PXJbYV0mJihzPWQoZSxyW2FdKSxuLS0scz90KGUsbyxhLGkscyk6KGooZSxvLHtuYW1lOnJbYV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpvLnZhbHVlc1thXX0saSksby5wcm9wZXJ0aWVzLnNwbGljZShhLDEpLG8udmFsdWVzLnNwbGljZShhLDEpLG8uZGVzY3JpcHRvcnMuc3BsaWNlKGEsMSkpKX06ZnVuY3Rpb24oZSx0LHIsbixvKXtmb3IodmFyIGk9dC5sZW5ndGg7ciYmaS0tOyludWxsIT09dFtpXSYmKGooZSxuLHtuYW1lOnRbaV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpuLnZhbHVlc1tpXX0sbyksbi5wcm9wZXJ0aWVzLnNwbGljZShpLDEpLG4udmFsdWVzLnNwbGljZShpLDEpLHItLSl9O3JldHVybiBmdW5jdGlvbihuLG8saSl7aWYobi5oYW5kbGVycy5zaXplJiYhbi5mcm96ZW4pe3ZhciBzLGEsdSxwLGIsaCx5LHYsXz1uLnZhbHVlcyxnPW4uZGVzY3JpcHRvcnMsbT0wO2lmKG4uZXh0ZW5zaWJsZSlpZihzPW4ucHJvcGVydGllcy5zbGljZSgpLGE9cy5sZW5ndGgsdT1sKG8pLGcpe2Zvcig7bTx1Lmxlbmd0aDspYj11W20rK10scD1jKHMsYiksdj1kKG8sYiksLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChvW2JdKSxnLnB1c2godikpOihzW3BdPW51bGwsYS0tLHQobyxuLHAsaSx2KSk7cihvLHMsYSxuLGkpLGUuaXNFeHRlbnNpYmxlKG8pfHwobi5leHRlbnNpYmxlPSExLGoobyxuLHt0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyIsb2JqZWN0Om99LGkpLG4uZnJvemVuPWUuaXNGcm96ZW4obykpfWVsc2V7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSxoPW9bYl0sLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChoKSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpKSk7cihvLHMsYSxuLGkpfWVsc2UgaWYoIW4uZnJvemVuKXtmb3IoO208cy5sZW5ndGg7bSsrKWI9c1ttXSx0KG8sbixtLGksZChvLGIpKTtlLmlzRnJvemVuKG8pJiYobi5mcm96ZW49ITApfWYmJih5PWYobykseSE9PW4ucHJvdG8mJihqKG8sbix7dHlwZToic2V0UHJvdG90eXBlIixuYW1lOiJfX3Byb3RvX18iLG9iamVjdDpvLG9sZFZhbHVlOm4ucHJvdG99KSxuLnByb3RvPXkpKX19fSgpLHY9ZnVuY3Rpb24oKXtvLnNpemUmJihvLmZvckVhY2goeSksaS5mb3JFYWNoKF8pLHAodikpfSxfPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5jaGFuZ2VSZWNvcmRzO3IubGVuZ3RoJiYoZS5jaGFuZ2VSZWNvcmRzPVtdLHQocikpfSxnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9by5nZXQoZSkpLHQmJnQubm90aWZpZXJ8fHtub3RpZnk6ZnVuY3Rpb24odCl7dC50eXBlO3ZhciByPW8uZ2V0KGUpO2lmKHIpe3ZhciBuLGk9e29iamVjdDplfTtmb3IobiBpbiB0KSJvYmplY3QiIT09biYmKGlbbl09dFtuXSk7aihlLHIsaSl9fSxwZXJmb3JtQ2hhbmdlOmZ1bmN0aW9uKHQscil7aWYoInN0cmluZyIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZyBjaGFuZ2VUeXBlIik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IHBlcmZvcm0gbm9uLWZ1bmN0aW9uIik7dmFyIGkscyxhPW8uZ2V0KGUpLGM9YXJndW1lbnRzWzJdLHU9Yz09PW4/cigpOnIuY2FsbChjKTtpZihhJiZ5KGEsZSx0KSxhJiZ1JiYib2JqZWN0Ij09dHlwZW9mIHUpe3M9e29iamVjdDplLHR5cGU6dH07Zm9yKGkgaW4gdSkib2JqZWN0IiE9PWkmJiJ0eXBlIiE9PWkmJihzW2ldPXVbaV0pO2ooZSxhLHMpfX19fSxtPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWkuZ2V0KHIpO298fGkuc2V0KHIsbz17b2JzZXJ2ZWQ6dSgpLGNoYW5nZVJlY29yZHM6W119KSxvLm9ic2VydmVkLnNldChlLHthY2NlcHRMaXN0Om4uc2xpY2UoKSxkYXRhOnR9KSx0LmhhbmRsZXJzLnNldChyLG8pfSxqPWZ1bmN0aW9uKGUsdCxyLG4pe3QuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbz10Lm9ic2VydmVkLmdldChlKS5hY2NlcHRMaXN0Oygic3RyaW5nIiE9dHlwZW9mIG58fC0xPT09YyhvLG4pKSYmYyhvLHIudHlwZSk+LTEmJnQuY2hhbmdlUmVjb3Jkcy5wdXNoKHIpfSl9O289dSgpLGk9dSgpLGUub2JzZXJ2ZT1mdW5jdGlvbih0LHIsbyl7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IG9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO2lmKGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4ocikpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gYSBmcm96ZW4gZnVuY3Rpb24gb2JqZWN0Iik7aWYobz09PW4pbz1zO2Vsc2UgaWYoIW98fCJvYmplY3QiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGlyZCBhcmd1bWVudCB0byBPYmplY3Qub2JzZXJ2ZSBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MuIik7cmV0dXJuIGIodCxyLG8pLHR9LGUudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09PWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LnVub2JzZXJ2ZSBjYW5ub3QgdW5vYnNlcnZlIG5vbi1vYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO3ZhciByLG49aS5nZXQodCk7cmV0dXJuIG4mJihyPW4ub2JzZXJ2ZWQuZ2V0KGUpKSYmKG4ub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSkscChmdW5jdGlvbigpe18obix0KX0pLDE9PT1uLm9ic2VydmVkLnNpemUmJm4ub2JzZXJ2ZWQuaGFzKGUpP2lbImRlbGV0ZSJdKHQpOm4ub2JzZXJ2ZWRbImRlbGV0ZSJdKGUpLDE9PT1yLmRhdGEuaGFuZGxlcnMuc2l6ZT9vWyJkZWxldGUiXShlKTpyLmRhdGEuaGFuZGxlcnNbImRlbGV0ZSJdKHQpKSxlfSxlLmdldE5vdGlmaWVyPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5nZXROb3RpZmllciBjYW5ub3QgZ2V0Tm90aWZpZXIgbm9uLW9iamVjdCIpO3JldHVybiBlLmlzRnJvemVuJiZlLmlzRnJvemVuKHQpP251bGw6Zyh0KX0sZS5kZWxpdmVyQ2hhbmdlUmVjb3Jkcz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHQ9aS5nZXQoZSk7dCYmKHQub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSksXyh0LGUpKX19KE9iamVjdCxBcnJheSx0aGlzKX0se31dLDkyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuRGF0YU9iamVjdE9ic2VydmVyPXIuRGF0YU9iamVjdFJlcG9ydGVyPXIuU3luY2hlcj12b2lkIDAsZSgibXV0YXRpb25vYnNlcnZlci1zaGltIiksZSgib2JqZWN0Lm9ic2VydmUiKSxlKCJhcnJheS5vYnNlcnZlIik7dmFyIG89ZSgiLi9zeW5jaGVyL1N5bmNoZXIiKSxpPW4obykscz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIiksYT1uKHMpLGM9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciIpLHU9bihjKTtyLlN5bmNoZXI9aVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdFJlcG9ydGVyPWFbImRlZmF1bHQiXSxyLkRhdGFPYmplY3RPYnNlcnZlcj11WyJkZWZhdWx0Il19LHsiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiOjk2LCIuL3N5bmNoZXIvU3luY2hlciI6OTksImFycmF5Lm9ic2VydmUiOjEsIm11dGF0aW9ub2JzZXJ2ZXItc2hpbSI6OTAsIm9iamVjdC5vYnNlcnZlIjo5MX1dLDkzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksdT1uKGMpLGw9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksZj1uKGwpLGQ9ZSgiLi9TeW5jT2JqZWN0IikscD1uKGQpLGI9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxoPW4oYikseT1lKCIuLi91dGlscy91dGlscy5qcyIpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9zeW5jaGVyPXQsYS5fdXJsPXIsYS5fc2NoZW1hPW4sYS5fc3RhdHVzPW8sYS5fc3luY09iaj1uZXcgcFsiZGVmYXVsdCJdKGkpLGEuX2NoaWxkcmVucz1zLGEuX3ZlcnNpb249MCxhLl9jaGlsZElkPTAsYS5fY2hpbGRyZW5PYmplY3RzPXt9LGEuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLGEuX293bmVyPXQuX293bmVyLGEuX2J1cz10Ll9idXN9cmV0dXJuKDAsZlsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24obil7dmFyIG89cituLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24ocil7aWYoci5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogIixyKSxyLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkQ3JlYXRlKHIpO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksKDAsYVsiZGVmYXVsdCJdKShlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5PYmplY3RzW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InBhdXNlIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJyZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6ImFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5fY2hpbGRJZCsrO3ZhciBuPXIuX293bmVyKyIjIityLl9jaGlsZElkLG89ci5fdXJsKyIvY2hpbGRyZW4vIitlLHM9e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpvLGJvZHk6e3Jlc291cmNlOm4sdmFsdWU6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUpe3ZhciBpPXIuX2J1cy5wb3N0TWVzc2FnZShzKTtjb25zb2xlLmxvZygiY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAiK3IuX293bmVyKyIgKTogIixzKTt2YXIgYT1uZXcgaFsiZGVmYXVsdCJdKHIsbix0LHIuX293bmVyLGkpO2Eub25DaGFuZ2UoZnVuY3Rpb24oZSl7ci5fb25DaGFuZ2UoZSx7cGF0aDpvLGNoaWxkSWQ6bn0pfSksci5fY2hpbGRyZW5PYmplY3RzW25dPWEsZShhKX0pfX0se2tleToib25BZGRDaGlsZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkNoaWxkQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlO2NvbnNvbGUubG9nKCJjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICIrdC5fb3duZXIrIiApOiAiLGUpO3ZhciBuPW5ldyBoWyJkZWZhdWx0Il0odCxyLGUuYm9keS52YWx1ZSk7dC5fY2hpbGRyZW5PYmplY3RzW3JdPW4sc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzb3VyY2U6dC5fb3duZXJ9fSl9KTt2YXIgbz17dHlwZTplLnR5cGUsZnJvbTplLmZyb20sdXJsOmUudG8sdmFsdWU6ZS5ib2R5LnZhbHVlLGNoaWxkSWQ6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9O3QuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiYoY29uc29sZS5sb2coIkFERC1DSElMRFJFTi1FVkVOVDogIixvKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSl9fSx7a2V5OiJfb25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKyssIm9uIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6InVwZGF0ZSIsZnJvbTpyLl91cmwsdG86ci5fdXJsKyIvY2hhbmdlcyIsYm9keTp7dmVyc2lvbjpyLl92ZXJzaW9uLHNvdXJjZTpyLl9vd25lcixhdHRyaWJ1dGU6ZS5maWVsZH19O2Uub1R5cGU9PT1kLk9iamVjdFR5cGUuT0JKRUNUP2UuY1R5cGUhPT1kLkNoYW5nZVR5cGUuUkVNT1ZFJiYobi5ib2R5LnZhbHVlPWUuZGF0YSk6KG4uYm9keS5hdHRyaWJ1dGVUeXBlPWUub1R5cGUsbi5ib2R5LnZhbHVlPWUuZGF0YSxlLmNUeXBlIT09ZC5DaGFuZ2VUeXBlLlVQREFURSYmKG4uYm9keS5vcGVyYXRpb249ZS5jVHlwZSkpLHQmJihuLnRvPXQucGF0aCxuLmJvZHkucmVzb3VyY2U9dC5jaGlsZElkKSxyLl9idXMucG9zdE1lc3NhZ2Uobil9fX0se2tleToiX2NoYW5nZU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rMT09PXQuYm9keS52ZXJzaW9uKXtyLl92ZXJzaW9uKys7dmFyIG49dC5ib2R5LmF0dHJpYnV0ZSxvPSgwLHkuZGVlcENsb25lKSh0LmJvZHkudmFsdWUpLGk9ZS5maW5kQmVmb3JlKG4pO2lmKHQuYm9keS5hdHRyaWJ1dGVUeXBlPT09ZC5PYmplY3RUeXBlLkFSUkFZKWlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuQUREKXt2YXIgcz1pLm9iaixhPWkubGFzdDtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHMsW2EsMF0uY29uY2F0KG8pKX1lbHNlIGlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuUkVNT1ZFKXt2YXIgYz1pLm9iaix1PWkubGFzdDtjLnNwbGljZSh1LG8pfWVsc2UgaS5vYmpbaS5sYXN0XT1vO2Vsc2UgdC5ib2R5LnZhbHVlP2kub2JqW2kubGFzdF09bzpkZWxldGUgaS5vYmpbaS5sYXN0XX1lbHNlIGNvbnNvbGUubG9nKCJVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiAiK3IuX3ZlcnNpb24rIiwgbXNnID0+ICIrdC5ib2R5LnZlcnNpb24rIikiKX19LHtrZXk6Il9jaGFuZ2VDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztjb25zb2xlLmxvZygiQ2hhbmdlIGNoaWxkcmVuOiAiLHQuX293bmVyLGUpO3ZhciByPWUuYm9keS5yZXNvdXJjZSxuPXQuX2NoaWxkcmVuT2JqZWN0c1tyXTtuP3QuX2NoYW5nZU9iamVjdChuLl9zeW5jT2JqLGUpOmNvbnNvbGUubG9nKCJObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICIscil9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWF9fSx7a2V5OiJzdGF0dXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXN9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleToiY2hpbGRyZW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT12LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCIuL1N5bmNPYmplY3QiOjk4LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZSgiLi9TeW5jT2JqZWN0IiksdT1uKGMpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8scyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBhPXRoaXM7YS5fcGFyZW50PXQsYS5fY2hpbGRJZD1yLGEuX293bmVyPW8sYS5fbXNnSWQ9cyxhLl9zeW5jT2JqPW5ldyB1WyJkZWZhdWx0Il0obiksYS5fYnVzPXQuX2J1cyxhLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fb3duZXImJihlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fb3duZXIsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmdC5pZD09PWUuX21zZ0lkJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOiIsdCksZS5fb25SZXNwb25zZSh0KSl9KSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyJiZlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RlbGV0ZSBlLl9wYXJlbnQuX2NoaWxkcmVuW2UuX2NoaWxkSWRdLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24odCl7ZSh0KX0pfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihyKX19LHtrZXk6ImNoaWxkSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGo9bihtKSwkPXtBTlk6ImFueSIsU1RBUlQ6InN0YXJ0IixFWEFDVDoiZXhhY3QifSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4sbyxzLGMsbCl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBmPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLHMuZGF0YSxjKSksZD1mO3JldHVybiBkLl92ZXJzaW9uPWwsZC5fZmlsdGVycz17fSxkLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7ZC5fb25GaWx0ZXIoZSl9KSwoMCxpWyJkZWZhdWx0Il0pKHMuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXMuY2hpbGRyZW5zW2VdO2QuX2NoaWxkcmVuT2JqZWN0c1tlXT1uZXcgalsiZGVmYXVsdCJdKGQsZSx0KX0pLGQuX2FsbG9jYXRlTGlzdGVuZXJzKCksZn1yZXR1cm4oMCx2WyJkZWZhdWx0Il0pKHQsZSksKDAsZlsiZGVmYXVsdCJdKSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCsiL2NoYW5nZXMiLGZ1bmN0aW9uKHQpeyJ1cGRhdGUiPT09dC50eXBlJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdfX0se2tleToidW5zdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLG49e3R5cGU6JC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZigiKiIpO289PT1lLmxlbmd0aC0xJiYoMD09PW8/bi50eXBlPSQuQU5ZOihuLnR5cGU9JC5TVEFSVCxyPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkpKSx0aGlzLl9maWx0ZXJzW3JdPW59fSx7a2V5OiJfb25GaWx0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7KDAsaVsiZGVmYXVsdCJdKSh0Ll9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX2ZpbHRlcnNbcl07bi50eXBlPT09JC5BTlk/bi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLlNUQVJUPzA9PT1lLmZpZWxkLmluZGV4T2YocikmJm4uY2FsbGJhY2soZSk6bi50eXBlPT09JC5FWEFDVCYmZS5maWVsZD09PXImJm4uY2FsbGJhY2soZSl9KX19XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09dyx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdCI6OTMsIi4vRGF0YU9iamVjdENoaWxkIjo5NCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuLi91dGlscy91dGlscy5qcyIpLGo9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLGkscyl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBjPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLGkscykpLGw9YztyZXR1cm4gbC5fc3Vic2NyaXB0aW9ucz17fSxsLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci0iK3IrIi1TRU5EOiAiLGUpLGwuX29uQ2hhbmdlKGUpfSksbC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxjfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9vYmplY3RMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdC0iK2UuX3VybCsiLVJDVjogIix0KSx0LnR5cGUpe2Nhc2UicmVzcG9uc2UiOmUuX29uUmVzcG9uc2UodCk7YnJlYWs7Y2FzZSJyZWFkIjplLl9vblJlYWQodCl9fSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiaW52aXRlT2JzZXJ2ZXJzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ImNyZWF0ZSIsZnJvbTp0Ll9zeW5jaGVyLl9vd25lcix0bzp0Ll9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6dC5fdXJsLHNjaGVtYTp0Ll9zY2hlbWEsdmFsdWU6dC5fc3luY09iai5kYXRhLGF1dGhvcmlzZTplfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZToiZGVsZXRlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fcmVwb3J0ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvblN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyPWV9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToib25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlYWRIYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogIixlKSxlLmJvZHkudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uVW5TdWJzY3JpYmUoZSl9fX0se2tleToiX29uU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj17dHlwZTplLmJvZHkudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNjZXB0OmZ1bmN0aW9uKCl7dmFyIG49e3VybDpyLHN0YXR1czoib24ifTt0Ll9zdWJzY3JpcHRpb25zW3JdPW47dmFyIG89e307cmV0dXJuKDAsaVsiZGVmYXVsdCJdKSh0Ll9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dC5fY2hpbGRyZW5PYmplY3RzW2VdLmRhdGE7b1tlXT0oMCxtLmRlZXBDbG9uZSkocil9KSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc2NoZW1hOnQuX3NjaGVtYSx2ZXJzaW9uOnQuX3ZlcnNpb24sdmFsdWU6e2RhdGE6KDAsbS5kZWVwQ2xvbmUpKHQuZGF0YSksY2hpbGRyZW5zOm99fX0pLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpyfX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixuKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXQuX3N1YnNjcmlwdGlvbnNbcl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsb2JqZWN0Om59O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsciksdC5fb25SZXNwb25zZUhhbmRsZXIocikpfX0se2tleToiX29uUmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGFjY2VwdDpmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKX19KX0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMSxkZXNjOnJ9fSl9fTt0Ll9vblJlYWRIYW5kbGVyJiYoY29uc29sZS5sb2coIlJFQUQtRVZFTlQ6ICIsciksdC5fb25SZWFkSGFuZGxlcihyKSl9fSx7a2V5OiJzdWJzY3JpcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc319XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09aix0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMDAsIi4vRGF0YU9iamVjdCI6OTMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOjE1fV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8peygwLGlbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgcz10aGlzO3MuX293bmVyPXQscy5fdXJsPXIscy5fYnVzPW4scy5fY2hpbGRyZW49byxzLl9jaGFuZ2VzPVtdLHMuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhUHJvdmlzaW9uYWwtIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlcy5wdXNoKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiYXBwbHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpfSl9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufX1dKSxlfSgpO3JbImRlZmF1bHQiXT1jLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuT2JqZWN0VHlwZT1yLkNoYW5nZVR5cGU9dm9pZCAwO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciByPXRoaXM7ci5fb2JzZXJ2ZXJzPVtdLHIuX2ZpbHRlcnM9e30sdD9yLl9kYXRhPSgwLGwuZGVlcENsb25lKSh0KTpyLl9kYXRhPXt9LHIuX2ludGVybmFsT2JzZXJ2ZShuZXcgZCxyLl9kYXRhKX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleToiZmluZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLiIpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleToiZmluZEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj1lLnNwbGl0KCIuIik7cmV0dXJuIHQubGFzdD1yLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQociksdH19LHtrZXk6Il9maW5kV2l0aFNwbGl0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6Il9pc09ic2VydmFibGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPT09T2JqZWN0fHxlLmNvbnN0cnVjdG9yPT09QXJyYXl9fSx7a2V5OiJfaW50ZXJuYWxPYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbj1mdW5jdGlvbih0KXtyLl9vbkNoYW5nZXMoZSx0KX07aWYodC5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7T2JqZWN0Lm9ic2VydmUodCxuKTtmb3IodmFyIG8gaW4gdClyLl9pc09ic2VydmFibGUodFtvXSkmJnIuX2ludGVybmFsT2JzZXJ2ZShlWyJuZXciXShvKSx0W29dKX1lbHNlIGlmKHQuY29uc3RydWN0b3I9PT1BcnJheSl7QXJyYXkub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgaSBpbiB0KWlmKHIuX2lzT2JzZXJ2YWJsZSh0W2ldKSl7dmFyIHM9ZVsibmV3Il0obmV3IHAodFtpXSxpKSk7ci5faW50ZXJuYWxPYnNlcnZlKHMsdFtpXSl9fX19fSx7a2V5OiJfb25DaGFuZ2VzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHQpe3ZhciBvPXRbbl0ub2JqZWN0LGk9dm9pZCAwO2lmKG8uY29uc3RydWN0b3I9PT1PYmplY3QmJihpPWguT0JKRUNUKSxvLmNvbnN0cnVjdG9yPT09QXJyYXkmJihpPWguQVJSQVkpLCJzcGxpY2UiPT09dFtuXS50eXBlKSFmdW5jdGlvbigpe3ZhciBzPXRbbl0uaW5kZXgsYT1lWyJuZXciXSgiIitzKSxjPWEudG9TdHJpbmcoKSx1PXRbbl0ucmVtb3ZlZC5sZW5ndGg7aWYoMCE9PXUpe3ZhciBmPXRbbl0ucmVtb3ZlZDtmLmZvckVhY2goZnVuY3Rpb24odCxuKXtyLl9pc09ic2VydmFibGUodCkmJmUucmVtb3ZlSW5kZXgocytuKX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5SRU1PVkUsb1R5cGU6aSxmaWVsZDpjLGRhdGE6dX0pfXZhciBkPXRbbl0uYWRkZWRDb3VudDtpZigwIT09ZCl7dmFyIGg9by5zbGljZShzLHMrZCk7aC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbz1lWyJuZXciXShuZXcgcCh0LHMrbikpO3IuX2ludGVybmFsT2JzZXJ2ZShvLHQpfX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDpjLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGgpfSl9cyE9PW8ubGVuZ3RoLTEmJmUucmVJbmRleEZyb20obyl9KCk7ZWxzZXt2YXIgcz1lWyJuZXciXSh0W25dLm5hbWUpLGE9cy50b1N0cmluZygpO2lmKC0xIT09YS5pbmRleE9mKCJTeW1ib2wiKSljb250aW51ZTt2YXIgYz1vW3Rbbl0ubmFtZV07InVwZGF0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5VUERBVEUsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSksImFkZCI9PT10W25dLnR5cGUmJih0aGlzLl9pbnRlcm5hbE9ic2VydmUocyxjKSx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuQURELG9UeXBlOmksZmllbGQ6YSxkYXRhOigwLGwuZGVlcENsb25lKShjKX0pKSwiZGVsZXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmF9KX19fX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLGV9KCksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSksdGhpcy5fcGF0aD1bXSx0aGlzLl9vYnNlcnZhYmxlcz17fX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InJlbW92ZUluZGV4Iix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fb2JzZXJ2YWJsZXNbZV19fSx7a2V5OiJyZUluZGV4RnJvbSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHRoaXMuX29ic2VydmFibGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX29ic2VydmFibGVzW3JdLG89ZS5pbmRleE9mKG4ub2JqKTtuLmlkeCE9byYmKG4uaWR4PW8sZGVsZXRlIHQuX29ic2VydmFibGVzW3JdLHQuX29ic2VydmFibGVzW29dPW4pfSl9fSx7a2V5OiJuZXciLHZhbHVlOmZ1bmN0aW9uKGUpe2UuY29uc3RydWN0b3I9PXAmJih0aGlzLl9vYnNlcnZhYmxlc1tlLmlkeF09ZSk7dmFyIHQ9dGhpcy5jbG9uZSgpO3JldHVybiB0Ll9wYXRoLnB1c2goZSksdH19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fcGF0aC5wdXNoKGUpfSksdH19LHtrZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24odCxyKXswPT09cj9lPXQudG9TdHJpbmcoKTplKz0iLiIrdC50b1N0cmluZygpfSksZX19XSksZX0oKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLm9iaj10LHRoaXMuaWR4PXJ9cmV0dXJuKDAsdVsiZGVmYXVsdCJdKShlLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHgudG9TdHJpbmcoKX19XSksZX0oKSxiPXIuQ2hhbmdlVHlwZT17VVBEQVRFOiJ1cGRhdGUiLEFERDoiYWRkIixSRU1PVkU6InJlbW92ZSJ9LGg9ci5PYmplY3RUeXBlPXtPQkpFQ1Q6Im9iamVjdCIsQVJSQVk6ImFycmF5In07clsiZGVmYXVsdCJdPWZ9LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYyksbD1lKCIuL0RhdGFPYmplY3RSZXBvcnRlciIpLGY9bihsKSxkPWUoIi4vRGF0YU9iamVjdE9ic2VydmVyIikscD1uKGQpLGI9ZSgiLi9EYXRhUHJvdmlzaW9uYWwiKSxoPW4oYikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4peygwLGFbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgbz10aGlzO28uX293bmVyPXQsby5fYnVzPXIsby5fc3ViVVJMPW4ucnVudGltZVVSTCsiL3NtIixvLl9yZXBvcnRlcnM9e30sby5fb2JzZXJ2ZXJzPXt9LG8uX3Byb3Zpc2lvbmFscz17fSxyLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aWYoZS5mcm9tIT09dClzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjpvLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOm8uX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjpvLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6ImNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7ci5yZXBvcnRlcj1uLl9vd25lcixyLnNjaGVtYT1lO3ZhciBvPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fb3duZXIsdG86bi5fc3ViVVJMLGJvZHk6e3NjaGVtYTplLHZhbHVlOnIsYXV0aG9yaXNlOnR9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LGkpe24uX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSxhPW5ldyBmWyJkZWZhdWx0Il0obixzLGUsIm9uIixyLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7bi5fcmVwb3J0ZXJzW3NdPWEsdChhKX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKG8saSl7ci5fYnVzLnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24obil7Y29uc29sZS5sb2coInN1YnNjcmliZS1yZXNwb25zZTogIixuKTt2YXIgcz1yLl9wcm92aXNpb25hbHNbdF07aWYoZGVsZXRlIHIuX3Byb3Zpc2lvbmFsc1t0XSxzJiZzLl9yZWxlYXNlTGlzdGVuZXJzKCksbi5ib2R5LmNvZGU8MjAwKXM9bmV3IGhbImRlZmF1bHQiXShyLl9vd25lcix0LHIuX2J1cyxuLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpLHIuX3Byb3Zpc2lvbmFsc1t0XT1zO2Vsc2UgaWYoMjAwPT09bi5ib2R5LmNvZGUpe3ZhciBhPW5ldyBwWyJkZWZhdWx0Il0ocix0LGUsIm9uIixuLmJvZHkudmFsdWUscy5jaGlsZHJlbixuLmJvZHkudmVyc2lvbik7ci5fb2JzZXJ2ZXJzW3RdPWEsbyhhKSxzLmFwcGx5KGEpfWVsc2UgaShuLmJvZHkuZGVzYyl9KX0pfX0se2tleToicmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJyZWFkIixmcm9tOnQuX293bmVyLHRvOmV9O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsbil7dC5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coInJlYWQtcmVzcG9uc2U6ICIsdCksMjAwPT09dC5ib2R5LmNvZGU/ZSh0LmJvZHkudmFsdWUpOm4odC5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtyLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbj0yMDA7ciYmKG49ciksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbiksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG4pKX19LHtrZXk6Il9vblJlbW90ZURlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXQuX29ic2VydmVyc1tyXTtpZihuKXt2YXIgbz17dHlwZTplLnR5cGUsdXJsOnIsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbz0yMDA7ciYmKG89ciksMjAwPT09byYmblsiZGVsZXRlIl0oKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpvLHNvdXJjZTp0Ll9vd25lcn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbyksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG8pKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fSx7a2V5OiJvd25lciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX293bmVyfX0se2tleToicmVwb3J0ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0ZXJzfX0se2tleToib2JzZXJ2ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT15LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiOjk1LCIuL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vRGF0YVByb3Zpc2lvbmFsIjo5NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsYlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBjKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGwoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYyhlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGY9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGYpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1hLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1jLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1sfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3fV19LHt9LFs5Ml0pKDkyKX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX0V2ZW50RW1pdHRlcjIgPSByZXF1aXJlKCcuLi91dGlscy9FdmVudEVtaXR0ZXInKTsKCnZhciBfRXZlbnRFbWl0dGVyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50RW1pdHRlcjIpOwoKdmFyIF9wYXJ0aWNpcGFudCA9IHJlcXVpcmUoJy4vcGFydGljaXBhbnQnKTsKCnZhciBfcGFydGljaXBhbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFydGljaXBhbnQpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKioKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KCnZhciBDaGF0R3JvdXAgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikgewogIF9pbmhlcml0cyhDaGF0R3JvdXAsIF9FdmVudEVtaXR0ZXIpOwoKICBmdW5jdGlvbiBDaGF0R3JvdXAoc3luY2hlciwgZGlzY292ZXJ5LCBkb21haW4pIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDaGF0R3JvdXApOwoKICAgIGlmICghc3luY2hlcikgdGhyb3cgRXJyb3IoJ1N5bmNoZXIgaXMgYSBuZWNlc3NhcnkgZGVwZW5kZWN5Jyk7CiAgICBpZiAoIWRpc2NvdmVyeSkgdGhyb3cgRXJyb3IoJ0h5cGVydHkgZGlzY292ZXIgaXMgYSBuZWNlc3NhcnkgZGVwZW5kZWN5Jyk7CgogICAgdmFyIF90aGlzMiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihDaGF0R3JvdXApLmNhbGwodGhpcywgc3luY2hlciwgZGlzY292ZXJ5KSk7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgX3RoaXMuX3N5bmNoZXIgPSBzeW5jaGVyOwogICAgX3RoaXMuZGlzY292ZXJ5ID0gZGlzY292ZXJ5OwoKICAgIF90aGlzLl9vYmplY3REZXNjVVJMID0gJ2h5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLicgKyBkb21haW4gKyAnLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29tbXVuaWNhdGlvbic7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgX2NyZWF0ZUNsYXNzKENoYXRHcm91cCwgW3sKICAgIGtleTogJ3Byb2Nlc3NQYXJ0aXBhbnRzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9jZXNzUGFydGlwYW50cyhwYXJ0aWNpcGFudHMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJ0aWNpcGFudCkgewogICAgICAgIGlmIChfdGhpcy5fZGF0YU9iamVjdE9ic2VydmVyLl9vd25lciAhPT0gcGFydGljaXBhbnQuaHlwZXJ0eVJlc291cmNlKSB7CiAgICAgICAgICBfdGhpcy5wcm9jZXNzUGFydGljaXBhbnQocGFydGljaXBhbnQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAncHJvY2Vzc1BhcnRpY2lwYW50JywKICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9jZXNzUGFydGljaXBhbnQocGFydGljaXBhbnQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgY29uc29sZS5sb2coJ0VhY2ggUGFydGljaXBhbnQgd2lsbCBiZSB0cmlnZ2VyOiAnLCBwYXJ0aWNpcGFudCk7CiAgICAgIF90aGlzLnRyaWdnZXIoJ3BhcnRpY2lwYW50OmFkZGVkJywgcGFydGljaXBhbnQpOwogICAgfQoKICAgIC8qKgogICAgICogUHJvY2VzcyBjaGlsZCBtZXNzYWdlcwogICAgICogQHBhcmFtICB7W3R5cGVdfSBjaGlsZCBbZGVzY3JpcHRpb25dCiAgICAgKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgIFtkZXNjcmlwdGlvbl0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfcHJvY2Vzc0NoaWxkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJvY2Vzc0NoaWxkKGNoaWxkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmluZm8oJ1Byb2Nlc3MgTWVzc2FnZTonLCBjaGlsZCk7CgogICAgICBfdGhpcy50cmlnZ2VyKCduZXc6bWVzc2FnZTpyZWNpdmVkJywgY2hpbGQpOwogICAgfQoKICAgIC8qKgogICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHNlbmQgYSBjaGF0IG1lc3NhZ2UuCiAgICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBtZXNzYWdlIHRleHQgdG8gYmUgc2VuZAogICAgICovCgogIH0sIHsKICAgIGtleTogJ3NlbmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmQobWVzc2FnZSkgewoKICAgICAgY29uc29sZS5pbmZvKCdTZW5kIE1lc3NhZ2U6JywgbWVzc2FnZSwgdGhpcyk7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgZGF0YU9iamVjdCA9IF90aGlzLmRhdGFPYmplY3RSZXBvcnRlciA/IF90aGlzLmRhdGFPYmplY3RSZXBvcnRlciA6IF90aGlzLmRhdGFPYmplY3RPYnNlcnZlcjsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGRhdGFPYmplY3QuYWRkQ2hpbGQoJ2NoYXRtZXNzYWdlcycsIHsgY2hhdE1lc3NhZ2U6IG1lc3NhZ2UgfSkudGhlbihmdW5jdGlvbiAoZGF0YU9iamVjdENoaWxkKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ0RhdGEgT2JqZWN0IENoaWxkOiAnLCBkYXRhT2JqZWN0Q2hpbGQpOwogICAgICAgICAgdmFyIG1zZyA9IHsKICAgICAgICAgICAgY2hpbGRJZDogZGF0YU9iamVjdENoaWxkLl9jaGlsZElkLAogICAgICAgICAgICBmcm9tOiBkYXRhT2JqZWN0Q2hpbGQuX293bmVyLAogICAgICAgICAgICB2YWx1ZTogZGF0YU9iamVjdENoaWxkLmRhdGEKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuX3Byb2Nlc3NDaGlsZChtc2cpOwogICAgICAgICAgcmVzb2x2ZShkYXRhT2JqZWN0Q2hpbGQpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1JlYXNvbjonLCByZWFzb24pOwogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2pvaW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGpvaW4ocmVzb3VyY2UpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBfdGhpcy5hZGRQYXJ0aWNpcGFudChyZXNvdXJjZSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICByZXNvbHZlKCdqb2luZWQ6ICcsIHJlc3VsdCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIFRPRE86IGltcHJvdmUgdGhpcyB3aXRoIGFuIGludml0ZTsKICAgIC8qKgogICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGFkZCAvIGludml0ZSBuZXcgcGFydGljaXBhbnQgb24gYW4gZXhpc3RpbmcgR3JvdXAgQ2hhdCBpbnN0YW5jZS4KICAgICAqIEByZXR1cm4ge1Byb21pc2V9IFByb21pc2Ugd2l0aCB0aGUgc3RhdHVzCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnaW52aXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBpbnZpdGUodXNlckxpc3QpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIE1hcHBpbmcgUGFydGljcGFudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG4nKTsKICAgICAgICBfdGhpcy5fbWFwcGluZ1VzZXIodXNlckxpc3QpLnRoZW4oZnVuY3Rpb24gKGh5cGVydGllcykgewogICAgICAgICAgcmV0dXJuIF90aGlzLmRhdGFPYmplY3QuaW52aXRlT2JzZXJ2ZXJzKGh5cGVydGllcyk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJzIuIFJlc3VsdCBvZiBpbnZpdGlvbicpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byByZW1vdmUgYSBwYXJ0aWNpcGFudCBmcm9tIGFuIGV4aXN0aW5nIEdyb3VwIENoYXQgaW5zdGFuY2UuCiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBQcm9taXNlIHdpdGggdGhlIHN0YXR1cwogICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlbW92ZVBhcnRpY2lwYW50JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVQYXJ0aWNpcGFudCgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJlc29sdmUoJ3BhcnRpY2lwYW50IHJlbW92ZWQnKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZWplY3QoJ3JlbW92ZSBwYXJ0aWNpcGFudCBmYWlsJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfbWFwcGluZ1VzZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tYXBwaW5nVXNlcih1c2VyTGlzdCkgewoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBoeXBlcnRpZXMgPSBbXTsKICAgICAgICB2YXIgY291bnQgPSAwOwoKICAgICAgICBjb25zb2xlLmxvZygnVXNlciBMaXN0OicsIHVzZXJMaXN0LCB1c2VyTGlzdC5sZW5ndGgpOwoKICAgICAgICBpZiAodXNlckxpc3QubGVuZ3RoID09PSAwKSByZWplY3QoaHlwZXJ0aWVzKTsKCiAgICAgICAgdmFyIHJlc3VsdFVzZXJzID0gZnVuY3Rpb24gcmVzdWx0VXNlcnMoKSB7CiAgICAgICAgICBpZiAoY291bnQgPT09IHVzZXJMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICBjb25zb2xlLmluZm8oJ0hhdmUgJyArIGh5cGVydGllcy5sZW5ndGggKyAndXNlcnMgZm91bmQ7Jyk7CiAgICAgICAgICAgIHJlc29sdmUoaHlwZXJ0aWVzKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2YXIgYWN0aXZlVXNlcnMgPSBmdW5jdGlvbiBhY3RpdmVVc2Vycyh1c2VyKSB7CiAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgaHlwZXJ0aWVzLnB1c2godXNlci5oeXBlcnR5VVJMKTsKICAgICAgICAgIHJlc3VsdFVzZXJzKCk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGluYWN0aXZlVXNlcnMgPSBmdW5jdGlvbiBpbmFjdGl2ZVVzZXJzKCkgewogICAgICAgICAgY291bnQrKzsKICAgICAgICAgIHJlc3VsdFVzZXJzKCk7CiAgICAgICAgfTsKCiAgICAgICAgdXNlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgY29uc29sZS5sb2codXNlcik7CiAgICAgICAgICBpZiAodXNlci5lbWFpbC5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHlQZXJVc2VyKHVzZXIuZW1haWwsIHVzZXIuZG9tYWluKS50aGVuKGFjdGl2ZVVzZXJzKS5jYXRjaChpbmFjdGl2ZVVzZXJzKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZGF0YU9iamVjdFJlcG9ydGVyJywKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGFPYmplY3RSZXBvcnRlcikgewoKICAgICAgaWYgKCFkYXRhT2JqZWN0UmVwb3J0ZXIpIHRocm93IG5ldyBFcnJvcignVGhlIGRhdGEgb2JqZWN0IHJlcG9ydGVyIGlzIG5lY2Vzc2FyeSBwYXJhbWV0ZXInKTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmluZm8oJ1NldCBkYXRhIG9iamVjdCByZXBvcnRlcjogJywgZGF0YU9iamVjdFJlcG9ydGVyKTsKCiAgICAgIGRhdGFPYmplY3RSZXBvcnRlci5vblN1YnNjcmlwdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKCiAgICAgICAgZXZlbnQuYWNjZXB0KCk7CgogICAgICAgIC8vIFNldCB0aGUgb3RoZXIgc3Vic2NyaXB0aW9uIGxpa2UgYSBwYXJ0aWNpcGFudAogICAgICAgIF9wYXJ0aWNpcGFudDIuZGVmYXVsdC5oeXBlcnR5UmVzb3VyY2UgPSBldmVudC51cmw7CgogICAgICAgIGNvbnNvbGUuaW5mbygnT24gU3Vic2NyaXB0aW9uIGFkZCBQYXJ0aWNpcGFudDogJywgX3BhcnRpY2lwYW50Mi5kZWZhdWx0LCBldmVudCk7CgogICAgICAgIGRhdGFPYmplY3RSZXBvcnRlci5kYXRhLnBhcnRpY2lwYW50cy5wdXNoKF9wYXJ0aWNpcGFudDIuZGVmYXVsdCk7CgogICAgICAgIF90aGlzLnByb2Nlc3NQYXJ0aWNpcGFudChfcGFydGljaXBhbnQyLmRlZmF1bHQpOwogICAgICB9KTsKCiAgICAgIGRhdGFPYmplY3RSZXBvcnRlci5vbkFkZENoaWxkKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgIGNvbnNvbGUuaW5mbygnUmVwb3J0ZXIgLSBBZGQgQ2hpbGQ6ICcsIGNoaWxkKTsKICAgICAgICBkYXRhT2JqZWN0UmVwb3J0ZXIuZGF0YS5sYXN0TW9kaWZpZWQgPSBuZXcgRGF0ZSgpLnRvSlNPTigpOwogICAgICAgIF90aGlzLl9wcm9jZXNzQ2hpbGQoY2hpbGQpOwogICAgICB9KTsKCiAgICAgIF90aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXIgPSBkYXRhT2JqZWN0UmVwb3J0ZXI7CiAgICB9LAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyOwogICAgfQogIH0sIHsKICAgIGtleTogJ2RhdGFPYmplY3RPYnNlcnZlcicsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRhT2JqZWN0T2JzZXJ2ZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIgPSBkYXRhT2JqZWN0T2JzZXJ2ZXI7CgogICAgICBkYXRhT2JqZWN0T2JzZXJ2ZXIub25DaGFuZ2UoJ3BhcnRpY2lwYW50cy4qJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdDaGFuZ2UgRXZlbnQ6ICcsIGV2ZW50KTsKICAgICAgICBfdGhpcy5wcm9jZXNzUGFydGlwYW50cyhldmVudC5kYXRhKTsKICAgICAgfSk7CgogICAgICBkYXRhT2JqZWN0T2JzZXJ2ZXIub25BZGRDaGlsZChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICBjb25zb2xlLmluZm8oJ09ic2VydmVyIC0gQWRkIENoaWxkOiAnLCBjaGlsZCk7CiAgICAgICAgX3RoaXMuX3Byb2Nlc3NDaGlsZChjaGlsZCk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2RhdGFPYmplY3RPYnNlcnZlcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdkYXRhT2JqZWN0JywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlciA/IF90aGlzLmRhdGFPYmplY3RSZXBvcnRlciA6IF90aGlzLmRhdGFPYmplY3RPYnNlcnZlcjsKICAgIH0KICB9XSk7CgogIHJldHVybiBDaGF0R3JvdXA7Cn0oX0V2ZW50RW1pdHRlcjMuZGVmYXVsdCk7CgpleHBvcnRzLmRlZmF1bHQgPSBDaGF0R3JvdXA7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL0V2ZW50RW1pdHRlciI6OSwiLi9wYXJ0aWNpcGFudCI6OH1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IGFjdGl2YXRlOwoKdmFyIF9IeXBlcnR5RGlzY292ZXJ5ID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9IeXBlcnR5RGlzY292ZXJ5Jyk7Cgp2YXIgX0h5cGVydHlEaXNjb3ZlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSHlwZXJ0eURpc2NvdmVyeSk7Cgp2YXIgX0lkZW50aXR5TWFuYWdlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSWRlbnRpdHlNYW5hZ2VyJyk7Cgp2YXIgX0lkZW50aXR5TWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JZGVudGl0eU1hbmFnZXIpOwoKdmFyIF9EaXNjb3ZlcnkgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0Rpc2NvdmVyeScpOwoKdmFyIF9EaXNjb3ZlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGlzY292ZXJ5KTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIF9FdmVudEVtaXR0ZXIyID0gcmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRFbWl0dGVyJyk7Cgp2YXIgX0V2ZW50RW1pdHRlcjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FdmVudEVtaXR0ZXIyKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91dGlscycpOwoKdmFyIF9jb21tdW5pY2F0aW9uID0gcmVxdWlyZSgnLi9jb21tdW5pY2F0aW9uJyk7Cgp2YXIgX3BhcnRpY2lwYW50ID0gcmVxdWlyZSgnLi9wYXJ0aWNpcGFudCcpOwoKdmFyIF9wYXJ0aWNpcGFudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYXJ0aWNpcGFudCk7Cgp2YXIgX0NoYXQgPSByZXF1aXJlKCcuL0NoYXQnKTsKCnZhciBfQ2hhdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DaGF0KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0gLyoqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiovCgovLyBTZXJ2aWNlIEZyYW1ld29yawoKCi8vIFV0aWxzCgoKLy8gSW50ZXJuYWxzCgoKLyoqCiogSHlwZXJ0eSBDaGF0OwoqIEBhdXRob3IgVml0b3IgU2lsdmEgW3ZpdG9yLXQtc2lsdmFAdGVsZWNvbS5wdF0KKiBAdmVyc2lvbiAwLjEuMAoqLwoKdmFyIEh5cGVydHlDaGF0ID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoSHlwZXJ0eUNoYXQsIF9FdmVudEVtaXR0ZXIpOwoKICBmdW5jdGlvbiBIeXBlcnR5Q2hhdChoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIeXBlcnR5Q2hhdCk7CgogICAgaWYgKCFoeXBlcnR5VVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBoeXBlcnR5VVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFidXMpIHRocm93IG5ldyBFcnJvcignVGhlIE1pbmlCdXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgogICAgdmFyIF90aGlzMiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihIeXBlcnR5Q2hhdCkuY2FsbCh0aGlzLCBoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICB2YXIgc3luY2hlciA9IG5ldyBfU3luY2hlci5TeW5jaGVyKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbik7CgogICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShoeXBlcnR5VVJMKS5kb21haW47CiAgICB2YXIgaHlwZXJ0eURpc2NvdmVyeSA9IG5ldyBfSHlwZXJ0eURpc2NvdmVyeTIuZGVmYXVsdChoeXBlcnR5VVJMLCBidXMpOwogICAgdmFyIGRpc2NvdmVyeSA9IG5ldyBfRGlzY292ZXJ5Mi5kZWZhdWx0KGh5cGVydHlVUkwsIGJ1cyk7CiAgICB2YXIgaWRlbnRpdHlNYW5hZ2VyID0gbmV3IF9JZGVudGl0eU1hbmFnZXIyLmRlZmF1bHQoaHlwZXJ0eVVSTCwgY29uZmlndXJhdGlvbi5ydW50aW1lVVJMLCBidXMpOwoKICAgIF90aGlzLl9vYmplY3REZXNjVVJMID0gJ2h5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLicgKyBkb21haW4gKyAnLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29tbXVuaWNhdGlvbic7CgogICAgX3RoaXMuX2h5cGVydHlVUkwgPSBoeXBlcnR5VVJMOwogICAgX3RoaXMuX3N5bmNoZXIgPSBzeW5jaGVyOwogICAgX3RoaXMuX2RvbWFpbiA9IGRvbWFpbjsKCiAgICBfdGhpcy5oeXBlcnR5RGlzY292ZXJ5ID0gaHlwZXJ0eURpc2NvdmVyeTsKICAgIF90aGlzLmRpc2NvdmVyeSA9IGRpc2NvdmVyeTsKICAgIF90aGlzLmlkZW50aXR5TWFuYWdlciA9IGlkZW50aXR5TWFuYWdlcjsKCiAgICBjb25zb2xlLmxvZygnRGlzY292ZXI6ICcsIGRpc2NvdmVyeSk7CiAgICBjb25zb2xlLmxvZygnSWRlbnRpdHkgTWFuYWdlcjogJywgaWRlbnRpdHlNYW5hZ2VyKTsKICAgIGNvbnNvbGUubG9nKCdIeXBlcnR5IERpc2NvdmVyeTogJywgaHlwZXJ0eURpc2NvdmVyeSk7CgogICAgc3luY2hlci5vbk5vdGlmaWNhdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbjogJywgZXZlbnQpOwogICAgICBfdGhpcy5fYXV0b1N1YnNjcmliZShldmVudC51cmwpOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzMjsKICB9CgogIC8qKgogICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBjcmVhdGUgYSBuZXcgR3JvdXAgQ2hhdCBwcm92aWRpbmcgdGhlIGlkZW50aWZpZXIgb2YgdGhlIEdyb3VwIHRvIGJlIG5vdGlmaWVkLgogICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSAgICAgICAgICAgICBjaGF0IG5hbWUKICAgKiBAcGFyYW0gIHtVUkwuVXNlclVSTH0gVXNlclVSTExpc3QgTGlzdCBvZiBVc2VyIGFsbG93ZWQKICAgKiBAcmV0dXJuIHtQcm9taXNlfQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEh5cGVydHlDaGF0LCBbewogICAga2V5OiAnY3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUobmFtZSwgcGFydGljaXBhbnRzKSB7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgc3luY2hlciA9IF90aGlzLl9zeW5jaGVyOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgLy8gQ3JlYXRlIG93bmVyIHBhcnRpY2lwYW50CiAgICAgICAgLy8gVE9ETzogY3JlYXRlIGFsbCBpbmZvcm1hdGlvbiB0byBjb21tdW5pY2F0aW9uOwogICAgICAgIF9jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3Qub3duZXIgPSBfdGhpcy5faHlwZXJ0eVVSTDsKICAgICAgICBfY29tbXVuaWNhdGlvbi5jb21tdW5pY2F0aW9uT2JqZWN0Lm5hbWUgPSBuYW1lOwogICAgICAgIF9jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3QuaWQgPSBuYW1lOwogICAgICAgIF9jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3Quc3RhdHVzID0gX2NvbW11bmljYXRpb24uQ29tbXVuaWNhdGlvblN0YXR1cy5PUEVOOwogICAgICAgIF9jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3Quc3RhcnRpbmdUaW1lID0gbmV3IERhdGUoKS50b0pTT04oKTsKICAgICAgICBfY29tbXVuaWNhdGlvbi5jb21tdW5pY2F0aW9uT2JqZWN0Lmxhc3RNb2RpZmllZCA9IF9jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3Quc3RhcnRpbmdUaW1lOwoKICAgICAgICAvLyBTZXQgdGhlIG90aGVyIHN1YnNjcmlwdGlvbiBsaWtlIGEgcGFydGljaXBhbnQKICAgICAgICBfcGFydGljaXBhbnQyLmRlZmF1bHQuaHlwZXJ0eVJlc291cmNlID0gX3RoaXMuX2h5cGVydHlVUkw7CiAgICAgICAgX2NvbW11bmljYXRpb24uY29tbXVuaWNhdGlvbk9iamVjdC5wYXJ0aWNpcGFudHMucHVzaChfcGFydGljaXBhbnQyLmRlZmF1bHQpOwoKICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIE1hcHBpbmcgUGFydGljcGFudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG4nKTsKICAgICAgICBfdGhpcy5fbWFwcGluZ1VzZXIocGFydGljaXBhbnRzKS50aGVuKGZ1bmN0aW9uIChoeXBlcnRpZXMpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlU3luY2hlcihoeXBlcnRpZXMsIF9jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3QpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChoeXBlcnRpZXMpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlU3luY2hlcihoeXBlcnRpZXMsIF9jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3QpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3RSZXBvcnRlcikgewogICAgICAgICAgY29uc29sZS5pbmZvKCczLiBSZXR1cm4gQ3JlYXRlIERhdGEgT2JqZWN0IFJlcG9ydGVyJywgZGF0YU9iamVjdFJlcG9ydGVyKTsKCiAgICAgICAgICB2YXIgY2hhdCA9IG5ldyBfQ2hhdDIuZGVmYXVsdChzeW5jaGVyLCBfdGhpcy5kaXNjb3ZlcnksIF90aGlzLl9kb21haW4pOwogICAgICAgICAgY2hhdC5kYXRhT2JqZWN0UmVwb3J0ZXIgPSBkYXRhT2JqZWN0UmVwb3J0ZXI7CiAgICAgICAgICBfdGhpcy5jaGF0ID0gY2hhdDsKICAgICAgICAgIHJlc29sdmUoY2hhdCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2pvaW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGpvaW4ocmVzb3VyY2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHN5bmNoZXIgPSBfdGhpcy5fc3luY2hlcjsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFN5bmNoZXIgc3Vic2NyaWJlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG4nKTsKICAgICAgICBjb25zb2xlLmluZm8ocmVzb3VyY2UpOwoKICAgICAgICBzeW5jaGVyLnN1YnNjcmliZShfdGhpcy5fb2JqZWN0RGVzY1VSTCwgcmVzb3VyY2UpLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3RPYnNlcnZlcikgewogICAgICAgICAgY29uc29sZS5pbmZvKCdEYXRhIE9iamVjdCBPYnNlcnZlcjogJywgZGF0YU9iamVjdE9ic2VydmVyKTsKICAgICAgICAgIHZhciBjaGF0ID0gbmV3IF9DaGF0Mi5kZWZhdWx0KHN5bmNoZXIsIF90aGlzLmRpc2NvdmVyeSwgX3RoaXMuX2RvbWFpbik7CiAgICAgICAgICBjaGF0LmRhdGFPYmplY3RPYnNlcnZlciA9IGRhdGFPYmplY3RPYnNlcnZlcjsKCiAgICAgICAgICByZXNvbHZlKGNoYXQpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEludml0ZSBvdGhlciBvYnNlcnZlcnMKICAgICAqIEBwYXJhbSAge3VzZXJMaXN0fSBBcnJheSBBcnJheSBvZiBvYmplY3RzIHRoYXQgY29udGluaW5nIHRoZSB1c2VyLmVtYWlsIGFuZCB1c2VyLmRvbWFpbjsKICAgICAqIEByZXR1cm4ge2NoYXR9ICAgICAgICAgICBDaGF0IEdyb3VwIGNvbnRyb2xsZXIKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdpbnZpdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGludml0ZSh1c2VyTGlzdCkgewoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHN5bmNoZXIgPSBfdGhpcy5fc3luY2hlcjsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzLmNoYXQuaW52aXRlKHVzZXJMaXN0KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygndXNlcnMgYXJlIGludml0ZWQnKTsKICAgICAgICAgIHZhciBjaGF0ID0gbmV3IF9DaGF0Mi5kZWZhdWx0KHN5bmNoZXIsIF90aGlzLmRpc2NvdmVyeSwgX3RoaXMuX2RvbWFpbik7CgogICAgICAgICAgcmVzb2x2ZShjaGF0KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2F1dG9TdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hdXRvU3Vic2NyaWJlKHJlc291cmNlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5qb2luKHJlc291cmNlKS50aGVuKGZ1bmN0aW9uIChjaGF0R3JvdXApIHsKICAgICAgICBfdGhpcy50cmlnZ2VyKCdjaGF0OnN1YnNjcmliZScsIGNoYXRHcm91cCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19jcmVhdGVTeW5jaGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlU3luY2hlcihoeXBlcnRpZXMsIGNvbW11bmljYXRpb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHN5bmNoZXIgPSBfdGhpcy5fc3luY2hlcjsKCiAgICAgIGNvbnNvbGUuaW5mbygnSGF2ZSAnICsgaHlwZXJ0aWVzLmxlbmd0aCArICcgcGFydGljaXBhbnRzOycpOwogICAgICBjb25zb2xlLmluZm8oJ1dJdGggY29tbXVuaWNhdGlvbk9iamVjdDogJywgY29tbXVuaWNhdGlvbik7CgogICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTeW5jaGVyIENyZWF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFxuJyk7CiAgICAgIHJldHVybiBzeW5jaGVyLmNyZWF0ZShfdGhpcy5fb2JqZWN0RGVzY1VSTCwgaHlwZXJ0aWVzLCBjb21tdW5pY2F0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfbWFwcGluZ1VzZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tYXBwaW5nVXNlcih1c2VyTGlzdCkgewoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBoeXBlcnRpZXMgPSBbXTsKICAgICAgICB2YXIgY291bnQgPSAwOwoKICAgICAgICBjb25zb2xlLmxvZygnVXNlciBMaXN0OicsIHVzZXJMaXN0LCB1c2VyTGlzdC5sZW5ndGgpOwoKICAgICAgICBpZiAodXNlckxpc3QubGVuZ3RoID09PSAwKSByZWplY3QoaHlwZXJ0aWVzKTsKCiAgICAgICAgdmFyIHJlc3VsdFVzZXJzID0gZnVuY3Rpb24gcmVzdWx0VXNlcnMoKSB7CiAgICAgICAgICBpZiAoY291bnQgPT09IHVzZXJMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICBjb25zb2xlLmluZm8oJ0hhdmUgJyArIGh5cGVydGllcy5sZW5ndGggKyAndXNlcnMgZm91bmQ7Jyk7CiAgICAgICAgICAgIHJlc29sdmUoaHlwZXJ0aWVzKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2YXIgYWN0aXZlVXNlcnMgPSBmdW5jdGlvbiBhY3RpdmVVc2Vycyh1c2VyKSB7CiAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgaHlwZXJ0aWVzLnB1c2godXNlci5oeXBlcnR5VVJMKTsKICAgICAgICAgIHJlc3VsdFVzZXJzKCk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGluYWN0aXZlVXNlcnMgPSBmdW5jdGlvbiBpbmFjdGl2ZVVzZXJzKCkgewogICAgICAgICAgY291bnQrKzsKICAgICAgICAgIHJlc3VsdFVzZXJzKCk7CiAgICAgICAgfTsKCiAgICAgICAgdXNlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgY29uc29sZS5sb2codXNlcik7CiAgICAgICAgICBpZiAodXNlci5lbWFpbC5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHlQZXJVc2VyKHVzZXIuZW1haWwsIHVzZXIuZG9tYWluKS50aGVuKGFjdGl2ZVVzZXJzKS5jYXRjaChpbmFjdGl2ZVVzZXJzKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSHlwZXJ0eUNoYXQ7Cn0oX0V2ZW50RW1pdHRlcjMuZGVmYXVsdCk7CgpmdW5jdGlvbiBhY3RpdmF0ZShoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pIHsKCiAgcmV0dXJuIHsKICAgIG5hbWU6ICdIeXBlcnR5Q2hhdCcsCiAgICBpbnN0YW5jZTogbmV3IEh5cGVydHlDaGF0KGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbikKICB9Owp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL0V2ZW50RW1pdHRlciI6OSwiLi4vdXRpbHMvdXRpbHMiOjEwLCIuL0NoYXQiOjUsIi4vY29tbXVuaWNhdGlvbiI6NywiLi9wYXJ0aWNpcGFudCI6OCwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9EaXNjb3ZlcnkiOjEsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSHlwZXJ0eURpc2NvdmVyeSI6Miwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9JZGVudGl0eU1hbmFnZXIiOjMsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlciI6NH1dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Ci8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKdmFyIENvbW11bmljYXRpb25TdGF0dXMgPSBleHBvcnRzLkNvbW11bmljYXRpb25TdGF0dXMgPSB7CiAgT1BFTjogJ29wZW4nLAogIFBFTkRJTkc6ICdwZW5kaW5nJywKICBDTE9TRUQ6ICdjbG9zZWQnLAogIFBBVVNFRDogJ3BhdXNlZCcsCiAgRkFJTEVEOiAnZmFpbGVkJwp9OwoKdmFyIGNvbW11bmljYXRpb25PYmplY3QgPSBleHBvcnRzLmNvbW11bmljYXRpb25PYmplY3QgPSB7CiAgaWQ6ICcnLAogIG5hbWU6ICcnLAogIG93bmVyOiAnJywKICBzdGFydGluZ1RpbWU6ICcnLAogIGxhc3RNb2RpZmllZDogJycsCiAgZHVyYXRpb246ICcnLAogIHN0YXR1czogJycsCiAgcW9zOiAnJywKICBwYXJ0aWNpcGFudHM6IFtdCn07Cgp9LHt9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCnZhciBwYXJ0aWNpcGFudCA9IHsKICBzdGF0dXM6ICcnLAogIGh5cGVydHlSZXNvdXJjZTogJycsCiAgaWRlbnRpdHk6ICcnCn07CgpleHBvcnRzLmRlZmF1bHQgPSBwYXJ0aWNpcGFudDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKLyoqCiAqIEV2ZW50RW1pdHRlcgogKiBBbGwgY2xhc3NlcyB3aGljaCBleHRlbmRzIHRoaXMsIGNhbiBoYXZlIGFkZEV2ZW50TGlzdGVuZXIgYW5kIHRyaWdnZXIgZXZlbnRzOwogKi8KCnZhciBFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRXZlbnRFbWl0dGVyLCBbewogICAga2V5OiAiYWRkRXZlbnRMaXN0ZW5lciIsCgoKICAgIC8qKgogICAgICogYWRkRXZlbnRMaXN0ZW5lciBsaXN0ZW4gZm9yIGFuIGV2ZW50VHlwZQogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgIGV2ZW50VHlwZSAtIGxpc3RlbmluZyBmb3IgdGhpcyB0eXBlIG9mIGV2ZW50CiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gICAgICAgY2IgICAgICAgIC0gY2FsbGJhY2sgZnVuY3Rpb24gd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBldmVudCBpdCBpcyBpbnZva2VkCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXNbZXZlbnRUeXBlXSA9IGNiOwogICAgfQoKICAgIC8qKgogICAgICogSW52b2tlIHRoZSBldmVudFR5cGUKICAgICAqIEBwYXJhbSAge3N0cmluZ30gZXZlbnRUeXBlIC0gZXZlbnQgd2lsbCBiZSBpbnZva2VkCiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBhcmFtcyAtIHBhcmFtZXRlcnMgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGFkZEV2ZW50TGlzdGVuZXIKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ0cmlnZ2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyKGV2ZW50VHlwZSwgcGFyYW1zKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXNbZXZlbnRUeXBlXSkgewogICAgICAgIF90aGlzW2V2ZW50VHlwZV0ocGFyYW1zKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIEV2ZW50RW1pdHRlcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gRXZlbnRFbWl0dGVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRpdmlkZVVSTCA9IGRpdmlkZVVSTDsKZXhwb3J0cy5kZWVwQ2xvbmUgPSBkZWVwQ2xvbmU7CmV4cG9ydHMuZ2V0Q29uZmlnID0gZ2V0Q29uZmlnOwpleHBvcnRzLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYTsKZXhwb3J0cy5zZXJpYWxpemUgPSBzZXJpYWxpemU7CmV4cG9ydHMuZ2V0VGVtcGxhdGUgPSBnZXRUZW1wbGF0ZTsKLyoqCiAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiovCgovLyBqc2hpbnQgYnJvd3Nlcjp0cnVlLCBqcXVlcnk6IHRydWUKLy8ganNoaW50IHZhcnN0bXQ6IHRydWUKLyogZ2xvYmFsIEhhbmRsZWJhcnMgKi8KCi8qKgogKiBTdXBwb3J0IG1vZHVsZSB3aXRoIHNvbWUgZnVuY3Rpb25zIHdpbGwgYmUgdXNlZnVsCiAqIEBtb2R1bGUgdXRpbHMKICovCgovKioKICogQHR5cGVkZWYgZGl2aWRlVVJMCiAqIEB0eXBlIE9iamVjdAogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTAogKi8KCi8qKgogKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkKICogQHBhcmFtICB7VVJMLlVSTH0gdXJsIC0gdXJsIGFkZHJlc3MKICogQHJldHVybiB7ZGl2aWRlVVJMfSB0aGUgcmVzdWx0IG9mIGRpdmlkZVVSTAogKi8KZnVuY3Rpb24gZGl2aWRlVVJMKHVybCkgewoKICAvLyBsZXQgcmUgPSAvKFthLXpBLVotXSopPzpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fVwuW2Etel17Miw2fVxiKSooXC9bXC9cZFx3XC4tXSopKig/OltcP10pKiguKykqL2dpOwogIHZhciByZSA9IC8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpOwogIHZhciBzdWJzdCA9ICckMSwkMiwkMyc7CiAgdmFyIHBhcnRzID0gdXJsLnJlcGxhY2UocmUsIHN1YnN0KS5zcGxpdCgnLCcpOwoKICAvLyBJZiB0aGUgdXJsIGhhcyBubyBwcm90b2NvbCwgdGhlIGRlZmF1bHQgcHJvdG9jb2wgc2V0IGlzIGh0dHBzCiAgaWYgKHBhcnRzWzBdID09PSB1cmwpIHsKICAgIHBhcnRzWzBdID0gJ2h0dHBzJzsKICAgIHBhcnRzWzFdID0gdXJsOwogIH0KCiAgdmFyIHJlc3VsdCA9IHsKICAgIHR5cGU6IHBhcnRzWzBdLAogICAgZG9tYWluOiBwYXJ0c1sxXSwKICAgIGlkZW50aXR5OiBwYXJ0c1syXQogIH07CgogIHJldHVybiByZXN1bHQ7Cn0KCi8qKgogKiBNYWtlIGEgQ09QWSBvZiB0aGUgb3JpZ2luYWwgZGF0YQogKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogLSBvYmplY3QgdG8gYmUgY2xvbmVkCiAqIEByZXR1cm4ge09iamVjdH0KICovCmZ1bmN0aW9uIGRlZXBDbG9uZShvYmopIHsKICAvL1RPRE86IHNpbXBsZSBidXQgaW5lZmZpY2llbnQgSlNPTiBkZWVwIGNsb25lLi4uCiAgaWYgKG9iaikgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7Cn0KCi8qKgogKiBHZXQgdGhlIGNvbmZpZ3VyYXRpb24gZnJvbSBhbiBqc29uIGZpbGU7CiAqIEBwYXJhbSAge0pTT05PYmplY3R9IGpzb25GaWxlCiAqIEByZXR1cm4ge29iamVjdH0KICovCmZ1bmN0aW9uIGdldENvbmZpZyhKU09OT2JqZWN0KSB7CiAgY29uc29sZS5sb2coJ2RldmVsb3AnKTsKICByZXR1cm4gSlNPTk9iamVjdFsnZGV2ZWxvcCddOwp9CgovKioKICogR2V0IFdlYlJUQyBBUEkgcmVzb3VyY2VzCiAqIEBwYXJhbSAge09iamVjdH0gICAgIG9wdGlvbnMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGluZm9ybWF0aW9uIHRoYXQgcmVzb3VyY2VzIHdpbGwgYmUgdXNlZCAoY2FtZXJhLCBtaWMsIHJlc29sdXRpb24sIGV0Yyk7CiAqIEByZXR1cm4ge1Byb21pc2V9CiAqLwpmdW5jdGlvbiBnZXRVc2VyTWVkaWEoY29uc3RyYWludHMpIHsKCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihmdW5jdGlvbiAobWVkaWFTdHJlYW0pIHsKICAgICAgcmVzb2x2ZShtZWRpYVN0cmVhbSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgIHJlamVjdChyZWFzb24pOwogICAgfSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHNlcmlhbGl6ZSgpIHsKCiAgJC5mbi5zZXJpYWxpemVPYmplY3QgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbyA9IHt9OwogICAgdmFyIGEgPSB0aGlzLnNlcmlhbGl6ZUFycmF5KCk7CiAgICAkLmVhY2goYSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAob1t0aGlzLm5hbWVdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAoIW9bdGhpcy5uYW1lXS5wdXNoKSB7CiAgICAgICAgICBvW3RoaXMubmFtZV0gPSBbb1t0aGlzLm5hbWVdXTsKICAgICAgICB9CgogICAgICAgIG9bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWUgfHwgJycpOwogICAgICB9IGVsc2UgewogICAgICAgIG9bdGhpcy5uYW1lXSA9IHRoaXMudmFsdWUgfHwgJyc7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBvOwogIH07CgogICQuZm4uc2VyaWFsaXplT2JqZWN0QXJyYXkgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbyA9IHt9OwogICAgdmFyIGEgPSB0aGlzLnNlcmlhbGl6ZUFycmF5KCk7CiAgICAkLmVhY2goYSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAob1t0aGlzLm5hbWVdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAoIW9bdGhpcy5uYW1lXS5wdXNoKSB7CiAgICAgICAgICBvW3RoaXMubmFtZV0gPSBbb1t0aGlzLm5hbWVdXTsKICAgICAgICB9CgogICAgICAgIG9bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWUgfHwgJycpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghb1t0aGlzLm5hbWVdKSBvW3RoaXMubmFtZV0gPSBbXTsKICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIG87CiAgfTsKfQoKZnVuY3Rpb24gZ2V0VGVtcGxhdGUocGF0aCwgc2NyaXB0KSB7CgogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgaWYgKEhhbmRsZWJhcnMudGVtcGxhdGVzID09PSB1bmRlZmluZWQgfHwgSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0gPT09IHVuZGVmaW5lZCkgewogICAgICBIYW5kbGViYXJzLnRlbXBsYXRlcyA9IHt9OwogICAgfSBlbHNlIHsKICAgICAgcmVzb2x2ZShIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXSk7CiAgICB9CgogICAgdmFyIHRlbXBsYXRlRmlsZSA9ICQuYWpheCh7CiAgICAgIHVybDogcGF0aCArICcuaGJzJywKICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7CiAgICAgICAgSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0gPSBIYW5kbGViYXJzLmNvbXBpbGUoZGF0YSk7CiAgICAgIH0sCgogICAgICBmYWlsOiBmdW5jdGlvbiBmYWlsKHJlYXNvbikgewogICAgICAgIHJldHVybiByZWFzb247CiAgICAgIH0KICAgIH0pOwoKICAgIHZhciBzY3JpcHRGaWxlID0gJC5nZXRTY3JpcHQoc2NyaXB0KTsKCiAgICB2YXIgcmVxdWVzdHMgPSBbXTsKICAgIGlmIChwYXRoKSByZXF1ZXN0cy5wdXNoKHRlbXBsYXRlRmlsZSk7CiAgICBpZiAoc2NyaXB0KSByZXF1ZXN0cy5wdXNoKHNjcmlwdEZpbGUpOwoKICAgIFByb21pc2UuYWxsKHJlcXVlc3RzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgcmVzb2x2ZShIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgIHJlamVjdChyZWFzb24pOwogICAgfSk7CiAgfSk7Cn0KCn0se31dfSx7fSxbNl0pKDYpCn0pOw==",
      "sourceCodeClassname": "HypertyChat",
      "encoding": "base64",
      "signature": ""
    },
    "hypertyType": [
      "audio",
      "video"
    ],
    "cguid": 10004,
    "version": "0.1",
    "description": "Description of HypertyChat",
    "objectName": "HypertyChat",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "GroupChat": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBIeXBlcnR5RGlzY292ZXJ5LmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MTYgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuSHlwZXJ0eURpc2NvdmVyeT1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYyl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgdT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYyYmdSlyZXR1cm4gdShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBhPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBhLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGF9dmFyIGY9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sZixmLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5Ijo3fV0sMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjh9XSwzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjo5fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjEwfV0sNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsaVsiZGVmYXVsdCJdKShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKX0seyIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjJ9XSw3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuKG4uSlNPTiYmbi5KU09OLnN0cmluZ2lmeXx8SlNPTi5zdHJpbmdpZnkpLmFwcGx5KEpTT04sYXJndW1lbnRzKX19LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2fV0sODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6Mzh9XSw5OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo2Mn1dLDEwOltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjoxNiwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6NjMsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjY0LCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjY1LCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjY2fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwxMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwxMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0IjozMX1dLDE0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MTUsIi4vJC53a3MiOjU5fV0sMTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwxNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDE3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjExfV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjIyfV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmN0eCIpLHM9InByb3RvdHlwZSIsYz1mdW5jdGlvbihlLHQscil7dmFyIHUsYSxmLGw9ZSZjLkYsZD1lJmMuRyxwPWUmYy5TLCQ9ZSZjLlAsdj1lJmMuQix5PWUmYy5XLGg9ZD9vOm9bdF18fChvW3RdPXt9KSxiPWQ/bjpwP25bdF06KG5bdF18fHt9KVtzXTtkJiYocj10KTtmb3IodSBpbiByKWE9IWwmJmImJnUgaW4gYixhJiZ1IGluIGh8fChmPWE/Ylt1XTpyW3VdLGhbdV09ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGJbdV0/clt1XTp2JiZhP2koZixuKTp5JiZiW3VdPT1mP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFtzXT1lW3NdLHR9KGYpOiQmJiJmdW5jdGlvbiI9PXR5cGVvZiBmP2koRnVuY3Rpb24uY2FsbCxmKTpmLCQmJigoaFtzXXx8KGhbc109e30pKVt1XT1mKSl9O2MuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsdC5leHBvcnRzPWN9LHsiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmdsb2JhbCI6MjR9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDIzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLG89ZSgiLi8kLml0ZXItY2FsbCIpLGk9ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxzPWUoIi4vJC5hbi1vYmplY3QiKSxjPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBmLGwsZCxwPXUoZSksJD1uKHIsYSx0PzI6MSksdj0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBwKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKGkocCkpZm9yKGY9YyhlLmxlbmd0aCk7Zj52O3YrKyl0PyQocyhsPWVbdl0pWzBdLGxbMV0pOiQoZVt2XSk7ZWxzZSBmb3IoZD1wLmNhbGwoZSk7IShsPWQubmV4dCgpKS5kb25lOylvKGQsJCxsLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1hcnJheS1pdGVyIjozMCwiLi8kLml0ZXItY2FsbCI6MzIsIi4vJC50by1sZW5ndGgiOjU2LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6NjB9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDI1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDI2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjozOCwiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLnByb3BlcnR5LWRlc2MiOjQyfV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6MjR9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sMjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjE1fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fGlbb109PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2goaSl7dmFyIHM9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09cyYmbihzLmNhbGwoZSkpLGl9fX0seyIuLyQuYW4tb2JqZWN0IjoxM31dLDMzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxpPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLHM9e307ZSgiLi8kLmhpZGUiKShzLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShzLHtuZXh0Om8oMSxyKX0pLGkoZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjozOCwiLi8kLmhpZGUiOjI2LCIuLyQucHJvcGVydHktZGVzYyI6NDIsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxvPWUoIi4vJC5leHBvcnQiKSxpPWUoIi4vJC5yZWRlZmluZSIpLHM9ZSgiLi8kLmhpZGUiKSxjPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxhPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksbD1lKCIuLyQiKS5nZXRQcm90byxkPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxwPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLCQ9IkBAaXRlcmF0b3IiLHY9ImtleXMiLHk9InZhbHVlcyIsaD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsYixtLGcseCl7YShyLHQsYik7dmFyIGosdyxfPWZ1bmN0aW9uKGUpe2lmKCFwJiZlIGluIFApcmV0dXJuIFBbZV07c3dpdGNoKGUpe2Nhc2UgdjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSB5OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGs9dCsiIEl0ZXJhdG9yIixPPW09PXksTT0hMSxQPWUucHJvdG90eXBlLFM9UFtkXXx8UFskXXx8bSYmUFttXSxFPVN8fF8obSk7aWYoUyl7dmFyIFU9bChFLmNhbGwobmV3IGUpKTtmKFUsaywhMCksIW4mJmMoUCwkKSYmcyhVLGQsaCksTyYmUy5uYW1lIT09eSYmKE09ITAsRT1mdW5jdGlvbigpe3JldHVybiBTLmNhbGwodGhpcyl9KX1pZihuJiYheHx8IXAmJiFNJiZQW2RdfHxzKFAsZCxFKSx1W3RdPUUsdVtrXT1oLG0paWYoaj17dmFsdWVzOk8/RTpfKHkpLGtleXM6Zz9FOl8odiksZW50cmllczpPP18oImVudHJpZXMiKTpFfSx4KWZvcih3IGluIGopdyBpbiBQfHxpKFAsdyxqW3ddKTtlbHNlIG8oby5QK28uRioocHx8TSksdCxqKTtyZXR1cm4gan19LHsiLi8kIjozOCwiLi8kLmV4cG9ydCI6MjEsIi4vJC5oYXMiOjI1LCIuLyQuaGlkZSI6MjYsIi4vJC5pdGVyLWNyZWF0ZSI6MzMsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQubGlicmFyeSI6MzksIi4vJC5yZWRlZmluZSI6NDQsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aVsicmV0dXJuIl09ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2gocyl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3I9ITB9LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChjKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjU5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sMzc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDM5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQudGFzayIpLnNldCx1PXMuTXV0YXRpb25PYnNlcnZlcnx8cy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGE9cy5wcm9jZXNzLGY9cy5Qcm9taXNlLGw9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYSksZD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IobCYmKGU9YS5kb21haW4pJiYoYS5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtvPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGwpaT1mdW5jdGlvbigpe2EubmV4dFRpY2soZCl9O2Vsc2UgaWYodSl7dmFyIHA9MSwkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShkKS5vYnNlcnZlKCQse2NoYXJhY3RlckRhdGE6ITB9KSxpPWZ1bmN0aW9uKCl7JC5kYXRhPXA9LXB9fWVsc2UgaT1mJiZmLnJlc29sdmU/ZnVuY3Rpb24oKXtmLnJlc29sdmUoKS50aGVuKGQpfTpmdW5jdGlvbigpe2MuY2FsbChzLGQpfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmwmJmEuZG9tYWlufTtvJiYoby5uZXh0PXQpLG58fChuPXQsaSgpKSxvPXR9fSx7Ii4vJC5jb2YiOjE1LCIuLyQuZ2xvYmFsIjoyNCwiLi8kLnRhc2siOjUzfV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxzPXt9O3NbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixzKX19LHsiLi8kLmNvcmUiOjE2LCIuLyQuZXhwb3J0IjoyMSwiLi8kLmZhaWxzIjoyMn1dLDQyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDQzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6NDR9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjoyNn1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxvPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5hbi1vYmplY3QiKSxzPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbyh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixvKXt0cnl7bz1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxvKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGkpe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSx0KSxyP2UuX19wcm90b19fPXQ6byhlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpzfX0seyIuLyQiOjM4LCIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1vYmplY3QiOjMxfV0sNDc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxvPWUoIi4vJCIpLGk9ZSgiLi8kLmRlc2NyaXB0b3JzIikscz1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtpJiZ0JiYhdFtzXSYmby5zZXREZXNjKHQscyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjM4LCIuLyQuY29yZSI6MTYsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC53a3MiOjU5fV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLG89ZSgiLi8kLmhhcyIpLGk9ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIW8oZT1yP2U6ZS5wcm90b3R5cGUsaSkmJm4oZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjM4LCIuLyQuaGFzIjoyNSwiLi8kLndrcyI6NTl9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPSJfX2NvcmUtanNfc2hhcmVkX18iLGk9bltvXXx8KG5bb109e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0seyIuLyQuZ2xvYmFsIjoyNH1dLDUwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLG89ZSgiLi8kLmEtZnVuY3Rpb24iKSxpPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC53a3MiOjU5fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGkscyxjPVN0cmluZyhvKHQpKSx1PW4ociksYT1jLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1hP2U/IiI6dm9pZCAwOihpPWMuY2hhckNvZGVBdCh1KSw1NTI5Nj5pfHxpPjU2MzE5fHx1KzE9PT1hfHwocz1jLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fHM+NTczNDM/ZT9jLmNoYXJBdCh1KTppOmU/Yy5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsocy01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQudG8taW50ZWdlciI6NTR9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYT1lKCIuLyQuZG9tLWNyZWF0ZSIpLGY9ZSgiLi8kLmdsb2JhbCIpLGw9Zi5wcm9jZXNzLGQ9Zi5zZXRJbW1lZGlhdGUscD1mLmNsZWFySW1tZWRpYXRlLCQ9Zi5NZXNzYWdlQ2hhbm5lbCx2PTAseT17fSxoPSJvbnJlYWR5c3RhdGVjaGFuZ2UiLGI9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZih5Lmhhc093blByb3BlcnR5KGUpKXt2YXIgdD15W2VdO2RlbGV0ZSB5W2VdLHQoKX19LG09ZnVuY3Rpb24oZSl7Yi5jYWxsKGUuZGF0YSl9O2QmJnB8fChkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiB5Wysrdl09ZnVuY3Rpb24oKXtjKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgeVtlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikobCk/bj1mdW5jdGlvbihlKXtsLm5leHRUaWNrKHMoYixlLDEpKX06JD8obz1uZXcgJCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9bSxuPXMoaS5wb3N0TWVzc2FnZSxpLDEpKTpmLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtmLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtLCExKSk6bj1oIGluIGEoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYSgic2NyaXB0IikpW2hdPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0seyIuLyQuY29mIjoxNSwiLi8kLmN0eCI6MTcsIi4vJC5kb20tY3JlYXRlIjoyMCwiLi8kLmdsb2JhbCI6MjQsIi4vJC5odG1sIjoyNywiLi8kLmludm9rZSI6Mjh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0Iiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQuaW9iamVjdCI6Mjl9XSw1NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjU0fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6MTh9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsbz1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24rbykudG9TdHJpbmcoMzYpKX19LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksbz1lKCIuLyQudWlkIiksaT1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aSYmaVtlXXx8KGl8fG8pKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuc2hhcmVkIjo0OSwiLi8kLnVpZCI6NTh9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLG89ZSgiLi8kLml0ZXItc3RlcCIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpLHM9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLGkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjoxMiwiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLml0ZXItc3RlcCI6MzYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQudG8taW9iamVjdCI6NTV9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjQxLCIuLyQudG8tb2JqZWN0Ijo1N31dLDYzOltmdW5jdGlvbihlLHQscil7fSx7fV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4sbz1lKCIuLyQiKSxpPWUoIi4vJC5saWJyYXJ5Iikscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQuY3R4IiksdT1lKCIuLyQuY2xhc3NvZiIpLGE9ZSgiLi8kLmV4cG9ydCIpLGY9ZSgiLi8kLmlzLW9iamVjdCIpLGw9ZSgiLi8kLmFuLW9iamVjdCIpLGQ9ZSgiLi8kLmEtZnVuY3Rpb24iKSxwPWUoIi4vJC5zdHJpY3QtbmV3IiksJD1lKCIuLyQuZm9yLW9mIiksdj1lKCIuLyQuc2V0LXByb3RvIikuc2V0LHk9ZSgiLi8kLnNhbWUtdmFsdWUiKSxoPWUoIi4vJC53a3MiKSgic3BlY2llcyIpLGI9ZSgiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiKSxtPWUoIi4vJC5taWNyb3Rhc2siKSxnPSJQcm9taXNlIix4PXMucHJvY2VzcyxqPSJwcm9jZXNzIj09dSh4KSx3PXNbZ10sXz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgdyhmdW5jdGlvbigpe30pO3JldHVybiBlJiYodC5jb25zdHJ1Y3Rvcj1PYmplY3QpLHcucmVzb2x2ZSh0KT09PXR9LGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPW5ldyB3KGUpO3JldHVybiB2KHIsdC5wcm90b3R5cGUpLHJ9dmFyIHI9ITE7dHJ5e2lmKHI9dyYmdy5yZXNvbHZlJiZfKCksdih0LHcpLHQucHJvdG90eXBlPW8uY3JlYXRlKHcucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dH19KSx0LnJlc29sdmUoNSkudGhlbihmdW5jdGlvbigpe30paW5zdGFuY2VvZiB0fHwocj0hMSksciYmZSgiLi8kLmRlc2NyaXB0b3JzIikpe3ZhciBuPSExO3cucmVzb2x2ZShvLnNldERlc2Moe30sInRoZW4iLHtnZXQ6ZnVuY3Rpb24oKXtuPSEwfX0pKSxyPW59fWNhdGNoKGkpe3I9ITF9cmV0dXJuIHJ9KCksTz1mdW5jdGlvbihlLHQpe3JldHVybiBpJiZlPT09dyYmdD09PW4/ITA6eShlLHQpfSxNPWZ1bmN0aW9uKGUpe3ZhciB0PWwoZSlbaF07cmV0dXJuIHZvaWQgMCE9dD90OmV9LFA9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGYoZSkmJiJmdW5jdGlvbiI9PXR5cGVvZih0PWUudGhlbik/dDohMX0sUz1mdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9ZCh0KSx0aGlzLnJlamVjdD1kKHIpfSxFPWZ1bmN0aW9uKGUpe3RyeXtlKCl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fX0sVT1mdW5jdGlvbihlLHQpe2lmKCFlLm4pe2Uubj0hMDt2YXIgcj1lLmM7bShmdW5jdGlvbigpe2Zvcih2YXIgbj1lLnYsbz0xPT1lLnMsaT0wLGM9ZnVuY3Rpb24odCl7dmFyIHIsaSxzPW8/dC5vazp0LmZhaWwsYz10LnJlc29sdmUsdT10LnJlamVjdDt0cnl7cz8ob3x8KGUuaD0hMCkscj1zPT09ITA/bjpzKG4pLHI9PT10LnByb21pc2U/dShUeXBlRXJyb3IoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KGk9UChyKSk/aS5jYWxsKHIsYyx1KTpjKHIpKTp1KG4pfWNhdGNoKGEpe3UoYSl9fTtyLmxlbmd0aD5pOyljKHJbaSsrXSk7ci5sZW5ndGg9MCxlLm49ITEsdCYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0LHIsbz1lLnA7VChvKSYmKGo/eC5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLG4sbyk6KHQ9cy5vbnVuaGFuZGxlZHJlamVjdGlvbik/dCh7cHJvbWlzZTpvLHJlYXNvbjpufSk6KHI9cy5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixuKSksZS5hPXZvaWQgMH0sMSl9KX19LFQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1lLl9kLG49ci5hfHxyLmMsbz0wO2lmKHIuaClyZXR1cm4hMTtmb3IoO24ubGVuZ3RoPm87KWlmKHQ9bltvKytdLHQuZmFpbHx8IVQodC5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sRD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuZHx8KHQuZD0hMCx0PXQucnx8dCx0LnY9ZSx0LnM9Mix0LmE9dC5jLnNsaWNlKCksVSh0LCEwKSl9LEE9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLmQpe3IuZD0hMCxyPXIucnx8cjt0cnl7aWYoci5wPT09ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9UChlKSk/bShmdW5jdGlvbigpe3ZhciBuPXtyOnIsZDohMX07dHJ5e3QuY2FsbChlLGMoQSxuLDEpLGMoRCxuLDEpKX1jYXRjaChvKXtELmNhbGwobixvKX19KTooci52PWUsci5zPTEsVShyLCExKSl9Y2F0Y2gobil7RC5jYWxsKHtyOnIsZDohMX0sbil9fX07a3x8KHc9ZnVuY3Rpb24oZSl7ZChlKTt2YXIgdD10aGlzLl9kPXtwOnAodGhpcyx3LGcpLGM6W10sYTp2b2lkIDAsczowLGQ6ITEsdjp2b2lkIDAsaDohMSxuOiExfTt0cnl7ZShjKEEsdCwxKSxjKEQsdCwxKSl9Y2F0Y2gocil7RC5jYWxsKHQscil9fSxlKCIuLyQucmVkZWZpbmUtYWxsIikody5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgUyhiKHRoaXMsdykpLG49ci5wcm9taXNlLG89dGhpcy5fZDtyZXR1cm4gci5vaz0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOiEwLHIuZmFpbD0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdCxvLmMucHVzaChyKSxvLmEmJm8uYS5wdXNoKHIpLG8ucyYmVShvLCExKSxufSwiY2F0Y2giOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pKSxhKGEuRythLlcrYS5GKiFrLHtQcm9taXNlOnd9KSxlKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSh3LGcpLGUoIi4vJC5zZXQtc3BlY2llcyIpKGcpLG49ZSgiLi8kLmNvcmUiKVtnXSxhKGEuUythLkYqIWssZyx7cmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZWplY3Q7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiooIWt8fF8oITApKSxnLHtyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiB3JiZPKGUuY29uc3RydWN0b3IsdGhpcykpcmV0dXJuIGU7dmFyIHQ9bmV3IFModGhpcykscj10LnJlc29sdmU7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiohKGsmJmUoIi4vJC5pdGVyLWRldGVjdCIpKGZ1bmN0aW9uKGUpe3cuYWxsKGUpWyJjYXRjaCJdKGZ1bmN0aW9uKCl7fSl9KSksZyx7YWxsOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUyh0KSxuPXIucmVzb2x2ZSxpPXIucmVqZWN0LHM9W10sYz1FKGZ1bmN0aW9uKCl7JChlLCExLHMucHVzaCxzKTt2YXIgcj1zLmxlbmd0aCxjPUFycmF5KHIpO3I/by5lYWNoLmNhbGwocyxmdW5jdGlvbihlLG8pe3ZhciBzPSExO3QucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3N8fChzPSEwLGNbb109ZSwtLXJ8fG4oYykpfSxpKX0pOm4oYyl9KTtyZXR1cm4gYyYmaShjLmVycm9yKSxyLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9TSh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZWplY3Qsbz1FKGZ1bmN0aW9uKCl7JChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8mJm4oby5lcnJvciksci5wcm9taXNlfX0pfSx7Ii4vJCI6MzgsIi4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jbGFzc29mIjoxNCwiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mb3Itb2YiOjIzLCIuLyQuZ2xvYmFsIjoyNCwiLi8kLmlzLW9iamVjdCI6MzEsIi4vJC5pdGVyLWRldGVjdCI6MzUsIi4vJC5saWJyYXJ5IjozOSwiLi8kLm1pY3JvdGFzayI6NDAsIi4vJC5yZWRlZmluZS1hbGwiOjQzLCIuLyQuc2FtZS12YWx1ZSI6NDUsIi4vJC5zZXQtcHJvdG8iOjQ2LCIuLyQuc2V0LXNwZWNpZXMiOjQ3LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciI6NTAsIi4vJC5zdHJpY3QtbmV3Ijo1MSwiLi8kLndrcyI6NTl9XSw2NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuc3RyaW5nLWF0IikoITApO2UoIi4vJC5pdGVyLWRlZmluZSIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LHI9dGhpcy5faTtyZXR1cm4gcj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1uKHQsciksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LHsiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLnN0cmluZy1hdCI6NTJ9XSw2NjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpO24uTm9kZUxpc3Q9bi5IVE1MQ29sbGVjdGlvbj1uLkFycmF5fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuL2VzNi5hcnJheS5pdGVyYXRvciI6NjF9XSw2NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCIuL2h5cGVydHktZGlzY292ZXJ5L0h5cGVydHlEaXNjb3ZlcnkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWlbImRlZmF1bHQiXSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vaHlwZXJ0eS1kaXNjb3ZlcnkvSHlwZXJ0eURpc2NvdmVyeSI6Njh9XSw2ODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGM9bihzKSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGE9bih1KSxmPWUoIi4uL3V0aWxzL3V0aWxzIiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG49dGhpcztuLm1lc3NhZ2VCdXM9cixuLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG4uZGlzY292ZXJ5VVJMPXR9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RQZXJOYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ImRhdGFPYmplY3Q6Ly8iK2V9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZS51cmw7bj9lKG4pOnQoIkRhdGFPYmplY3QgbmFtZSBkb2VzIG5vdCBleGlzdCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eVBlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6b319O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZTogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJtZXNzYWdlIHJlcGx5IixyKTt2YXIgbz12b2lkIDAsaT12b2lkIDAscz12b2lkIDAsYz1yLmJvZHkudmFsdWU7Zm9yKG8gaW4gYylpZih2b2lkIDAhPT1jW29dLmxhc3RNb2RpZmllZClpZih2b2lkIDA9PT1pKWk9bmV3IERhdGUoY1tvXS5sYXN0TW9kaWZpZWQpLHM9bztlbHNle3ZhciB1PW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKTtpLmdldFRpbWUoKTx1LmdldFRpbWUoKSYmKGk9dSxzPW8pfWNvbnNvbGUubG9nKCJMYXN0IEh5cGVydHk6ICIscyxpKTt2YXIgYT1zO2lmKHZvaWQgMD09PWEpcmV0dXJuIG4oIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKTt2YXIgZj17aWQ6ZSxkZXNjcmlwdG9yOmNbYV0uZGVzY3JpcHRvcixoeXBlcnR5VVJMOmF9O2NvbnNvbGUubG9nKCI9PT0+IGh5cGVydHlEaXNjb3ZlcnkgbWVzc2FnZUJ1bmRsZTogIixmKSx0KGYpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPSJ1c2VyOi8vIitlLnN1YnN0cmluZyhlLmluZGV4T2YoIkAiKSsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIkAiKSkscz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTpvfX07cmV0dXJuIGNvbnNvbGUubG9nKCJNZXNzYWdlIGRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcjogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIgcmVwbHkiLHIpO3ZhciBuPXIuYm9keS52YWx1ZTtyZXR1cm4gbj92b2lkIGUobik6dCgiVXNlciBIeXBlcnR5IG5vdCBmb3VuZCIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsJFsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiB1KGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gdShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksJD1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD11LHIuZ2V0VXNlckVtYWlsRnJvbVVSTD1hLHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBJZGVudGl0eU1hbmFnZXIuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNiBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5JZGVudGl0eU1hbmFnZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJnUpcmV0dXJuIHUocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgYT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgYS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixhfXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1LGEsZixsPWUmYy5GLHA9ZSZjLkcsZD1lJmMuUywkPWUmYy5QLHY9ZSZjLkIsaD1lJmMuVyx5PXA/bzpvW3RdfHwob1t0XT17fSksYj1wP246ZD9uW3RdOihuW3RdfHx7fSlbc107cCYmKHI9dCk7Zm9yKHUgaW4gcilhPSFsJiZiJiZ1IGluIGIsYSYmdSBpbiB5fHwoZj1hP2JbdV06clt1XSx5W3VdPXAmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW3VdP3JbdV06diYmYT9pKGYsbik6aCYmYlt1XT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTokJiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6ZiwkJiYoKHlbc118fCh5W3NdPXt9KSlbdV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksdT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgZixsLHAsZD11KGUpLCQ9bihyLGEsdD8yOjEpLHY9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKGQpKWZvcihmPWMoZS5sZW5ndGgpO2Y+djt2KyspdD8kKHMobD1lW3ZdKVswXSxsWzFdKTokKGVbdl0pO2Vsc2UgZm9yKHA9ZC5jYWxsKGUpOyEobD1wLm5leHQoKSkuZG9uZTspbyhwLCQsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksdT1lKCIuLyQuaXRlcmF0b3JzIiksYT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8scD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSwkPSJAQGl0ZXJhdG9yIix2PSJrZXlzIixoPSJ2YWx1ZXMiLHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe2Eocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighZCYmZSBpbiBTKXJldHVybiBTW2VdO3N3aXRjaChlKXtjYXNlIHY6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgaDpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT1oLE09ITEsUz1lLnByb3RvdHlwZSxFPVNbcF18fFNbJF18fG0mJlNbbV0sUD1FfHxfKG0pO2lmKEUpe3ZhciBUPWwoUC5jYWxsKG5ldyBlKSk7ZihULGssITApLCFuJiZjKFMsJCkmJnMoVCxwLHkpLE8mJkUubmFtZSE9PWgmJihNPSEwLFA9ZnVuY3Rpb24oKXtyZXR1cm4gRS5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFkJiYhTSYmU1twXXx8cyhTLHAsUCksdVt0XT1QLHVba109eSxtKWlmKGo9e3ZhbHVlczpPP1A6XyhoKSxrZXlzOmc/UDpfKHYpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6UH0seClmb3IodyBpbiBqKXcgaW4gU3x8aShTLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKGR8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsdT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGEpLHA9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPWEuZG9tYWluKSYmKGEuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXthLm5leHRUaWNrKHApfTtlbHNlIGlmKHUpe3ZhciBkPTEsJD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IHUocCkub2JzZXJ2ZSgkLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpeyQuZGF0YT1kPS1kfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihwKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxwKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZhLmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksdT1uKHIpLGE9Yy5sZW5ndGg7cmV0dXJuIDA+dXx8dT49YT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQodSksNTUyOTY+aXx8aT41NjMxOXx8dSsxPT09YXx8KHM9Yy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQodSk6aTplP2Muc2xpY2UodSx1KzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksdT1lKCIuLyQuaHRtbCIpLGE9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxwPWYuc2V0SW1tZWRpYXRlLGQ9Zi5jbGVhckltbWVkaWF0ZSwkPWYuTWVzc2FnZUNoYW5uZWwsdj0wLGg9e30seT0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoaC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9aFtlXTtkZWxldGUgaFtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtwJiZkfHwocD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gaFsrK3ZdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKHYpLHZ9LGQ9ZnVuY3Rpb24oZSl7ZGVsZXRlIGhbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OiQ/KG89bmV3ICQsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49eSBpbiBhKCJzY3JpcHQiKT9mdW5jdGlvbihlKXt1LmFwcGVuZENoaWxkKGEoInNjcmlwdCIpKVt5XT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OnAsY2xlYXI6ZH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLHU9ZSgiLi8kLmNsYXNzb2YiKSxhPWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxwPWUoIi4vJC5hLWZ1bmN0aW9uIiksZD1lKCIuLyQuc3RyaWN0LW5ldyIpLCQ9ZSgiLi8kLmZvci1vZiIpLHY9ZSgiLi8kLnNldC1wcm90byIpLnNldCxoPWUoIi4vJC5zYW1lLXZhbHVlIikseT1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PXUoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gdihyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLHYodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOmgoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW3ldO3JldHVybiB2b2lkIDAhPXQ/dDplfSxTPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LEU9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPXAodCksdGhpcy5yZWplY3Q9cChyKX0sUD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFQ9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLHU9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP3UoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVMocikpP2kuY2FsbChyLGMsdSk6YyhyKSk6dShuKX1jYXRjaChhKXt1KGEpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO1UobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxVPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFVKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFQodCwhMCkpfSxDPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVMoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKEMsbiwxKSxjKEEsbiwxKSl9Y2F0Y2gobyl7QS5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFQociwhMSkpfWNhdGNoKG4pe0EuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe3AoZSk7dmFyIHQ9dGhpcy5fZD17cDpkKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhDLHQsMSksYyhBLHQsMSkpfWNhdGNoKHIpe0EuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IEUoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlQobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksYShhLkcrYS5XK2EuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sYShhLlMrYS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRSh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBFKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IEUodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UChmdW5jdGlvbigpeyQoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgRSh0KSxuPXIucmVqZWN0LG89UChmdW5jdGlvbigpeyQoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksdT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4odSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG89dGhpcztvLm1lc3NhZ2VCdXM9bixvLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG8uaHlwZXJ0eVVSTD10LG8ucnVudGltZVVSTD1yfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwLG89ZT9lOiIuIjtuPXQ/dDpyLmh5cGVydHlVUkw7dmFyIHM9e3R5cGU6InJlYWQiLGZyb206bix0bzpyLnJ1bnRpbWVVUkwrIi9yZWdpc3RyeS8iLGJvZHk6e3Jlc291cmNlOm8sY3JpdGVyaWE6bn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnJlc291cmNlO24/ZShuKTp0KCJObyB1c2VyIHdhcyBub3QgZm91bmQiKX0pfSl9fV0pLGV9KCk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscyI6NjgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6Nn1dLDY4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlKXtpZighZSl0aHJvdyBFcnJvcigiVVJMIGlzIG5lZWRlZCB0byBzcGxpdCIpO3ZhciB0PS8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpLHI9IiQxLCQyLCQzIixuPWUucmVwbGFjZSh0LHIpLnNwbGl0KCIsIik7blswXT09PWUmJihuWzBdPSJodHRwcyIsblsxXT1lKTt2YXIgbz17dHlwZTpuWzBdLGRvbWFpbjpuWzFdLGlkZW50aXR5Om5bMl19O3JldHVybiBvfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIikscj17dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX07cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlKXtyZXR1cm4hKCgwLCRbImRlZmF1bHQiXSkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGU/SlNPTi5wYXJzZSgoMCxwWyJkZWZhdWx0Il0pKGUpKTp2b2lkIDB9ZnVuY3Rpb24gdShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX1mdW5jdGlvbiBhKGUpe3ZhciB0PW8oZSk7cmV0dXJuIHQuaWRlbnRpdHkucmVwbGFjZSgiLyIsIiIpKyJAIit0LmRvbWFpbn1mdW5jdGlvbiBmKGUpe2lmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PW8oZSk7aWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIHUoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBsPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSIpLHA9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLCQ9bihkKTtyLmRpdmlkZVVSTD1vLHIuZGl2aWRlRW1haWw9aSxyLmVtcHR5T2JqZWN0PXMsci5kZWVwQ2xvbmU9YyxyLmdldFVzZXJVUkxGcm9tRW1haWw9dSxyLmdldFVzZXJFbWFpbEZyb21VUkw9YSxyLmNvbnZlcnRUb1VzZXJVUkw9Zn0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiOjEsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6M31dfSx7fSxbNjddKSg2Nyl9KTsKCgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgU3luY2hlci5qcyAKLy8gdmVyc2lvbjogMC4zLjAKLy8gTGFzdCBidWlsZDogVGh1IEp1biAwOSAyMDE2IDEyOjI4OjI0IEdNVCswMTAwIChXRVNUKQoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlN5bmNoZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGEpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJmMpcmV0dXJuIGMocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBsPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGwsbC5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe09iamVjdC5vYnNlcnZlJiYhQXJyYXkub2JzZXJ2ZSYmZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIHI9ZS5nZXROb3RpZmllcixuPSJwZXJmb3JtQ2hhbmdlIixvPSJfb3JpZ2luYWwiLGk9InNwbGljZSIscz17cHVzaDpmdW5jdGlvbiBjKGUpe3ZhciB0PWFyZ3VtZW50cyxzPWNbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnMtdC5sZW5ndGgsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHVuc2hpZnQ6ZnVuY3Rpb24gdShlKXt2YXIgdD1hcmd1bWVudHMscz11W29dLmFwcGx5KHRoaXMsdCk7cmV0dXJuIHIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDowLGFkZGVkQ291bnQ6dC5sZW5ndGgscmVtb3ZlZDpbXX19KSxzfSxwb3A6ZnVuY3Rpb24gbCgpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9bFtvXS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmxlbmd0aCE9PWUmJnIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDp0aGlzLmxlbmd0aCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzaGlmdDpmdW5jdGlvbiBmKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1mW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDowLHJlbW92ZWQ6W3RdfX0sdGhpcyksdH0sc3BsaWNlOmZ1bmN0aW9uIGQoZSx0KXt2YXIgcz1hcmd1bWVudHMsYT1kW29dLmFwcGx5KHRoaXMscyk7cmV0dXJuKGEubGVuZ3RofHxzLmxlbmd0aD4yKSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OmUsYWRkZWRDb3VudDpzLmxlbmd0aC0yLHJlbW92ZWQ6YX19LHRoaXMpLGF9fTtmb3IodmFyIGEgaW4gcylzW2FdW29dPXQucHJvdG90eXBlW2FdLHQucHJvdG90eXBlW2FdPXNbYV07dC5vYnNlcnZlPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUub2JzZXJ2ZSh0LHIsWyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLGldKX0sdC51bm9ic2VydmU9ZS51bm9ic2VydmV9KE9iamVjdCxBcnJheSl9LHt9XSwyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IjoxN31dLDM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIjoxOH1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoxOX1dLDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjoyMH1dLDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjIxfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6MjJ9XSw4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjoyM31dLDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoyNH1dLDEwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjI1fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDEyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxpWyJkZWZhdWx0Il0pKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpfSx7Ii4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSI6NH1dLDEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbz0hMDtvOyl7dmFyIGk9ZSxzPXQsYT1yO289ITEsbnVsbD09PWkmJihpPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIGM9bihpLHMpO2lmKHZvaWQgMCE9PWMpe2lmKCJ2YWx1ZSJpbiBjKXJldHVybiBjLnZhbHVlO3ZhciB1PWMuZ2V0O2lmKHZvaWQgMD09PXUpcmV0dXJuO3JldHVybiB1LmNhbGwoYSl9dmFyIGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGkpO2lmKG51bGw9PT1sKXJldHVybjtlPWwsdD1zLHI9YSxvPSEwLGM9bD12b2lkIDB9fSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjV9XSwxNDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHQpO2UucHJvdG90eXBlPW4odCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihvP28oZSx0KTplLl9fcHJvdG9fXz10KX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjh9XSwxNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsaVsiZGVmYXVsdCJdKSh0KSkmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6dH19LHsiLi4vaGVscGVycy90eXBlb2YiOjE2fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmNvbnN0cnVjdG9yPT09bj8ic3ltYm9sIjp0eXBlb2YgZX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wiOjEwfV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4obi5KU09OJiZuLkpTT04uc3RyaW5naWZ5fHxKU09OLnN0cmluZ2lmeSkuYXBwbHkoSlNPTixhcmd1bWVudHMpfX0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzF9XSwxODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ2V0RGVzYyhlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjo4MX1dLDIxOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiI6ODJ9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6ODN9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LnNldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiOjg0fV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksZSgiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIiksZSgiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIiksZSgiLi4vbW9kdWxlcy9lczYucHJvbWlzZSIpLHQuZXhwb3J0cz1lKCIuLi9tb2R1bGVzLyQuY29yZSIpLlByb21pc2V9LHsiLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vbW9kdWxlcy9lczYucHJvbWlzZSI6ODYsIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6ODcsIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6ODl9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCIpLGUoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5TeW1ib2x9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIjo4OH1dLDI2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6NDl9XSwyOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjMwLCIuLyQud2tzIjo3OH1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoyNn1dLDMzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDM0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjozOH1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDM2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0S2V5cyhlKSxyPW4uZ2V0U3ltYm9scztpZihyKWZvcih2YXIgbyxpPXIoZSkscz1uLmlzRW51bSxhPTA7aS5sZW5ndGg+YTspcy5jYWxsKGUsbz1pW2ErK10pJiZ0LnB1c2gobyk7cmV0dXJuIHR9fSx7Ii4vJCI6NTZ9XSwzNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuY3R4Iikscz0icHJvdG90eXBlIixhPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyx1LGwsZj1lJmEuRixkPWUmYS5HLHA9ZSZhLlMsYj1lJmEuUCxoPWUmYS5CLHk9ZSZhLlcsdj1kP286b1t0XXx8KG9bdF09e30pLF89ZD9uOnA/blt0XTooblt0XXx8e30pW3NdO2QmJihyPXQpO2ZvcihjIGluIHIpdT0hZiYmXyYmYyBpbiBfLHUmJmMgaW4gdnx8KGw9dT9fW2NdOnJbY10sdltjXT1kJiYiZnVuY3Rpb24iIT10eXBlb2YgX1tjXT9yW2NdOmgmJnU/aShsLG4pOnkmJl9bY109PWw/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBlP25ldyBlKHQpOmUodCl9O3JldHVybiB0W3NdPWVbc10sdH0obCk6YiYmImZ1bmN0aW9uIj09dHlwZW9mIGw/aShGdW5jdGlvbi5jYWxsLGwpOmwsYiYmKCh2W3NdfHwodltzXT17fSkpW2NdPWwpKX07YS5GPTEsYS5HPTIsYS5TPTQsYS5QPTgsYS5CPTE2LGEuVz0zMix0LmV4cG9ydHM9YX0seyIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZ2xvYmFsIjo0MX1dLDM4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaCh0KXtyZXR1cm4hMH19fSx7fV0sMzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY3R4Iiksbz1lKCIuLyQuaXRlci1jYWxsIiksaT1lKCIuLyQuaXMtYXJyYXktaXRlciIpLHM9ZSgiLi8kLmFuLW9iamVjdCIpLGE9ZSgiLi8kLnRvLWxlbmd0aCIpLGM9ZSgiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdSl7dmFyIGwsZixkLHA9YyhlKSxiPW4ocix1LHQ/MjoxKSxoPTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHApdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgaXRlcmFibGUhIik7aWYoaShwKSlmb3IobD1hKGUubGVuZ3RoKTtsPmg7aCsrKXQ/YihzKGY9ZVtoXSlbMF0sZlsxXSk6YihlW2hdKTtlbHNlIGZvcihkPXAuY2FsbChlKTshKGY9ZC5uZXh0KCkpLmRvbmU7KW8oZCxiLGYudmFsdWUsdCl9fSx7Ii4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLWFycmF5LWl0ZXIiOjQ3LCIuLyQuaXRlci1jYWxsIjo1MCwiLi8kLnRvLWxlbmd0aCI6NzUsIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIjo3OX1dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKSxvPWUoIi4vJCIpLmdldE5hbWVzLGk9e30udG9TdHJpbmcscz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxhPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaCh0KXtyZXR1cm4gcy5zbGljZSgpfX07dC5leHBvcnRzLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gcyYmIltvYmplY3QgV2luZG93XSI9PWkuY2FsbChlKT9hKGUpOm8obihlKSl9fSx7Ii4vJCI6NTYsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPW4pfSx7fV0sNDI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jYWxsKGUsdCl9fSx7fV0sNDM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIik7dC5leHBvcnRzPWUoIi4vJC5kZXNjcmlwdG9ycyIpP2Z1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxvKDEscikpfTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGVbdF09cixlfX0seyIuLyQiOjU2LCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQucHJvcGVydHktZGVzYyI6NjF9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudH0seyIuLyQuZ2xvYmFsIjo0MX1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA9PT1yO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuP2UoKTplLmNhbGwocik7Y2FzZSAxOnJldHVybiBuP2UodFswXSk6ZS5jYWxsKHIsdFswXSk7Y2FzZSAyOnJldHVybiBuP2UodFswXSx0WzFdKTplLmNhbGwocix0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0sdFszXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0sdFszXSl9cmV0dXJuIGUuYXBwbHkocix0KX19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LHsiLi8kLmNvZiI6MzB9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw0ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIkFycmF5Ij09bihlKX19LHsiLi8kLmNvZiI6MzB9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/bnVsbCE9PWU6ImZ1bmN0aW9uIj09dHlwZW9mIGV9fSx7fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG8pe3RyeXtyZXR1cm4gbz90KG4ocilbMF0sclsxXSk6dChyKX1jYXRjaChpKXt2YXIgcz1lWyJyZXR1cm4iXTt0aHJvdyB2b2lkIDAhPT1zJiZuKHMuY2FsbChlKSksaX19fSx7Ii4vJC5hbi1vYmplY3QiOjI4fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpLGk9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikscz17fTtlKCIuLyQuaGlkZSIpKHMsZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4uY3JlYXRlKHMse25leHQ6bygxLHIpfSksaShlLHQrIiBJdGVyYXRvciIpfX0seyIuLyQiOjU2LCIuLyQuaGlkZSI6NDMsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQubGlicmFyeSIpLG89ZSgiLi8kLmV4cG9ydCIpLGk9ZSgiLi8kLnJlZGVmaW5lIikscz1lKCIuLyQuaGlkZSIpLGE9ZSgiLi8kLmhhcyIpLGM9ZSgiLi8kLml0ZXJhdG9ycyIpLHU9ZSgiLi8kLml0ZXItY3JlYXRlIiksbD1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxmPWUoIi4vJCIpLmdldFByb3RvLGQ9ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLHA9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSksYj0iQEBpdGVyYXRvciIsaD0ia2V5cyIseT0idmFsdWVzIix2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixfLGcsbSxqKXt1KHIsdCxfKTt2YXIgJCx3LE89ZnVuY3Rpb24oZSl7aWYoIXAmJmUgaW4gRSlyZXR1cm4gRVtlXTtzd2l0Y2goZSl7Y2FzZSBoOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfTtjYXNlIHk6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0saz10KyIgSXRlcmF0b3IiLHg9Zz09eSxDPSExLEU9ZS5wcm90b3R5cGUsUz1FW2RdfHxFW2JdfHxnJiZFW2ddLFQ9U3x8TyhnKTtpZihTKXt2YXIgUj1mKFQuY2FsbChuZXcgZSkpO2woUixrLCEwKSwhbiYmYShFLGIpJiZzKFIsZCx2KSx4JiZTLm5hbWUhPT15JiYoQz0hMCxUPWZ1bmN0aW9uKCl7cmV0dXJuIFMuY2FsbCh0aGlzKX0pfWlmKG4mJiFqfHwhcCYmIUMmJkVbZF18fHMoRSxkLFQpLGNbdF09VCxjW2tdPXYsZylpZigkPXt2YWx1ZXM6eD9UOk8oeSksa2V5czptP1Q6TyhoKSxlbnRyaWVzOng/TygiZW50cmllcyIpOlR9LGopZm9yKHcgaW4gJCl3IGluIEV8fGkoRSx3LCRbd10pO2Vsc2UgbyhvLlArby5GKihwfHxDKSx0LCQpO3JldHVybiAkfX0seyIuLyQiOjU2LCIuLyQuZXhwb3J0IjozNywiLi8kLmhhcyI6NDIsIi4vJC5oaWRlIjo0MywiLi8kLml0ZXItY3JlYXRlIjo1MSwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC5saWJyYXJ5Ijo1OCwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxvPSExO3RyeXt2YXIgaT1bN11bbl0oKTtpWyJyZXR1cm4iXT1mdW5jdGlvbigpe289ITB9LEFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChzKXt9dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgaT1bN10scz1pW25dKCk7cy5uZXh0PWZ1bmN0aW9uKCl7cj0hMH0saVtuXT1mdW5jdGlvbigpe3JldHVybiBzfSxlKGkpfWNhdGNoKGEpe31yZXR1cm4gcn19LHsiLi8kLndrcyI6Nzh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17fX0se31dLDU2OltmdW5jdGlvbihlLHQscil7dmFyIG49T2JqZWN0O3QuZXhwb3J0cz17Y3JlYXRlOm4uY3JlYXRlLGdldFByb3RvOm4uZ2V0UHJvdG90eXBlT2YsaXNFbnVtOnt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLGdldERlc2M6bi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Isc2V0RGVzYzpuLmRlZmluZVByb3BlcnR5LHNldERlc2NzOm4uZGVmaW5lUHJvcGVydGllcyxnZXRLZXlzOm4ua2V5cyxnZXROYW1lczpuLmdldE93blByb3BlcnR5TmFtZXMsZ2V0U3ltYm9sczpuLmdldE93blByb3BlcnR5U3ltYm9scyxlYWNoOltdLmZvckVhY2h9fSx7fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLGk9byhlKSxzPW4uZ2V0S2V5cyhpKSxhPXMubGVuZ3RoLGM9MDthPmM7KWlmKGlbcj1zW2MrK11dPT09dClyZXR1cm4gcn19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ITB9LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC50YXNrIikuc2V0LGM9cy5NdXRhdGlvbk9ic2VydmVyfHxzLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsdT1zLnByb2Nlc3MsbD1zLlByb21pc2UsZj0icHJvY2VzcyI9PWUoIi4vJC5jb2YiKSh1KSxkPWZ1bmN0aW9uKCl7dmFyIGUsdCxyO2ZvcihmJiYoZT11LmRvbWFpbikmJih1LmRvbWFpbj1udWxsLGUuZXhpdCgpKTtuOyl0PW4uZG9tYWluLHI9bi5mbix0JiZ0LmVudGVyKCkscigpLHQmJnQuZXhpdCgpLG49bi5uZXh0O289dm9pZCAwLGUmJmUuZW50ZXIoKX07aWYoZilpPWZ1bmN0aW9uKCl7dS5uZXh0VGljayhkKX07ZWxzZSBpZihjKXt2YXIgcD0xLGI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyBjKGQpLm9ic2VydmUoYix7Y2hhcmFjdGVyRGF0YTohMH0pLGk9ZnVuY3Rpb24oKXtiLmRhdGE9cD0tcH19ZWxzZSBpPWwmJmwucmVzb2x2ZT9mdW5jdGlvbigpe2wucmVzb2x2ZSgpLnRoZW4oZCl9OmZ1bmN0aW9uKCl7YS5jYWxsKHMsZCl9O3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD17Zm46ZSxuZXh0OnZvaWQgMCxkb21haW46ZiYmdS5kb21haW59O28mJihvLm5leHQ9dCksbnx8KG49dCxpKCkpLG89dH19LHsiLi8kLmNvZiI6MzAsIi4vJC5nbG9iYWwiOjQxLCIuLyQudGFzayI6NzJ9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5leHBvcnQiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuZmFpbHMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0seyIuLyQuY29yZSI6MzEsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSx7fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQucmVkZWZpbmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCluKGUscix0W3JdKTtyZXR1cm4gZX19LHsiLi8kLnJlZGVmaW5lIjo2M31dLDYzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5oaWRlIil9LHsiLi8kLmhpZGUiOjQzfV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9T2JqZWN0LmlzfHxmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dD8wIT09ZXx8MS9lPT09MS90OmUhPWUmJnQhPXR9fSx7fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5nZXREZXNjLG89ZSgiLi8kLmlzLW9iamVjdCIpLGk9ZSgiLi8kLmFuLW9iamVjdCIpLHM9ZnVuY3Rpb24oZSx0KXtpZihpKGUpLCFvKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IodCsiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/ZnVuY3Rpb24odCxyLG8pe3RyeXtvPWUoIi4vJC5jdHgiKShGdW5jdGlvbi5jYWxsLG4oT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG8odCxbXSkscj0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goaSl7cj0hMH1yZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyhlLHQpLHI/ZS5fX3Byb3RvX189dDpvKGUsdCksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOnN9fSx7Ii4vJCI6NTYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLW9iamVjdCI6NDl9XSw2NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuY29yZSIpLG89ZSgiLi8kIiksaT1lKCIuLyQuZGVzY3JpcHRvcnMiKSxzPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uW2VdO2kmJnQmJiF0W3NdJiZvLnNldERlc2ModCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSx7Ii4vJCI6NTYsIi4vJC5jb3JlIjozMSwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLndrcyI6Nzh9XSw2NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLnNldERlc2Msbz1lKCIuLyQuaGFzIiksaT1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhbyhlPXI/ZTplLnByb3RvdHlwZSxpKSYmbihlLGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSx7Ii4vJCI6NTYsIi4vJC5oYXMiOjQyLCIuLyQud2tzIjo3OH1dLDY4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89Il9fY29yZS1qc19zaGFyZWRfXyIsaT1uW29dfHwobltvXT17fSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfHwoaVtlXT17fSl9fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iiksbz1lKCIuLyQuYS1mdW5jdGlvbiIpLGk9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1uKGUpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1zfHx2b2lkIDA9PShyPW4ocylbaV0pP3Q6byhyKX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLndrcyI6Nzh9XSw3MDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgVHlwZUVycm9yKHIrIjogdXNlIHRoZSAnbmV3JyBvcGVyYXRvciEiKTtyZXR1cm4gZX19LHt9XSw3MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxzLGE9U3RyaW5nKG8odCkpLGM9bihyKSx1PWEubGVuZ3RoO3JldHVybiAwPmN8fGM+PXU/ZT8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KGMpLDU1Mjk2Pml8fGk+NTYzMTl8fGMrMT09PXV8fChzPWEuY2hhckNvZGVBdChjKzEpKTw1NjMyMHx8cz41NzM0Mz9lP2EuY2hhckF0KGMpOmk6ZT9hLnNsaWNlKGMsYysyKTooaS01NTI5Njw8MTApKyhzLTU2MzIwKSs2NTUzNil9fX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC50by1pbnRlZ2VyIjo3M31dLDcyOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmludm9rZSIpLGM9ZSgiLi8kLmh0bWwiKSx1PWUoIi4vJC5kb20tY3JlYXRlIiksbD1lKCIuLyQuZ2xvYmFsIiksZj1sLnByb2Nlc3MsZD1sLnNldEltbWVkaWF0ZSxwPWwuY2xlYXJJbW1lZGlhdGUsYj1sLk1lc3NhZ2VDaGFubmVsLGg9MCx5PXt9LHY9Im9ucmVhZHlzdGF0ZWNoYW5nZSIsXz1mdW5jdGlvbigpe3ZhciBlPSt0aGlzO2lmKHkuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PXlbZV07ZGVsZXRlIHlbZV0sdCgpfX0sZz1mdW5jdGlvbihlKXtfLmNhbGwoZS5kYXRhKX07ZCYmcHx8KGQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIHlbKytoXT1mdW5jdGlvbigpe2EoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSx0KX0sbihoKSxofSxwPWZ1bmN0aW9uKGUpe2RlbGV0ZSB5W2VdfSwicHJvY2VzcyI9PWUoIi4vJC5jb2YiKShmKT9uPWZ1bmN0aW9uKGUpe2YubmV4dFRpY2socyhfLGUsMSkpfTpiPyhvPW5ldyBiLGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1nLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmwuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhbC5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2wucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxsLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGcsITEpKTpuPXYgaW4gdSgic2NyaXB0Iik/ZnVuY3Rpb24oZSl7Yy5hcHBlbmRDaGlsZCh1KCJzY3JpcHQiKSlbdl09ZnVuY3Rpb24oKXtjLnJlbW92ZUNoaWxkKHRoaXMpLF8uY2FsbChlKX19OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQocyhfLGUsMSksMCl9KSx0LmV4cG9ydHM9e3NldDpkLGNsZWFyOnB9fSx7Ii4vJC5jb2YiOjMwLCIuLyQuY3R4IjozMiwiLi8kLmRvbS1jcmVhdGUiOjM1LCIuLyQuZ2xvYmFsIjo0MSwiLi8kLmh0bWwiOjQ0LCIuLyQuaW52b2tlIjo0NX1dLDczOltmdW5jdGlvbihlLHQscil7dmFyIG49TWF0aC5jZWlsLG89TWF0aC5mbG9vcjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9vOm4pKGUpfX0se31dLDc0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlvYmplY3QiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC5pb2JqZWN0Ijo0Nn1dLDc1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP28obihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0seyIuLyQudG8taW50ZWdlciI6NzN9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSx7Ii4vJC5kZWZpbmVkIjozM31dLDc3OltmdW5jdGlvbihlLHQscil7dmFyIG49MCxvPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrbitvKS50b1N0cmluZygzNikpfX0se31dLDc4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnNoYXJlZCIpKCJ3a3MiKSxvPWUoIi4vJC51aWQiKSxpPWUoIi4vJC5nbG9iYWwiKS5TeW1ib2w7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1pJiZpW2VdfHwoaXx8bykoIlN5bWJvbC4iK2UpKX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5zaGFyZWQiOjY4LCIuLyQudWlkIjo3N31dLDc5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNsYXNzb2YiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKTt0LmV4cG9ydHM9ZSgiLi8kLmNvcmUiKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT1lP2Vbb118fGVbIkBAaXRlcmF0b3IiXXx8aVtuKGUpXTp2b2lkIDB9fSx7Ii4vJC5jbGFzc29mIjoyOSwiLi8kLmNvcmUiOjMxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw4MDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIiksbz1lKCIuLyQuaXRlci1zdGVwIiksaT1lKCIuLyQuaXRlcmF0b3JzIikscz1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1lKCIuLyQuaXRlci1kZWZpbmUiKShBcnJheSwiQXJyYXkiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD1zKGUpLHRoaXMuX2k9MCx0aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2sscj10aGlzLl9pKys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKToia2V5cyI9PXQ/bygwLHIpOiJ2YWx1ZXMiPT10P28oMCxlW3JdKTpvKDAsW3IsZVtyXV0pfSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxuKCJrZXlzIiksbigidmFsdWVzIiksbigiZW50cmllcyIpfSx7Ii4vJC5hZGQtdG8tdW5zY29wYWJsZXMiOjI3LCIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuaXRlci1zdGVwIjo1NCwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlKG4odCkscil9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8taW9iamVjdCI6NzR9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo2MCwiLi8kLnRvLW9iamVjdCI6NzZ9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDg0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjplKCIuLyQuc2V0LXByb3RvIikuc2V0fSl9LHsiLi8kLmV4cG9ydCI6MzcsIi4vJC5zZXQtcHJvdG8iOjY1fV0sODU6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSw4NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPWUoIi4vJCIpLGk9ZSgiLi8kLmxpYnJhcnkiKSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5jbGFzc29mIiksdT1lKCIuLyQuZXhwb3J0IiksbD1lKCIuLyQuaXMtb2JqZWN0IiksZj1lKCIuLyQuYW4tb2JqZWN0IiksZD1lKCIuLyQuYS1mdW5jdGlvbiIpLHA9ZSgiLi8kLnN0cmljdC1uZXciKSxiPWUoIi4vJC5mb3Itb2YiKSxoPWUoIi4vJC5zZXQtcHJvdG8iKS5zZXQseT1lKCIuLyQuc2FtZS12YWx1ZSIpLHY9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIiksXz1lKCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciIpLGc9ZSgiLi8kLm1pY3JvdGFzayIpLG09IlByb21pc2UiLGo9cy5wcm9jZXNzLCQ9InByb2Nlc3MiPT1jKGopLHc9c1ttXSxPPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB3KGZ1bmN0aW9uKCl7fSk7cmV0dXJuIGUmJih0LmNvbnN0cnVjdG9yPU9iamVjdCksdy5yZXNvbHZlKHQpPT09dH0saz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9bmV3IHcoZSk7cmV0dXJuIGgocix0LnByb3RvdHlwZSkscn12YXIgcj0hMTt0cnl7aWYocj13JiZ3LnJlc29sdmUmJk8oKSxoKHQsdyksdC5wcm90b3R5cGU9by5jcmVhdGUody5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0fX0pLHQucmVzb2x2ZSg1KS50aGVuKGZ1bmN0aW9uKCl7fSlpbnN0YW5jZW9mIHR8fChyPSExKSxyJiZlKCIuLyQuZGVzY3JpcHRvcnMiKSl7dmFyIG49ITE7dy5yZXNvbHZlKG8uc2V0RGVzYyh7fSwidGhlbiIse2dldDpmdW5jdGlvbigpe249ITB9fSkpLHI9bn19Y2F0Y2goaSl7cj0hMX1yZXR1cm4gcn0oKSx4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkmJmU9PT13JiZ0PT09bj8hMDp5KGUsdCl9LEM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZihlKVt2XTtyZXR1cm4gdm9pZCAwIT10P3Q6ZX0sRT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbChlKSYmImZ1bmN0aW9uIj09dHlwZW9mKHQ9ZS50aGVuKT90OiExfSxTPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1kKHQpLHRoaXMucmVqZWN0PWQocil9LFQ9ZnVuY3Rpb24oZSl7dHJ5e2UoKX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSxSPWZ1bmN0aW9uKGUsdCl7aWYoIWUubil7ZS5uPSEwO3ZhciByPWUuYztnKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUudixvPTE9PWUucyxpPTAsYT1mdW5jdGlvbih0KXt2YXIgcixpLHM9bz90Lm9rOnQuZmFpbCxhPXQucmVzb2x2ZSxjPXQucmVqZWN0O3RyeXtzPyhvfHwoZS5oPSEwKSxyPXM9PT0hMD9uOnMobikscj09PXQucHJvbWlzZT9jKFR5cGVFcnJvcigiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1FKHIpKT9pLmNhbGwocixhLGMpOmEocikpOmMobil9Y2F0Y2godSl7Yyh1KX19O3IubGVuZ3RoPmk7KWEocltpKytdKTtyLmxlbmd0aD0wLGUubj0hMSx0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQscixvPWUucDtNKG8pJiYoJD9qLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbixvKToodD1zLm9udW5oYW5kbGVkcmVqZWN0aW9uKT90KHtwcm9taXNlOm8scmVhc29uOm59KToocj1zLmNvbnNvbGUpJiZyLmVycm9yJiZyLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG4pKSxlLmE9dm9pZCAwfSwxKX0pfX0sTT1mdW5jdGlvbihlKXt2YXIgdCxyPWUuX2Qsbj1yLmF8fHIuYyxvPTA7aWYoci5oKXJldHVybiExO2Zvcig7bi5sZW5ndGg+bzspaWYodD1uW28rK10sdC5mYWlsfHwhTSh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxEPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5kfHwodC5kPSEwLHQ9dC5yfHx0LHQudj1lLHQucz0yLHQuYT10LmMuc2xpY2UoKSxSKHQsITApKX0sTj1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuZCl7ci5kPSEwLHI9ci5yfHxyO3RyeXtpZihyLnA9PT1lKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1FKGUpKT9nKGZ1bmN0aW9uKCl7dmFyIG49e3I6cixkOiExfTt0cnl7dC5jYWxsKGUsYShOLG4sMSksYShELG4sMSkpfWNhdGNoKG8pe0QuY2FsbChuLG8pfX0pOihyLnY9ZSxyLnM9MSxSKHIsITEpKX1jYXRjaChuKXtELmNhbGwoe3I6cixkOiExfSxuKX19fTtrfHwodz1mdW5jdGlvbihlKXtkKGUpO3ZhciB0PXRoaXMuX2Q9e3A6cCh0aGlzLHcsbSksYzpbXSxhOnZvaWQgMCxzOjAsZDohMSx2OnZvaWQgMCxoOiExLG46ITF9O3RyeXtlKGEoTix0LDEpLGEoRCx0LDEpKX1jYXRjaChyKXtELmNhbGwodCxyKX19LGUoIi4vJC5yZWRlZmluZS1hbGwiKSh3LnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBTKF8odGhpcyx3KSksbj1yLnByb21pc2Usbz10aGlzLl9kO3JldHVybiByLm9rPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ITAsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LG8uYy5wdXNoKHIpLG8uYSYmby5hLnB1c2gociksby5zJiZSKG8sITEpLG59LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSkpLHUodS5HK3UuVyt1LkYqIWsse1Byb21pc2U6d30pLGUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpKHcsbSksZSgiLi8kLnNldC1zcGVjaWVzIikobSksbj1lKCIuLyQuY29yZSIpW21dLHUodS5TK3UuRiohayxtLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFModGhpcykscj10LnJlamVjdDtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKigha3x8TyghMCkpLG0se3Jlc29sdmU6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHcmJngoZS5jb25zdHJ1Y3Rvcix0aGlzKSlyZXR1cm4gZTt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVzb2x2ZTtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKiEoayYmZSgiLi8kLml0ZXItZGV0ZWN0IikoZnVuY3Rpb24oZSl7dy5hbGwoZSlbImNhdGNoIl0oZnVuY3Rpb24oKXt9KX0pKSxtLHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9Qyh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qscz1bXSxhPVQoZnVuY3Rpb24oKXtiKGUsITEscy5wdXNoLHMpO3ZhciByPXMubGVuZ3RoLGE9QXJyYXkocik7cj9vLmVhY2guY2FsbChzLGZ1bmN0aW9uKGUsbyl7dmFyIHM9ITE7dC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHM9ITAsYVtvXT1lLC0tcnx8bihhKSl9LGkpfSk6bihhKX0pO3JldHVybiBhJiZpKGEuZXJyb3IpLHIucHJvbWlzZX0scmFjZTpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlamVjdCxvPVQoZnVuY3Rpb24oKXtiKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gbyYmbihvLmVycm9yKSxyLnByb21pc2V9fSl9LHsiLi8kIjo1NiwiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQuZXhwb3J0IjozNywiLi8kLmZvci1vZiI6MzksIi4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OSwiLi8kLml0ZXItZGV0ZWN0Ijo1MywiLi8kLmxpYnJhcnkiOjU4LCIuLyQubWljcm90YXNrIjo1OSwiLi8kLnJlZGVmaW5lLWFsbCI6NjIsIi4vJC5zYW1lLXZhbHVlIjo2NCwiLi8kLnNldC1wcm90byI6NjUsIi4vJC5zZXQtc3BlY2llcyI6NjYsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIjo2OSwiLi8kLnN0cmljdC1uZXciOjcwLCIuLyQud2tzIjo3OH1dLDg3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5zdHJpbmctYXQiKSghMCk7ZSgiLi8kLml0ZXItZGVmaW5lIikoU3RyaW5nLCJTdHJpbmciLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0seyIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuc3RyaW5nLWF0Ijo3MX1dLDg4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLmdsb2JhbCIpLGk9ZSgiLi8kLmhhcyIpLHM9ZSgiLi8kLmRlc2NyaXB0b3JzIiksYT1lKCIuLyQuZXhwb3J0IiksYz1lKCIuLyQucmVkZWZpbmUiKSx1PWUoIi4vJC5mYWlscyIpLGw9ZSgiLi8kLnNoYXJlZCIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZD1lKCIuLyQudWlkIikscD1lKCIuLyQud2tzIiksYj1lKCIuLyQua2V5b2YiKSxoPWUoIi4vJC5nZXQtbmFtZXMiKSx5PWUoIi4vJC5lbnVtLWtleXMiKSx2PWUoIi4vJC5pcy1hcnJheSIpLF89ZSgiLi8kLmFuLW9iamVjdCIpLGc9ZSgiLi8kLnRvLWlvYmplY3QiKSxtPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaj1uLmdldERlc2MsJD1uLnNldERlc2Msdz1uLmNyZWF0ZSxPPWguZ2V0LGs9by5TeW1ib2wseD1vLkpTT04sQz14JiZ4LnN0cmluZ2lmeSxFPSExLFM9cCgiX2hpZGRlbiIpLFQ9bi5pc0VudW0sUj1sKCJzeW1ib2wtcmVnaXN0cnkiKSxNPWwoInN5bWJvbHMiKSxEPSJmdW5jdGlvbiI9PXR5cGVvZiBrLE49T2JqZWN0LnByb3RvdHlwZSxQPXMmJnUoZnVuY3Rpb24oKXtyZXR1cm4gNyE9dygkKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWooTix0KTtuJiZkZWxldGUgTlt0XSwkKGUsdCxyKSxuJiZlIT09TiYmJChOLHQsbil9OiQsQT1mdW5jdGlvbihlKXt2YXIgdD1NW2VdPXcoay5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUscyYmRSYmUChOLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZnVuY3Rpb24odCl7aSh0aGlzLFMpJiZpKHRoaXNbU10sZSkmJih0aGlzW1NdW2VdPSExKSxQKHRoaXMsZSxtKDEsdCkpfX0pLHR9LEw9ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfSxGPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gciYmaShNLHQpPyhyLmVudW1lcmFibGU/KGkoZSxTKSYmZVtTXVt0XSYmKGVbU11bdF09ITEpLHI9dyhyLHtlbnVtZXJhYmxlOm0oMCwhMSl9KSk6KGkoZSxTKXx8JChlLFMsbSgxLHt9KSksZVtTXVt0XT0hMCksUChlLHQscikpOiQoZSx0LHIpfSxJPWZ1bmN0aW9uKGUsdCl7XyhlKTtmb3IodmFyIHIsbj15KHQ9Zyh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylGKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LFY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD93KGUpOkkodyhlKSx0KX0sVT1mdW5jdGlvbihlKXt2YXIgdD1ULmNhbGwodGhpcyxlKTtyZXR1cm4gdHx8IWkodGhpcyxlKXx8IWkoTSxlKXx8aSh0aGlzLFMpJiZ0aGlzW1NdW2VdP3Q6ITB9LHo9ZnVuY3Rpb24oZSx0KXt2YXIgcj1qKGU9ZyhlKSx0KTtyZXR1cm4hcnx8IWkoTSx0KXx8aShlLFMpJiZlW1NdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfSxIPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKXx8dD09U3x8bi5wdXNoKHQpO3JldHVybiBufSxCPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKSYmbi5wdXNoKE1bdF0pO3JldHVybiBufSxKPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFMKGUpKXtmb3IodmFyIHQscixuPVtlXSxvPTEsaT1hcmd1bWVudHM7aS5sZW5ndGg+bzspbi5wdXNoKGlbbysrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksIXImJnYodCl8fCh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLEwodCk/dm9pZCAwOnR9KSxuWzFdPXQsQy5hcHBseSh4LG4pfX0sVz11KGZ1bmN0aW9uKCl7dmFyIGU9aygpO3JldHVybiJbbnVsbF0iIT1DKFtlXSl8fCJ7fSIhPUMoe2E6ZX0pfHwie30iIT1DKE9iamVjdChlKSl9KTtEfHwoaz1mdW5jdGlvbigpe2lmKEwodGhpcykpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IiKTtyZXR1cm4gQShkKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSl9LGMoay5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksTD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGt9LG4uY3JlYXRlPVYsbi5pc0VudW09VSxuLmdldERlc2M9eixuLnNldERlc2M9RixuLnNldERlc2NzPUksbi5nZXROYW1lcz1oLmdldD1ILG4uZ2V0U3ltYm9scz1CLHMmJiFlKCIuLyQubGlicmFyeSIpJiZjKE4sInByb3BlcnR5SXNFbnVtZXJhYmxlIixVLCEwKSk7dmFyIFk9eyJmb3IiOmZ1bmN0aW9uKGUpe3JldHVybiBpKFIsZSs9IiIpP1JbZV06UltlXT1rKGUpfSxrZXlGb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGIoUixlKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7RT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7RT0hMX19O24uZWFjaC5jYWxsKCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxmdW5jdGlvbihlKXt2YXIgdD1wKGUpO1lbZV09RD90OkEodCl9KSxFPSEwLGEoYS5HK2EuVyx7U3ltYm9sOmt9KSxhKGEuUywiU3ltYm9sIixZKSxhKGEuUythLkYqIUQsIk9iamVjdCIse2NyZWF0ZTpWLGRlZmluZVByb3BlcnR5OkYsZGVmaW5lUHJvcGVydGllczpJLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjp6LGdldE93blByb3BlcnR5TmFtZXM6SCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Qn0pLHgmJmEoYS5TK2EuRiooIUR8fFcpLCJKU09OIix7c3RyaW5naWZ5Okp9KSxmKGssIlN5bWJvbCIpLGYoTWF0aCwiTWF0aCIsITApLGYoby5KU09OLCJKU09OIiwhMCl9LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5lbnVtLWtleXMiOjM2LCIuLyQuZXhwb3J0IjozNywiLi8kLmZhaWxzIjozOCwiLi8kLmdldC1uYW1lcyI6NDAsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaGFzIjo0MiwiLi8kLmlzLWFycmF5Ijo0OCwiLi8kLmtleW9mIjo1NywiLi8kLmxpYnJhcnkiOjU4LCIuLyQucHJvcGVydHktZGVzYyI6NjEsIi4vJC5yZWRlZmluZSI6NjMsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zaGFyZWQiOjY4LCIuLyQudG8taW9iamVjdCI6NzQsIi4vJC51aWQiOjc3LCIuLyQud2tzIjo3OH1dLDg5OltmdW5jdGlvbihlLHQscil7ZSgiLi9lczYuYXJyYXkuaXRlcmF0b3IiKTt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIik7bi5Ob2RlTGlzdD1uLkhUTUxDb2xsZWN0aW9uPW4uQXJyYXl9LHsiLi8kLml0ZXJhdG9ycyI6NTUsIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjo4MH1dLDkwOltmdW5jdGlvbihlLHQscil7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZz1bXSx0aGlzLms9ZX1mdW5jdGlvbiByKGUpeyFmdW5jdGlvbiByKCl7dmFyIG49ZS50YWtlUmVjb3JkcygpO24ubGVuZ3RoJiZlLmsobixlKSxlLmY9c2V0VGltZW91dChyLHQuX3BlcmlvZCl9KCl9ZnVuY3Rpb24gbih0KXt2YXIgcixuPXt0eXBlOm51bGwsdGFyZ2V0Om51bGwsYWRkZWROb2RlczpbXSxyZW1vdmVkTm9kZXM6W10scHJldmlvdXNTaWJsaW5nOm51bGwsbmV4dFNpYmxpbmc6bnVsbCxhdHRyaWJ1dGVOYW1lOm51bGwsYXR0cmlidXRlTmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bnVsbH07Zm9yKHIgaW4gdCluW3JdIT09ZSYmdFtyXSE9PWUmJihuW3JdPXRbcl0pO3JldHVybiBufWZ1bmN0aW9uIG8oZSx0KXt2YXIgcj1hKGUsdCk7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvLGM9bi5sZW5ndGg7dC5hJiZyLmEmJmkobixlLHIuYSx0LmQpLCh0LmJ8fHQuZSkmJihvPXMobixlLHIsdCkpLChvfHxuLmxlbmd0aCE9PWMpJiYocj1hKGUsdCkpfX1mdW5jdGlvbiBpKHQscixvLGkpe2Zvcih2YXIgcyxhLGM9e30sdT1yLmF0dHJpYnV0ZXMsbD11Lmxlbmd0aDtsLS07KXM9dVtsXSxhPXMubmFtZSxpJiZpW2FdPT09ZXx8KHMudmFsdWUhPT1vW2FdJiZ0LnB1c2gobih7dHlwZToiYXR0cmlidXRlcyIsdGFyZ2V0OnIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV0sYXR0cmlidXRlTmFtZXNwYWNlOnMubmFtZXNwYWNlVVJJfSkpLGNbYV09ITApO2ZvcihhIGluIG8pY1thXXx8dC5wdXNoKG4oe3RhcmdldDpyLHR5cGU6ImF0dHJpYnV0ZXMiLGF0dHJpYnV0ZU5hbWU6YSxvbGRWYWx1ZTpvW2FdfSkpfWZ1bmN0aW9uIHModCxyLG8scyl7ZnVuY3Rpb24gYShlLHIsbyxhLGMpe3ZhciBsPWUubGVuZ3RoLTE7Yz0tfigobC1jKS8yKTtmb3IodmFyIGYsZCxwO3A9ZS5wb3AoKTspZj1vW3AuaF0sZD1hW3AuaV0scy5iJiZjJiZNYXRoLmFicyhwLmgtcC5pKT49bCYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2ZdLHJlbW92ZWROb2RlczpbZl0sbmV4dFNpYmxpbmc6Zi5uZXh0U2libGluZyxwcmV2aW91c1NpYmxpbmc6Zi5wcmV2aW91c1NpYmxpbmd9KSksYy0tKSxzLmEmJmQuYSYmaSh0LGYsZC5hLHMuZCkscy5jJiYzPT09Zi5ub2RlVHlwZSYmZi5ub2RlVmFsdWUhPT1kLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6Zn0pKSxzLmUmJnUoZixkKX1mdW5jdGlvbiB1KHIsbyl7Zm9yKHZhciBkLHAsYixoLHksdj1yLmNoaWxkTm9kZXMsXz1vLmIsZz12Lmxlbmd0aCxtPV8/Xy5sZW5ndGg6MCxqPTAsJD0wLHc9MDtnPiR8fG0+dzspaD12WyRdLHk9KGI9X1t3XSkmJmIuaixoPT09eT8ocy5hJiZiLmEmJmkodCxoLGIuYSxzLmQpLHMuYyYmYi5jIT09ZSYmaC5ub2RlVmFsdWUhPT1iLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6aH0pKSxwJiZhKHAscix2LF8saikscy5lJiYoaC5jaGlsZE5vZGVzLmxlbmd0aHx8Yi5iJiZiLmIubGVuZ3RoKSYmdShoLGIpLCQrKyx3KyspOihsPSEwLGR8fChkPXt9LHA9W10pLGgmJihkW2I9YyhoKV18fChkW2JdPSEwLC0xPT09KGI9ZihfLGgsdywiaiIpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6cixhZGRlZE5vZGVzOltoXSxuZXh0U2libGluZzpoLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpoLnByZXZpb3VzU2libGluZ30pKSxqKyspOnAucHVzaCh7aDokLGk6Yn0pKSwkKyspLHkmJnkhPT12WyRdJiYoZFtiPWMoeSldfHwoZFtiXT0hMCwtMT09PShiPWYodix5LCQpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6by5qLHJlbW92ZWROb2RlczpbeV0sbmV4dFNpYmxpbmc6X1t3KzFdLHByZXZpb3VzU2libGluZzpfW3ctMV19KSksai0tKTpwLnB1c2goe2g6YixpOnd9KSksdysrKSk7cCYmYShwLHIsdixfLGopfXZhciBsO3JldHVybiB1KHIsbyksbH1mdW5jdGlvbiBhKGUsdCl7dmFyIHI9ITA7cmV0dXJuIGZ1bmN0aW9uIG4oZSl7dmFyIG89e2o6ZX07cmV0dXJuIXQuY3x8MyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlPyh0LmEmJnImJjE9PT1lLm5vZGVUeXBlJiYoby5hPWwoZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuZCYmIXQuZFtyLm5hbWVdfHwoZVtyLm5hbWVdPXIudmFsdWUpLGV9KSksciYmKHQuYnx8dC5jfHx0LmEmJnQuZSkmJihvLmI9dShlLmNoaWxkTm9kZXMsbikpLHI9dC5lKTpvLmM9ZS5ub2RlVmFsdWUsb30oZSl9ZnVuY3Rpb24gYyhlKXt0cnl7cmV0dXJuIGUuaWR8fChlLm1vX2lkPWUubW9faWR8fGQrKyl9Y2F0Y2godCl7dHJ5e3JldHVybiBlLm5vZGVWYWx1ZX1jYXRjaChyKXtyZXR1cm4gZCsrfX19ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgcj1bXSxuPTA7bjxlLmxlbmd0aDtuKyspcltuXT10KGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciByPXt9LG49MDtuPGUubGVuZ3RoO24rKylyPXQocixlW25dLG4sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gZihlLHQscixuKXtmb3IoO3I8ZS5sZW5ndGg7cisrKWlmKChuP2Vbcl1bbl06ZVtyXSk9PT10KXJldHVybiByO3JldHVybi0xfXQuX3BlcmlvZD0zMCx0LnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj17YTohISh0LmF0dHJpYnV0ZXN8fHQuYXR0cmlidXRlRmlsdGVyfHx0LmF0dHJpYnV0ZU9sZFZhbHVlKSxiOiEhdC5jaGlsZExpc3QsZTohIXQuc3VidHJlZSxjOiEoIXQuY2hhcmFjdGVyRGF0YSYmIXQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKX0saT10aGlzLmcscz0wO3M8aS5sZW5ndGg7cysrKWlbc10ubT09PWUmJmkuc3BsaWNlKHMsMSk7dC5hdHRyaWJ1dGVGaWx0ZXImJihuLmQ9bCh0LmF0dHJpYnV0ZUZpbHRlcixmdW5jdGlvbihlLHQpewpyZXR1cm4gZVt0XT0hMCxlfSkpLGkucHVzaCh7bTplLGw6byhlLG4pfSksdGhpcy5mfHxyKHRoaXMpfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PXRoaXMuZyxyPTA7cjx0Lmxlbmd0aDtyKyspdFtyXS5sKGUpO3JldHVybiBlfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5nPVtdLGNsZWFyVGltZW91dCh0aGlzLmYpLHRoaXMuZj1udWxsfX07dmFyIGQ9MTtyZXR1cm4gdH0odm9pZCAwKX0se31dLDkxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmV8fGZ1bmN0aW9uKGUsdCxyLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgbyxpLHM9WyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZWNvbmZpZ3VyZSIsInNldFByb3RvdHlwZSIsInByZXZlbnRFeHRlbnNpb25zIl0sYT10LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09ZS5jYWxsKHQpfX0oZS5wcm90b3R5cGUudG9TdHJpbmcpLGM9dC5wcm90b3R5cGUuaW5kZXhPZj90LmluZGV4T2Z8fGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gdC5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUscixuKX06ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1yfHwwO248ZS5sZW5ndGg7bisrKWlmKGVbbl09PT10KXJldHVybiBuO3JldHVybi0xfSx1PXIuTWFwIT09biYmTWFwLnByb3RvdHlwZS5mb3JFYWNoP2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBNYXB9OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD1bXTtyZXR1cm57c2l6ZTowLGhhczpmdW5jdGlvbih0KXtyZXR1cm4gYyhlLHQpPi0xfSxnZXQ6ZnVuY3Rpb24ocil7cmV0dXJuIHRbYyhlLHIpXX0sc2V0OmZ1bmN0aW9uKHIsbil7dmFyIG89YyhlLHIpOy0xPT09bz8oZS5wdXNoKHIpLHQucHVzaChuKSx0aGlzLnNpemUrKyk6dFtvXT1ufSwiZGVsZXRlIjpmdW5jdGlvbihyKXt2YXIgbj1jKGUscik7bj4tMSYmKGUuc3BsaWNlKG4sMSksdC5zcGxpY2UobiwxKSx0aGlzLnNpemUtLSl9LGZvckVhY2g6ZnVuY3Rpb24ocil7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspci5jYWxsKGFyZ3VtZW50c1sxXSx0W25dLGVbbl0sdGhpcyl9fX0sbD1lLmdldE93blByb3BlcnR5TmFtZXM/ZnVuY3Rpb24oKXt2YXIgdD1lLmdldE93blByb3BlcnR5TmFtZXM7dHJ5e2FyZ3VtZW50cy5jYWxsZWV9Y2F0Y2gocil7dmFyIG49KHQoYykuam9pbigiICIpKyIgIikucmVwbGFjZSgvcHJvdG90eXBlIHxsZW5ndGggfG5hbWUgL2csIiIpLnNsaWNlKDAsLTEpLnNwbGl0KCIgIik7bi5sZW5ndGgmJih0PWZ1bmN0aW9uKHQpe3ZhciByPWUuZ2V0T3duUHJvcGVydHlOYW1lcyh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClmb3IodmFyIG8saT0wO2k8bi5sZW5ndGg7KShvPWMocixuW2krK10pKT4tMSYmci5zcGxpY2UobywxKTtyZXR1cm4gcn0pfXJldHVybiB0fSgpOmZ1bmN0aW9uKHQpe3ZhciByLG4sbz1bXTtpZigiaGFzT3duUHJvcGVydHkiaW4gdClmb3IociBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJm8ucHVzaChyKTtlbHNle249ZS5oYXNPd25Qcm9wZXJ0eTtmb3IociBpbiB0KW4uY2FsbCh0LHIpJiZvLnB1c2gocil9cmV0dXJuIGEodCkmJm8ucHVzaCgibGVuZ3RoIiksb30sZj1lLmdldFByb3RvdHlwZU9mLGQ9ZS5kZWZpbmVQcm9wZXJ0aWVzJiZlLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixwPXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxyLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oKXt2YXIgZT0rbmV3IERhdGUsdD1lO3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3IoKHQ9K25ldyBEYXRlKS1lKX0sMTcpfX0oKSxiPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1vLmdldChlKTtuPyh5KG4sZSksbShlLG4sdCxyKSk6KG49aChlKSxtKGUsbix0LHIpLDE9PT1vLnNpemUmJnAodikpfSxoPWZ1bmN0aW9uKHQscil7dmFyIG4saT1sKHQpLHM9W10sYT0wLHI9e2hhbmRsZXJzOnUoKSxmcm96ZW46ZS5pc0Zyb3plbj9lLmlzRnJvemVuKHQpOiExLGV4dGVuc2libGU6ZS5pc0V4dGVuc2libGU/ZS5pc0V4dGVuc2libGUodCk6ITAscHJvdG86ZiYmZih0KSxwcm9wZXJ0aWVzOmksdmFsdWVzOnMsbm90aWZpZXI6Zyh0LHIpfTtpZihkKWZvcihuPXIuZGVzY3JpcHRvcnM9W107YTxpLmxlbmd0aDspblthXT1kKHQsaVthXSksc1thXT10W2lbYSsrXV07ZWxzZSBmb3IoO2E8aS5sZW5ndGg7KXNbYV09dFtpW2ErK11dO3JldHVybiBvLnNldCh0LHIpLHJ9LHk9ZnVuY3Rpb24oKXt2YXIgdD1kP2Z1bmN0aW9uKGUsdCxyLG4sbyl7dmFyIGk9dC5wcm9wZXJ0aWVzW3JdLHM9ZVtpXSxhPXQudmFsdWVzW3JdLGM9dC5kZXNjcmlwdG9yc1tyXTsidmFsdWUiaW4gbyYmKGE9PT1zPzA9PT1hJiYxL2EhPT0xL3M6YT09PWF8fHM9PT1zKSYmKGooZSx0LHtuYW1lOmksdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LnZhbHVlc1tyXT1zKSwhYy5jb25maWd1cmFibGV8fG8uY29uZmlndXJhYmxlJiZvLndyaXRhYmxlPT09Yy53cml0YWJsZSYmby5lbnVtZXJhYmxlPT09Yy5lbnVtZXJhYmxlJiZvLmdldD09PWMuZ2V0JiZvLnNldD09PWMuc2V0fHwoaihlLHQse25hbWU6aSx0eXBlOiJyZWNvbmZpZ3VyZSIsb2JqZWN0OmUsb2xkVmFsdWU6YX0sbiksdC5kZXNjcmlwdG9yc1tyXT1vKX06ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dC5wcm9wZXJ0aWVzW3JdLGk9ZVtvXSxzPXQudmFsdWVzW3JdOyhzPT09aT8wPT09cyYmMS9zIT09MS9pOnM9PT1zfHxpPT09aSkmJihqKGUsdCx7bmFtZTpvLHR5cGU6InVwZGF0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6c30sbiksdC52YWx1ZXNbcl09aSl9LHI9ZD9mdW5jdGlvbihlLHIsbixvLGkpe2Zvcih2YXIgcyxhPXIubGVuZ3RoO24mJmEtLTspbnVsbCE9PXJbYV0mJihzPWQoZSxyW2FdKSxuLS0scz90KGUsbyxhLGkscyk6KGooZSxvLHtuYW1lOnJbYV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpvLnZhbHVlc1thXX0saSksby5wcm9wZXJ0aWVzLnNwbGljZShhLDEpLG8udmFsdWVzLnNwbGljZShhLDEpLG8uZGVzY3JpcHRvcnMuc3BsaWNlKGEsMSkpKX06ZnVuY3Rpb24oZSx0LHIsbixvKXtmb3IodmFyIGk9dC5sZW5ndGg7ciYmaS0tOyludWxsIT09dFtpXSYmKGooZSxuLHtuYW1lOnRbaV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpuLnZhbHVlc1tpXX0sbyksbi5wcm9wZXJ0aWVzLnNwbGljZShpLDEpLG4udmFsdWVzLnNwbGljZShpLDEpLHItLSl9O3JldHVybiBmdW5jdGlvbihuLG8saSl7aWYobi5oYW5kbGVycy5zaXplJiYhbi5mcm96ZW4pe3ZhciBzLGEsdSxwLGIsaCx5LHYsXz1uLnZhbHVlcyxnPW4uZGVzY3JpcHRvcnMsbT0wO2lmKG4uZXh0ZW5zaWJsZSlpZihzPW4ucHJvcGVydGllcy5zbGljZSgpLGE9cy5sZW5ndGgsdT1sKG8pLGcpe2Zvcig7bTx1Lmxlbmd0aDspYj11W20rK10scD1jKHMsYiksdj1kKG8sYiksLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChvW2JdKSxnLnB1c2godikpOihzW3BdPW51bGwsYS0tLHQobyxuLHAsaSx2KSk7cihvLHMsYSxuLGkpLGUuaXNFeHRlbnNpYmxlKG8pfHwobi5leHRlbnNpYmxlPSExLGoobyxuLHt0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyIsb2JqZWN0Om99LGkpLG4uZnJvemVuPWUuaXNGcm96ZW4obykpfWVsc2V7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSxoPW9bYl0sLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChoKSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpKSk7cihvLHMsYSxuLGkpfWVsc2UgaWYoIW4uZnJvemVuKXtmb3IoO208cy5sZW5ndGg7bSsrKWI9c1ttXSx0KG8sbixtLGksZChvLGIpKTtlLmlzRnJvemVuKG8pJiYobi5mcm96ZW49ITApfWYmJih5PWYobykseSE9PW4ucHJvdG8mJihqKG8sbix7dHlwZToic2V0UHJvdG90eXBlIixuYW1lOiJfX3Byb3RvX18iLG9iamVjdDpvLG9sZFZhbHVlOm4ucHJvdG99KSxuLnByb3RvPXkpKX19fSgpLHY9ZnVuY3Rpb24oKXtvLnNpemUmJihvLmZvckVhY2goeSksaS5mb3JFYWNoKF8pLHAodikpfSxfPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5jaGFuZ2VSZWNvcmRzO3IubGVuZ3RoJiYoZS5jaGFuZ2VSZWNvcmRzPVtdLHQocikpfSxnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9by5nZXQoZSkpLHQmJnQubm90aWZpZXJ8fHtub3RpZnk6ZnVuY3Rpb24odCl7dC50eXBlO3ZhciByPW8uZ2V0KGUpO2lmKHIpe3ZhciBuLGk9e29iamVjdDplfTtmb3IobiBpbiB0KSJvYmplY3QiIT09biYmKGlbbl09dFtuXSk7aihlLHIsaSl9fSxwZXJmb3JtQ2hhbmdlOmZ1bmN0aW9uKHQscil7aWYoInN0cmluZyIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZyBjaGFuZ2VUeXBlIik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IHBlcmZvcm0gbm9uLWZ1bmN0aW9uIik7dmFyIGkscyxhPW8uZ2V0KGUpLGM9YXJndW1lbnRzWzJdLHU9Yz09PW4/cigpOnIuY2FsbChjKTtpZihhJiZ5KGEsZSx0KSxhJiZ1JiYib2JqZWN0Ij09dHlwZW9mIHUpe3M9e29iamVjdDplLHR5cGU6dH07Zm9yKGkgaW4gdSkib2JqZWN0IiE9PWkmJiJ0eXBlIiE9PWkmJihzW2ldPXVbaV0pO2ooZSxhLHMpfX19fSxtPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWkuZ2V0KHIpO298fGkuc2V0KHIsbz17b2JzZXJ2ZWQ6dSgpLGNoYW5nZVJlY29yZHM6W119KSxvLm9ic2VydmVkLnNldChlLHthY2NlcHRMaXN0Om4uc2xpY2UoKSxkYXRhOnR9KSx0LmhhbmRsZXJzLnNldChyLG8pfSxqPWZ1bmN0aW9uKGUsdCxyLG4pe3QuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbz10Lm9ic2VydmVkLmdldChlKS5hY2NlcHRMaXN0Oygic3RyaW5nIiE9dHlwZW9mIG58fC0xPT09YyhvLG4pKSYmYyhvLHIudHlwZSk+LTEmJnQuY2hhbmdlUmVjb3Jkcy5wdXNoKHIpfSl9O289dSgpLGk9dSgpLGUub2JzZXJ2ZT1mdW5jdGlvbih0LHIsbyl7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IG9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO2lmKGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4ocikpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gYSBmcm96ZW4gZnVuY3Rpb24gb2JqZWN0Iik7aWYobz09PW4pbz1zO2Vsc2UgaWYoIW98fCJvYmplY3QiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGlyZCBhcmd1bWVudCB0byBPYmplY3Qub2JzZXJ2ZSBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MuIik7cmV0dXJuIGIodCxyLG8pLHR9LGUudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09PWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LnVub2JzZXJ2ZSBjYW5ub3QgdW5vYnNlcnZlIG5vbi1vYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO3ZhciByLG49aS5nZXQodCk7cmV0dXJuIG4mJihyPW4ub2JzZXJ2ZWQuZ2V0KGUpKSYmKG4ub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSkscChmdW5jdGlvbigpe18obix0KX0pLDE9PT1uLm9ic2VydmVkLnNpemUmJm4ub2JzZXJ2ZWQuaGFzKGUpP2lbImRlbGV0ZSJdKHQpOm4ub2JzZXJ2ZWRbImRlbGV0ZSJdKGUpLDE9PT1yLmRhdGEuaGFuZGxlcnMuc2l6ZT9vWyJkZWxldGUiXShlKTpyLmRhdGEuaGFuZGxlcnNbImRlbGV0ZSJdKHQpKSxlfSxlLmdldE5vdGlmaWVyPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5nZXROb3RpZmllciBjYW5ub3QgZ2V0Tm90aWZpZXIgbm9uLW9iamVjdCIpO3JldHVybiBlLmlzRnJvemVuJiZlLmlzRnJvemVuKHQpP251bGw6Zyh0KX0sZS5kZWxpdmVyQ2hhbmdlUmVjb3Jkcz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHQ9aS5nZXQoZSk7dCYmKHQub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSksXyh0LGUpKX19KE9iamVjdCxBcnJheSx0aGlzKX0se31dLDkyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuRGF0YU9iamVjdE9ic2VydmVyPXIuRGF0YU9iamVjdFJlcG9ydGVyPXIuU3luY2hlcj12b2lkIDAsZSgibXV0YXRpb25vYnNlcnZlci1zaGltIiksZSgib2JqZWN0Lm9ic2VydmUiKSxlKCJhcnJheS5vYnNlcnZlIik7dmFyIG89ZSgiLi9zeW5jaGVyL1N5bmNoZXIiKSxpPW4obykscz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIiksYT1uKHMpLGM9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciIpLHU9bihjKTtyLlN5bmNoZXI9aVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdFJlcG9ydGVyPWFbImRlZmF1bHQiXSxyLkRhdGFPYmplY3RPYnNlcnZlcj11WyJkZWZhdWx0Il19LHsiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiOjk2LCIuL3N5bmNoZXIvU3luY2hlciI6OTksImFycmF5Lm9ic2VydmUiOjEsIm11dGF0aW9ub2JzZXJ2ZXItc2hpbSI6OTAsIm9iamVjdC5vYnNlcnZlIjo5MX1dLDkzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksdT1uKGMpLGw9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksZj1uKGwpLGQ9ZSgiLi9TeW5jT2JqZWN0IikscD1uKGQpLGI9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxoPW4oYikseT1lKCIuLi91dGlscy91dGlscy5qcyIpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9zeW5jaGVyPXQsYS5fdXJsPXIsYS5fc2NoZW1hPW4sYS5fc3RhdHVzPW8sYS5fc3luY09iaj1uZXcgcFsiZGVmYXVsdCJdKGkpLGEuX2NoaWxkcmVucz1zLGEuX3ZlcnNpb249MCxhLl9jaGlsZElkPTAsYS5fY2hpbGRyZW5PYmplY3RzPXt9LGEuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLGEuX293bmVyPXQuX293bmVyLGEuX2J1cz10Ll9idXN9cmV0dXJuKDAsZlsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24obil7dmFyIG89cituLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24ocil7aWYoci5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogIixyKSxyLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkQ3JlYXRlKHIpO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksKDAsYVsiZGVmYXVsdCJdKShlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5PYmplY3RzW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InBhdXNlIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJyZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6ImFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5fY2hpbGRJZCsrO3ZhciBuPXIuX293bmVyKyIjIityLl9jaGlsZElkLG89ci5fdXJsKyIvY2hpbGRyZW4vIitlLHM9e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpvLGJvZHk6e3Jlc291cmNlOm4sdmFsdWU6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUpe3ZhciBpPXIuX2J1cy5wb3N0TWVzc2FnZShzKTtjb25zb2xlLmxvZygiY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAiK3IuX293bmVyKyIgKTogIixzKTt2YXIgYT1uZXcgaFsiZGVmYXVsdCJdKHIsbix0LHIuX293bmVyLGkpO2Eub25DaGFuZ2UoZnVuY3Rpb24oZSl7ci5fb25DaGFuZ2UoZSx7cGF0aDpvLGNoaWxkSWQ6bn0pfSksci5fY2hpbGRyZW5PYmplY3RzW25dPWEsZShhKX0pfX0se2tleToib25BZGRDaGlsZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkNoaWxkQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlO2NvbnNvbGUubG9nKCJjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICIrdC5fb3duZXIrIiApOiAiLGUpO3ZhciBuPW5ldyBoWyJkZWZhdWx0Il0odCxyLGUuYm9keS52YWx1ZSk7dC5fY2hpbGRyZW5PYmplY3RzW3JdPW4sc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzb3VyY2U6dC5fb3duZXJ9fSl9KTt2YXIgbz17dHlwZTplLnR5cGUsZnJvbTplLmZyb20sdXJsOmUudG8sdmFsdWU6ZS5ib2R5LnZhbHVlLGNoaWxkSWQ6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9O3QuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiYoY29uc29sZS5sb2coIkFERC1DSElMRFJFTi1FVkVOVDogIixvKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSl9fSx7a2V5OiJfb25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKyssIm9uIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6InVwZGF0ZSIsZnJvbTpyLl91cmwsdG86ci5fdXJsKyIvY2hhbmdlcyIsYm9keTp7dmVyc2lvbjpyLl92ZXJzaW9uLHNvdXJjZTpyLl9vd25lcixhdHRyaWJ1dGU6ZS5maWVsZH19O2Uub1R5cGU9PT1kLk9iamVjdFR5cGUuT0JKRUNUP2UuY1R5cGUhPT1kLkNoYW5nZVR5cGUuUkVNT1ZFJiYobi5ib2R5LnZhbHVlPWUuZGF0YSk6KG4uYm9keS5hdHRyaWJ1dGVUeXBlPWUub1R5cGUsbi5ib2R5LnZhbHVlPWUuZGF0YSxlLmNUeXBlIT09ZC5DaGFuZ2VUeXBlLlVQREFURSYmKG4uYm9keS5vcGVyYXRpb249ZS5jVHlwZSkpLHQmJihuLnRvPXQucGF0aCxuLmJvZHkucmVzb3VyY2U9dC5jaGlsZElkKSxyLl9idXMucG9zdE1lc3NhZ2Uobil9fX0se2tleToiX2NoYW5nZU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rMT09PXQuYm9keS52ZXJzaW9uKXtyLl92ZXJzaW9uKys7dmFyIG49dC5ib2R5LmF0dHJpYnV0ZSxvPSgwLHkuZGVlcENsb25lKSh0LmJvZHkudmFsdWUpLGk9ZS5maW5kQmVmb3JlKG4pO2lmKHQuYm9keS5hdHRyaWJ1dGVUeXBlPT09ZC5PYmplY3RUeXBlLkFSUkFZKWlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuQUREKXt2YXIgcz1pLm9iaixhPWkubGFzdDtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHMsW2EsMF0uY29uY2F0KG8pKX1lbHNlIGlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuUkVNT1ZFKXt2YXIgYz1pLm9iaix1PWkubGFzdDtjLnNwbGljZSh1LG8pfWVsc2UgaS5vYmpbaS5sYXN0XT1vO2Vsc2UgdC5ib2R5LnZhbHVlP2kub2JqW2kubGFzdF09bzpkZWxldGUgaS5vYmpbaS5sYXN0XX1lbHNlIGNvbnNvbGUubG9nKCJVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiAiK3IuX3ZlcnNpb24rIiwgbXNnID0+ICIrdC5ib2R5LnZlcnNpb24rIikiKX19LHtrZXk6Il9jaGFuZ2VDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztjb25zb2xlLmxvZygiQ2hhbmdlIGNoaWxkcmVuOiAiLHQuX293bmVyLGUpO3ZhciByPWUuYm9keS5yZXNvdXJjZSxuPXQuX2NoaWxkcmVuT2JqZWN0c1tyXTtuP3QuX2NoYW5nZU9iamVjdChuLl9zeW5jT2JqLGUpOmNvbnNvbGUubG9nKCJObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICIscil9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWF9fSx7a2V5OiJzdGF0dXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXN9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleToiY2hpbGRyZW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT12LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCIuL1N5bmNPYmplY3QiOjk4LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZSgiLi9TeW5jT2JqZWN0IiksdT1uKGMpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8scyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBhPXRoaXM7YS5fcGFyZW50PXQsYS5fY2hpbGRJZD1yLGEuX293bmVyPW8sYS5fbXNnSWQ9cyxhLl9zeW5jT2JqPW5ldyB1WyJkZWZhdWx0Il0obiksYS5fYnVzPXQuX2J1cyxhLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fb3duZXImJihlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fb3duZXIsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmdC5pZD09PWUuX21zZ0lkJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOiIsdCksZS5fb25SZXNwb25zZSh0KSl9KSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyJiZlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RlbGV0ZSBlLl9wYXJlbnQuX2NoaWxkcmVuW2UuX2NoaWxkSWRdLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24odCl7ZSh0KX0pfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihyKX19LHtrZXk6ImNoaWxkSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGo9bihtKSwkPXtBTlk6ImFueSIsU1RBUlQ6InN0YXJ0IixFWEFDVDoiZXhhY3QifSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4sbyxzLGMsbCl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBmPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLHMuZGF0YSxjKSksZD1mO3JldHVybiBkLl92ZXJzaW9uPWwsZC5fZmlsdGVycz17fSxkLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7ZC5fb25GaWx0ZXIoZSl9KSwoMCxpWyJkZWZhdWx0Il0pKHMuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXMuY2hpbGRyZW5zW2VdO2QuX2NoaWxkcmVuT2JqZWN0c1tlXT1uZXcgalsiZGVmYXVsdCJdKGQsZSx0KX0pLGQuX2FsbG9jYXRlTGlzdGVuZXJzKCksZn1yZXR1cm4oMCx2WyJkZWZhdWx0Il0pKHQsZSksKDAsZlsiZGVmYXVsdCJdKSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCsiL2NoYW5nZXMiLGZ1bmN0aW9uKHQpeyJ1cGRhdGUiPT09dC50eXBlJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdfX0se2tleToidW5zdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLG49e3R5cGU6JC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZigiKiIpO289PT1lLmxlbmd0aC0xJiYoMD09PW8/bi50eXBlPSQuQU5ZOihuLnR5cGU9JC5TVEFSVCxyPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkpKSx0aGlzLl9maWx0ZXJzW3JdPW59fSx7a2V5OiJfb25GaWx0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7KDAsaVsiZGVmYXVsdCJdKSh0Ll9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX2ZpbHRlcnNbcl07bi50eXBlPT09JC5BTlk/bi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLlNUQVJUPzA9PT1lLmZpZWxkLmluZGV4T2YocikmJm4uY2FsbGJhY2soZSk6bi50eXBlPT09JC5FWEFDVCYmZS5maWVsZD09PXImJm4uY2FsbGJhY2soZSl9KX19XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09dyx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdCI6OTMsIi4vRGF0YU9iamVjdENoaWxkIjo5NCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuLi91dGlscy91dGlscy5qcyIpLGo9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLGkscyl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBjPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLGkscykpLGw9YztyZXR1cm4gbC5fc3Vic2NyaXB0aW9ucz17fSxsLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci0iK3IrIi1TRU5EOiAiLGUpLGwuX29uQ2hhbmdlKGUpfSksbC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxjfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9vYmplY3RMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdC0iK2UuX3VybCsiLVJDVjogIix0KSx0LnR5cGUpe2Nhc2UicmVzcG9uc2UiOmUuX29uUmVzcG9uc2UodCk7YnJlYWs7Y2FzZSJyZWFkIjplLl9vblJlYWQodCl9fSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiaW52aXRlT2JzZXJ2ZXJzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ImNyZWF0ZSIsZnJvbTp0Ll9zeW5jaGVyLl9vd25lcix0bzp0Ll9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6dC5fdXJsLHNjaGVtYTp0Ll9zY2hlbWEsdmFsdWU6dC5fc3luY09iai5kYXRhLGF1dGhvcmlzZTplfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZToiZGVsZXRlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fcmVwb3J0ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvblN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyPWV9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToib25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlYWRIYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogIixlKSxlLmJvZHkudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uVW5TdWJzY3JpYmUoZSl9fX0se2tleToiX29uU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj17dHlwZTplLmJvZHkudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNjZXB0OmZ1bmN0aW9uKCl7dmFyIG49e3VybDpyLHN0YXR1czoib24ifTt0Ll9zdWJzY3JpcHRpb25zW3JdPW47dmFyIG89e307cmV0dXJuKDAsaVsiZGVmYXVsdCJdKSh0Ll9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dC5fY2hpbGRyZW5PYmplY3RzW2VdLmRhdGE7b1tlXT0oMCxtLmRlZXBDbG9uZSkocil9KSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc2NoZW1hOnQuX3NjaGVtYSx2ZXJzaW9uOnQuX3ZlcnNpb24sdmFsdWU6e2RhdGE6KDAsbS5kZWVwQ2xvbmUpKHQuZGF0YSksY2hpbGRyZW5zOm99fX0pLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpyfX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixuKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXQuX3N1YnNjcmlwdGlvbnNbcl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsb2JqZWN0Om59O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsciksdC5fb25SZXNwb25zZUhhbmRsZXIocikpfX0se2tleToiX29uUmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGFjY2VwdDpmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKX19KX0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMSxkZXNjOnJ9fSl9fTt0Ll9vblJlYWRIYW5kbGVyJiYoY29uc29sZS5sb2coIlJFQUQtRVZFTlQ6ICIsciksdC5fb25SZWFkSGFuZGxlcihyKSl9fSx7a2V5OiJzdWJzY3JpcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc319XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09aix0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMDAsIi4vRGF0YU9iamVjdCI6OTMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOjE1fV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8peygwLGlbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgcz10aGlzO3MuX293bmVyPXQscy5fdXJsPXIscy5fYnVzPW4scy5fY2hpbGRyZW49byxzLl9jaGFuZ2VzPVtdLHMuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhUHJvdmlzaW9uYWwtIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlcy5wdXNoKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiYXBwbHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpfSl9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufX1dKSxlfSgpO3JbImRlZmF1bHQiXT1jLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuT2JqZWN0VHlwZT1yLkNoYW5nZVR5cGU9dm9pZCAwO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciByPXRoaXM7ci5fb2JzZXJ2ZXJzPVtdLHIuX2ZpbHRlcnM9e30sdD9yLl9kYXRhPSgwLGwuZGVlcENsb25lKSh0KTpyLl9kYXRhPXt9LHIuX2ludGVybmFsT2JzZXJ2ZShuZXcgZCxyLl9kYXRhKX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleToiZmluZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLiIpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleToiZmluZEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj1lLnNwbGl0KCIuIik7cmV0dXJuIHQubGFzdD1yLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQociksdH19LHtrZXk6Il9maW5kV2l0aFNwbGl0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6Il9pc09ic2VydmFibGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPT09T2JqZWN0fHxlLmNvbnN0cnVjdG9yPT09QXJyYXl9fSx7a2V5OiJfaW50ZXJuYWxPYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbj1mdW5jdGlvbih0KXtyLl9vbkNoYW5nZXMoZSx0KX07aWYodC5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7T2JqZWN0Lm9ic2VydmUodCxuKTtmb3IodmFyIG8gaW4gdClyLl9pc09ic2VydmFibGUodFtvXSkmJnIuX2ludGVybmFsT2JzZXJ2ZShlWyJuZXciXShvKSx0W29dKX1lbHNlIGlmKHQuY29uc3RydWN0b3I9PT1BcnJheSl7QXJyYXkub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgaSBpbiB0KWlmKHIuX2lzT2JzZXJ2YWJsZSh0W2ldKSl7dmFyIHM9ZVsibmV3Il0obmV3IHAodFtpXSxpKSk7ci5faW50ZXJuYWxPYnNlcnZlKHMsdFtpXSl9fX19fSx7a2V5OiJfb25DaGFuZ2VzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHQpe3ZhciBvPXRbbl0ub2JqZWN0LGk9dm9pZCAwO2lmKG8uY29uc3RydWN0b3I9PT1PYmplY3QmJihpPWguT0JKRUNUKSxvLmNvbnN0cnVjdG9yPT09QXJyYXkmJihpPWguQVJSQVkpLCJzcGxpY2UiPT09dFtuXS50eXBlKSFmdW5jdGlvbigpe3ZhciBzPXRbbl0uaW5kZXgsYT1lWyJuZXciXSgiIitzKSxjPWEudG9TdHJpbmcoKSx1PXRbbl0ucmVtb3ZlZC5sZW5ndGg7aWYoMCE9PXUpe3ZhciBmPXRbbl0ucmVtb3ZlZDtmLmZvckVhY2goZnVuY3Rpb24odCxuKXtyLl9pc09ic2VydmFibGUodCkmJmUucmVtb3ZlSW5kZXgocytuKX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5SRU1PVkUsb1R5cGU6aSxmaWVsZDpjLGRhdGE6dX0pfXZhciBkPXRbbl0uYWRkZWRDb3VudDtpZigwIT09ZCl7dmFyIGg9by5zbGljZShzLHMrZCk7aC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbz1lWyJuZXciXShuZXcgcCh0LHMrbikpO3IuX2ludGVybmFsT2JzZXJ2ZShvLHQpfX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDpjLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGgpfSl9cyE9PW8ubGVuZ3RoLTEmJmUucmVJbmRleEZyb20obyl9KCk7ZWxzZXt2YXIgcz1lWyJuZXciXSh0W25dLm5hbWUpLGE9cy50b1N0cmluZygpO2lmKC0xIT09YS5pbmRleE9mKCJTeW1ib2wiKSljb250aW51ZTt2YXIgYz1vW3Rbbl0ubmFtZV07InVwZGF0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5VUERBVEUsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSksImFkZCI9PT10W25dLnR5cGUmJih0aGlzLl9pbnRlcm5hbE9ic2VydmUocyxjKSx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuQURELG9UeXBlOmksZmllbGQ6YSxkYXRhOigwLGwuZGVlcENsb25lKShjKX0pKSwiZGVsZXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmF9KX19fX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLGV9KCksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSksdGhpcy5fcGF0aD1bXSx0aGlzLl9vYnNlcnZhYmxlcz17fX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InJlbW92ZUluZGV4Iix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fb2JzZXJ2YWJsZXNbZV19fSx7a2V5OiJyZUluZGV4RnJvbSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHRoaXMuX29ic2VydmFibGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX29ic2VydmFibGVzW3JdLG89ZS5pbmRleE9mKG4ub2JqKTtuLmlkeCE9byYmKG4uaWR4PW8sZGVsZXRlIHQuX29ic2VydmFibGVzW3JdLHQuX29ic2VydmFibGVzW29dPW4pfSl9fSx7a2V5OiJuZXciLHZhbHVlOmZ1bmN0aW9uKGUpe2UuY29uc3RydWN0b3I9PXAmJih0aGlzLl9vYnNlcnZhYmxlc1tlLmlkeF09ZSk7dmFyIHQ9dGhpcy5jbG9uZSgpO3JldHVybiB0Ll9wYXRoLnB1c2goZSksdH19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fcGF0aC5wdXNoKGUpfSksdH19LHtrZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24odCxyKXswPT09cj9lPXQudG9TdHJpbmcoKTplKz0iLiIrdC50b1N0cmluZygpfSksZX19XSksZX0oKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLm9iaj10LHRoaXMuaWR4PXJ9cmV0dXJuKDAsdVsiZGVmYXVsdCJdKShlLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHgudG9TdHJpbmcoKX19XSksZX0oKSxiPXIuQ2hhbmdlVHlwZT17VVBEQVRFOiJ1cGRhdGUiLEFERDoiYWRkIixSRU1PVkU6InJlbW92ZSJ9LGg9ci5PYmplY3RUeXBlPXtPQkpFQ1Q6Im9iamVjdCIsQVJSQVk6ImFycmF5In07clsiZGVmYXVsdCJdPWZ9LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYyksbD1lKCIuL0RhdGFPYmplY3RSZXBvcnRlciIpLGY9bihsKSxkPWUoIi4vRGF0YU9iamVjdE9ic2VydmVyIikscD1uKGQpLGI9ZSgiLi9EYXRhUHJvdmlzaW9uYWwiKSxoPW4oYikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4peygwLGFbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgbz10aGlzO28uX293bmVyPXQsby5fYnVzPXIsby5fc3ViVVJMPW4ucnVudGltZVVSTCsiL3NtIixvLl9yZXBvcnRlcnM9e30sby5fb2JzZXJ2ZXJzPXt9LG8uX3Byb3Zpc2lvbmFscz17fSxyLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aWYoZS5mcm9tIT09dClzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjpvLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOm8uX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjpvLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6ImNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7ci5yZXBvcnRlcj1uLl9vd25lcixyLnNjaGVtYT1lO3ZhciBvPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fb3duZXIsdG86bi5fc3ViVVJMLGJvZHk6e3NjaGVtYTplLHZhbHVlOnIsYXV0aG9yaXNlOnR9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LGkpe24uX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSxhPW5ldyBmWyJkZWZhdWx0Il0obixzLGUsIm9uIixyLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7bi5fcmVwb3J0ZXJzW3NdPWEsdChhKX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKG8saSl7ci5fYnVzLnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24obil7Y29uc29sZS5sb2coInN1YnNjcmliZS1yZXNwb25zZTogIixuKTt2YXIgcz1yLl9wcm92aXNpb25hbHNbdF07aWYoZGVsZXRlIHIuX3Byb3Zpc2lvbmFsc1t0XSxzJiZzLl9yZWxlYXNlTGlzdGVuZXJzKCksbi5ib2R5LmNvZGU8MjAwKXM9bmV3IGhbImRlZmF1bHQiXShyLl9vd25lcix0LHIuX2J1cyxuLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpLHIuX3Byb3Zpc2lvbmFsc1t0XT1zO2Vsc2UgaWYoMjAwPT09bi5ib2R5LmNvZGUpe3ZhciBhPW5ldyBwWyJkZWZhdWx0Il0ocix0LGUsIm9uIixuLmJvZHkudmFsdWUscy5jaGlsZHJlbixuLmJvZHkudmVyc2lvbik7ci5fb2JzZXJ2ZXJzW3RdPWEsbyhhKSxzLmFwcGx5KGEpfWVsc2UgaShuLmJvZHkuZGVzYyl9KX0pfX0se2tleToicmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJyZWFkIixmcm9tOnQuX293bmVyLHRvOmV9O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsbil7dC5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coInJlYWQtcmVzcG9uc2U6ICIsdCksMjAwPT09dC5ib2R5LmNvZGU/ZSh0LmJvZHkudmFsdWUpOm4odC5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtyLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbj0yMDA7ciYmKG49ciksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbiksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG4pKX19LHtrZXk6Il9vblJlbW90ZURlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXQuX29ic2VydmVyc1tyXTtpZihuKXt2YXIgbz17dHlwZTplLnR5cGUsdXJsOnIsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbz0yMDA7ciYmKG89ciksMjAwPT09byYmblsiZGVsZXRlIl0oKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpvLHNvdXJjZTp0Ll9vd25lcn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbyksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG8pKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fSx7a2V5OiJvd25lciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX293bmVyfX0se2tleToicmVwb3J0ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0ZXJzfX0se2tleToib2JzZXJ2ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT15LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiOjk1LCIuL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vRGF0YVByb3Zpc2lvbmFsIjo5NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsYlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBjKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGwoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYyhlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGY9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGYpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1hLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1jLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1sfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3fV19LHt9LFs5Ml0pKDkyKX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyohCiAqIFVSSS5qcyAtIE11dGF0aW5nIFVSTHMKICogSVB2NiBTdXBwb3J0CiAqCiAqIFZlcnNpb246IDEuMTguMQogKgogKiBBdXRob3I6IFJvZG5leSBSZWhtCiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuaW8vVVJJLmpzLwogKgogKiBMaWNlbnNlZCB1bmRlcgogKiAgIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UKICoKICovCgooZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAndXNlIHN0cmljdCc7CiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci9yZXR1cm5FeHBvcnRzLmpzCiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgewogICAgLy8gTm9kZQogICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7CiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS4KICAgIGRlZmluZShmYWN0b3J5KTsKICB9IGVsc2UgewogICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdykKICAgIHJvb3QuSVB2NiA9IGZhY3Rvcnkocm9vdCk7CiAgfQp9KHRoaXMsIGZ1bmN0aW9uIChyb290KSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvKgogIHZhciBfaW4gPSAiZmU4MDowMDAwOjAwMDA6MDAwMDowMjA0OjYxZmY6ZmU5ZDpmMTU2IjsKICB2YXIgX291dCA9IElQdjYuYmVzdChfaW4pOwogIHZhciBfZXhwZWN0ZWQgPSAiZmU4MDo6MjA0OjYxZmY6ZmU5ZDpmMTU2IjsKCiAgY29uc29sZS5sb2coX2luLCBfb3V0LCBfZXhwZWN0ZWQsIF9vdXQgPT09IF9leHBlY3RlZCk7CiAgKi8KCiAgLy8gc2F2ZSBjdXJyZW50IElQdjYgdmFyaWFibGUsIGlmIGFueQogIHZhciBfSVB2NiA9IHJvb3QgJiYgcm9vdC5JUHY2OwoKICBmdW5jdGlvbiBiZXN0UHJlc2VudGF0aW9uKGFkZHJlc3MpIHsKICAgIC8vIGJhc2VkIG9uOgogICAgLy8gSmF2YXNjcmlwdCB0byB0ZXN0IGFuIElQdjYgYWRkcmVzcyBmb3IgcHJvcGVyIGZvcm1hdCwgYW5kIHRvCiAgICAvLyBwcmVzZW50IHRoZSAiYmVzdCB0ZXh0IHJlcHJlc2VudGF0aW9uIiBhY2NvcmRpbmcgdG8gSUVURiBEcmFmdCBSRkMgYXQKICAgIC8vIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtNm1hbi10ZXh0LWFkZHItcmVwcmVzZW50YXRpb24tMDQKICAgIC8vIDggRmViIDIwMTAgUmljaCBCcm93biwgRGFydHdhcmUsIExMQwogICAgLy8gUGxlYXNlIGZlZWwgZnJlZSB0byB1c2UgdGhpcyBjb2RlIGFzIGxvbmcgYXMgeW91IHByb3ZpZGUgYSBsaW5rIHRvCiAgICAvLyBodHRwOi8vd3d3LmludGVybWFwcGVyLmNvbQogICAgLy8gaHR0cDovL2ludGVybWFwcGVyLmNvbS9zdXBwb3J0L3Rvb2xzL0lQVjYtVmFsaWRhdG9yLmFzcHgKICAgIC8vIGh0dHA6Ly9kb3dubG9hZC5kYXJ0d2FyZS5jb20vdGhpcmRwYXJ0eS9pcHY2dmFsaWRhdG9yLmpzCgogICAgdmFyIF9hZGRyZXNzID0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpOwogICAgdmFyIHNlZ21lbnRzID0gX2FkZHJlc3Muc3BsaXQoJzonKTsKICAgIHZhciBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7CiAgICB2YXIgdG90YWwgPSA4OwoKICAgIC8vIHRyaW0gY29sb25zICg6OiBvciA6OmE6Yjpj4oCmIG9yIOKApmE6YjpjOjopCiAgICBpZiAoc2VnbWVudHNbMF0gPT09ICcnICYmIHNlZ21lbnRzWzFdID09PSAnJyAmJiBzZWdtZW50c1syXSA9PT0gJycpIHsKICAgICAgLy8gbXVzdCBoYXZlIGJlZW4gOjoKICAgICAgLy8gcmVtb3ZlIGZpcnN0IHR3byBpdGVtcwogICAgICBzZWdtZW50cy5zaGlmdCgpOwogICAgICBzZWdtZW50cy5zaGlmdCgpOwogICAgfSBlbHNlIGlmIChzZWdtZW50c1swXSA9PT0gJycgJiYgc2VnbWVudHNbMV0gPT09ICcnKSB7CiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIDo6eHh4eAogICAgICAvLyByZW1vdmUgdGhlIGZpcnN0IGl0ZW0KICAgICAgc2VnbWVudHMuc2hpZnQoKTsKICAgIH0gZWxzZSBpZiAoc2VnbWVudHNbbGVuZ3RoIC0gMV0gPT09ICcnICYmIHNlZ21lbnRzW2xlbmd0aCAtIDJdID09PSAnJykgewogICAgICAvLyBtdXN0IGhhdmUgYmVlbiB4eHh4OjoKICAgICAgc2VnbWVudHMucG9wKCk7CiAgICB9CgogICAgbGVuZ3RoID0gc2VnbWVudHMubGVuZ3RoOwoKICAgIC8vIGFkanVzdCB0b3RhbCBzZWdtZW50cyBmb3IgSVB2NCB0cmFpbGVyCiAgICBpZiAoc2VnbWVudHNbbGVuZ3RoIC0gMV0uaW5kZXhPZignLicpICE9PSAtMSkgewogICAgICAvLyBmb3VuZCBhICIuIiB3aGljaCBtZWFucyBJUHY0CiAgICAgIHRvdGFsID0gNzsKICAgIH0KCiAgICAvLyBmaWxsIGVtcHR5IHNlZ21lbnRzIHRoZW0gd2l0aCAiMDAwMCIKICAgIHZhciBwb3M7CiAgICBmb3IgKHBvcyA9IDA7IHBvcyA8IGxlbmd0aDsgcG9zKyspIHsKICAgICAgaWYgKHNlZ21lbnRzW3Bvc10gPT09ICcnKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICBpZiAocG9zIDwgdG90YWwpIHsKICAgICAgc2VnbWVudHMuc3BsaWNlKHBvcywgMSwgJzAwMDAnKTsKICAgICAgd2hpbGUgKHNlZ21lbnRzLmxlbmd0aCA8IHRvdGFsKSB7CiAgICAgICAgc2VnbWVudHMuc3BsaWNlKHBvcywgMCwgJzAwMDAnKTsKICAgICAgfQogICAgfQoKICAgIC8vIHN0cmlwIGxlYWRpbmcgemVyb3MKICAgIHZhciBfc2VnbWVudHM7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHsKICAgICAgX3NlZ21lbnRzID0gc2VnbWVudHNbaV0uc3BsaXQoJycpOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDMgOyBqKyspIHsKICAgICAgICBpZiAoX3NlZ21lbnRzWzBdID09PSAnMCcgJiYgX3NlZ21lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIF9zZWdtZW50cy5zcGxpY2UoMCwxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICBzZWdtZW50c1tpXSA9IF9zZWdtZW50cy5qb2luKCcnKTsKICAgIH0KCiAgICAvLyBmaW5kIGxvbmdlc3Qgc2VxdWVuY2Ugb2YgemVyb2VzIGFuZCBjb2FsZXNjZSB0aGVtIGludG8gb25lIHNlZ21lbnQKICAgIHZhciBiZXN0ID0gLTE7CiAgICB2YXIgX2Jlc3QgPSAwOwogICAgdmFyIF9jdXJyZW50ID0gMDsKICAgIHZhciBjdXJyZW50ID0gLTE7CiAgICB2YXIgaW56ZXJvZXMgPSBmYWxzZTsKICAgIC8vIGk7IGFscmVhZHkgZGVjbGFyZWQKCiAgICBmb3IgKGkgPSAwOyBpIDwgdG90YWw7IGkrKykgewogICAgICBpZiAoaW56ZXJvZXMpIHsKICAgICAgICBpZiAoc2VnbWVudHNbaV0gPT09ICcwJykgewogICAgICAgICAgX2N1cnJlbnQgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaW56ZXJvZXMgPSBmYWxzZTsKICAgICAgICAgIGlmIChfY3VycmVudCA+IF9iZXN0KSB7CiAgICAgICAgICAgIGJlc3QgPSBjdXJyZW50OwogICAgICAgICAgICBfYmVzdCA9IF9jdXJyZW50OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoc2VnbWVudHNbaV0gPT09ICcwJykgewogICAgICAgICAgaW56ZXJvZXMgPSB0cnVlOwogICAgICAgICAgY3VycmVudCA9IGk7CiAgICAgICAgICBfY3VycmVudCA9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKF9jdXJyZW50ID4gX2Jlc3QpIHsKICAgICAgYmVzdCA9IGN1cnJlbnQ7CiAgICAgIF9iZXN0ID0gX2N1cnJlbnQ7CiAgICB9CgogICAgaWYgKF9iZXN0ID4gMSkgewogICAgICBzZWdtZW50cy5zcGxpY2UoYmVzdCwgX2Jlc3QsICcnKTsKICAgIH0KCiAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7CgogICAgLy8gYXNzZW1ibGUgcmVtYWluaW5nIHNlZ21lbnRzCiAgICB2YXIgcmVzdWx0ID0gJyc7CiAgICBpZiAoc2VnbWVudHNbMF0gPT09ICcnKSAgewogICAgICByZXN1bHQgPSAnOic7CiAgICB9CgogICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHJlc3VsdCArPSBzZWdtZW50c1tpXTsKICAgICAgaWYgKGkgPT09IGxlbmd0aCAtIDEpIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgcmVzdWx0ICs9ICc6JzsKICAgIH0KCiAgICBpZiAoc2VnbWVudHNbbGVuZ3RoIC0gMV0gPT09ICcnKSB7CiAgICAgIHJlc3VsdCArPSAnOic7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7CiAgICAvKmpzaGludCB2YWxpZHRoaXM6IHRydWUgKi8KICAgIGlmIChyb290LklQdjYgPT09IHRoaXMpIHsKICAgICAgcm9vdC5JUHY2ID0gX0lQdjY7CiAgICB9CiAgCiAgICByZXR1cm4gdGhpczsKICB9CgogIHJldHVybiB7CiAgICBiZXN0OiBiZXN0UHJlc2VudGF0aW9uLAogICAgbm9Db25mbGljdDogbm9Db25mbGljdAogIH07Cn0pKTsKCn0se31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKiEKICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMcwogKiBTZWNvbmQgTGV2ZWwgRG9tYWluIChTTEQpIFN1cHBvcnQKICoKICogVmVyc2lvbjogMS4xOC4xCiAqCiAqIEF1dGhvcjogUm9kbmV5IFJlaG0KICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5pby9VUkkuanMvCiAqCiAqIExpY2Vuc2VkIHVuZGVyCiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZQogKgogKi8KCihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICd1c2Ugc3RyaWN0JzsKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanMKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAvLyBOb2RlCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLgogICAgZGVmaW5lKGZhY3RvcnkpOwogIH0gZWxzZSB7CiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQogICAgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPSBmYWN0b3J5KHJvb3QpOwogIH0KfSh0aGlzLCBmdW5jdGlvbiAocm9vdCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLy8gc2F2ZSBjdXJyZW50IFNlY29uZExldmVsRG9tYWlucyB2YXJpYWJsZSwgaWYgYW55CiAgdmFyIF9TZWNvbmRMZXZlbERvbWFpbnMgPSByb290ICYmIHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zOwoKICB2YXIgU0xEID0gewogICAgLy8gbGlzdCBvZiBrbm93biBTZWNvbmQgTGV2ZWwgRG9tYWlucwogICAgLy8gY29udmVydGVkIGxpc3Qgb2YgU0xEcyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9nYXZpbmdtaWxsZXIvc2Vjb25kLWxldmVsLWRvbWFpbnMKICAgIC8vIC0tLS0KICAgIC8vIHB1YmxpY3N1ZmZpeC5vcmcgaXMgbW9yZSBjdXJyZW50IGFuZCBhY3R1YWxseSB1c2VkIGJ5IGEgY291cGxlIG9mIGJyb3dzZXJzIGludGVybmFsbHkuCiAgICAvLyBkb3duc2lkZSBpcyBpdCBhbHNvIGNvbnRhaW5zIGRvbWFpbnMgbGlrZSAiZHluZG5zLm9yZyIgLSB3aGljaCBpcyBmaW5lIGZvciB0aGUgc2VjdXJpdHkKICAgIC8vIGlzc3VlcyBicm93c2VyIGhhdmUgdG8gZGVhbCB3aXRoIChTT1AgZm9yIGNvb2tpZXMsIGV0YykgLSBidXQgaXMgd2F5IG92ZXJib2FyZCBmb3IgVVJJLmpzCiAgICAvLyAtLS0tCiAgICBsaXN0OiB7CiAgICAgICdhYyc6JyBjb20gZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdhZSc6JyBhYyBjbyBnb3YgbWlsIG5hbWUgbmV0IG9yZyBwcm8gc2NoICcsCiAgICAgICdhZic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdhbCc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLAogICAgICAnYW8nOicgY28gZWQgZ3YgaXQgb2cgcGIgJywKICAgICAgJ2FyJzonIGNvbSBlZHUgZ29iIGdvdiBpbnQgbWlsIG5ldCBvcmcgdHVyICcsCiAgICAgICdhdCc6JyBhYyBjbyBndiBvciAnLAogICAgICAnYXUnOicgYXNuIGNvbSBjc2lybyBlZHUgZ292IGlkIG5ldCBvcmcgJywKICAgICAgJ2JhJzonIGNvIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnIHJzIHVuYmkgdW5tbyB1bnNhIHVudHogdW56ZSAnLAogICAgICAnYmInOicgYml6IGNvIGNvbSBlZHUgZ292IGluZm8gbmV0IG9yZyBzdG9yZSB0diAnLAogICAgICAnYmgnOicgYml6IGNjIGNvbSBlZHUgZ292IGluZm8gbmV0IG9yZyAnLAogICAgICAnYm4nOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnYm8nOicgY29tIGVkdSBnb2IgZ292IGludCBtaWwgbmV0IG9yZyB0diAnLAogICAgICAnYnInOicgYWRtIGFkdiBhZ3IgYW0gYXJxIGFydCBhdG8gYiBiaW8gYmxvZyBibWQgY2ltIGNuZyBjbnQgY29tIGNvb3AgZWNuIGVkdSBlbmcgZXNwIGV0YyBldGkgZmFyIGZsb2cgZm0gZm5kIGZvdCBmc3QgZzEyIGdnZiBnb3YgaW1iIGluZCBpbmYgam9yIGp1cyBsZWwgbWF0IG1lZCBtaWwgbXVzIG5ldCBub20gbm90IG50ciBvZG8gb3JnIHBwZyBwcm8gcHNjIHBzaSBxc2wgcmVjIHNsZyBzcnYgdG1wIHRyZCB0dXIgdHYgdmV0IHZsb2cgd2lraSB6bGcgJywKICAgICAgJ2JzJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2J6JzonIGR1IGV0IG9tIG92IHJnICcsCiAgICAgICdjYSc6JyBhYiBiYyBtYiBuYiBuZiBubCBucyBudCBudSBvbiBwZSBxYyBzayB5ayAnLAogICAgICAnY2snOicgYml6IGNvIGVkdSBnZW4gZ292IGluZm8gbmV0IG9yZyAnLAogICAgICAnY24nOicgYWMgYWggYmogY29tIGNxIGVkdSBmaiBnZCBnb3YgZ3MgZ3ggZ3ogaGEgaGIgaGUgaGkgaGwgaG4gamwganMganggbG4gbWlsIG5ldCBubSBueCBvcmcgcWggc2Mgc2Qgc2ggc24gc3ggdGogdHcgeGogeHogeW4gemogJywKICAgICAgJ2NvJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgbm9tIG9yZyAnLAogICAgICAnY3InOicgYWMgYyBjbyBlZCBmaSBnbyBvciBzYSAnLAogICAgICAnY3knOicgYWMgYml6IGNvbSBla2xvZ2VzIGdvdiBsdGQgbmFtZSBuZXQgb3JnIHBhcmxpYW1lbnQgcHJlc3MgcHJvIHRtICcsCiAgICAgICdkbyc6JyBhcnQgY29tIGVkdSBnb2IgZ292IG1pbCBuZXQgb3JnIHNsZCB3ZWIgJywKICAgICAgJ2R6JzonIGFydCBhc3NvIGNvbSBlZHUgZ292IG5ldCBvcmcgcG9sICcsCiAgICAgICdlYyc6JyBjb20gZWR1IGZpbiBnb3YgaW5mbyBtZWQgbWlsIG5ldCBvcmcgcHJvICcsCiAgICAgICdlZyc6JyBjb20gZWR1IGV1biBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2kgJywKICAgICAgJ2VyJzonIGNvbSBlZHUgZ292IGluZCBtaWwgbmV0IG9yZyByb2NoZXN0IHcgJywKICAgICAgJ2VzJzonIGNvbSBlZHUgZ29iIG5vbSBvcmcgJywKICAgICAgJ2V0JzonIGJpeiBjb20gZWR1IGdvdiBpbmZvIG5hbWUgbmV0IG9yZyAnLAogICAgICAnZmonOicgYWMgYml6IGNvbSBpbmZvIG1pbCBuYW1lIG5ldCBvcmcgcHJvICcsCiAgICAgICdmayc6JyBhYyBjbyBnb3YgbmV0IG5vbSBvcmcgJywKICAgICAgJ2ZyJzonIGFzc28gY29tIGYgZ291diBub20gcHJkIHByZXNzZSB0bSAnLAogICAgICAnZ2cnOicgY28gbmV0IG9yZyAnLAogICAgICAnZ2gnOicgY29tIGVkdSBnb3YgbWlsIG9yZyAnLAogICAgICAnZ24nOicgYWMgY29tIGdvdiBuZXQgb3JnICcsCiAgICAgICdncic6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLAogICAgICAnZ3QnOicgY29tIGVkdSBnb2IgaW5kIG1pbCBuZXQgb3JnICcsCiAgICAgICdndSc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdoayc6JyBjb20gZWR1IGdvdiBpZHYgbmV0IG9yZyAnLAogICAgICAnaHUnOicgMjAwMCBhZ3JhciBib2x0IGNhc2lubyBjaXR5IGNvIGVyb3RpY2EgZXJvdGlrYSBmaWxtIGZvcnVtIGdhbWVzIGhvdGVsIGluZm8gaW5nYXRsYW4gam9nYXN6IGtvbnl2ZWxvIGxha2FzIG1lZGlhIG5ld3Mgb3JnIHByaXYgcmVrbGFtIHNleCBzaG9wIHNwb3J0IHN1bGkgc3pleCB0bSB0b3pzZGUgdXRhemFzIHZpZGVvICcsCiAgICAgICdpZCc6JyBhYyBjbyBnbyBtaWwgbmV0IG9yIHNjaCB3ZWIgJywKICAgICAgJ2lsJzonIGFjIGNvIGdvdiBpZGYgazEyIG11bmkgbmV0IG9yZyAnLAogICAgICAnaW4nOicgYWMgY28gZWR1IGVybmV0IGZpcm0gZ2VuIGdvdiBpIGluZCBtaWwgbmV0IG5pYyBvcmcgcmVzICcsCiAgICAgICdpcSc6JyBjb20gZWR1IGdvdiBpIG1pbCBuZXQgb3JnICcsCiAgICAgICdpcic6JyBhYyBjbyBkbnNzZWMgZ292IGkgaWQgbmV0IG9yZyBzY2ggJywKICAgICAgJ2l0JzonIGVkdSBnb3YgJywKICAgICAgJ2plJzonIGNvIG5ldCBvcmcgJywKICAgICAgJ2pvJzonIGNvbSBlZHUgZ292IG1pbCBuYW1lIG5ldCBvcmcgc2NoICcsCiAgICAgICdqcCc6JyBhYyBhZCBjbyBlZCBnbyBnciBsZyBuZSBvciAnLAogICAgICAna2UnOicgYWMgY28gZ28gaW5mbyBtZSBtb2JpIG5lIG9yIHNjICcsCiAgICAgICdraCc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyBwZXIgJywKICAgICAgJ2tpJzonIGJpeiBjb20gZGUgZWR1IGdvdiBpbmZvIG1vYiBuZXQgb3JnIHRlbCAnLAogICAgICAna20nOicgYXNzbyBjb20gY29vcCBlZHUgZ291diBrIG1lZGVjaW4gbWlsIG5vbSBub3RhaXJlcyBwaGFybWFjaWVucyBwcmVzc2UgdG0gdmV0ZXJpbmFpcmUgJywKICAgICAgJ2tuJzonIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAna3InOicgYWMgYnVzYW4gY2h1bmdidWsgY2h1bmduYW0gY28gZGFlZ3UgZGFlamVvbiBlcyBnYW5nd29uIGdvIGd3YW5nanUgZ3llb25nYnVrIGd5ZW9uZ2dpIGd5ZW9uZ25hbSBocyBpbmNoZW9uIGplanUgamVvbmJ1ayBqZW9ubmFtIGsga2cgbWlsIG1zIG5lIG9yIHBlIHJlIHNjIHNlb3VsIHVsc2FuICcsCiAgICAgICdrdyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdreSc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdreic6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLAogICAgICAnbGInOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnbGsnOicgYXNzbiBjb20gZWR1IGdvdiBncnAgaG90ZWwgaW50IGx0ZCBuZXQgbmdvIG9yZyBzY2ggc29jIHdlYiAnLAogICAgICAnbHInOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnbHYnOicgYXNuIGNvbSBjb25mIGVkdSBnb3YgaWQgbWlsIG5ldCBvcmcgJywKICAgICAgJ2x5JzonIGNvbSBlZHUgZ292IGlkIG1lZCBuZXQgb3JnIHBsYyBzY2ggJywKICAgICAgJ21hJzonIGFjIGNvIGdvdiBtIG5ldCBvcmcgcHJlc3MgJywKICAgICAgJ21jJzonIGFzc28gdG0gJywKICAgICAgJ21lJzonIGFjIGNvIGVkdSBnb3YgaXRzIG5ldCBvcmcgcHJpdiAnLAogICAgICAnbWcnOicgY29tIGVkdSBnb3YgbWlsIG5vbSBvcmcgcHJkIHRtICcsCiAgICAgICdtayc6JyBjb20gZWR1IGdvdiBpbmYgbmFtZSBuZXQgb3JnIHBybyAnLAogICAgICAnbWwnOicgY29tIGVkdSBnb3YgbmV0IG9yZyBwcmVzc2UgJywKICAgICAgJ21uJzonIGVkdSBnb3Ygb3JnICcsCiAgICAgICdtbyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdtdCc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdtdic6JyBhZXJvIGJpeiBjb20gY29vcCBlZHUgZ292IGluZm8gaW50IG1pbCBtdXNldW0gbmFtZSBuZXQgb3JnIHBybyAnLAogICAgICAnbXcnOicgYWMgY28gY29tIGNvb3AgZWR1IGdvdiBpbnQgbXVzZXVtIG5ldCBvcmcgJywKICAgICAgJ214JzonIGNvbSBlZHUgZ29iIG5ldCBvcmcgJywKICAgICAgJ215JzonIGNvbSBlZHUgZ292IG1pbCBuYW1lIG5ldCBvcmcgc2NoICcsCiAgICAgICduZic6JyBhcnRzIGNvbSBmaXJtIGluZm8gbmV0IG90aGVyIHBlciByZWMgc3RvcmUgd2ViICcsCiAgICAgICduZyc6JyBiaXogY29tIGVkdSBnb3YgbWlsIG1vYmkgbmFtZSBuZXQgb3JnIHNjaCAnLAogICAgICAnbmknOicgYWMgY28gY29tIGVkdSBnb2IgbWlsIG5ldCBub20gb3JnICcsCiAgICAgICducCc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLAogICAgICAnbnInOicgYml6IGNvbSBlZHUgZ292IGluZm8gbmV0IG9yZyAnLAogICAgICAnb20nOicgYWMgYml6IGNvIGNvbSBlZHUgZ292IG1lZCBtaWwgbXVzZXVtIG5ldCBvcmcgcHJvIHNjaCAnLAogICAgICAncGUnOicgY29tIGVkdSBnb2IgbWlsIG5ldCBub20gb3JnIHNsZCAnLAogICAgICAncGgnOicgY29tIGVkdSBnb3YgaSBtaWwgbmV0IG5nbyBvcmcgJywKICAgICAgJ3BrJzonIGJpeiBjb20gZWR1IGZhbSBnb2IgZ29rIGdvbiBnb3AgZ29zIGdvdiBuZXQgb3JnIHdlYiAnLAogICAgICAncGwnOicgYXJ0IGJpYWx5c3RvayBiaXogY29tIGVkdSBnZGEgZ2RhbnNrIGdvcnpvdyBnb3YgaW5mbyBrYXRvd2ljZSBrcmFrb3cgbG9keiBsdWJsaW4gbWlsIG5ldCBuZ28gb2xzenR5biBvcmcgcG96bmFuIHB3ciByYWRvbSBzbHVwc2sgc3pjemVjaW4gdG9ydW4gd2Fyc3phd2Egd2F3IHdyb2Mgd3JvY2xhdyB6Z29yYSAnLAogICAgICAncHInOicgYWMgYml6IGNvbSBlZHUgZXN0IGdvdiBpbmZvIGlzbGEgbmFtZSBuZXQgb3JnIHBybyBwcm9mICcsCiAgICAgICdwcyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnIHBsbyBzZWMgJywKICAgICAgJ3B3JzonIGJlbGF1IGNvIGVkIGdvIG5lIG9yICcsCiAgICAgICdybyc6JyBhcnRzIGNvbSBmaXJtIGluZm8gbm9tIG50IG9yZyByZWMgc3RvcmUgdG0gd3d3ICcsCiAgICAgICdycyc6JyBhYyBjbyBlZHUgZ292IGluIG9yZyAnLAogICAgICAnc2InOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnc2MnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnc2gnOicgY28gY29tIGVkdSBnb3YgbmV0IG5vbSBvcmcgJywKICAgICAgJ3NsJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ3N0JzonIGNvIGNvbSBjb25zdWxhZG8gZWR1IGVtYmFpeGFkYSBnb3YgbWlsIG5ldCBvcmcgcHJpbmNpcGUgc2FvdG9tZSBzdG9yZSAnLAogICAgICAnc3YnOicgY29tIGVkdSBnb2Igb3JnIHJlZCAnLAogICAgICAnc3onOicgYWMgY28gb3JnICcsCiAgICAgICd0cic6JyBhdiBiYnMgYmVsIGJpeiBjb20gZHIgZWR1IGdlbiBnb3YgaW5mbyBrMTIgbmFtZSBuZXQgb3JnIHBvbCB0ZWwgdHNrIHR2IHdlYiAnLAogICAgICAndHQnOicgYWVybyBiaXogY2F0IGNvIGNvbSBjb29wIGVkdSBnb3YgaW5mbyBpbnQgam9icyBtaWwgbW9iaSBtdXNldW0gbmFtZSBuZXQgb3JnIHBybyB0ZWwgdHJhdmVsICcsCiAgICAgICd0dyc6JyBjbHViIGNvbSBlYml6IGVkdSBnYW1lIGdvdiBpZHYgbWlsIG5ldCBvcmcgJywKICAgICAgJ211JzonIGFjIGNvIGNvbSBnb3YgbmV0IG9yIG9yZyAnLAogICAgICAnbXonOicgYWMgY28gZWR1IGdvdiBvcmcgJywKICAgICAgJ25hJzonIGNvIGNvbSAnLAogICAgICAnbnonOicgYWMgY28gY3JpIGdlZWsgZ2VuIGdvdnQgaGVhbHRoIGl3aSBtYW9yaSBtaWwgbmV0IG9yZyBwYXJsaWFtZW50IHNjaG9vbCAnLAogICAgICAncGEnOicgYWJvIGFjIGNvbSBlZHUgZ29iIGluZyBtZWQgbmV0IG5vbSBvcmcgc2xkICcsCiAgICAgICdwdCc6JyBjb20gZWR1IGdvdiBpbnQgbmV0IG5vbWUgb3JnIHB1YmwgJywKICAgICAgJ3B5JzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdxYSc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLAogICAgICAncmUnOicgYXNzbyBjb20gbm9tICcsCiAgICAgICdydSc6JyBhYyBhZHlnZXlhIGFsdGFpIGFtdXIgYXJraGFuZ2Vsc2sgYXN0cmFraGFuIGJhc2hraXJpYSBiZWxnb3JvZCBiaXIgYnJ5YW5zayBidXJ5YXRpYSBjYmcgY2hlbCBjaGVseWFiaW5zayBjaGl0YSBjaHVrb3RrYSBjaHV2YXNoaWEgY29tIGRhZ2VzdGFuIGUtYnVyZyBlZHUgZ292IGdyb3pueSBpbnQgaXJrdXRzayBpdmFub3ZvIGl6aGV2c2sgamFyIGpvc2hrYXItb2xhIGthbG15a2lhIGthbHVnYSBrYW1jaGF0a2Ega2FyZWxpYSBrYXphbiBrY2hyIGtlbWVyb3ZvIGtoYWJhcm92c2sga2hha2Fzc2lhIGtodiBraXJvdiBrb2VuaWcga29taSBrb3N0cm9tYSBrcmFub3lhcnNrIGt1YmFuIGt1cmdhbiBrdXJzayBsaXBldHNrIG1hZ2FkYW4gbWFyaSBtYXJpLWVsIG1hcmluZSBtaWwgbW9yZG92aWEgbW9zcmVnIG1zayBtdXJtYW5zayBuYWxjaGlrIG5ldCBubm92IG5vdiBub3Zvc2liaXJzayBuc2sgb21zayBvcmVuYnVyZyBvcmcgb3J5b2wgcGVuemEgcGVybSBwcCBwc2tvdiBwdHogcm5kIHJ5YXphbiBzYWtoYWxpbiBzYW1hcmEgc2FyYXRvdiBzaW1iaXJzayBzbW9sZW5zayBzcGIgc3RhdnJvcG9sIHN0diBzdXJndXQgdGFtYm92IHRhdGFyc3RhbiB0b20gdG9tc2sgdHNhcml0c3luIHRzayB0dWxhIHR1dmEgdHZlciB0eXVtZW4gdWRtIHVkbXVydGlhIHVsYW4tdWRlIHZsYWRpa2F2a2F6IHZsYWRpbWlyIHZsYWRpdm9zdG9rIHZvbGdvZ3JhZCB2b2xvZ2RhIHZvcm9uZXpoIHZybiB2eWF0a2EgeWFrdXRpYSB5YW1hbCB5ZWthdGVyaW5idXJnIHl1emhuby1zYWtoYWxpbnNrICcsCiAgICAgICdydyc6JyBhYyBjbyBjb20gZWR1IGdvdXYgZ292IGludCBtaWwgbmV0ICcsCiAgICAgICdzYSc6JyBjb20gZWR1IGdvdiBtZWQgbmV0IG9yZyBwdWIgc2NoICcsCiAgICAgICdzZCc6JyBjb20gZWR1IGdvdiBpbmZvIG1lZCBuZXQgb3JnIHR2ICcsCiAgICAgICdzZSc6JyBhIGFjIGIgYmQgYyBkIGUgZiBnIGggaSBrIGwgbSBuIG8gb3JnIHAgcGFydGkgcHAgcHJlc3MgciBzIHQgdG0gdSB3IHggeSB6ICcsCiAgICAgICdzZyc6JyBjb20gZWR1IGdvdiBpZG4gbmV0IG9yZyBwZXIgJywKICAgICAgJ3NuJzonIGFydCBjb20gZWR1IGdvdXYgb3JnIHBlcnNvIHVuaXYgJywKICAgICAgJ3N5JzonIGNvbSBlZHUgZ292IG1pbCBuZXQgbmV3cyBvcmcgJywKICAgICAgJ3RoJzonIGFjIGNvIGdvIGluIG1pIG5ldCBvciAnLAogICAgICAndGonOicgYWMgYml6IGNvIGNvbSBlZHUgZ28gZ292IGluZm8gaW50IG1pbCBuYW1lIG5ldCBuaWMgb3JnIHRlc3Qgd2ViICcsCiAgICAgICd0bic6JyBhZ3JpbmV0IGNvbSBkZWZlbnNlIGVkdW5ldCBlbnMgZmluIGdvdiBpbmQgaW5mbyBpbnRsIG1pbmNvbSBuYXQgbmV0IG9yZyBwZXJzbyBybnJ0IHJucyBybnUgdG91cmlzbSAnLAogICAgICAndHonOicgYWMgY28gZ28gbmUgb3IgJywKICAgICAgJ3VhJzonIGJpeiBjaGVya2Fzc3kgY2hlcm5pZ292IGNoZXJub3Z0c3kgY2sgY24gY28gY29tIGNyaW1lYSBjdiBkbiBkbmVwcm9wZXRyb3ZzayBkb25ldHNrIGRwIGVkdSBnb3YgaWYgaW4gaXZhbm8tZnJhbmtpdnNrIGtoIGtoYXJrb3Yga2hlcnNvbiBraG1lbG5pdHNraXkga2lldiBraXJvdm9ncmFkIGttIGtyIGtzIGt2IGxnIGx1Z2Fuc2sgbHV0c2sgbHZpdiBtZSBtayBuZXQgbmlrb2xhZXYgb2Qgb2Rlc3NhIG9yZyBwbCBwb2x0YXZhIHBwIHJvdm5vIHJ2IHNlYmFzdG9wb2wgc3VteSB0ZSB0ZXJub3BpbCB1emhnb3JvZCB2aW5uaWNhIHZuIHphcG9yaXpoemhlIHpoaXRvbWlyIHpwIHp0ICcsCiAgICAgICd1Zyc6JyBhYyBjbyBnbyBuZSBvciBvcmcgc2MgJywKICAgICAgJ3VrJzonIGFjIGJsIGJyaXRpc2gtbGlicmFyeSBjbyBjeW0gZ292IGdvdnQgaWNuZXQgamV0IGxlYSBsdGQgbWUgbWlsIG1vZCBuYXRpb25hbC1saWJyYXJ5LXNjb3RsYW5kIG5lbCBuZXQgbmhzIG5pYyBubHMgb3JnIG9yZ24gcGFybGlhbWVudCBwbGMgcG9saWNlIHNjaCBzY290IHNvYyAnLAogICAgICAndXMnOicgZG5pIGZlZCBpc2Ega2lkcyBuc24gJywKICAgICAgJ3V5JzonIGNvbSBlZHUgZ3ViIG1pbCBuZXQgb3JnICcsCiAgICAgICd2ZSc6JyBjbyBjb20gZWR1IGdvYiBpbmZvIG1pbCBuZXQgb3JnIHdlYiAnLAogICAgICAndmknOicgY28gY29tIGsxMiBuZXQgb3JnICcsCiAgICAgICd2bic6JyBhYyBiaXogY29tIGVkdSBnb3YgaGVhbHRoIGluZm8gaW50IG5hbWUgbmV0IG9yZyBwcm8gJywKICAgICAgJ3llJzonIGNvIGNvbSBnb3YgbHRkIG1lIG5ldCBvcmcgcGxjICcsCiAgICAgICd5dSc6JyBhYyBjbyBlZHUgZ292IG9yZyAnLAogICAgICAnemEnOicgYWMgYWdyaWMgYWx0IGJvdXJzZSBjaXR5IGNvIGN5YmVybmV0IGRiIGVkdSBnb3YgZ3JvbmRhciBpYWNjZXNzIGltdCBpbmNhIGxhbmRlc2lnbiBsYXcgbWlsIG5ldCBuZ28gbmlzIG5vbSBvbGl2ZXR0aSBvcmcgcGl4IHNjaG9vbCB0bSB3ZWIgJywKICAgICAgJ3ptJzonIGFjIGNvIGNvbSBlZHUgZ292IG5ldCBvcmcgc2NoICcKICAgIH0sCiAgICAvLyBnb3JoaWxsIDIwMTMtMTAtMjU6IFVzaW5nIGluZGV4T2YoKSBpbnN0ZWFkIFJlZ2V4cCgpLiBTaWduaWZpY2FudCBib29zdAogICAgLy8gaW4gYm90aCBwZXJmb3JtYW5jZSBhbmQgbWVtb3J5IGZvb3RwcmludC4gTm8gaW5pdGlhbGl6YXRpb24gcmVxdWlyZWQuCiAgICAvLyBodHRwOi8vanNwZXJmLmNvbS91cmktanMtc2xkLXJlZ2V4LXZzLWJpbmFyeS1zZWFyY2gvNAogICAgLy8gRm9sbG93aW5nIG1ldGhvZHMgdXNlIGxhc3RJbmRleE9mKCkgcmF0aGVyIHRoYW4gYXJyYXkuc3BsaXQoKSBpbiBvcmRlcgogICAgLy8gdG8gYXZvaWQgYW55IG1lbW9yeSBhbGxvY2F0aW9ucy4KICAgIGhhczogZnVuY3Rpb24oZG9tYWluKSB7CiAgICAgIHZhciB0bGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nKTsKICAgICAgaWYgKHRsZE9mZnNldCA8PSAwIHx8IHRsZE9mZnNldCA+PSAoZG9tYWluLmxlbmd0aC0xKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgc2xkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJywgdGxkT2Zmc2V0LTEpOwogICAgICBpZiAoc2xkT2Zmc2V0IDw9IDAgfHwgc2xkT2Zmc2V0ID49ICh0bGRPZmZzZXQtMSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIHNsZExpc3QgPSBTTEQubGlzdFtkb21haW4uc2xpY2UodGxkT2Zmc2V0KzEpXTsKICAgICAgaWYgKCFzbGRMaXN0KSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiBzbGRMaXN0LmluZGV4T2YoJyAnICsgZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxLCB0bGRPZmZzZXQpICsgJyAnKSA+PSAwOwogICAgfSwKICAgIGlzOiBmdW5jdGlvbihkb21haW4pIHsKICAgICAgdmFyIHRsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicpOwogICAgICBpZiAodGxkT2Zmc2V0IDw9IDAgfHwgdGxkT2Zmc2V0ID49IChkb21haW4ubGVuZ3RoLTEpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7CiAgICAgIGlmIChzbGRPZmZzZXQgPj0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgc2xkTGlzdCA9IFNMRC5saXN0W2RvbWFpbi5zbGljZSh0bGRPZmZzZXQrMSldOwogICAgICBpZiAoIXNsZExpc3QpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHNsZExpc3QuaW5kZXhPZignICcgKyBkb21haW4uc2xpY2UoMCwgdGxkT2Zmc2V0KSArICcgJykgPj0gMDsKICAgIH0sCiAgICBnZXQ6IGZ1bmN0aW9uKGRvbWFpbikgewogICAgICB2YXIgdGxkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIGlmICh0bGRPZmZzZXQgPD0gMCB8fCB0bGRPZmZzZXQgPj0gKGRvbWFpbi5sZW5ndGgtMSkpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB2YXIgc2xkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJywgdGxkT2Zmc2V0LTEpOwogICAgICBpZiAoc2xkT2Zmc2V0IDw9IDAgfHwgc2xkT2Zmc2V0ID49ICh0bGRPZmZzZXQtMSkpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB2YXIgc2xkTGlzdCA9IFNMRC5saXN0W2RvbWFpbi5zbGljZSh0bGRPZmZzZXQrMSldOwogICAgICBpZiAoIXNsZExpc3QpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBpZiAoc2xkTGlzdC5pbmRleE9mKCcgJyArIGRvbWFpbi5zbGljZShzbGRPZmZzZXQrMSwgdGxkT2Zmc2V0KSArICcgJykgPCAwKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgcmV0dXJuIGRvbWFpbi5zbGljZShzbGRPZmZzZXQrMSk7CiAgICB9LAogICAgbm9Db25mbGljdDogZnVuY3Rpb24oKXsKICAgICAgaWYgKHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zID09PSB0aGlzKSB7CiAgICAgICAgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPSBfU2Vjb25kTGV2ZWxEb21haW5zOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CgogIHJldHVybiBTTEQ7Cn0pKTsKCn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKiEKICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMcwogKgogKiBWZXJzaW9uOiAxLjE4LjEKICoKICogQXV0aG9yOiBSb2RuZXkgUmVobQogKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy8KICoKICogTGljZW5zZWQgdW5kZXIKICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlCiAqCiAqLwooZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAndXNlIHN0cmljdCc7CiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci9yZXR1cm5FeHBvcnRzLmpzCiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgewogICAgLy8gTm9kZQogICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJy4vcHVueWNvZGUnKSwgcmVxdWlyZSgnLi9JUHY2JyksIHJlcXVpcmUoJy4vU2Vjb25kTGV2ZWxEb21haW5zJykpOwogIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuCiAgICBkZWZpbmUoWycuL3B1bnljb2RlJywgJy4vSVB2NicsICcuL1NlY29uZExldmVsRG9tYWlucyddLCBmYWN0b3J5KTsKICB9IGVsc2UgewogICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdykKICAgIHJvb3QuVVJJID0gZmFjdG9yeShyb290LnB1bnljb2RlLCByb290LklQdjYsIHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zLCByb290KTsKICB9Cn0odGhpcywgZnVuY3Rpb24gKHB1bnljb2RlLCBJUHY2LCBTTEQsIHJvb3QpIHsKICAndXNlIHN0cmljdCc7CiAgLypnbG9iYWwgbG9jYXRpb24sIGVzY2FwZSwgdW5lc2NhcGUgKi8KICAvLyBGSVhNRTogdjIuMC4wIHJlbmFtY2Ugbm9uLWNhbWVsQ2FzZSBwcm9wZXJ0aWVzIHRvIHVwcGVyY2FzZQogIC8qanNoaW50IGNhbWVsY2FzZTogZmFsc2UgKi8KCiAgLy8gc2F2ZSBjdXJyZW50IFVSSSB2YXJpYWJsZSwgaWYgYW55CiAgdmFyIF9VUkkgPSByb290ICYmIHJvb3QuVVJJOwoKICBmdW5jdGlvbiBVUkkodXJsLCBiYXNlKSB7CiAgICB2YXIgX3VybFN1cHBsaWVkID0gYXJndW1lbnRzLmxlbmd0aCA+PSAxOwogICAgdmFyIF9iYXNlU3VwcGxpZWQgPSBhcmd1bWVudHMubGVuZ3RoID49IDI7CgogICAgLy8gQWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IHRoZSAnbmV3JyBrZXl3b3JkCiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVVJJKSkgewogICAgICBpZiAoX3VybFN1cHBsaWVkKSB7CiAgICAgICAgaWYgKF9iYXNlU3VwcGxpZWQpIHsKICAgICAgICAgIHJldHVybiBuZXcgVVJJKHVybCwgYmFzZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbmV3IFVSSSh1cmwpOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IFVSSSgpOwogICAgfQoKICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkgewogICAgICBpZiAoX3VybFN1cHBsaWVkKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5kZWZpbmVkIGlzIG5vdCBhIHZhbGlkIGFyZ3VtZW50IGZvciBVUkknKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICB1cmwgPSBsb2NhdGlvbi5ocmVmICsgJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXJsID0gJyc7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmhyZWYodXJsKTsKCiAgICAvLyByZXNvbHZlIHRvIGJhc2UgYWNjb3JkaW5nIHRvIGh0dHA6Ly9kdmNzLnczLm9yZy9oZy91cmwvcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWwjY29uc3RydWN0b3IKICAgIGlmIChiYXNlICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMuYWJzb2x1dGVUbyhiYXNlKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9CgogIFVSSS52ZXJzaW9uID0gJzEuMTguMSc7CgogIHZhciBwID0gVVJJLnByb3RvdHlwZTsKICB2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsKCiAgZnVuY3Rpb24gZXNjYXBlUmVnRXgoc3RyaW5nKSB7CiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9jb21taXQvODVhYzIxNzgzYzExZjhjY2FiMDYxMDZkYmE5NzM1YTMxYTg2OTI0ZCNjb21taXRjb21tZW50LTgyMTk2MwogICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xdXC9cXF0pL2csICdcXCQxJyk7CiAgfQoKICBmdW5jdGlvbiBnZXRUeXBlKHZhbHVlKSB7CiAgICAvLyBJRTggZG9lc24ndCByZXR1cm4gW09iamVjdCBVbmRlZmluZWRdIGJ1dCBbT2JqZWN0IE9iamVjdF0gZm9yIHVuZGVmaW5lZCB2YWx1ZQogICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuICdVbmRlZmluZWQnOwogICAgfQoKICAgIHJldHVybiBTdHJpbmcoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSkuc2xpY2UoOCwgLTEpOwogIH0KCiAgZnVuY3Rpb24gaXNBcnJheShvYmopIHsKICAgIHJldHVybiBnZXRUeXBlKG9iaikgPT09ICdBcnJheSc7CiAgfQoKICBmdW5jdGlvbiBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhLCB2YWx1ZSkgewogICAgdmFyIGxvb2t1cCA9IHt9OwogICAgdmFyIGksIGxlbmd0aDsKCiAgICBpZiAoZ2V0VHlwZSh2YWx1ZSkgPT09ICdSZWdFeHAnKSB7CiAgICAgIGxvb2t1cCA9IG51bGw7CiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7CiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgbG9va3VwW3ZhbHVlW2ldXSA9IHRydWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGxvb2t1cFt2YWx1ZV0gPSB0cnVlOwogICAgfQoKICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IHRydWUgKi8KICAgICAgdmFyIF9tYXRjaCA9IGxvb2t1cCAmJiBsb29rdXBbZGF0YVtpXV0gIT09IHVuZGVmaW5lZAogICAgICAgIHx8ICFsb29rdXAgJiYgdmFsdWUudGVzdChkYXRhW2ldKTsKICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IGZhbHNlICovCiAgICAgIGlmIChfbWF0Y2gpIHsKICAgICAgICBkYXRhLnNwbGljZShpLCAxKTsKICAgICAgICBsZW5ndGgtLTsKICAgICAgICBpLS07CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZGF0YTsKICB9CgogIGZ1bmN0aW9uIGFycmF5Q29udGFpbnMobGlzdCwgdmFsdWUpIHsKICAgIHZhciBpLCBsZW5ndGg7CgogICAgLy8gdmFsdWUgbWF5IGJlIHN0cmluZywgbnVtYmVyLCBhcnJheSwgcmVnZXhwCiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgLy8gTm90ZTogdGhpcyBjYW4gYmUgb3B0aW1pemVkIHRvIE8obikgKGluc3RlYWQgb2YgY3VycmVudCBPKG0gKiBuKSkKICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoIWFycmF5Q29udGFpbnMobGlzdCwgdmFsdWVbaV0pKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICB2YXIgX3R5cGUgPSBnZXRUeXBlKHZhbHVlKTsKICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKF90eXBlID09PSAnUmVnRXhwJykgewogICAgICAgIGlmICh0eXBlb2YgbGlzdFtpXSA9PT0gJ3N0cmluZycgJiYgbGlzdFtpXS5tYXRjaCh2YWx1ZSkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChsaXN0W2ldID09PSB2YWx1ZSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gYXJyYXlzRXF1YWwob25lLCB0d28pIHsKICAgIGlmICghaXNBcnJheShvbmUpIHx8ICFpc0FycmF5KHR3bykpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGFycmF5cyBjYW4ndCBiZSBlcXVhbCBpZiB0aGV5IGhhdmUgZGlmZmVyZW50IGFtb3VudCBvZiBjb250ZW50CiAgICBpZiAob25lLmxlbmd0aCAhPT0gdHdvLmxlbmd0aCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgb25lLnNvcnQoKTsKICAgIHR3by5zb3J0KCk7CgogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvbmUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGlmIChvbmVbaV0gIT09IHR3b1tpXSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gdHJpbVNsYXNoZXModGV4dCkgewogICAgdmFyIHRyaW1fZXhwcmVzc2lvbiA9IC9eXC8rfFwvKyQvZzsKICAgIHJldHVybiB0ZXh0LnJlcGxhY2UodHJpbV9leHByZXNzaW9uLCAnJyk7CiAgfQoKICBVUkkuX3BhcnRzID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBwcm90b2NvbDogbnVsbCwKICAgICAgdXNlcm5hbWU6IG51bGwsCiAgICAgIHBhc3N3b3JkOiBudWxsLAogICAgICBob3N0bmFtZTogbnVsbCwKICAgICAgdXJuOiBudWxsLAogICAgICBwb3J0OiBudWxsLAogICAgICBwYXRoOiBudWxsLAogICAgICBxdWVyeTogbnVsbCwKICAgICAgZnJhZ21lbnQ6IG51bGwsCiAgICAgIC8vIHN0YXRlCiAgICAgIGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVyczogVVJJLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywKICAgICAgZXNjYXBlUXVlcnlTcGFjZTogVVJJLmVzY2FwZVF1ZXJ5U3BhY2UKICAgIH07CiAgfTsKICAvLyBzdGF0ZTogYWxsb3cgZHVwbGljYXRlIHF1ZXJ5IHBhcmFtZXRlcnMgKGE9MSZhPTEpCiAgVVJJLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9IGZhbHNlOwogIC8vIHN0YXRlOiByZXBsYWNlcyArIHdpdGggJTIwIChzcGFjZSBpbiBxdWVyeSBzdHJpbmdzKQogIFVSSS5lc2NhcGVRdWVyeVNwYWNlID0gdHJ1ZTsKICAvLyBzdGF0aWMgcHJvcGVydGllcwogIFVSSS5wcm90b2NvbF9leHByZXNzaW9uID0gL15bYS16XVthLXowLTkuKy1dKiQvaTsKICBVUkkuaWRuX2V4cHJlc3Npb24gPSAvW15hLXowLTlcLi1dL2k7CiAgVVJJLnB1bnljb2RlX2V4cHJlc3Npb24gPSAvKHhuLS0pL2k7CiAgLy8gd2VsbCwgMzMzLjQ0NC41NTUuNjY2IG1hdGNoZXMsIGJ1dCBpdCBzdXJlIGFpbid0IG5vIElQdjQgLSBkbyB3ZSBjYXJlPwogIFVSSS5pcDRfZXhwcmVzc2lvbiA9IC9eXGR7MSwzfVwuXGR7MSwzfVwuXGR7MSwzfVwuXGR7MSwzfSQvOwogIC8vIGNyZWRpdHMgdG8gUmljaCBCcm93bgogIC8vIHNvdXJjZTogaHR0cDovL2ZvcnVtcy5pbnRlcm1hcHBlci5jb20vdmlld3RvcGljLnBocD9wPTEwOTYjMTA5NgogIC8vIHNwZWNpZmljYXRpb246IGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzQyOTEudHh0CiAgVVJJLmlwNl9leHByZXNzaW9uID0gL15ccyooKChbMC05QS1GYS1mXXsxLDR9Oil7N30oWzAtOUEtRmEtZl17MSw0fXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Nn0oOlswLTlBLUZhLWZdezEsNH18KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs1fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDJ9KXw6KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs0fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDN9KXwoKDpbMC05QS1GYS1mXXsxLDR9KT86KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7M30oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw0fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwyfTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsyfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDV9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDN9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezF9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNn0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNH06KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KDooKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw3fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw1fTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKSkoJS4rKT9ccyokLzsKICAvLyBleHByZXNzaW9uIHVzZWQgaXMgImdydWJlciByZXZpc2VkIiAoQGdydWJlciB2MikgZGV0ZXJtaW5lZCB0byBiZSB0aGUKICAvLyBiZXN0IHNvbHV0aW9uIGluIGEgcmVnZXgtZ29sZiB3ZSBkaWQgYSBjb3VwbGUgb2YgYWdlcyBhZ28gYXQKICAvLyAqIGh0dHA6Ly9tYXRoaWFzYnluZW5zLmJlL2RlbW8vdXJsLXJlZ2V4CiAgLy8gKiBodHRwOi8vcm9kbmV5cmVobS5kZS90L3VybC1yZWdleC5odG1sCiAgVVJJLmZpbmRfdXJpX2V4cHJlc3Npb24gPSAvXGIoKD86W2Etel1bXHctXSs6KD86XC97MSwzfXxbYS16MC05JV0pfHd3d1xkezAsM31bLl18W2EtejAtOS5cLV0rWy5dW2Etel17Miw0fVwvKSg/OlteXHMoKTw+XSt8XCgoW15ccygpPD5dK3woXChbXlxzKCk8Pl0rXCkpKSpcKSkrKD86XCgoW15ccygpPD5dK3woXChbXlxzKCk8Pl0rXCkpKSpcKXxbXlxzYCEoKVxbXF17fTs6JyIuLDw+P8KrwrvigJzigJ3igJjigJldKSkvaWc7CiAgVVJJLmZpbmRVcmkgPSB7CiAgICAvLyB2YWxpZCAic2NoZW1lOi8vIiBvciAid3d3LiIKICAgIHN0YXJ0OiAvXGIoPzooW2Etel1bYS16MC05ListXSo6XC9cLyl8d3d3XC4pL2dpLAogICAgLy8gZXZlcnl0aGluZyB1cCB0byB0aGUgbmV4dCB3aGl0ZXNwYWNlCiAgICBlbmQ6IC9bXHNcclxuXXwkLywKICAgIC8vIHRyaW0gdHJhaWxpbmcgcHVuY3R1YXRpb24gY2FwdHVyZWQgYnkgZW5kIFJlZ0V4cAogICAgdHJpbTogL1tgISgpXFtcXXt9OzonIi4sPD4/wqvCu+KAnOKAneKAnuKAmOKAmV0rJC8KICB9OwogIC8vIGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvdXJpLXNjaGVtZXMuaHRtbAogIC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9UQ1BfYW5kX1VEUF9wb3J0X251bWJlcnMjV2VsbC1rbm93bl9wb3J0cwogIFVSSS5kZWZhdWx0UG9ydHMgPSB7CiAgICBodHRwOiAnODAnLAogICAgaHR0cHM6ICc0NDMnLAogICAgZnRwOiAnMjEnLAogICAgZ29waGVyOiAnNzAnLAogICAgd3M6ICc4MCcsCiAgICB3c3M6ICc0NDMnCiAgfTsKICAvLyBhbGxvd2VkIGhvc3RuYW1lIGNoYXJhY3RlcnMgYWNjb3JkaW5nIHRvIFJGQyAzOTg2CiAgLy8gQUxQSEEgRElHSVQgIi0iICIuIiAiXyIgIn4iICIhIiAiJCIgIiYiICInIiAiKCIgIikiICIqIiAiKyIgIiwiICI7IiAiPSIgJWVuY29kZWQKICAvLyBJJ3ZlIG5ldmVyIHNlZW4gYSAobm9uLUlETikgaG9zdG5hbWUgb3RoZXIgdGhhbjogQUxQSEEgRElHSVQgLiAtCiAgVVJJLmludmFsaWRfaG9zdG5hbWVfY2hhcmFjdGVycyA9IC9bXmEtekEtWjAtOVwuLV0vOwogIC8vIG1hcCBET00gRWxlbWVudHMgdG8gdGhlaXIgVVJJIGF0dHJpYnV0ZQogIFVSSS5kb21BdHRyaWJ1dGVzID0gewogICAgJ2EnOiAnaHJlZicsCiAgICAnYmxvY2txdW90ZSc6ICdjaXRlJywKICAgICdsaW5rJzogJ2hyZWYnLAogICAgJ2Jhc2UnOiAnaHJlZicsCiAgICAnc2NyaXB0JzogJ3NyYycsCiAgICAnZm9ybSc6ICdhY3Rpb24nLAogICAgJ2ltZyc6ICdzcmMnLAogICAgJ2FyZWEnOiAnaHJlZicsCiAgICAnaWZyYW1lJzogJ3NyYycsCiAgICAnZW1iZWQnOiAnc3JjJywKICAgICdzb3VyY2UnOiAnc3JjJywKICAgICd0cmFjayc6ICdzcmMnLAogICAgJ2lucHV0JzogJ3NyYycsIC8vIGJ1dCBvbmx5IGlmIHR5cGU9ImltYWdlIgogICAgJ2F1ZGlvJzogJ3NyYycsCiAgICAndmlkZW8nOiAnc3JjJwogIH07CiAgVVJJLmdldERvbUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIGlmICghbm9kZSB8fCAhbm9kZS5ub2RlTmFtZSkgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQoKICAgIHZhciBub2RlTmFtZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgIC8vIDxpbnB1dD4gc2hvdWxkIG9ubHkgZXhwb3NlIHNyYyBmb3IgdHlwZT0iaW1hZ2UiCiAgICBpZiAobm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgbm9kZS50eXBlICE9PSAnaW1hZ2UnKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIFVSSS5kb21BdHRyaWJ1dGVzW25vZGVOYW1lXTsKICB9OwoKICBmdW5jdGlvbiBlc2NhcGVGb3JEdW1iRmlyZWZveDM2KHZhbHVlKSB7CiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvOTEKICAgIHJldHVybiBlc2NhcGUodmFsdWUpOwogIH0KCiAgLy8gZW5jb2RpbmcgLyBkZWNvZGluZyBhY2NvcmRpbmcgdG8gUkZDMzk4NgogIGZ1bmN0aW9uIHN0cmljdEVuY29kZVVSSUNvbXBvbmVudChzdHJpbmcpIHsKICAgIC8vIHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL2VuY29kZVVSSUNvbXBvbmVudAogICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmcpCiAgICAgIC5yZXBsYWNlKC9bIScoKSpdL2csIGVzY2FwZUZvckR1bWJGaXJlZm94MzYpCiAgICAgIC5yZXBsYWNlKC9cKi9nLCAnJTJBJyk7CiAgfQogIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7CiAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDsKICBVUkkuaXNvODg1OSA9IGZ1bmN0aW9uKCkgewogICAgVVJJLmVuY29kZSA9IGVzY2FwZTsKICAgIFVSSS5kZWNvZGUgPSB1bmVzY2FwZTsKICB9OwogIFVSSS51bmljb2RlID0gZnVuY3Rpb24oKSB7CiAgICBVUkkuZW5jb2RlID0gc3RyaWN0RW5jb2RlVVJJQ29tcG9uZW50OwogICAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDsKICB9OwogIFVSSS5jaGFyYWN0ZXJzID0gewogICAgcGF0aG5hbWU6IHsKICAgICAgZW5jb2RlOiB7CiAgICAgICAgLy8gUkZDMzk4NiAyLjE6IEZvciBjb25zaXN0ZW5jeSwgVVJJIHByb2R1Y2VycyBhbmQgbm9ybWFsaXplcnMgc2hvdWxkCiAgICAgICAgLy8gdXNlIHVwcGVyY2FzZSBoZXhhZGVjaW1hbCBkaWdpdHMgZm9yIGFsbCBwZXJjZW50LWVuY29kaW5ncy4KICAgICAgICBleHByZXNzaW9uOiAvJSgyNHwyNnwyQnwyQ3wzQnwzRHwzQXw0MCkvaWcsCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAvLyAtLl9+IScoKSoKICAgICAgICAgICclMjQnOiAnJCcsCiAgICAgICAgICAnJTI2JzogJyYnLAogICAgICAgICAgJyUyQic6ICcrJywKICAgICAgICAgICclMkMnOiAnLCcsCiAgICAgICAgICAnJTNCJzogJzsnLAogICAgICAgICAgJyUzRCc6ICc9JywKICAgICAgICAgICclM0EnOiAnOicsCiAgICAgICAgICAnJTQwJzogJ0AnCiAgICAgICAgfQogICAgICB9LAogICAgICBkZWNvZGU6IHsKICAgICAgICBleHByZXNzaW9uOiAvW1wvXD8jXS9nLAogICAgICAgIG1hcDogewogICAgICAgICAgJy8nOiAnJTJGJywKICAgICAgICAgICc/JzogJyUzRicsCiAgICAgICAgICAnIyc6ICclMjMnCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzZXJ2ZWQ6IHsKICAgICAgZW5jb2RlOiB7CiAgICAgICAgLy8gUkZDMzk4NiAyLjE6IEZvciBjb25zaXN0ZW5jeSwgVVJJIHByb2R1Y2VycyBhbmQgbm9ybWFsaXplcnMgc2hvdWxkCiAgICAgICAgLy8gdXNlIHVwcGVyY2FzZSBoZXhhZGVjaW1hbCBkaWdpdHMgZm9yIGFsbCBwZXJjZW50LWVuY29kaW5ncy4KICAgICAgICBleHByZXNzaW9uOiAvJSgyMXwyM3wyNHwyNnwyN3wyOHwyOXwyQXwyQnwyQ3wyRnwzQXwzQnwzRHwzRnw0MHw1Qnw1RCkvaWcsCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAvLyBnZW4tZGVsaW1zCiAgICAgICAgICAnJTNBJzogJzonLAogICAgICAgICAgJyUyRic6ICcvJywKICAgICAgICAgICclM0YnOiAnPycsCiAgICAgICAgICAnJTIzJzogJyMnLAogICAgICAgICAgJyU1Qic6ICdbJywKICAgICAgICAgICclNUQnOiAnXScsCiAgICAgICAgICAnJTQwJzogJ0AnLAogICAgICAgICAgLy8gc3ViLWRlbGltcwogICAgICAgICAgJyUyMSc6ICchJywKICAgICAgICAgICclMjQnOiAnJCcsCiAgICAgICAgICAnJTI2JzogJyYnLAogICAgICAgICAgJyUyNyc6ICdcJycsCiAgICAgICAgICAnJTI4JzogJygnLAogICAgICAgICAgJyUyOSc6ICcpJywKICAgICAgICAgICclMkEnOiAnKicsCiAgICAgICAgICAnJTJCJzogJysnLAogICAgICAgICAgJyUyQyc6ICcsJywKICAgICAgICAgICclM0InOiAnOycsCiAgICAgICAgICAnJTNEJzogJz0nCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdXJucGF0aDogewogICAgICAvLyBUaGUgY2hhcmFjdGVycyB1bmRlciBgZW5jb2RlYCBhcmUgdGhlIGNoYXJhY3RlcnMgY2FsbGVkIG91dCBieSBSRkMgMjE0MSBhcyBiZWluZyBhY2NlcHRhYmxlCiAgICAgIC8vIGZvciB1c2FnZSBpbiBhIFVSTi4gUkZDMjE0MSBhbHNvIGNhbGxzIG91dCAiLSIsICIuIiwgYW5kICJfIiBhcyBhY2NlcHRhYmxlIGNoYXJhY3RlcnMsIGJ1dAogICAgICAvLyB0aGVzZSBhcmVuJ3QgZW5jb2RlZCBieSBlbmNvZGVVUklDb21wb25lbnQsIHNvIHdlIGRvbid0IGhhdmUgdG8gY2FsbCB0aGVtIG91dCBoZXJlLiBBbHNvCiAgICAgIC8vIG5vdGUgdGhhdCB0aGUgY29sb24gY2hhcmFjdGVyIGlzIG5vdCBmZWF0dXJlZCBpbiB0aGUgZW5jb2RpbmcgbWFwOyB0aGlzIGlzIGJlY2F1c2UgVVJJLmpzCiAgICAgIC8vIGdpdmVzIHRoZSBjb2xvbnMgaW4gVVJOcyBzZW1hbnRpYyBtZWFuaW5nIGFzIHRoZSBkZWxpbWl0ZXJzIG9mIHBhdGggc2VnZW1lbnRzLCBhbmQgc28gaXQKICAgICAgLy8gc2hvdWxkIG5vdCBhcHBlYXIgdW5lbmNvZGVkIGluIGEgc2VnbWVudCBpdHNlbGYuCiAgICAgIC8vIFNlZSBhbHNvIHRoZSBub3RlIGFib3ZlIGFib3V0IFJGQzM5ODYgYW5kIGNhcGl0YWxhbGl6ZWQgaGV4IGRpZ2l0cy4KICAgICAgZW5jb2RlOiB7CiAgICAgICAgZXhwcmVzc2lvbjogLyUoMjF8MjR8Mjd8Mjh8Mjl8MkF8MkJ8MkN8M0J8M0R8NDApL2lnLAogICAgICAgIG1hcDogewogICAgICAgICAgJyUyMSc6ICchJywKICAgICAgICAgICclMjQnOiAnJCcsCiAgICAgICAgICAnJTI3JzogJ1wnJywKICAgICAgICAgICclMjgnOiAnKCcsCiAgICAgICAgICAnJTI5JzogJyknLAogICAgICAgICAgJyUyQSc6ICcqJywKICAgICAgICAgICclMkInOiAnKycsCiAgICAgICAgICAnJTJDJzogJywnLAogICAgICAgICAgJyUzQic6ICc7JywKICAgICAgICAgICclM0QnOiAnPScsCiAgICAgICAgICAnJTQwJzogJ0AnCiAgICAgICAgfQogICAgICB9LAogICAgICAvLyBUaGVzZSBjaGFyYWN0ZXJzIGFyZSB0aGUgY2hhcmFjdGVycyBjYWxsZWQgb3V0IGJ5IFJGQzIxNDEgYXMgInJlc2VydmVkIiBjaGFyYWN0ZXJzIHRoYXQKICAgICAgLy8gc2hvdWxkIG5ldmVyIGFwcGVhciBpbiBhIFVSTiwgcGx1cyB0aGUgY29sb24gY2hhcmFjdGVyIChzZWUgbm90ZSBhYm92ZSkuCiAgICAgIGRlY29kZTogewogICAgICAgIGV4cHJlc3Npb246IC9bXC9cPyM6XS9nLAogICAgICAgIG1hcDogewogICAgICAgICAgJy8nOiAnJTJGJywKICAgICAgICAgICc/JzogJyUzRicsCiAgICAgICAgICAnIyc6ICclMjMnLAogICAgICAgICAgJzonOiAnJTNBJwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAgVVJJLmVuY29kZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7CiAgICB2YXIgZXNjYXBlZCA9IFVSSS5lbmNvZGUoc3RyaW5nICsgJycpOwogICAgaWYgKGVzY2FwZVF1ZXJ5U3BhY2UgPT09IHVuZGVmaW5lZCkgewogICAgICBlc2NhcGVRdWVyeVNwYWNlID0gVVJJLmVzY2FwZVF1ZXJ5U3BhY2U7CiAgICB9CgogICAgcmV0dXJuIGVzY2FwZVF1ZXJ5U3BhY2UgPyBlc2NhcGVkLnJlcGxhY2UoLyUyMC9nLCAnKycpIDogZXNjYXBlZDsKICB9OwogIFVSSS5kZWNvZGVRdWVyeSA9IGZ1bmN0aW9uKHN0cmluZywgZXNjYXBlUXVlcnlTcGFjZSkgewogICAgc3RyaW5nICs9ICcnOwogICAgaWYgKGVzY2FwZVF1ZXJ5U3BhY2UgPT09IHVuZGVmaW5lZCkgewogICAgICBlc2NhcGVRdWVyeVNwYWNlID0gVVJJLmVzY2FwZVF1ZXJ5U3BhY2U7CiAgICB9CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIFVSSS5kZWNvZGUoZXNjYXBlUXVlcnlTcGFjZSA/IHN0cmluZy5yZXBsYWNlKC9cKy9nLCAnJTIwJykgOiBzdHJpbmcpOwogICAgfSBjYXRjaChlKSB7CiAgICAgIC8vIHdlJ3JlIG5vdCBnb2luZyB0byBtZXNzIHdpdGggd2VpcmQgZW5jb2RpbmdzLAogICAgICAvLyBnaXZlIHVwIGFuZCByZXR1cm4gdGhlIHVuZGVjb2RlZCBvcmlnaW5hbCBzdHJpbmcKICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy84NwogICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzkyCiAgICAgIHJldHVybiBzdHJpbmc7CiAgICB9CiAgfTsKICAvLyBnZW5lcmF0ZSBlbmNvZGUvZGVjb2RlIHBhdGggZnVuY3Rpb25zCiAgdmFyIF9wYXJ0cyA9IHsnZW5jb2RlJzonZW5jb2RlJywgJ2RlY29kZSc6J2RlY29kZSd9OwogIHZhciBfcGFydDsKICB2YXIgZ2VuZXJhdGVBY2Nlc3NvciA9IGZ1bmN0aW9uKF9ncm91cCwgX3BhcnQpIHsKICAgIHJldHVybiBmdW5jdGlvbihzdHJpbmcpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gVVJJW19wYXJ0XShzdHJpbmcgKyAnJykucmVwbGFjZShVUkkuY2hhcmFjdGVyc1tfZ3JvdXBdW19wYXJ0XS5leHByZXNzaW9uLCBmdW5jdGlvbihjKSB7CiAgICAgICAgICByZXR1cm4gVVJJLmNoYXJhY3RlcnNbX2dyb3VwXVtfcGFydF0ubWFwW2NdOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gd2UncmUgbm90IGdvaW5nIHRvIG1lc3Mgd2l0aCB3ZWlyZCBlbmNvZGluZ3MsCiAgICAgICAgLy8gZ2l2ZSB1cCBhbmQgcmV0dXJuIHRoZSB1bmRlY29kZWQgb3JpZ2luYWwgc3RyaW5nCiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy84NwogICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvOTIKICAgICAgICByZXR1cm4gc3RyaW5nOwogICAgICB9CiAgICB9OwogIH07CgogIGZvciAoX3BhcnQgaW4gX3BhcnRzKSB7CiAgICBVUklbX3BhcnQgKyAnUGF0aFNlZ21lbnQnXSA9IGdlbmVyYXRlQWNjZXNzb3IoJ3BhdGhuYW1lJywgX3BhcnRzW19wYXJ0XSk7CiAgICBVUklbX3BhcnQgKyAnVXJuUGF0aFNlZ21lbnQnXSA9IGdlbmVyYXRlQWNjZXNzb3IoJ3VybnBhdGgnLCBfcGFydHNbX3BhcnRdKTsKICB9CgogIHZhciBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbiA9IGZ1bmN0aW9uKF9zZXAsIF9jb2RpbmdGdW5jTmFtZSwgX2lubmVyQ29kaW5nRnVuY05hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbihzdHJpbmcpIHsKICAgICAgLy8gV2h5IHBhc3MgaW4gbmFtZXMgb2YgZnVuY3Rpb25zLCByYXRoZXIgdGhhbiB0aGUgZnVuY3Rpb24gb2JqZWN0cyB0aGVtc2VsdmVzPyBUaGUKICAgICAgLy8gZGVmaW5pdGlvbnMgb2Ygc29tZSBmdW5jdGlvbnMgKGJ1dCBpbiBwYXJ0aWN1bGFyLCBVUkkuZGVjb2RlKSB3aWxsIG9jY2FzaW9uYWxseSBjaGFuZ2UgZHVlCiAgICAgIC8vIHRvIFVSSS5qcyBoYXZpbmcgSVNPODg1OSBhbmQgVW5pY29kZSBtb2Rlcy4gUGFzc2luZyBpbiB0aGUgbmFtZSBhbmQgZ2V0dGluZyBpdCB3aWxsIGVuc3VyZQogICAgICAvLyB0aGF0IHRoZSBmdW5jdGlvbnMgd2UgdXNlIGhlcmUgYXJlICJmcmVzaCIuCiAgICAgIHZhciBhY3R1YWxDb2RpbmdGdW5jOwogICAgICBpZiAoIV9pbm5lckNvZGluZ0Z1bmNOYW1lKSB7CiAgICAgICAgYWN0dWFsQ29kaW5nRnVuYyA9IFVSSVtfY29kaW5nRnVuY05hbWVdOwogICAgICB9IGVsc2UgewogICAgICAgIGFjdHVhbENvZGluZ0Z1bmMgPSBmdW5jdGlvbihzdHJpbmcpIHsKICAgICAgICAgIHJldHVybiBVUklbX2NvZGluZ0Z1bmNOYW1lXShVUklbX2lubmVyQ29kaW5nRnVuY05hbWVdKHN0cmluZykpOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBzZWdtZW50cyA9IChzdHJpbmcgKyAnJykuc3BsaXQoX3NlcCk7CgogICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBzZWdtZW50c1tpXSA9IGFjdHVhbENvZGluZ0Z1bmMoc2VnbWVudHNbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gc2VnbWVudHMuam9pbihfc2VwKTsKICAgIH07CiAgfTsKCiAgLy8gVGhpcyB0YWtlcyBwbGFjZSBvdXRzaWRlIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCwgZS5nLiwgZW5jb2RlVXJuUGF0aCBmdW5jdGlvbnMuCiAgVVJJLmRlY29kZVBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignLycsICdkZWNvZGVQYXRoU2VnbWVudCcpOwogIFVSSS5kZWNvZGVVcm5QYXRoID0gZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24oJzonLCAnZGVjb2RlVXJuUGF0aFNlZ21lbnQnKTsKICBVUkkucmVjb2RlUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCcvJywgJ2VuY29kZVBhdGhTZWdtZW50JywgJ2RlY29kZScpOwogIFVSSS5yZWNvZGVVcm5QYXRoID0gZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24oJzonLCAnZW5jb2RlVXJuUGF0aFNlZ21lbnQnLCAnZGVjb2RlJyk7CgogIFVSSS5lbmNvZGVSZXNlcnZlZCA9IGdlbmVyYXRlQWNjZXNzb3IoJ3Jlc2VydmVkJywgJ2VuY29kZScpOwoKICBVUkkucGFyc2UgPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7CiAgICB2YXIgcG9zOwogICAgaWYgKCFwYXJ0cykgewogICAgICBwYXJ0cyA9IHt9OwogICAgfQogICAgLy8gW3Byb3RvY29sIjovLyJbdXNlcm5hbWVbIjoicGFzc3dvcmRdIkAiXWhvc3RuYW1lWyI6InBvcnRdIi8iP11bcGF0aF1bIj8icXVlcnlzdHJpbmddWyIjImZyYWdtZW50XQoKICAgIC8vIGV4dHJhY3QgZnJhZ21lbnQKICAgIHBvcyA9IHN0cmluZy5pbmRleE9mKCcjJyk7CiAgICBpZiAocG9zID4gLTEpIHsKICAgICAgLy8gZXNjYXBpbmc/CiAgICAgIHBhcnRzLmZyYWdtZW50ID0gc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxKSB8fCBudWxsOwogICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcyk7CiAgICB9CgogICAgLy8gZXh0cmFjdCBxdWVyeQogICAgcG9zID0gc3RyaW5nLmluZGV4T2YoJz8nKTsKICAgIGlmIChwb3MgPiAtMSkgewogICAgICAvLyBlc2NhcGluZz8KICAgICAgcGFydHMucXVlcnkgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpIHx8IG51bGw7CiAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKTsKICAgIH0KCiAgICAvLyBleHRyYWN0IHByb3RvY29sCiAgICBpZiAoc3RyaW5nLnN1YnN0cmluZygwLCAyKSA9PT0gJy8vJykgewogICAgICAvLyByZWxhdGl2ZS1zY2hlbWUKICAgICAgcGFydHMucHJvdG9jb2wgPSBudWxsOwogICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKDIpOwogICAgICAvLyBleHRyYWN0ICJ1c2VyOnBhc3NAaG9zdDpwb3J0IgogICAgICBzdHJpbmcgPSBVUkkucGFyc2VBdXRob3JpdHkoc3RyaW5nLCBwYXJ0cyk7CiAgICB9IGVsc2UgewogICAgICBwb3MgPSBzdHJpbmcuaW5kZXhPZignOicpOwogICAgICBpZiAocG9zID4gLTEpIHsKICAgICAgICBwYXJ0cy5wcm90b2NvbCA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKSB8fCBudWxsOwogICAgICAgIGlmIChwYXJ0cy5wcm90b2NvbCAmJiAhcGFydHMucHJvdG9jb2wubWF0Y2goVVJJLnByb3RvY29sX2V4cHJlc3Npb24pKSB7CiAgICAgICAgICAvLyA6IG1heSBiZSB3aXRoaW4gdGhlIHBhdGgKICAgICAgICAgIHBhcnRzLnByb3RvY29sID0gdW5kZWZpbmVkOwogICAgICAgIH0gZWxzZSBpZiAoc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxLCBwb3MgKyAzKSA9PT0gJy8vJykgewogICAgICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAzKTsKCiAgICAgICAgICAvLyBleHRyYWN0ICJ1c2VyOnBhc3NAaG9zdDpwb3J0IgogICAgICAgICAgc3RyaW5nID0gVVJJLnBhcnNlQXV0aG9yaXR5KHN0cmluZywgcGFydHMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpOwogICAgICAgICAgcGFydHMudXJuID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvLyB3aGF0J3MgbGVmdCBtdXN0IGJlIHRoZSBwYXRoCiAgICBwYXJ0cy5wYXRoID0gc3RyaW5nOwoKICAgIC8vIGFuZCB3ZSdyZSBkb25lCiAgICByZXR1cm4gcGFydHM7CiAgfTsKICBVUkkucGFyc2VIb3N0ID0gZnVuY3Rpb24oc3RyaW5nLCBwYXJ0cykgewogICAgLy8gQ29weSBjaHJvbWUsIElFLCBvcGVyYSBiYWNrc2xhc2gtaGFuZGxpbmcgYmVoYXZpb3IuCiAgICAvLyBCYWNrIHNsYXNoZXMgYmVmb3JlIHRoZSBxdWVyeSBzdHJpbmcgZ2V0IGNvbnZlcnRlZCB0byBmb3J3YXJkIHNsYXNoZXMKICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2Jsb2IvMzg2ZmQyNGY0OWIwZTlkMWE4YTA3NjU5MmE0MDQxNjhmYWVlY2MzNC9saWIvdXJsLmpzI0wxMTUtTDEyNAogICAgLy8gU2VlOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjU5MTYKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL3B1bGwvMjMzCiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXFwvZywgJy8nKTsKCiAgICAvLyBleHRyYWN0IGhvc3Q6cG9ydAogICAgdmFyIHBvcyA9IHN0cmluZy5pbmRleE9mKCcvJyk7CiAgICB2YXIgYnJhY2tldFBvczsKICAgIHZhciB0OwoKICAgIGlmIChwb3MgPT09IC0xKSB7CiAgICAgIHBvcyA9IHN0cmluZy5sZW5ndGg7CiAgICB9CgogICAgaWYgKHN0cmluZy5jaGFyQXQoMCkgPT09ICdbJykgewogICAgICAvLyBJUHY2IGhvc3QgLSBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1pZXRmLTZtYW4tdGV4dC1hZGRyLXJlcHJlc2VudGF0aW9uLTA0I3NlY3Rpb24tNgogICAgICAvLyBJIGNsYWltIG1vc3QgY2xpZW50IHNvZnR3YXJlIGJyZWFrcyBvbiBJUHY2IGFueXdheXMuIFRvIHNpbXBsaWZ5IHRoaW5ncywgVVJJIG9ubHkgYWNjZXB0cwogICAgICAvLyBJUHY2K3BvcnQgaW4gdGhlIGZvcm1hdCBbMjAwMTpkYjg6OjFdOjgwIChmb3IgdGhlIHRpbWUgYmVpbmcpCiAgICAgIGJyYWNrZXRQb3MgPSBzdHJpbmcuaW5kZXhPZignXScpOwogICAgICBwYXJ0cy5ob3N0bmFtZSA9IHN0cmluZy5zdWJzdHJpbmcoMSwgYnJhY2tldFBvcykgfHwgbnVsbDsKICAgICAgcGFydHMucG9ydCA9IHN0cmluZy5zdWJzdHJpbmcoYnJhY2tldFBvcyArIDIsIHBvcykgfHwgbnVsbDsKICAgICAgaWYgKHBhcnRzLnBvcnQgPT09ICcvJykgewogICAgICAgIHBhcnRzLnBvcnQgPSBudWxsOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB2YXIgZmlyc3RDb2xvbiA9IHN0cmluZy5pbmRleE9mKCc6Jyk7CiAgICAgIHZhciBmaXJzdFNsYXNoID0gc3RyaW5nLmluZGV4T2YoJy8nKTsKICAgICAgdmFyIG5leHRDb2xvbiA9IHN0cmluZy5pbmRleE9mKCc6JywgZmlyc3RDb2xvbiArIDEpOwogICAgICBpZiAobmV4dENvbG9uICE9PSAtMSAmJiAoZmlyc3RTbGFzaCA9PT0gLTEgfHwgbmV4dENvbG9uIDwgZmlyc3RTbGFzaCkpIHsKICAgICAgICAvLyBJUHY2IGhvc3QgY29udGFpbnMgbXVsdGlwbGUgY29sb25zIC0gYnV0IG5vIHBvcnQKICAgICAgICAvLyB0aGlzIG5vdGF0aW9uIGlzIGFjdHVhbGx5IG5vdCBhbGxvd2VkIGJ5IFJGQyAzOTg2LCBidXQgd2UncmUgYSBsaWJlcmFsIHBhcnNlcgogICAgICAgIHBhcnRzLmhvc3RuYW1lID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpIHx8IG51bGw7CiAgICAgICAgcGFydHMucG9ydCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdCA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKS5zcGxpdCgnOicpOwogICAgICAgIHBhcnRzLmhvc3RuYW1lID0gdFswXSB8fCBudWxsOwogICAgICAgIHBhcnRzLnBvcnQgPSB0WzFdIHx8IG51bGw7CiAgICAgIH0KICAgIH0KCiAgICBpZiAocGFydHMuaG9zdG5hbWUgJiYgc3RyaW5nLnN1YnN0cmluZyhwb3MpLmNoYXJBdCgwKSAhPT0gJy8nKSB7CiAgICAgIHBvcysrOwogICAgICBzdHJpbmcgPSAnLycgKyBzdHJpbmc7CiAgICB9CgogICAgcmV0dXJuIHN0cmluZy5zdWJzdHJpbmcocG9zKSB8fCAnLyc7CiAgfTsKICBVUkkucGFyc2VBdXRob3JpdHkgPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7CiAgICBzdHJpbmcgPSBVUkkucGFyc2VVc2VyaW5mbyhzdHJpbmcsIHBhcnRzKTsKICAgIHJldHVybiBVUkkucGFyc2VIb3N0KHN0cmluZywgcGFydHMpOwogIH07CiAgVVJJLnBhcnNlVXNlcmluZm8gPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7CiAgICAvLyBleHRyYWN0IHVzZXJuYW1lOnBhc3N3b3JkCiAgICB2YXIgZmlyc3RTbGFzaCA9IHN0cmluZy5pbmRleE9mKCcvJyk7CiAgICB2YXIgcG9zID0gc3RyaW5nLmxhc3RJbmRleE9mKCdAJywgZmlyc3RTbGFzaCA+IC0xID8gZmlyc3RTbGFzaCA6IHN0cmluZy5sZW5ndGggLSAxKTsKICAgIHZhciB0OwoKICAgIC8vIGF1dGhvcml0eUAgbXVzdCBjb21lIGJlZm9yZSAvcGF0aAogICAgaWYgKHBvcyA+IC0xICYmIChmaXJzdFNsYXNoID09PSAtMSB8fCBwb3MgPCBmaXJzdFNsYXNoKSkgewogICAgICB0ID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpLnNwbGl0KCc6Jyk7CiAgICAgIHBhcnRzLnVzZXJuYW1lID0gdFswXSA/IFVSSS5kZWNvZGUodFswXSkgOiBudWxsOwogICAgICB0LnNoaWZ0KCk7CiAgICAgIHBhcnRzLnBhc3N3b3JkID0gdFswXSA/IFVSSS5kZWNvZGUodC5qb2luKCc6JykpIDogbnVsbDsKICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxKTsKICAgIH0gZWxzZSB7CiAgICAgIHBhcnRzLnVzZXJuYW1lID0gbnVsbDsKICAgICAgcGFydHMucGFzc3dvcmQgPSBudWxsOwogICAgfQoKICAgIHJldHVybiBzdHJpbmc7CiAgfTsKICBVUkkucGFyc2VRdWVyeSA9IGZ1bmN0aW9uKHN0cmluZywgZXNjYXBlUXVlcnlTcGFjZSkgewogICAgaWYgKCFzdHJpbmcpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQoKICAgIC8vIHRocm93IG91dCB0aGUgZnVua3kgYnVzaW5lc3MgLSAiPyJbbmFtZSI9InZhbHVlIiYiXSsKICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC8mKy9nLCAnJicpLnJlcGxhY2UoL15cPyomKnwmKyQvZywgJycpOwoKICAgIGlmICghc3RyaW5nKSB7CiAgICAgIHJldHVybiB7fTsKICAgIH0KCiAgICB2YXIgaXRlbXMgPSB7fTsKICAgIHZhciBzcGxpdHMgPSBzdHJpbmcuc3BsaXQoJyYnKTsKICAgIHZhciBsZW5ndGggPSBzcGxpdHMubGVuZ3RoOwogICAgdmFyIHYsIG5hbWUsIHZhbHVlOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgdiA9IHNwbGl0c1tpXS5zcGxpdCgnPScpOwogICAgICBuYW1lID0gVVJJLmRlY29kZVF1ZXJ5KHYuc2hpZnQoKSwgZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgIC8vIG5vICI9IiBpcyBudWxsIGFjY29yZGluZyB0byBodHRwOi8vZHZjcy53My5vcmcvaGcvdXJsL3Jhdy1maWxlL3RpcC9PdmVydmlldy5odG1sI2NvbGxlY3QtdXJsLXBhcmFtZXRlcnMKICAgICAgdmFsdWUgPSB2Lmxlbmd0aCA/IFVSSS5kZWNvZGVRdWVyeSh2LmpvaW4oJz0nKSwgZXNjYXBlUXVlcnlTcGFjZSkgOiBudWxsOwoKICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZW1zLCBuYW1lKSkgewogICAgICAgIGlmICh0eXBlb2YgaXRlbXNbbmFtZV0gPT09ICdzdHJpbmcnIHx8IGl0ZW1zW25hbWVdID09PSBudWxsKSB7CiAgICAgICAgICBpdGVtc1tuYW1lXSA9IFtpdGVtc1tuYW1lXV07CiAgICAgICAgfQoKICAgICAgICBpdGVtc1tuYW1lXS5wdXNoKHZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpdGVtc1tuYW1lXSA9IHZhbHVlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGl0ZW1zOwogIH07CgogIFVSSS5idWlsZCA9IGZ1bmN0aW9uKHBhcnRzKSB7CiAgICB2YXIgdCA9ICcnOwoKICAgIGlmIChwYXJ0cy5wcm90b2NvbCkgewogICAgICB0ICs9IHBhcnRzLnByb3RvY29sICsgJzonOwogICAgfQoKICAgIGlmICghcGFydHMudXJuICYmICh0IHx8IHBhcnRzLmhvc3RuYW1lKSkgewogICAgICB0ICs9ICcvLyc7CiAgICB9CgogICAgdCArPSAoVVJJLmJ1aWxkQXV0aG9yaXR5KHBhcnRzKSB8fCAnJyk7CgogICAgaWYgKHR5cGVvZiBwYXJ0cy5wYXRoID09PSAnc3RyaW5nJykgewogICAgICBpZiAocGFydHMucGF0aC5jaGFyQXQoMCkgIT09ICcvJyAmJiB0eXBlb2YgcGFydHMuaG9zdG5hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgdCArPSAnLyc7CiAgICAgIH0KCiAgICAgIHQgKz0gcGFydHMucGF0aDsKICAgIH0KCiAgICBpZiAodHlwZW9mIHBhcnRzLnF1ZXJ5ID09PSAnc3RyaW5nJyAmJiBwYXJ0cy5xdWVyeSkgewogICAgICB0ICs9ICc/JyArIHBhcnRzLnF1ZXJ5OwogICAgfQoKICAgIGlmICh0eXBlb2YgcGFydHMuZnJhZ21lbnQgPT09ICdzdHJpbmcnICYmIHBhcnRzLmZyYWdtZW50KSB7CiAgICAgIHQgKz0gJyMnICsgcGFydHMuZnJhZ21lbnQ7CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIFVSSS5idWlsZEhvc3QgPSBmdW5jdGlvbihwYXJ0cykgewogICAgdmFyIHQgPSAnJzsKCiAgICBpZiAoIXBhcnRzLmhvc3RuYW1lKSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0gZWxzZSBpZiAoVVJJLmlwNl9leHByZXNzaW9uLnRlc3QocGFydHMuaG9zdG5hbWUpKSB7CiAgICAgIHQgKz0gJ1snICsgcGFydHMuaG9zdG5hbWUgKyAnXSc7CiAgICB9IGVsc2UgewogICAgICB0ICs9IHBhcnRzLmhvc3RuYW1lOwogICAgfQoKICAgIGlmIChwYXJ0cy5wb3J0KSB7CiAgICAgIHQgKz0gJzonICsgcGFydHMucG9ydDsKICAgIH0KCiAgICByZXR1cm4gdDsKICB9OwogIFVSSS5idWlsZEF1dGhvcml0eSA9IGZ1bmN0aW9uKHBhcnRzKSB7CiAgICByZXR1cm4gVVJJLmJ1aWxkVXNlcmluZm8ocGFydHMpICsgVVJJLmJ1aWxkSG9zdChwYXJ0cyk7CiAgfTsKICBVUkkuYnVpbGRVc2VyaW5mbyA9IGZ1bmN0aW9uKHBhcnRzKSB7CiAgICB2YXIgdCA9ICcnOwoKICAgIGlmIChwYXJ0cy51c2VybmFtZSkgewogICAgICB0ICs9IFVSSS5lbmNvZGUocGFydHMudXNlcm5hbWUpOwogICAgfQoKICAgIGlmIChwYXJ0cy5wYXNzd29yZCkgewogICAgICB0ICs9ICc6JyArIFVSSS5lbmNvZGUocGFydHMucGFzc3dvcmQpOwogICAgfQoKICAgIGlmICh0KSB7CiAgICAgIHQgKz0gJ0AnOwogICAgfQoKICAgIHJldHVybiB0OwogIH07CiAgVVJJLmJ1aWxkUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBkdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIGVzY2FwZVF1ZXJ5U3BhY2UpIHsKICAgIC8vIGFjY29yZGluZyB0byBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2IG9yIGh0dHA6Ly9sYWJzLmFwYWNoZS5vcmcvd2ViYXJjaC91cmkvcmZjL3JmYzM5ODYuaHRtbAogICAgLy8gYmVpbmcgwrstLl9+ISQmJygpKissOz06QC8/wqsgJUhFWCBhbmQgYWxudW0gYXJlIGFsbG93ZWQKICAgIC8vIHRoZSBSRkMgZXhwbGljaXRseSBzdGF0ZXMgPy9mb28gYmVpbmcgYSB2YWxpZCB1c2UgY2FzZSwgbm8gbWVudGlvbiBvZiBwYXJhbWV0ZXIgc3ludGF4IQogICAgLy8gVVJJLmpzIHRyZWF0cyB0aGUgcXVlcnkgc3RyaW5nIGFzIGJlaW5nIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZAogICAgLy8gc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy1odG1sNDAvaW50ZXJhY3QvZm9ybXMuaHRtbCNmb3JtLWNvbnRlbnQtdHlwZQoKICAgIHZhciB0ID0gJyc7CiAgICB2YXIgdW5pcXVlLCBrZXksIGksIGxlbmd0aDsKICAgIGZvciAoa2V5IGluIGRhdGEpIHsKICAgICAgaWYgKGhhc093bi5jYWxsKGRhdGEsIGtleSkgJiYga2V5KSB7CiAgICAgICAgaWYgKGlzQXJyYXkoZGF0YVtrZXldKSkgewogICAgICAgICAgdW5pcXVlID0ge307CiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBkYXRhW2tleV0ubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGRhdGFba2V5XVtpXSAhPT0gdW5kZWZpbmVkICYmIHVuaXF1ZVtkYXRhW2tleV1baV0gKyAnJ10gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHQgKz0gJyYnICsgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIoa2V5LCBkYXRhW2tleV1baV0sIGVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgICAgICAgICAgIGlmIChkdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMgIT09IHRydWUpIHsKICAgICAgICAgICAgICAgIHVuaXF1ZVtkYXRhW2tleV1baV0gKyAnJ10gPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZGF0YVtrZXldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHQgKz0gJyYnICsgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIoa2V5LCBkYXRhW2tleV0sIGVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiB0LnN1YnN0cmluZygxKTsKICB9OwogIFVSSS5idWlsZFF1ZXJ5UGFyYW1ldGVyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGVzY2FwZVF1ZXJ5U3BhY2UpIHsKICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy1odG1sNDAvaW50ZXJhY3QvZm9ybXMuaHRtbCNmb3JtLWNvbnRlbnQtdHlwZSAtLSBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQKICAgIC8vIGRvbid0IGFwcGVuZCAiPSIgZm9yIG51bGwgdmFsdWVzLCBhY2NvcmRpbmcgdG8gaHR0cDovL2R2Y3MudzMub3JnL2hnL3VybC9yYXctZmlsZS90aXAvT3ZlcnZpZXcuaHRtbCN1cmwtcGFyYW1ldGVyLXNlcmlhbGl6YXRpb24KICAgIHJldHVybiBVUkkuZW5jb2RlUXVlcnkobmFtZSwgZXNjYXBlUXVlcnlTcGFjZSkgKyAodmFsdWUgIT09IG51bGwgPyAnPScgKyBVUkkuZW5jb2RlUXVlcnkodmFsdWUsIGVzY2FwZVF1ZXJ5U3BhY2UpIDogJycpOwogIH07CgogIFVSSS5hZGRRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIG5hbWUsIHZhbHVlKSB7CiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7CiAgICAgICAgaWYgKGhhc093bi5jYWxsKG5hbWUsIGtleSkpIHsKICAgICAgICAgIFVSSS5hZGRRdWVyeShkYXRhLCBrZXksIG5hbWVba2V5XSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykgewogICAgICBpZiAoZGF0YVtuYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZGF0YVtuYW1lXSA9IHZhbHVlOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YVtuYW1lXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBkYXRhW25hbWVdID0gW2RhdGFbbmFtZV1dOwogICAgICB9CgogICAgICBpZiAoIWlzQXJyYXkodmFsdWUpKSB7CiAgICAgICAgdmFsdWUgPSBbdmFsdWVdOwogICAgICB9CgogICAgICBkYXRhW25hbWVdID0gKGRhdGFbbmFtZV0gfHwgW10pLmNvbmNhdCh2YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBuYW1lIHBhcmFtZXRlcicpOwogICAgfQogIH07CiAgVVJJLnJlbW92ZVF1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgbmFtZSwgdmFsdWUpIHsKICAgIHZhciBpLCBsZW5ndGgsIGtleTsKCiAgICBpZiAoaXNBcnJheShuYW1lKSkgewogICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBuYW1lLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgZGF0YVtuYW1lW2ldXSA9IHVuZGVmaW5lZDsKICAgICAgfQogICAgfSBlbHNlIGlmIChnZXRUeXBlKG5hbWUpID09PSAnUmVnRXhwJykgewogICAgICBmb3IgKGtleSBpbiBkYXRhKSB7CiAgICAgICAgaWYgKG5hbWUudGVzdChrZXkpKSB7CiAgICAgICAgICBkYXRhW2tleV0gPSB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JykgewogICAgICBmb3IgKGtleSBpbiBuYW1lKSB7CiAgICAgICAgaWYgKGhhc093bi5jYWxsKG5hbWUsIGtleSkpIHsKICAgICAgICAgIFVSSS5yZW1vdmVRdWVyeShkYXRhLCBrZXksIG5hbWVba2V5XSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykgewogICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChnZXRUeXBlKHZhbHVlKSA9PT0gJ1JlZ0V4cCcpIHsKICAgICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSAmJiB2YWx1ZS50ZXN0KGRhdGFbbmFtZV0pKSB7CiAgICAgICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXRhW25hbWVdID0gZmlsdGVyQXJyYXlWYWx1ZXMoZGF0YVtuYW1lXSwgdmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZGF0YVtuYW1lXSA9PT0gU3RyaW5nKHZhbHVlKSAmJiAoIWlzQXJyYXkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gMSkpIHsKICAgICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7CiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KGRhdGFbbmFtZV0pKSB7CiAgICAgICAgICBkYXRhW25hbWVdID0gZmlsdGVyQXJyYXlWYWx1ZXMoZGF0YVtuYW1lXSwgdmFsdWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhW25hbWVdID0gdW5kZWZpbmVkOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkucmVtb3ZlUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nLCBSZWdFeHAgYXMgdGhlIGZpcnN0IHBhcmFtZXRlcicpOwogICAgfQogIH07CiAgVVJJLmhhc1F1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgbmFtZSwgdmFsdWUsIHdpdGhpbkFycmF5KSB7CiAgICBzd2l0Y2ggKGdldFR5cGUobmFtZSkpIHsKICAgICAgY2FzZSAnU3RyaW5nJzoKICAgICAgICAvLyBOb3RoaW5nIHRvIGRvIGhlcmUKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ1JlZ0V4cCc6CiAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHsKICAgICAgICAgIGlmIChoYXNPd24uY2FsbChkYXRhLCBrZXkpKSB7CiAgICAgICAgICAgIGlmIChuYW1lLnRlc3Qoa2V5KSAmJiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCBVUkkuaGFzUXVlcnkoZGF0YSwga2V5LCB2YWx1ZSkpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgIGNhc2UgJ09iamVjdCc6CiAgICAgICAgZm9yICh2YXIgX2tleSBpbiBuYW1lKSB7CiAgICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwgX2tleSkpIHsKICAgICAgICAgICAgaWYgKCFVUkkuaGFzUXVlcnkoZGF0YSwgX2tleSwgbmFtZVtfa2V5XSkpIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgZGVmYXVsdDoKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIGEgc3RyaW5nLCByZWd1bGFyIGV4cHJlc3Npb24gb3Igb2JqZWN0IGFzIHRoZSBuYW1lIHBhcmFtZXRlcicpOwogICAgfQoKICAgIHN3aXRjaCAoZ2V0VHlwZSh2YWx1ZSkpIHsKICAgICAgY2FzZSAnVW5kZWZpbmVkJzoKICAgICAgICAvLyB0cnVlIGlmIGV4aXN0cyAoYnV0IG1heSBiZSBlbXB0eSkKICAgICAgICByZXR1cm4gbmFtZSBpbiBkYXRhOyAvLyBkYXRhW25hbWVdICE9PSB1bmRlZmluZWQ7CgogICAgICBjYXNlICdCb29sZWFuJzoKICAgICAgICAvLyB0cnVlIGlmIGV4aXN0cyBhbmQgbm9uLWVtcHR5CiAgICAgICAgdmFyIF9ib29seSA9IEJvb2xlYW4oaXNBcnJheShkYXRhW25hbWVdKSA/IGRhdGFbbmFtZV0ubGVuZ3RoIDogZGF0YVtuYW1lXSk7CiAgICAgICAgcmV0dXJuIHZhbHVlID09PSBfYm9vbHk7CgogICAgICBjYXNlICdGdW5jdGlvbic6CiAgICAgICAgLy8gYWxsb3cgY29tcGxleCBjb21wYXJpc29uCiAgICAgICAgcmV0dXJuICEhdmFsdWUoZGF0YVtuYW1lXSwgbmFtZSwgZGF0YSk7CgogICAgICBjYXNlICdBcnJheSc6CiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgb3AgPSB3aXRoaW5BcnJheSA/IGFycmF5Q29udGFpbnMgOiBhcnJheXNFcXVhbDsKICAgICAgICByZXR1cm4gb3AoZGF0YVtuYW1lXSwgdmFsdWUpOwoKICAgICAgY2FzZSAnUmVnRXhwJzoKICAgICAgICBpZiAoIWlzQXJyYXkoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgIHJldHVybiBCb29sZWFuKGRhdGFbbmFtZV0gJiYgZGF0YVtuYW1lXS5tYXRjaCh2YWx1ZSkpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF3aXRoaW5BcnJheSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFycmF5Q29udGFpbnMoZGF0YVtuYW1lXSwgdmFsdWUpOwoKICAgICAgY2FzZSAnTnVtYmVyJzoKICAgICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7CiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgICBjYXNlICdTdHJpbmcnOgogICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSkgewogICAgICAgICAgcmV0dXJuIGRhdGFbbmFtZV0gPT09IHZhbHVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF3aXRoaW5BcnJheSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFycmF5Q29udGFpbnMoZGF0YVtuYW1lXSwgdmFsdWUpOwoKICAgICAgZGVmYXVsdDoKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIHVuZGVmaW5lZCwgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIsIFJlZ0V4cCwgRnVuY3Rpb24gYXMgdGhlIHZhbHVlIHBhcmFtZXRlcicpOwogICAgfQogIH07CgoKICBVUkkuam9pblBhdGhzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgaW5wdXQgPSBbXTsKICAgIHZhciBzZWdtZW50cyA9IFtdOwogICAgdmFyIG5vbkVtcHR5U2VnbWVudHMgPSAwOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciB1cmwgPSBuZXcgVVJJKGFyZ3VtZW50c1tpXSk7CiAgICAgIGlucHV0LnB1c2godXJsKTsKICAgICAgdmFyIF9zZWdtZW50cyA9IHVybC5zZWdtZW50KCk7CiAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgX3NlZ21lbnRzLmxlbmd0aDsgcysrKSB7CiAgICAgICAgaWYgKHR5cGVvZiBfc2VnbWVudHNbc10gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBzZWdtZW50cy5wdXNoKF9zZWdtZW50c1tzXSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoX3NlZ21lbnRzW3NdKSB7CiAgICAgICAgICBub25FbXB0eVNlZ21lbnRzKys7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKCFzZWdtZW50cy5sZW5ndGggfHwgIW5vbkVtcHR5U2VnbWVudHMpIHsKICAgICAgcmV0dXJuIG5ldyBVUkkoJycpOwogICAgfQoKICAgIHZhciB1cmkgPSBuZXcgVVJJKCcnKS5zZWdtZW50KHNlZ21lbnRzKTsKCiAgICBpZiAoaW5wdXRbMF0ucGF0aCgpID09PSAnJyB8fCBpbnB1dFswXS5wYXRoKCkuc2xpY2UoMCwgMSkgPT09ICcvJykgewogICAgICB1cmkucGF0aCgnLycgKyB1cmkucGF0aCgpKTsKICAgIH0KCiAgICByZXR1cm4gdXJpLm5vcm1hbGl6ZSgpOwogIH07CgogIFVSSS5jb21tb25QYXRoID0gZnVuY3Rpb24ob25lLCB0d28pIHsKICAgIHZhciBsZW5ndGggPSBNYXRoLm1pbihvbmUubGVuZ3RoLCB0d28ubGVuZ3RoKTsKICAgIHZhciBwb3M7CgogICAgLy8gZmluZCBmaXJzdCBub24tbWF0Y2hpbmcgY2hhcmFjdGVyCiAgICBmb3IgKHBvcyA9IDA7IHBvcyA8IGxlbmd0aDsgcG9zKyspIHsKICAgICAgaWYgKG9uZS5jaGFyQXQocG9zKSAhPT0gdHdvLmNoYXJBdChwb3MpKSB7CiAgICAgICAgcG9zLS07CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICBpZiAocG9zIDwgMSkgewogICAgICByZXR1cm4gb25lLmNoYXJBdCgwKSA9PT0gdHdvLmNoYXJBdCgwKSAmJiBvbmUuY2hhckF0KDApID09PSAnLycgPyAnLycgOiAnJzsKICAgIH0KCiAgICAvLyByZXZlcnQgdG8gbGFzdCAvCiAgICBpZiAob25lLmNoYXJBdChwb3MpICE9PSAnLycgfHwgdHdvLmNoYXJBdChwb3MpICE9PSAnLycpIHsKICAgICAgcG9zID0gb25lLnN1YnN0cmluZygwLCBwb3MpLmxhc3RJbmRleE9mKCcvJyk7CiAgICB9CgogICAgcmV0dXJuIG9uZS5zdWJzdHJpbmcoMCwgcG9zICsgMSk7CiAgfTsKCiAgVVJJLndpdGhpblN0cmluZyA9IGZ1bmN0aW9uKHN0cmluZywgY2FsbGJhY2ssIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7CiAgICB2YXIgX3N0YXJ0ID0gb3B0aW9ucy5zdGFydCB8fCBVUkkuZmluZFVyaS5zdGFydDsKICAgIHZhciBfZW5kID0gb3B0aW9ucy5lbmQgfHwgVVJJLmZpbmRVcmkuZW5kOwogICAgdmFyIF90cmltID0gb3B0aW9ucy50cmltIHx8IFVSSS5maW5kVXJpLnRyaW07CiAgICB2YXIgX2F0dHJpYnV0ZU9wZW4gPSAvW2EtejAtOS1dPVsiJ10/JC9pOwoKICAgIF9zdGFydC5sYXN0SW5kZXggPSAwOwogICAgd2hpbGUgKHRydWUpIHsKICAgICAgdmFyIG1hdGNoID0gX3N0YXJ0LmV4ZWMoc3RyaW5nKTsKICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICB2YXIgc3RhcnQgPSBtYXRjaC5pbmRleDsKICAgICAgaWYgKG9wdGlvbnMuaWdub3JlSHRtbCkgewogICAgICAgIC8vIGF0dHJpYnV0KGU9WyInXT8kKQogICAgICAgIHZhciBhdHRyaWJ1dGVPcGVuID0gc3RyaW5nLnNsaWNlKE1hdGgubWF4KHN0YXJ0IC0gMywgMCksIHN0YXJ0KTsKICAgICAgICBpZiAoYXR0cmlidXRlT3BlbiAmJiBfYXR0cmlidXRlT3Blbi50ZXN0KGF0dHJpYnV0ZU9wZW4pKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBlbmQgPSBzdGFydCArIHN0cmluZy5zbGljZShzdGFydCkuc2VhcmNoKF9lbmQpOwogICAgICB2YXIgc2xpY2UgPSBzdHJpbmcuc2xpY2Uoc3RhcnQsIGVuZCkucmVwbGFjZShfdHJpbSwgJycpOwogICAgICBpZiAob3B0aW9ucy5pZ25vcmUgJiYgb3B0aW9ucy5pZ25vcmUudGVzdChzbGljZSkpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgZW5kID0gc3RhcnQgKyBzbGljZS5sZW5ndGg7CiAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhzbGljZSwgc3RhcnQsIGVuZCwgc3RyaW5nKTsKICAgICAgc3RyaW5nID0gc3RyaW5nLnNsaWNlKDAsIHN0YXJ0KSArIHJlc3VsdCArIHN0cmluZy5zbGljZShlbmQpOwogICAgICBfc3RhcnQubGFzdEluZGV4ID0gc3RhcnQgKyByZXN1bHQubGVuZ3RoOwogICAgfQoKICAgIF9zdGFydC5sYXN0SW5kZXggPSAwOwogICAgcmV0dXJuIHN0cmluZzsKICB9OwoKICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSA9IGZ1bmN0aW9uKHYpIHsKICAgIC8vIFRoZW9yZXRpY2FsbHkgVVJJcyBhbGxvdyBwZXJjZW50LWVuY29kaW5nIGluIEhvc3RuYW1lcyAoYWNjb3JkaW5nIHRvIFJGQyAzOTg2KQogICAgLy8gdGhleSBhcmUgbm90IHBhcnQgb2YgRE5TIGFuZCB0aGVyZWZvcmUgaWdub3JlZCBieSBVUkkuanMKCiAgICBpZiAodi5tYXRjaChVUkkuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzKSkgewogICAgICAvLyB0ZXN0IHB1bnljb2RlCiAgICAgIGlmICghcHVueWNvZGUpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSAiJyArIHYgKyAnIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXSBhbmQgUHVueWNvZGUuanMgaXMgbm90IGF2YWlsYWJsZScpOwogICAgICB9CgogICAgICBpZiAocHVueWNvZGUudG9BU0NJSSh2KS5tYXRjaChVUkkuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dJyk7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBub0NvbmZsaWN0CiAgVVJJLm5vQ29uZmxpY3QgPSBmdW5jdGlvbihyZW1vdmVBbGwpIHsKICAgIGlmIChyZW1vdmVBbGwpIHsKICAgICAgdmFyIHVuY29uZmxpY3RlZCA9IHsKICAgICAgICBVUkk6IHRoaXMubm9Db25mbGljdCgpCiAgICAgIH07CgogICAgICBpZiAocm9vdC5VUklUZW1wbGF0ZSAmJiB0eXBlb2Ygcm9vdC5VUklUZW1wbGF0ZS5ub0NvbmZsaWN0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdW5jb25mbGljdGVkLlVSSVRlbXBsYXRlID0gcm9vdC5VUklUZW1wbGF0ZS5ub0NvbmZsaWN0KCk7CiAgICAgIH0KCiAgICAgIGlmIChyb290LklQdjYgJiYgdHlwZW9mIHJvb3QuSVB2Ni5ub0NvbmZsaWN0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdW5jb25mbGljdGVkLklQdjYgPSByb290LklQdjYubm9Db25mbGljdCgpOwogICAgICB9CgogICAgICBpZiAocm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgJiYgdHlwZW9mIHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1bmNvbmZsaWN0ZWQuU2Vjb25kTGV2ZWxEb21haW5zID0gcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMubm9Db25mbGljdCgpOwogICAgICB9CgogICAgICByZXR1cm4gdW5jb25mbGljdGVkOwogICAgfSBlbHNlIGlmIChyb290LlVSSSA9PT0gdGhpcykgewogICAgICByb290LlVSSSA9IF9VUkk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcC5idWlsZCA9IGZ1bmN0aW9uKGRlZmVyQnVpbGQpIHsKICAgIGlmIChkZWZlckJ1aWxkID09PSB0cnVlKSB7CiAgICAgIHRoaXMuX2RlZmVycmVkX2J1aWxkID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAoZGVmZXJCdWlsZCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX2RlZmVycmVkX2J1aWxkKSB7CiAgICAgIHRoaXMuX3N0cmluZyA9IFVSSS5idWlsZCh0aGlzLl9wYXJ0cyk7CiAgICAgIHRoaXMuX2RlZmVycmVkX2J1aWxkID0gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcC5jbG9uZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIG5ldyBVUkkodGhpcyk7CiAgfTsKCiAgcC52YWx1ZU9mID0gcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuYnVpbGQoZmFsc2UpLl9zdHJpbmc7CiAgfTsKCgogIGZ1bmN0aW9uIGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoX3BhcnQpewogICAgcmV0dXJuIGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcGFydHNbX3BhcnRdIHx8ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX3BhcnRzW19wYXJ0XSA9IHYgfHwgbnVsbDsKICAgICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgIH07CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKF9wYXJ0LCBfa2V5KXsKICAgIHJldHVybiBmdW5jdGlvbih2LCBidWlsZCkgewogICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzW19wYXJ0XSB8fCAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodiAhPT0gbnVsbCkgewogICAgICAgICAgdiA9IHYgKyAnJzsKICAgICAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gX2tleSkgewogICAgICAgICAgICB2ID0gdi5zdWJzdHJpbmcoMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9wYXJ0c1tfcGFydF0gPSB2OwogICAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgfTsKICB9CgogIHAucHJvdG9jb2wgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdwcm90b2NvbCcpOwogIHAudXNlcm5hbWUgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCd1c2VybmFtZScpOwogIHAucGFzc3dvcmQgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdwYXNzd29yZCcpOwogIHAuaG9zdG5hbWUgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdob3N0bmFtZScpOwogIHAucG9ydCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3BvcnQnKTsKICBwLnF1ZXJ5ID0gZ2VuZXJhdGVQcmVmaXhBY2Nlc3NvcigncXVlcnknLCAnPycpOwogIHAuZnJhZ21lbnQgPSBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKCdmcmFnbWVudCcsICcjJyk7CgogIHAuc2VhcmNoID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIHZhciB0ID0gdGhpcy5xdWVyeSh2LCBidWlsZCk7CiAgICByZXR1cm4gdHlwZW9mIHQgPT09ICdzdHJpbmcnICYmIHQubGVuZ3RoID8gKCc/JyArIHQpIDogdDsKICB9OwogIHAuaGFzaCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICB2YXIgdCA9IHRoaXMuZnJhZ21lbnQodiwgYnVpbGQpOwogICAgcmV0dXJuIHR5cGVvZiB0ID09PSAnc3RyaW5nJyAmJiB0Lmxlbmd0aCA/ICgnIycgKyB0KSA6IHQ7CiAgfTsKCiAgcC5wYXRobmFtZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHsKICAgICAgdmFyIHJlcyA9IHRoaXMuX3BhcnRzLnBhdGggfHwgKHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gJy8nIDogJycpOwogICAgICByZXR1cm4gdiA/ICh0aGlzLl9wYXJ0cy51cm4gPyBVUkkuZGVjb2RlVXJuUGF0aCA6IFVSSS5kZWNvZGVQYXRoKShyZXMpIDogcmVzOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB2ID8gVVJJLnJlY29kZVVyblBhdGgodikgOiAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdiA/IFVSSS5yZWNvZGVQYXRoKHYpIDogJy8nOwogICAgICB9CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnBhdGggPSBwLnBhdGhuYW1lOwogIHAuaHJlZiA9IGZ1bmN0aW9uKGhyZWYsIGJ1aWxkKSB7CiAgICB2YXIga2V5OwoKICAgIGlmIChocmVmID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTsKICAgIH0KCiAgICB0aGlzLl9zdHJpbmcgPSAnJzsKICAgIHRoaXMuX3BhcnRzID0gVVJJLl9wYXJ0cygpOwoKICAgIHZhciBfVVJJID0gaHJlZiBpbnN0YW5jZW9mIFVSSTsKICAgIHZhciBfb2JqZWN0ID0gdHlwZW9mIGhyZWYgPT09ICdvYmplY3QnICYmIChocmVmLmhvc3RuYW1lIHx8IGhyZWYucGF0aCB8fCBocmVmLnBhdGhuYW1lKTsKICAgIGlmIChocmVmLm5vZGVOYW1lKSB7CiAgICAgIHZhciBhdHRyaWJ1dGUgPSBVUkkuZ2V0RG9tQXR0cmlidXRlKGhyZWYpOwogICAgICBocmVmID0gaHJlZlthdHRyaWJ1dGVdIHx8ICcnOwogICAgICBfb2JqZWN0ID0gZmFsc2U7CiAgICB9CgogICAgLy8gd2luZG93LmxvY2F0aW9uIGlzIHJlcG9ydGVkIHRvIGJlIGFuIG9iamVjdCwgYnV0IGl0J3Mgbm90IHRoZSBzb3J0CiAgICAvLyBvZiBvYmplY3Qgd2UncmUgbG9va2luZyBmb3I6CiAgICAvLyAqIGxvY2F0aW9uLnByb3RvY29sIGVuZHMgd2l0aCBhIGNvbG9uCiAgICAvLyAqIGxvY2F0aW9uLnF1ZXJ5ICE9IG9iamVjdC5zZWFyY2gKICAgIC8vICogbG9jYXRpb24uaGFzaCAhPSBvYmplY3QuZnJhZ21lbnQKICAgIC8vIHNpbXBseSBzZXJpYWxpemluZyB0aGUgdW5rbm93biBvYmplY3Qgc2hvdWxkIGRvIHRoZSB0cmljawogICAgLy8gKGZvciBsb2NhdGlvbiwgbm90IGZvciBldmVyeXRoaW5nLi4uKQogICAgaWYgKCFfVVJJICYmIF9vYmplY3QgJiYgaHJlZi5wYXRobmFtZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGhyZWYgPSBocmVmLnRvU3RyaW5nKCk7CiAgICB9CgogICAgaWYgKHR5cGVvZiBocmVmID09PSAnc3RyaW5nJyB8fCBocmVmIGluc3RhbmNlb2YgU3RyaW5nKSB7CiAgICAgIHRoaXMuX3BhcnRzID0gVVJJLnBhcnNlKFN0cmluZyhocmVmKSwgdGhpcy5fcGFydHMpOwogICAgfSBlbHNlIGlmIChfVVJJIHx8IF9vYmplY3QpIHsKICAgICAgdmFyIHNyYyA9IF9VUkkgPyBocmVmLl9wYXJ0cyA6IGhyZWY7CiAgICAgIGZvciAoa2V5IGluIHNyYykgewogICAgICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLl9wYXJ0cywga2V5KSkgewogICAgICAgICAgdGhpcy5fcGFydHNba2V5XSA9IHNyY1trZXldOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBpbnB1dCcpOwogICAgfQoKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIGlkZW50aWZpY2F0aW9uIGFjY2Vzc29ycwogIHAuaXMgPSBmdW5jdGlvbih3aGF0KSB7CiAgICB2YXIgaXAgPSBmYWxzZTsKICAgIHZhciBpcDQgPSBmYWxzZTsKICAgIHZhciBpcDYgPSBmYWxzZTsKICAgIHZhciBuYW1lID0gZmFsc2U7CiAgICB2YXIgc2xkID0gZmFsc2U7CiAgICB2YXIgaWRuID0gZmFsc2U7CiAgICB2YXIgcHVueWNvZGUgPSBmYWxzZTsKICAgIHZhciByZWxhdGl2ZSA9ICF0aGlzLl9wYXJ0cy51cm47CgogICAgaWYgKHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB7CiAgICAgIHJlbGF0aXZlID0gZmFsc2U7CiAgICAgIGlwNCA9IFVSSS5pcDRfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTsKICAgICAgaXA2ID0gVVJJLmlwNl9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICBpcCA9IGlwNCB8fCBpcDY7CiAgICAgIG5hbWUgPSAhaXA7CiAgICAgIHNsZCA9IG5hbWUgJiYgU0xEICYmIFNMRC5oYXModGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICBpZG4gPSBuYW1lICYmIFVSSS5pZG5fZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTsKICAgICAgcHVueWNvZGUgPSBuYW1lICYmIFVSSS5wdW55Y29kZV9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgfQoKICAgIHN3aXRjaCAod2hhdC50b0xvd2VyQ2FzZSgpKSB7CiAgICAgIGNhc2UgJ3JlbGF0aXZlJzoKICAgICAgICByZXR1cm4gcmVsYXRpdmU7CgogICAgICBjYXNlICdhYnNvbHV0ZSc6CiAgICAgICAgcmV0dXJuICFyZWxhdGl2ZTsKCiAgICAgIC8vIGhvc3RuYW1lIGlkZW50aWZpY2F0aW9uCiAgICAgIGNhc2UgJ2RvbWFpbic6CiAgICAgIGNhc2UgJ25hbWUnOgogICAgICAgIHJldHVybiBuYW1lOwoKICAgICAgY2FzZSAnc2xkJzoKICAgICAgICByZXR1cm4gc2xkOwoKICAgICAgY2FzZSAnaXAnOgogICAgICAgIHJldHVybiBpcDsKCiAgICAgIGNhc2UgJ2lwNCc6CiAgICAgIGNhc2UgJ2lwdjQnOgogICAgICBjYXNlICdpbmV0NCc6CiAgICAgICAgcmV0dXJuIGlwNDsKCiAgICAgIGNhc2UgJ2lwNic6CiAgICAgIGNhc2UgJ2lwdjYnOgogICAgICBjYXNlICdpbmV0Nic6CiAgICAgICAgcmV0dXJuIGlwNjsKCiAgICAgIGNhc2UgJ2lkbic6CiAgICAgICAgcmV0dXJuIGlkbjsKCiAgICAgIGNhc2UgJ3VybCc6CiAgICAgICAgcmV0dXJuICF0aGlzLl9wYXJ0cy51cm47CgogICAgICBjYXNlICd1cm4nOgogICAgICAgIHJldHVybiAhIXRoaXMuX3BhcnRzLnVybjsKCiAgICAgIGNhc2UgJ3B1bnljb2RlJzoKICAgICAgICByZXR1cm4gcHVueWNvZGU7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfTsKCiAgLy8gY29tcG9uZW50IHNwZWNpZmljIGlucHV0IHZhbGlkYXRpb24KICB2YXIgX3Byb3RvY29sID0gcC5wcm90b2NvbDsKICB2YXIgX3BvcnQgPSBwLnBvcnQ7CiAgdmFyIF9ob3N0bmFtZSA9IHAuaG9zdG5hbWU7CgogIHAucHJvdG9jb2wgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgewogICAgICBpZiAodikgewogICAgICAgIC8vIGFjY2VwdCB0cmFpbGluZyA6Ly8KICAgICAgICB2ID0gdi5yZXBsYWNlKC86KFwvXC8pPyQvLCAnJyk7CgogICAgICAgIGlmICghdi5tYXRjaChVUkkucHJvdG9jb2xfZXhwcmVzc2lvbikpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb3RvY29sICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05ListXSBvciBkb2VzblwndCBzdGFydCB3aXRoIFtBLVpdJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gX3Byb3RvY29sLmNhbGwodGhpcywgdiwgYnVpbGQpOwogIH07CiAgcC5zY2hlbWUgPSBwLnByb3RvY29sOwogIHAucG9ydCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgewogICAgICBpZiAodiA9PT0gMCkgewogICAgICAgIHYgPSBudWxsOwogICAgICB9CgogICAgICBpZiAodikgewogICAgICAgIHYgKz0gJyc7CiAgICAgICAgaWYgKHYuY2hhckF0KDApID09PSAnOicpIHsKICAgICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTsKICAgICAgICB9CgogICAgICAgIGlmICh2Lm1hdGNoKC9bXjAtOV0vKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUG9ydCAiJyArIHYgKyAnIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gWzAtOV0nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfcG9ydC5jYWxsKHRoaXMsIHYsIGJ1aWxkKTsKICB9OwogIHAuaG9zdG5hbWUgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHsKICAgICAgdmFyIHggPSB7fTsKICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUhvc3QodiwgeCk7CiAgICAgIGlmIChyZXMgIT09ICcvJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dJyk7CiAgICAgIH0KCiAgICAgIHYgPSB4Lmhvc3RuYW1lOwogICAgfQogICAgcmV0dXJuIF9ob3N0bmFtZS5jYWxsKHRoaXMsIHYsIGJ1aWxkKTsKICB9OwoKICAvLyBjb21wb3VuZCBhY2Nlc3NvcnMKICBwLm9yaWdpbiA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgcHJvdG9jb2wgPSB0aGlzLnByb3RvY29sKCk7CiAgICAgIHZhciBhdXRob3JpdHkgPSB0aGlzLmF1dGhvcml0eSgpOwogICAgICBpZiAoIWF1dGhvcml0eSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgcmV0dXJuIChwcm90b2NvbCA/IHByb3RvY29sICsgJzovLycgOiAnJykgKyB0aGlzLmF1dGhvcml0eSgpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG9yaWdpbiA9IFVSSSh2KTsKICAgICAgdGhpcwogICAgICAgIC5wcm90b2NvbChvcmlnaW4ucHJvdG9jb2woKSkKICAgICAgICAuYXV0aG9yaXR5KG9yaWdpbi5hdXRob3JpdHkoKSkKICAgICAgICAuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLmhvc3QgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gVVJJLmJ1aWxkSG9zdCh0aGlzLl9wYXJ0cykgOiAnJzsKICAgIH0gZWxzZSB7CiAgICAgIHZhciByZXMgPSBVUkkucGFyc2VIb3N0KHYsIHRoaXMuX3BhcnRzKTsKICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTsKICAgICAgfQoKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuYXV0aG9yaXR5ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA/IFVSSS5idWlsZEF1dGhvcml0eSh0aGlzLl9wYXJ0cykgOiAnJzsKICAgIH0gZWxzZSB7CiAgICAgIHZhciByZXMgPSBVUkkucGFyc2VBdXRob3JpdHkodiwgdGhpcy5fcGFydHMpOwogICAgICBpZiAocmVzICE9PSAnLycpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSAiJyArIHYgKyAnIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC51c2VyaW5mbyA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgdCA9IFVSSS5idWlsZFVzZXJpbmZvKHRoaXMuX3BhcnRzKTsKICAgICAgcmV0dXJuIHQgPyB0LnN1YnN0cmluZygwLCB0Lmxlbmd0aCAtMSkgOiB0OwogICAgfSBlbHNlIHsKICAgICAgaWYgKHZbdi5sZW5ndGgtMV0gIT09ICdAJykgewogICAgICAgIHYgKz0gJ0AnOwogICAgICB9CgogICAgICBVUkkucGFyc2VVc2VyaW5mbyh2LCB0aGlzLl9wYXJ0cyk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnJlc291cmNlID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIHZhciBwYXJ0czsKCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiB0aGlzLnBhdGgoKSArIHRoaXMuc2VhcmNoKCkgKyB0aGlzLmhhc2goKTsKICAgIH0KCiAgICBwYXJ0cyA9IFVSSS5wYXJzZSh2KTsKICAgIHRoaXMuX3BhcnRzLnBhdGggPSBwYXJ0cy5wYXRoOwogICAgdGhpcy5fcGFydHMucXVlcnkgPSBwYXJ0cy5xdWVyeTsKICAgIHRoaXMuX3BhcnRzLmZyYWdtZW50ID0gcGFydHMuZnJhZ21lbnQ7CiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvLyBmcmFjdGlvbiBhY2Nlc3NvcnMKICBwLnN1YmRvbWFpbiA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgLy8gY29udmVuaWVuY2UsIHJldHVybiAid3d3IiBmcm9tICJ3d3cuZXhhbXBsZS5vcmciCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgLy8gZ3JhYiBkb21haW4gYW5kIGFkZCBhbm90aGVyIHNlZ21lbnQKICAgICAgdmFyIGVuZCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aCAtIHRoaXMuZG9tYWluKCkubGVuZ3RoIC0gMTsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZygwLCBlbmQpIHx8ICcnOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGggLSB0aGlzLmRvbWFpbigpLmxlbmd0aDsKICAgICAgdmFyIHN1YiA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZygwLCBlKTsKICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKCdeJyArIGVzY2FwZVJlZ0V4KHN1YikpOwoKICAgICAgaWYgKHYgJiYgdi5jaGFyQXQodi5sZW5ndGggLSAxKSAhPT0gJy4nKSB7CiAgICAgICAgdiArPSAnLic7CiAgICAgIH0KCiAgICAgIGlmICh2KSB7CiAgICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodik7CiAgICAgIH0KCiAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuZG9tYWluID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodHlwZW9mIHYgPT09ICdib29sZWFuJykgewogICAgICBidWlsZCA9IHY7CiAgICAgIHYgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgLy8gY29udmVuaWVuY2UsIHJldHVybiAiZXhhbXBsZS5vcmciIGZyb20gInd3dy5leGFtcGxlLm9yZyIKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICAvLyBpZiBob3N0bmFtZSBjb25zaXN0cyBvZiAxIG9yIDIgc2VnbWVudHMsIGl0IG11c3QgYmUgdGhlIGRvbWFpbgogICAgICB2YXIgdCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLm1hdGNoKC9cLi9nKTsKICAgICAgaWYgKHQgJiYgdC5sZW5ndGggPCAyKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lOwogICAgICB9CgogICAgICAvLyBncmFiIHRsZCBhbmQgYWRkIGFub3RoZXIgc2VnbWVudAogICAgICB2YXIgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoIC0gdGhpcy50bGQoYnVpbGQpLmxlbmd0aCAtIDE7CiAgICAgIGVuZCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJywgZW5kIC0xKSArIDE7CiAgICAgIHJldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoZW5kKSB8fCAnJzsKICAgIH0gZWxzZSB7CiAgICAgIGlmICghdikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Nhbm5vdCBzZXQgZG9tYWluIGVtcHR5Jyk7CiAgICAgIH0KCiAgICAgIFVSSS5lbnN1cmVWYWxpZEhvc3RuYW1lKHYpOwoKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7CiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB2OwogICAgICB9IGVsc2UgewogICAgICAgIHZhciByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCh0aGlzLmRvbWFpbigpKSArICckJyk7CiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC50bGQgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgIGJ1aWxkID0gdjsKICAgICAgdiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICAvLyByZXR1cm4gIm9yZyIgZnJvbSAid3d3LmV4YW1wbGUub3JnIgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIHZhciBwb3MgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICB2YXIgdGxkID0gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKHBvcyArIDEpOwoKICAgICAgaWYgKGJ1aWxkICE9PSB0cnVlICYmIFNMRCAmJiBTTEQubGlzdFt0bGQudG9Mb3dlckNhc2UoKV0pIHsKICAgICAgICByZXR1cm4gU0xELmdldCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSkgfHwgdGxkOwogICAgICB9CgogICAgICByZXR1cm4gdGxkOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJlcGxhY2U7CgogICAgICBpZiAoIXYpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjYW5ub3Qgc2V0IFRMRCBlbXB0eScpOwogICAgICB9IGVsc2UgaWYgKHYubWF0Y2goL1teYS16QS1aMC05LV0vKSkgewogICAgICAgIGlmIChTTEQgJiYgU0xELmlzKHYpKSB7CiAgICAgICAgICByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCh0aGlzLnRsZCgpKSArICckJyk7CiAgICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RMRCAiJyArIHYgKyAnIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOV0nKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHsKICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoJ2Nhbm5vdCBzZXQgVExEIG9uIG5vbi1kb21haW4gaG9zdCcpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMudGxkKCkpICsgJyQnKTsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLmRpcmVjdG9yeSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSB0cnVlKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMucGF0aCAmJiAhdGhpcy5fcGFydHMuaG9zdG5hbWUpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHsKICAgICAgICByZXR1cm4gJy8nOwogICAgICB9CgogICAgICB2YXIgZW5kID0gdGhpcy5fcGFydHMucGF0aC5sZW5ndGggLSB0aGlzLmZpbGVuYW1lKCkubGVuZ3RoIC0gMTsKICAgICAgdmFyIHJlcyA9IHRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKDAsIGVuZCkgfHwgKHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gJy8nIDogJycpOwoKICAgICAgcmV0dXJuIHYgPyBVUkkuZGVjb2RlUGF0aChyZXMpIDogcmVzOwoKICAgIH0gZWxzZSB7CiAgICAgIHZhciBlID0gdGhpcy5fcGFydHMucGF0aC5sZW5ndGggLSB0aGlzLmZpbGVuYW1lKCkubGVuZ3RoOwogICAgICB2YXIgZGlyZWN0b3J5ID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCwgZSk7CiAgICAgIHZhciByZXBsYWNlID0gbmV3IFJlZ0V4cCgnXicgKyBlc2NhcGVSZWdFeChkaXJlY3RvcnkpKTsKCiAgICAgIC8vIGZ1bGx5IHF1YWxpZmllciBkaXJlY3RvcmllcyBiZWdpbiB3aXRoIGEgc2xhc2gKICAgICAgaWYgKCF0aGlzLmlzKCdyZWxhdGl2ZScpKSB7CiAgICAgICAgaWYgKCF2KSB7CiAgICAgICAgICB2ID0gJy8nOwogICAgICAgIH0KCiAgICAgICAgaWYgKHYuY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgICAgIHYgPSAnLycgKyB2OwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gZGlyZWN0b3JpZXMgYWx3YXlzIGVuZCB3aXRoIGEgc2xhc2gKICAgICAgaWYgKHYgJiYgdi5jaGFyQXQodi5sZW5ndGggLSAxKSAhPT0gJy8nKSB7CiAgICAgICAgdiArPSAnLyc7CiAgICAgIH0KCiAgICAgIHYgPSBVUkkucmVjb2RlUGF0aCh2KTsKICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZShyZXBsYWNlLCB2KTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuZmlsZW5hbWUgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkgewogICAgICBpZiAoIXRoaXMuX3BhcnRzLnBhdGggfHwgdGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICB2YXIgcG9zID0gdGhpcy5fcGFydHMucGF0aC5sYXN0SW5kZXhPZignLycpOwogICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcocG9zKzEpOwoKICAgICAgcmV0dXJuIHYgPyBVUkkuZGVjb2RlUGF0aFNlZ21lbnQocmVzKSA6IHJlczsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBtdXRhdGVkRGlyZWN0b3J5ID0gZmFsc2U7CgogICAgICBpZiAodi5jaGFyQXQoMCkgPT09ICcvJykgewogICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTsKICAgICAgfQoKICAgICAgaWYgKHYubWF0Y2goL1wuP1wvLykpIHsKICAgICAgICBtdXRhdGVkRGlyZWN0b3J5ID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMuZmlsZW5hbWUoKSkgKyAnJCcpOwogICAgICB2ID0gVVJJLnJlY29kZVBhdGgodik7CiAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB0aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UocmVwbGFjZSwgdik7CgogICAgICBpZiAobXV0YXRlZERpcmVjdG9yeSkgewogICAgICAgIHRoaXMubm9ybWFsaXplUGF0aChidWlsZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuc3VmZml4ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5wYXRoIHx8IHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgdmFyIGZpbGVuYW1lID0gdGhpcy5maWxlbmFtZSgpOwogICAgICB2YXIgcG9zID0gZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKTsKICAgICAgdmFyIHMsIHJlczsKCiAgICAgIGlmIChwb3MgPT09IC0xKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICAvLyBzdWZmaXggbWF5IG9ubHkgY29udGFpbiBhbG51bSBjaGFyYWN0ZXJzICh5dXAsIEkgbWFkZSB0aGlzIHVwLikKICAgICAgcyA9IGZpbGVuYW1lLnN1YnN0cmluZyhwb3MrMSk7CiAgICAgIHJlcyA9ICgvXlthLXowLTklXSskL2kpLnRlc3QocykgPyBzIDogJyc7CiAgICAgIHJldHVybiB2ID8gVVJJLmRlY29kZVBhdGhTZWdtZW50KHJlcykgOiByZXM7CiAgICB9IGVsc2UgewogICAgICBpZiAodi5jaGFyQXQoMCkgPT09ICcuJykgewogICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTsKICAgICAgfQoKICAgICAgdmFyIHN1ZmZpeCA9IHRoaXMuc3VmZml4KCk7CiAgICAgIHZhciByZXBsYWNlOwoKICAgICAgaWYgKCFzdWZmaXgpIHsKICAgICAgICBpZiAoIXYpIHsKICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fcGFydHMucGF0aCArPSAnLicgKyBVUkkucmVjb2RlUGF0aCh2KTsKICAgICAgfSBlbHNlIGlmICghdikgewogICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KCcuJyArIHN1ZmZpeCkgKyAnJCcpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHN1ZmZpeCkgKyAnJCcpOwogICAgICB9CgogICAgICBpZiAocmVwbGFjZSkgewogICAgICAgIHYgPSBVUkkucmVjb2RlUGF0aCh2KTsKICAgICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHJlcGxhY2UsIHYpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5zZWdtZW50ID0gZnVuY3Rpb24oc2VnbWVudCwgdiwgYnVpbGQpIHsKICAgIHZhciBzZXBhcmF0b3IgPSB0aGlzLl9wYXJ0cy51cm4gPyAnOicgOiAnLyc7CiAgICB2YXIgcGF0aCA9IHRoaXMucGF0aCgpOwogICAgdmFyIGFic29sdXRlID0gcGF0aC5zdWJzdHJpbmcoMCwgMSkgPT09ICcvJzsKICAgIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoc2VwYXJhdG9yKTsKCiAgICBpZiAoc2VnbWVudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzZWdtZW50ICE9PSAnbnVtYmVyJykgewogICAgICBidWlsZCA9IHY7CiAgICAgIHYgPSBzZWdtZW50OwogICAgICBzZWdtZW50ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChzZWdtZW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHNlZ21lbnQgIT09ICdudW1iZXInKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignQmFkIHNlZ21lbnQgIicgKyBzZWdtZW50ICsgJyIsIG11c3QgYmUgMC1iYXNlZCBpbnRlZ2VyJyk7CiAgICB9CgogICAgaWYgKGFic29sdXRlKSB7CiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7CiAgICB9CgogICAgaWYgKHNlZ21lbnQgPCAwKSB7CiAgICAgIC8vIGFsbG93IG5lZ2F0aXZlIGluZGV4ZXMgdG8gYWRkcmVzcyBmcm9tIHRoZSBlbmQKICAgICAgc2VnbWVudCA9IE1hdGgubWF4KHNlZ21lbnRzLmxlbmd0aCArIHNlZ21lbnQsIDApOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IHRydWUgKi8KICAgICAgcmV0dXJuIHNlZ21lbnQgPT09IHVuZGVmaW5lZAogICAgICAgID8gc2VnbWVudHMKICAgICAgICA6IHNlZ21lbnRzW3NlZ21lbnRdOwogICAgICAvKmpzaGludCBsYXhicmVhazogZmFsc2UgKi8KICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gbnVsbCB8fCBzZWdtZW50c1tzZWdtZW50XSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmIChpc0FycmF5KHYpKSB7CiAgICAgICAgc2VnbWVudHMgPSBbXTsKICAgICAgICAvLyBjb2xsYXBzZSBlbXB0eSBlbGVtZW50cyB3aXRoaW4gYXJyYXkKICAgICAgICBmb3IgKHZhciBpPTAsIGw9di5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIGlmICghdltpXS5sZW5ndGggJiYgKCFzZWdtZW50cy5sZW5ndGggfHwgIXNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtMV0ubGVuZ3RoKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2VnbWVudHMubGVuZ3RoICYmICFzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLTFdLmxlbmd0aCkgewogICAgICAgICAgICBzZWdtZW50cy5wb3AoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzZWdtZW50cy5wdXNoKHRyaW1TbGFzaGVzKHZbaV0pKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodiB8fCB0eXBlb2YgdiA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2ID0gdHJpbVNsYXNoZXModik7CiAgICAgICAgaWYgKHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtMV0gPT09ICcnKSB7CiAgICAgICAgICAvLyBlbXB0eSB0cmFpbGluZyBlbGVtZW50cyBoYXZlIHRvIGJlIG92ZXJ3cml0dGVuCiAgICAgICAgICAvLyB0byBwcmV2ZW50IHJlc3VsdHMgc3VjaCBhcyAvZm9vLy9iYXIKICAgICAgICAgIHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtMV0gPSB2OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWdtZW50cy5wdXNoKHYpOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKHYpIHsKICAgICAgICBzZWdtZW50c1tzZWdtZW50XSA9IHRyaW1TbGFzaGVzKHYpOwogICAgICB9IGVsc2UgewogICAgICAgIHNlZ21lbnRzLnNwbGljZShzZWdtZW50LCAxKTsKICAgICAgfQogICAgfQoKICAgIGlmIChhYnNvbHV0ZSkgewogICAgICBzZWdtZW50cy51bnNoaWZ0KCcnKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5wYXRoKHNlZ21lbnRzLmpvaW4oc2VwYXJhdG9yKSwgYnVpbGQpOwogIH07CiAgcC5zZWdtZW50Q29kZWQgPSBmdW5jdGlvbihzZWdtZW50LCB2LCBidWlsZCkgewogICAgdmFyIHNlZ21lbnRzLCBpLCBsOwoKICAgIGlmICh0eXBlb2Ygc2VnbWVudCAhPT0gJ251bWJlcicpIHsKICAgICAgYnVpbGQgPSB2OwogICAgICB2ID0gc2VnbWVudDsKICAgICAgc2VnbWVudCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHNlZ21lbnRzID0gdGhpcy5zZWdtZW50KHNlZ21lbnQsIHYsIGJ1aWxkKTsKICAgICAgaWYgKCFpc0FycmF5KHNlZ21lbnRzKSkgewogICAgICAgIHNlZ21lbnRzID0gc2VnbWVudHMgIT09IHVuZGVmaW5lZCA/IFVSSS5kZWNvZGUoc2VnbWVudHMpIDogdW5kZWZpbmVkOwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAoaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIHNlZ21lbnRzW2ldID0gVVJJLmRlY29kZShzZWdtZW50c1tpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gc2VnbWVudHM7CiAgICB9CgogICAgaWYgKCFpc0FycmF5KHYpKSB7CiAgICAgIHYgPSAodHlwZW9mIHYgPT09ICdzdHJpbmcnIHx8IHYgaW5zdGFuY2VvZiBTdHJpbmcpID8gVVJJLmVuY29kZSh2KSA6IHY7CiAgICB9IGVsc2UgewogICAgICBmb3IgKGkgPSAwLCBsID0gdi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICB2W2ldID0gVVJJLmVuY29kZSh2W2ldKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzLnNlZ21lbnQoc2VnbWVudCwgdiwgYnVpbGQpOwogIH07CgogIC8vIG11dGF0aW5nIHF1ZXJ5IHN0cmluZwogIHZhciBxID0gcC5xdWVyeTsKICBwLnF1ZXJ5ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh2ID09PSB0cnVlKSB7CiAgICAgIHJldHVybiBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgICB2YXIgcmVzdWx0ID0gdi5jYWxsKHRoaXMsIGRhdGEpOwogICAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IFVSSS5idWlsZFF1ZXJ5KHJlc3VsdCB8fCBkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSBlbHNlIGlmICh2ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7CiAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkodiwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBxLmNhbGwodGhpcywgdiwgYnVpbGQpOwogICAgfQogIH07CiAgcC5zZXRRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBidWlsZCkgewogICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CgogICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyB8fCBuYW1lIGluc3RhbmNlb2YgU3RyaW5nKSB7CiAgICAgIGRhdGFbbmFtZV0gPSB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBudWxsOwogICAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHsKICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkgewogICAgICAgICAgZGF0YVtrZXldID0gbmFtZVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXInKTsKICAgIH0KCiAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IFVSSS5idWlsZFF1ZXJ5KGRhdGEsIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7CiAgICAgIGJ1aWxkID0gdmFsdWU7CiAgICB9CgogICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLmFkZFF1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGJ1aWxkKSB7CiAgICB2YXIgZGF0YSA9IFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIFVSSS5hZGRRdWVyeShkYXRhLCBuYW1lLCB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlKTsKICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkoZGF0YSwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHsKICAgICAgYnVpbGQgPSB2YWx1ZTsKICAgIH0KCiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICByZXR1cm4gdGhpczsKICB9OwogIHAucmVtb3ZlUXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYnVpbGQpIHsKICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgVVJJLnJlbW92ZVF1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlKTsKICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkoZGF0YSwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHsKICAgICAgYnVpbGQgPSB2YWx1ZTsKICAgIH0KCiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICByZXR1cm4gdGhpczsKICB9OwogIHAuaGFzUXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpIHsKICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgcmV0dXJuIFVSSS5oYXNRdWVyeShkYXRhLCBuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpOwogIH07CiAgcC5zZXRTZWFyY2ggPSBwLnNldFF1ZXJ5OwogIHAuYWRkU2VhcmNoID0gcC5hZGRRdWVyeTsKICBwLnJlbW92ZVNlYXJjaCA9IHAucmVtb3ZlUXVlcnk7CiAgcC5oYXNTZWFyY2ggPSBwLmhhc1F1ZXJ5OwoKICAvLyBzYW5pdGl6aW5nIFVSTHMKICBwLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdGhpcwogICAgICAgIC5ub3JtYWxpemVQcm90b2NvbChmYWxzZSkKICAgICAgICAubm9ybWFsaXplUGF0aChmYWxzZSkKICAgICAgICAubm9ybWFsaXplUXVlcnkoZmFsc2UpCiAgICAgICAgLm5vcm1hbGl6ZUZyYWdtZW50KGZhbHNlKQogICAgICAgIC5idWlsZCgpOwogICAgfQoKICAgIHJldHVybiB0aGlzCiAgICAgIC5ub3JtYWxpemVQcm90b2NvbChmYWxzZSkKICAgICAgLm5vcm1hbGl6ZUhvc3RuYW1lKGZhbHNlKQogICAgICAubm9ybWFsaXplUG9ydChmYWxzZSkKICAgICAgLm5vcm1hbGl6ZVBhdGgoZmFsc2UpCiAgICAgIC5ub3JtYWxpemVRdWVyeShmYWxzZSkKICAgICAgLm5vcm1hbGl6ZUZyYWdtZW50KGZhbHNlKQogICAgICAuYnVpbGQoKTsKICB9OwogIHAubm9ybWFsaXplUHJvdG9jb2wgPSBmdW5jdGlvbihidWlsZCkgewogICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9PT0gJ3N0cmluZycpIHsKICAgICAgdGhpcy5fcGFydHMucHJvdG9jb2wgPSB0aGlzLl9wYXJ0cy5wcm90b2NvbC50b0xvd2VyQ2FzZSgpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZUhvc3RuYW1lID0gZnVuY3Rpb24oYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy5ob3N0bmFtZSkgewogICAgICBpZiAodGhpcy5pcygnSUROJykgJiYgcHVueWNvZGUpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHB1bnljb2RlLnRvQVNDSUkodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaXMoJ0lQdjYnKSAmJiBJUHY2KSB7CiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSBJUHY2LmJlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICB9CgogICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwogIHAubm9ybWFsaXplUG9ydCA9IGZ1bmN0aW9uKGJ1aWxkKSB7CiAgICAvLyByZW1vdmUgcG9ydCBvZiBpdCdzIHRoZSBwcm90b2NvbCdzIGRlZmF1bHQKICAgIGlmICh0eXBlb2YgdGhpcy5fcGFydHMucHJvdG9jb2wgPT09ICdzdHJpbmcnICYmIHRoaXMuX3BhcnRzLnBvcnQgPT09IFVSSS5kZWZhdWx0UG9ydHNbdGhpcy5fcGFydHMucHJvdG9jb2xdKSB7CiAgICAgIHRoaXMuX3BhcnRzLnBvcnQgPSBudWxsOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZVBhdGggPSBmdW5jdGlvbihidWlsZCkgewogICAgdmFyIF9wYXRoID0gdGhpcy5fcGFydHMucGF0aDsKICAgIGlmICghX3BhdGgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gVVJJLnJlY29kZVVyblBhdGgodGhpcy5fcGFydHMucGF0aCk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgaWYgKHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBfcGF0aCA9IFVSSS5yZWNvZGVQYXRoKF9wYXRoKTsKCiAgICB2YXIgX3dhc19yZWxhdGl2ZTsKICAgIHZhciBfbGVhZGluZ1BhcmVudHMgPSAnJzsKICAgIHZhciBfcGFyZW50LCBfcG9zOwoKICAgIC8vIGhhbmRsZSByZWxhdGl2ZSBwYXRocwogICAgaWYgKF9wYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7CiAgICAgIF93YXNfcmVsYXRpdmUgPSB0cnVlOwogICAgICBfcGF0aCA9ICcvJyArIF9wYXRoOwogICAgfQoKICAgIC8vIGhhbmRsZSByZWxhdGl2ZSBmaWxlcyAoYXMgb3Bwb3NlZCB0byBkaXJlY3RvcmllcykKICAgIGlmIChfcGF0aC5zbGljZSgtMykgPT09ICcvLi4nIHx8IF9wYXRoLnNsaWNlKC0yKSA9PT0gJy8uJykgewogICAgICBfcGF0aCArPSAnLyc7CiAgICB9CgogICAgLy8gcmVzb2x2ZSBzaW1wbGVzCiAgICBfcGF0aCA9IF9wYXRoCiAgICAgIC5yZXBsYWNlKC8oXC8oXC5cLykrKXwoXC9cLiQpL2csICcvJykKICAgICAgLnJlcGxhY2UoL1wvezIsfS9nLCAnLycpOwoKICAgIC8vIHJlbWVtYmVyIGxlYWRpbmcgcGFyZW50cwogICAgaWYgKF93YXNfcmVsYXRpdmUpIHsKICAgICAgX2xlYWRpbmdQYXJlbnRzID0gX3BhdGguc3Vic3RyaW5nKDEpLm1hdGNoKC9eKFwuXC5cLykrLykgfHwgJyc7CiAgICAgIGlmIChfbGVhZGluZ1BhcmVudHMpIHsKICAgICAgICBfbGVhZGluZ1BhcmVudHMgPSBfbGVhZGluZ1BhcmVudHNbMF07CiAgICAgIH0KICAgIH0KCiAgICAvLyByZXNvbHZlIHBhcmVudHMKICAgIHdoaWxlICh0cnVlKSB7CiAgICAgIF9wYXJlbnQgPSBfcGF0aC5zZWFyY2goL1wvXC5cLihcL3wkKS8pOwogICAgICBpZiAoX3BhcmVudCA9PT0gLTEpIHsKICAgICAgICAvLyBubyBtb3JlIC4uLyB0byByZXNvbHZlCiAgICAgICAgYnJlYWs7CiAgICAgIH0gZWxzZSBpZiAoX3BhcmVudCA9PT0gMCkgewogICAgICAgIC8vIHRvcCBsZXZlbCBjYW5ub3QgYmUgcmVsYXRpdmUsIHNraXAgaXQKICAgICAgICBfcGF0aCA9IF9wYXRoLnN1YnN0cmluZygzKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgX3BvcyA9IF9wYXRoLnN1YnN0cmluZygwLCBfcGFyZW50KS5sYXN0SW5kZXhPZignLycpOwogICAgICBpZiAoX3BvcyA9PT0gLTEpIHsKICAgICAgICBfcG9zID0gX3BhcmVudDsKICAgICAgfQogICAgICBfcGF0aCA9IF9wYXRoLnN1YnN0cmluZygwLCBfcG9zKSArIF9wYXRoLnN1YnN0cmluZyhfcGFyZW50ICsgMyk7CiAgICB9CgogICAgLy8gcmV2ZXJ0IHRvIHJlbGF0aXZlCiAgICBpZiAoX3dhc19yZWxhdGl2ZSAmJiB0aGlzLmlzKCdyZWxhdGl2ZScpKSB7CiAgICAgIF9wYXRoID0gX2xlYWRpbmdQYXJlbnRzICsgX3BhdGguc3Vic3RyaW5nKDEpOwogICAgfQoKICAgIHRoaXMuX3BhcnRzLnBhdGggPSBfcGF0aDsKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5ub3JtYWxpemVQYXRobmFtZSA9IHAubm9ybWFsaXplUGF0aDsKICBwLm5vcm1hbGl6ZVF1ZXJ5ID0gZnVuY3Rpb24oYnVpbGQpIHsKICAgIGlmICh0eXBlb2YgdGhpcy5fcGFydHMucXVlcnkgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMucXVlcnkubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5fcGFydHMucXVlcnkgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucXVlcnkoVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpKTsKICAgICAgfQoKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5ub3JtYWxpemVGcmFnbWVudCA9IGZ1bmN0aW9uKGJ1aWxkKSB7CiAgICBpZiAoIXRoaXMuX3BhcnRzLmZyYWdtZW50KSB7CiAgICAgIHRoaXMuX3BhcnRzLmZyYWdtZW50ID0gbnVsbDsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5ub3JtYWxpemVTZWFyY2ggPSBwLm5vcm1hbGl6ZVF1ZXJ5OwogIHAubm9ybWFsaXplSGFzaCA9IHAubm9ybWFsaXplRnJhZ21lbnQ7CgogIHAuaXNvODg1OSA9IGZ1bmN0aW9uKCkgewogICAgLy8gZXhwZWN0IHVuaWNvZGUgaW5wdXQsIGlzbzg4NTkgb3V0cHV0CiAgICB2YXIgZSA9IFVSSS5lbmNvZGU7CiAgICB2YXIgZCA9IFVSSS5kZWNvZGU7CgogICAgVVJJLmVuY29kZSA9IGVzY2FwZTsKICAgIFVSSS5kZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7CiAgICB0cnkgewogICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgVVJJLmVuY29kZSA9IGU7CiAgICAgIFVSSS5kZWNvZGUgPSBkOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcC51bmljb2RlID0gZnVuY3Rpb24oKSB7CiAgICAvLyBleHBlY3QgaXNvODg1OSBpbnB1dCwgdW5pY29kZSBvdXRwdXQKICAgIHZhciBlID0gVVJJLmVuY29kZTsKICAgIHZhciBkID0gVVJJLmRlY29kZTsKCiAgICBVUkkuZW5jb2RlID0gc3RyaWN0RW5jb2RlVVJJQ29tcG9uZW50OwogICAgVVJJLmRlY29kZSA9IHVuZXNjYXBlOwogICAgdHJ5IHsKICAgICAgdGhpcy5ub3JtYWxpemUoKTsKICAgIH0gZmluYWxseSB7CiAgICAgIFVSSS5lbmNvZGUgPSBlOwogICAgICBVUkkuZGVjb2RlID0gZDsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH07CgogIHAucmVhZGFibGUgPSBmdW5jdGlvbigpIHsKICAgIHZhciB1cmkgPSB0aGlzLmNsb25lKCk7CiAgICAvLyByZW1vdmluZyB1c2VybmFtZSwgcGFzc3dvcmQsIGJlY2F1c2UgdGhleSBzaG91bGRuJ3QgYmUgZGlzcGxheWVkIGFjY29yZGluZyB0byBSRkMgMzk4NgogICAgdXJpLnVzZXJuYW1lKCcnKS5wYXNzd29yZCgnJykubm9ybWFsaXplKCk7CiAgICB2YXIgdCA9ICcnOwogICAgaWYgKHVyaS5fcGFydHMucHJvdG9jb2wpIHsKICAgICAgdCArPSB1cmkuX3BhcnRzLnByb3RvY29sICsgJzovLyc7CiAgICB9CgogICAgaWYgKHVyaS5fcGFydHMuaG9zdG5hbWUpIHsKICAgICAgaWYgKHVyaS5pcygncHVueWNvZGUnKSAmJiBwdW55Y29kZSkgewogICAgICAgIHQgKz0gcHVueWNvZGUudG9Vbmljb2RlKHVyaS5fcGFydHMuaG9zdG5hbWUpOwogICAgICAgIGlmICh1cmkuX3BhcnRzLnBvcnQpIHsKICAgICAgICAgIHQgKz0gJzonICsgdXJpLl9wYXJ0cy5wb3J0OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0ICs9IHVyaS5ob3N0KCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAodXJpLl9wYXJ0cy5ob3N0bmFtZSAmJiB1cmkuX3BhcnRzLnBhdGggJiYgdXJpLl9wYXJ0cy5wYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7CiAgICAgIHQgKz0gJy8nOwogICAgfQoKICAgIHQgKz0gdXJpLnBhdGgodHJ1ZSk7CiAgICBpZiAodXJpLl9wYXJ0cy5xdWVyeSkgewogICAgICB2YXIgcSA9ICcnOwogICAgICBmb3IgKHZhciBpID0gMCwgcXAgPSB1cmkuX3BhcnRzLnF1ZXJ5LnNwbGl0KCcmJyksIGwgPSBxcC5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICB2YXIga3YgPSAocXBbaV0gfHwgJycpLnNwbGl0KCc9Jyk7CiAgICAgICAgcSArPSAnJicgKyBVUkkuZGVjb2RlUXVlcnkoa3ZbMF0sIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpCiAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJTI2Jyk7CgogICAgICAgIGlmIChrdlsxXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBxICs9ICc9JyArIFVSSS5kZWNvZGVRdWVyeShrdlsxXSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkKICAgICAgICAgICAgLnJlcGxhY2UoLyYvZywgJyUyNicpOwogICAgICAgIH0KICAgICAgfQogICAgICB0ICs9ICc/JyArIHEuc3Vic3RyaW5nKDEpOwogICAgfQoKICAgIHQgKz0gVVJJLmRlY29kZVF1ZXJ5KHVyaS5oYXNoKCksIHRydWUpOwogICAgcmV0dXJuIHQ7CiAgfTsKCiAgLy8gcmVzb2x2aW5nIHJlbGF0aXZlIGFuZCBhYnNvbHV0ZSBVUkxzCiAgcC5hYnNvbHV0ZVRvID0gZnVuY3Rpb24oYmFzZSkgewogICAgdmFyIHJlc29sdmVkID0gdGhpcy5jbG9uZSgpOwogICAgdmFyIHByb3BlcnRpZXMgPSBbJ3Byb3RvY29sJywgJ3VzZXJuYW1lJywgJ3Bhc3N3b3JkJywgJ2hvc3RuYW1lJywgJ3BvcnQnXTsKICAgIHZhciBiYXNlZGlyLCBpLCBwOwoKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpOwogICAgfQoKICAgIGlmICghKGJhc2UgaW5zdGFuY2VvZiBVUkkpKSB7CiAgICAgIGJhc2UgPSBuZXcgVVJJKGJhc2UpOwogICAgfQoKICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnByb3RvY29sKSB7CiAgICAgIHJlc29sdmVkLl9wYXJ0cy5wcm90b2NvbCA9IGJhc2UuX3BhcnRzLnByb3RvY29sOwogICAgfQoKICAgIGlmICh0aGlzLl9wYXJ0cy5ob3N0bmFtZSkgewogICAgICByZXR1cm4gcmVzb2x2ZWQ7CiAgICB9CgogICAgZm9yIChpID0gMDsgKHAgPSBwcm9wZXJ0aWVzW2ldKTsgaSsrKSB7CiAgICAgIHJlc29sdmVkLl9wYXJ0c1twXSA9IGJhc2UuX3BhcnRzW3BdOwogICAgfQoKICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnBhdGgpIHsKICAgICAgcmVzb2x2ZWQuX3BhcnRzLnBhdGggPSBiYXNlLl9wYXJ0cy5wYXRoOwogICAgICBpZiAoIXJlc29sdmVkLl9wYXJ0cy5xdWVyeSkgewogICAgICAgIHJlc29sdmVkLl9wYXJ0cy5xdWVyeSA9IGJhc2UuX3BhcnRzLnF1ZXJ5OwogICAgICB9CiAgICB9IGVsc2UgaWYgKHJlc29sdmVkLl9wYXJ0cy5wYXRoLnN1YnN0cmluZygtMikgPT09ICcuLicpIHsKICAgICAgcmVzb2x2ZWQuX3BhcnRzLnBhdGggKz0gJy8nOwogICAgfQoKICAgIGlmIChyZXNvbHZlZC5wYXRoKCkuY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgYmFzZWRpciA9IGJhc2UuZGlyZWN0b3J5KCk7CiAgICAgIGJhc2VkaXIgPSBiYXNlZGlyID8gYmFzZWRpciA6IGJhc2UucGF0aCgpLmluZGV4T2YoJy8nKSA9PT0gMCA/ICcvJyA6ICcnOwogICAgICByZXNvbHZlZC5fcGFydHMucGF0aCA9IChiYXNlZGlyID8gKGJhc2VkaXIgKyAnLycpIDogJycpICsgcmVzb2x2ZWQuX3BhcnRzLnBhdGg7CiAgICAgIHJlc29sdmVkLm5vcm1hbGl6ZVBhdGgoKTsKICAgIH0KCiAgICByZXNvbHZlZC5idWlsZCgpOwogICAgcmV0dXJuIHJlc29sdmVkOwogIH07CiAgcC5yZWxhdGl2ZVRvID0gZnVuY3Rpb24oYmFzZSkgewogICAgdmFyIHJlbGF0aXZlID0gdGhpcy5jbG9uZSgpLm5vcm1hbGl6ZSgpOwogICAgdmFyIHJlbGF0aXZlUGFydHMsIGJhc2VQYXJ0cywgY29tbW9uLCByZWxhdGl2ZVBhdGgsIGJhc2VQYXRoOwoKICAgIGlmIChyZWxhdGl2ZS5fcGFydHMudXJuKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignVVJOcyBkbyBub3QgaGF2ZSBhbnkgZ2VuZXJhbGx5IGRlZmluZWQgaGllcmFyY2hpY2FsIGNvbXBvbmVudHMnKTsKICAgIH0KCiAgICBiYXNlID0gbmV3IFVSSShiYXNlKS5ub3JtYWxpemUoKTsKICAgIHJlbGF0aXZlUGFydHMgPSByZWxhdGl2ZS5fcGFydHM7CiAgICBiYXNlUGFydHMgPSBiYXNlLl9wYXJ0czsKICAgIHJlbGF0aXZlUGF0aCA9IHJlbGF0aXZlLnBhdGgoKTsKICAgIGJhc2VQYXRoID0gYmFzZS5wYXRoKCk7CgogICAgaWYgKHJlbGF0aXZlUGF0aC5jaGFyQXQoMCkgIT09ICcvJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSSSBpcyBhbHJlYWR5IHJlbGF0aXZlJyk7CiAgICB9CgogICAgaWYgKGJhc2VQYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNhbGN1bGF0ZSBhIFVSSSByZWxhdGl2ZSB0byBhbm90aGVyIHJlbGF0aXZlIFVSSScpOwogICAgfQoKICAgIGlmIChyZWxhdGl2ZVBhcnRzLnByb3RvY29sID09PSBiYXNlUGFydHMucHJvdG9jb2wpIHsKICAgICAgcmVsYXRpdmVQYXJ0cy5wcm90b2NvbCA9IG51bGw7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGFydHMudXNlcm5hbWUgIT09IGJhc2VQYXJ0cy51c2VybmFtZSB8fCByZWxhdGl2ZVBhcnRzLnBhc3N3b3JkICE9PSBiYXNlUGFydHMucGFzc3dvcmQpIHsKICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGFydHMucHJvdG9jb2wgIT09IG51bGwgfHwgcmVsYXRpdmVQYXJ0cy51c2VybmFtZSAhPT0gbnVsbCB8fCByZWxhdGl2ZVBhcnRzLnBhc3N3b3JkICE9PSBudWxsKSB7CiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpOwogICAgfQoKICAgIGlmIChyZWxhdGl2ZVBhcnRzLmhvc3RuYW1lID09PSBiYXNlUGFydHMuaG9zdG5hbWUgJiYgcmVsYXRpdmVQYXJ0cy5wb3J0ID09PSBiYXNlUGFydHMucG9ydCkgewogICAgICByZWxhdGl2ZVBhcnRzLmhvc3RuYW1lID0gbnVsbDsKICAgICAgcmVsYXRpdmVQYXJ0cy5wb3J0ID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpOwogICAgfQoKICAgIGlmIChyZWxhdGl2ZVBhdGggPT09IGJhc2VQYXRoKSB7CiAgICAgIHJlbGF0aXZlUGFydHMucGF0aCA9ICcnOwogICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTsKICAgIH0KCiAgICAvLyBkZXRlcm1pbmUgY29tbW9uIHN1YiBwYXRoCiAgICBjb21tb24gPSBVUkkuY29tbW9uUGF0aChyZWxhdGl2ZVBhdGgsIGJhc2VQYXRoKTsKCiAgICAvLyBJZiB0aGUgcGF0aHMgaGF2ZSBub3RoaW5nIGluIGNvbW1vbiwgcmV0dXJuIGEgcmVsYXRpdmUgVVJMIHdpdGggdGhlIGFic29sdXRlIHBhdGguCiAgICBpZiAoIWNvbW1vbikgewogICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTsKICAgIH0KCiAgICB2YXIgcGFyZW50cyA9IGJhc2VQYXJ0cy5wYXRoCiAgICAgIC5zdWJzdHJpbmcoY29tbW9uLmxlbmd0aCkKICAgICAgLnJlcGxhY2UoL1teXC9dKiQvLCAnJykKICAgICAgLnJlcGxhY2UoLy4qP1wvL2csICcuLi8nKTsKCiAgICByZWxhdGl2ZVBhcnRzLnBhdGggPSAocGFyZW50cyArIHJlbGF0aXZlUGFydHMucGF0aC5zdWJzdHJpbmcoY29tbW9uLmxlbmd0aCkpIHx8ICcuLyc7CgogICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7CiAgfTsKCiAgLy8gY29tcGFyaW5nIFVSSXMKICBwLmVxdWFscyA9IGZ1bmN0aW9uKHVyaSkgewogICAgdmFyIG9uZSA9IHRoaXMuY2xvbmUoKTsKICAgIHZhciB0d28gPSBuZXcgVVJJKHVyaSk7CiAgICB2YXIgb25lX21hcCA9IHt9OwogICAgdmFyIHR3b19tYXAgPSB7fTsKICAgIHZhciBjaGVja2VkID0ge307CiAgICB2YXIgb25lX3F1ZXJ5LCB0d29fcXVlcnksIGtleTsKCiAgICBvbmUubm9ybWFsaXplKCk7CiAgICB0d28ubm9ybWFsaXplKCk7CgogICAgLy8gZXhhY3QgbWF0Y2gKICAgIGlmIChvbmUudG9TdHJpbmcoKSA9PT0gdHdvLnRvU3RyaW5nKCkpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gZXh0cmFjdCBxdWVyeSBzdHJpbmcKICAgIG9uZV9xdWVyeSA9IG9uZS5xdWVyeSgpOwogICAgdHdvX3F1ZXJ5ID0gdHdvLnF1ZXJ5KCk7CiAgICBvbmUucXVlcnkoJycpOwogICAgdHdvLnF1ZXJ5KCcnKTsKCiAgICAvLyBkZWZpbml0ZWx5IG5vdCBlcXVhbCBpZiBub3QgZXZlbiBub24tcXVlcnkgcGFydHMgbWF0Y2gKICAgIGlmIChvbmUudG9TdHJpbmcoKSAhPT0gdHdvLnRvU3RyaW5nKCkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIHF1ZXJ5IHBhcmFtZXRlcnMgaGF2ZSB0aGUgc2FtZSBsZW5ndGgsIGV2ZW4gaWYgdGhleSdyZSBwZXJtdXRlZAogICAgaWYgKG9uZV9xdWVyeS5sZW5ndGggIT09IHR3b19xdWVyeS5sZW5ndGgpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIG9uZV9tYXAgPSBVUkkucGFyc2VRdWVyeShvbmVfcXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgdHdvX21hcCA9IFVSSS5wYXJzZVF1ZXJ5KHR3b19xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CgogICAgZm9yIChrZXkgaW4gb25lX21hcCkgewogICAgICBpZiAoaGFzT3duLmNhbGwob25lX21hcCwga2V5KSkgewogICAgICAgIGlmICghaXNBcnJheShvbmVfbWFwW2tleV0pKSB7CiAgICAgICAgICBpZiAob25lX21hcFtrZXldICE9PSB0d29fbWFwW2tleV0pIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoIWFycmF5c0VxdWFsKG9uZV9tYXBba2V5XSwgdHdvX21hcFtrZXldKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgY2hlY2tlZFtrZXldID0gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIGZvciAoa2V5IGluIHR3b19tYXApIHsKICAgICAgaWYgKGhhc093bi5jYWxsKHR3b19tYXAsIGtleSkpIHsKICAgICAgICBpZiAoIWNoZWNrZWRba2V5XSkgewogICAgICAgICAgLy8gdHdvIGNvbnRhaW5zIGEgcGFyYW1ldGVyIG5vdCBwcmVzZW50IGluIG9uZQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH07CgogIC8vIHN0YXRlCiAgcC5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMgPSBmdW5jdGlvbih2KSB7CiAgICB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMgPSAhIXY7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLmVzY2FwZVF1ZXJ5U3BhY2UgPSBmdW5jdGlvbih2KSB7CiAgICB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlID0gISF2OwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcmV0dXJuIFVSSTsKfSkpOwoKfSx7Ii4vSVB2NiI6NCwiLi9TZWNvbmRMZXZlbERvbWFpbnMiOjUsIi4vcHVueWNvZGUiOjd9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKiEgaHR0cHM6Ly9tdGhzLmJlL3B1bnljb2RlIHYxLjQuMCBieSBAbWF0aGlhcyAqLwo7KGZ1bmN0aW9uKHJvb3QpIHsKCgkvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGVzICovCgl2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmCgkJIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0czsKCXZhciBmcmVlTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYKCQkhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTsKCXZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWw7CglpZiAoCgkJZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHwKCQlmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCB8fAoJCWZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbAoJKSB7CgkJcm9vdCA9IGZyZWVHbG9iYWw7Cgl9CgoJLyoqCgkgKiBUaGUgYHB1bnljb2RlYCBvYmplY3QuCgkgKiBAbmFtZSBwdW55Y29kZQoJICogQHR5cGUgT2JqZWN0CgkgKi8KCXZhciBwdW55Y29kZSwKCgkvKiogSGlnaGVzdCBwb3NpdGl2ZSBzaWduZWQgMzItYml0IGZsb2F0IHZhbHVlICovCgltYXhJbnQgPSAyMTQ3NDgzNjQ3LCAvLyBha2EuIDB4N0ZGRkZGRkYgb3IgMl4zMS0xCgoJLyoqIEJvb3RzdHJpbmcgcGFyYW1ldGVycyAqLwoJYmFzZSA9IDM2LAoJdE1pbiA9IDEsCgl0TWF4ID0gMjYsCglza2V3ID0gMzgsCglkYW1wID0gNzAwLAoJaW5pdGlhbEJpYXMgPSA3MiwKCWluaXRpYWxOID0gMTI4LCAvLyAweDgwCglkZWxpbWl0ZXIgPSAnLScsIC8vICdceDJEJwoKCS8qKiBSZWd1bGFyIGV4cHJlc3Npb25zICovCglyZWdleFB1bnljb2RlID0gL154bi0tLywKCXJlZ2V4Tm9uQVNDSUkgPSAvW15ceDIwLVx4N0VdLywgLy8gdW5wcmludGFibGUgQVNDSUkgY2hhcnMgKyBub24tQVNDSUkgY2hhcnMKCXJlZ2V4U2VwYXJhdG9ycyA9IC9bXHgyRVx1MzAwMlx1RkYwRVx1RkY2MV0vZywgLy8gUkZDIDM0OTAgc2VwYXJhdG9ycwoKCS8qKiBFcnJvciBtZXNzYWdlcyAqLwoJZXJyb3JzID0gewoJCSdvdmVyZmxvdyc6ICdPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcycsCgkJJ25vdC1iYXNpYyc6ICdJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpJywKCQknaW52YWxpZC1pbnB1dCc6ICdJbnZhbGlkIGlucHV0JwoJfSwKCgkvKiogQ29udmVuaWVuY2Ugc2hvcnRjdXRzICovCgliYXNlTWludXNUTWluID0gYmFzZSAtIHRNaW4sCglmbG9vciA9IE1hdGguZmxvb3IsCglzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLAoKCS8qKiBUZW1wb3JhcnkgdmFyaWFibGUgKi8KCWtleTsKCgkvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCgkvKioKCSAqIEEgZ2VuZXJpYyBlcnJvciB1dGlsaXR5IGZ1bmN0aW9uLgoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBlcnJvciB0eXBlLgoJICogQHJldHVybnMge0Vycm9yfSBUaHJvd3MgYSBgUmFuZ2VFcnJvcmAgd2l0aCB0aGUgYXBwbGljYWJsZSBlcnJvciBtZXNzYWdlLgoJICovCglmdW5jdGlvbiBlcnJvcih0eXBlKSB7CgkJdGhyb3cgbmV3IFJhbmdlRXJyb3IoZXJyb3JzW3R5cGVdKTsKCX0KCgkvKioKCSAqIEEgZ2VuZXJpYyBgQXJyYXkjbWFwYCB1dGlsaXR5IGZ1bmN0aW9uLgoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuCgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkgYXJyYXkKCSAqIGl0ZW0uCgkgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IGFycmF5IG9mIHZhbHVlcyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uCgkgKi8KCWZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHsKCQl2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwoJCXZhciByZXN1bHQgPSBbXTsKCQl3aGlsZSAobGVuZ3RoLS0pIHsKCQkJcmVzdWx0W2xlbmd0aF0gPSBmbihhcnJheVtsZW5ndGhdKTsKCQl9CgkJcmV0dXJuIHJlc3VsdDsKCX0KCgkvKioKCSAqIEEgc2ltcGxlIGBBcnJheSNtYXBgLWxpa2Ugd3JhcHBlciB0byB3b3JrIHdpdGggZG9tYWluIG5hbWUgc3RyaW5ncyBvciBlbWFpbAoJICogYWRkcmVzc2VzLgoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MuCgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkKCSAqIGNoYXJhY3Rlci4KCSAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgc3RyaW5nIG9mIGNoYXJhY3RlcnMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrCgkgKiBmdW5jdGlvbi4KCSAqLwoJZnVuY3Rpb24gbWFwRG9tYWluKHN0cmluZywgZm4pIHsKCQl2YXIgcGFydHMgPSBzdHJpbmcuc3BsaXQoJ0AnKTsKCQl2YXIgcmVzdWx0ID0gJyc7CgkJaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHsKCQkJLy8gSW4gZW1haWwgYWRkcmVzc2VzLCBvbmx5IHRoZSBkb21haW4gbmFtZSBzaG91bGQgYmUgcHVueWNvZGVkLiBMZWF2ZQoJCQkvLyB0aGUgbG9jYWwgcGFydCAoaS5lLiBldmVyeXRoaW5nIHVwIHRvIGBAYCkgaW50YWN0LgoJCQlyZXN1bHQgPSBwYXJ0c1swXSArICdAJzsKCQkJc3RyaW5nID0gcGFydHNbMV07CgkJfQoJCS8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy4KCQlzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShyZWdleFNlcGFyYXRvcnMsICdceDJFJyk7CgkJdmFyIGxhYmVscyA9IHN0cmluZy5zcGxpdCgnLicpOwoJCXZhciBlbmNvZGVkID0gbWFwKGxhYmVscywgZm4pLmpvaW4oJy4nKTsKCQlyZXR1cm4gcmVzdWx0ICsgZW5jb2RlZDsKCX0KCgkvKioKCSAqIENyZWF0ZXMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgbnVtZXJpYyBjb2RlIHBvaW50cyBvZiBlYWNoIFVuaWNvZGUKCSAqIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nLiBXaGlsZSBKYXZhU2NyaXB0IHVzZXMgVUNTLTIgaW50ZXJuYWxseSwKCSAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoCgkgKiBVQ1MtMiBleHBvc2VzIGFzIHNlcGFyYXRlIGNoYXJhY3RlcnMpIGludG8gYSBzaW5nbGUgY29kZSBwb2ludCwKCSAqIG1hdGNoaW5nIFVURi0xNi4KCSAqIEBzZWUgYHB1bnljb2RlLnVjczIuZW5jb2RlYAoJICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+CgkgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMgoJICogQG5hbWUgZGVjb2RlCgkgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nIFRoZSBVbmljb2RlIGlucHV0IHN0cmluZyAoVUNTLTIpLgoJICogQHJldHVybnMge0FycmF5fSBUaGUgbmV3IGFycmF5IG9mIGNvZGUgcG9pbnRzLgoJICovCglmdW5jdGlvbiB1Y3MyZGVjb2RlKHN0cmluZykgewoJCXZhciBvdXRwdXQgPSBbXSwKCQkgICAgY291bnRlciA9IDAsCgkJICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGgsCgkJICAgIHZhbHVlLAoJCSAgICBleHRyYTsKCQl3aGlsZSAoY291bnRlciA8IGxlbmd0aCkgewoJCQl2YWx1ZSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7CgkJCWlmICh2YWx1ZSA+PSAweEQ4MDAgJiYgdmFsdWUgPD0gMHhEQkZGICYmIGNvdW50ZXIgPCBsZW5ndGgpIHsKCQkJCS8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlcgoJCQkJZXh0cmEgPSBzdHJpbmcuY2hhckNvZGVBdChjb3VudGVyKyspOwoJCQkJaWYgKChleHRyYSAmIDB4RkMwMCkgPT0gMHhEQzAwKSB7IC8vIGxvdyBzdXJyb2dhdGUKCQkJCQlvdXRwdXQucHVzaCgoKHZhbHVlICYgMHgzRkYpIDw8IDEwKSArIChleHRyYSAmIDB4M0ZGKSArIDB4MTAwMDApOwoJCQkJfSBlbHNlIHsKCQkJCQkvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dAoJCQkJCS8vIGNvZGUgdW5pdCBpcyB0aGUgaGlnaCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpcgoJCQkJCW91dHB1dC5wdXNoKHZhbHVlKTsKCQkJCQljb3VudGVyLS07CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlvdXRwdXQucHVzaCh2YWx1ZSk7CgkJCX0KCQl9CgkJcmV0dXJuIG91dHB1dDsKCX0KCgkvKioKCSAqIENyZWF0ZXMgYSBzdHJpbmcgYmFzZWQgb24gYW4gYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy4KCSAqIEBzZWUgYHB1bnljb2RlLnVjczIuZGVjb2RlYAoJICogQG1lbWJlck9mIHB1bnljb2RlLnVjczIKCSAqIEBuYW1lIGVuY29kZQoJICogQHBhcmFtIHtBcnJheX0gY29kZVBvaW50cyBUaGUgYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy4KCSAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBuZXcgVW5pY29kZSBzdHJpbmcgKFVDUy0yKS4KCSAqLwoJZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkgewoJCXJldHVybiBtYXAoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKSB7CgkJCXZhciBvdXRwdXQgPSAnJzsKCQkJaWYgKHZhbHVlID4gMHhGRkZGKSB7CgkJCQl2YWx1ZSAtPSAweDEwMDAwOwoJCQkJb3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7CgkJCQl2YWx1ZSA9IDB4REMwMCB8IHZhbHVlICYgMHgzRkY7CgkJCX0KCQkJb3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSk7CgkJCXJldHVybiBvdXRwdXQ7CgkJfSkuam9pbignJyk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIGJhc2ljIGNvZGUgcG9pbnQgaW50byBhIGRpZ2l0L2ludGVnZXIuCgkgKiBAc2VlIGBkaWdpdFRvQmFzaWMoKWAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge051bWJlcn0gY29kZVBvaW50IFRoZSBiYXNpYyBudW1lcmljIGNvZGUgcG9pbnQgdmFsdWUuCgkgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQgKGZvciB1c2UgaW4KCSAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaW4gdGhlIHJhbmdlIGAwYCB0byBgYmFzZSAtIDFgLCBvciBgYmFzZWAgaWYKCSAqIHRoZSBjb2RlIHBvaW50IGRvZXMgbm90IHJlcHJlc2VudCBhIHZhbHVlLgoJICovCglmdW5jdGlvbiBiYXNpY1RvRGlnaXQoY29kZVBvaW50KSB7CgkJaWYgKGNvZGVQb2ludCAtIDQ4IDwgMTApIHsKCQkJcmV0dXJuIGNvZGVQb2ludCAtIDIyOwoJCX0KCQlpZiAoY29kZVBvaW50IC0gNjUgPCAyNikgewoJCQlyZXR1cm4gY29kZVBvaW50IC0gNjU7CgkJfQoJCWlmIChjb2RlUG9pbnQgLSA5NyA8IDI2KSB7CgkJCXJldHVybiBjb2RlUG9pbnQgLSA5NzsKCQl9CgkJcmV0dXJuIGJhc2U7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIGRpZ2l0L2ludGVnZXIgaW50byBhIGJhc2ljIGNvZGUgcG9pbnQuCgkgKiBAc2VlIGBiYXNpY1RvRGlnaXQoKWAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge051bWJlcn0gZGlnaXQgVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50LgoJICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2ljIGNvZGUgcG9pbnQgd2hvc2UgdmFsdWUgKHdoZW4gdXNlZCBmb3IKCSAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaXMgYGRpZ2l0YCwgd2hpY2ggbmVlZHMgdG8gYmUgaW4gdGhlIHJhbmdlCgkgKiBgMGAgdG8gYGJhc2UgLSAxYC4gSWYgYGZsYWdgIGlzIG5vbi16ZXJvLCB0aGUgdXBwZXJjYXNlIGZvcm0gaXMKCSAqIHVzZWQ7IGVsc2UsIHRoZSBsb3dlcmNhc2UgZm9ybSBpcyB1c2VkLiBUaGUgYmVoYXZpb3IgaXMgdW5kZWZpbmVkCgkgKiBpZiBgZmxhZ2AgaXMgbm9uLXplcm8gYW5kIGBkaWdpdGAgaGFzIG5vIHVwcGVyY2FzZSBmb3JtLgoJICovCglmdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsIGZsYWcpIHsKCQkvLyAgMC4uMjUgbWFwIHRvIEFTQ0lJIGEuLnogb3IgQS4uWgoJCS8vIDI2Li4zNSBtYXAgdG8gQVNDSUkgMC4uOQoJCXJldHVybiBkaWdpdCArIDIyICsgNzUgKiAoZGlnaXQgPCAyNikgLSAoKGZsYWcgIT0gMCkgPDwgNSk7Cgl9CgoJLyoqCgkgKiBCaWFzIGFkYXB0YXRpb24gZnVuY3Rpb24gYXMgcGVyIHNlY3Rpb24gMy40IG9mIFJGQyAzNDkyLgoJICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjQKCSAqIEBwcml2YXRlCgkgKi8KCWZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkgewoJCXZhciBrID0gMDsKCQlkZWx0YSA9IGZpcnN0VGltZSA/IGZsb29yKGRlbHRhIC8gZGFtcCkgOiBkZWx0YSA+PiAxOwoJCWRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTsKCQlmb3IgKC8qIG5vIGluaXRpYWxpemF0aW9uICovOyBkZWx0YSA+IGJhc2VNaW51c1RNaW4gKiB0TWF4ID4+IDE7IGsgKz0gYmFzZSkgewoJCQlkZWx0YSA9IGZsb29yKGRlbHRhIC8gYmFzZU1pbnVzVE1pbik7CgkJfQoJCXJldHVybiBmbG9vcihrICsgKGJhc2VNaW51c1RNaW4gKyAxKSAqIGRlbHRhIC8gKGRlbHRhICsgc2tldykpOwoJfQoKCS8qKgoJICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzIHRvIGEgc3RyaW5nIG9mIFVuaWNvZGUKCSAqIHN5bWJvbHMuCgkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy4KCSAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy4KCSAqLwoJZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7CgkJLy8gRG9uJ3QgdXNlIFVDUy0yCgkJdmFyIG91dHB1dCA9IFtdLAoJCSAgICBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aCwKCQkgICAgb3V0LAoJCSAgICBpID0gMCwKCQkgICAgbiA9IGluaXRpYWxOLAoJCSAgICBiaWFzID0gaW5pdGlhbEJpYXMsCgkJICAgIGJhc2ljLAoJCSAgICBqLAoJCSAgICBpbmRleCwKCQkgICAgb2xkaSwKCQkgICAgdywKCQkgICAgaywKCQkgICAgZGlnaXQsCgkJICAgIHQsCgkJICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqLwoJCSAgICBiYXNlTWludXNUOwoKCQkvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzOiBsZXQgYGJhc2ljYCBiZSB0aGUgbnVtYmVyIG9mIGlucHV0IGNvZGUKCQkvLyBwb2ludHMgYmVmb3JlIHRoZSBsYXN0IGRlbGltaXRlciwgb3IgYDBgIGlmIHRoZXJlIGlzIG5vbmUsIHRoZW4gY29weQoJCS8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LgoKCQliYXNpYyA9IGlucHV0Lmxhc3RJbmRleE9mKGRlbGltaXRlcik7CgkJaWYgKGJhc2ljIDwgMCkgewoJCQliYXNpYyA9IDA7CgkJfQoKCQlmb3IgKGogPSAwOyBqIDwgYmFzaWM7ICsraikgewoJCQkvLyBpZiBpdCdzIG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQKCQkJaWYgKGlucHV0LmNoYXJDb2RlQXQoaikgPj0gMHg4MCkgewoJCQkJZXJyb3IoJ25vdC1iYXNpYycpOwoJCQl9CgkJCW91dHB1dC5wdXNoKGlucHV0LmNoYXJDb2RlQXQoaikpOwoJCX0KCgkJLy8gTWFpbiBkZWNvZGluZyBsb29wOiBzdGFydCBqdXN0IGFmdGVyIHRoZSBsYXN0IGRlbGltaXRlciBpZiBhbnkgYmFzaWMgY29kZQoJCS8vIHBvaW50cyB3ZXJlIGNvcGllZDsgc3RhcnQgYXQgdGhlIGJlZ2lubmluZyBvdGhlcndpc2UuCgoJCWZvciAoaW5kZXggPSBiYXNpYyA+IDAgPyBiYXNpYyArIDEgOiAwOyBpbmRleCA8IGlucHV0TGVuZ3RoOyAvKiBubyBmaW5hbCBleHByZXNzaW9uICovKSB7CgoJCQkvLyBgaW5kZXhgIGlzIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXIgdG8gYmUgY29uc3VtZWQuCgkJCS8vIERlY29kZSBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyIGludG8gYGRlbHRhYCwKCQkJLy8gd2hpY2ggZ2V0cyBhZGRlZCB0byBgaWAuIFRoZSBvdmVyZmxvdyBjaGVja2luZyBpcyBlYXNpZXIKCQkJLy8gaWYgd2UgaW5jcmVhc2UgYGlgIGFzIHdlIGdvLCB0aGVuIHN1YnRyYWN0IG9mZiBpdHMgc3RhcnRpbmcKCQkJLy8gdmFsdWUgYXQgdGhlIGVuZCB0byBvYnRhaW4gYGRlbHRhYC4KCQkJZm9yIChvbGRpID0gaSwgdyA9IDEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkgewoKCQkJCWlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkgewoJCQkJCWVycm9yKCdpbnZhbGlkLWlucHV0Jyk7CgkJCQl9CgoJCQkJZGlnaXQgPSBiYXNpY1RvRGlnaXQoaW5wdXQuY2hhckNvZGVBdChpbmRleCsrKSk7CgoJCQkJaWYgKGRpZ2l0ID49IGJhc2UgfHwgZGlnaXQgPiBmbG9vcigobWF4SW50IC0gaSkgLyB3KSkgewoJCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQkJfQoKCQkJCWkgKz0gZGlnaXQgKiB3OwoJCQkJdCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7CgoJCQkJaWYgKGRpZ2l0IDwgdCkgewoJCQkJCWJyZWFrOwoJCQkJfQoKCQkJCWJhc2VNaW51c1QgPSBiYXNlIC0gdDsKCQkJCWlmICh3ID4gZmxvb3IobWF4SW50IC8gYmFzZU1pbnVzVCkpIHsKCQkJCQllcnJvcignb3ZlcmZsb3cnKTsKCQkJCX0KCgkJCQl3ICo9IGJhc2VNaW51c1Q7CgoJCQl9CgoJCQlvdXQgPSBvdXRwdXQubGVuZ3RoICsgMTsKCQkJYmlhcyA9IGFkYXB0KGkgLSBvbGRpLCBvdXQsIG9sZGkgPT0gMCk7CgoJCQkvLyBgaWAgd2FzIHN1cHBvc2VkIHRvIHdyYXAgYXJvdW5kIGZyb20gYG91dGAgdG8gYDBgLAoJCQkvLyBpbmNyZW1lbnRpbmcgYG5gIGVhY2ggdGltZSwgc28gd2UnbGwgZml4IHRoYXQgbm93OgoJCQlpZiAoZmxvb3IoaSAvIG91dCkgPiBtYXhJbnQgLSBuKSB7CgkJCQllcnJvcignb3ZlcmZsb3cnKTsKCQkJfQoKCQkJbiArPSBmbG9vcihpIC8gb3V0KTsKCQkJaSAlPSBvdXQ7CgoJCQkvLyBJbnNlcnQgYG5gIGF0IHBvc2l0aW9uIGBpYCBvZiB0aGUgb3V0cHV0CgkJCW91dHB1dC5zcGxpY2UoaSsrLCAwLCBuKTsKCgkJfQoKCQlyZXR1cm4gdWNzMmVuY29kZShvdXRwdXQpOwoJfQoKCS8qKgoJICogQ29udmVydHMgYSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzIChlLmcuIGEgZG9tYWluIG5hbWUgbGFiZWwpIHRvIGEKCSAqIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuCgkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy4KCSAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy4KCSAqLwoJZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7CgkJdmFyIG4sCgkJICAgIGRlbHRhLAoJCSAgICBoYW5kbGVkQ1BDb3VudCwKCQkgICAgYmFzaWNMZW5ndGgsCgkJICAgIGJpYXMsCgkJICAgIGosCgkJICAgIG0sCgkJICAgIHEsCgkJICAgIGssCgkJICAgIHQsCgkJICAgIGN1cnJlbnRWYWx1ZSwKCQkgICAgb3V0cHV0ID0gW10sCgkJICAgIC8qKiBgaW5wdXRMZW5ndGhgIHdpbGwgaG9sZCB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIGluIGBpbnB1dGAuICovCgkJICAgIGlucHV0TGVuZ3RoLAoJCSAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi8KCQkgICAgaGFuZGxlZENQQ291bnRQbHVzT25lLAoJCSAgICBiYXNlTWludXNULAoJCSAgICBxTWludXNUOwoKCQkvLyBDb252ZXJ0IHRoZSBpbnB1dCBpbiBVQ1MtMiB0byBVbmljb2RlCgkJaW5wdXQgPSB1Y3MyZGVjb2RlKGlucHV0KTsKCgkJLy8gQ2FjaGUgdGhlIGxlbmd0aAoJCWlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoOwoKCQkvLyBJbml0aWFsaXplIHRoZSBzdGF0ZQoJCW4gPSBpbml0aWFsTjsKCQlkZWx0YSA9IDA7CgkJYmlhcyA9IGluaXRpYWxCaWFzOwoKCQkvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzCgkJZm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHsKCQkJY3VycmVudFZhbHVlID0gaW5wdXRbal07CgkJCWlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7CgkJCQlvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoY3VycmVudFZhbHVlKSk7CgkJCX0KCQl9CgoJCWhhbmRsZWRDUENvdW50ID0gYmFzaWNMZW5ndGggPSBvdXRwdXQubGVuZ3RoOwoKCQkvLyBgaGFuZGxlZENQQ291bnRgIGlzIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgdGhhdCBoYXZlIGJlZW4gaGFuZGxlZDsKCQkvLyBgYmFzaWNMZW5ndGhgIGlzIHRoZSBudW1iZXIgb2YgYmFzaWMgY29kZSBwb2ludHMuCgoJCS8vIEZpbmlzaCB0aGUgYmFzaWMgc3RyaW5nIC0gaWYgaXQgaXMgbm90IGVtcHR5IC0gd2l0aCBhIGRlbGltaXRlcgoJCWlmIChiYXNpY0xlbmd0aCkgewoJCQlvdXRwdXQucHVzaChkZWxpbWl0ZXIpOwoJCX0KCgkJLy8gTWFpbiBlbmNvZGluZyBsb29wOgoJCXdoaWxlIChoYW5kbGVkQ1BDb3VudCA8IGlucHV0TGVuZ3RoKSB7CgoJCQkvLyBBbGwgbm9uLWJhc2ljIGNvZGUgcG9pbnRzIDwgbiBoYXZlIGJlZW4gaGFuZGxlZCBhbHJlYWR5LiBGaW5kIHRoZSBuZXh0CgkJCS8vIGxhcmdlciBvbmU6CgkJCWZvciAobSA9IG1heEludCwgaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7CgkJCQljdXJyZW50VmFsdWUgPSBpbnB1dFtqXTsKCQkJCWlmIChjdXJyZW50VmFsdWUgPj0gbiAmJiBjdXJyZW50VmFsdWUgPCBtKSB7CgkJCQkJbSA9IGN1cnJlbnRWYWx1ZTsKCQkJCX0KCQkJfQoKCQkJLy8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LAoJCQkvLyBidXQgZ3VhcmQgYWdhaW5zdCBvdmVyZmxvdwoJCQloYW5kbGVkQ1BDb3VudFBsdXNPbmUgPSBoYW5kbGVkQ1BDb3VudCArIDE7CgkJCWlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7CgkJCQllcnJvcignb3ZlcmZsb3cnKTsKCQkJfQoKCQkJZGVsdGEgKz0gKG0gLSBuKSAqIGhhbmRsZWRDUENvdW50UGx1c09uZTsKCQkJbiA9IG07CgoJCQlmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikgewoJCQkJY3VycmVudFZhbHVlID0gaW5wdXRbal07CgoJCQkJaWYgKGN1cnJlbnRWYWx1ZSA8IG4gJiYgKytkZWx0YSA+IG1heEludCkgewoJCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQkJfQoKCQkJCWlmIChjdXJyZW50VmFsdWUgPT0gbikgewoJCQkJCS8vIFJlcHJlc2VudCBkZWx0YSBhcyBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyCgkJCQkJZm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkgewoJCQkJCQl0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTsKCQkJCQkJaWYgKHEgPCB0KSB7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCQlxTWludXNUID0gcSAtIHQ7CgkJCQkJCWJhc2VNaW51c1QgPSBiYXNlIC0gdDsKCQkJCQkJb3V0cHV0LnB1c2goCgkJCQkJCQlzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHQgKyBxTWludXNUICUgYmFzZU1pbnVzVCwgMCkpCgkJCQkJCSk7CgkJCQkJCXEgPSBmbG9vcihxTWludXNUIC8gYmFzZU1pbnVzVCk7CgkJCQkJfQoKCQkJCQlvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHEsIDApKSk7CgkJCQkJYmlhcyA9IGFkYXB0KGRlbHRhLCBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsIGhhbmRsZWRDUENvdW50ID09IGJhc2ljTGVuZ3RoKTsKCQkJCQlkZWx0YSA9IDA7CgkJCQkJKytoYW5kbGVkQ1BDb3VudDsKCQkJCX0KCQkJfQoKCQkJKytkZWx0YTsKCQkJKytuOwoKCQl9CgkJcmV0dXJuIG91dHB1dC5qb2luKCcnKTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MKCSAqIHRvIFVuaWNvZGUuIE9ubHkgdGhlIFB1bnljb2RlZCBwYXJ0cyBvZiB0aGUgaW5wdXQgd2lsbCBiZSBjb252ZXJ0ZWQsIGkuZS4KCSAqIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IG9uIGEgc3RyaW5nIHRoYXQgaGFzIGFscmVhZHkgYmVlbgoJICogY29udmVydGVkIHRvIFVuaWNvZGUuCgkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGVkIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG8KCSAqIGNvbnZlcnQgdG8gVW5pY29kZS4KCSAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBVbmljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBQdW55Y29kZQoJICogc3RyaW5nLgoJICovCglmdW5jdGlvbiB0b1VuaWNvZGUoaW5wdXQpIHsKCQlyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHsKCQkJcmV0dXJuIHJlZ2V4UHVueWNvZGUudGVzdChzdHJpbmcpCgkJCQk/IGRlY29kZShzdHJpbmcuc2xpY2UoNCkudG9Mb3dlckNhc2UoKSkKCQkJCTogc3RyaW5nOwoJCX0pOwoJfQoKCS8qKgoJICogQ29udmVydHMgYSBVbmljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzIHRvCgkgKiBQdW55Y29kZS4gT25seSB0aGUgbm9uLUFTQ0lJIHBhcnRzIG9mIHRoZSBkb21haW4gbmFtZSB3aWxsIGJlIGNvbnZlcnRlZCwKCSAqIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0J3MgYWxyZWFkeSBpbgoJICogQVNDSUkuCgkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0byBjb252ZXJ0LCBhcyBhCgkgKiBVbmljb2RlIHN0cmluZy4KCSAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBQdW55Y29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gZG9tYWluIG5hbWUgb3IKCSAqIGVtYWlsIGFkZHJlc3MuCgkgKi8KCWZ1bmN0aW9uIHRvQVNDSUkoaW5wdXQpIHsKCQlyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHsKCQkJcmV0dXJuIHJlZ2V4Tm9uQVNDSUkudGVzdChzdHJpbmcpCgkJCQk/ICd4bi0tJyArIGVuY29kZShzdHJpbmcpCgkJCQk6IHN0cmluZzsKCQl9KTsKCX0KCgkvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCgkvKiogRGVmaW5lIHRoZSBwdWJsaWMgQVBJICovCglwdW55Y29kZSA9IHsKCQkvKioKCQkgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgUHVueWNvZGUuanMgdmVyc2lvbiBudW1iZXIuCgkJICogQG1lbWJlck9mIHB1bnljb2RlCgkJICogQHR5cGUgU3RyaW5nCgkJICovCgkJJ3ZlcnNpb24nOiAnMS4zLjInLAoJCS8qKgoJCSAqIEFuIG9iamVjdCBvZiBtZXRob2RzIHRvIGNvbnZlcnQgZnJvbSBKYXZhU2NyaXB0J3MgaW50ZXJuYWwgY2hhcmFjdGVyCgkJICogcmVwcmVzZW50YXRpb24gKFVDUy0yKSB0byBVbmljb2RlIGNvZGUgcG9pbnRzLCBhbmQgYmFjay4KCQkgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz4KCQkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCQkgKiBAdHlwZSBPYmplY3QKCQkgKi8KCQkndWNzMic6IHsKCQkJJ2RlY29kZSc6IHVjczJkZWNvZGUsCgkJCSdlbmNvZGUnOiB1Y3MyZW5jb2RlCgkJfSwKCQknZGVjb2RlJzogZGVjb2RlLAoJCSdlbmNvZGUnOiBlbmNvZGUsCgkJJ3RvQVNDSUknOiB0b0FTQ0lJLAoJCSd0b1VuaWNvZGUnOiB0b1VuaWNvZGUKCX07CgoJLyoqIEV4cG9zZSBgcHVueWNvZGVgICovCgkvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzLCBsaWtlIHIuanMsIGNoZWNrIGZvciBzcGVjaWZpYyBjb25kaXRpb24gcGF0dGVybnMKCS8vIGxpa2UgdGhlIGZvbGxvd2luZzoKCWlmICgKCQl0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYKCQl0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJgoJCWRlZmluZS5hbWQKCSkgewoJCWRlZmluZSgncHVueWNvZGUnLCBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHB1bnljb2RlOwoJCX0pOwoJfSBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7CgkJaWYgKG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzKSB7CgkJCS8vIGluIE5vZGUuanMsIGlvLmpzLCBvciBSaW5nb0pTIHYwLjguMCsKCQkJZnJlZU1vZHVsZS5leHBvcnRzID0gcHVueWNvZGU7CgkJfSBlbHNlIHsKCQkJLy8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC0KCQkJZm9yIChrZXkgaW4gcHVueWNvZGUpIHsKCQkJCXB1bnljb2RlLmhhc093blByb3BlcnR5KGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSBwdW55Y29kZVtrZXldKTsKCQkJfQoJCX0KCX0gZWxzZSB7CgkJLy8gaW4gUmhpbm8gb3IgYSB3ZWIgYnJvd3NlcgoJCXJvb3QucHVueWNvZGUgPSBwdW55Y29kZTsKCX0KCn0odGhpcykpOwoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gYWN0aXZhdGU7Cgp2YXIgX0h5cGVydHlEaXNjb3ZlcnkgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0h5cGVydHlEaXNjb3ZlcnknKTsKCnZhciBfSHlwZXJ0eURpc2NvdmVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9IeXBlcnR5RGlzY292ZXJ5KTsKCnZhciBfSWRlbnRpdHlNYW5hZ2VyID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9JZGVudGl0eU1hbmFnZXInKTsKCnZhciBfSWRlbnRpdHlNYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0lkZW50aXR5TWFuYWdlcik7Cgp2YXIgX3VyaWpzID0gcmVxdWlyZSgndXJpanMnKTsKCnZhciBfdXJpanMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXJpanMpOwoKdmFyIF9TeW5jaGVyID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyJyk7Cgp2YXIgX0dyb3VwQ2hhdCA9IHJlcXVpcmUoJy4vR3JvdXBDaGF0Jyk7Cgp2YXIgX0dyb3VwQ2hhdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Hcm91cENoYXQpOwoKdmFyIF9ub3RpZmljYXRpb25zVHJpZ2dlciA9IHJlcXVpcmUoJy4uL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9ucy10cmlnZ2VyJyk7Cgp2YXIgX25vdGlmaWNhdGlvbnNUcmlnZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vdGlmaWNhdGlvbnNUcmlnZ2VyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBDb21tdW5pY2F0aW9uID0gZnVuY3Rpb24gQ29tbXVuaWNhdGlvbihuYW1lLCBwYXJ0aWNpcGFudHMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb21tdW5pY2F0aW9uKTsKCiAgICB0aGlzLnN0YXJ0aW5nVGltZSA9IERhdGUubm93KCk7CiAgICB0aGlzLmxhc3RNb2RpZmllZCA9IERhdGUubm93KCk7CiAgICB0aGlzLnN0YXR1cyA9ICJwZW5kaW5nIjsKICAgIHRoaXMucmVzb3VyY2VzID0gW107CiAgICB0aGlzLmNoaWxkcmVuID0gW107CiAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgdGhpcy5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHM7Cn07Cgp2YXIgR3JvdXBDaGF0SHlwZXJ0eSA9IHsKICAgIF9nZXRIeUZvcjogZnVuY3Rpb24gX2dldEh5Rm9yKHBhcnRpY2lwYW50cykgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwYXJ0aWNpcGFudHMubWFwKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5oeXBlcnR5RGlzY292ZXJ5U2VydmljZS5kaXNjb3Zlckh5cGVydGllc1BlclVzZXIocC5lbWFpbCwgcC5kb21haW4pLnRoZW4oZnVuY3Rpb24gKGh5cGVydGllcykgewogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGh5cGVydGllcykubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBrZXk6IGtleSwgZGVzY3JpcHRvcjogaHlwZXJ0aWVzW2tleV0uZGVzY3JpcHRvciwgbGFzdE1vZGlmaWVkOiBoeXBlcnRpZXNba2V5XS5sYXN0TW9kaWZpZWQgfTsKICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZGVzYykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXNjLmRlc2NyaXB0b3IuZW5kc1dpdGgoJ0dyb3VwQ2hhdCcpOwogICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShhLmxhc3RNb2RpZmllZCkgPCBuZXcgRGF0ZShiLmxhc3RNb2RpZmllZCkgPyAxIDogLTE7CiAgICAgICAgICAgICAgICB9KS5zaGlmdCgpLmtleTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkpOwogICAgfSwKICAgIF9jcmVhdGVTeW5jaGVyOiBmdW5jdGlvbiBfY3JlYXRlU3luY2hlcihuYW1lLCBoeXBlcnRpZXMpIHsKICAgICAgICByZXR1cm4gdGhpcy5zeW5jaGVyLmNyZWF0ZSh0aGlzLm9iamVjdERlc2NVUkwsIGh5cGVydGllcywgbmV3IENvbW11bmljYXRpb24obmFtZSwgaHlwZXJ0aWVzLmNvbmNhdChbdGhpcy5oeXBlcnR5VVJMXSkpKTsKICAgIH0sCiAgICBfcmVzb2x2ZUlkZW50aXR5OiBmdW5jdGlvbiBfcmVzb2x2ZUlkZW50aXR5KCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICBpZiAoX3RoaXMyLmlkZW50aXR5KSB7CiAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzMi5pZGVudGl0eSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczIuaWRlbnRpdHlNYW5hZ2VyU2VydmljZS5kaXNjb3ZlclVzZXJSZWdpc3RlcmVkKCcuJywgX3RoaXMyLmh5cGVydHlVUkwpLnRoZW4oZnVuY3Rpb24gKGlkZW50aXR5KSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmlkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShpZGVudGl0eSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKG5hbWUsIHBhcnRpY2lwYW50cykgewogICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICB2YXIgaWRlbnRpdHkgPSB1bmRlZmluZWQ7CiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc29sdmVJZGVudGl0eSgpLnRoZW4oZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICAgIHJldHVybiBpZGVudGl0eSA9IGlkOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMzLl9nZXRIeUZvcihwYXJ0aWNpcGFudHMpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGh5cGVydGllcykgewogICAgICAgICAgICByZXR1cm4gX3RoaXMzLl9jcmVhdGVTeW5jaGVyKG5hbWUsIGh5cGVydGllcyk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YU9iamVjdFJlcG9ydGVyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBncm91cCBjaGF0JywgZGF0YU9iamVjdFJlcG9ydGVyKTsKICAgICAgICAgICAgZGF0YU9iamVjdFJlcG9ydGVyLm9uU3Vic2NyaXB0aW9uKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50LmFjY2VwdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuICgwLCBfR3JvdXBDaGF0Mi5kZWZhdWx0KShkYXRhT2JqZWN0UmVwb3J0ZXIsIF90aGlzMy5fcG9zaXRpb24uZGF0YSwgaWRlbnRpdHkpOwogICAgICAgIH0pOwogICAgfSwKICAgIG9uSW52aXRlOiBmdW5jdGlvbiBvbkludml0ZShjYWxsYmFjaykgewogICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICB0aGlzLnN5bmNoZXIub25Ob3RpZmljYXRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGlmIChldmVudC5zY2hlbWEgPT09IF90aGlzNC5sb2NhdGlvbkRlc2NVUkwpIHsKICAgICAgICAgICAgICAgIF90aGlzNC5zeW5jaGVyLnN1YnNjcmliZShfdGhpczQubG9jYXRpb25EZXNjVVJMLCBldmVudC51cmwpLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3QpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczQuX3Bvc2l0aW9uID0gZGF0YU9iamVjdDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnNjaGVtYSA9PT0gX3RoaXM0Lm9iamVjdERlc2NVUkwpIHsKICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGlkZW50aXR5ID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgIF90aGlzNC5fcmVzb2x2ZUlkZW50aXR5KCkudGhlbihmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkZW50aXR5ID0gaWQ7CiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuc3luY2hlci5zdWJzY3JpYmUoX3RoaXM0Lm9iamVjdERlc2NVUkwsIGV2ZW50LnVybCk7CiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YU9iamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRpbmcgZ3JvdXAgY2hhdCBvbiBpbnZpdGUnLCBkYXRhT2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0Lm5vdGlmaWNhdGlvbnMudHJpZ2dlcihbeyBlbWFpbDogaWRlbnRpdHkudXNlcm5hbWUsIGRvbWFpbjogX3RoaXM0LmRvbWFpbiB9XSwgeyB0eXBlOiAnTkVXX0NIQVQnLCBwYXlsb2FkOiB7IG5hbWU6IGRhdGFPYmplY3QuZGF0YS5uYW1lIH0gfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygoMCwgX0dyb3VwQ2hhdDIuZGVmYXVsdCkoZGF0YU9iamVjdCwgX3RoaXM0Ll9wb3NpdGlvbi5kYXRhLCBpZGVudGl0eSkpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQp9OwoKdmFyIGdyb3VwQ2hhdEZhY3RvcnkgPSBmdW5jdGlvbiBncm91cENoYXRGYWN0b3J5KGh5cGVydHlVUkwsIGJ1cywgY29uZmlnKSB7CiAgICB2YXIgc3luY2hlciA9IG5ldyBfU3luY2hlci5TeW5jaGVyKGh5cGVydHlVUkwsIGJ1cywgY29uZmlnKTsKICAgIHZhciBoeXBlcnR5RGlzY292ZXJ5ID0gbmV3IF9IeXBlcnR5RGlzY292ZXJ5Mi5kZWZhdWx0KGh5cGVydHlVUkwsIGJ1cyk7CiAgICB2YXIgaWRlbnRpdHlNYW5hZ2VyID0gbmV3IF9JZGVudGl0eU1hbmFnZXIyLmRlZmF1bHQoaHlwZXJ0eVVSTCwgY29uZmlnLnJ1bnRpbWVVUkwsIGJ1cyk7CiAgICB2YXIgdXJpID0gbmV3IF91cmlqczIuZGVmYXVsdChoeXBlcnR5VVJMKTsKICAgIHZhciBub3RpZmljYXRpb25zID0gKDAsIF9ub3RpZmljYXRpb25zVHJpZ2dlcjIuZGVmYXVsdCkodXJpLmhvc3RuYW1lKCksIHN5bmNoZXIsIGh5cGVydHlEaXNjb3ZlcnkpOwoKICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoR3JvdXBDaGF0SHlwZXJ0eSksIHsKICAgICAgICAnX3Bvc2l0aW9uJzogeyBkYXRhOiB7IHZhbHVlczoge30gfSB9LAogICAgICAgICdzeW5jaGVyJzogc3luY2hlciwKICAgICAgICAnaHlwZXJ0eURpc2NvdmVyeVNlcnZpY2UnOiBoeXBlcnR5RGlzY292ZXJ5LAogICAgICAgICdpZGVudGl0eU1hbmFnZXJTZXJ2aWNlJzogaWRlbnRpdHlNYW5hZ2VyLAogICAgICAgICdvYmplY3REZXNjVVJMJzogJ2h5cGVydHktY2F0YWxvZ3VlOi8vJyArIHVyaS5ob3N0bmFtZSgpICsgJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hcy9Db21tdW5pY2F0aW9uJywKICAgICAgICAnbG9jYXRpb25EZXNjVVJMJzogJ2h5cGVydHktY2F0YWxvZ3VlOi8vJyArIHVyaS5ob3N0bmFtZSgpICsgJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hcy9Db250ZXh0RGF0YVNjaGVtYScsCiAgICAgICAgJ2h5cGVydHlVUkwnOiBoeXBlcnR5VVJMLAogICAgICAgICdub3RpZmljYXRpb25zJzogbm90aWZpY2F0aW9ucywKICAgICAgICBkb21haW46IHVyaS5ob3N0bmFtZSgpCiAgICB9KTsKfTsKCmZ1bmN0aW9uIGFjdGl2YXRlKGh5cGVydHlVUkwsIGJ1cywgY29uZmlnKSB7CiAgICByZXR1cm4gewogICAgICAgIG5hbWU6ICdHcm91cENoYXQnLAogICAgICAgIGluc3RhbmNlOiBncm91cENoYXRGYWN0b3J5KGh5cGVydHlVUkwsIGJ1cywgY29uZmlnKQogICAgfTsKfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi9ub3RpZmljYXRpb25zL25vdGlmaWNhdGlvbnMtdHJpZ2dlciI6MTEsIi4vR3JvdXBDaGF0Ijo5LCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0h5cGVydHlEaXNjb3ZlcnkiOjEsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSWRlbnRpdHlNYW5hZ2VyIjoyLCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXIiOjMsInVyaWpzIjo2fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwoKZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGRhdGFPYmplY3QsIHBvc2l0aW9uLCBpZGVudGl0eSkgewogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShHcm91cENoYXQpLCB7CiAgICAgICAgX2RhdGFPYmplY3Q6IGRhdGFPYmplY3QsCiAgICAgICAgbmFtZTogZGF0YU9iamVjdC5kYXRhLm5hbWUsCiAgICAgICAgc3RhcnRpbmdUaW1lOiBkYXRhT2JqZWN0LmRhdGEuc3RhcnRpbmdUaW1lLAogICAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sCiAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhT2JqZWN0LmRhdGEucGFydGljaXBhbnRzLAogICAgICAgIGlkZW50aXR5OiBpZGVudGl0eQogICAgfSk7Cn07Cgp2YXIgX0dyb3VwQ2hhdE1lc3NhZ2UgPSByZXF1aXJlKCcuL0dyb3VwQ2hhdE1lc3NhZ2UnKTsKCnZhciBfR3JvdXBDaGF0TWVzc2FnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Hcm91cENoYXRNZXNzYWdlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgR3JvdXBDaGF0ID0gewogICAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIHNlbmRNZXNzYWdlKG1lc3NhZ2UsIGRpc3RhbmNlKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFPYmplY3QuYWRkQ2hpbGQoJ2NoYXRtZXNzYWdlcycsIHsgY2hhdE1lc3NhZ2U6IG1lc3NhZ2UsIGRpc3RhbmNlOiBkaXN0YW5jZSwgcG9zaXRpb246IHRoaXMucG9zaXRpb24sIHN0YXJ0aW5nVGltZTogRGF0ZS5ub3coKSB9KS50aGVuKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnbWVzc2FnZSBzZW5kZWQnLCBjaGlsZCk7CiAgICAgICAgICAgIF90aGlzLm1lc3NhZ2VzLnB1c2goKDAsIF9Hcm91cENoYXRNZXNzYWdlMi5kZWZhdWx0KShjaGlsZCwgdHJ1ZSwgX3RoaXMuaWRlbnRpdHkpKTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLm1lc3NhZ2VzW190aGlzLm1lc3NhZ2VzLmxlbmd0aCAtIDFdOwogICAgICAgIH0pOwogICAgfSwKICAgIG9uTWVzc2FnZTogZnVuY3Rpb24gb25NZXNzYWdlKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgIHRoaXMuX2RhdGFPYmplY3Qub25BZGRDaGlsZChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ21lc3NhZ2UgcmVjZWl2ZWQnLCBjaGlsZCk7CiAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBjaGlsZC5kYXRhID8gY2hpbGQuZGF0YSA6IGNoaWxkLnZhbHVlOwoKICAgICAgICAgICAgaWYgKGNoaWxkRGF0YS5kaXN0YW5jZSAmJiBfdGhpczIuX2Rpc3RhbmNlKF90aGlzMi5fbWFwUG9zaXRpb24oX3RoaXMyLnBvc2l0aW9uLnZhbHVlcyksIF90aGlzMi5fbWFwUG9zaXRpb24oY2hpbGREYXRhLnBvc2l0aW9uLnZhbHVlcyksICdLJykgPiBjaGlsZERhdGEuZGlzdGFuY2UpIHJldHVybjsKICAgICAgICAgICAgX3RoaXMyLm1lc3NhZ2VzLnB1c2goKDAsIF9Hcm91cENoYXRNZXNzYWdlMi5kZWZhdWx0KShjaGlsZCwgZmFsc2UsIGNoaWxkLmlkZW50aXR5LnVzZXJQcm9maWxlKSk7CiAgICAgICAgICAgIGNhbGxiYWNrKF90aGlzMi5tZXNzYWdlc1tfdGhpczIubWVzc2FnZXMubGVuZ3RoIC0gMV0pOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldENvbnRleHQ6IGZ1bmN0aW9uIGdldENvbnRleHQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXNbdGhpcy5tZXNzYWdlcy5sZW5ndGggLSAxXSA/IHRoaXMubWVzc2FnZXNbdGhpcy5tZXNzYWdlcy5sZW5ndGggLSAxXS50ZXh0IDogJyc7CiAgICB9LAogICAgX21hcFBvc2l0aW9uOiBmdW5jdGlvbiBfbWFwUG9zaXRpb24odmFsdWVzKSB7CiAgICAgICAgdmFyIHBvc2l0aW9uID0ge307CgogICAgICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gcG9zaXRpb25bdmFsdWUubmFtZV0gPSB2YWx1ZS52YWx1ZTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcG9zaXRpb247CiAgICB9LAogICAgX2Rpc3RhbmNlOiBmdW5jdGlvbiBfZGlzdGFuY2Uob3JpZ2luLCBkZXN0aW5hdGlvbiwgdW5pdCkgewogICAgICAgIHZhciByYWRsYXQxID0gTWF0aC5QSSAqIG9yaWdpbi5sYXRpdHVkZSAvIDE4MDsKICAgICAgICB2YXIgcmFkbGF0MiA9IE1hdGguUEkgKiBkZXN0aW5hdGlvbi5sYXRpdHVkZSAvIDE4MDsKICAgICAgICB2YXIgdGhldGEgPSBvcmlnaW4ubG9uZ2l0dWRlIC0gZGVzdGluYXRpb24ubG9uZ2l0dWRlOwogICAgICAgIHZhciByYWR0aGV0YSA9IE1hdGguUEkgKiB0aGV0YSAvIDE4MDsKICAgICAgICB2YXIgZGlzdCA9IE1hdGguc2luKHJhZGxhdDEpICogTWF0aC5zaW4ocmFkbGF0MikgKyBNYXRoLmNvcyhyYWRsYXQxKSAqIE1hdGguY29zKHJhZGxhdDIpICogTWF0aC5jb3MocmFkdGhldGEpOwogICAgICAgIGRpc3QgPSBNYXRoLmFjb3MoZGlzdCk7CiAgICAgICAgZGlzdCA9IGRpc3QgKiAxODAgLyBNYXRoLlBJOwogICAgICAgIGRpc3QgPSBkaXN0ICogNjAgKiAxLjE1MTU7CiAgICAgICAgaWYgKHVuaXQgPT0gIksiKSB7CiAgICAgICAgICAgIGRpc3QgPSBkaXN0ICogMS42MDkzNDQ7CiAgICAgICAgfQogICAgICAgIGlmICh1bml0ID09ICJOIikgewogICAgICAgICAgICBkaXN0ID0gZGlzdCAqIDAuODY4NDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGRpc3Q7CiAgICB9Cn07Cgptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL0dyb3VwQ2hhdE1lc3NhZ2UiOjEwfV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQp9KTsKCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChkYXRhT2JqZWN0Q2hpbGQsIGlzTWUsIGlkZW50aXR5KSB7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEdyb3VwQ2hhdE1lc3NhZ2UpLCB7CiAgICAgICAgX2RhdGFPYmplY3RDaGlsZDogZGF0YU9iamVjdENoaWxkLAogICAgICAgIGlzTWU6IGlzTWUsCiAgICAgICAgdGV4dDogZGF0YU9iamVjdENoaWxkLmRhdGEgPyBkYXRhT2JqZWN0Q2hpbGQuZGF0YS5jaGF0TWVzc2FnZSA6IGRhdGFPYmplY3RDaGlsZC52YWx1ZS5jaGF0TWVzc2FnZSwKICAgICAgICBzdGFydGluZ1RpbWU6IGRhdGFPYmplY3RDaGlsZC5kYXRhID8gZGF0YU9iamVjdENoaWxkLmRhdGEuc3RhcnRpbmdUaW1lIDogZGF0YU9iamVjdENoaWxkLnZhbHVlLnN0YXJ0aW5nVGltZSwKICAgICAgICBpZGVudGl0eTogaWRlbnRpdHkKICAgIH0pOwp9OwoKdmFyIEdyb3VwQ2hhdE1lc3NhZ2UgPSB7CiAgICBlbGFwc2VkTWludXRlczogZnVuY3Rpb24gZWxhcHNlZE1pbnV0ZXMoKSB7CiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKERhdGUubm93KCkgLSB0aGlzLnN0YXJ0aW5nVGltZSkgJSA4NjQwMDAwMCAlIDM2MDAwMDAgLyA2MDAwMCk7CiAgICB9Cn07Cgptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7CnZhciBOb3RpZmljYXRpb25zVHJpZ2dlck9iamVjdCA9IHsKICAgIF9nZXRIeUZvcjogZnVuY3Rpb24gX2dldEh5Rm9yKGlkZW50aXRpZXMpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaWRlbnRpdGllcy5tYXAoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9kaXNjb3ZlcnlTZXJ2aWNlLmRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcihwLmVtYWlsLCBwLmRvbWFpbikudGhlbihmdW5jdGlvbiAoaHlwZXJ0aWVzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoaHlwZXJ0aWVzKS5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGtleToga2V5LCBkZXNjcmlwdG9yOiBoeXBlcnRpZXNba2V5XS5kZXNjcmlwdG9yLCBsYXN0TW9kaWZpZWQ6IGh5cGVydGllc1trZXldLmxhc3RNb2RpZmllZCB9OwogICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChkZXNjKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2MuZGVzY3JpcHRvci5lbmRzV2l0aCgnTm90aWZpY2F0aW9uT2JzZXJ2ZXInKTsKICAgICAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYS5sYXN0TW9kaWZpZWQpIDwgbmV3IERhdGUoYi5sYXN0TW9kaWZpZWQpID8gMSA6IC0xOwogICAgICAgICAgICAgICAgfSkuc2hpZnQoKS5rZXk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pKTsKICAgIH0sCiAgICB0cmlnZ2VyOiBmdW5jdGlvbiB0cmlnZ2VyKHJlY2lwaWVudHMsIG5vdGlmaWNhdGlvbikgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SHlGb3IocmVjaXBpZW50cykudGhlbihmdW5jdGlvbiAoaHlwZXJ0eVVSTHMpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5fc3luY2hlci5jcmVhdGUoX3RoaXMyLl9vYmplY3REZXNjVVJMLCBoeXBlcnR5VVJMcywge30pLnRoZW4oZnVuY3Rpb24gKHJlcG9ydGVyKSB7CiAgICAgICAgICAgICAgICByZXBvcnRlci5vblN1YnNjcmlwdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQuYWNjZXB0KCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXBvcnRlci5hZGRDaGlsZCgnY2hhdG1lc3NhZ2VzJywgbm90aWZpY2F0aW9uKS50aGVuKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbm90aWZpY2F0aW9uIHNlbmRlZCcsIG5vdGlmaWNhdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KfTsKCnZhciBOb3RpZmljYXRpb25zVHJpZ2dlciA9IGZ1bmN0aW9uIE5vdGlmaWNhdGlvbnNUcmlnZ2VyKGRvbWFpbiwgc3luY2hlciwgZGlzY292ZXJ5U2VydmljZSkgewogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oewogICAgICAgIF9zeW5jaGVyOiBzeW5jaGVyLAoKICAgICAgICBfZGlzY292ZXJ5U2VydmljZTogZGlzY292ZXJ5U2VydmljZSwKCiAgICAgICAgX29iamVjdERlc2NVUkw6ICdoeXBlcnR5LWNhdGFsb2d1ZTovLycgKyBkb21haW4gKyAnLy53ZWxsLWtub3duL2RhdGFzY2hlbWFzL0NvbW11bmljYXRpb24nCiAgICB9LCBOb3RpZmljYXRpb25zVHJpZ2dlck9iamVjdCk7Cn07CgpleHBvcnRzLmRlZmF1bHQgPSBOb3RpZmljYXRpb25zVHJpZ2dlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XX0se30sWzhdKSg4KQp9KTs=",
      "sourceCodeClassname": "GroupChat",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10005,
    "version": "0.1",
    "description": "Description of GroupChat",
    "objectName": "GroupChat",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "hypertyType": []
  },
  "RoomUIObserver": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBEaXNjb3ZlcnkuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNSBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5EaXNjb3Zlcnk9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGE9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJmEpcmV0dXJuIGEocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLHUsZixsPWUmYy5GLGQ9ZSZjLkcscD1lJmMuUyx2PWUmYy5QLCQ9ZSZjLkIseT1lJmMuVyxoPWQ/bzpvW3RdfHwob1t0XT17fSksYj1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGEgaW4gcil1PSFsJiZiJiZhIGluIGIsdSYmYSBpbiBofHwoZj11P2JbYV06clthXSxoW2FdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW2FdP3JbYV06JCYmdT9pKGYsbik6eSYmYlthXT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTp2JiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6Zix2JiYoKGhbc118fChoW3NdPXt9KSlbYV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksYT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgZixsLGQscD1hKGUpLHY9bihyLHUsdD8yOjEpLCQ9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihmPWMoZS5sZW5ndGgpO2Y+JDskKyspdD92KHMobD1lWyRdKVswXSxsWzFdKTp2KGVbJF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEobD1kLm5leHQoKSkuZG9uZTspbyhkLHYsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksYT1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSx2PSJAQGl0ZXJhdG9yIiwkPSJrZXlzIix5PSJ2YWx1ZXMiLGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe3Uocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBVKXJldHVybiBVW2VdO3N3aXRjaChlKXtjYXNlICQ6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT15LE09ITEsVT1lLnByb3RvdHlwZSxQPVVbZF18fFVbdl18fG0mJlVbbV0sUz1QfHxfKG0pO2lmKFApe3ZhciBFPWwoUy5jYWxsKG5ldyBlKSk7ZihFLGssITApLCFuJiZjKFUsdikmJnMoRSxkLGgpLE8mJlAubmFtZSE9PXkmJihNPSEwLFM9ZnVuY3Rpb24oKXtyZXR1cm4gUC5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFwJiYhTSYmVVtkXXx8cyhVLGQsUyksYVt0XT1TLGFba109aCxtKWlmKGo9e3ZhbHVlczpPP1M6Xyh5KSxrZXlzOmc/UzpfKCQpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6U30seClmb3IodyBpbiBqKXcgaW4gVXx8aShVLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsYT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGEpe3ZhciBwPTEsdj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGEoZCkub2JzZXJ2ZSh2LHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe3YuZGF0YT1wPS1wfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksYT1uKHIpLHU9Yy5sZW5ndGg7cmV0dXJuIDA+YXx8YT49dT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQoYSksNTUyOTY+aXx8aT41NjMxOXx8YSsxPT09dXx8KHM9Yy5jaGFyQ29kZUF0KGErMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQoYSk6aTplP2Muc2xpY2UoYSxhKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksYT1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxkPWYuc2V0SW1tZWRpYXRlLHA9Zi5jbGVhckltbWVkaWF0ZSx2PWYuTWVzc2FnZUNoYW5uZWwsJD0wLHk9e30saD0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrKyRdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKCQpLCR9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OnY/KG89bmV3IHYsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49aCBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXthLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVtoXT1mdW5jdGlvbigpe2EucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLHY9ZSgiLi8kLmZvci1vZiIpLCQ9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksaD1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PWEoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gJChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLCQodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW2hdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxVPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFA9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sUz1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LEU9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLGE9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2EoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVUocikpP2kuY2FsbChyLGMsYSk6YyhyKSk6YShuKX1jYXRjaCh1KXthKHUpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO0wobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxMPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFMKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LFI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLEUodCwhMCkpfSxUPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVUoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKFQsbiwxKSxjKFIsbiwxKSl9Y2F0Y2gobyl7Ui5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLEUociwhMSkpfWNhdGNoKG4pe1IuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhULHQsMSksYyhSLHQsMSkpfWNhdGNoKHIpe1IuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFAoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJkUobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sdSh1LlMrdS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUCh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBQKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IFAodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UyhmdW5jdGlvbigpe3YoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUCh0KSxuPXIucmVqZWN0LG89UyhmdW5jdGlvbigpe3YoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsY1siZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBuPXRoaXM7bi5tZXNzYWdlQnVzPXIsbi5kb21haW49KDAsZi5kaXZpZGVVUkwpKHQpLmRvbWFpbixuLmRpc2NvdmVyeVVSTD10fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ZSxzZWFyY2g6ImRhdGFPYmplY3RQZXJVUkwifX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihyKXt2YXIgbj1yLmJvZHkudmFsdWU7bj9lKG4pOnQoIkRhdGFPYmplY3Qgbm90IGZvdW5kIil9KX0pfX0se2tleToiZGVsZXRlRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPXt0eXBlOiJkZWxldGUiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7dmFsdWU6e25hbWU6ZX19fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS5jb2RlOzIwMD09PW4/ZShuKTp0KCJFcnJvciBvbiBkZWxldGluZyBkYXRhT2JqZWN0Iil9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyUmVwb3J0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTplLHNlYXJjaDoiZGF0YU9iamVjdFBlclJlcG9ydGVyIn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlO24/ZShuKTp0KCJObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcyxzPXZvaWQgMCxjPSgwLGYuY29udmVydFRvVXNlclVSTCkoZSk7cz1uP246by5kb21haW47dmFyIGE9e3R5cGU6InJlYWQiLGZyb206by5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrcysiLyIsYm9keTp7cmVzb3VyY2U6e3VzZXI6YyxyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0fSxzZWFyY2g6Imh5cGVydHlSZXNvdXJjZXNEYXRhU2NoZW1lcyJ9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe28ubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZTtuP2Uobik6dCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydHlQZXJVc2VyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89InVzZXI6Ly8iK2Uuc3Vic3RyaW5nKGUuaW5kZXhPZigiQCIpKzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZigiQCIpKSxzPXt0eXBlOiJyZWFkIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK24rIi8iLGJvZHk6e3Jlc291cmNlOm8sc2VhcmNoOiJIeXBlcnR5UGVyVXNlciJ9fTtyZXR1cm4gY29uc29sZS5sb2coIk1lc3NhZ2U6ICIscyxuLG8pLG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24odCxuKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtjb25zb2xlLmxvZygibWVzc2FnZSByZXBseSIscik7dmFyIG89dm9pZCAwLGk9dm9pZCAwLHM9dm9pZCAwLGM9ci5ib2R5LnZhbHVlO2ZvcihvIGluIGMpaWYodm9pZCAwIT09Y1tvXS5sYXN0TW9kaWZpZWQpaWYodm9pZCAwPT09aSlpPW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKSxzPW87ZWxzZXt2YXIgYT1uZXcgRGF0ZShjW29dLmxhc3RNb2RpZmllZCk7aS5nZXRUaW1lKCk8YS5nZXRUaW1lKCkmJihpPWEscz1vKX1jb25zb2xlLmxvZygiTGFzdCBIeXBlcnR5OiAiLHMsaSk7dmFyIHU9cztpZih2b2lkIDA9PT11KXJldHVybiBuKCJVc2VyIEh5cGVydHkgbm90IGZvdW5kIik7dmFyIGY9e2lkOmUsZGVzY3JpcHRvcjpjW3VdLmRlc2NyaXB0b3IsaHlwZXJ0eVVSTDp1fTtjb25zb2xlLmxvZygiPT09PiBoeXBlcnR5RGlzY292ZXJ5IG1lc3NhZ2VCdW5kbGU6ICIsZiksdChmKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6byxzZWFyY2g6Ikh5cGVydHlQZXJVc2VyIn19O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXI6ICIscyxuLG8pLG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtjb25zb2xlLmxvZygiZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyIHJlcGx5IixyKTt2YXIgbj1yLmJvZHkudmFsdWU7cmV0dXJuIG4/dm9pZCBlKG4pOnQoIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKX0pfSl9fSx7a2V5OiJkZWxldGVIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxvPXZvaWQgMDtvPXI/cjpuLmRvbWFpbjt2YXIgcz17dHlwZToiZGVsZXRlIixmcm9tOm4uZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK28rIi8iLGJvZHk6e3ZhbHVlOnt1c2VyOmUsaHlwZXJ0eVVSTDp0fX19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LmNvZGU7bj9lKCJIeXBlcnR5IHN1Y2Nlc3NmdWxseSBkZWxldGVkIik6dCgiRXJyb3Igb24gZGVsZXRpbmcgaHlwZXJ0eSIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsdlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBhKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksdj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1hLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBIeXBlcnR5RGlzY292ZXJ5LmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MTYgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuSHlwZXJ0eURpc2NvdmVyeT1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYyl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgdT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYyYmdSlyZXR1cm4gdShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBhPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBhLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGF9dmFyIGY9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sZixmLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5Ijo3fV0sMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjh9XSwzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjo5fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjEwfV0sNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsaVsiZGVmYXVsdCJdKShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKX0seyIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjJ9XSw3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuKG4uSlNPTiYmbi5KU09OLnN0cmluZ2lmeXx8SlNPTi5zdHJpbmdpZnkpLmFwcGx5KEpTT04sYXJndW1lbnRzKX19LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2fV0sODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6Mzh9XSw5OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo2Mn1dLDEwOltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjoxNiwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6NjMsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjY0LCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjY1LCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjY2fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwxMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwxMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0IjozMX1dLDE0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MTUsIi4vJC53a3MiOjU5fV0sMTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwxNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDE3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjExfV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjIyfV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmN0eCIpLHM9InByb3RvdHlwZSIsYz1mdW5jdGlvbihlLHQscil7dmFyIHUsYSxmLGw9ZSZjLkYsZD1lJmMuRyxwPWUmYy5TLCQ9ZSZjLlAsdj1lJmMuQix5PWUmYy5XLGg9ZD9vOm9bdF18fChvW3RdPXt9KSxiPWQ/bjpwP25bdF06KG5bdF18fHt9KVtzXTtkJiYocj10KTtmb3IodSBpbiByKWE9IWwmJmImJnUgaW4gYixhJiZ1IGluIGh8fChmPWE/Ylt1XTpyW3VdLGhbdV09ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGJbdV0/clt1XTp2JiZhP2koZixuKTp5JiZiW3VdPT1mP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFtzXT1lW3NdLHR9KGYpOiQmJiJmdW5jdGlvbiI9PXR5cGVvZiBmP2koRnVuY3Rpb24uY2FsbCxmKTpmLCQmJigoaFtzXXx8KGhbc109e30pKVt1XT1mKSl9O2MuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsdC5leHBvcnRzPWN9LHsiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmdsb2JhbCI6MjR9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDIzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLG89ZSgiLi8kLml0ZXItY2FsbCIpLGk9ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxzPWUoIi4vJC5hbi1vYmplY3QiKSxjPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBmLGwsZCxwPXUoZSksJD1uKHIsYSx0PzI6MSksdj0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBwKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKGkocCkpZm9yKGY9YyhlLmxlbmd0aCk7Zj52O3YrKyl0PyQocyhsPWVbdl0pWzBdLGxbMV0pOiQoZVt2XSk7ZWxzZSBmb3IoZD1wLmNhbGwoZSk7IShsPWQubmV4dCgpKS5kb25lOylvKGQsJCxsLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1hcnJheS1pdGVyIjozMCwiLi8kLml0ZXItY2FsbCI6MzIsIi4vJC50by1sZW5ndGgiOjU2LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6NjB9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDI1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDI2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjozOCwiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLnByb3BlcnR5LWRlc2MiOjQyfV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6MjR9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sMjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjE1fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fGlbb109PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2goaSl7dmFyIHM9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09cyYmbihzLmNhbGwoZSkpLGl9fX0seyIuLyQuYW4tb2JqZWN0IjoxM31dLDMzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxpPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLHM9e307ZSgiLi8kLmhpZGUiKShzLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShzLHtuZXh0Om8oMSxyKX0pLGkoZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjozOCwiLi8kLmhpZGUiOjI2LCIuLyQucHJvcGVydHktZGVzYyI6NDIsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxvPWUoIi4vJC5leHBvcnQiKSxpPWUoIi4vJC5yZWRlZmluZSIpLHM9ZSgiLi8kLmhpZGUiKSxjPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxhPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksbD1lKCIuLyQiKS5nZXRQcm90byxkPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxwPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLCQ9IkBAaXRlcmF0b3IiLHY9ImtleXMiLHk9InZhbHVlcyIsaD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsYixtLGcseCl7YShyLHQsYik7dmFyIGosdyxfPWZ1bmN0aW9uKGUpe2lmKCFwJiZlIGluIFApcmV0dXJuIFBbZV07c3dpdGNoKGUpe2Nhc2UgdjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSB5OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGs9dCsiIEl0ZXJhdG9yIixPPW09PXksTT0hMSxQPWUucHJvdG90eXBlLFM9UFtkXXx8UFskXXx8bSYmUFttXSxFPVN8fF8obSk7aWYoUyl7dmFyIFU9bChFLmNhbGwobmV3IGUpKTtmKFUsaywhMCksIW4mJmMoUCwkKSYmcyhVLGQsaCksTyYmUy5uYW1lIT09eSYmKE09ITAsRT1mdW5jdGlvbigpe3JldHVybiBTLmNhbGwodGhpcyl9KX1pZihuJiYheHx8IXAmJiFNJiZQW2RdfHxzKFAsZCxFKSx1W3RdPUUsdVtrXT1oLG0paWYoaj17dmFsdWVzOk8/RTpfKHkpLGtleXM6Zz9FOl8odiksZW50cmllczpPP18oImVudHJpZXMiKTpFfSx4KWZvcih3IGluIGopdyBpbiBQfHxpKFAsdyxqW3ddKTtlbHNlIG8oby5QK28uRioocHx8TSksdCxqKTtyZXR1cm4gan19LHsiLi8kIjozOCwiLi8kLmV4cG9ydCI6MjEsIi4vJC5oYXMiOjI1LCIuLyQuaGlkZSI6MjYsIi4vJC5pdGVyLWNyZWF0ZSI6MzMsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQubGlicmFyeSI6MzksIi4vJC5yZWRlZmluZSI6NDQsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aVsicmV0dXJuIl09ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2gocyl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3I9ITB9LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChjKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjU5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sMzc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDM5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQudGFzayIpLnNldCx1PXMuTXV0YXRpb25PYnNlcnZlcnx8cy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGE9cy5wcm9jZXNzLGY9cy5Qcm9taXNlLGw9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYSksZD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IobCYmKGU9YS5kb21haW4pJiYoYS5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtvPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGwpaT1mdW5jdGlvbigpe2EubmV4dFRpY2soZCl9O2Vsc2UgaWYodSl7dmFyIHA9MSwkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShkKS5vYnNlcnZlKCQse2NoYXJhY3RlckRhdGE6ITB9KSxpPWZ1bmN0aW9uKCl7JC5kYXRhPXA9LXB9fWVsc2UgaT1mJiZmLnJlc29sdmU/ZnVuY3Rpb24oKXtmLnJlc29sdmUoKS50aGVuKGQpfTpmdW5jdGlvbigpe2MuY2FsbChzLGQpfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmwmJmEuZG9tYWlufTtvJiYoby5uZXh0PXQpLG58fChuPXQsaSgpKSxvPXR9fSx7Ii4vJC5jb2YiOjE1LCIuLyQuZ2xvYmFsIjoyNCwiLi8kLnRhc2siOjUzfV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxzPXt9O3NbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixzKX19LHsiLi8kLmNvcmUiOjE2LCIuLyQuZXhwb3J0IjoyMSwiLi8kLmZhaWxzIjoyMn1dLDQyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDQzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6NDR9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjoyNn1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxvPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5hbi1vYmplY3QiKSxzPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbyh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixvKXt0cnl7bz1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxvKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGkpe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSx0KSxyP2UuX19wcm90b19fPXQ6byhlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpzfX0seyIuLyQiOjM4LCIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1vYmplY3QiOjMxfV0sNDc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxvPWUoIi4vJCIpLGk9ZSgiLi8kLmRlc2NyaXB0b3JzIikscz1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtpJiZ0JiYhdFtzXSYmby5zZXREZXNjKHQscyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjM4LCIuLyQuY29yZSI6MTYsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC53a3MiOjU5fV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLG89ZSgiLi8kLmhhcyIpLGk9ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIW8oZT1yP2U6ZS5wcm90b3R5cGUsaSkmJm4oZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjM4LCIuLyQuaGFzIjoyNSwiLi8kLndrcyI6NTl9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPSJfX2NvcmUtanNfc2hhcmVkX18iLGk9bltvXXx8KG5bb109e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0seyIuLyQuZ2xvYmFsIjoyNH1dLDUwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLG89ZSgiLi8kLmEtZnVuY3Rpb24iKSxpPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC53a3MiOjU5fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGkscyxjPVN0cmluZyhvKHQpKSx1PW4ociksYT1jLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1hP2U/IiI6dm9pZCAwOihpPWMuY2hhckNvZGVBdCh1KSw1NTI5Nj5pfHxpPjU2MzE5fHx1KzE9PT1hfHwocz1jLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fHM+NTczNDM/ZT9jLmNoYXJBdCh1KTppOmU/Yy5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsocy01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQudG8taW50ZWdlciI6NTR9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYT1lKCIuLyQuZG9tLWNyZWF0ZSIpLGY9ZSgiLi8kLmdsb2JhbCIpLGw9Zi5wcm9jZXNzLGQ9Zi5zZXRJbW1lZGlhdGUscD1mLmNsZWFySW1tZWRpYXRlLCQ9Zi5NZXNzYWdlQ2hhbm5lbCx2PTAseT17fSxoPSJvbnJlYWR5c3RhdGVjaGFuZ2UiLGI9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZih5Lmhhc093blByb3BlcnR5KGUpKXt2YXIgdD15W2VdO2RlbGV0ZSB5W2VdLHQoKX19LG09ZnVuY3Rpb24oZSl7Yi5jYWxsKGUuZGF0YSl9O2QmJnB8fChkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiB5Wysrdl09ZnVuY3Rpb24oKXtjKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgeVtlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikobCk/bj1mdW5jdGlvbihlKXtsLm5leHRUaWNrKHMoYixlLDEpKX06JD8obz1uZXcgJCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9bSxuPXMoaS5wb3N0TWVzc2FnZSxpLDEpKTpmLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtmLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtLCExKSk6bj1oIGluIGEoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYSgic2NyaXB0IikpW2hdPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0seyIuLyQuY29mIjoxNSwiLi8kLmN0eCI6MTcsIi4vJC5kb20tY3JlYXRlIjoyMCwiLi8kLmdsb2JhbCI6MjQsIi4vJC5odG1sIjoyNywiLi8kLmludm9rZSI6Mjh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0Iiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQuaW9iamVjdCI6Mjl9XSw1NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjU0fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6MTh9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsbz1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24rbykudG9TdHJpbmcoMzYpKX19LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksbz1lKCIuLyQudWlkIiksaT1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aSYmaVtlXXx8KGl8fG8pKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuc2hhcmVkIjo0OSwiLi8kLnVpZCI6NTh9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLG89ZSgiLi8kLml0ZXItc3RlcCIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpLHM9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLGkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjoxMiwiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLml0ZXItc3RlcCI6MzYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQudG8taW9iamVjdCI6NTV9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjQxLCIuLyQudG8tb2JqZWN0Ijo1N31dLDYzOltmdW5jdGlvbihlLHQscil7fSx7fV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4sbz1lKCIuLyQiKSxpPWUoIi4vJC5saWJyYXJ5Iikscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQuY3R4IiksdT1lKCIuLyQuY2xhc3NvZiIpLGE9ZSgiLi8kLmV4cG9ydCIpLGY9ZSgiLi8kLmlzLW9iamVjdCIpLGw9ZSgiLi8kLmFuLW9iamVjdCIpLGQ9ZSgiLi8kLmEtZnVuY3Rpb24iKSxwPWUoIi4vJC5zdHJpY3QtbmV3IiksJD1lKCIuLyQuZm9yLW9mIiksdj1lKCIuLyQuc2V0LXByb3RvIikuc2V0LHk9ZSgiLi8kLnNhbWUtdmFsdWUiKSxoPWUoIi4vJC53a3MiKSgic3BlY2llcyIpLGI9ZSgiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiKSxtPWUoIi4vJC5taWNyb3Rhc2siKSxnPSJQcm9taXNlIix4PXMucHJvY2VzcyxqPSJwcm9jZXNzIj09dSh4KSx3PXNbZ10sXz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgdyhmdW5jdGlvbigpe30pO3JldHVybiBlJiYodC5jb25zdHJ1Y3Rvcj1PYmplY3QpLHcucmVzb2x2ZSh0KT09PXR9LGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPW5ldyB3KGUpO3JldHVybiB2KHIsdC5wcm90b3R5cGUpLHJ9dmFyIHI9ITE7dHJ5e2lmKHI9dyYmdy5yZXNvbHZlJiZfKCksdih0LHcpLHQucHJvdG90eXBlPW8uY3JlYXRlKHcucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dH19KSx0LnJlc29sdmUoNSkudGhlbihmdW5jdGlvbigpe30paW5zdGFuY2VvZiB0fHwocj0hMSksciYmZSgiLi8kLmRlc2NyaXB0b3JzIikpe3ZhciBuPSExO3cucmVzb2x2ZShvLnNldERlc2Moe30sInRoZW4iLHtnZXQ6ZnVuY3Rpb24oKXtuPSEwfX0pKSxyPW59fWNhdGNoKGkpe3I9ITF9cmV0dXJuIHJ9KCksTz1mdW5jdGlvbihlLHQpe3JldHVybiBpJiZlPT09dyYmdD09PW4/ITA6eShlLHQpfSxNPWZ1bmN0aW9uKGUpe3ZhciB0PWwoZSlbaF07cmV0dXJuIHZvaWQgMCE9dD90OmV9LFA9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGYoZSkmJiJmdW5jdGlvbiI9PXR5cGVvZih0PWUudGhlbik/dDohMX0sUz1mdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9ZCh0KSx0aGlzLnJlamVjdD1kKHIpfSxFPWZ1bmN0aW9uKGUpe3RyeXtlKCl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fX0sVT1mdW5jdGlvbihlLHQpe2lmKCFlLm4pe2Uubj0hMDt2YXIgcj1lLmM7bShmdW5jdGlvbigpe2Zvcih2YXIgbj1lLnYsbz0xPT1lLnMsaT0wLGM9ZnVuY3Rpb24odCl7dmFyIHIsaSxzPW8/dC5vazp0LmZhaWwsYz10LnJlc29sdmUsdT10LnJlamVjdDt0cnl7cz8ob3x8KGUuaD0hMCkscj1zPT09ITA/bjpzKG4pLHI9PT10LnByb21pc2U/dShUeXBlRXJyb3IoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KGk9UChyKSk/aS5jYWxsKHIsYyx1KTpjKHIpKTp1KG4pfWNhdGNoKGEpe3UoYSl9fTtyLmxlbmd0aD5pOyljKHJbaSsrXSk7ci5sZW5ndGg9MCxlLm49ITEsdCYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0LHIsbz1lLnA7VChvKSYmKGo/eC5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLG4sbyk6KHQ9cy5vbnVuaGFuZGxlZHJlamVjdGlvbik/dCh7cHJvbWlzZTpvLHJlYXNvbjpufSk6KHI9cy5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixuKSksZS5hPXZvaWQgMH0sMSl9KX19LFQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1lLl9kLG49ci5hfHxyLmMsbz0wO2lmKHIuaClyZXR1cm4hMTtmb3IoO24ubGVuZ3RoPm87KWlmKHQ9bltvKytdLHQuZmFpbHx8IVQodC5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sRD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuZHx8KHQuZD0hMCx0PXQucnx8dCx0LnY9ZSx0LnM9Mix0LmE9dC5jLnNsaWNlKCksVSh0LCEwKSl9LEE9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLmQpe3IuZD0hMCxyPXIucnx8cjt0cnl7aWYoci5wPT09ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9UChlKSk/bShmdW5jdGlvbigpe3ZhciBuPXtyOnIsZDohMX07dHJ5e3QuY2FsbChlLGMoQSxuLDEpLGMoRCxuLDEpKX1jYXRjaChvKXtELmNhbGwobixvKX19KTooci52PWUsci5zPTEsVShyLCExKSl9Y2F0Y2gobil7RC5jYWxsKHtyOnIsZDohMX0sbil9fX07a3x8KHc9ZnVuY3Rpb24oZSl7ZChlKTt2YXIgdD10aGlzLl9kPXtwOnAodGhpcyx3LGcpLGM6W10sYTp2b2lkIDAsczowLGQ6ITEsdjp2b2lkIDAsaDohMSxuOiExfTt0cnl7ZShjKEEsdCwxKSxjKEQsdCwxKSl9Y2F0Y2gocil7RC5jYWxsKHQscil9fSxlKCIuLyQucmVkZWZpbmUtYWxsIikody5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgUyhiKHRoaXMsdykpLG49ci5wcm9taXNlLG89dGhpcy5fZDtyZXR1cm4gci5vaz0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOiEwLHIuZmFpbD0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdCxvLmMucHVzaChyKSxvLmEmJm8uYS5wdXNoKHIpLG8ucyYmVShvLCExKSxufSwiY2F0Y2giOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pKSxhKGEuRythLlcrYS5GKiFrLHtQcm9taXNlOnd9KSxlKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSh3LGcpLGUoIi4vJC5zZXQtc3BlY2llcyIpKGcpLG49ZSgiLi8kLmNvcmUiKVtnXSxhKGEuUythLkYqIWssZyx7cmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZWplY3Q7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiooIWt8fF8oITApKSxnLHtyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiB3JiZPKGUuY29uc3RydWN0b3IsdGhpcykpcmV0dXJuIGU7dmFyIHQ9bmV3IFModGhpcykscj10LnJlc29sdmU7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiohKGsmJmUoIi4vJC5pdGVyLWRldGVjdCIpKGZ1bmN0aW9uKGUpe3cuYWxsKGUpWyJjYXRjaCJdKGZ1bmN0aW9uKCl7fSl9KSksZyx7YWxsOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUyh0KSxuPXIucmVzb2x2ZSxpPXIucmVqZWN0LHM9W10sYz1FKGZ1bmN0aW9uKCl7JChlLCExLHMucHVzaCxzKTt2YXIgcj1zLmxlbmd0aCxjPUFycmF5KHIpO3I/by5lYWNoLmNhbGwocyxmdW5jdGlvbihlLG8pe3ZhciBzPSExO3QucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3N8fChzPSEwLGNbb109ZSwtLXJ8fG4oYykpfSxpKX0pOm4oYyl9KTtyZXR1cm4gYyYmaShjLmVycm9yKSxyLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9TSh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZWplY3Qsbz1FKGZ1bmN0aW9uKCl7JChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8mJm4oby5lcnJvciksci5wcm9taXNlfX0pfSx7Ii4vJCI6MzgsIi4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jbGFzc29mIjoxNCwiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mb3Itb2YiOjIzLCIuLyQuZ2xvYmFsIjoyNCwiLi8kLmlzLW9iamVjdCI6MzEsIi4vJC5pdGVyLWRldGVjdCI6MzUsIi4vJC5saWJyYXJ5IjozOSwiLi8kLm1pY3JvdGFzayI6NDAsIi4vJC5yZWRlZmluZS1hbGwiOjQzLCIuLyQuc2FtZS12YWx1ZSI6NDUsIi4vJC5zZXQtcHJvdG8iOjQ2LCIuLyQuc2V0LXNwZWNpZXMiOjQ3LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciI6NTAsIi4vJC5zdHJpY3QtbmV3Ijo1MSwiLi8kLndrcyI6NTl9XSw2NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuc3RyaW5nLWF0IikoITApO2UoIi4vJC5pdGVyLWRlZmluZSIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LHI9dGhpcy5faTtyZXR1cm4gcj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1uKHQsciksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LHsiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLnN0cmluZy1hdCI6NTJ9XSw2NjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpO24uTm9kZUxpc3Q9bi5IVE1MQ29sbGVjdGlvbj1uLkFycmF5fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuL2VzNi5hcnJheS5pdGVyYXRvciI6NjF9XSw2NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCIuL2h5cGVydHktZGlzY292ZXJ5L0h5cGVydHlEaXNjb3ZlcnkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWlbImRlZmF1bHQiXSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vaHlwZXJ0eS1kaXNjb3ZlcnkvSHlwZXJ0eURpc2NvdmVyeSI6Njh9XSw2ODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGM9bihzKSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGE9bih1KSxmPWUoIi4uL3V0aWxzL3V0aWxzIiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG49dGhpcztuLm1lc3NhZ2VCdXM9cixuLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG4uZGlzY292ZXJ5VVJMPXR9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RQZXJOYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ImRhdGFPYmplY3Q6Ly8iK2V9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZS51cmw7bj9lKG4pOnQoIkRhdGFPYmplY3QgbmFtZSBkb2VzIG5vdCBleGlzdCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eVBlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6b319O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZTogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJtZXNzYWdlIHJlcGx5IixyKTt2YXIgbz12b2lkIDAsaT12b2lkIDAscz12b2lkIDAsYz1yLmJvZHkudmFsdWU7Zm9yKG8gaW4gYylpZih2b2lkIDAhPT1jW29dLmxhc3RNb2RpZmllZClpZih2b2lkIDA9PT1pKWk9bmV3IERhdGUoY1tvXS5sYXN0TW9kaWZpZWQpLHM9bztlbHNle3ZhciB1PW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKTtpLmdldFRpbWUoKTx1LmdldFRpbWUoKSYmKGk9dSxzPW8pfWNvbnNvbGUubG9nKCJMYXN0IEh5cGVydHk6ICIscyxpKTt2YXIgYT1zO2lmKHZvaWQgMD09PWEpcmV0dXJuIG4oIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKTt2YXIgZj17aWQ6ZSxkZXNjcmlwdG9yOmNbYV0uZGVzY3JpcHRvcixoeXBlcnR5VVJMOmF9O2NvbnNvbGUubG9nKCI9PT0+IGh5cGVydHlEaXNjb3ZlcnkgbWVzc2FnZUJ1bmRsZTogIixmKSx0KGYpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPSJ1c2VyOi8vIitlLnN1YnN0cmluZyhlLmluZGV4T2YoIkAiKSsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIkAiKSkscz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTpvfX07cmV0dXJuIGNvbnNvbGUubG9nKCJNZXNzYWdlIGRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcjogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIgcmVwbHkiLHIpO3ZhciBuPXIuYm9keS52YWx1ZTtyZXR1cm4gbj92b2lkIGUobik6dCgiVXNlciBIeXBlcnR5IG5vdCBmb3VuZCIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsJFsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiB1KGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gdShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksJD1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD11LHIuZ2V0VXNlckVtYWlsRnJvbVVSTD1hLHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBJZGVudGl0eU1hbmFnZXIuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNiBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5JZGVudGl0eU1hbmFnZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJnUpcmV0dXJuIHUocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgYT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgYS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixhfXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1LGEsZixsPWUmYy5GLHA9ZSZjLkcsZD1lJmMuUywkPWUmYy5QLHY9ZSZjLkIsaD1lJmMuVyx5PXA/bzpvW3RdfHwob1t0XT17fSksYj1wP246ZD9uW3RdOihuW3RdfHx7fSlbc107cCYmKHI9dCk7Zm9yKHUgaW4gcilhPSFsJiZiJiZ1IGluIGIsYSYmdSBpbiB5fHwoZj1hP2JbdV06clt1XSx5W3VdPXAmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW3VdP3JbdV06diYmYT9pKGYsbik6aCYmYlt1XT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTokJiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6ZiwkJiYoKHlbc118fCh5W3NdPXt9KSlbdV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksdT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgZixsLHAsZD11KGUpLCQ9bihyLGEsdD8yOjEpLHY9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKGQpKWZvcihmPWMoZS5sZW5ndGgpO2Y+djt2KyspdD8kKHMobD1lW3ZdKVswXSxsWzFdKTokKGVbdl0pO2Vsc2UgZm9yKHA9ZC5jYWxsKGUpOyEobD1wLm5leHQoKSkuZG9uZTspbyhwLCQsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksdT1lKCIuLyQuaXRlcmF0b3JzIiksYT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8scD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSwkPSJAQGl0ZXJhdG9yIix2PSJrZXlzIixoPSJ2YWx1ZXMiLHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe2Eocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighZCYmZSBpbiBTKXJldHVybiBTW2VdO3N3aXRjaChlKXtjYXNlIHY6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgaDpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT1oLE09ITEsUz1lLnByb3RvdHlwZSxFPVNbcF18fFNbJF18fG0mJlNbbV0sUD1FfHxfKG0pO2lmKEUpe3ZhciBUPWwoUC5jYWxsKG5ldyBlKSk7ZihULGssITApLCFuJiZjKFMsJCkmJnMoVCxwLHkpLE8mJkUubmFtZSE9PWgmJihNPSEwLFA9ZnVuY3Rpb24oKXtyZXR1cm4gRS5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFkJiYhTSYmU1twXXx8cyhTLHAsUCksdVt0XT1QLHVba109eSxtKWlmKGo9e3ZhbHVlczpPP1A6XyhoKSxrZXlzOmc/UDpfKHYpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6UH0seClmb3IodyBpbiBqKXcgaW4gU3x8aShTLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKGR8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsdT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGEpLHA9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPWEuZG9tYWluKSYmKGEuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXthLm5leHRUaWNrKHApfTtlbHNlIGlmKHUpe3ZhciBkPTEsJD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IHUocCkub2JzZXJ2ZSgkLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpeyQuZGF0YT1kPS1kfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihwKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxwKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZhLmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksdT1uKHIpLGE9Yy5sZW5ndGg7cmV0dXJuIDA+dXx8dT49YT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQodSksNTUyOTY+aXx8aT41NjMxOXx8dSsxPT09YXx8KHM9Yy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQodSk6aTplP2Muc2xpY2UodSx1KzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksdT1lKCIuLyQuaHRtbCIpLGE9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxwPWYuc2V0SW1tZWRpYXRlLGQ9Zi5jbGVhckltbWVkaWF0ZSwkPWYuTWVzc2FnZUNoYW5uZWwsdj0wLGg9e30seT0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoaC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9aFtlXTtkZWxldGUgaFtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtwJiZkfHwocD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gaFsrK3ZdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKHYpLHZ9LGQ9ZnVuY3Rpb24oZSl7ZGVsZXRlIGhbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OiQ/KG89bmV3ICQsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49eSBpbiBhKCJzY3JpcHQiKT9mdW5jdGlvbihlKXt1LmFwcGVuZENoaWxkKGEoInNjcmlwdCIpKVt5XT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OnAsY2xlYXI6ZH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLHU9ZSgiLi8kLmNsYXNzb2YiKSxhPWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxwPWUoIi4vJC5hLWZ1bmN0aW9uIiksZD1lKCIuLyQuc3RyaWN0LW5ldyIpLCQ9ZSgiLi8kLmZvci1vZiIpLHY9ZSgiLi8kLnNldC1wcm90byIpLnNldCxoPWUoIi4vJC5zYW1lLXZhbHVlIikseT1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PXUoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gdihyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLHYodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOmgoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW3ldO3JldHVybiB2b2lkIDAhPXQ/dDplfSxTPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LEU9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPXAodCksdGhpcy5yZWplY3Q9cChyKX0sUD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFQ9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLHU9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP3UoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVMocikpP2kuY2FsbChyLGMsdSk6YyhyKSk6dShuKX1jYXRjaChhKXt1KGEpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO1UobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxVPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFVKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFQodCwhMCkpfSxDPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVMoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKEMsbiwxKSxjKEEsbiwxKSl9Y2F0Y2gobyl7QS5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFQociwhMSkpfWNhdGNoKG4pe0EuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe3AoZSk7dmFyIHQ9dGhpcy5fZD17cDpkKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhDLHQsMSksYyhBLHQsMSkpfWNhdGNoKHIpe0EuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IEUoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlQobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksYShhLkcrYS5XK2EuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sYShhLlMrYS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRSh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBFKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IEUodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UChmdW5jdGlvbigpeyQoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgRSh0KSxuPXIucmVqZWN0LG89UChmdW5jdGlvbigpeyQoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksdT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4odSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG89dGhpcztvLm1lc3NhZ2VCdXM9bixvLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG8uaHlwZXJ0eVVSTD10LG8ucnVudGltZVVSTD1yfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwLG89ZT9lOiIuIjtuPXQ/dDpyLmh5cGVydHlVUkw7dmFyIHM9e3R5cGU6InJlYWQiLGZyb206bix0bzpyLnJ1bnRpbWVVUkwrIi9yZWdpc3RyeS8iLGJvZHk6e3Jlc291cmNlOm8sY3JpdGVyaWE6bn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnJlc291cmNlO24/ZShuKTp0KCJObyB1c2VyIHdhcyBub3QgZm91bmQiKX0pfSl9fV0pLGV9KCk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscyI6NjgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6Nn1dLDY4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlKXtpZighZSl0aHJvdyBFcnJvcigiVVJMIGlzIG5lZWRlZCB0byBzcGxpdCIpO3ZhciB0PS8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpLHI9IiQxLCQyLCQzIixuPWUucmVwbGFjZSh0LHIpLnNwbGl0KCIsIik7blswXT09PWUmJihuWzBdPSJodHRwcyIsblsxXT1lKTt2YXIgbz17dHlwZTpuWzBdLGRvbWFpbjpuWzFdLGlkZW50aXR5Om5bMl19O3JldHVybiBvfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIikscj17dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX07cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlKXtyZXR1cm4hKCgwLCRbImRlZmF1bHQiXSkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGU/SlNPTi5wYXJzZSgoMCxwWyJkZWZhdWx0Il0pKGUpKTp2b2lkIDB9ZnVuY3Rpb24gdShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX1mdW5jdGlvbiBhKGUpe3ZhciB0PW8oZSk7cmV0dXJuIHQuaWRlbnRpdHkucmVwbGFjZSgiLyIsIiIpKyJAIit0LmRvbWFpbn1mdW5jdGlvbiBmKGUpe2lmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PW8oZSk7aWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIHUoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBsPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSIpLHA9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLCQ9bihkKTtyLmRpdmlkZVVSTD1vLHIuZGl2aWRlRW1haWw9aSxyLmVtcHR5T2JqZWN0PXMsci5kZWVwQ2xvbmU9YyxyLmdldFVzZXJVUkxGcm9tRW1haWw9dSxyLmdldFVzZXJFbWFpbEZyb21VUkw9YSxyLmNvbnZlcnRUb1VzZXJVUkw9Zn0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiOjEsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6M31dfSx7fSxbNjddKSg2Nyl9KTsKCgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgU3luY2hlci5qcyAKLy8gdmVyc2lvbjogMC4zLjAKLy8gTGFzdCBidWlsZDogVGh1IEp1biAwOSAyMDE2IDEyOjI4OjI0IEdNVCswMTAwIChXRVNUKQoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlN5bmNoZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGEpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJmMpcmV0dXJuIGMocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBsPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGwsbC5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe09iamVjdC5vYnNlcnZlJiYhQXJyYXkub2JzZXJ2ZSYmZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIHI9ZS5nZXROb3RpZmllcixuPSJwZXJmb3JtQ2hhbmdlIixvPSJfb3JpZ2luYWwiLGk9InNwbGljZSIscz17cHVzaDpmdW5jdGlvbiBjKGUpe3ZhciB0PWFyZ3VtZW50cyxzPWNbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnMtdC5sZW5ndGgsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHVuc2hpZnQ6ZnVuY3Rpb24gdShlKXt2YXIgdD1hcmd1bWVudHMscz11W29dLmFwcGx5KHRoaXMsdCk7cmV0dXJuIHIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDowLGFkZGVkQ291bnQ6dC5sZW5ndGgscmVtb3ZlZDpbXX19KSxzfSxwb3A6ZnVuY3Rpb24gbCgpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9bFtvXS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmxlbmd0aCE9PWUmJnIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDp0aGlzLmxlbmd0aCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzaGlmdDpmdW5jdGlvbiBmKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1mW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDowLHJlbW92ZWQ6W3RdfX0sdGhpcyksdH0sc3BsaWNlOmZ1bmN0aW9uIGQoZSx0KXt2YXIgcz1hcmd1bWVudHMsYT1kW29dLmFwcGx5KHRoaXMscyk7cmV0dXJuKGEubGVuZ3RofHxzLmxlbmd0aD4yKSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OmUsYWRkZWRDb3VudDpzLmxlbmd0aC0yLHJlbW92ZWQ6YX19LHRoaXMpLGF9fTtmb3IodmFyIGEgaW4gcylzW2FdW29dPXQucHJvdG90eXBlW2FdLHQucHJvdG90eXBlW2FdPXNbYV07dC5vYnNlcnZlPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUub2JzZXJ2ZSh0LHIsWyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLGldKX0sdC51bm9ic2VydmU9ZS51bm9ic2VydmV9KE9iamVjdCxBcnJheSl9LHt9XSwyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IjoxN31dLDM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIjoxOH1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoxOX1dLDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjoyMH1dLDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjIxfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6MjJ9XSw4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjoyM31dLDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoyNH1dLDEwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjI1fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDEyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxpWyJkZWZhdWx0Il0pKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpfSx7Ii4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSI6NH1dLDEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbz0hMDtvOyl7dmFyIGk9ZSxzPXQsYT1yO289ITEsbnVsbD09PWkmJihpPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIGM9bihpLHMpO2lmKHZvaWQgMCE9PWMpe2lmKCJ2YWx1ZSJpbiBjKXJldHVybiBjLnZhbHVlO3ZhciB1PWMuZ2V0O2lmKHZvaWQgMD09PXUpcmV0dXJuO3JldHVybiB1LmNhbGwoYSl9dmFyIGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGkpO2lmKG51bGw9PT1sKXJldHVybjtlPWwsdD1zLHI9YSxvPSEwLGM9bD12b2lkIDB9fSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjV9XSwxNDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHQpO2UucHJvdG90eXBlPW4odCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihvP28oZSx0KTplLl9fcHJvdG9fXz10KX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjh9XSwxNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsaVsiZGVmYXVsdCJdKSh0KSkmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6dH19LHsiLi4vaGVscGVycy90eXBlb2YiOjE2fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmNvbnN0cnVjdG9yPT09bj8ic3ltYm9sIjp0eXBlb2YgZX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wiOjEwfV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4obi5KU09OJiZuLkpTT04uc3RyaW5naWZ5fHxKU09OLnN0cmluZ2lmeSkuYXBwbHkoSlNPTixhcmd1bWVudHMpfX0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzF9XSwxODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ2V0RGVzYyhlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjo4MX1dLDIxOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiI6ODJ9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6ODN9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LnNldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiOjg0fV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksZSgiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIiksZSgiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIiksZSgiLi4vbW9kdWxlcy9lczYucHJvbWlzZSIpLHQuZXhwb3J0cz1lKCIuLi9tb2R1bGVzLyQuY29yZSIpLlByb21pc2V9LHsiLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vbW9kdWxlcy9lczYucHJvbWlzZSI6ODYsIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6ODcsIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6ODl9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCIpLGUoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5TeW1ib2x9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIjo4OH1dLDI2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6NDl9XSwyOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjMwLCIuLyQud2tzIjo3OH1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoyNn1dLDMzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDM0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjozOH1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDM2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0S2V5cyhlKSxyPW4uZ2V0U3ltYm9scztpZihyKWZvcih2YXIgbyxpPXIoZSkscz1uLmlzRW51bSxhPTA7aS5sZW5ndGg+YTspcy5jYWxsKGUsbz1pW2ErK10pJiZ0LnB1c2gobyk7cmV0dXJuIHR9fSx7Ii4vJCI6NTZ9XSwzNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuY3R4Iikscz0icHJvdG90eXBlIixhPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyx1LGwsZj1lJmEuRixkPWUmYS5HLHA9ZSZhLlMsYj1lJmEuUCxoPWUmYS5CLHk9ZSZhLlcsdj1kP286b1t0XXx8KG9bdF09e30pLF89ZD9uOnA/blt0XTooblt0XXx8e30pW3NdO2QmJihyPXQpO2ZvcihjIGluIHIpdT0hZiYmXyYmYyBpbiBfLHUmJmMgaW4gdnx8KGw9dT9fW2NdOnJbY10sdltjXT1kJiYiZnVuY3Rpb24iIT10eXBlb2YgX1tjXT9yW2NdOmgmJnU/aShsLG4pOnkmJl9bY109PWw/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBlP25ldyBlKHQpOmUodCl9O3JldHVybiB0W3NdPWVbc10sdH0obCk6YiYmImZ1bmN0aW9uIj09dHlwZW9mIGw/aShGdW5jdGlvbi5jYWxsLGwpOmwsYiYmKCh2W3NdfHwodltzXT17fSkpW2NdPWwpKX07YS5GPTEsYS5HPTIsYS5TPTQsYS5QPTgsYS5CPTE2LGEuVz0zMix0LmV4cG9ydHM9YX0seyIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZ2xvYmFsIjo0MX1dLDM4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaCh0KXtyZXR1cm4hMH19fSx7fV0sMzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY3R4Iiksbz1lKCIuLyQuaXRlci1jYWxsIiksaT1lKCIuLyQuaXMtYXJyYXktaXRlciIpLHM9ZSgiLi8kLmFuLW9iamVjdCIpLGE9ZSgiLi8kLnRvLWxlbmd0aCIpLGM9ZSgiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdSl7dmFyIGwsZixkLHA9YyhlKSxiPW4ocix1LHQ/MjoxKSxoPTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHApdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgaXRlcmFibGUhIik7aWYoaShwKSlmb3IobD1hKGUubGVuZ3RoKTtsPmg7aCsrKXQ/YihzKGY9ZVtoXSlbMF0sZlsxXSk6YihlW2hdKTtlbHNlIGZvcihkPXAuY2FsbChlKTshKGY9ZC5uZXh0KCkpLmRvbmU7KW8oZCxiLGYudmFsdWUsdCl9fSx7Ii4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLWFycmF5LWl0ZXIiOjQ3LCIuLyQuaXRlci1jYWxsIjo1MCwiLi8kLnRvLWxlbmd0aCI6NzUsIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIjo3OX1dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKSxvPWUoIi4vJCIpLmdldE5hbWVzLGk9e30udG9TdHJpbmcscz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxhPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaCh0KXtyZXR1cm4gcy5zbGljZSgpfX07dC5leHBvcnRzLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gcyYmIltvYmplY3QgV2luZG93XSI9PWkuY2FsbChlKT9hKGUpOm8obihlKSl9fSx7Ii4vJCI6NTYsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPW4pfSx7fV0sNDI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jYWxsKGUsdCl9fSx7fV0sNDM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIik7dC5leHBvcnRzPWUoIi4vJC5kZXNjcmlwdG9ycyIpP2Z1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxvKDEscikpfTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGVbdF09cixlfX0seyIuLyQiOjU2LCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQucHJvcGVydHktZGVzYyI6NjF9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudH0seyIuLyQuZ2xvYmFsIjo0MX1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA9PT1yO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuP2UoKTplLmNhbGwocik7Y2FzZSAxOnJldHVybiBuP2UodFswXSk6ZS5jYWxsKHIsdFswXSk7Y2FzZSAyOnJldHVybiBuP2UodFswXSx0WzFdKTplLmNhbGwocix0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0sdFszXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0sdFszXSl9cmV0dXJuIGUuYXBwbHkocix0KX19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LHsiLi8kLmNvZiI6MzB9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw0ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIkFycmF5Ij09bihlKX19LHsiLi8kLmNvZiI6MzB9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/bnVsbCE9PWU6ImZ1bmN0aW9uIj09dHlwZW9mIGV9fSx7fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG8pe3RyeXtyZXR1cm4gbz90KG4ocilbMF0sclsxXSk6dChyKX1jYXRjaChpKXt2YXIgcz1lWyJyZXR1cm4iXTt0aHJvdyB2b2lkIDAhPT1zJiZuKHMuY2FsbChlKSksaX19fSx7Ii4vJC5hbi1vYmplY3QiOjI4fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpLGk9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikscz17fTtlKCIuLyQuaGlkZSIpKHMsZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4uY3JlYXRlKHMse25leHQ6bygxLHIpfSksaShlLHQrIiBJdGVyYXRvciIpfX0seyIuLyQiOjU2LCIuLyQuaGlkZSI6NDMsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQubGlicmFyeSIpLG89ZSgiLi8kLmV4cG9ydCIpLGk9ZSgiLi8kLnJlZGVmaW5lIikscz1lKCIuLyQuaGlkZSIpLGE9ZSgiLi8kLmhhcyIpLGM9ZSgiLi8kLml0ZXJhdG9ycyIpLHU9ZSgiLi8kLml0ZXItY3JlYXRlIiksbD1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxmPWUoIi4vJCIpLmdldFByb3RvLGQ9ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLHA9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSksYj0iQEBpdGVyYXRvciIsaD0ia2V5cyIseT0idmFsdWVzIix2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixfLGcsbSxqKXt1KHIsdCxfKTt2YXIgJCx3LE89ZnVuY3Rpb24oZSl7aWYoIXAmJmUgaW4gRSlyZXR1cm4gRVtlXTtzd2l0Y2goZSl7Y2FzZSBoOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfTtjYXNlIHk6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0saz10KyIgSXRlcmF0b3IiLHg9Zz09eSxDPSExLEU9ZS5wcm90b3R5cGUsUz1FW2RdfHxFW2JdfHxnJiZFW2ddLFQ9U3x8TyhnKTtpZihTKXt2YXIgUj1mKFQuY2FsbChuZXcgZSkpO2woUixrLCEwKSwhbiYmYShFLGIpJiZzKFIsZCx2KSx4JiZTLm5hbWUhPT15JiYoQz0hMCxUPWZ1bmN0aW9uKCl7cmV0dXJuIFMuY2FsbCh0aGlzKX0pfWlmKG4mJiFqfHwhcCYmIUMmJkVbZF18fHMoRSxkLFQpLGNbdF09VCxjW2tdPXYsZylpZigkPXt2YWx1ZXM6eD9UOk8oeSksa2V5czptP1Q6TyhoKSxlbnRyaWVzOng/TygiZW50cmllcyIpOlR9LGopZm9yKHcgaW4gJCl3IGluIEV8fGkoRSx3LCRbd10pO2Vsc2UgbyhvLlArby5GKihwfHxDKSx0LCQpO3JldHVybiAkfX0seyIuLyQiOjU2LCIuLyQuZXhwb3J0IjozNywiLi8kLmhhcyI6NDIsIi4vJC5oaWRlIjo0MywiLi8kLml0ZXItY3JlYXRlIjo1MSwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC5saWJyYXJ5Ijo1OCwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxvPSExO3RyeXt2YXIgaT1bN11bbl0oKTtpWyJyZXR1cm4iXT1mdW5jdGlvbigpe289ITB9LEFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChzKXt9dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgaT1bN10scz1pW25dKCk7cy5uZXh0PWZ1bmN0aW9uKCl7cj0hMH0saVtuXT1mdW5jdGlvbigpe3JldHVybiBzfSxlKGkpfWNhdGNoKGEpe31yZXR1cm4gcn19LHsiLi8kLndrcyI6Nzh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17fX0se31dLDU2OltmdW5jdGlvbihlLHQscil7dmFyIG49T2JqZWN0O3QuZXhwb3J0cz17Y3JlYXRlOm4uY3JlYXRlLGdldFByb3RvOm4uZ2V0UHJvdG90eXBlT2YsaXNFbnVtOnt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLGdldERlc2M6bi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Isc2V0RGVzYzpuLmRlZmluZVByb3BlcnR5LHNldERlc2NzOm4uZGVmaW5lUHJvcGVydGllcyxnZXRLZXlzOm4ua2V5cyxnZXROYW1lczpuLmdldE93blByb3BlcnR5TmFtZXMsZ2V0U3ltYm9sczpuLmdldE93blByb3BlcnR5U3ltYm9scyxlYWNoOltdLmZvckVhY2h9fSx7fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLGk9byhlKSxzPW4uZ2V0S2V5cyhpKSxhPXMubGVuZ3RoLGM9MDthPmM7KWlmKGlbcj1zW2MrK11dPT09dClyZXR1cm4gcn19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ITB9LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC50YXNrIikuc2V0LGM9cy5NdXRhdGlvbk9ic2VydmVyfHxzLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsdT1zLnByb2Nlc3MsbD1zLlByb21pc2UsZj0icHJvY2VzcyI9PWUoIi4vJC5jb2YiKSh1KSxkPWZ1bmN0aW9uKCl7dmFyIGUsdCxyO2ZvcihmJiYoZT11LmRvbWFpbikmJih1LmRvbWFpbj1udWxsLGUuZXhpdCgpKTtuOyl0PW4uZG9tYWluLHI9bi5mbix0JiZ0LmVudGVyKCkscigpLHQmJnQuZXhpdCgpLG49bi5uZXh0O289dm9pZCAwLGUmJmUuZW50ZXIoKX07aWYoZilpPWZ1bmN0aW9uKCl7dS5uZXh0VGljayhkKX07ZWxzZSBpZihjKXt2YXIgcD0xLGI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyBjKGQpLm9ic2VydmUoYix7Y2hhcmFjdGVyRGF0YTohMH0pLGk9ZnVuY3Rpb24oKXtiLmRhdGE9cD0tcH19ZWxzZSBpPWwmJmwucmVzb2x2ZT9mdW5jdGlvbigpe2wucmVzb2x2ZSgpLnRoZW4oZCl9OmZ1bmN0aW9uKCl7YS5jYWxsKHMsZCl9O3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD17Zm46ZSxuZXh0OnZvaWQgMCxkb21haW46ZiYmdS5kb21haW59O28mJihvLm5leHQ9dCksbnx8KG49dCxpKCkpLG89dH19LHsiLi8kLmNvZiI6MzAsIi4vJC5nbG9iYWwiOjQxLCIuLyQudGFzayI6NzJ9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5leHBvcnQiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuZmFpbHMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0seyIuLyQuY29yZSI6MzEsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSx7fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQucmVkZWZpbmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCluKGUscix0W3JdKTtyZXR1cm4gZX19LHsiLi8kLnJlZGVmaW5lIjo2M31dLDYzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5oaWRlIil9LHsiLi8kLmhpZGUiOjQzfV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9T2JqZWN0LmlzfHxmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dD8wIT09ZXx8MS9lPT09MS90OmUhPWUmJnQhPXR9fSx7fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5nZXREZXNjLG89ZSgiLi8kLmlzLW9iamVjdCIpLGk9ZSgiLi8kLmFuLW9iamVjdCIpLHM9ZnVuY3Rpb24oZSx0KXtpZihpKGUpLCFvKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IodCsiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/ZnVuY3Rpb24odCxyLG8pe3RyeXtvPWUoIi4vJC5jdHgiKShGdW5jdGlvbi5jYWxsLG4oT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG8odCxbXSkscj0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goaSl7cj0hMH1yZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyhlLHQpLHI/ZS5fX3Byb3RvX189dDpvKGUsdCksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOnN9fSx7Ii4vJCI6NTYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLW9iamVjdCI6NDl9XSw2NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuY29yZSIpLG89ZSgiLi8kIiksaT1lKCIuLyQuZGVzY3JpcHRvcnMiKSxzPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uW2VdO2kmJnQmJiF0W3NdJiZvLnNldERlc2ModCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSx7Ii4vJCI6NTYsIi4vJC5jb3JlIjozMSwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLndrcyI6Nzh9XSw2NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLnNldERlc2Msbz1lKCIuLyQuaGFzIiksaT1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhbyhlPXI/ZTplLnByb3RvdHlwZSxpKSYmbihlLGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSx7Ii4vJCI6NTYsIi4vJC5oYXMiOjQyLCIuLyQud2tzIjo3OH1dLDY4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89Il9fY29yZS1qc19zaGFyZWRfXyIsaT1uW29dfHwobltvXT17fSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfHwoaVtlXT17fSl9fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iiksbz1lKCIuLyQuYS1mdW5jdGlvbiIpLGk9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1uKGUpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1zfHx2b2lkIDA9PShyPW4ocylbaV0pP3Q6byhyKX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLndrcyI6Nzh9XSw3MDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgVHlwZUVycm9yKHIrIjogdXNlIHRoZSAnbmV3JyBvcGVyYXRvciEiKTtyZXR1cm4gZX19LHt9XSw3MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxzLGE9U3RyaW5nKG8odCkpLGM9bihyKSx1PWEubGVuZ3RoO3JldHVybiAwPmN8fGM+PXU/ZT8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KGMpLDU1Mjk2Pml8fGk+NTYzMTl8fGMrMT09PXV8fChzPWEuY2hhckNvZGVBdChjKzEpKTw1NjMyMHx8cz41NzM0Mz9lP2EuY2hhckF0KGMpOmk6ZT9hLnNsaWNlKGMsYysyKTooaS01NTI5Njw8MTApKyhzLTU2MzIwKSs2NTUzNil9fX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC50by1pbnRlZ2VyIjo3M31dLDcyOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmludm9rZSIpLGM9ZSgiLi8kLmh0bWwiKSx1PWUoIi4vJC5kb20tY3JlYXRlIiksbD1lKCIuLyQuZ2xvYmFsIiksZj1sLnByb2Nlc3MsZD1sLnNldEltbWVkaWF0ZSxwPWwuY2xlYXJJbW1lZGlhdGUsYj1sLk1lc3NhZ2VDaGFubmVsLGg9MCx5PXt9LHY9Im9ucmVhZHlzdGF0ZWNoYW5nZSIsXz1mdW5jdGlvbigpe3ZhciBlPSt0aGlzO2lmKHkuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PXlbZV07ZGVsZXRlIHlbZV0sdCgpfX0sZz1mdW5jdGlvbihlKXtfLmNhbGwoZS5kYXRhKX07ZCYmcHx8KGQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIHlbKytoXT1mdW5jdGlvbigpe2EoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSx0KX0sbihoKSxofSxwPWZ1bmN0aW9uKGUpe2RlbGV0ZSB5W2VdfSwicHJvY2VzcyI9PWUoIi4vJC5jb2YiKShmKT9uPWZ1bmN0aW9uKGUpe2YubmV4dFRpY2socyhfLGUsMSkpfTpiPyhvPW5ldyBiLGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1nLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmwuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhbC5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2wucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxsLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGcsITEpKTpuPXYgaW4gdSgic2NyaXB0Iik/ZnVuY3Rpb24oZSl7Yy5hcHBlbmRDaGlsZCh1KCJzY3JpcHQiKSlbdl09ZnVuY3Rpb24oKXtjLnJlbW92ZUNoaWxkKHRoaXMpLF8uY2FsbChlKX19OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQocyhfLGUsMSksMCl9KSx0LmV4cG9ydHM9e3NldDpkLGNsZWFyOnB9fSx7Ii4vJC5jb2YiOjMwLCIuLyQuY3R4IjozMiwiLi8kLmRvbS1jcmVhdGUiOjM1LCIuLyQuZ2xvYmFsIjo0MSwiLi8kLmh0bWwiOjQ0LCIuLyQuaW52b2tlIjo0NX1dLDczOltmdW5jdGlvbihlLHQscil7dmFyIG49TWF0aC5jZWlsLG89TWF0aC5mbG9vcjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9vOm4pKGUpfX0se31dLDc0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlvYmplY3QiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC5pb2JqZWN0Ijo0Nn1dLDc1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP28obihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0seyIuLyQudG8taW50ZWdlciI6NzN9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSx7Ii4vJC5kZWZpbmVkIjozM31dLDc3OltmdW5jdGlvbihlLHQscil7dmFyIG49MCxvPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrbitvKS50b1N0cmluZygzNikpfX0se31dLDc4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnNoYXJlZCIpKCJ3a3MiKSxvPWUoIi4vJC51aWQiKSxpPWUoIi4vJC5nbG9iYWwiKS5TeW1ib2w7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1pJiZpW2VdfHwoaXx8bykoIlN5bWJvbC4iK2UpKX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5zaGFyZWQiOjY4LCIuLyQudWlkIjo3N31dLDc5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNsYXNzb2YiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKTt0LmV4cG9ydHM9ZSgiLi8kLmNvcmUiKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT1lP2Vbb118fGVbIkBAaXRlcmF0b3IiXXx8aVtuKGUpXTp2b2lkIDB9fSx7Ii4vJC5jbGFzc29mIjoyOSwiLi8kLmNvcmUiOjMxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw4MDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIiksbz1lKCIuLyQuaXRlci1zdGVwIiksaT1lKCIuLyQuaXRlcmF0b3JzIikscz1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1lKCIuLyQuaXRlci1kZWZpbmUiKShBcnJheSwiQXJyYXkiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD1zKGUpLHRoaXMuX2k9MCx0aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2sscj10aGlzLl9pKys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKToia2V5cyI9PXQ/bygwLHIpOiJ2YWx1ZXMiPT10P28oMCxlW3JdKTpvKDAsW3IsZVtyXV0pfSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxuKCJrZXlzIiksbigidmFsdWVzIiksbigiZW50cmllcyIpfSx7Ii4vJC5hZGQtdG8tdW5zY29wYWJsZXMiOjI3LCIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuaXRlci1zdGVwIjo1NCwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlKG4odCkscil9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8taW9iamVjdCI6NzR9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo2MCwiLi8kLnRvLW9iamVjdCI6NzZ9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDg0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjplKCIuLyQuc2V0LXByb3RvIikuc2V0fSl9LHsiLi8kLmV4cG9ydCI6MzcsIi4vJC5zZXQtcHJvdG8iOjY1fV0sODU6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSw4NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPWUoIi4vJCIpLGk9ZSgiLi8kLmxpYnJhcnkiKSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5jbGFzc29mIiksdT1lKCIuLyQuZXhwb3J0IiksbD1lKCIuLyQuaXMtb2JqZWN0IiksZj1lKCIuLyQuYW4tb2JqZWN0IiksZD1lKCIuLyQuYS1mdW5jdGlvbiIpLHA9ZSgiLi8kLnN0cmljdC1uZXciKSxiPWUoIi4vJC5mb3Itb2YiKSxoPWUoIi4vJC5zZXQtcHJvdG8iKS5zZXQseT1lKCIuLyQuc2FtZS12YWx1ZSIpLHY9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIiksXz1lKCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciIpLGc9ZSgiLi8kLm1pY3JvdGFzayIpLG09IlByb21pc2UiLGo9cy5wcm9jZXNzLCQ9InByb2Nlc3MiPT1jKGopLHc9c1ttXSxPPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB3KGZ1bmN0aW9uKCl7fSk7cmV0dXJuIGUmJih0LmNvbnN0cnVjdG9yPU9iamVjdCksdy5yZXNvbHZlKHQpPT09dH0saz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9bmV3IHcoZSk7cmV0dXJuIGgocix0LnByb3RvdHlwZSkscn12YXIgcj0hMTt0cnl7aWYocj13JiZ3LnJlc29sdmUmJk8oKSxoKHQsdyksdC5wcm90b3R5cGU9by5jcmVhdGUody5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0fX0pLHQucmVzb2x2ZSg1KS50aGVuKGZ1bmN0aW9uKCl7fSlpbnN0YW5jZW9mIHR8fChyPSExKSxyJiZlKCIuLyQuZGVzY3JpcHRvcnMiKSl7dmFyIG49ITE7dy5yZXNvbHZlKG8uc2V0RGVzYyh7fSwidGhlbiIse2dldDpmdW5jdGlvbigpe249ITB9fSkpLHI9bn19Y2F0Y2goaSl7cj0hMX1yZXR1cm4gcn0oKSx4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkmJmU9PT13JiZ0PT09bj8hMDp5KGUsdCl9LEM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZihlKVt2XTtyZXR1cm4gdm9pZCAwIT10P3Q6ZX0sRT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbChlKSYmImZ1bmN0aW9uIj09dHlwZW9mKHQ9ZS50aGVuKT90OiExfSxTPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1kKHQpLHRoaXMucmVqZWN0PWQocil9LFQ9ZnVuY3Rpb24oZSl7dHJ5e2UoKX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSxSPWZ1bmN0aW9uKGUsdCl7aWYoIWUubil7ZS5uPSEwO3ZhciByPWUuYztnKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUudixvPTE9PWUucyxpPTAsYT1mdW5jdGlvbih0KXt2YXIgcixpLHM9bz90Lm9rOnQuZmFpbCxhPXQucmVzb2x2ZSxjPXQucmVqZWN0O3RyeXtzPyhvfHwoZS5oPSEwKSxyPXM9PT0hMD9uOnMobikscj09PXQucHJvbWlzZT9jKFR5cGVFcnJvcigiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1FKHIpKT9pLmNhbGwocixhLGMpOmEocikpOmMobil9Y2F0Y2godSl7Yyh1KX19O3IubGVuZ3RoPmk7KWEocltpKytdKTtyLmxlbmd0aD0wLGUubj0hMSx0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQscixvPWUucDtNKG8pJiYoJD9qLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbixvKToodD1zLm9udW5oYW5kbGVkcmVqZWN0aW9uKT90KHtwcm9taXNlOm8scmVhc29uOm59KToocj1zLmNvbnNvbGUpJiZyLmVycm9yJiZyLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG4pKSxlLmE9dm9pZCAwfSwxKX0pfX0sTT1mdW5jdGlvbihlKXt2YXIgdCxyPWUuX2Qsbj1yLmF8fHIuYyxvPTA7aWYoci5oKXJldHVybiExO2Zvcig7bi5sZW5ndGg+bzspaWYodD1uW28rK10sdC5mYWlsfHwhTSh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxEPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5kfHwodC5kPSEwLHQ9dC5yfHx0LHQudj1lLHQucz0yLHQuYT10LmMuc2xpY2UoKSxSKHQsITApKX0sTj1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuZCl7ci5kPSEwLHI9ci5yfHxyO3RyeXtpZihyLnA9PT1lKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1FKGUpKT9nKGZ1bmN0aW9uKCl7dmFyIG49e3I6cixkOiExfTt0cnl7dC5jYWxsKGUsYShOLG4sMSksYShELG4sMSkpfWNhdGNoKG8pe0QuY2FsbChuLG8pfX0pOihyLnY9ZSxyLnM9MSxSKHIsITEpKX1jYXRjaChuKXtELmNhbGwoe3I6cixkOiExfSxuKX19fTtrfHwodz1mdW5jdGlvbihlKXtkKGUpO3ZhciB0PXRoaXMuX2Q9e3A6cCh0aGlzLHcsbSksYzpbXSxhOnZvaWQgMCxzOjAsZDohMSx2OnZvaWQgMCxoOiExLG46ITF9O3RyeXtlKGEoTix0LDEpLGEoRCx0LDEpKX1jYXRjaChyKXtELmNhbGwodCxyKX19LGUoIi4vJC5yZWRlZmluZS1hbGwiKSh3LnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBTKF8odGhpcyx3KSksbj1yLnByb21pc2Usbz10aGlzLl9kO3JldHVybiByLm9rPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ITAsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LG8uYy5wdXNoKHIpLG8uYSYmby5hLnB1c2gociksby5zJiZSKG8sITEpLG59LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSkpLHUodS5HK3UuVyt1LkYqIWsse1Byb21pc2U6d30pLGUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpKHcsbSksZSgiLi8kLnNldC1zcGVjaWVzIikobSksbj1lKCIuLyQuY29yZSIpW21dLHUodS5TK3UuRiohayxtLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFModGhpcykscj10LnJlamVjdDtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKigha3x8TyghMCkpLG0se3Jlc29sdmU6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHcmJngoZS5jb25zdHJ1Y3Rvcix0aGlzKSlyZXR1cm4gZTt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVzb2x2ZTtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKiEoayYmZSgiLi8kLml0ZXItZGV0ZWN0IikoZnVuY3Rpb24oZSl7dy5hbGwoZSlbImNhdGNoIl0oZnVuY3Rpb24oKXt9KX0pKSxtLHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9Qyh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qscz1bXSxhPVQoZnVuY3Rpb24oKXtiKGUsITEscy5wdXNoLHMpO3ZhciByPXMubGVuZ3RoLGE9QXJyYXkocik7cj9vLmVhY2guY2FsbChzLGZ1bmN0aW9uKGUsbyl7dmFyIHM9ITE7dC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHM9ITAsYVtvXT1lLC0tcnx8bihhKSl9LGkpfSk6bihhKX0pO3JldHVybiBhJiZpKGEuZXJyb3IpLHIucHJvbWlzZX0scmFjZTpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlamVjdCxvPVQoZnVuY3Rpb24oKXtiKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gbyYmbihvLmVycm9yKSxyLnByb21pc2V9fSl9LHsiLi8kIjo1NiwiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQuZXhwb3J0IjozNywiLi8kLmZvci1vZiI6MzksIi4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OSwiLi8kLml0ZXItZGV0ZWN0Ijo1MywiLi8kLmxpYnJhcnkiOjU4LCIuLyQubWljcm90YXNrIjo1OSwiLi8kLnJlZGVmaW5lLWFsbCI6NjIsIi4vJC5zYW1lLXZhbHVlIjo2NCwiLi8kLnNldC1wcm90byI6NjUsIi4vJC5zZXQtc3BlY2llcyI6NjYsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIjo2OSwiLi8kLnN0cmljdC1uZXciOjcwLCIuLyQud2tzIjo3OH1dLDg3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5zdHJpbmctYXQiKSghMCk7ZSgiLi8kLml0ZXItZGVmaW5lIikoU3RyaW5nLCJTdHJpbmciLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0seyIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuc3RyaW5nLWF0Ijo3MX1dLDg4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLmdsb2JhbCIpLGk9ZSgiLi8kLmhhcyIpLHM9ZSgiLi8kLmRlc2NyaXB0b3JzIiksYT1lKCIuLyQuZXhwb3J0IiksYz1lKCIuLyQucmVkZWZpbmUiKSx1PWUoIi4vJC5mYWlscyIpLGw9ZSgiLi8kLnNoYXJlZCIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZD1lKCIuLyQudWlkIikscD1lKCIuLyQud2tzIiksYj1lKCIuLyQua2V5b2YiKSxoPWUoIi4vJC5nZXQtbmFtZXMiKSx5PWUoIi4vJC5lbnVtLWtleXMiKSx2PWUoIi4vJC5pcy1hcnJheSIpLF89ZSgiLi8kLmFuLW9iamVjdCIpLGc9ZSgiLi8kLnRvLWlvYmplY3QiKSxtPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaj1uLmdldERlc2MsJD1uLnNldERlc2Msdz1uLmNyZWF0ZSxPPWguZ2V0LGs9by5TeW1ib2wseD1vLkpTT04sQz14JiZ4LnN0cmluZ2lmeSxFPSExLFM9cCgiX2hpZGRlbiIpLFQ9bi5pc0VudW0sUj1sKCJzeW1ib2wtcmVnaXN0cnkiKSxNPWwoInN5bWJvbHMiKSxEPSJmdW5jdGlvbiI9PXR5cGVvZiBrLE49T2JqZWN0LnByb3RvdHlwZSxQPXMmJnUoZnVuY3Rpb24oKXtyZXR1cm4gNyE9dygkKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWooTix0KTtuJiZkZWxldGUgTlt0XSwkKGUsdCxyKSxuJiZlIT09TiYmJChOLHQsbil9OiQsQT1mdW5jdGlvbihlKXt2YXIgdD1NW2VdPXcoay5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUscyYmRSYmUChOLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZnVuY3Rpb24odCl7aSh0aGlzLFMpJiZpKHRoaXNbU10sZSkmJih0aGlzW1NdW2VdPSExKSxQKHRoaXMsZSxtKDEsdCkpfX0pLHR9LEw9ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfSxGPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gciYmaShNLHQpPyhyLmVudW1lcmFibGU/KGkoZSxTKSYmZVtTXVt0XSYmKGVbU11bdF09ITEpLHI9dyhyLHtlbnVtZXJhYmxlOm0oMCwhMSl9KSk6KGkoZSxTKXx8JChlLFMsbSgxLHt9KSksZVtTXVt0XT0hMCksUChlLHQscikpOiQoZSx0LHIpfSxJPWZ1bmN0aW9uKGUsdCl7XyhlKTtmb3IodmFyIHIsbj15KHQ9Zyh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylGKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LFY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD93KGUpOkkodyhlKSx0KX0sVT1mdW5jdGlvbihlKXt2YXIgdD1ULmNhbGwodGhpcyxlKTtyZXR1cm4gdHx8IWkodGhpcyxlKXx8IWkoTSxlKXx8aSh0aGlzLFMpJiZ0aGlzW1NdW2VdP3Q6ITB9LHo9ZnVuY3Rpb24oZSx0KXt2YXIgcj1qKGU9ZyhlKSx0KTtyZXR1cm4hcnx8IWkoTSx0KXx8aShlLFMpJiZlW1NdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfSxIPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKXx8dD09U3x8bi5wdXNoKHQpO3JldHVybiBufSxCPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKSYmbi5wdXNoKE1bdF0pO3JldHVybiBufSxKPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFMKGUpKXtmb3IodmFyIHQscixuPVtlXSxvPTEsaT1hcmd1bWVudHM7aS5sZW5ndGg+bzspbi5wdXNoKGlbbysrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksIXImJnYodCl8fCh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLEwodCk/dm9pZCAwOnR9KSxuWzFdPXQsQy5hcHBseSh4LG4pfX0sVz11KGZ1bmN0aW9uKCl7dmFyIGU9aygpO3JldHVybiJbbnVsbF0iIT1DKFtlXSl8fCJ7fSIhPUMoe2E6ZX0pfHwie30iIT1DKE9iamVjdChlKSl9KTtEfHwoaz1mdW5jdGlvbigpe2lmKEwodGhpcykpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IiKTtyZXR1cm4gQShkKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSl9LGMoay5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksTD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGt9LG4uY3JlYXRlPVYsbi5pc0VudW09VSxuLmdldERlc2M9eixuLnNldERlc2M9RixuLnNldERlc2NzPUksbi5nZXROYW1lcz1oLmdldD1ILG4uZ2V0U3ltYm9scz1CLHMmJiFlKCIuLyQubGlicmFyeSIpJiZjKE4sInByb3BlcnR5SXNFbnVtZXJhYmxlIixVLCEwKSk7dmFyIFk9eyJmb3IiOmZ1bmN0aW9uKGUpe3JldHVybiBpKFIsZSs9IiIpP1JbZV06UltlXT1rKGUpfSxrZXlGb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGIoUixlKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7RT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7RT0hMX19O24uZWFjaC5jYWxsKCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxmdW5jdGlvbihlKXt2YXIgdD1wKGUpO1lbZV09RD90OkEodCl9KSxFPSEwLGEoYS5HK2EuVyx7U3ltYm9sOmt9KSxhKGEuUywiU3ltYm9sIixZKSxhKGEuUythLkYqIUQsIk9iamVjdCIse2NyZWF0ZTpWLGRlZmluZVByb3BlcnR5OkYsZGVmaW5lUHJvcGVydGllczpJLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjp6LGdldE93blByb3BlcnR5TmFtZXM6SCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Qn0pLHgmJmEoYS5TK2EuRiooIUR8fFcpLCJKU09OIix7c3RyaW5naWZ5Okp9KSxmKGssIlN5bWJvbCIpLGYoTWF0aCwiTWF0aCIsITApLGYoby5KU09OLCJKU09OIiwhMCl9LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5lbnVtLWtleXMiOjM2LCIuLyQuZXhwb3J0IjozNywiLi8kLmZhaWxzIjozOCwiLi8kLmdldC1uYW1lcyI6NDAsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaGFzIjo0MiwiLi8kLmlzLWFycmF5Ijo0OCwiLi8kLmtleW9mIjo1NywiLi8kLmxpYnJhcnkiOjU4LCIuLyQucHJvcGVydHktZGVzYyI6NjEsIi4vJC5yZWRlZmluZSI6NjMsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zaGFyZWQiOjY4LCIuLyQudG8taW9iamVjdCI6NzQsIi4vJC51aWQiOjc3LCIuLyQud2tzIjo3OH1dLDg5OltmdW5jdGlvbihlLHQscil7ZSgiLi9lczYuYXJyYXkuaXRlcmF0b3IiKTt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIik7bi5Ob2RlTGlzdD1uLkhUTUxDb2xsZWN0aW9uPW4uQXJyYXl9LHsiLi8kLml0ZXJhdG9ycyI6NTUsIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjo4MH1dLDkwOltmdW5jdGlvbihlLHQscil7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZz1bXSx0aGlzLms9ZX1mdW5jdGlvbiByKGUpeyFmdW5jdGlvbiByKCl7dmFyIG49ZS50YWtlUmVjb3JkcygpO24ubGVuZ3RoJiZlLmsobixlKSxlLmY9c2V0VGltZW91dChyLHQuX3BlcmlvZCl9KCl9ZnVuY3Rpb24gbih0KXt2YXIgcixuPXt0eXBlOm51bGwsdGFyZ2V0Om51bGwsYWRkZWROb2RlczpbXSxyZW1vdmVkTm9kZXM6W10scHJldmlvdXNTaWJsaW5nOm51bGwsbmV4dFNpYmxpbmc6bnVsbCxhdHRyaWJ1dGVOYW1lOm51bGwsYXR0cmlidXRlTmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bnVsbH07Zm9yKHIgaW4gdCluW3JdIT09ZSYmdFtyXSE9PWUmJihuW3JdPXRbcl0pO3JldHVybiBufWZ1bmN0aW9uIG8oZSx0KXt2YXIgcj1hKGUsdCk7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvLGM9bi5sZW5ndGg7dC5hJiZyLmEmJmkobixlLHIuYSx0LmQpLCh0LmJ8fHQuZSkmJihvPXMobixlLHIsdCkpLChvfHxuLmxlbmd0aCE9PWMpJiYocj1hKGUsdCkpfX1mdW5jdGlvbiBpKHQscixvLGkpe2Zvcih2YXIgcyxhLGM9e30sdT1yLmF0dHJpYnV0ZXMsbD11Lmxlbmd0aDtsLS07KXM9dVtsXSxhPXMubmFtZSxpJiZpW2FdPT09ZXx8KHMudmFsdWUhPT1vW2FdJiZ0LnB1c2gobih7dHlwZToiYXR0cmlidXRlcyIsdGFyZ2V0OnIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV0sYXR0cmlidXRlTmFtZXNwYWNlOnMubmFtZXNwYWNlVVJJfSkpLGNbYV09ITApO2ZvcihhIGluIG8pY1thXXx8dC5wdXNoKG4oe3RhcmdldDpyLHR5cGU6ImF0dHJpYnV0ZXMiLGF0dHJpYnV0ZU5hbWU6YSxvbGRWYWx1ZTpvW2FdfSkpfWZ1bmN0aW9uIHModCxyLG8scyl7ZnVuY3Rpb24gYShlLHIsbyxhLGMpe3ZhciBsPWUubGVuZ3RoLTE7Yz0tfigobC1jKS8yKTtmb3IodmFyIGYsZCxwO3A9ZS5wb3AoKTspZj1vW3AuaF0sZD1hW3AuaV0scy5iJiZjJiZNYXRoLmFicyhwLmgtcC5pKT49bCYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2ZdLHJlbW92ZWROb2RlczpbZl0sbmV4dFNpYmxpbmc6Zi5uZXh0U2libGluZyxwcmV2aW91c1NpYmxpbmc6Zi5wcmV2aW91c1NpYmxpbmd9KSksYy0tKSxzLmEmJmQuYSYmaSh0LGYsZC5hLHMuZCkscy5jJiYzPT09Zi5ub2RlVHlwZSYmZi5ub2RlVmFsdWUhPT1kLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6Zn0pKSxzLmUmJnUoZixkKX1mdW5jdGlvbiB1KHIsbyl7Zm9yKHZhciBkLHAsYixoLHksdj1yLmNoaWxkTm9kZXMsXz1vLmIsZz12Lmxlbmd0aCxtPV8/Xy5sZW5ndGg6MCxqPTAsJD0wLHc9MDtnPiR8fG0+dzspaD12WyRdLHk9KGI9X1t3XSkmJmIuaixoPT09eT8ocy5hJiZiLmEmJmkodCxoLGIuYSxzLmQpLHMuYyYmYi5jIT09ZSYmaC5ub2RlVmFsdWUhPT1iLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6aH0pKSxwJiZhKHAscix2LF8saikscy5lJiYoaC5jaGlsZE5vZGVzLmxlbmd0aHx8Yi5iJiZiLmIubGVuZ3RoKSYmdShoLGIpLCQrKyx3KyspOihsPSEwLGR8fChkPXt9LHA9W10pLGgmJihkW2I9YyhoKV18fChkW2JdPSEwLC0xPT09KGI9ZihfLGgsdywiaiIpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6cixhZGRlZE5vZGVzOltoXSxuZXh0U2libGluZzpoLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpoLnByZXZpb3VzU2libGluZ30pKSxqKyspOnAucHVzaCh7aDokLGk6Yn0pKSwkKyspLHkmJnkhPT12WyRdJiYoZFtiPWMoeSldfHwoZFtiXT0hMCwtMT09PShiPWYodix5LCQpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6by5qLHJlbW92ZWROb2RlczpbeV0sbmV4dFNpYmxpbmc6X1t3KzFdLHByZXZpb3VzU2libGluZzpfW3ctMV19KSksai0tKTpwLnB1c2goe2g6YixpOnd9KSksdysrKSk7cCYmYShwLHIsdixfLGopfXZhciBsO3JldHVybiB1KHIsbyksbH1mdW5jdGlvbiBhKGUsdCl7dmFyIHI9ITA7cmV0dXJuIGZ1bmN0aW9uIG4oZSl7dmFyIG89e2o6ZX07cmV0dXJuIXQuY3x8MyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlPyh0LmEmJnImJjE9PT1lLm5vZGVUeXBlJiYoby5hPWwoZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuZCYmIXQuZFtyLm5hbWVdfHwoZVtyLm5hbWVdPXIudmFsdWUpLGV9KSksciYmKHQuYnx8dC5jfHx0LmEmJnQuZSkmJihvLmI9dShlLmNoaWxkTm9kZXMsbikpLHI9dC5lKTpvLmM9ZS5ub2RlVmFsdWUsb30oZSl9ZnVuY3Rpb24gYyhlKXt0cnl7cmV0dXJuIGUuaWR8fChlLm1vX2lkPWUubW9faWR8fGQrKyl9Y2F0Y2godCl7dHJ5e3JldHVybiBlLm5vZGVWYWx1ZX1jYXRjaChyKXtyZXR1cm4gZCsrfX19ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgcj1bXSxuPTA7bjxlLmxlbmd0aDtuKyspcltuXT10KGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciByPXt9LG49MDtuPGUubGVuZ3RoO24rKylyPXQocixlW25dLG4sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gZihlLHQscixuKXtmb3IoO3I8ZS5sZW5ndGg7cisrKWlmKChuP2Vbcl1bbl06ZVtyXSk9PT10KXJldHVybiByO3JldHVybi0xfXQuX3BlcmlvZD0zMCx0LnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj17YTohISh0LmF0dHJpYnV0ZXN8fHQuYXR0cmlidXRlRmlsdGVyfHx0LmF0dHJpYnV0ZU9sZFZhbHVlKSxiOiEhdC5jaGlsZExpc3QsZTohIXQuc3VidHJlZSxjOiEoIXQuY2hhcmFjdGVyRGF0YSYmIXQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKX0saT10aGlzLmcscz0wO3M8aS5sZW5ndGg7cysrKWlbc10ubT09PWUmJmkuc3BsaWNlKHMsMSk7dC5hdHRyaWJ1dGVGaWx0ZXImJihuLmQ9bCh0LmF0dHJpYnV0ZUZpbHRlcixmdW5jdGlvbihlLHQpewpyZXR1cm4gZVt0XT0hMCxlfSkpLGkucHVzaCh7bTplLGw6byhlLG4pfSksdGhpcy5mfHxyKHRoaXMpfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PXRoaXMuZyxyPTA7cjx0Lmxlbmd0aDtyKyspdFtyXS5sKGUpO3JldHVybiBlfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5nPVtdLGNsZWFyVGltZW91dCh0aGlzLmYpLHRoaXMuZj1udWxsfX07dmFyIGQ9MTtyZXR1cm4gdH0odm9pZCAwKX0se31dLDkxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmV8fGZ1bmN0aW9uKGUsdCxyLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgbyxpLHM9WyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZWNvbmZpZ3VyZSIsInNldFByb3RvdHlwZSIsInByZXZlbnRFeHRlbnNpb25zIl0sYT10LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09ZS5jYWxsKHQpfX0oZS5wcm90b3R5cGUudG9TdHJpbmcpLGM9dC5wcm90b3R5cGUuaW5kZXhPZj90LmluZGV4T2Z8fGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gdC5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUscixuKX06ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1yfHwwO248ZS5sZW5ndGg7bisrKWlmKGVbbl09PT10KXJldHVybiBuO3JldHVybi0xfSx1PXIuTWFwIT09biYmTWFwLnByb3RvdHlwZS5mb3JFYWNoP2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBNYXB9OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD1bXTtyZXR1cm57c2l6ZTowLGhhczpmdW5jdGlvbih0KXtyZXR1cm4gYyhlLHQpPi0xfSxnZXQ6ZnVuY3Rpb24ocil7cmV0dXJuIHRbYyhlLHIpXX0sc2V0OmZ1bmN0aW9uKHIsbil7dmFyIG89YyhlLHIpOy0xPT09bz8oZS5wdXNoKHIpLHQucHVzaChuKSx0aGlzLnNpemUrKyk6dFtvXT1ufSwiZGVsZXRlIjpmdW5jdGlvbihyKXt2YXIgbj1jKGUscik7bj4tMSYmKGUuc3BsaWNlKG4sMSksdC5zcGxpY2UobiwxKSx0aGlzLnNpemUtLSl9LGZvckVhY2g6ZnVuY3Rpb24ocil7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspci5jYWxsKGFyZ3VtZW50c1sxXSx0W25dLGVbbl0sdGhpcyl9fX0sbD1lLmdldE93blByb3BlcnR5TmFtZXM/ZnVuY3Rpb24oKXt2YXIgdD1lLmdldE93blByb3BlcnR5TmFtZXM7dHJ5e2FyZ3VtZW50cy5jYWxsZWV9Y2F0Y2gocil7dmFyIG49KHQoYykuam9pbigiICIpKyIgIikucmVwbGFjZSgvcHJvdG90eXBlIHxsZW5ndGggfG5hbWUgL2csIiIpLnNsaWNlKDAsLTEpLnNwbGl0KCIgIik7bi5sZW5ndGgmJih0PWZ1bmN0aW9uKHQpe3ZhciByPWUuZ2V0T3duUHJvcGVydHlOYW1lcyh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClmb3IodmFyIG8saT0wO2k8bi5sZW5ndGg7KShvPWMocixuW2krK10pKT4tMSYmci5zcGxpY2UobywxKTtyZXR1cm4gcn0pfXJldHVybiB0fSgpOmZ1bmN0aW9uKHQpe3ZhciByLG4sbz1bXTtpZigiaGFzT3duUHJvcGVydHkiaW4gdClmb3IociBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJm8ucHVzaChyKTtlbHNle249ZS5oYXNPd25Qcm9wZXJ0eTtmb3IociBpbiB0KW4uY2FsbCh0LHIpJiZvLnB1c2gocil9cmV0dXJuIGEodCkmJm8ucHVzaCgibGVuZ3RoIiksb30sZj1lLmdldFByb3RvdHlwZU9mLGQ9ZS5kZWZpbmVQcm9wZXJ0aWVzJiZlLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixwPXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxyLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oKXt2YXIgZT0rbmV3IERhdGUsdD1lO3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3IoKHQ9K25ldyBEYXRlKS1lKX0sMTcpfX0oKSxiPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1vLmdldChlKTtuPyh5KG4sZSksbShlLG4sdCxyKSk6KG49aChlKSxtKGUsbix0LHIpLDE9PT1vLnNpemUmJnAodikpfSxoPWZ1bmN0aW9uKHQscil7dmFyIG4saT1sKHQpLHM9W10sYT0wLHI9e2hhbmRsZXJzOnUoKSxmcm96ZW46ZS5pc0Zyb3plbj9lLmlzRnJvemVuKHQpOiExLGV4dGVuc2libGU6ZS5pc0V4dGVuc2libGU/ZS5pc0V4dGVuc2libGUodCk6ITAscHJvdG86ZiYmZih0KSxwcm9wZXJ0aWVzOmksdmFsdWVzOnMsbm90aWZpZXI6Zyh0LHIpfTtpZihkKWZvcihuPXIuZGVzY3JpcHRvcnM9W107YTxpLmxlbmd0aDspblthXT1kKHQsaVthXSksc1thXT10W2lbYSsrXV07ZWxzZSBmb3IoO2E8aS5sZW5ndGg7KXNbYV09dFtpW2ErK11dO3JldHVybiBvLnNldCh0LHIpLHJ9LHk9ZnVuY3Rpb24oKXt2YXIgdD1kP2Z1bmN0aW9uKGUsdCxyLG4sbyl7dmFyIGk9dC5wcm9wZXJ0aWVzW3JdLHM9ZVtpXSxhPXQudmFsdWVzW3JdLGM9dC5kZXNjcmlwdG9yc1tyXTsidmFsdWUiaW4gbyYmKGE9PT1zPzA9PT1hJiYxL2EhPT0xL3M6YT09PWF8fHM9PT1zKSYmKGooZSx0LHtuYW1lOmksdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LnZhbHVlc1tyXT1zKSwhYy5jb25maWd1cmFibGV8fG8uY29uZmlndXJhYmxlJiZvLndyaXRhYmxlPT09Yy53cml0YWJsZSYmby5lbnVtZXJhYmxlPT09Yy5lbnVtZXJhYmxlJiZvLmdldD09PWMuZ2V0JiZvLnNldD09PWMuc2V0fHwoaihlLHQse25hbWU6aSx0eXBlOiJyZWNvbmZpZ3VyZSIsb2JqZWN0OmUsb2xkVmFsdWU6YX0sbiksdC5kZXNjcmlwdG9yc1tyXT1vKX06ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dC5wcm9wZXJ0aWVzW3JdLGk9ZVtvXSxzPXQudmFsdWVzW3JdOyhzPT09aT8wPT09cyYmMS9zIT09MS9pOnM9PT1zfHxpPT09aSkmJihqKGUsdCx7bmFtZTpvLHR5cGU6InVwZGF0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6c30sbiksdC52YWx1ZXNbcl09aSl9LHI9ZD9mdW5jdGlvbihlLHIsbixvLGkpe2Zvcih2YXIgcyxhPXIubGVuZ3RoO24mJmEtLTspbnVsbCE9PXJbYV0mJihzPWQoZSxyW2FdKSxuLS0scz90KGUsbyxhLGkscyk6KGooZSxvLHtuYW1lOnJbYV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpvLnZhbHVlc1thXX0saSksby5wcm9wZXJ0aWVzLnNwbGljZShhLDEpLG8udmFsdWVzLnNwbGljZShhLDEpLG8uZGVzY3JpcHRvcnMuc3BsaWNlKGEsMSkpKX06ZnVuY3Rpb24oZSx0LHIsbixvKXtmb3IodmFyIGk9dC5sZW5ndGg7ciYmaS0tOyludWxsIT09dFtpXSYmKGooZSxuLHtuYW1lOnRbaV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpuLnZhbHVlc1tpXX0sbyksbi5wcm9wZXJ0aWVzLnNwbGljZShpLDEpLG4udmFsdWVzLnNwbGljZShpLDEpLHItLSl9O3JldHVybiBmdW5jdGlvbihuLG8saSl7aWYobi5oYW5kbGVycy5zaXplJiYhbi5mcm96ZW4pe3ZhciBzLGEsdSxwLGIsaCx5LHYsXz1uLnZhbHVlcyxnPW4uZGVzY3JpcHRvcnMsbT0wO2lmKG4uZXh0ZW5zaWJsZSlpZihzPW4ucHJvcGVydGllcy5zbGljZSgpLGE9cy5sZW5ndGgsdT1sKG8pLGcpe2Zvcig7bTx1Lmxlbmd0aDspYj11W20rK10scD1jKHMsYiksdj1kKG8sYiksLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChvW2JdKSxnLnB1c2godikpOihzW3BdPW51bGwsYS0tLHQobyxuLHAsaSx2KSk7cihvLHMsYSxuLGkpLGUuaXNFeHRlbnNpYmxlKG8pfHwobi5leHRlbnNpYmxlPSExLGoobyxuLHt0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyIsb2JqZWN0Om99LGkpLG4uZnJvemVuPWUuaXNGcm96ZW4obykpfWVsc2V7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSxoPW9bYl0sLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChoKSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpKSk7cihvLHMsYSxuLGkpfWVsc2UgaWYoIW4uZnJvemVuKXtmb3IoO208cy5sZW5ndGg7bSsrKWI9c1ttXSx0KG8sbixtLGksZChvLGIpKTtlLmlzRnJvemVuKG8pJiYobi5mcm96ZW49ITApfWYmJih5PWYobykseSE9PW4ucHJvdG8mJihqKG8sbix7dHlwZToic2V0UHJvdG90eXBlIixuYW1lOiJfX3Byb3RvX18iLG9iamVjdDpvLG9sZFZhbHVlOm4ucHJvdG99KSxuLnByb3RvPXkpKX19fSgpLHY9ZnVuY3Rpb24oKXtvLnNpemUmJihvLmZvckVhY2goeSksaS5mb3JFYWNoKF8pLHAodikpfSxfPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5jaGFuZ2VSZWNvcmRzO3IubGVuZ3RoJiYoZS5jaGFuZ2VSZWNvcmRzPVtdLHQocikpfSxnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9by5nZXQoZSkpLHQmJnQubm90aWZpZXJ8fHtub3RpZnk6ZnVuY3Rpb24odCl7dC50eXBlO3ZhciByPW8uZ2V0KGUpO2lmKHIpe3ZhciBuLGk9e29iamVjdDplfTtmb3IobiBpbiB0KSJvYmplY3QiIT09biYmKGlbbl09dFtuXSk7aihlLHIsaSl9fSxwZXJmb3JtQ2hhbmdlOmZ1bmN0aW9uKHQscil7aWYoInN0cmluZyIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZyBjaGFuZ2VUeXBlIik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IHBlcmZvcm0gbm9uLWZ1bmN0aW9uIik7dmFyIGkscyxhPW8uZ2V0KGUpLGM9YXJndW1lbnRzWzJdLHU9Yz09PW4/cigpOnIuY2FsbChjKTtpZihhJiZ5KGEsZSx0KSxhJiZ1JiYib2JqZWN0Ij09dHlwZW9mIHUpe3M9e29iamVjdDplLHR5cGU6dH07Zm9yKGkgaW4gdSkib2JqZWN0IiE9PWkmJiJ0eXBlIiE9PWkmJihzW2ldPXVbaV0pO2ooZSxhLHMpfX19fSxtPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWkuZ2V0KHIpO298fGkuc2V0KHIsbz17b2JzZXJ2ZWQ6dSgpLGNoYW5nZVJlY29yZHM6W119KSxvLm9ic2VydmVkLnNldChlLHthY2NlcHRMaXN0Om4uc2xpY2UoKSxkYXRhOnR9KSx0LmhhbmRsZXJzLnNldChyLG8pfSxqPWZ1bmN0aW9uKGUsdCxyLG4pe3QuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbz10Lm9ic2VydmVkLmdldChlKS5hY2NlcHRMaXN0Oygic3RyaW5nIiE9dHlwZW9mIG58fC0xPT09YyhvLG4pKSYmYyhvLHIudHlwZSk+LTEmJnQuY2hhbmdlUmVjb3Jkcy5wdXNoKHIpfSl9O289dSgpLGk9dSgpLGUub2JzZXJ2ZT1mdW5jdGlvbih0LHIsbyl7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IG9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO2lmKGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4ocikpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gYSBmcm96ZW4gZnVuY3Rpb24gb2JqZWN0Iik7aWYobz09PW4pbz1zO2Vsc2UgaWYoIW98fCJvYmplY3QiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGlyZCBhcmd1bWVudCB0byBPYmplY3Qub2JzZXJ2ZSBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MuIik7cmV0dXJuIGIodCxyLG8pLHR9LGUudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09PWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LnVub2JzZXJ2ZSBjYW5ub3QgdW5vYnNlcnZlIG5vbi1vYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO3ZhciByLG49aS5nZXQodCk7cmV0dXJuIG4mJihyPW4ub2JzZXJ2ZWQuZ2V0KGUpKSYmKG4ub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSkscChmdW5jdGlvbigpe18obix0KX0pLDE9PT1uLm9ic2VydmVkLnNpemUmJm4ub2JzZXJ2ZWQuaGFzKGUpP2lbImRlbGV0ZSJdKHQpOm4ub2JzZXJ2ZWRbImRlbGV0ZSJdKGUpLDE9PT1yLmRhdGEuaGFuZGxlcnMuc2l6ZT9vWyJkZWxldGUiXShlKTpyLmRhdGEuaGFuZGxlcnNbImRlbGV0ZSJdKHQpKSxlfSxlLmdldE5vdGlmaWVyPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5nZXROb3RpZmllciBjYW5ub3QgZ2V0Tm90aWZpZXIgbm9uLW9iamVjdCIpO3JldHVybiBlLmlzRnJvemVuJiZlLmlzRnJvemVuKHQpP251bGw6Zyh0KX0sZS5kZWxpdmVyQ2hhbmdlUmVjb3Jkcz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHQ9aS5nZXQoZSk7dCYmKHQub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSksXyh0LGUpKX19KE9iamVjdCxBcnJheSx0aGlzKX0se31dLDkyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuRGF0YU9iamVjdE9ic2VydmVyPXIuRGF0YU9iamVjdFJlcG9ydGVyPXIuU3luY2hlcj12b2lkIDAsZSgibXV0YXRpb25vYnNlcnZlci1zaGltIiksZSgib2JqZWN0Lm9ic2VydmUiKSxlKCJhcnJheS5vYnNlcnZlIik7dmFyIG89ZSgiLi9zeW5jaGVyL1N5bmNoZXIiKSxpPW4obykscz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIiksYT1uKHMpLGM9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciIpLHU9bihjKTtyLlN5bmNoZXI9aVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdFJlcG9ydGVyPWFbImRlZmF1bHQiXSxyLkRhdGFPYmplY3RPYnNlcnZlcj11WyJkZWZhdWx0Il19LHsiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiOjk2LCIuL3N5bmNoZXIvU3luY2hlciI6OTksImFycmF5Lm9ic2VydmUiOjEsIm11dGF0aW9ub2JzZXJ2ZXItc2hpbSI6OTAsIm9iamVjdC5vYnNlcnZlIjo5MX1dLDkzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksdT1uKGMpLGw9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksZj1uKGwpLGQ9ZSgiLi9TeW5jT2JqZWN0IikscD1uKGQpLGI9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxoPW4oYikseT1lKCIuLi91dGlscy91dGlscy5qcyIpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9zeW5jaGVyPXQsYS5fdXJsPXIsYS5fc2NoZW1hPW4sYS5fc3RhdHVzPW8sYS5fc3luY09iaj1uZXcgcFsiZGVmYXVsdCJdKGkpLGEuX2NoaWxkcmVucz1zLGEuX3ZlcnNpb249MCxhLl9jaGlsZElkPTAsYS5fY2hpbGRyZW5PYmplY3RzPXt9LGEuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLGEuX293bmVyPXQuX293bmVyLGEuX2J1cz10Ll9idXN9cmV0dXJuKDAsZlsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24obil7dmFyIG89cituLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24ocil7aWYoci5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogIixyKSxyLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkQ3JlYXRlKHIpO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksKDAsYVsiZGVmYXVsdCJdKShlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5PYmplY3RzW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InBhdXNlIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJyZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6ImFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5fY2hpbGRJZCsrO3ZhciBuPXIuX293bmVyKyIjIityLl9jaGlsZElkLG89ci5fdXJsKyIvY2hpbGRyZW4vIitlLHM9e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpvLGJvZHk6e3Jlc291cmNlOm4sdmFsdWU6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUpe3ZhciBpPXIuX2J1cy5wb3N0TWVzc2FnZShzKTtjb25zb2xlLmxvZygiY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAiK3IuX293bmVyKyIgKTogIixzKTt2YXIgYT1uZXcgaFsiZGVmYXVsdCJdKHIsbix0LHIuX293bmVyLGkpO2Eub25DaGFuZ2UoZnVuY3Rpb24oZSl7ci5fb25DaGFuZ2UoZSx7cGF0aDpvLGNoaWxkSWQ6bn0pfSksci5fY2hpbGRyZW5PYmplY3RzW25dPWEsZShhKX0pfX0se2tleToib25BZGRDaGlsZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkNoaWxkQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlO2NvbnNvbGUubG9nKCJjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICIrdC5fb3duZXIrIiApOiAiLGUpO3ZhciBuPW5ldyBoWyJkZWZhdWx0Il0odCxyLGUuYm9keS52YWx1ZSk7dC5fY2hpbGRyZW5PYmplY3RzW3JdPW4sc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzb3VyY2U6dC5fb3duZXJ9fSl9KTt2YXIgbz17dHlwZTplLnR5cGUsZnJvbTplLmZyb20sdXJsOmUudG8sdmFsdWU6ZS5ib2R5LnZhbHVlLGNoaWxkSWQ6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9O3QuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiYoY29uc29sZS5sb2coIkFERC1DSElMRFJFTi1FVkVOVDogIixvKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSl9fSx7a2V5OiJfb25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKyssIm9uIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6InVwZGF0ZSIsZnJvbTpyLl91cmwsdG86ci5fdXJsKyIvY2hhbmdlcyIsYm9keTp7dmVyc2lvbjpyLl92ZXJzaW9uLHNvdXJjZTpyLl9vd25lcixhdHRyaWJ1dGU6ZS5maWVsZH19O2Uub1R5cGU9PT1kLk9iamVjdFR5cGUuT0JKRUNUP2UuY1R5cGUhPT1kLkNoYW5nZVR5cGUuUkVNT1ZFJiYobi5ib2R5LnZhbHVlPWUuZGF0YSk6KG4uYm9keS5hdHRyaWJ1dGVUeXBlPWUub1R5cGUsbi5ib2R5LnZhbHVlPWUuZGF0YSxlLmNUeXBlIT09ZC5DaGFuZ2VUeXBlLlVQREFURSYmKG4uYm9keS5vcGVyYXRpb249ZS5jVHlwZSkpLHQmJihuLnRvPXQucGF0aCxuLmJvZHkucmVzb3VyY2U9dC5jaGlsZElkKSxyLl9idXMucG9zdE1lc3NhZ2Uobil9fX0se2tleToiX2NoYW5nZU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rMT09PXQuYm9keS52ZXJzaW9uKXtyLl92ZXJzaW9uKys7dmFyIG49dC5ib2R5LmF0dHJpYnV0ZSxvPSgwLHkuZGVlcENsb25lKSh0LmJvZHkudmFsdWUpLGk9ZS5maW5kQmVmb3JlKG4pO2lmKHQuYm9keS5hdHRyaWJ1dGVUeXBlPT09ZC5PYmplY3RUeXBlLkFSUkFZKWlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuQUREKXt2YXIgcz1pLm9iaixhPWkubGFzdDtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHMsW2EsMF0uY29uY2F0KG8pKX1lbHNlIGlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuUkVNT1ZFKXt2YXIgYz1pLm9iaix1PWkubGFzdDtjLnNwbGljZSh1LG8pfWVsc2UgaS5vYmpbaS5sYXN0XT1vO2Vsc2UgdC5ib2R5LnZhbHVlP2kub2JqW2kubGFzdF09bzpkZWxldGUgaS5vYmpbaS5sYXN0XX1lbHNlIGNvbnNvbGUubG9nKCJVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiAiK3IuX3ZlcnNpb24rIiwgbXNnID0+ICIrdC5ib2R5LnZlcnNpb24rIikiKX19LHtrZXk6Il9jaGFuZ2VDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztjb25zb2xlLmxvZygiQ2hhbmdlIGNoaWxkcmVuOiAiLHQuX293bmVyLGUpO3ZhciByPWUuYm9keS5yZXNvdXJjZSxuPXQuX2NoaWxkcmVuT2JqZWN0c1tyXTtuP3QuX2NoYW5nZU9iamVjdChuLl9zeW5jT2JqLGUpOmNvbnNvbGUubG9nKCJObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICIscil9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWF9fSx7a2V5OiJzdGF0dXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXN9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleToiY2hpbGRyZW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT12LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCIuL1N5bmNPYmplY3QiOjk4LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZSgiLi9TeW5jT2JqZWN0IiksdT1uKGMpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8scyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBhPXRoaXM7YS5fcGFyZW50PXQsYS5fY2hpbGRJZD1yLGEuX293bmVyPW8sYS5fbXNnSWQ9cyxhLl9zeW5jT2JqPW5ldyB1WyJkZWZhdWx0Il0obiksYS5fYnVzPXQuX2J1cyxhLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fb3duZXImJihlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fb3duZXIsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmdC5pZD09PWUuX21zZ0lkJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOiIsdCksZS5fb25SZXNwb25zZSh0KSl9KSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyJiZlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RlbGV0ZSBlLl9wYXJlbnQuX2NoaWxkcmVuW2UuX2NoaWxkSWRdLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24odCl7ZSh0KX0pfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihyKX19LHtrZXk6ImNoaWxkSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGo9bihtKSwkPXtBTlk6ImFueSIsU1RBUlQ6InN0YXJ0IixFWEFDVDoiZXhhY3QifSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4sbyxzLGMsbCl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBmPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLHMuZGF0YSxjKSksZD1mO3JldHVybiBkLl92ZXJzaW9uPWwsZC5fZmlsdGVycz17fSxkLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7ZC5fb25GaWx0ZXIoZSl9KSwoMCxpWyJkZWZhdWx0Il0pKHMuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXMuY2hpbGRyZW5zW2VdO2QuX2NoaWxkcmVuT2JqZWN0c1tlXT1uZXcgalsiZGVmYXVsdCJdKGQsZSx0KX0pLGQuX2FsbG9jYXRlTGlzdGVuZXJzKCksZn1yZXR1cm4oMCx2WyJkZWZhdWx0Il0pKHQsZSksKDAsZlsiZGVmYXVsdCJdKSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCsiL2NoYW5nZXMiLGZ1bmN0aW9uKHQpeyJ1cGRhdGUiPT09dC50eXBlJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdfX0se2tleToidW5zdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLG49e3R5cGU6JC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZigiKiIpO289PT1lLmxlbmd0aC0xJiYoMD09PW8/bi50eXBlPSQuQU5ZOihuLnR5cGU9JC5TVEFSVCxyPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkpKSx0aGlzLl9maWx0ZXJzW3JdPW59fSx7a2V5OiJfb25GaWx0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7KDAsaVsiZGVmYXVsdCJdKSh0Ll9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX2ZpbHRlcnNbcl07bi50eXBlPT09JC5BTlk/bi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLlNUQVJUPzA9PT1lLmZpZWxkLmluZGV4T2YocikmJm4uY2FsbGJhY2soZSk6bi50eXBlPT09JC5FWEFDVCYmZS5maWVsZD09PXImJm4uY2FsbGJhY2soZSl9KX19XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09dyx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdCI6OTMsIi4vRGF0YU9iamVjdENoaWxkIjo5NCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuLi91dGlscy91dGlscy5qcyIpLGo9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLGkscyl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBjPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLGkscykpLGw9YztyZXR1cm4gbC5fc3Vic2NyaXB0aW9ucz17fSxsLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci0iK3IrIi1TRU5EOiAiLGUpLGwuX29uQ2hhbmdlKGUpfSksbC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxjfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9vYmplY3RMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdC0iK2UuX3VybCsiLVJDVjogIix0KSx0LnR5cGUpe2Nhc2UicmVzcG9uc2UiOmUuX29uUmVzcG9uc2UodCk7YnJlYWs7Y2FzZSJyZWFkIjplLl9vblJlYWQodCl9fSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiaW52aXRlT2JzZXJ2ZXJzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ImNyZWF0ZSIsZnJvbTp0Ll9zeW5jaGVyLl9vd25lcix0bzp0Ll9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6dC5fdXJsLHNjaGVtYTp0Ll9zY2hlbWEsdmFsdWU6dC5fc3luY09iai5kYXRhLGF1dGhvcmlzZTplfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZToiZGVsZXRlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fcmVwb3J0ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvblN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyPWV9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToib25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlYWRIYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogIixlKSxlLmJvZHkudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uVW5TdWJzY3JpYmUoZSl9fX0se2tleToiX29uU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj17dHlwZTplLmJvZHkudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNjZXB0OmZ1bmN0aW9uKCl7dmFyIG49e3VybDpyLHN0YXR1czoib24ifTt0Ll9zdWJzY3JpcHRpb25zW3JdPW47dmFyIG89e307cmV0dXJuKDAsaVsiZGVmYXVsdCJdKSh0Ll9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dC5fY2hpbGRyZW5PYmplY3RzW2VdLmRhdGE7b1tlXT0oMCxtLmRlZXBDbG9uZSkocil9KSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc2NoZW1hOnQuX3NjaGVtYSx2ZXJzaW9uOnQuX3ZlcnNpb24sdmFsdWU6e2RhdGE6KDAsbS5kZWVwQ2xvbmUpKHQuZGF0YSksY2hpbGRyZW5zOm99fX0pLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpyfX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixuKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXQuX3N1YnNjcmlwdGlvbnNbcl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsb2JqZWN0Om59O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsciksdC5fb25SZXNwb25zZUhhbmRsZXIocikpfX0se2tleToiX29uUmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGFjY2VwdDpmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKX19KX0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMSxkZXNjOnJ9fSl9fTt0Ll9vblJlYWRIYW5kbGVyJiYoY29uc29sZS5sb2coIlJFQUQtRVZFTlQ6ICIsciksdC5fb25SZWFkSGFuZGxlcihyKSl9fSx7a2V5OiJzdWJzY3JpcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc319XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09aix0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMDAsIi4vRGF0YU9iamVjdCI6OTMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOjE1fV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8peygwLGlbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgcz10aGlzO3MuX293bmVyPXQscy5fdXJsPXIscy5fYnVzPW4scy5fY2hpbGRyZW49byxzLl9jaGFuZ2VzPVtdLHMuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhUHJvdmlzaW9uYWwtIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlcy5wdXNoKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiYXBwbHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpfSl9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufX1dKSxlfSgpO3JbImRlZmF1bHQiXT1jLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuT2JqZWN0VHlwZT1yLkNoYW5nZVR5cGU9dm9pZCAwO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciByPXRoaXM7ci5fb2JzZXJ2ZXJzPVtdLHIuX2ZpbHRlcnM9e30sdD9yLl9kYXRhPSgwLGwuZGVlcENsb25lKSh0KTpyLl9kYXRhPXt9LHIuX2ludGVybmFsT2JzZXJ2ZShuZXcgZCxyLl9kYXRhKX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleToiZmluZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLiIpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleToiZmluZEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj1lLnNwbGl0KCIuIik7cmV0dXJuIHQubGFzdD1yLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQociksdH19LHtrZXk6Il9maW5kV2l0aFNwbGl0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6Il9pc09ic2VydmFibGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPT09T2JqZWN0fHxlLmNvbnN0cnVjdG9yPT09QXJyYXl9fSx7a2V5OiJfaW50ZXJuYWxPYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbj1mdW5jdGlvbih0KXtyLl9vbkNoYW5nZXMoZSx0KX07aWYodC5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7T2JqZWN0Lm9ic2VydmUodCxuKTtmb3IodmFyIG8gaW4gdClyLl9pc09ic2VydmFibGUodFtvXSkmJnIuX2ludGVybmFsT2JzZXJ2ZShlWyJuZXciXShvKSx0W29dKX1lbHNlIGlmKHQuY29uc3RydWN0b3I9PT1BcnJheSl7QXJyYXkub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgaSBpbiB0KWlmKHIuX2lzT2JzZXJ2YWJsZSh0W2ldKSl7dmFyIHM9ZVsibmV3Il0obmV3IHAodFtpXSxpKSk7ci5faW50ZXJuYWxPYnNlcnZlKHMsdFtpXSl9fX19fSx7a2V5OiJfb25DaGFuZ2VzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHQpe3ZhciBvPXRbbl0ub2JqZWN0LGk9dm9pZCAwO2lmKG8uY29uc3RydWN0b3I9PT1PYmplY3QmJihpPWguT0JKRUNUKSxvLmNvbnN0cnVjdG9yPT09QXJyYXkmJihpPWguQVJSQVkpLCJzcGxpY2UiPT09dFtuXS50eXBlKSFmdW5jdGlvbigpe3ZhciBzPXRbbl0uaW5kZXgsYT1lWyJuZXciXSgiIitzKSxjPWEudG9TdHJpbmcoKSx1PXRbbl0ucmVtb3ZlZC5sZW5ndGg7aWYoMCE9PXUpe3ZhciBmPXRbbl0ucmVtb3ZlZDtmLmZvckVhY2goZnVuY3Rpb24odCxuKXtyLl9pc09ic2VydmFibGUodCkmJmUucmVtb3ZlSW5kZXgocytuKX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5SRU1PVkUsb1R5cGU6aSxmaWVsZDpjLGRhdGE6dX0pfXZhciBkPXRbbl0uYWRkZWRDb3VudDtpZigwIT09ZCl7dmFyIGg9by5zbGljZShzLHMrZCk7aC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbz1lWyJuZXciXShuZXcgcCh0LHMrbikpO3IuX2ludGVybmFsT2JzZXJ2ZShvLHQpfX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDpjLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGgpfSl9cyE9PW8ubGVuZ3RoLTEmJmUucmVJbmRleEZyb20obyl9KCk7ZWxzZXt2YXIgcz1lWyJuZXciXSh0W25dLm5hbWUpLGE9cy50b1N0cmluZygpO2lmKC0xIT09YS5pbmRleE9mKCJTeW1ib2wiKSljb250aW51ZTt2YXIgYz1vW3Rbbl0ubmFtZV07InVwZGF0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5VUERBVEUsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSksImFkZCI9PT10W25dLnR5cGUmJih0aGlzLl9pbnRlcm5hbE9ic2VydmUocyxjKSx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuQURELG9UeXBlOmksZmllbGQ6YSxkYXRhOigwLGwuZGVlcENsb25lKShjKX0pKSwiZGVsZXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmF9KX19fX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLGV9KCksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSksdGhpcy5fcGF0aD1bXSx0aGlzLl9vYnNlcnZhYmxlcz17fX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InJlbW92ZUluZGV4Iix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fb2JzZXJ2YWJsZXNbZV19fSx7a2V5OiJyZUluZGV4RnJvbSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHRoaXMuX29ic2VydmFibGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX29ic2VydmFibGVzW3JdLG89ZS5pbmRleE9mKG4ub2JqKTtuLmlkeCE9byYmKG4uaWR4PW8sZGVsZXRlIHQuX29ic2VydmFibGVzW3JdLHQuX29ic2VydmFibGVzW29dPW4pfSl9fSx7a2V5OiJuZXciLHZhbHVlOmZ1bmN0aW9uKGUpe2UuY29uc3RydWN0b3I9PXAmJih0aGlzLl9vYnNlcnZhYmxlc1tlLmlkeF09ZSk7dmFyIHQ9dGhpcy5jbG9uZSgpO3JldHVybiB0Ll9wYXRoLnB1c2goZSksdH19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fcGF0aC5wdXNoKGUpfSksdH19LHtrZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24odCxyKXswPT09cj9lPXQudG9TdHJpbmcoKTplKz0iLiIrdC50b1N0cmluZygpfSksZX19XSksZX0oKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLm9iaj10LHRoaXMuaWR4PXJ9cmV0dXJuKDAsdVsiZGVmYXVsdCJdKShlLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHgudG9TdHJpbmcoKX19XSksZX0oKSxiPXIuQ2hhbmdlVHlwZT17VVBEQVRFOiJ1cGRhdGUiLEFERDoiYWRkIixSRU1PVkU6InJlbW92ZSJ9LGg9ci5PYmplY3RUeXBlPXtPQkpFQ1Q6Im9iamVjdCIsQVJSQVk6ImFycmF5In07clsiZGVmYXVsdCJdPWZ9LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYyksbD1lKCIuL0RhdGFPYmplY3RSZXBvcnRlciIpLGY9bihsKSxkPWUoIi4vRGF0YU9iamVjdE9ic2VydmVyIikscD1uKGQpLGI9ZSgiLi9EYXRhUHJvdmlzaW9uYWwiKSxoPW4oYikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4peygwLGFbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgbz10aGlzO28uX293bmVyPXQsby5fYnVzPXIsby5fc3ViVVJMPW4ucnVudGltZVVSTCsiL3NtIixvLl9yZXBvcnRlcnM9e30sby5fb2JzZXJ2ZXJzPXt9LG8uX3Byb3Zpc2lvbmFscz17fSxyLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aWYoZS5mcm9tIT09dClzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjpvLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOm8uX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjpvLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6ImNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7ci5yZXBvcnRlcj1uLl9vd25lcixyLnNjaGVtYT1lO3ZhciBvPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fb3duZXIsdG86bi5fc3ViVVJMLGJvZHk6e3NjaGVtYTplLHZhbHVlOnIsYXV0aG9yaXNlOnR9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LGkpe24uX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSxhPW5ldyBmWyJkZWZhdWx0Il0obixzLGUsIm9uIixyLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7bi5fcmVwb3J0ZXJzW3NdPWEsdChhKX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKG8saSl7ci5fYnVzLnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24obil7Y29uc29sZS5sb2coInN1YnNjcmliZS1yZXNwb25zZTogIixuKTt2YXIgcz1yLl9wcm92aXNpb25hbHNbdF07aWYoZGVsZXRlIHIuX3Byb3Zpc2lvbmFsc1t0XSxzJiZzLl9yZWxlYXNlTGlzdGVuZXJzKCksbi5ib2R5LmNvZGU8MjAwKXM9bmV3IGhbImRlZmF1bHQiXShyLl9vd25lcix0LHIuX2J1cyxuLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpLHIuX3Byb3Zpc2lvbmFsc1t0XT1zO2Vsc2UgaWYoMjAwPT09bi5ib2R5LmNvZGUpe3ZhciBhPW5ldyBwWyJkZWZhdWx0Il0ocix0LGUsIm9uIixuLmJvZHkudmFsdWUscy5jaGlsZHJlbixuLmJvZHkudmVyc2lvbik7ci5fb2JzZXJ2ZXJzW3RdPWEsbyhhKSxzLmFwcGx5KGEpfWVsc2UgaShuLmJvZHkuZGVzYyl9KX0pfX0se2tleToicmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJyZWFkIixmcm9tOnQuX293bmVyLHRvOmV9O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsbil7dC5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coInJlYWQtcmVzcG9uc2U6ICIsdCksMjAwPT09dC5ib2R5LmNvZGU/ZSh0LmJvZHkudmFsdWUpOm4odC5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtyLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbj0yMDA7ciYmKG49ciksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbiksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG4pKX19LHtrZXk6Il9vblJlbW90ZURlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXQuX29ic2VydmVyc1tyXTtpZihuKXt2YXIgbz17dHlwZTplLnR5cGUsdXJsOnIsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbz0yMDA7ciYmKG89ciksMjAwPT09byYmblsiZGVsZXRlIl0oKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpvLHNvdXJjZTp0Ll9vd25lcn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbyksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG8pKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fSx7a2V5OiJvd25lciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX293bmVyfX0se2tleToicmVwb3J0ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0ZXJzfX0se2tleToib2JzZXJ2ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT15LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiOjk1LCIuL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vRGF0YVByb3Zpc2lvbmFsIjo5NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsYlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBjKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGwoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYyhlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGY9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGYpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1hLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1jLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1sfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3fV19LHt9LFs5Ml0pKDkyKX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiAqIFNpbXBsZSBjbGFzcyBmb3IgZWFzaWVyIGxvZ2dpbmcKICovCgp2YXIgTG9nZ2VyID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gTG9nZ2VyKG5hbWUpIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9nZ2VyKTsKCiAgICAgICAgdGhpcy5wcmVmaXggPSBuYW1lICsgIiAiOwogICAgICAgIHRoaXMuYyA9IGNvbnNvbGU7CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKExvZ2dlciwgW3sKICAgICAgICBrZXk6ICJkIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZChtc2cpIHsKICAgICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gdGhpcy5wcmVmaXggKyBhcmd1bWVudHNbMF07CiAgICAgICAgICAgIHRoaXMuYy5kZWJ1Zy5hcHBseSh0aGlzLmMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogImwiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsKG1zZykgewogICAgICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICAgICAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhcmd1bWVudHNbMF0gPSB0aGlzLnByZWZpeCArIGFyZ3VtZW50c1swXTsKICAgICAgICAgICAgdGhpcy5jLmxvZy5hcHBseSh0aGlzLmMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogImkiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpKG1zZykgewogICAgICAgICAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMyA+IDEgPyBfbGVuMyAtIDEgOiAwKSwgX2tleTMgPSAxOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7CiAgICAgICAgICAgICAgICBhcmdzW19rZXkzIC0gMV0gPSBhcmd1bWVudHNbX2tleTNdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhcmd1bWVudHNbMF0gPSB0aGlzLnByZWZpeCArIGFyZ3VtZW50c1swXTsKICAgICAgICAgICAgdGhpcy5jLmluZm8uYXBwbHkodGhpcy5jLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICJ3IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdyhtc2cpIHsKICAgICAgICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjQgPiAxID8gX2xlbjQgLSAxIDogMCksIF9rZXk0ID0gMTsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykgewogICAgICAgICAgICAgICAgYXJnc1tfa2V5NCAtIDFdID0gYXJndW1lbnRzW19rZXk0XTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gdGhpcy5wcmVmaXggKyBhcmd1bWVudHNbMF07CiAgICAgICAgICAgIHRoaXMuYy53YXJuLmFwcGx5KHRoaXMuYywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAiZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGUobXNnKSB7CiAgICAgICAgICAgIGZvciAodmFyIF9sZW41ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW41ID4gMSA/IF9sZW41IC0gMSA6IDApLCBfa2V5NSA9IDE7IF9rZXk1IDwgX2xlbjU7IF9rZXk1KyspIHsKICAgICAgICAgICAgICAgIGFyZ3NbX2tleTUgLSAxXSA9IGFyZ3VtZW50c1tfa2V5NV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IHRoaXMucHJlZml4ICsgYXJndW1lbnRzWzBdOwogICAgICAgICAgICB0aGlzLmMuZXJyb3IuYXBwbHkodGhpcy5jLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gTG9nZ2VyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBMb2dnZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIF9EaXNjb3ZlcnkgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0Rpc2NvdmVyeScpOwoKdmFyIF9EaXNjb3ZlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGlzY292ZXJ5KTsKCnZhciBfSHlwZXJ0eURpc2NvdmVyeSA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSHlwZXJ0eURpc2NvdmVyeScpOwoKdmFyIF9IeXBlcnR5RGlzY292ZXJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0h5cGVydHlEaXNjb3ZlcnkpOwoKdmFyIF9JZGVudGl0eU1hbmFnZXIgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0lkZW50aXR5TWFuYWdlcicpOwoKdmFyIF9JZGVudGl0eU1hbmFnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWRlbnRpdHlNYW5hZ2VyKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91dGlscycpOwoKdmFyIF9FdmVudEVtaXR0ZXIyID0gcmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRFbWl0dGVyJyk7Cgp2YXIgX0V2ZW50RW1pdHRlcjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FdmVudEVtaXR0ZXIyKTsKCnZhciBfTG9nZ2VyID0gcmVxdWlyZSgnLi9Mb2dnZXInKTsKCnZhciBfTG9nZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvZ2dlcik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qIGpzaGludCB1bmRlZjogdHJ1ZSAqLwoKdmFyIGwgPSBuZXcgX0xvZ2dlcjIuZGVmYXVsdCgiUk9PTVVJIik7Cgp2YXIgUm9vbVVJT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikgewogICAgX2luaGVyaXRzKFJvb21VSU9ic2VydmVyLCBfRXZlbnRFbWl0dGVyKTsKCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBSb29tVUlSZXBvcnRlcgogICAgICogQHBhcmFtIHtzdHJpbmd9IGh5cGVydHlVUkwgLSBVUkwgb2YgdGhlIGh5cGVydHkKICAgICAqIEBwYXJhbSB7TWluaUJ1c30gYnVzIC0gTWluaUJ1cwogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ3VyYXRpb24gLSBjb25maWd1cmF0aW9uIG9mIGh5cGVydHkKICAgICAqLwoKICAgIGZ1bmN0aW9uIFJvb21VSU9ic2VydmVyKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbikgewogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSb29tVUlPYnNlcnZlcik7CgogICAgICAgIGlmICghaHlwZXJ0eVVSTCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgaHlwZXJ0eVVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKICAgICAgICBpZiAoIWJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKICAgICAgICBpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgogICAgICAgIGwuZCgiaHlwZXJ0eVVSTDoiLCBoeXBlcnR5VVJMKTsKICAgICAgICBsLmQoImJ1czoiLCBidXMpOwogICAgICAgIGwuZCgiY29uZmlndXJhdGlvbjoiLCBjb25maWd1cmF0aW9uKTsKCiAgICAgICAgdmFyIF90aGlzMiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihSb29tVUlPYnNlcnZlcikuY2FsbCh0aGlzKSk7CgogICAgICAgIF90aGlzMi5fZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKGh5cGVydHlVUkwpLmRvbWFpbjsKCiAgICAgICAgLy8gY3JlYXRlIE9iamVjdCBTY2hlbWEgVVJMCiAgICAgICAgX3RoaXMyLl9vYmplY3REZXNjVVJMID0gJ2h5cGVydHktY2F0YWxvZ3VlOi8vJyArIF90aGlzMi5fZG9tYWluICsgJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hcy9Sb29tVUlEYXRhU2NoZW1hJzsKCiAgICAgICAgLy8gbWFrZSBhcmd1bWVudHMgYXZhaWxhYmxlCiAgICAgICAgX3RoaXMyLmh5cGVydHlVUkwgPSBoeXBlcnR5VVJMOwogICAgICAgIF90aGlzMi5idXMgPSBidXM7CiAgICAgICAgX3RoaXMyLmNvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uOwoKICAgICAgICB2YXIgaHlwZXJ0eURpc2NvdmVyeSA9IG5ldyBfSHlwZXJ0eURpc2NvdmVyeTIuZGVmYXVsdChoeXBlcnR5VVJMLCBidXMpOwogICAgICAgIHZhciBkaXNjb3ZlcnkgPSBuZXcgX0Rpc2NvdmVyeTIuZGVmYXVsdChoeXBlcnR5VVJMLCBidXMpOwoKICAgICAgICBfdGhpczIuaHlwZXJ0eURpc2NvdmVyeSA9IGh5cGVydHlEaXNjb3Zlcnk7CiAgICAgICAgX3RoaXMyLmRpc2NvdmVyeSA9IGRpc2NvdmVyeTsKCiAgICAgICAgLy8gaWRlbnRpdHkgbWFuYWdlciB0byBnZXQgdXNlciBpZGVudGl0eSBmb3IgdGhpcyBoeXBlcnR5CiAgICAgICAgLy9sZXQgaWRlbnRpdHlNYW5hZ2VyID0gbmV3IElkZW50aXR5TWFuYWdlcihoeXBlcnR5VVJMLCBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkwsIGJ1cyk7CiAgICAgICAgLy9pZGVudGl0eU1hbmFnZXIuZGlzY292ZXJVc2VyUmVnaXN0ZXJlZChoeXBlcnR5VVJMKS50aGVuKCh1c2VyVVJMKSA9PiB7CiAgICAgICAgLy8gICAgbC5kKCJnb3QgdXNlciBVUkw6IiwgdXNlclVSTCk7CiAgICAgICAgLy99KTsKCiAgICAgICAgdmFyIF90aGlzID0gX3RoaXMyOwoKICAgICAgICAvLyBzeW5jaGVyCiAgICAgICAgdmFyIHN5bmNoZXIgPSBuZXcgX1N5bmNoZXIuU3luY2hlcihoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pOwogICAgICAgIF90aGlzMi5fc3luY2hlciA9IHN5bmNoZXI7CiAgICAgICAgc3luY2hlci5vbk5vdGlmaWNhdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uKGV2ZW50KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gdGVzdGluZyBkaXNjb3Zlcnkgd2l0aCBoYXJkY29kZWQgdXNlcgogICAgICAgIHZhciB1c2VyID0gIm9wZW5pZHRlc3QxMEBnbWFpbC5jb20iOwogICAgICAgIGwuZCgidHJ5aW5nIHRvIGZpbmQgaHlwZXJ0eSBvZiB1c2VyIiwgdXNlcik7CiAgICAgICAgX3RoaXMyLmh5cGVydHlEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnR5UGVyVXNlcih1c2VyLCBudWxsKS50aGVuKGZ1bmN0aW9uIChmb3VuZFVzZXIpIHsKICAgICAgICAgICAgbC5kKCJmb3VuZDogIiwgZm91bmRVc2VyKTsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIF90aGlzMjsKICAgIH0KCiAgICAvKioKICAgICAqIFN1YnNjcmliZSB0byBhbiBvYmplY3QgdXNpbmcgdGhlIHN5bmNoZXIKICAgICAqIEBwYXJhbSBvYmplY3RVUkwgLSBVUkwgb2YgdGhlIG9iamVjdAogICAgICovCgoKICAgIF9jcmVhdGVDbGFzcyhSb29tVUlPYnNlcnZlciwgW3sKICAgICAgICBrZXk6ICdzdWJzY3JpYmUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJzY3JpYmUob2JqZWN0VVJMKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIHRoaXMuX3N5bmNoZXIuc3Vic2NyaWJlKF90aGlzLl9vYmplY3REZXNjVVJMLCBvYmplY3RVUkwpLnRoZW4oZnVuY3Rpb24gKG9iaikgewoKICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygic3Vic2NyaWJlZCB0byBvYmplY3Q6Iiwgb2JqKTsKCiAgICAgICAgICAgICAgICAvL3Jvb21PYmp0UmVwb3J0ZXIub25BZGRDaGlsZCgoY2hpbGQpID0+IHsKICAgICAgICAgICAgICAgIC8vICAgIGwuZCgiY2hpbGQgYWRkZWQ6IiwgY2hpbGQpOwogICAgICAgICAgICAgICAgLy8gICAgbGV0IGNoaWxkRGF0YSA9IGNoaWxkLmRhdGEgPyBjaGlsZC5kYXRhIDogY2hpbGQudmFsdWU7CiAgICAgICAgICAgICAgICAvLyAgICBsLmQoImNoaWxkIGRhdGE6IiwgY2hpbGREYXRhKTsKICAgICAgICAgICAgICAgIC8vfSk7CgogICAgICAgICAgICAgICAgX3RoaXMub2JzZXJ2ZXIgPSBvYmo7CiAgICAgICAgICAgICAgICBvYmoub25DaGFuZ2UoJyonLCBmdW5jdGlvbiAoZXZlbnQpIHsKCiAgICAgICAgICAgICAgICAgICAgLy8gSGVsbG8gV29ybGQgT2JqZWN0IHdhcyBjaGFuZ2VkCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdtZXNzYWdlIHJlY2VpdmVkOicsIGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICAvLyBsZXRzIG5vdGlmeSB0aGUgQXBwIGFib3V0IHRoZSBjaGFuZ2UKICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdvbkNoYW5nZScsIGV2ZW50KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfb25Ob3RpZmljYXRpb24nLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Ob3RpZmljYXRpb24oZXZlbnQpIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCdFdmVudCBSZWNlaXZlZDogJywgZXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogVGVzdCBhZGRDaGlsZCBmdW5jdGlvbmFsaXR5CiAgICAgICAgICovCgogICAgfSwgewogICAgICAgIGtleTogJ2FkZENoaWxkJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2hpbGQoKSB7CiAgICAgICAgICAgIGwuZCgiYWRkaW5nIGNoaWxkIik7CiAgICAgICAgICAgIHZhciBhY3Rpb24gPSB7CiAgICAgICAgICAgICAgICAiaWQiOiAic29tZUlEIiwKICAgICAgICAgICAgICAgICJ0eXBlIjogInNvbWVUeXBlIiwKICAgICAgICAgICAgICAgICJ2YWx1ZXMiOiBbewogICAgICAgICAgICAgICAgICAgICJuYW1lIjogInNldEJyaWdodG5lc3MiLAogICAgICAgICAgICAgICAgICAgICJ1bml0IjogInNvbWVVbml0IiwKICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJicmlnaHRuZXNzIjogNzUKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICJzdW0iOiAid2hhdGV2ZXIiCiAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLm9ic2VydmVyLmFkZENoaWxkKCdhY3Rpb25zJywgYWN0aW9uKTsKICAgICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIFJvb21VSU9ic2VydmVyOwp9KF9FdmVudEVtaXR0ZXIzLmRlZmF1bHQpOwoKZnVuY3Rpb24gYWN0aXZhdGUoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKSB7CgogICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiAnUm9vbVVJT2JzZXJ2ZXInLAogICAgICAgIGluc3RhbmNlOiBuZXcgUm9vbVVJT2JzZXJ2ZXIoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKQogICAgfTsKfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy9FdmVudEVtaXR0ZXIiOjcsIi4uL3V0aWxzL3V0aWxzIjo4LCIuL0xvZ2dlciI6NSwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9EaXNjb3ZlcnkiOjEsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSHlwZXJ0eURpc2NvdmVyeSI6Miwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9JZGVudGl0eU1hbmFnZXIiOjMsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlciI6NH1dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKICogRXZlbnRFbWl0dGVyCiAqIEFsbCBjbGFzc2VzIHdoaWNoIGV4dGVuZHMgdGhpcywgY2FuIGhhdmUgYWRkRXZlbnRMaXN0ZW5lciBhbmQgdHJpZ2dlciBldmVudHM7CiAqLwoKdmFyIEV2ZW50RW1pdHRlciA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRFbWl0dGVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhFdmVudEVtaXR0ZXIsIFt7CiAgICBrZXk6ICJhZGRFdmVudExpc3RlbmVyIiwKCgogICAgLyoqCiAgICAgKiBhZGRFdmVudExpc3RlbmVyIGxpc3RlbiBmb3IgYW4gZXZlbnRUeXBlCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgZXZlbnRUeXBlIC0gbGlzdGVuaW5nIGZvciB0aGlzIHR5cGUgb2YgZXZlbnQKICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgICBjYiAgICAgICAgLSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGV2ZW50IGl0IGlzIGludm9rZWQKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpc1tldmVudFR5cGVdID0gY2I7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnZva2UgdGhlIGV2ZW50VHlwZQogICAgICogQHBhcmFtICB7c3RyaW5nfSBldmVudFR5cGUgLSBldmVudCB3aWxsIGJlIGludm9rZWQKICAgICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zIC0gcGFyYW1ldGVycyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYWRkRXZlbnRMaXN0ZW5lcgogICAgICovCgogIH0sIHsKICAgIGtleTogInRyaWdnZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnRUeXBlLCBwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpc1tldmVudFR5cGVdKSB7CiAgICAgICAgX3RoaXNbZXZlbnRUeXBlXShwYXJhbXMpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRXZlbnRFbWl0dGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBFdmVudEVtaXR0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kaXZpZGVVUkwgPSBkaXZpZGVVUkw7CmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOwpleHBvcnRzLmdldENvbmZpZyA9IGdldENvbmZpZzsKZXhwb3J0cy5nZXRVc2VyTWVkaWEgPSBnZXRVc2VyTWVkaWE7CmV4cG9ydHMuc2VyaWFsaXplID0gc2VyaWFsaXplOwpleHBvcnRzLmdldFRlbXBsYXRlID0gZ2V0VGVtcGxhdGU7Ci8qKgogKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoqLwoKLy8ganNoaW50IGJyb3dzZXI6dHJ1ZSwganF1ZXJ5OiB0cnVlCi8vIGpzaGludCB2YXJzdG10OiB0cnVlCi8qIGdsb2JhbCBIYW5kbGViYXJzICovCgovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwoKLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovCgovKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsKCiAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKICB2YXIgcmUgPSAvKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsKICB2YXIgc3Vic3QgPSAnJDEsJDIsJDMnOwogIHZhciBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTsKCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gcHJvdG9jb2wsIHRoZSBkZWZhdWx0IHByb3RvY29sIHNldCBpcyBodHRwcwogIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7CiAgICBwYXJ0c1swXSA9ICdodHRwcyc7CiAgICBwYXJ0c1sxXSA9IHVybDsKICB9CgogIHZhciByZXN1bHQgPSB7CiAgICB0eXBlOiBwYXJ0c1swXSwKICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICBpZGVudGl0eTogcGFydHNbMl0KICB9OwoKICByZXR1cm4gcmVzdWx0Owp9CgovKioKICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZAogKiBAcmV0dXJuIHtPYmplY3R9CiAqLwpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7CiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOwp9CgovKioKICogR2V0IHRoZSBjb25maWd1cmF0aW9uIGZyb20gYW4ganNvbiBmaWxlOwogKiBAcGFyYW0gIHtKU09OT2JqZWN0fSBqc29uRmlsZQogKiBAcmV0dXJuIHtvYmplY3R9CiAqLwpmdW5jdGlvbiBnZXRDb25maWcoSlNPTk9iamVjdCkgewogIGNvbnNvbGUubG9nKCdkZXZlbG9wJyk7CiAgcmV0dXJuIEpTT05PYmplY3RbJ2RldmVsb3AnXTsKfQoKLyoqCiAqIEdldCBXZWJSVEMgQVBJIHJlc291cmNlcwogKiBAcGFyYW0gIHtPYmplY3R9ICAgICBvcHRpb25zIE9iamVjdCBjb250YWluaW5nIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlc291cmNlcyB3aWxsIGJlIHVzZWQgKGNhbWVyYSwgbWljLCByZXNvbHV0aW9uLCBldGMpOwogKiBAcmV0dXJuIHtQcm9taXNlfQogKi8KZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKSB7CgogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oZnVuY3Rpb24gKG1lZGlhU3RyZWFtKSB7CiAgICAgIHJlc29sdmUobWVkaWFTdHJlYW0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICByZWplY3QocmVhc29uKTsKICAgIH0pOwogIH0pOwp9CgpmdW5jdGlvbiBzZXJpYWxpemUoKSB7CgogICQuZm4uc2VyaWFsaXplT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG8gPSB7fTsKICAgIHZhciBhID0gdGhpcy5zZXJpYWxpemVBcnJheSgpOwogICAgJC5lYWNoKGEsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0ucHVzaCkgewogICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07CiAgICAgICAgfQoKICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlIHx8ICcnOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbzsKICB9OwoKICAkLmZuLnNlcmlhbGl6ZU9iamVjdEFycmF5ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG8gPSB7fTsKICAgIHZhciBhID0gdGhpcy5zZXJpYWxpemVBcnJheSgpOwogICAgJC5lYWNoKGEsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0ucHVzaCkgewogICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07CiAgICAgICAgfQoKICAgICAgICBvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlIHx8ICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIW9bdGhpcy5uYW1lXSkgb1t0aGlzLm5hbWVdID0gW107CiAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSB8fCAnJyk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBvOwogIH07Cn0KCmZ1bmN0aW9uIGdldFRlbXBsYXRlKHBhdGgsIHNjcmlwdCkgewoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgIGlmIChIYW5kbGViYXJzLnRlbXBsYXRlcyA9PT0gdW5kZWZpbmVkIHx8IEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgSGFuZGxlYmFycy50ZW1wbGF0ZXMgPSB7fTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pOwogICAgfQoKICAgIHZhciB0ZW1wbGF0ZUZpbGUgPSAkLmFqYXgoewogICAgICB1cmw6IHBhdGggKyAnLmhicycsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkgewogICAgICAgIEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdID0gSGFuZGxlYmFycy5jb21waWxlKGRhdGEpOwogICAgICB9LAoKICAgICAgZmFpbDogZnVuY3Rpb24gZmFpbChyZWFzb24pIHsKICAgICAgICByZXR1cm4gcmVhc29uOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgc2NyaXB0RmlsZSA9ICQuZ2V0U2NyaXB0KHNjcmlwdCk7CgogICAgdmFyIHJlcXVlc3RzID0gW107CiAgICBpZiAocGF0aCkgcmVxdWVzdHMucHVzaCh0ZW1wbGF0ZUZpbGUpOwogICAgaWYgKHNjcmlwdCkgcmVxdWVzdHMucHVzaChzY3JpcHRGaWxlKTsKCiAgICBQcm9taXNlLmFsbChyZXF1ZXN0cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgIHJlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICByZWplY3QocmVhc29uKTsKICAgIH0pOwogIH0pOwp9Cgp9LHt9XX0se30sWzZdKSg2KQp9KTs=",
      "sourceCodeClassname": "RoomUIObserver",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10006,
    "version": "0.1",
    "description": "Description of RoomUIObserver",
    "objectName": "RoomUIObserver",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "hypertyType": []
  },
  "RoomUIReporter": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBEaXNjb3ZlcnkuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNSBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5EaXNjb3Zlcnk9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGE9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJmEpcmV0dXJuIGEocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLHUsZixsPWUmYy5GLGQ9ZSZjLkcscD1lJmMuUyx2PWUmYy5QLCQ9ZSZjLkIseT1lJmMuVyxoPWQ/bzpvW3RdfHwob1t0XT17fSksYj1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGEgaW4gcil1PSFsJiZiJiZhIGluIGIsdSYmYSBpbiBofHwoZj11P2JbYV06clthXSxoW2FdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW2FdP3JbYV06JCYmdT9pKGYsbik6eSYmYlthXT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTp2JiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6Zix2JiYoKGhbc118fChoW3NdPXt9KSlbYV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksYT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgZixsLGQscD1hKGUpLHY9bihyLHUsdD8yOjEpLCQ9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihmPWMoZS5sZW5ndGgpO2Y+JDskKyspdD92KHMobD1lWyRdKVswXSxsWzFdKTp2KGVbJF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEobD1kLm5leHQoKSkuZG9uZTspbyhkLHYsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksYT1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSx2PSJAQGl0ZXJhdG9yIiwkPSJrZXlzIix5PSJ2YWx1ZXMiLGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe3Uocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBVKXJldHVybiBVW2VdO3N3aXRjaChlKXtjYXNlICQ6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT15LE09ITEsVT1lLnByb3RvdHlwZSxQPVVbZF18fFVbdl18fG0mJlVbbV0sUz1QfHxfKG0pO2lmKFApe3ZhciBFPWwoUy5jYWxsKG5ldyBlKSk7ZihFLGssITApLCFuJiZjKFUsdikmJnMoRSxkLGgpLE8mJlAubmFtZSE9PXkmJihNPSEwLFM9ZnVuY3Rpb24oKXtyZXR1cm4gUC5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFwJiYhTSYmVVtkXXx8cyhVLGQsUyksYVt0XT1TLGFba109aCxtKWlmKGo9e3ZhbHVlczpPP1M6Xyh5KSxrZXlzOmc/UzpfKCQpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6U30seClmb3IodyBpbiBqKXcgaW4gVXx8aShVLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsYT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGEpe3ZhciBwPTEsdj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGEoZCkub2JzZXJ2ZSh2LHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe3YuZGF0YT1wPS1wfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksYT1uKHIpLHU9Yy5sZW5ndGg7cmV0dXJuIDA+YXx8YT49dT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQoYSksNTUyOTY+aXx8aT41NjMxOXx8YSsxPT09dXx8KHM9Yy5jaGFyQ29kZUF0KGErMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQoYSk6aTplP2Muc2xpY2UoYSxhKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksYT1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxkPWYuc2V0SW1tZWRpYXRlLHA9Zi5jbGVhckltbWVkaWF0ZSx2PWYuTWVzc2FnZUNoYW5uZWwsJD0wLHk9e30saD0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrKyRdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKCQpLCR9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OnY/KG89bmV3IHYsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49aCBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXthLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVtoXT1mdW5jdGlvbigpe2EucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLHY9ZSgiLi8kLmZvci1vZiIpLCQ9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksaD1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PWEoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gJChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLCQodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW2hdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxVPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFA9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sUz1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LEU9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLGE9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2EoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVUocikpP2kuY2FsbChyLGMsYSk6YyhyKSk6YShuKX1jYXRjaCh1KXthKHUpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO0wobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxMPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFMKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LFI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLEUodCwhMCkpfSxUPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVUoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKFQsbiwxKSxjKFIsbiwxKSl9Y2F0Y2gobyl7Ui5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLEUociwhMSkpfWNhdGNoKG4pe1IuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhULHQsMSksYyhSLHQsMSkpfWNhdGNoKHIpe1IuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFAoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJkUobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sdSh1LlMrdS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUCh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBQKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IFAodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UyhmdW5jdGlvbigpe3YoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUCh0KSxuPXIucmVqZWN0LG89UyhmdW5jdGlvbigpe3YoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsY1siZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBuPXRoaXM7bi5tZXNzYWdlQnVzPXIsbi5kb21haW49KDAsZi5kaXZpZGVVUkwpKHQpLmRvbWFpbixuLmRpc2NvdmVyeVVSTD10fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ZSxzZWFyY2g6ImRhdGFPYmplY3RQZXJVUkwifX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihyKXt2YXIgbj1yLmJvZHkudmFsdWU7bj9lKG4pOnQoIkRhdGFPYmplY3Qgbm90IGZvdW5kIil9KX0pfX0se2tleToiZGVsZXRlRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPXt0eXBlOiJkZWxldGUiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7dmFsdWU6e25hbWU6ZX19fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS5jb2RlOzIwMD09PW4/ZShuKTp0KCJFcnJvciBvbiBkZWxldGluZyBkYXRhT2JqZWN0Iil9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyUmVwb3J0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTplLHNlYXJjaDoiZGF0YU9iamVjdFBlclJlcG9ydGVyIn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlO24/ZShuKTp0KCJObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcyxzPXZvaWQgMCxjPSgwLGYuY29udmVydFRvVXNlclVSTCkoZSk7cz1uP246by5kb21haW47dmFyIGE9e3R5cGU6InJlYWQiLGZyb206by5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrcysiLyIsYm9keTp7cmVzb3VyY2U6e3VzZXI6YyxyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0fSxzZWFyY2g6Imh5cGVydHlSZXNvdXJjZXNEYXRhU2NoZW1lcyJ9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe28ubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZTtuP2Uobik6dCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydHlQZXJVc2VyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89InVzZXI6Ly8iK2Uuc3Vic3RyaW5nKGUuaW5kZXhPZigiQCIpKzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZigiQCIpKSxzPXt0eXBlOiJyZWFkIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK24rIi8iLGJvZHk6e3Jlc291cmNlOm8sc2VhcmNoOiJIeXBlcnR5UGVyVXNlciJ9fTtyZXR1cm4gY29uc29sZS5sb2coIk1lc3NhZ2U6ICIscyxuLG8pLG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24odCxuKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtjb25zb2xlLmxvZygibWVzc2FnZSByZXBseSIscik7dmFyIG89dm9pZCAwLGk9dm9pZCAwLHM9dm9pZCAwLGM9ci5ib2R5LnZhbHVlO2ZvcihvIGluIGMpaWYodm9pZCAwIT09Y1tvXS5sYXN0TW9kaWZpZWQpaWYodm9pZCAwPT09aSlpPW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKSxzPW87ZWxzZXt2YXIgYT1uZXcgRGF0ZShjW29dLmxhc3RNb2RpZmllZCk7aS5nZXRUaW1lKCk8YS5nZXRUaW1lKCkmJihpPWEscz1vKX1jb25zb2xlLmxvZygiTGFzdCBIeXBlcnR5OiAiLHMsaSk7dmFyIHU9cztpZih2b2lkIDA9PT11KXJldHVybiBuKCJVc2VyIEh5cGVydHkgbm90IGZvdW5kIik7dmFyIGY9e2lkOmUsZGVzY3JpcHRvcjpjW3VdLmRlc2NyaXB0b3IsaHlwZXJ0eVVSTDp1fTtjb25zb2xlLmxvZygiPT09PiBoeXBlcnR5RGlzY292ZXJ5IG1lc3NhZ2VCdW5kbGU6ICIsZiksdChmKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6byxzZWFyY2g6Ikh5cGVydHlQZXJVc2VyIn19O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXI6ICIscyxuLG8pLG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtjb25zb2xlLmxvZygiZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyIHJlcGx5IixyKTt2YXIgbj1yLmJvZHkudmFsdWU7cmV0dXJuIG4/dm9pZCBlKG4pOnQoIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKX0pfSl9fSx7a2V5OiJkZWxldGVIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxvPXZvaWQgMDtvPXI/cjpuLmRvbWFpbjt2YXIgcz17dHlwZToiZGVsZXRlIixmcm9tOm4uZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK28rIi8iLGJvZHk6e3ZhbHVlOnt1c2VyOmUsaHlwZXJ0eVVSTDp0fX19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LmNvZGU7bj9lKCJIeXBlcnR5IHN1Y2Nlc3NmdWxseSBkZWxldGVkIik6dCgiRXJyb3Igb24gZGVsZXRpbmcgaHlwZXJ0eSIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsdlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBhKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksdj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1hLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBJZGVudGl0eU1hbmFnZXIuanMgCi8vIHZlcnNpb246IDAuMy4wCi8vIExhc3QgYnVpbGQ6IFRodSBKdW4gMDkgMjAxNiAxMjoyODoxNiBHTVQrMDEwMCAoV0VTVCkKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5JZGVudGl0eU1hbmFnZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGMpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJnUpcmV0dXJuIHUocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgYT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgYS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixhfXZhciBmPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGYsZi5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeSI6N31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6OX1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoxMH1dLDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoxNn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjM4fV0sOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NjJ9XSwxMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjYzLCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo2NCwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo2NSwiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo2Nn1dLDExOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6MzF9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjE1LCIuLyQud2tzIjo1OX1dLDE1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMX1dLDE4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDE5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjoyMn1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuaXMtb2JqZWN0IjozMX1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1LGEsZixsPWUmYy5GLHA9ZSZjLkcsZD1lJmMuUywkPWUmYy5QLHY9ZSZjLkIsaD1lJmMuVyx5PXA/bzpvW3RdfHwob1t0XT17fSksYj1wP246ZD9uW3RdOihuW3RdfHx7fSlbc107cCYmKHI9dCk7Zm9yKHUgaW4gcilhPSFsJiZiJiZ1IGluIGIsYSYmdSBpbiB5fHwoZj1hP2JbdV06clt1XSx5W3VdPXAmJiJmdW5jdGlvbiIhPXR5cGVvZiBiW3VdP3JbdV06diYmYT9pKGYsbik6aCYmYlt1XT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShmKTokJiYiZnVuY3Rpb24iPT10eXBlb2YgZj9pKEZ1bmN0aW9uLmNhbGwsZik6ZiwkJiYoKHlbc118fCh5W3NdPXt9KSlbdV09ZikpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLHQuZXhwb3J0cz1jfSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5nbG9iYWwiOjI0fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYz1lKCIuLyQudG8tbGVuZ3RoIiksdT1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgZixsLHAsZD11KGUpLCQ9bihyLGEsdD8yOjEpLHY9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKGQpKWZvcihmPWMoZS5sZW5ndGgpO2Y+djt2KyspdD8kKHMobD1lW3ZdKVswXSxsWzFdKTokKGVbdl0pO2Vsc2UgZm9yKHA9ZC5jYWxsKGUpOyEobD1wLm5leHQoKSkuZG9uZTspbyhwLCQsbC52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtYXJyYXktaXRlciI6MzAsIi4vJC5pdGVyLWNhbGwiOjMyLCIuLyQudG8tbGVuZ3RoIjo1NiwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjYwfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6MzgsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5wcm9wZXJ0eS1kZXNjIjo0Mn1dLDI3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjI0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjoxNX1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6MTN9XSwzMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6MzgsIi4vJC5oaWRlIjoyNiwiLi8kLnByb3BlcnR5LWRlc2MiOjQyLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYz1lKCIuLyQuaGFzIiksdT1lKCIuLyQuaXRlcmF0b3JzIiksYT1lKCIuLyQuaXRlci1jcmVhdGUiKSxmPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGw9ZSgiLi8kIikuZ2V0UHJvdG8scD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSwkPSJAQGl0ZXJhdG9yIix2PSJrZXlzIixoPSJ2YWx1ZXMiLHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGIsbSxnLHgpe2Eocix0LGIpO3ZhciBqLHcsXz1mdW5jdGlvbihlKXtpZighZCYmZSBpbiBTKXJldHVybiBTW2VdO3N3aXRjaChlKXtjYXNlIHY6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgaDpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIsTz1tPT1oLE09ITEsUz1lLnByb3RvdHlwZSxFPVNbcF18fFNbJF18fG0mJlNbbV0sUD1FfHxfKG0pO2lmKEUpe3ZhciBUPWwoUC5jYWxsKG5ldyBlKSk7ZihULGssITApLCFuJiZjKFMsJCkmJnMoVCxwLHkpLE8mJkUubmFtZSE9PWgmJihNPSEwLFA9ZnVuY3Rpb24oKXtyZXR1cm4gRS5jYWxsKHRoaXMpfSl9aWYobiYmIXh8fCFkJiYhTSYmU1twXXx8cyhTLHAsUCksdVt0XT1QLHVba109eSxtKWlmKGo9e3ZhbHVlczpPP1A6XyhoKSxrZXlzOmc/UDpfKHYpLGVudHJpZXM6Tz9fKCJlbnRyaWVzIik6UH0seClmb3IodyBpbiBqKXcgaW4gU3x8aShTLHcsalt3XSk7ZWxzZSBvKG8uUCtvLkYqKGR8fE0pLHQsaik7cmV0dXJuIGp9fSx7Ii4vJCI6MzgsIi4vJC5leHBvcnQiOjIxLCIuLyQuaGFzIjoyNSwiLi8kLmhpZGUiOjI2LCIuLyQuaXRlci1jcmVhdGUiOjMzLCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLmxpYnJhcnkiOjM5LCIuLyQucmVkZWZpbmUiOjQ0LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQud2tzIjo1OX1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYyl7fXJldHVybiByfX0seyIuLyQud2tzIjo1OX1dLDM2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLnRhc2siKS5zZXQsdT1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPXMucHJvY2VzcyxmPXMuUHJvbWlzZSxsPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGEpLHA9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGwmJihlPWEuZG9tYWluKSYmKGEuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihsKWk9ZnVuY3Rpb24oKXthLm5leHRUaWNrKHApfTtlbHNlIGlmKHUpe3ZhciBkPTEsJD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IHUocCkub2JzZXJ2ZSgkLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpeyQuZGF0YT1kPS1kfX1lbHNlIGk9ZiYmZi5yZXNvbHZlP2Z1bmN0aW9uKCl7Zi5yZXNvbHZlKCkudGhlbihwKX06ZnVuY3Rpb24oKXtjLmNhbGwocyxwKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpsJiZhLmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjoxNSwiLi8kLmdsb2JhbCI6MjQsIi4vJC50YXNrIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjoxNiwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mYWlscyI6MjJ9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjQ0fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6MjZ9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjozOCwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jdHgiOjE3LCIuLyQuaXMtb2JqZWN0IjozMX1dLDQ3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjozOCwiLi8kLmNvcmUiOjE2LCIuLyQuZGVzY3JpcHRvcnMiOjE5LCIuLyQud2tzIjo1OX1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjozOCwiLi8kLmhhcyI6MjUsIi4vJC53a3MiOjU5fV0sNDk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6MjR9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQud2tzIjo1OX1dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDUyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYz1TdHJpbmcobyh0KSksdT1uKHIpLGE9Yy5sZW5ndGg7cmV0dXJuIDA+dXx8dT49YT9lPyIiOnZvaWQgMDooaT1jLmNoYXJDb2RlQXQodSksNTUyOTY+aXx8aT41NjMxOXx8dSsxPT09YXx8KHM9Yy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxzPjU3MzQzP2U/Yy5jaGFyQXQodSk6aTplP2Muc2xpY2UodSx1KzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLnRvLWludGVnZXIiOjU0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYz1lKCIuLyQuaW52b2tlIiksdT1lKCIuLyQuaHRtbCIpLGE9ZSgiLi8kLmRvbS1jcmVhdGUiKSxmPWUoIi4vJC5nbG9iYWwiKSxsPWYucHJvY2VzcyxwPWYuc2V0SW1tZWRpYXRlLGQ9Zi5jbGVhckltbWVkaWF0ZSwkPWYuTWVzc2FnZUNoYW5uZWwsdj0wLGg9e30seT0ib25yZWFkeXN0YXRlY2hhbmdlIixiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoaC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9aFtlXTtkZWxldGUgaFtlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtwJiZkfHwocD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gaFsrK3ZdPWZ1bmN0aW9uKCl7YygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKHYpLHZ9LGQ9ZnVuY3Rpb24oZSl7ZGVsZXRlIGhbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OiQ/KG89bmV3ICQsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7Zi5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbSwhMSkpOm49eSBpbiBhKCJzY3JpcHQiKT9mdW5jdGlvbihlKXt1LmFwcGVuZENoaWxkKGEoInNjcmlwdCIpKVt5XT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKGIsZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OnAsY2xlYXI6ZH19LHsiLi8kLmNvZiI6MTUsIi4vJC5jdHgiOjE3LCIuLyQuZG9tLWNyZWF0ZSI6MjAsIi4vJC5nbG9iYWwiOjI0LCIuLyQuaHRtbCI6MjcsIi4vJC5pbnZva2UiOjI4fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjoxOCwiLi8kLmlvYmplY3QiOjI5fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo1NH1dLDU3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjoyNCwiLi8kLnNoYXJlZCI6NDksIi4vJC51aWQiOjU4fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjE0LCIuLyQuY29yZSI6MTYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQud2tzIjo1OX1dLDYxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MTIsIi4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5pdGVyLXN0ZXAiOjM2LCIuLyQuaXRlcmF0b3JzIjozNywiLi8kLnRvLWlvYmplY3QiOjU1fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgia2V5cyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo0MSwiLi8kLnRvLW9iamVjdCI6NTd9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe30se31dLDY0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGM9ZSgiLi8kLmN0eCIpLHU9ZSgiLi8kLmNsYXNzb2YiKSxhPWUoIi4vJC5leHBvcnQiKSxmPWUoIi4vJC5pcy1vYmplY3QiKSxsPWUoIi4vJC5hbi1vYmplY3QiKSxwPWUoIi4vJC5hLWZ1bmN0aW9uIiksZD1lKCIuLyQuc3RyaWN0LW5ldyIpLCQ9ZSgiLi8kLmZvci1vZiIpLHY9ZSgiLi8kLnNldC1wcm90byIpLnNldCxoPWUoIi4vJC5zYW1lLXZhbHVlIikseT1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxiPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksbT1lKCIuLyQubWljcm90YXNrIiksZz0iUHJvbWlzZSIseD1zLnByb2Nlc3Msaj0icHJvY2VzcyI9PXUoeCksdz1zW2ddLF89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gdihyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmXygpLHYodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOmgoZSx0KX0sTT1mdW5jdGlvbihlKXt2YXIgdD1sKGUpW3ldO3JldHVybiB2b2lkIDAhPXQ/dDplfSxTPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBmKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LEU9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPXAodCksdGhpcy5yZWplY3Q9cChyKX0sUD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFQ9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO20oZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxjPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGM9dC5yZXNvbHZlLHU9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP3UoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVMocikpP2kuY2FsbChyLGMsdSk6YyhyKSk6dShuKX1jYXRjaChhKXt1KGEpfX07ci5sZW5ndGg+aTspYyhyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO1UobykmJihqP3guZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxVPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFVKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFQodCwhMCkpfSxDPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVMoZSkpP20oZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxjKEMsbiwxKSxjKEEsbiwxKSl9Y2F0Y2gobyl7QS5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFQociwhMSkpfWNhdGNoKG4pe0EuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe3AoZSk7dmFyIHQ9dGhpcy5fZD17cDpkKHRoaXMsdyxnKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYyhDLHQsMSksYyhBLHQsMSkpfWNhdGNoKHIpe0EuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IEUoYih0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlQobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksYShhLkcrYS5XK2EuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxnKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShnKSxuPWUoIi4vJC5jb3JlIilbZ10sYShhLlMrYS5GKiFrLGcse3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRSh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqKCFrfHxfKCEwKSksZyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmTyhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBFKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSxhKGEuUythLkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLGcse2FsbDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpLHI9bmV3IEUodCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGM9UChmdW5jdGlvbigpeyQoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYz1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxjW29dPWUsLS1yfHxuKGMpKX0saSl9KTpuKGMpfSk7cmV0dXJuIGMmJmkoYy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgRSh0KSxuPXIucmVqZWN0LG89UChmdW5jdGlvbigpeyQoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjM4LCIuLyQuYS1mdW5jdGlvbiI6MTEsIi4vJC5hbi1vYmplY3QiOjEzLCIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLmN0eCI6MTcsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC5leHBvcnQiOjIxLCIuLyQuZm9yLW9mIjoyMywiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxLCIuLyQuaXRlci1kZXRlY3QiOjM1LCIuLyQubGlicmFyeSI6MzksIi4vJC5taWNyb3Rhc2siOjQwLCIuLyQucmVkZWZpbmUtYWxsIjo0MywiLi8kLnNhbWUtdmFsdWUiOjQ1LCIuLyQuc2V0LXByb3RvIjo0NiwiLi8kLnNldC1zcGVjaWVzIjo0NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo0OCwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjUwLCIuLyQuc3RyaWN0LW5ldyI6NTEsIi4vJC53a3MiOjU5fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6MzQsIi4vJC5zdHJpbmctYXQiOjUyfV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjozNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjYxfV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxjPW4ocyksdT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4odSksZj1lKCIuLi91dGlscy91dGlscyIpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG89dGhpcztvLm1lc3NhZ2VCdXM9bixvLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG8uaHlwZXJ0eVVSTD10LG8ucnVudGltZVVSTD1yfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwLG89ZT9lOiIuIjtuPXQ/dDpyLmh5cGVydHlVUkw7dmFyIHM9e3R5cGU6InJlYWQiLGZyb206bix0bzpyLnJ1bnRpbWVVUkwrIi9yZWdpc3RyeS8iLGJvZHk6e3Jlc291cmNlOm8sY3JpdGVyaWE6bn19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnJlc291cmNlO24/ZShuKTp0KCJObyB1c2VyIHdhcyBub3QgZm91bmQiKX0pfSl9fV0pLGV9KCk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscyI6NjgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6Nn1dLDY4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlKXtpZighZSl0aHJvdyBFcnJvcigiVVJMIGlzIG5lZWRlZCB0byBzcGxpdCIpO3ZhciB0PS8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpLHI9IiQxLCQyLCQzIixuPWUucmVwbGFjZSh0LHIpLnNwbGl0KCIsIik7blswXT09PWUmJihuWzBdPSJodHRwcyIsblsxXT1lKTt2YXIgbz17dHlwZTpuWzBdLGRvbWFpbjpuWzFdLGlkZW50aXR5Om5bMl19O3JldHVybiBvfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIikscj17dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX07cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlKXtyZXR1cm4hKCgwLCRbImRlZmF1bHQiXSkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGU/SlNPTi5wYXJzZSgoMCxwWyJkZWZhdWx0Il0pKGUpKTp2b2lkIDB9ZnVuY3Rpb24gdShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX1mdW5jdGlvbiBhKGUpe3ZhciB0PW8oZSk7cmV0dXJuIHQuaWRlbnRpdHkucmVwbGFjZSgiLyIsIiIpKyJAIit0LmRvbWFpbn1mdW5jdGlvbiBmKGUpe2lmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PW8oZSk7aWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIHUoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBsPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSIpLHA9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLCQ9bihkKTtyLmRpdmlkZVVSTD1vLHIuZGl2aWRlRW1haWw9aSxyLmVtcHR5T2JqZWN0PXMsci5kZWVwQ2xvbmU9YyxyLmdldFVzZXJVUkxGcm9tRW1haWw9dSxyLmdldFVzZXJFbWFpbEZyb21VUkw9YSxyLmNvbnZlcnRUb1VzZXJVUkw9Zn0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiOjEsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6M31dfSx7fSxbNjddKSg2Nyl9KTsKCgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgU3luY2hlci5qcyAKLy8gdmVyc2lvbjogMC4zLjAKLy8gTGFzdCBidWlsZDogVGh1IEp1biAwOSAyMDE2IDEyOjI4OjI0IEdNVCswMTAwIChXRVNUKQoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlN5bmNoZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gbyhzLGEpe2lmKCFyW3NdKXtpZighdFtzXSl7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJmMpcmV0dXJuIGMocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgdT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgdS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIix1fXZhciBsPXJbc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHI9dFtzXVsxXVtlXTtyZXR1cm4gbyhyP3I6ZSl9LGwsbC5leHBvcnRzLGUsdCxyLG4pfXJldHVybiByW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylvKG5bc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe09iamVjdC5vYnNlcnZlJiYhQXJyYXkub2JzZXJ2ZSYmZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIHI9ZS5nZXROb3RpZmllcixuPSJwZXJmb3JtQ2hhbmdlIixvPSJfb3JpZ2luYWwiLGk9InNwbGljZSIscz17cHVzaDpmdW5jdGlvbiBjKGUpe3ZhciB0PWFyZ3VtZW50cyxzPWNbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnMtdC5sZW5ndGgsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHVuc2hpZnQ6ZnVuY3Rpb24gdShlKXt2YXIgdD1hcmd1bWVudHMscz11W29dLmFwcGx5KHRoaXMsdCk7cmV0dXJuIHIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDowLGFkZGVkQ291bnQ6dC5sZW5ndGgscmVtb3ZlZDpbXX19KSxzfSxwb3A6ZnVuY3Rpb24gbCgpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9bFtvXS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmxlbmd0aCE9PWUmJnIodGhpcylbbl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDp0aGlzLmxlbmd0aCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzaGlmdDpmdW5jdGlvbiBmKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1mW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDowLHJlbW92ZWQ6W3RdfX0sdGhpcyksdH0sc3BsaWNlOmZ1bmN0aW9uIGQoZSx0KXt2YXIgcz1hcmd1bWVudHMsYT1kW29dLmFwcGx5KHRoaXMscyk7cmV0dXJuKGEubGVuZ3RofHxzLmxlbmd0aD4yKSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OmUsYWRkZWRDb3VudDpzLmxlbmd0aC0yLHJlbW92ZWQ6YX19LHRoaXMpLGF9fTtmb3IodmFyIGEgaW4gcylzW2FdW29dPXQucHJvdG90eXBlW2FdLHQucHJvdG90eXBlW2FdPXNbYV07dC5vYnNlcnZlPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUub2JzZXJ2ZSh0LHIsWyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLGldKX0sdC51bm9ic2VydmU9ZS51bm9ic2VydmV9KE9iamVjdCxBcnJheSl9LHt9XSwyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IjoxN31dLDM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIjoxOH1dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoxOX1dLDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjoyMH1dLDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjIxfV0sNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6MjJ9XSw4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjoyM31dLDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoyNH1dLDEwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjI1fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0se31dLDEyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxpWyJkZWZhdWx0Il0pKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpfSx7Ii4uL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSI6NH1dLDEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbz0hMDtvOyl7dmFyIGk9ZSxzPXQsYT1yO289ITEsbnVsbD09PWkmJihpPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIGM9bihpLHMpO2lmKHZvaWQgMCE9PWMpe2lmKCJ2YWx1ZSJpbiBjKXJldHVybiBjLnZhbHVlO3ZhciB1PWMuZ2V0O2lmKHZvaWQgMD09PXUpcmV0dXJuO3JldHVybiB1LmNhbGwoYSl9dmFyIGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGkpO2lmKG51bGw9PT1sKXJldHVybjtlPWwsdD1zLHI9YSxvPSEwLGM9bD12b2lkIDB9fSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjV9XSwxNDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHQpO2UucHJvdG90eXBlPW4odCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihvP28oZSx0KTplLl9fcHJvdG9fXz10KX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjh9XSwxNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGk9bihvKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsaVsiZGVmYXVsdCJdKSh0KSkmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6dH19LHsiLi4vaGVscGVycy90eXBlb2YiOjE2fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmNvbnN0cnVjdG9yPT09bj8ic3ltYm9sIjp0eXBlb2YgZX0sci5fX2VzTW9kdWxlPSEwfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wiOjEwfV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4obi5KU09OJiZuLkpTT04uc3RyaW5naWZ5fHxKU09OLnN0cmluZ2lmeSkuYXBwbHkoSlNPTixhcmd1bWVudHMpfX0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzF9XSwxODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LHIpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2fV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ2V0RGVzYyhlLHQpfX0seyIuLi8uLi9tb2R1bGVzLyQiOjU2LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjo4MX1dLDIxOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiI6ODJ9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6ODN9XSwyMzpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LnNldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiOjg0fV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksZSgiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIiksZSgiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIiksZSgiLi4vbW9kdWxlcy9lczYucHJvbWlzZSIpLHQuZXhwb3J0cz1lKCIuLi9tb2R1bGVzLyQuY29yZSIpLlByb21pc2V9LHsiLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vbW9kdWxlcy9lczYucHJvbWlzZSI6ODYsIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6ODcsIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6ODl9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCIpLGUoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5TeW1ib2x9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo4NSwiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIjo4OH1dLDI2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSx7fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSx7fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LHsiLi8kLmlzLW9iamVjdCI6NDl9XSwyOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKSxvPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKSxpPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPSh0PU9iamVjdChlKSlbb10pP3I6aT9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSx7Ii4vJC5jb2YiOjMwLCIuLyQud2tzIjo3OH1dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjEuMi42In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hLWZ1bmN0aW9uIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSx7Ii4vJC5hLWZ1bmN0aW9uIjoyNn1dLDMzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0se31dLDM0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSFlKCIuLyQuZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi8kLmZhaWxzIjozOH1dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpLG89ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDM2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0S2V5cyhlKSxyPW4uZ2V0U3ltYm9scztpZihyKWZvcih2YXIgbyxpPXIoZSkscz1uLmlzRW51bSxhPTA7aS5sZW5ndGg+YTspcy5jYWxsKGUsbz1pW2ErK10pJiZ0LnB1c2gobyk7cmV0dXJuIHR9fSx7Ii4vJCI6NTZ9XSwzNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuY3R4Iikscz0icHJvdG90eXBlIixhPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyx1LGwsZj1lJmEuRixkPWUmYS5HLHA9ZSZhLlMsYj1lJmEuUCxoPWUmYS5CLHk9ZSZhLlcsdj1kP286b1t0XXx8KG9bdF09e30pLF89ZD9uOnA/blt0XTooblt0XXx8e30pW3NdO2QmJihyPXQpO2ZvcihjIGluIHIpdT0hZiYmXyYmYyBpbiBfLHUmJmMgaW4gdnx8KGw9dT9fW2NdOnJbY10sdltjXT1kJiYiZnVuY3Rpb24iIT10eXBlb2YgX1tjXT9yW2NdOmgmJnU/aShsLG4pOnkmJl9bY109PWw/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBlP25ldyBlKHQpOmUodCl9O3JldHVybiB0W3NdPWVbc10sdH0obCk6YiYmImZ1bmN0aW9uIj09dHlwZW9mIGw/aShGdW5jdGlvbi5jYWxsLGwpOmwsYiYmKCh2W3NdfHwodltzXT17fSkpW2NdPWwpKX07YS5GPTEsYS5HPTIsYS5TPTQsYS5QPTgsYS5CPTE2LGEuVz0zMix0LmV4cG9ydHM9YX0seyIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZ2xvYmFsIjo0MX1dLDM4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaCh0KXtyZXR1cm4hMH19fSx7fV0sMzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY3R4Iiksbz1lKCIuLyQuaXRlci1jYWxsIiksaT1lKCIuLyQuaXMtYXJyYXktaXRlciIpLHM9ZSgiLi8kLmFuLW9iamVjdCIpLGE9ZSgiLi8kLnRvLWxlbmd0aCIpLGM9ZSgiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdSl7dmFyIGwsZixkLHA9YyhlKSxiPW4ocix1LHQ/MjoxKSxoPTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHApdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgaXRlcmFibGUhIik7aWYoaShwKSlmb3IobD1hKGUubGVuZ3RoKTtsPmg7aCsrKXQ/YihzKGY9ZVtoXSlbMF0sZlsxXSk6YihlW2hdKTtlbHNlIGZvcihkPXAuY2FsbChlKTshKGY9ZC5uZXh0KCkpLmRvbmU7KW8oZCxiLGYudmFsdWUsdCl9fSx7Ii4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLWFycmF5LWl0ZXIiOjQ3LCIuLyQuaXRlci1jYWxsIjo1MCwiLi8kLnRvLWxlbmd0aCI6NzUsIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIjo3OX1dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKSxvPWUoIi4vJCIpLmdldE5hbWVzLGk9e30udG9TdHJpbmcscz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxhPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaCh0KXtyZXR1cm4gcy5zbGljZSgpfX07dC5leHBvcnRzLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gcyYmIltvYmplY3QgV2luZG93XSI9PWkuY2FsbChlKT9hKGUpOm8obihlKSl9fSx7Ii4vJCI6NTYsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPW4pfSx7fV0sNDI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jYWxsKGUsdCl9fSx7fV0sNDM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIik7dC5leHBvcnRzPWUoIi4vJC5kZXNjcmlwdG9ycyIpP2Z1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxvKDEscikpfTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGVbdF09cixlfX0seyIuLyQiOjU2LCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQucHJvcGVydHktZGVzYyI6NjF9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudH0seyIuLyQuZ2xvYmFsIjo0MX1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA9PT1yO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuP2UoKTplLmNhbGwocik7Y2FzZSAxOnJldHVybiBuP2UodFswXSk6ZS5jYWxsKHIsdFswXSk7Y2FzZSAyOnJldHVybiBuP2UodFswXSx0WzFdKTplLmNhbGwocix0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0sdFszXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0sdFszXSl9cmV0dXJuIGUuYXBwbHkocix0KX19LHt9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LHsiLi8kLmNvZiI6MzB9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw0ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jb2YiKTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIkFycmF5Ij09bihlKX19LHsiLi8kLmNvZiI6MzB9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/bnVsbCE9PWU6ImZ1bmN0aW9uIj09dHlwZW9mIGV9fSx7fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG8pe3RyeXtyZXR1cm4gbz90KG4ocilbMF0sclsxXSk6dChyKX1jYXRjaChpKXt2YXIgcz1lWyJyZXR1cm4iXTt0aHJvdyB2b2lkIDAhPT1zJiZuKHMuY2FsbChlKSksaX19fSx7Ii4vJC5hbi1vYmplY3QiOjI4fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpLGk9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikscz17fTtlKCIuLyQuaGlkZSIpKHMsZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4uY3JlYXRlKHMse25leHQ6bygxLHIpfSksaShlLHQrIiBJdGVyYXRvciIpfX0seyIuLyQiOjU2LCIuLyQuaGlkZSI6NDMsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQubGlicmFyeSIpLG89ZSgiLi8kLmV4cG9ydCIpLGk9ZSgiLi8kLnJlZGVmaW5lIikscz1lKCIuLyQuaGlkZSIpLGE9ZSgiLi8kLmhhcyIpLGM9ZSgiLi8kLml0ZXJhdG9ycyIpLHU9ZSgiLi8kLml0ZXItY3JlYXRlIiksbD1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxmPWUoIi4vJCIpLmdldFByb3RvLGQ9ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLHA9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSksYj0iQEBpdGVyYXRvciIsaD0ia2V5cyIseT0idmFsdWVzIix2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixfLGcsbSxqKXt1KHIsdCxfKTt2YXIgJCx3LE89ZnVuY3Rpb24oZSl7aWYoIXAmJmUgaW4gRSlyZXR1cm4gRVtlXTtzd2l0Y2goZSl7Y2FzZSBoOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfTtjYXNlIHk6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0saz10KyIgSXRlcmF0b3IiLHg9Zz09eSxDPSExLEU9ZS5wcm90b3R5cGUsUz1FW2RdfHxFW2JdfHxnJiZFW2ddLFQ9U3x8TyhnKTtpZihTKXt2YXIgUj1mKFQuY2FsbChuZXcgZSkpO2woUixrLCEwKSwhbiYmYShFLGIpJiZzKFIsZCx2KSx4JiZTLm5hbWUhPT15JiYoQz0hMCxUPWZ1bmN0aW9uKCl7cmV0dXJuIFMuY2FsbCh0aGlzKX0pfWlmKG4mJiFqfHwhcCYmIUMmJkVbZF18fHMoRSxkLFQpLGNbdF09VCxjW2tdPXYsZylpZigkPXt2YWx1ZXM6eD9UOk8oeSksa2V5czptP1Q6TyhoKSxlbnRyaWVzOng/TygiZW50cmllcyIpOlR9LGopZm9yKHcgaW4gJCl3IGluIEV8fGkoRSx3LCRbd10pO2Vsc2UgbyhvLlArby5GKihwfHxDKSx0LCQpO3JldHVybiAkfX0seyIuLyQiOjU2LCIuLyQuZXhwb3J0IjozNywiLi8kLmhhcyI6NDIsIi4vJC5oaWRlIjo0MywiLi8kLml0ZXItY3JlYXRlIjo1MSwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC5saWJyYXJ5Ijo1OCwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLndrcyI6Nzh9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxvPSExO3RyeXt2YXIgaT1bN11bbl0oKTtpWyJyZXR1cm4iXT1mdW5jdGlvbigpe289ITB9LEFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChzKXt9dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgaT1bN10scz1pW25dKCk7cy5uZXh0PWZ1bmN0aW9uKCl7cj0hMH0saVtuXT1mdW5jdGlvbigpe3JldHVybiBzfSxlKGkpfWNhdGNoKGEpe31yZXR1cm4gcn19LHsiLi8kLndrcyI6Nzh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17fX0se31dLDU2OltmdW5jdGlvbihlLHQscil7dmFyIG49T2JqZWN0O3QuZXhwb3J0cz17Y3JlYXRlOm4uY3JlYXRlLGdldFByb3RvOm4uZ2V0UHJvdG90eXBlT2YsaXNFbnVtOnt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLGdldERlc2M6bi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Isc2V0RGVzYzpuLmRlZmluZVByb3BlcnR5LHNldERlc2NzOm4uZGVmaW5lUHJvcGVydGllcyxnZXRLZXlzOm4ua2V5cyxnZXROYW1lczpuLmdldE93blByb3BlcnR5TmFtZXMsZ2V0U3ltYm9sczpuLmdldE93blByb3BlcnR5U3ltYm9scyxlYWNoOltdLmZvckVhY2h9fSx7fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLGk9byhlKSxzPW4uZ2V0S2V5cyhpKSxhPXMubGVuZ3RoLGM9MDthPmM7KWlmKGlbcj1zW2MrK11dPT09dClyZXR1cm4gcn19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ITB9LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC50YXNrIikuc2V0LGM9cy5NdXRhdGlvbk9ic2VydmVyfHxzLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsdT1zLnByb2Nlc3MsbD1zLlByb21pc2UsZj0icHJvY2VzcyI9PWUoIi4vJC5jb2YiKSh1KSxkPWZ1bmN0aW9uKCl7dmFyIGUsdCxyO2ZvcihmJiYoZT11LmRvbWFpbikmJih1LmRvbWFpbj1udWxsLGUuZXhpdCgpKTtuOyl0PW4uZG9tYWluLHI9bi5mbix0JiZ0LmVudGVyKCkscigpLHQmJnQuZXhpdCgpLG49bi5uZXh0O289dm9pZCAwLGUmJmUuZW50ZXIoKX07aWYoZilpPWZ1bmN0aW9uKCl7dS5uZXh0VGljayhkKX07ZWxzZSBpZihjKXt2YXIgcD0xLGI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyBjKGQpLm9ic2VydmUoYix7Y2hhcmFjdGVyRGF0YTohMH0pLGk9ZnVuY3Rpb24oKXtiLmRhdGE9cD0tcH19ZWxzZSBpPWwmJmwucmVzb2x2ZT9mdW5jdGlvbigpe2wucmVzb2x2ZSgpLnRoZW4oZCl9OmZ1bmN0aW9uKCl7YS5jYWxsKHMsZCl9O3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD17Zm46ZSxuZXh0OnZvaWQgMCxkb21haW46ZiYmdS5kb21haW59O28mJihvLm5leHQ9dCksbnx8KG49dCxpKCkpLG89dH19LHsiLi8kLmNvZiI6MzAsIi4vJC5nbG9iYWwiOjQxLCIuLyQudGFzayI6NzJ9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5leHBvcnQiKSxvPWUoIi4vJC5jb3JlIiksaT1lKCIuLyQuZmFpbHMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0seyIuLyQuY29yZSI6MzEsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSx7fV0sNjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQucmVkZWZpbmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCluKGUscix0W3JdKTtyZXR1cm4gZX19LHsiLi8kLnJlZGVmaW5lIjo2M31dLDYzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5oaWRlIil9LHsiLi8kLmhpZGUiOjQzfV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9T2JqZWN0LmlzfHxmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dD8wIT09ZXx8MS9lPT09MS90OmUhPWUmJnQhPXR9fSx7fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5nZXREZXNjLG89ZSgiLi8kLmlzLW9iamVjdCIpLGk9ZSgiLi8kLmFuLW9iamVjdCIpLHM9ZnVuY3Rpb24oZSx0KXtpZihpKGUpLCFvKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IodCsiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/ZnVuY3Rpb24odCxyLG8pe3RyeXtvPWUoIi4vJC5jdHgiKShGdW5jdGlvbi5jYWxsLG4oT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG8odCxbXSkscj0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goaSl7cj0hMH1yZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyhlLHQpLHI/ZS5fX3Byb3RvX189dDpvKGUsdCksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOnN9fSx7Ii4vJCI6NTYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY3R4IjozMiwiLi8kLmlzLW9iamVjdCI6NDl9XSw2NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuY29yZSIpLG89ZSgiLi8kIiksaT1lKCIuLyQuZGVzY3JpcHRvcnMiKSxzPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uW2VdO2kmJnQmJiF0W3NdJiZvLnNldERlc2ModCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSx7Ii4vJCI6NTYsIi4vJC5jb3JlIjozMSwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLndrcyI6Nzh9XSw2NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLnNldERlc2Msbz1lKCIuLyQuaGFzIiksaT1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhbyhlPXI/ZTplLnByb3RvdHlwZSxpKSYmbihlLGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSx7Ii4vJCI6NTYsIi4vJC5oYXMiOjQyLCIuLyQud2tzIjo3OH1dLDY4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89Il9fY29yZS1qc19zaGFyZWRfXyIsaT1uW29dfHwobltvXT17fSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfHwoaVtlXT17fSl9fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYW4tb2JqZWN0Iiksbz1lKCIuLyQuYS1mdW5jdGlvbiIpLGk9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1uKGUpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1zfHx2b2lkIDA9PShyPW4ocylbaV0pP3Q6byhyKX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLndrcyI6Nzh9XSw3MDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgVHlwZUVycm9yKHIrIjogdXNlIHRoZSAnbmV3JyBvcGVyYXRvciEiKTtyZXR1cm4gZX19LHt9XSw3MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxzLGE9U3RyaW5nKG8odCkpLGM9bihyKSx1PWEubGVuZ3RoO3JldHVybiAwPmN8fGM+PXU/ZT8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KGMpLDU1Mjk2Pml8fGk+NTYzMTl8fGMrMT09PXV8fChzPWEuY2hhckNvZGVBdChjKzEpKTw1NjMyMHx8cz41NzM0Mz9lP2EuY2hhckF0KGMpOmk6ZT9hLnNsaWNlKGMsYysyKTooaS01NTI5Njw8MTApKyhzLTU2MzIwKSs2NTUzNil9fX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC50by1pbnRlZ2VyIjo3M31dLDcyOltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmN0eCIpLGE9ZSgiLi8kLmludm9rZSIpLGM9ZSgiLi8kLmh0bWwiKSx1PWUoIi4vJC5kb20tY3JlYXRlIiksbD1lKCIuLyQuZ2xvYmFsIiksZj1sLnByb2Nlc3MsZD1sLnNldEltbWVkaWF0ZSxwPWwuY2xlYXJJbW1lZGlhdGUsYj1sLk1lc3NhZ2VDaGFubmVsLGg9MCx5PXt9LHY9Im9ucmVhZHlzdGF0ZWNoYW5nZSIsXz1mdW5jdGlvbigpe3ZhciBlPSt0aGlzO2lmKHkuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PXlbZV07ZGVsZXRlIHlbZV0sdCgpfX0sZz1mdW5jdGlvbihlKXtfLmNhbGwoZS5kYXRhKX07ZCYmcHx8KGQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIHlbKytoXT1mdW5jdGlvbigpe2EoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSx0KX0sbihoKSxofSxwPWZ1bmN0aW9uKGUpe2RlbGV0ZSB5W2VdfSwicHJvY2VzcyI9PWUoIi4vJC5jb2YiKShmKT9uPWZ1bmN0aW9uKGUpe2YubmV4dFRpY2socyhfLGUsMSkpfTpiPyhvPW5ldyBiLGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1nLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmwuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhbC5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2wucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxsLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGcsITEpKTpuPXYgaW4gdSgic2NyaXB0Iik/ZnVuY3Rpb24oZSl7Yy5hcHBlbmRDaGlsZCh1KCJzY3JpcHQiKSlbdl09ZnVuY3Rpb24oKXtjLnJlbW92ZUNoaWxkKHRoaXMpLF8uY2FsbChlKX19OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQocyhfLGUsMSksMCl9KSx0LmV4cG9ydHM9e3NldDpkLGNsZWFyOnB9fSx7Ii4vJC5jb2YiOjMwLCIuLyQuY3R4IjozMiwiLi8kLmRvbS1jcmVhdGUiOjM1LCIuLyQuZ2xvYmFsIjo0MSwiLi8kLmh0bWwiOjQ0LCIuLyQuaW52b2tlIjo0NX1dLDczOltmdW5jdGlvbihlLHQscil7dmFyIG49TWF0aC5jZWlsLG89TWF0aC5mbG9vcjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9vOm4pKGUpfX0se31dLDc0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlvYmplY3QiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0seyIuLyQuZGVmaW5lZCI6MzMsIi4vJC5pb2JqZWN0Ijo0Nn1dLDc1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP28obihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0seyIuLyQudG8taW50ZWdlciI6NzN9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSx7Ii4vJC5kZWZpbmVkIjozM31dLDc3OltmdW5jdGlvbihlLHQscil7dmFyIG49MCxvPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrbitvKS50b1N0cmluZygzNikpfX0se31dLDc4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnNoYXJlZCIpKCJ3a3MiKSxvPWUoIi4vJC51aWQiKSxpPWUoIi4vJC5nbG9iYWwiKS5TeW1ib2w7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1pJiZpW2VdfHwoaXx8bykoIlN5bWJvbC4iK2UpKX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5zaGFyZWQiOjY4LCIuLyQudWlkIjo3N31dLDc5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNsYXNzb2YiKSxvPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKTt0LmV4cG9ydHM9ZSgiLi8kLmNvcmUiKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT1lP2Vbb118fGVbIkBAaXRlcmF0b3IiXXx8aVtuKGUpXTp2b2lkIDB9fSx7Ii4vJC5jbGFzc29mIjoyOSwiLi8kLmNvcmUiOjMxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLndrcyI6Nzh9XSw4MDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIiksbz1lKCIuLyQuaXRlci1zdGVwIiksaT1lKCIuLyQuaXRlcmF0b3JzIikscz1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1lKCIuLyQuaXRlci1kZWZpbmUiKShBcnJheSwiQXJyYXkiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD1zKGUpLHRoaXMuX2k9MCx0aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2sscj10aGlzLl9pKys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKToia2V5cyI9PXQ/bygwLHIpOiJ2YWx1ZXMiPT10P28oMCxlW3JdKTpvKDAsW3IsZVtyXV0pfSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxuKCJrZXlzIiksbigidmFsdWVzIiksbigiZW50cmllcyIpfSx7Ii4vJC5hZGQtdG8tdW5zY29wYWJsZXMiOjI3LCIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuaXRlci1zdGVwIjo1NCwiLi8kLml0ZXJhdG9ycyI6NTUsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlKG4odCkscil9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8taW9iamVjdCI6NzR9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo2MCwiLi8kLnRvLW9iamVjdCI6NzZ9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDg0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjplKCIuLyQuc2V0LXByb3RvIikuc2V0fSl9LHsiLi8kLmV4cG9ydCI6MzcsIi4vJC5zZXQtcHJvdG8iOjY1fV0sODU6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSw4NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPWUoIi4vJCIpLGk9ZSgiLi8kLmxpYnJhcnkiKSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5jbGFzc29mIiksdT1lKCIuLyQuZXhwb3J0IiksbD1lKCIuLyQuaXMtb2JqZWN0IiksZj1lKCIuLyQuYW4tb2JqZWN0IiksZD1lKCIuLyQuYS1mdW5jdGlvbiIpLHA9ZSgiLi8kLnN0cmljdC1uZXciKSxiPWUoIi4vJC5mb3Itb2YiKSxoPWUoIi4vJC5zZXQtcHJvdG8iKS5zZXQseT1lKCIuLyQuc2FtZS12YWx1ZSIpLHY9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIiksXz1lKCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciIpLGc9ZSgiLi8kLm1pY3JvdGFzayIpLG09IlByb21pc2UiLGo9cy5wcm9jZXNzLCQ9InByb2Nlc3MiPT1jKGopLHc9c1ttXSxPPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB3KGZ1bmN0aW9uKCl7fSk7cmV0dXJuIGUmJih0LmNvbnN0cnVjdG9yPU9iamVjdCksdy5yZXNvbHZlKHQpPT09dH0saz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9bmV3IHcoZSk7cmV0dXJuIGgocix0LnByb3RvdHlwZSkscn12YXIgcj0hMTt0cnl7aWYocj13JiZ3LnJlc29sdmUmJk8oKSxoKHQsdyksdC5wcm90b3R5cGU9by5jcmVhdGUody5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0fX0pLHQucmVzb2x2ZSg1KS50aGVuKGZ1bmN0aW9uKCl7fSlpbnN0YW5jZW9mIHR8fChyPSExKSxyJiZlKCIuLyQuZGVzY3JpcHRvcnMiKSl7dmFyIG49ITE7dy5yZXNvbHZlKG8uc2V0RGVzYyh7fSwidGhlbiIse2dldDpmdW5jdGlvbigpe249ITB9fSkpLHI9bn19Y2F0Y2goaSl7cj0hMX1yZXR1cm4gcn0oKSx4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkmJmU9PT13JiZ0PT09bj8hMDp5KGUsdCl9LEM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZihlKVt2XTtyZXR1cm4gdm9pZCAwIT10P3Q6ZX0sRT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbChlKSYmImZ1bmN0aW9uIj09dHlwZW9mKHQ9ZS50aGVuKT90OiExfSxTPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1kKHQpLHRoaXMucmVqZWN0PWQocil9LFQ9ZnVuY3Rpb24oZSl7dHJ5e2UoKX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSxSPWZ1bmN0aW9uKGUsdCl7aWYoIWUubil7ZS5uPSEwO3ZhciByPWUuYztnKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUudixvPTE9PWUucyxpPTAsYT1mdW5jdGlvbih0KXt2YXIgcixpLHM9bz90Lm9rOnQuZmFpbCxhPXQucmVzb2x2ZSxjPXQucmVqZWN0O3RyeXtzPyhvfHwoZS5oPSEwKSxyPXM9PT0hMD9uOnMobikscj09PXQucHJvbWlzZT9jKFR5cGVFcnJvcigiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1FKHIpKT9pLmNhbGwocixhLGMpOmEocikpOmMobil9Y2F0Y2godSl7Yyh1KX19O3IubGVuZ3RoPmk7KWEocltpKytdKTtyLmxlbmd0aD0wLGUubj0hMSx0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQscixvPWUucDtNKG8pJiYoJD9qLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbixvKToodD1zLm9udW5oYW5kbGVkcmVqZWN0aW9uKT90KHtwcm9taXNlOm8scmVhc29uOm59KToocj1zLmNvbnNvbGUpJiZyLmVycm9yJiZyLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG4pKSxlLmE9dm9pZCAwfSwxKX0pfX0sTT1mdW5jdGlvbihlKXt2YXIgdCxyPWUuX2Qsbj1yLmF8fHIuYyxvPTA7aWYoci5oKXJldHVybiExO2Zvcig7bi5sZW5ndGg+bzspaWYodD1uW28rK10sdC5mYWlsfHwhTSh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxEPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5kfHwodC5kPSEwLHQ9dC5yfHx0LHQudj1lLHQucz0yLHQuYT10LmMuc2xpY2UoKSxSKHQsITApKX0sTj1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuZCl7ci5kPSEwLHI9ci5yfHxyO3RyeXtpZihyLnA9PT1lKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1FKGUpKT9nKGZ1bmN0aW9uKCl7dmFyIG49e3I6cixkOiExfTt0cnl7dC5jYWxsKGUsYShOLG4sMSksYShELG4sMSkpfWNhdGNoKG8pe0QuY2FsbChuLG8pfX0pOihyLnY9ZSxyLnM9MSxSKHIsITEpKX1jYXRjaChuKXtELmNhbGwoe3I6cixkOiExfSxuKX19fTtrfHwodz1mdW5jdGlvbihlKXtkKGUpO3ZhciB0PXRoaXMuX2Q9e3A6cCh0aGlzLHcsbSksYzpbXSxhOnZvaWQgMCxzOjAsZDohMSx2OnZvaWQgMCxoOiExLG46ITF9O3RyeXtlKGEoTix0LDEpLGEoRCx0LDEpKX1jYXRjaChyKXtELmNhbGwodCxyKX19LGUoIi4vJC5yZWRlZmluZS1hbGwiKSh3LnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBTKF8odGhpcyx3KSksbj1yLnByb21pc2Usbz10aGlzLl9kO3JldHVybiByLm9rPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ITAsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LG8uYy5wdXNoKHIpLG8uYSYmby5hLnB1c2gociksby5zJiZSKG8sITEpLG59LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSkpLHUodS5HK3UuVyt1LkYqIWsse1Byb21pc2U6d30pLGUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpKHcsbSksZSgiLi8kLnNldC1zcGVjaWVzIikobSksbj1lKCIuLyQuY29yZSIpW21dLHUodS5TK3UuRiohayxtLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFModGhpcykscj10LnJlamVjdDtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKigha3x8TyghMCkpLG0se3Jlc29sdmU6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHcmJngoZS5jb25zdHJ1Y3Rvcix0aGlzKSlyZXR1cm4gZTt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVzb2x2ZTtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksdSh1LlMrdS5GKiEoayYmZSgiLi8kLml0ZXItZGV0ZWN0IikoZnVuY3Rpb24oZSl7dy5hbGwoZSlbImNhdGNoIl0oZnVuY3Rpb24oKXt9KX0pKSxtLHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9Qyh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qscz1bXSxhPVQoZnVuY3Rpb24oKXtiKGUsITEscy5wdXNoLHMpO3ZhciByPXMubGVuZ3RoLGE9QXJyYXkocik7cj9vLmVhY2guY2FsbChzLGZ1bmN0aW9uKGUsbyl7dmFyIHM9ITE7dC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHM9ITAsYVtvXT1lLC0tcnx8bihhKSl9LGkpfSk6bihhKX0pO3JldHVybiBhJiZpKGEuZXJyb3IpLHIucHJvbWlzZX0scmFjZTpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlamVjdCxvPVQoZnVuY3Rpb24oKXtiKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gbyYmbihvLmVycm9yKSxyLnByb21pc2V9fSl9LHsiLi8kIjo1NiwiLi8kLmEtZnVuY3Rpb24iOjI2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5jdHgiOjMyLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQuZXhwb3J0IjozNywiLi8kLmZvci1vZiI6MzksIi4vJC5nbG9iYWwiOjQxLCIuLyQuaXMtb2JqZWN0Ijo0OSwiLi8kLml0ZXItZGV0ZWN0Ijo1MywiLi8kLmxpYnJhcnkiOjU4LCIuLyQubWljcm90YXNrIjo1OSwiLi8kLnJlZGVmaW5lLWFsbCI6NjIsIi4vJC5zYW1lLXZhbHVlIjo2NCwiLi8kLnNldC1wcm90byI6NjUsIi4vJC5zZXQtc3BlY2llcyI6NjYsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIjo2OSwiLi8kLnN0cmljdC1uZXciOjcwLCIuLyQud2tzIjo3OH1dLDg3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5zdHJpbmctYXQiKSghMCk7ZSgiLi8kLml0ZXItZGVmaW5lIikoU3RyaW5nLCJTdHJpbmciLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0seyIuLyQuaXRlci1kZWZpbmUiOjUyLCIuLyQuc3RyaW5nLWF0Ijo3MX1dLDg4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLmdsb2JhbCIpLGk9ZSgiLi8kLmhhcyIpLHM9ZSgiLi8kLmRlc2NyaXB0b3JzIiksYT1lKCIuLyQuZXhwb3J0IiksYz1lKCIuLyQucmVkZWZpbmUiKSx1PWUoIi4vJC5mYWlscyIpLGw9ZSgiLi8kLnNoYXJlZCIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZD1lKCIuLyQudWlkIikscD1lKCIuLyQud2tzIiksYj1lKCIuLyQua2V5b2YiKSxoPWUoIi4vJC5nZXQtbmFtZXMiKSx5PWUoIi4vJC5lbnVtLWtleXMiKSx2PWUoIi4vJC5pcy1hcnJheSIpLF89ZSgiLi8kLmFuLW9iamVjdCIpLGc9ZSgiLi8kLnRvLWlvYmplY3QiKSxtPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaj1uLmdldERlc2MsJD1uLnNldERlc2Msdz1uLmNyZWF0ZSxPPWguZ2V0LGs9by5TeW1ib2wseD1vLkpTT04sQz14JiZ4LnN0cmluZ2lmeSxFPSExLFM9cCgiX2hpZGRlbiIpLFQ9bi5pc0VudW0sUj1sKCJzeW1ib2wtcmVnaXN0cnkiKSxNPWwoInN5bWJvbHMiKSxEPSJmdW5jdGlvbiI9PXR5cGVvZiBrLE49T2JqZWN0LnByb3RvdHlwZSxQPXMmJnUoZnVuY3Rpb24oKXtyZXR1cm4gNyE9dygkKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWooTix0KTtuJiZkZWxldGUgTlt0XSwkKGUsdCxyKSxuJiZlIT09TiYmJChOLHQsbil9OiQsQT1mdW5jdGlvbihlKXt2YXIgdD1NW2VdPXcoay5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUscyYmRSYmUChOLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZnVuY3Rpb24odCl7aSh0aGlzLFMpJiZpKHRoaXNbU10sZSkmJih0aGlzW1NdW2VdPSExKSxQKHRoaXMsZSxtKDEsdCkpfX0pLHR9LEw9ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfSxGPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gciYmaShNLHQpPyhyLmVudW1lcmFibGU/KGkoZSxTKSYmZVtTXVt0XSYmKGVbU11bdF09ITEpLHI9dyhyLHtlbnVtZXJhYmxlOm0oMCwhMSl9KSk6KGkoZSxTKXx8JChlLFMsbSgxLHt9KSksZVtTXVt0XT0hMCksUChlLHQscikpOiQoZSx0LHIpfSxJPWZ1bmN0aW9uKGUsdCl7XyhlKTtmb3IodmFyIHIsbj15KHQ9Zyh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylGKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LFY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD93KGUpOkkodyhlKSx0KX0sVT1mdW5jdGlvbihlKXt2YXIgdD1ULmNhbGwodGhpcyxlKTtyZXR1cm4gdHx8IWkodGhpcyxlKXx8IWkoTSxlKXx8aSh0aGlzLFMpJiZ0aGlzW1NdW2VdP3Q6ITB9LHo9ZnVuY3Rpb24oZSx0KXt2YXIgcj1qKGU9ZyhlKSx0KTtyZXR1cm4hcnx8IWkoTSx0KXx8aShlLFMpJiZlW1NdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfSxIPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKXx8dD09U3x8bi5wdXNoKHQpO3JldHVybiBufSxCPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPU8oZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShNLHQ9cltvKytdKSYmbi5wdXNoKE1bdF0pO3JldHVybiBufSxKPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFMKGUpKXtmb3IodmFyIHQscixuPVtlXSxvPTEsaT1hcmd1bWVudHM7aS5sZW5ndGg+bzspbi5wdXNoKGlbbysrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksIXImJnYodCl8fCh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLEwodCk/dm9pZCAwOnR9KSxuWzFdPXQsQy5hcHBseSh4LG4pfX0sVz11KGZ1bmN0aW9uKCl7dmFyIGU9aygpO3JldHVybiJbbnVsbF0iIT1DKFtlXSl8fCJ7fSIhPUMoe2E6ZX0pfHwie30iIT1DKE9iamVjdChlKSl9KTtEfHwoaz1mdW5jdGlvbigpe2lmKEwodGhpcykpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IiKTtyZXR1cm4gQShkKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSl9LGMoay5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksTD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGt9LG4uY3JlYXRlPVYsbi5pc0VudW09VSxuLmdldERlc2M9eixuLnNldERlc2M9RixuLnNldERlc2NzPUksbi5nZXROYW1lcz1oLmdldD1ILG4uZ2V0U3ltYm9scz1CLHMmJiFlKCIuLyQubGlicmFyeSIpJiZjKE4sInByb3BlcnR5SXNFbnVtZXJhYmxlIixVLCEwKSk7dmFyIFk9eyJmb3IiOmZ1bmN0aW9uKGUpe3JldHVybiBpKFIsZSs9IiIpP1JbZV06UltlXT1rKGUpfSxrZXlGb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGIoUixlKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7RT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7RT0hMX19O24uZWFjaC5jYWxsKCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxmdW5jdGlvbihlKXt2YXIgdD1wKGUpO1lbZV09RD90OkEodCl9KSxFPSEwLGEoYS5HK2EuVyx7U3ltYm9sOmt9KSxhKGEuUywiU3ltYm9sIixZKSxhKGEuUythLkYqIUQsIk9iamVjdCIse2NyZWF0ZTpWLGRlZmluZVByb3BlcnR5OkYsZGVmaW5lUHJvcGVydGllczpJLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjp6LGdldE93blByb3BlcnR5TmFtZXM6SCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Qn0pLHgmJmEoYS5TK2EuRiooIUR8fFcpLCJKU09OIix7c3RyaW5naWZ5Okp9KSxmKGssIlN5bWJvbCIpLGYoTWF0aCwiTWF0aCIsITApLGYoby5KU09OLCJKU09OIiwhMCl9LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5lbnVtLWtleXMiOjM2LCIuLyQuZXhwb3J0IjozNywiLi8kLmZhaWxzIjozOCwiLi8kLmdldC1uYW1lcyI6NDAsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaGFzIjo0MiwiLi8kLmlzLWFycmF5Ijo0OCwiLi8kLmtleW9mIjo1NywiLi8kLmxpYnJhcnkiOjU4LCIuLyQucHJvcGVydHktZGVzYyI6NjEsIi4vJC5yZWRlZmluZSI6NjMsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjcsIi4vJC5zaGFyZWQiOjY4LCIuLyQudG8taW9iamVjdCI6NzQsIi4vJC51aWQiOjc3LCIuLyQud2tzIjo3OH1dLDg5OltmdW5jdGlvbihlLHQscil7ZSgiLi9lczYuYXJyYXkuaXRlcmF0b3IiKTt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIik7bi5Ob2RlTGlzdD1uLkhUTUxDb2xsZWN0aW9uPW4uQXJyYXl9LHsiLi8kLml0ZXJhdG9ycyI6NTUsIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjo4MH1dLDkwOltmdW5jdGlvbihlLHQscil7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZz1bXSx0aGlzLms9ZX1mdW5jdGlvbiByKGUpeyFmdW5jdGlvbiByKCl7dmFyIG49ZS50YWtlUmVjb3JkcygpO24ubGVuZ3RoJiZlLmsobixlKSxlLmY9c2V0VGltZW91dChyLHQuX3BlcmlvZCl9KCl9ZnVuY3Rpb24gbih0KXt2YXIgcixuPXt0eXBlOm51bGwsdGFyZ2V0Om51bGwsYWRkZWROb2RlczpbXSxyZW1vdmVkTm9kZXM6W10scHJldmlvdXNTaWJsaW5nOm51bGwsbmV4dFNpYmxpbmc6bnVsbCxhdHRyaWJ1dGVOYW1lOm51bGwsYXR0cmlidXRlTmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bnVsbH07Zm9yKHIgaW4gdCluW3JdIT09ZSYmdFtyXSE9PWUmJihuW3JdPXRbcl0pO3JldHVybiBufWZ1bmN0aW9uIG8oZSx0KXt2YXIgcj1hKGUsdCk7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvLGM9bi5sZW5ndGg7dC5hJiZyLmEmJmkobixlLHIuYSx0LmQpLCh0LmJ8fHQuZSkmJihvPXMobixlLHIsdCkpLChvfHxuLmxlbmd0aCE9PWMpJiYocj1hKGUsdCkpfX1mdW5jdGlvbiBpKHQscixvLGkpe2Zvcih2YXIgcyxhLGM9e30sdT1yLmF0dHJpYnV0ZXMsbD11Lmxlbmd0aDtsLS07KXM9dVtsXSxhPXMubmFtZSxpJiZpW2FdPT09ZXx8KHMudmFsdWUhPT1vW2FdJiZ0LnB1c2gobih7dHlwZToiYXR0cmlidXRlcyIsdGFyZ2V0OnIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV0sYXR0cmlidXRlTmFtZXNwYWNlOnMubmFtZXNwYWNlVVJJfSkpLGNbYV09ITApO2ZvcihhIGluIG8pY1thXXx8dC5wdXNoKG4oe3RhcmdldDpyLHR5cGU6ImF0dHJpYnV0ZXMiLGF0dHJpYnV0ZU5hbWU6YSxvbGRWYWx1ZTpvW2FdfSkpfWZ1bmN0aW9uIHModCxyLG8scyl7ZnVuY3Rpb24gYShlLHIsbyxhLGMpe3ZhciBsPWUubGVuZ3RoLTE7Yz0tfigobC1jKS8yKTtmb3IodmFyIGYsZCxwO3A9ZS5wb3AoKTspZj1vW3AuaF0sZD1hW3AuaV0scy5iJiZjJiZNYXRoLmFicyhwLmgtcC5pKT49bCYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2ZdLHJlbW92ZWROb2RlczpbZl0sbmV4dFNpYmxpbmc6Zi5uZXh0U2libGluZyxwcmV2aW91c1NpYmxpbmc6Zi5wcmV2aW91c1NpYmxpbmd9KSksYy0tKSxzLmEmJmQuYSYmaSh0LGYsZC5hLHMuZCkscy5jJiYzPT09Zi5ub2RlVHlwZSYmZi5ub2RlVmFsdWUhPT1kLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6Zn0pKSxzLmUmJnUoZixkKX1mdW5jdGlvbiB1KHIsbyl7Zm9yKHZhciBkLHAsYixoLHksdj1yLmNoaWxkTm9kZXMsXz1vLmIsZz12Lmxlbmd0aCxtPV8/Xy5sZW5ndGg6MCxqPTAsJD0wLHc9MDtnPiR8fG0+dzspaD12WyRdLHk9KGI9X1t3XSkmJmIuaixoPT09eT8ocy5hJiZiLmEmJmkodCxoLGIuYSxzLmQpLHMuYyYmYi5jIT09ZSYmaC5ub2RlVmFsdWUhPT1iLmMmJnQucHVzaChuKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6aH0pKSxwJiZhKHAscix2LF8saikscy5lJiYoaC5jaGlsZE5vZGVzLmxlbmd0aHx8Yi5iJiZiLmIubGVuZ3RoKSYmdShoLGIpLCQrKyx3KyspOihsPSEwLGR8fChkPXt9LHA9W10pLGgmJihkW2I9YyhoKV18fChkW2JdPSEwLC0xPT09KGI9ZihfLGgsdywiaiIpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6cixhZGRlZE5vZGVzOltoXSxuZXh0U2libGluZzpoLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpoLnByZXZpb3VzU2libGluZ30pKSxqKyspOnAucHVzaCh7aDokLGk6Yn0pKSwkKyspLHkmJnkhPT12WyRdJiYoZFtiPWMoeSldfHwoZFtiXT0hMCwtMT09PShiPWYodix5LCQpKT9zLmImJih0LnB1c2gobih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6by5qLHJlbW92ZWROb2RlczpbeV0sbmV4dFNpYmxpbmc6X1t3KzFdLHByZXZpb3VzU2libGluZzpfW3ctMV19KSksai0tKTpwLnB1c2goe2g6YixpOnd9KSksdysrKSk7cCYmYShwLHIsdixfLGopfXZhciBsO3JldHVybiB1KHIsbyksbH1mdW5jdGlvbiBhKGUsdCl7dmFyIHI9ITA7cmV0dXJuIGZ1bmN0aW9uIG4oZSl7dmFyIG89e2o6ZX07cmV0dXJuIXQuY3x8MyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlPyh0LmEmJnImJjE9PT1lLm5vZGVUeXBlJiYoby5hPWwoZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuZCYmIXQuZFtyLm5hbWVdfHwoZVtyLm5hbWVdPXIudmFsdWUpLGV9KSksciYmKHQuYnx8dC5jfHx0LmEmJnQuZSkmJihvLmI9dShlLmNoaWxkTm9kZXMsbikpLHI9dC5lKTpvLmM9ZS5ub2RlVmFsdWUsb30oZSl9ZnVuY3Rpb24gYyhlKXt0cnl7cmV0dXJuIGUuaWR8fChlLm1vX2lkPWUubW9faWR8fGQrKyl9Y2F0Y2godCl7dHJ5e3JldHVybiBlLm5vZGVWYWx1ZX1jYXRjaChyKXtyZXR1cm4gZCsrfX19ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgcj1bXSxuPTA7bjxlLmxlbmd0aDtuKyspcltuXT10KGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciByPXt9LG49MDtuPGUubGVuZ3RoO24rKylyPXQocixlW25dLG4sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gZihlLHQscixuKXtmb3IoO3I8ZS5sZW5ndGg7cisrKWlmKChuP2Vbcl1bbl06ZVtyXSk9PT10KXJldHVybiByO3JldHVybi0xfXQuX3BlcmlvZD0zMCx0LnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj17YTohISh0LmF0dHJpYnV0ZXN8fHQuYXR0cmlidXRlRmlsdGVyfHx0LmF0dHJpYnV0ZU9sZFZhbHVlKSxiOiEhdC5jaGlsZExpc3QsZTohIXQuc3VidHJlZSxjOiEoIXQuY2hhcmFjdGVyRGF0YSYmIXQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKX0saT10aGlzLmcscz0wO3M8aS5sZW5ndGg7cysrKWlbc10ubT09PWUmJmkuc3BsaWNlKHMsMSk7dC5hdHRyaWJ1dGVGaWx0ZXImJihuLmQ9bCh0LmF0dHJpYnV0ZUZpbHRlcixmdW5jdGlvbihlLHQpewpyZXR1cm4gZVt0XT0hMCxlfSkpLGkucHVzaCh7bTplLGw6byhlLG4pfSksdGhpcy5mfHxyKHRoaXMpfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PXRoaXMuZyxyPTA7cjx0Lmxlbmd0aDtyKyspdFtyXS5sKGUpO3JldHVybiBlfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5nPVtdLGNsZWFyVGltZW91dCh0aGlzLmYpLHRoaXMuZj1udWxsfX07dmFyIGQ9MTtyZXR1cm4gdH0odm9pZCAwKX0se31dLDkxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmV8fGZ1bmN0aW9uKGUsdCxyLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgbyxpLHM9WyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZWNvbmZpZ3VyZSIsInNldFByb3RvdHlwZSIsInByZXZlbnRFeHRlbnNpb25zIl0sYT10LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09ZS5jYWxsKHQpfX0oZS5wcm90b3R5cGUudG9TdHJpbmcpLGM9dC5wcm90b3R5cGUuaW5kZXhPZj90LmluZGV4T2Z8fGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gdC5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUscixuKX06ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1yfHwwO248ZS5sZW5ndGg7bisrKWlmKGVbbl09PT10KXJldHVybiBuO3JldHVybi0xfSx1PXIuTWFwIT09biYmTWFwLnByb3RvdHlwZS5mb3JFYWNoP2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBNYXB9OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD1bXTtyZXR1cm57c2l6ZTowLGhhczpmdW5jdGlvbih0KXtyZXR1cm4gYyhlLHQpPi0xfSxnZXQ6ZnVuY3Rpb24ocil7cmV0dXJuIHRbYyhlLHIpXX0sc2V0OmZ1bmN0aW9uKHIsbil7dmFyIG89YyhlLHIpOy0xPT09bz8oZS5wdXNoKHIpLHQucHVzaChuKSx0aGlzLnNpemUrKyk6dFtvXT1ufSwiZGVsZXRlIjpmdW5jdGlvbihyKXt2YXIgbj1jKGUscik7bj4tMSYmKGUuc3BsaWNlKG4sMSksdC5zcGxpY2UobiwxKSx0aGlzLnNpemUtLSl9LGZvckVhY2g6ZnVuY3Rpb24ocil7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspci5jYWxsKGFyZ3VtZW50c1sxXSx0W25dLGVbbl0sdGhpcyl9fX0sbD1lLmdldE93blByb3BlcnR5TmFtZXM/ZnVuY3Rpb24oKXt2YXIgdD1lLmdldE93blByb3BlcnR5TmFtZXM7dHJ5e2FyZ3VtZW50cy5jYWxsZWV9Y2F0Y2gocil7dmFyIG49KHQoYykuam9pbigiICIpKyIgIikucmVwbGFjZSgvcHJvdG90eXBlIHxsZW5ndGggfG5hbWUgL2csIiIpLnNsaWNlKDAsLTEpLnNwbGl0KCIgIik7bi5sZW5ndGgmJih0PWZ1bmN0aW9uKHQpe3ZhciByPWUuZ2V0T3duUHJvcGVydHlOYW1lcyh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClmb3IodmFyIG8saT0wO2k8bi5sZW5ndGg7KShvPWMocixuW2krK10pKT4tMSYmci5zcGxpY2UobywxKTtyZXR1cm4gcn0pfXJldHVybiB0fSgpOmZ1bmN0aW9uKHQpe3ZhciByLG4sbz1bXTtpZigiaGFzT3duUHJvcGVydHkiaW4gdClmb3IociBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJm8ucHVzaChyKTtlbHNle249ZS5oYXNPd25Qcm9wZXJ0eTtmb3IociBpbiB0KW4uY2FsbCh0LHIpJiZvLnB1c2gocil9cmV0dXJuIGEodCkmJm8ucHVzaCgibGVuZ3RoIiksb30sZj1lLmdldFByb3RvdHlwZU9mLGQ9ZS5kZWZpbmVQcm9wZXJ0aWVzJiZlLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixwPXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxyLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oKXt2YXIgZT0rbmV3IERhdGUsdD1lO3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3IoKHQ9K25ldyBEYXRlKS1lKX0sMTcpfX0oKSxiPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1vLmdldChlKTtuPyh5KG4sZSksbShlLG4sdCxyKSk6KG49aChlKSxtKGUsbix0LHIpLDE9PT1vLnNpemUmJnAodikpfSxoPWZ1bmN0aW9uKHQscil7dmFyIG4saT1sKHQpLHM9W10sYT0wLHI9e2hhbmRsZXJzOnUoKSxmcm96ZW46ZS5pc0Zyb3plbj9lLmlzRnJvemVuKHQpOiExLGV4dGVuc2libGU6ZS5pc0V4dGVuc2libGU/ZS5pc0V4dGVuc2libGUodCk6ITAscHJvdG86ZiYmZih0KSxwcm9wZXJ0aWVzOmksdmFsdWVzOnMsbm90aWZpZXI6Zyh0LHIpfTtpZihkKWZvcihuPXIuZGVzY3JpcHRvcnM9W107YTxpLmxlbmd0aDspblthXT1kKHQsaVthXSksc1thXT10W2lbYSsrXV07ZWxzZSBmb3IoO2E8aS5sZW5ndGg7KXNbYV09dFtpW2ErK11dO3JldHVybiBvLnNldCh0LHIpLHJ9LHk9ZnVuY3Rpb24oKXt2YXIgdD1kP2Z1bmN0aW9uKGUsdCxyLG4sbyl7dmFyIGk9dC5wcm9wZXJ0aWVzW3JdLHM9ZVtpXSxhPXQudmFsdWVzW3JdLGM9dC5kZXNjcmlwdG9yc1tyXTsidmFsdWUiaW4gbyYmKGE9PT1zPzA9PT1hJiYxL2EhPT0xL3M6YT09PWF8fHM9PT1zKSYmKGooZSx0LHtuYW1lOmksdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LnZhbHVlc1tyXT1zKSwhYy5jb25maWd1cmFibGV8fG8uY29uZmlndXJhYmxlJiZvLndyaXRhYmxlPT09Yy53cml0YWJsZSYmby5lbnVtZXJhYmxlPT09Yy5lbnVtZXJhYmxlJiZvLmdldD09PWMuZ2V0JiZvLnNldD09PWMuc2V0fHwoaihlLHQse25hbWU6aSx0eXBlOiJyZWNvbmZpZ3VyZSIsb2JqZWN0OmUsb2xkVmFsdWU6YX0sbiksdC5kZXNjcmlwdG9yc1tyXT1vKX06ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dC5wcm9wZXJ0aWVzW3JdLGk9ZVtvXSxzPXQudmFsdWVzW3JdOyhzPT09aT8wPT09cyYmMS9zIT09MS9pOnM9PT1zfHxpPT09aSkmJihqKGUsdCx7bmFtZTpvLHR5cGU6InVwZGF0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6c30sbiksdC52YWx1ZXNbcl09aSl9LHI9ZD9mdW5jdGlvbihlLHIsbixvLGkpe2Zvcih2YXIgcyxhPXIubGVuZ3RoO24mJmEtLTspbnVsbCE9PXJbYV0mJihzPWQoZSxyW2FdKSxuLS0scz90KGUsbyxhLGkscyk6KGooZSxvLHtuYW1lOnJbYV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpvLnZhbHVlc1thXX0saSksby5wcm9wZXJ0aWVzLnNwbGljZShhLDEpLG8udmFsdWVzLnNwbGljZShhLDEpLG8uZGVzY3JpcHRvcnMuc3BsaWNlKGEsMSkpKX06ZnVuY3Rpb24oZSx0LHIsbixvKXtmb3IodmFyIGk9dC5sZW5ndGg7ciYmaS0tOyludWxsIT09dFtpXSYmKGooZSxuLHtuYW1lOnRbaV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpuLnZhbHVlc1tpXX0sbyksbi5wcm9wZXJ0aWVzLnNwbGljZShpLDEpLG4udmFsdWVzLnNwbGljZShpLDEpLHItLSl9O3JldHVybiBmdW5jdGlvbihuLG8saSl7aWYobi5oYW5kbGVycy5zaXplJiYhbi5mcm96ZW4pe3ZhciBzLGEsdSxwLGIsaCx5LHYsXz1uLnZhbHVlcyxnPW4uZGVzY3JpcHRvcnMsbT0wO2lmKG4uZXh0ZW5zaWJsZSlpZihzPW4ucHJvcGVydGllcy5zbGljZSgpLGE9cy5sZW5ndGgsdT1sKG8pLGcpe2Zvcig7bTx1Lmxlbmd0aDspYj11W20rK10scD1jKHMsYiksdj1kKG8sYiksLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChvW2JdKSxnLnB1c2godikpOihzW3BdPW51bGwsYS0tLHQobyxuLHAsaSx2KSk7cihvLHMsYSxuLGkpLGUuaXNFeHRlbnNpYmxlKG8pfHwobi5leHRlbnNpYmxlPSExLGoobyxuLHt0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyIsb2JqZWN0Om99LGkpLG4uZnJvemVuPWUuaXNGcm96ZW4obykpfWVsc2V7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSxoPW9bYl0sLTE9PT1wPyhqKG8sbix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLG4ucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChoKSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpKSk7cihvLHMsYSxuLGkpfWVsc2UgaWYoIW4uZnJvemVuKXtmb3IoO208cy5sZW5ndGg7bSsrKWI9c1ttXSx0KG8sbixtLGksZChvLGIpKTtlLmlzRnJvemVuKG8pJiYobi5mcm96ZW49ITApfWYmJih5PWYobykseSE9PW4ucHJvdG8mJihqKG8sbix7dHlwZToic2V0UHJvdG90eXBlIixuYW1lOiJfX3Byb3RvX18iLG9iamVjdDpvLG9sZFZhbHVlOm4ucHJvdG99KSxuLnByb3RvPXkpKX19fSgpLHY9ZnVuY3Rpb24oKXtvLnNpemUmJihvLmZvckVhY2goeSksaS5mb3JFYWNoKF8pLHAodikpfSxfPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5jaGFuZ2VSZWNvcmRzO3IubGVuZ3RoJiYoZS5jaGFuZ2VSZWNvcmRzPVtdLHQocikpfSxnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9by5nZXQoZSkpLHQmJnQubm90aWZpZXJ8fHtub3RpZnk6ZnVuY3Rpb24odCl7dC50eXBlO3ZhciByPW8uZ2V0KGUpO2lmKHIpe3ZhciBuLGk9e29iamVjdDplfTtmb3IobiBpbiB0KSJvYmplY3QiIT09biYmKGlbbl09dFtuXSk7aihlLHIsaSl9fSxwZXJmb3JtQ2hhbmdlOmZ1bmN0aW9uKHQscil7aWYoInN0cmluZyIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZyBjaGFuZ2VUeXBlIik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IHBlcmZvcm0gbm9uLWZ1bmN0aW9uIik7dmFyIGkscyxhPW8uZ2V0KGUpLGM9YXJndW1lbnRzWzJdLHU9Yz09PW4/cigpOnIuY2FsbChjKTtpZihhJiZ5KGEsZSx0KSxhJiZ1JiYib2JqZWN0Ij09dHlwZW9mIHUpe3M9e29iamVjdDplLHR5cGU6dH07Zm9yKGkgaW4gdSkib2JqZWN0IiE9PWkmJiJ0eXBlIiE9PWkmJihzW2ldPXVbaV0pO2ooZSxhLHMpfX19fSxtPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWkuZ2V0KHIpO298fGkuc2V0KHIsbz17b2JzZXJ2ZWQ6dSgpLGNoYW5nZVJlY29yZHM6W119KSxvLm9ic2VydmVkLnNldChlLHthY2NlcHRMaXN0Om4uc2xpY2UoKSxkYXRhOnR9KSx0LmhhbmRsZXJzLnNldChyLG8pfSxqPWZ1bmN0aW9uKGUsdCxyLG4pe3QuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbz10Lm9ic2VydmVkLmdldChlKS5hY2NlcHRMaXN0Oygic3RyaW5nIiE9dHlwZW9mIG58fC0xPT09YyhvLG4pKSYmYyhvLHIudHlwZSk+LTEmJnQuY2hhbmdlUmVjb3Jkcy5wdXNoKHIpfSl9O289dSgpLGk9dSgpLGUub2JzZXJ2ZT1mdW5jdGlvbih0LHIsbyl7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IG9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO2lmKGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4ocikpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gYSBmcm96ZW4gZnVuY3Rpb24gb2JqZWN0Iik7aWYobz09PW4pbz1zO2Vsc2UgaWYoIW98fCJvYmplY3QiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGlyZCBhcmd1bWVudCB0byBPYmplY3Qub2JzZXJ2ZSBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MuIik7cmV0dXJuIGIodCxyLG8pLHR9LGUudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09PWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LnVub2JzZXJ2ZSBjYW5ub3QgdW5vYnNlcnZlIG5vbi1vYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO3ZhciByLG49aS5nZXQodCk7cmV0dXJuIG4mJihyPW4ub2JzZXJ2ZWQuZ2V0KGUpKSYmKG4ub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSkscChmdW5jdGlvbigpe18obix0KX0pLDE9PT1uLm9ic2VydmVkLnNpemUmJm4ub2JzZXJ2ZWQuaGFzKGUpP2lbImRlbGV0ZSJdKHQpOm4ub2JzZXJ2ZWRbImRlbGV0ZSJdKGUpLDE9PT1yLmRhdGEuaGFuZGxlcnMuc2l6ZT9vWyJkZWxldGUiXShlKTpyLmRhdGEuaGFuZGxlcnNbImRlbGV0ZSJdKHQpKSxlfSxlLmdldE5vdGlmaWVyPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5nZXROb3RpZmllciBjYW5ub3QgZ2V0Tm90aWZpZXIgbm9uLW9iamVjdCIpO3JldHVybiBlLmlzRnJvemVuJiZlLmlzRnJvemVuKHQpP251bGw6Zyh0KX0sZS5kZWxpdmVyQ2hhbmdlUmVjb3Jkcz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHQ9aS5nZXQoZSk7dCYmKHQub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3koZS5kYXRhLHQpfSksXyh0LGUpKX19KE9iamVjdCxBcnJheSx0aGlzKX0se31dLDkyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuRGF0YU9iamVjdE9ic2VydmVyPXIuRGF0YU9iamVjdFJlcG9ydGVyPXIuU3luY2hlcj12b2lkIDAsZSgibXV0YXRpb25vYnNlcnZlci1zaGltIiksZSgib2JqZWN0Lm9ic2VydmUiKSxlKCJhcnJheS5vYnNlcnZlIik7dmFyIG89ZSgiLi9zeW5jaGVyL1N5bmNoZXIiKSxpPW4obykscz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIiksYT1uKHMpLGM9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciIpLHU9bihjKTtyLlN5bmNoZXI9aVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdFJlcG9ydGVyPWFbImRlZmF1bHQiXSxyLkRhdGFPYmplY3RPYnNlcnZlcj11WyJkZWZhdWx0Il19LHsiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiOjk2LCIuL3N5bmNoZXIvU3luY2hlciI6OTksImFycmF5Lm9ic2VydmUiOjEsIm11dGF0aW9ub2JzZXJ2ZXItc2hpbSI6OTAsIm9iamVjdC5vYnNlcnZlIjo5MX1dLDkzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksdT1uKGMpLGw9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksZj1uKGwpLGQ9ZSgiLi9TeW5jT2JqZWN0IikscD1uKGQpLGI9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxoPW4oYikseT1lKCIuLi91dGlscy91dGlscy5qcyIpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9zeW5jaGVyPXQsYS5fdXJsPXIsYS5fc2NoZW1hPW4sYS5fc3RhdHVzPW8sYS5fc3luY09iaj1uZXcgcFsiZGVmYXVsdCJdKGkpLGEuX2NoaWxkcmVucz1zLGEuX3ZlcnNpb249MCxhLl9jaGlsZElkPTAsYS5fY2hpbGRyZW5PYmplY3RzPXt9LGEuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLGEuX293bmVyPXQuX293bmVyLGEuX2J1cz10Ll9idXN9cmV0dXJuKDAsZlsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24obil7dmFyIG89cituLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24ocil7aWYoci5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogIixyKSxyLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkQ3JlYXRlKHIpO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksKDAsYVsiZGVmYXVsdCJdKShlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5PYmplY3RzW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InBhdXNlIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJyZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6ImFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5fY2hpbGRJZCsrO3ZhciBuPXIuX293bmVyKyIjIityLl9jaGlsZElkLG89ci5fdXJsKyIvY2hpbGRyZW4vIitlLHM9e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpvLGJvZHk6e3Jlc291cmNlOm4sdmFsdWU6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUpe3ZhciBpPXIuX2J1cy5wb3N0TWVzc2FnZShzKTtjb25zb2xlLmxvZygiY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAiK3IuX293bmVyKyIgKTogIixzKTt2YXIgYT1uZXcgaFsiZGVmYXVsdCJdKHIsbix0LHIuX293bmVyLGkpO2Eub25DaGFuZ2UoZnVuY3Rpb24oZSl7ci5fb25DaGFuZ2UoZSx7cGF0aDpvLGNoaWxkSWQ6bn0pfSksci5fY2hpbGRyZW5PYmplY3RzW25dPWEsZShhKX0pfX0se2tleToib25BZGRDaGlsZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkNoaWxkQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlO2NvbnNvbGUubG9nKCJjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICIrdC5fb3duZXIrIiApOiAiLGUpO3ZhciBuPW5ldyBoWyJkZWZhdWx0Il0odCxyLGUuYm9keS52YWx1ZSk7dC5fY2hpbGRyZW5PYmplY3RzW3JdPW4sc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzb3VyY2U6dC5fb3duZXJ9fSl9KTt2YXIgbz17dHlwZTplLnR5cGUsZnJvbTplLmZyb20sdXJsOmUudG8sdmFsdWU6ZS5ib2R5LnZhbHVlLGNoaWxkSWQ6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9O3QuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiYoY29uc29sZS5sb2coIkFERC1DSElMRFJFTi1FVkVOVDogIixvKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSl9fSx7a2V5OiJfb25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKyssIm9uIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6InVwZGF0ZSIsZnJvbTpyLl91cmwsdG86ci5fdXJsKyIvY2hhbmdlcyIsYm9keTp7dmVyc2lvbjpyLl92ZXJzaW9uLHNvdXJjZTpyLl9vd25lcixhdHRyaWJ1dGU6ZS5maWVsZH19O2Uub1R5cGU9PT1kLk9iamVjdFR5cGUuT0JKRUNUP2UuY1R5cGUhPT1kLkNoYW5nZVR5cGUuUkVNT1ZFJiYobi5ib2R5LnZhbHVlPWUuZGF0YSk6KG4uYm9keS5hdHRyaWJ1dGVUeXBlPWUub1R5cGUsbi5ib2R5LnZhbHVlPWUuZGF0YSxlLmNUeXBlIT09ZC5DaGFuZ2VUeXBlLlVQREFURSYmKG4uYm9keS5vcGVyYXRpb249ZS5jVHlwZSkpLHQmJihuLnRvPXQucGF0aCxuLmJvZHkucmVzb3VyY2U9dC5jaGlsZElkKSxyLl9idXMucG9zdE1lc3NhZ2Uobil9fX0se2tleToiX2NoYW5nZU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rMT09PXQuYm9keS52ZXJzaW9uKXtyLl92ZXJzaW9uKys7dmFyIG49dC5ib2R5LmF0dHJpYnV0ZSxvPSgwLHkuZGVlcENsb25lKSh0LmJvZHkudmFsdWUpLGk9ZS5maW5kQmVmb3JlKG4pO2lmKHQuYm9keS5hdHRyaWJ1dGVUeXBlPT09ZC5PYmplY3RUeXBlLkFSUkFZKWlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuQUREKXt2YXIgcz1pLm9iaixhPWkubGFzdDtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHMsW2EsMF0uY29uY2F0KG8pKX1lbHNlIGlmKHQuYm9keS5vcGVyYXRpb249PT1kLkNoYW5nZVR5cGUuUkVNT1ZFKXt2YXIgYz1pLm9iaix1PWkubGFzdDtjLnNwbGljZSh1LG8pfWVsc2UgaS5vYmpbaS5sYXN0XT1vO2Vsc2UgdC5ib2R5LnZhbHVlP2kub2JqW2kubGFzdF09bzpkZWxldGUgaS5vYmpbaS5sYXN0XX1lbHNlIGNvbnNvbGUubG9nKCJVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiAiK3IuX3ZlcnNpb24rIiwgbXNnID0+ICIrdC5ib2R5LnZlcnNpb24rIikiKX19LHtrZXk6Il9jaGFuZ2VDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztjb25zb2xlLmxvZygiQ2hhbmdlIGNoaWxkcmVuOiAiLHQuX293bmVyLGUpO3ZhciByPWUuYm9keS5yZXNvdXJjZSxuPXQuX2NoaWxkcmVuT2JqZWN0c1tyXTtuP3QuX2NoYW5nZU9iamVjdChuLl9zeW5jT2JqLGUpOmNvbnNvbGUubG9nKCJObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICIscil9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWF9fSx7a2V5OiJzdGF0dXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXN9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleToiY2hpbGRyZW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT12LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCIuL1N5bmNPYmplY3QiOjk4LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZSgiLi9TeW5jT2JqZWN0IiksdT1uKGMpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8scyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBhPXRoaXM7YS5fcGFyZW50PXQsYS5fY2hpbGRJZD1yLGEuX293bmVyPW8sYS5fbXNnSWQ9cyxhLl9zeW5jT2JqPW5ldyB1WyJkZWZhdWx0Il0obiksYS5fYnVzPXQuX2J1cyxhLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fb3duZXImJihlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fb3duZXIsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmdC5pZD09PWUuX21zZ0lkJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOiIsdCksZS5fb25SZXNwb25zZSh0KSl9KSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyJiZlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RlbGV0ZSBlLl9wYXJlbnQuX2NoaWxkcmVuW2UuX2NoaWxkSWRdLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24odCl7ZSh0KX0pfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihyKX19LHtrZXk6ImNoaWxkSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGo9bihtKSwkPXtBTlk6ImFueSIsU1RBUlQ6InN0YXJ0IixFWEFDVDoiZXhhY3QifSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4sbyxzLGMsbCl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBmPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLHMuZGF0YSxjKSksZD1mO3JldHVybiBkLl92ZXJzaW9uPWwsZC5fZmlsdGVycz17fSxkLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7ZC5fb25GaWx0ZXIoZSl9KSwoMCxpWyJkZWZhdWx0Il0pKHMuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXMuY2hpbGRyZW5zW2VdO2QuX2NoaWxkcmVuT2JqZWN0c1tlXT1uZXcgalsiZGVmYXVsdCJdKGQsZSx0KX0pLGQuX2FsbG9jYXRlTGlzdGVuZXJzKCksZn1yZXR1cm4oMCx2WyJkZWZhdWx0Il0pKHQsZSksKDAsZlsiZGVmYXVsdCJdKSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCsiL2NoYW5nZXMiLGZ1bmN0aW9uKHQpeyJ1cGRhdGUiPT09dC50eXBlJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdfX0se2tleToidW5zdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLG49e3R5cGU6JC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZigiKiIpO289PT1lLmxlbmd0aC0xJiYoMD09PW8/bi50eXBlPSQuQU5ZOihuLnR5cGU9JC5TVEFSVCxyPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkpKSx0aGlzLl9maWx0ZXJzW3JdPW59fSx7a2V5OiJfb25GaWx0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7KDAsaVsiZGVmYXVsdCJdKSh0Ll9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX2ZpbHRlcnNbcl07bi50eXBlPT09JC5BTlk/bi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLlNUQVJUPzA9PT1lLmZpZWxkLmluZGV4T2YocikmJm4uY2FsbGJhY2soZSk6bi50eXBlPT09JC5FWEFDVCYmZS5maWVsZD09PXImJm4uY2FsbGJhY2soZSl9KX19XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09dyx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdCI6OTMsIi4vRGF0YU9iamVjdENoaWxkIjo5NCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihkKSxiPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKSxoPW4oYikseT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSx2PW4oeSksXz1lKCIuL0RhdGFPYmplY3QiKSxnPW4oXyksbT1lKCIuLi91dGlscy91dGlscy5qcyIpLGo9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLGkscyl7KDAsdVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBjPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxhWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLGkscykpLGw9YztyZXR1cm4gbC5fc3Vic2NyaXB0aW9ucz17fSxsLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci0iK3IrIi1TRU5EOiAiLGUpLGwuX29uQ2hhbmdlKGUpfSksbC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxjfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9vYmplY3RMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdC0iK2UuX3VybCsiLVJDVjogIix0KSx0LnR5cGUpe2Nhc2UicmVzcG9uc2UiOmUuX29uUmVzcG9uc2UodCk7YnJlYWs7Y2FzZSJyZWFkIjplLl9vblJlYWQodCl9fSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiaW52aXRlT2JzZXJ2ZXJzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ImNyZWF0ZSIsZnJvbTp0Ll9zeW5jaGVyLl9vd25lcix0bzp0Ll9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6dC5fdXJsLHNjaGVtYTp0Ll9zY2hlbWEsdmFsdWU6dC5fc3luY09iai5kYXRhLGF1dGhvcmlzZTplfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZToiZGVsZXRlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fcmVwb3J0ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvblN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyPWV9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToib25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlYWRIYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogIixlKSxlLmJvZHkudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uVW5TdWJzY3JpYmUoZSl9fX0se2tleToiX29uU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj17dHlwZTplLmJvZHkudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNjZXB0OmZ1bmN0aW9uKCl7dmFyIG49e3VybDpyLHN0YXR1czoib24ifTt0Ll9zdWJzY3JpcHRpb25zW3JdPW47dmFyIG89e307cmV0dXJuKDAsaVsiZGVmYXVsdCJdKSh0Ll9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dC5fY2hpbGRyZW5PYmplY3RzW2VdLmRhdGE7b1tlXT0oMCxtLmRlZXBDbG9uZSkocil9KSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc2NoZW1hOnQuX3NjaGVtYSx2ZXJzaW9uOnQuX3ZlcnNpb24sdmFsdWU6e2RhdGE6KDAsbS5kZWVwQ2xvbmUpKHQuZGF0YSksY2hpbGRyZW5zOm99fX0pLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpyfX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixuKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXQuX3N1YnNjcmlwdGlvbnNbcl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsb2JqZWN0Om59O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsciksdC5fb25SZXNwb25zZUhhbmRsZXIocikpfX0se2tleToiX29uUmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGFjY2VwdDpmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKX19KX0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMSxkZXNjOnJ9fSl9fTt0Ll9vblJlYWRIYW5kbGVyJiYoY29uc29sZS5sb2coIlJFQUQtRVZFTlQ6ICIsciksdC5fb25SZWFkSGFuZGxlcihyKSl9fSx7a2V5OiJzdWJzY3JpcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc319XSksdH0oZ1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09aix0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMDAsIi4vRGF0YU9iamVjdCI6OTMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOjE1fV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksYT1uKHMpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8peygwLGlbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgcz10aGlzO3MuX293bmVyPXQscy5fdXJsPXIscy5fYnVzPW4scy5fY2hpbGRyZW49byxzLl9jaGFuZ2VzPVtdLHMuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhUHJvdmlzaW9uYWwtIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlcy5wdXNoKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiYXBwbHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpfSl9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufX1dKSxlfSgpO3JbImRlZmF1bHQiXT1jLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk4OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuT2JqZWN0VHlwZT1yLkNoYW5nZVR5cGU9dm9pZCAwO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciByPXRoaXM7ci5fb2JzZXJ2ZXJzPVtdLHIuX2ZpbHRlcnM9e30sdD9yLl9kYXRhPSgwLGwuZGVlcENsb25lKSh0KTpyLl9kYXRhPXt9LHIuX2ludGVybmFsT2JzZXJ2ZShuZXcgZCxyLl9kYXRhKX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleToiZmluZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLiIpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleToiZmluZEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj1lLnNwbGl0KCIuIik7cmV0dXJuIHQubGFzdD1yLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQociksdH19LHtrZXk6Il9maW5kV2l0aFNwbGl0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6Il9pc09ic2VydmFibGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPT09T2JqZWN0fHxlLmNvbnN0cnVjdG9yPT09QXJyYXl9fSx7a2V5OiJfaW50ZXJuYWxPYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbj1mdW5jdGlvbih0KXtyLl9vbkNoYW5nZXMoZSx0KX07aWYodC5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7T2JqZWN0Lm9ic2VydmUodCxuKTtmb3IodmFyIG8gaW4gdClyLl9pc09ic2VydmFibGUodFtvXSkmJnIuX2ludGVybmFsT2JzZXJ2ZShlWyJuZXciXShvKSx0W29dKX1lbHNlIGlmKHQuY29uc3RydWN0b3I9PT1BcnJheSl7QXJyYXkub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgaSBpbiB0KWlmKHIuX2lzT2JzZXJ2YWJsZSh0W2ldKSl7dmFyIHM9ZVsibmV3Il0obmV3IHAodFtpXSxpKSk7ci5faW50ZXJuYWxPYnNlcnZlKHMsdFtpXSl9fX19fSx7a2V5OiJfb25DaGFuZ2VzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHQpe3ZhciBvPXRbbl0ub2JqZWN0LGk9dm9pZCAwO2lmKG8uY29uc3RydWN0b3I9PT1PYmplY3QmJihpPWguT0JKRUNUKSxvLmNvbnN0cnVjdG9yPT09QXJyYXkmJihpPWguQVJSQVkpLCJzcGxpY2UiPT09dFtuXS50eXBlKSFmdW5jdGlvbigpe3ZhciBzPXRbbl0uaW5kZXgsYT1lWyJuZXciXSgiIitzKSxjPWEudG9TdHJpbmcoKSx1PXRbbl0ucmVtb3ZlZC5sZW5ndGg7aWYoMCE9PXUpe3ZhciBmPXRbbl0ucmVtb3ZlZDtmLmZvckVhY2goZnVuY3Rpb24odCxuKXtyLl9pc09ic2VydmFibGUodCkmJmUucmVtb3ZlSW5kZXgocytuKX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5SRU1PVkUsb1R5cGU6aSxmaWVsZDpjLGRhdGE6dX0pfXZhciBkPXRbbl0uYWRkZWRDb3VudDtpZigwIT09ZCl7dmFyIGg9by5zbGljZShzLHMrZCk7aC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbz1lWyJuZXciXShuZXcgcCh0LHMrbikpO3IuX2ludGVybmFsT2JzZXJ2ZShvLHQpfX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDpjLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGgpfSl9cyE9PW8ubGVuZ3RoLTEmJmUucmVJbmRleEZyb20obyl9KCk7ZWxzZXt2YXIgcz1lWyJuZXciXSh0W25dLm5hbWUpLGE9cy50b1N0cmluZygpO2lmKC0xIT09YS5pbmRleE9mKCJTeW1ib2wiKSljb250aW51ZTt2YXIgYz1vW3Rbbl0ubmFtZV07InVwZGF0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5VUERBVEUsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSksImFkZCI9PT10W25dLnR5cGUmJih0aGlzLl9pbnRlcm5hbE9ic2VydmUocyxjKSx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuQURELG9UeXBlOmksZmllbGQ6YSxkYXRhOigwLGwuZGVlcENsb25lKShjKX0pKSwiZGVsZXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmF9KX19fX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLGV9KCksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSksdGhpcy5fcGF0aD1bXSx0aGlzLl9vYnNlcnZhYmxlcz17fX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InJlbW92ZUluZGV4Iix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fb2JzZXJ2YWJsZXNbZV19fSx7a2V5OiJyZUluZGV4RnJvbSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHRoaXMuX29ic2VydmFibGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX29ic2VydmFibGVzW3JdLG89ZS5pbmRleE9mKG4ub2JqKTtuLmlkeCE9byYmKG4uaWR4PW8sZGVsZXRlIHQuX29ic2VydmFibGVzW3JdLHQuX29ic2VydmFibGVzW29dPW4pfSl9fSx7a2V5OiJuZXciLHZhbHVlOmZ1bmN0aW9uKGUpe2UuY29uc3RydWN0b3I9PXAmJih0aGlzLl9vYnNlcnZhYmxlc1tlLmlkeF09ZSk7dmFyIHQ9dGhpcy5jbG9uZSgpO3JldHVybiB0Ll9wYXRoLnB1c2goZSksdH19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fcGF0aC5wdXNoKGUpfSksdH19LHtrZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24odCxyKXswPT09cj9lPXQudG9TdHJpbmcoKTplKz0iLiIrdC50b1N0cmluZygpfSksZX19XSksZX0oKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLm9iaj10LHRoaXMuaWR4PXJ9cmV0dXJuKDAsdVsiZGVmYXVsdCJdKShlLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHgudG9TdHJpbmcoKX19XSksZX0oKSxiPXIuQ2hhbmdlVHlwZT17VVBEQVRFOiJ1cGRhdGUiLEFERDoiYWRkIixSRU1PVkU6InJlbW92ZSJ9LGg9ci5PYmplY3RUeXBlPXtPQkpFQ1Q6Im9iamVjdCIsQVJSQVk6ImFycmF5In07clsiZGVmYXVsdCJdPWZ9LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYyksbD1lKCIuL0RhdGFPYmplY3RSZXBvcnRlciIpLGY9bihsKSxkPWUoIi4vRGF0YU9iamVjdE9ic2VydmVyIikscD1uKGQpLGI9ZSgiLi9EYXRhUHJvdmlzaW9uYWwiKSxoPW4oYikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4peygwLGFbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgbz10aGlzO28uX293bmVyPXQsby5fYnVzPXIsby5fc3ViVVJMPW4ucnVudGltZVVSTCsiL3NtIixvLl9yZXBvcnRlcnM9e30sby5fb2JzZXJ2ZXJzPXt9LG8uX3Byb3Zpc2lvbmFscz17fSxyLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aWYoZS5mcm9tIT09dClzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjpvLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOm8uX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjpvLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6ImNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7ci5yZXBvcnRlcj1uLl9vd25lcixyLnNjaGVtYT1lO3ZhciBvPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fb3duZXIsdG86bi5fc3ViVVJMLGJvZHk6e3NjaGVtYTplLHZhbHVlOnIsYXV0aG9yaXNlOnR9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LGkpe24uX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSxhPW5ldyBmWyJkZWZhdWx0Il0obixzLGUsIm9uIixyLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7bi5fcmVwb3J0ZXJzW3NdPWEsdChhKX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKG8saSl7ci5fYnVzLnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24obil7Y29uc29sZS5sb2coInN1YnNjcmliZS1yZXNwb25zZTogIixuKTt2YXIgcz1yLl9wcm92aXNpb25hbHNbdF07aWYoZGVsZXRlIHIuX3Byb3Zpc2lvbmFsc1t0XSxzJiZzLl9yZWxlYXNlTGlzdGVuZXJzKCksbi5ib2R5LmNvZGU8MjAwKXM9bmV3IGhbImRlZmF1bHQiXShyLl9vd25lcix0LHIuX2J1cyxuLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpLHIuX3Byb3Zpc2lvbmFsc1t0XT1zO2Vsc2UgaWYoMjAwPT09bi5ib2R5LmNvZGUpe3ZhciBhPW5ldyBwWyJkZWZhdWx0Il0ocix0LGUsIm9uIixuLmJvZHkudmFsdWUscy5jaGlsZHJlbixuLmJvZHkudmVyc2lvbik7ci5fb2JzZXJ2ZXJzW3RdPWEsbyhhKSxzLmFwcGx5KGEpfWVsc2UgaShuLmJvZHkuZGVzYyl9KX0pfX0se2tleToicmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJyZWFkIixmcm9tOnQuX293bmVyLHRvOmV9O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKGUsbil7dC5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coInJlYWQtcmVzcG9uc2U6ICIsdCksMjAwPT09dC5ib2R5LmNvZGU/ZSh0LmJvZHkudmFsdWUpOm4odC5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtyLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbj0yMDA7ciYmKG49ciksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbiksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG4pKX19LHtrZXk6Il9vblJlbW90ZURlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXQuX29ic2VydmVyc1tyXTtpZihuKXt2YXIgbz17dHlwZTplLnR5cGUsdXJsOnIsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbz0yMDA7ciYmKG89ciksMjAwPT09byYmblsiZGVsZXRlIl0oKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpvLHNvdXJjZTp0Ll9vd25lcn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbyksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG8pKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fSx7a2V5OiJvd25lciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX293bmVyfX0se2tleToicmVwb3J0ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0ZXJzfX0se2tleToib2JzZXJ2ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzfX1dKSxlfSgpO3JbImRlZmF1bHQiXT15LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiOjk1LCIuL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vRGF0YVByb3Zpc2lvbmFsIjo5NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsYlsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiBjKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGwoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gYyhlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGY9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGYpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksYj1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1hLHIuZ2V0VXNlclVSTEZyb21FbWFpbD1jLHIuZ2V0VXNlckVtYWlsRnJvbVVSTD11LHIuY29udmVydFRvVXNlclVSTD1sfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo3fV19LHt9LFs5Ml0pKDkyKX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiAqIFNpbXBsZSBjbGFzcyBmb3IgZWFzaWVyIGxvZ2dpbmcKICovCgp2YXIgTG9nZ2VyID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gTG9nZ2VyKG5hbWUpIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9nZ2VyKTsKCiAgICAgICAgdGhpcy5wcmVmaXggPSBuYW1lICsgIiAiOwogICAgICAgIHRoaXMuYyA9IGNvbnNvbGU7CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKExvZ2dlciwgW3sKICAgICAgICBrZXk6ICJkIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZChtc2cpIHsKICAgICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gdGhpcy5wcmVmaXggKyBhcmd1bWVudHNbMF07CiAgICAgICAgICAgIHRoaXMuYy5kZWJ1Zy5hcHBseSh0aGlzLmMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogImwiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsKG1zZykgewogICAgICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICAgICAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhcmd1bWVudHNbMF0gPSB0aGlzLnByZWZpeCArIGFyZ3VtZW50c1swXTsKICAgICAgICAgICAgdGhpcy5jLmxvZy5hcHBseSh0aGlzLmMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogImkiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpKG1zZykgewogICAgICAgICAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMyA+IDEgPyBfbGVuMyAtIDEgOiAwKSwgX2tleTMgPSAxOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7CiAgICAgICAgICAgICAgICBhcmdzW19rZXkzIC0gMV0gPSBhcmd1bWVudHNbX2tleTNdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhcmd1bWVudHNbMF0gPSB0aGlzLnByZWZpeCArIGFyZ3VtZW50c1swXTsKICAgICAgICAgICAgdGhpcy5jLmluZm8uYXBwbHkodGhpcy5jLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICJ3IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdyhtc2cpIHsKICAgICAgICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjQgPiAxID8gX2xlbjQgLSAxIDogMCksIF9rZXk0ID0gMTsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykgewogICAgICAgICAgICAgICAgYXJnc1tfa2V5NCAtIDFdID0gYXJndW1lbnRzW19rZXk0XTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gdGhpcy5wcmVmaXggKyBhcmd1bWVudHNbMF07CiAgICAgICAgICAgIHRoaXMuYy53YXJuLmFwcGx5KHRoaXMuYywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAiZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGUobXNnKSB7CiAgICAgICAgICAgIGZvciAodmFyIF9sZW41ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW41ID4gMSA/IF9sZW41IC0gMSA6IDApLCBfa2V5NSA9IDE7IF9rZXk1IDwgX2xlbjU7IF9rZXk1KyspIHsKICAgICAgICAgICAgICAgIGFyZ3NbX2tleTUgLSAxXSA9IGFyZ3VtZW50c1tfa2V5NV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IHRoaXMucHJlZml4ICsgYXJndW1lbnRzWzBdOwogICAgICAgICAgICB0aGlzLmMuZXJyb3IuYXBwbHkodGhpcy5jLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gTG9nZ2VyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBMb2dnZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIF9EaXNjb3ZlcnkgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0Rpc2NvdmVyeScpOwoKdmFyIF9EaXNjb3ZlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGlzY292ZXJ5KTsKCnZhciBfSWRlbnRpdHlNYW5hZ2VyID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9JZGVudGl0eU1hbmFnZXInKTsKCnZhciBfSWRlbnRpdHlNYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0lkZW50aXR5TWFuYWdlcik7Cgp2YXIgX0xvZ2dlciA9IHJlcXVpcmUoJy4vTG9nZ2VyJyk7Cgp2YXIgX0xvZ2dlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Mb2dnZXIpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7Cgp2YXIgX3Jvb21Kc29uID0gcmVxdWlyZSgnLi9yb29tSnNvbicpOwoKdmFyIF9yb29tSnNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yb29tSnNvbik7Cgp2YXIgX0V2ZW50RW1pdHRlcjIgPSByZXF1aXJlKCcuLi91dGlscy9FdmVudEVtaXR0ZXInKTsKCnZhciBfRXZlbnRFbWl0dGVyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50RW1pdHRlcjIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKiBqc2hpbnQgdW5kZWY6IHRydWUgKi8KCnZhciB1cmwgPSAiaHR0cHM6Ly9sb2NhbGhvc3Q6ODAwMCI7CnZhciBsID0gbmV3IF9Mb2dnZXIyLmRlZmF1bHQoIlJPT01VSSIpOwoKdmFyIFJvb21VSVJlcG9ydGVyID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICAgIF9pbmhlcml0cyhSb29tVUlSZXBvcnRlciwgX0V2ZW50RW1pdHRlcik7CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBuZXcgUm9vbVVJUmVwb3J0ZXIKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBoeXBlcnR5VVJMIC0gVVJMIG9mIHRoZSBoeXBlcnR5CiAgICAgKiBAcGFyYW0ge01pbmlCdXN9IGJ1cyAtIE1pbmlCdXMKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWd1cmF0aW9uIC0gY29uZmlndXJhdGlvbiBvZiBoeXBlcnR5CiAgICAgKi8KCiAgICBmdW5jdGlvbiBSb29tVUlSZXBvcnRlcihoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUm9vbVVJUmVwb3J0ZXIpOwoKICAgICAgICBpZiAoIWh5cGVydHlVUkwpIHRocm93IG5ldyBFcnJvcignVGhlIGh5cGVydHlVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICAgICAgaWYgKCFidXMpIHRocm93IG5ldyBFcnJvcignVGhlIE1pbmlCdXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICAgICAgaWYgKCFjb25maWd1cmF0aW9uKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgICAgICBsLmQoImh5cGVydHlVUkw6IiwgaHlwZXJ0eVVSTCk7CiAgICAgICAgbC5kKCJidXM6IiwgYnVzKTsKICAgICAgICBsLmQoImNvbmZpZ3VyYXRpb246IiwgY29uZmlndXJhdGlvbik7CgogICAgICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUm9vbVVJUmVwb3J0ZXIpLmNhbGwodGhpcykpOwoKICAgICAgICBfdGhpczIuX2RvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShoeXBlcnR5VVJMKS5kb21haW47CgogICAgICAgIC8vIGNyZWF0ZSBPYmplY3QgU2NoZW1hIFVSTAogICAgICAgIF90aGlzMi5fb2JqZWN0RGVzY1VSTCA9ICdoeXBlcnR5LWNhdGFsb2d1ZTovLycgKyBfdGhpczIuX2RvbWFpbiArICcvLndlbGwta25vd24vZGF0YXNjaGVtYXMvUm9vbVVJRGF0YVNjaGVtYSc7CgogICAgICAgIC8vIG1ha2UgaHlwZXJ0eSBkaXNjb3ZlcmFibGUKICAgICAgICB2YXIgZGlzY292ZXJ5ID0gbmV3IF9EaXNjb3ZlcnkyLmRlZmF1bHQoaHlwZXJ0eVVSTCwgYnVzKTsKCiAgICAgICAgLy8gdGVzdCBpZGVudGl0eSBnYXRoZXJpbmcKICAgICAgICB2YXIgaWRlbnRpdHlNYW5hZ2VyID0gbmV3IF9JZGVudGl0eU1hbmFnZXIyLmRlZmF1bHQoaHlwZXJ0eVVSTCwgY29uZmlndXJhdGlvbi5ydW50aW1lVVJMLCBidXMpOwogICAgICAgIGlkZW50aXR5TWFuYWdlci5kaXNjb3ZlclVzZXJSZWdpc3RlcmVkKGh5cGVydHlVUkwpLnRoZW4oZnVuY3Rpb24gKHVzZXJVUkwpIHsKICAgICAgICAgICAgbC5kKCJnb3QgdXNlciBVUkw6IiwgdXNlclVSTCk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIG1ha2UgYXJndW1lbnRzIGF2YWlsYWJsZQogICAgICAgIF90aGlzMi5oeXBlcnR5VVJMID0gaHlwZXJ0eVVSTDsKICAgICAgICBfdGhpczIuYnVzID0gYnVzOwogICAgICAgIF90aGlzMi5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjsKCiAgICAgICAgLy8gbWFrZSBleGFtcGxlIHJvb20gYXZhaWxhYmxlCiAgICAgICAgX3RoaXMyLnJvb20gPSBfcm9vbUpzb24yLmRlZmF1bHQ7CgogICAgICAgIC8vIGxpc3Qgb2YgZGV2aWNlUmVwb3J0ZXIgb2JqZWN0cwogICAgICAgIF90aGlzMi5kZXZpY2VzID0gW107CgogICAgICAgIC8vIHN5bmNoZXIKICAgICAgICB2YXIgc3luY2hlciA9IG5ldyBfU3luY2hlci5TeW5jaGVyKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbik7CiAgICAgICAgX3RoaXMyLl9zeW5jaGVyID0gc3luY2hlcjsKCiAgICAgICAgLy8gZ2V0IGNvbnRleHRzCiAgICAgICAgdmFyIGRldmljZUNvbnRleHRzID0gX3RoaXMyLmdldERldmljZUNvbnRleHRzKCJyb29tMSIpOwoKICAgICAgICAvLyBjcmVhdGUgZGV2aWNlUmVwb3J0ZXIgb2JqZWN0IGZvciBlYWNoIGNvbnRleHQgYW5kIGFkZCBpdCB0byB0aGUgJ2RldmljZXMnIGxpc3QKICAgICAgICBkZXZpY2VDb250ZXh0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb250ZXh0LCBpKSB7CiAgICAgICAgICAgIGwuZCgiYnVpbGRpbmcgc3luY2hlciBiYXNlZCBvbiBjb250ZXh0OiIsIGNvbnRleHQpOwogICAgICAgICAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICAgICAgICAgIHN5bmNoZXIuY3JlYXRlKF90aGlzLl9vYmplY3REZXNjVVJMLCBbaHlwZXJ0eVVSTF0sIGNvbnRleHQpLnRoZW4oZnVuY3Rpb24gKGRldmljZVJlcG9ydGVyKSB7CiAgICAgICAgICAgICAgICBsLmQoJ2RldmljZSByZXBvcnRlciBjcmVhdGVkOicsIGRldmljZVJlcG9ydGVyKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5kZXZpY2VzW2ldID0gZGV2aWNlUmVwb3J0ZXI7CgogICAgICAgICAgICAgICAgLy8gdHJpZ2dlciBmb3IgR1VJIChvYmpVcmwgaXMgdGhlIG9uZSBSb29tVUlPYnNlcnZlciBzdWJzY3JpYmVzIHRvKQogICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignb2JqVXJsJywgZGV2aWNlUmVwb3J0ZXIuX3VybCk7CgogICAgICAgICAgICAgICAgLy8gcmVhY3QgdG8gYWRkZWQgY2hpbGRyZW4KICAgICAgICAgICAgICAgIGRldmljZVJlcG9ydGVyLm9uQWRkQ2hpbGQoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgbC5kKCJvbkFkZENoaWxkOiIsIGNoaWxkKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gY2hpbGQuZGF0YSA/IGNoaWxkLmRhdGEgOiBjaGlsZC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBsLmQoImNoaWxkIGRhdGE6IiwgY2hpbGREYXRhKTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdvbkFkZENoaWxkJywgY2hpbGREYXRhKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vIHJlYWN0IHRvIHN1YnNjcmlwdGlvbiByZXF1ZXN0cwogICAgICAgICAgICAgICAgZGV2aWNlUmVwb3J0ZXIub25TdWJzY3JpcHRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgbC5kKCdvblN1YnNjcmlwdGlvbjonLCBldmVudCk7CgogICAgICAgICAgICAgICAgICAgIC8vIGFjY2VwdCBhbmQgdHJpZ2dlcgogICAgICAgICAgICAgICAgICAgIGV2ZW50LmFjY2VwdCgpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ29uU3Vic2NyaWJlJywgZXZlbnQpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIF90aGlzMjsKICAgIH0KCiAgICAvKioKICAgICAqIE1vZGlmeSB0aGUgSUQgZmllbGQgb2YgYWxsIGRldmljZSByZXBvcnRlciBvYmplY3RzICh0byB0ZXN0IGlmIHN1YnNjcmlwdGlvbiB3b3JrcykKICAgICAqLwoKCiAgICBfY3JlYXRlQ2xhc3MoUm9vbVVJUmVwb3J0ZXIsIFt7CiAgICAgICAga2V5OiAnbW9kaWZ5Um9vbScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGlmeVJvb20oKSB7CiAgICAgICAgICAgIHZhciByU3RyaW5nID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpOwogICAgICAgICAgICB0aGlzLmRldmljZXMuZm9yRWFjaChmdW5jdGlvbiAoZGV2aWNlLCBpKSB7CiAgICAgICAgICAgICAgICBsLmQoIlNldHRpbmcgSUQgdG8gJyIgKyByU3RyaW5nICsgIicgb2YgZGV2aWNlOiIsIGRldmljZSk7CiAgICAgICAgICAgICAgICBkZXZpY2UuZGF0YS5pZCA9IHJTdHJpbmc7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0IHRoZSBsaXN0IG9mIGRldmljZXMgKEpTT04pIG9mIGEgcm9vbQogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByb29tSWQgLSBSb29tIElECiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBkZXZpY2VzCiAgICAgICAgICovCgogICAgfSwgewogICAgICAgIGtleTogJ2dldFJhd0RldmljZXMnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSYXdEZXZpY2VzKHJvb21JZCkgewogICAgICAgICAgICBsLmQoImdldFJhd0RldmljZXM6Iiwgcm9vbUlkKTsKCiAgICAgICAgICAgIC8vdmFyIGpzb24gPSB7J3Jvb20nOiByb29tSWR9OwogICAgICAgICAgICAvL3ZhciByb29tID0gdGhpcy5tYWtlUmVxdWVzdChqc29uKS5kYXRhOwoKICAgICAgICAgICAgLy8gRm9yIG5vdyB3ZSB1c2UgdGhlIGV4YW1wbGUgcm9vbQogICAgICAgICAgICB2YXIgcm9vbSA9IHRoaXMucm9vbS5kYXRhOwogICAgICAgICAgICBsLmQoImdvdCByb29tOiIsIHJvb20pOwoKICAgICAgICAgICAgcmV0dXJuIHJvb20uZGV2aWNlczsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZSBhIERldmljZSBDb250ZXh0IGJhc2VkIG9uIGEgSlNPTiBvYmplY3QKICAgICAgICAgKiBAcGFyYW0ge0pTT059IGRldmljZSAtIHJhdyBEZXZpY2UgaW4gSlNPTiBmb3JtYXQKICAgICAgICAgKiBAcmV0dXJucyB7e2lkOiAqLCB0eXBlOiBzdHJpbmcsIHZhbHVlczogKltdLCBjaGlsZHJlbjogc3RyaW5nW119fSBjb250ZXh0CiAgICAgICAgICovCgogICAgfSwgewogICAgICAgIGtleTogJ2NyZWF0ZURldmljZUNvbnRleHQnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEZXZpY2VDb250ZXh0KGRldmljZSkgewogICAgICAgICAgICB2YXIgZGV2aWNlQ29udGV4dCA9IHsKICAgICAgICAgICAgICAgICJpZCI6IGRldmljZS5faWQsCiAgICAgICAgICAgICAgICAidHlwZSI6ICJMSUdIVCIsCiAgICAgICAgICAgICAgICAidmFsdWVzIjogW3sKICAgICAgICAgICAgICAgICAgICAibmFtZSI6IGRldmljZS5uYW1lLAogICAgICAgICAgICAgICAgICAgICJ1bml0IjogInNvbWVVbml0IiwKICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiBkZXZpY2UsCiAgICAgICAgICAgICAgICAgICAgInN1bSI6ICJzb21lVW5pdCIKICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgImNoaWxkcmVuIjogWyJhY3Rpb25zIiwgImNvbnRleHRzIl0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIGRldmljZUNvbnRleHQ7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBHZXQgYWxsIGRldmljZXMgQ29udGV4dHMgZm9yIGEgZ2l2ZW4gcm9vbQogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByb29tSWQgLSBSb29tIElECiAgICAgICAgICogQHJldHVybnMge0FycmF5fSBjb250ZXh0cwogICAgICAgICAqLwoKICAgIH0sIHsKICAgICAgICBrZXk6ICdnZXREZXZpY2VDb250ZXh0cycsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERldmljZUNvbnRleHRzKHJvb21JZCkgewogICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgICAgICAgIHZhciBkZXZpY2VzID0gdGhpcy5nZXRSYXdEZXZpY2VzKHJvb21JZCk7CiAgICAgICAgICAgIHZhciBkZXZpY2VDb250ZXh0cyA9IFtdOwogICAgICAgICAgICBkZXZpY2VzLmZvckVhY2goZnVuY3Rpb24gKGRldmljZSwgaSkgewogICAgICAgICAgICAgICAgZGV2aWNlQ29udGV4dHNbaV0gPSBfdGhpczMuY3JlYXRlRGV2aWNlQ29udGV4dChkZXZpY2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGRldmljZUNvbnRleHRzOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0IHRoZSByYXcgRGV2aWNlIEpTT04gYmFzZWQgb24gSUQKICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQKICAgICAgICAgKiBAcmV0dXJucyB7SlNPTn0gZGV2aWNlCiAgICAgICAgICovCgogICAgfSwgewogICAgICAgIGtleTogJ2dldFJhd0RldmljZScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJhd0RldmljZShkZXZpY2VJZCkgewogICAgICAgICAgICBsLmQoImdldFJhd0RldmljZToiLCBkZXZpY2VJZCk7CgogICAgICAgICAgICAvL3ZhciBqc29uID0geydkZXZpY2UnOiBkZXZpY2VJZH07CiAgICAgICAgICAgIC8vdmFyIGRldmljZSA9IHRoaXMubWFrZVJlcXVlc3QoanNvbikuZGF0YTsKCiAgICAgICAgICAgIC8vIEZvciBub3cgd2UgdXNlIHRoZSBkZXZpY2Ugb2YgdGhlIGV4YW1wbGUgcm9vbQogICAgICAgICAgICB2YXIgZGV2aWNlID0gdGhpcy5yb29tLmRhdGEuZGV2aWNlc1swXTsKICAgICAgICAgICAgbC5kKCJnb3QgZGV2aWNlOiIsIGRldmljZSk7CgogICAgICAgICAgICByZXR1cm4gZGV2aWNlOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogTWFrZXMgYSBQT1NUIHJlcXVlc3Qgd2l0aCB0aGUgZ2l2ZW4gcGF5bG9hZCBhbmQgcmV0dXJucyB0aGUgcmVzcG9uc2UKICAgICAgICAgKiBAcGFyYW0ge0pTT059IGpzb24gLSBKU09OIHBheWxvYWQgZm9yIFBPU1QgcmVxdWVzdAogICAgICAgICAqIEByZXR1cm5zIHtKU09OfSByZXNwb25zZQogICAgICAgICAqLwoKICAgIH0sIHsKICAgICAgICBrZXk6ICdtYWtlUmVxdWVzdCcsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KGpzb24pIHsKICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsIHVybCwgZmFsc2UpOyAvLyBmYWxzZSBmb3Igc3luY2hyb25vdXMgcmVxdWVzdAogICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KGpzb24pKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigncmVxdWVzdCBmYWlsZWQ6ICcsIGUpOwogICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2coJ2dvdCByZXNwb25zZTogJyArIHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgdmFyIHJlc3AgPSB4bWxIdHRwLnJlc3BvbnNlVGV4dDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXNwID0gSlNPTi5wYXJzZSh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2pzb24gcGFyc2luZyBmYWlsZWQsIHByb2JhYmx5IG5vdCBqc29uOicsIHJlc3ApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGwuZCgibWFrZVJlcXVlc3QgcmV0dXJuczoiLCByZXNwKTsKCiAgICAgICAgICAgIC8vIFRPRE8gZXJyb3IgaGFuZGxpbmcKICAgICAgICAgICAgcmV0dXJuIHJlc3A7CiAgICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBSb29tVUlSZXBvcnRlcjsKfShfRXZlbnRFbWl0dGVyMy5kZWZhdWx0KTsKCmZ1bmN0aW9uIGFjdGl2YXRlKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbikgewogICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiAnUm9vbVVJUmVwb3J0ZXInLAogICAgICAgIGluc3RhbmNlOiBuZXcgUm9vbVVJUmVwb3J0ZXIoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKQogICAgfTsKfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy9FdmVudEVtaXR0ZXIiOjcsIi4uL3V0aWxzL3V0aWxzIjo4LCIuL0xvZ2dlciI6NCwiLi9yb29tSnNvbiI6Niwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9EaXNjb3ZlcnkiOjEsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSWRlbnRpdHlNYW5hZ2VyIjoyLCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXIiOjN9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7Ci8vIGV4YW1wbGUgUm9vbQp2YXIgcm9vbUpzb24gPSB7CiAgICAiZGF0YSI6IHsKICAgICAgICAiX192IjogMSwKICAgICAgICAiX2lkIjogIjU3MjA4ZTE4MWJmNDljYjI1ZjRiY2ZkMyIsCiAgICAgICAgImlzQm9va2VkIjogZmFsc2UsCiAgICAgICAgIm5hbWUiOiAicm9vbTEiLAogICAgICAgICJtZW1iZXJzIjogW10sCiAgICAgICAgImRldmljZXMiOiBbewogICAgICAgICAgICAiX192IjogMCwKICAgICAgICAgICAgIl9pZCI6ICI1NzIwOGUxODFiZjQ5Y2IyNWY0YmNmZDYiLAogICAgICAgICAgICAibmFtZSI6ICJteUxpZ2h0IiwKICAgICAgICAgICAgInJvb20iOiAiNTcyMDhlMTgxYmY0OWNiMjVmNGJjZmQzIiwKICAgICAgICAgICAgImxhc3RWYWx1ZXMiOiBbXSwKICAgICAgICAgICAgInJlZ2lzdHJhdGlvbiI6IHsKICAgICAgICAgICAgICAgICJ0aW1lc3RhbXAiOiAiMjAxNi0wNC0yN1QxMDowMjowMC45MzdaIiwKICAgICAgICAgICAgICAgICJyZWdpc3RlcmVkIjogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH1dCiAgICB9Cn07CgpleHBvcnRzLmRlZmF1bHQgPSByb29tSnNvbjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKLyoqCiAqIEV2ZW50RW1pdHRlcgogKiBBbGwgY2xhc3NlcyB3aGljaCBleHRlbmRzIHRoaXMsIGNhbiBoYXZlIGFkZEV2ZW50TGlzdGVuZXIgYW5kIHRyaWdnZXIgZXZlbnRzOwogKi8KCnZhciBFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRXZlbnRFbWl0dGVyLCBbewogICAga2V5OiAiYWRkRXZlbnRMaXN0ZW5lciIsCgoKICAgIC8qKgogICAgICogYWRkRXZlbnRMaXN0ZW5lciBsaXN0ZW4gZm9yIGFuIGV2ZW50VHlwZQogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgIGV2ZW50VHlwZSAtIGxpc3RlbmluZyBmb3IgdGhpcyB0eXBlIG9mIGV2ZW50CiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gICAgICAgY2IgICAgICAgIC0gY2FsbGJhY2sgZnVuY3Rpb24gd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBldmVudCBpdCBpcyBpbnZva2VkCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXNbZXZlbnRUeXBlXSA9IGNiOwogICAgfQoKICAgIC8qKgogICAgICogSW52b2tlIHRoZSBldmVudFR5cGUKICAgICAqIEBwYXJhbSAge3N0cmluZ30gZXZlbnRUeXBlIC0gZXZlbnQgd2lsbCBiZSBpbnZva2VkCiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBhcmFtcyAtIHBhcmFtZXRlcnMgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGFkZEV2ZW50TGlzdGVuZXIKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ0cmlnZ2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyKGV2ZW50VHlwZSwgcGFyYW1zKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXNbZXZlbnRUeXBlXSkgewogICAgICAgIF90aGlzW2V2ZW50VHlwZV0ocGFyYW1zKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIEV2ZW50RW1pdHRlcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gRXZlbnRFbWl0dGVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGl2aWRlVVJMID0gZGl2aWRlVVJMOwpleHBvcnRzLmRlZXBDbG9uZSA9IGRlZXBDbG9uZTsKZXhwb3J0cy5nZXRDb25maWcgPSBnZXRDb25maWc7CmV4cG9ydHMuZ2V0VXNlck1lZGlhID0gZ2V0VXNlck1lZGlhOwpleHBvcnRzLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTsKZXhwb3J0cy5nZXRUZW1wbGF0ZSA9IGdldFRlbXBsYXRlOwovKioKICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqKi8KCi8vIGpzaGludCBicm93c2VyOnRydWUsIGpxdWVyeTogdHJ1ZQovLyBqc2hpbnQgdmFyc3RtdDogdHJ1ZQovKiBnbG9iYWwgSGFuZGxlYmFycyAqLwoKLyoqCiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWwKICogQG1vZHVsZSB1dGlscwogKi8KCi8qKgogKiBAdHlwZWRlZiBkaXZpZGVVUkwKICogQHR5cGUgT2JqZWN0CiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMCiAqLwoKLyoqCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1cmwgLSB1cmwgYWRkcmVzcwogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAqLwpmdW5jdGlvbiBkaXZpZGVVUkwodXJsKSB7CgogIC8vIGxldCByZSA9IC8oW2EtekEtWi1dKik/OlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIpKihcL1tcL1xkXHdcLi1dKikqKD86W1w/XSkqKC4rKSovZ2k7CiAgdmFyIHJlID0gLyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7CiAgdmFyIHN1YnN0ID0gJyQxLCQyLCQzJzsKICB2YXIgcGFydHMgPSB1cmwucmVwbGFjZShyZSwgc3Vic3QpLnNwbGl0KCcsJyk7CgogIC8vIElmIHRoZSB1cmwgaGFzIG5vIHByb3RvY29sLCB0aGUgZGVmYXVsdCBwcm90b2NvbCBzZXQgaXMgaHR0cHMKICBpZiAocGFydHNbMF0gPT09IHVybCkgewogICAgcGFydHNbMF0gPSAnaHR0cHMnOwogICAgcGFydHNbMV0gPSB1cmw7CiAgfQoKICB2YXIgcmVzdWx0ID0gewogICAgdHlwZTogcGFydHNbMF0sCiAgICBkb21haW46IHBhcnRzWzFdLAogICAgaWRlbnRpdHk6IHBhcnRzWzJdCiAgfTsKCiAgcmV0dXJuIHJlc3VsdDsKfQoKLyoqCiAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQKICogQHJldHVybiB7T2JqZWN0fQogKi8KZnVuY3Rpb24gZGVlcENsb25lKG9iaikgewogIC8vVE9ETzogc2ltcGxlIGJ1dCBpbmVmZmljaWVudCBKU09OIGRlZXAgY2xvbmUuLi4KICBpZiAob2JqKSByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTsKfQoKLyoqCiAqIEdldCB0aGUgY29uZmlndXJhdGlvbiBmcm9tIGFuIGpzb24gZmlsZTsKICogQHBhcmFtICB7SlNPTk9iamVjdH0ganNvbkZpbGUKICogQHJldHVybiB7b2JqZWN0fQogKi8KZnVuY3Rpb24gZ2V0Q29uZmlnKEpTT05PYmplY3QpIHsKICBjb25zb2xlLmxvZygnZGV2ZWxvcCcpOwogIHJldHVybiBKU09OT2JqZWN0WydkZXZlbG9wJ107Cn0KCi8qKgogKiBHZXQgV2ViUlRDIEFQSSByZXNvdXJjZXMKICogQHBhcmFtICB7T2JqZWN0fSAgICAgb3B0aW9ucyBPYmplY3QgY29udGFpbmluZyB0aGUgaW5mb3JtYXRpb24gdGhhdCByZXNvdXJjZXMgd2lsbCBiZSB1c2VkIChjYW1lcmEsIG1pYywgcmVzb2x1dGlvbiwgZXRjKTsKICogQHJldHVybiB7UHJvbWlzZX0KICovCmZ1bmN0aW9uIGdldFVzZXJNZWRpYShjb25zdHJhaW50cykgewoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uIChtZWRpYVN0cmVhbSkgewogICAgICByZXNvbHZlKG1lZGlhU3RyZWFtKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICB9KTsKICB9KTsKfQoKZnVuY3Rpb24gc2VyaWFsaXplKCkgewoKICAkLmZuLnNlcmlhbGl6ZU9iamVjdCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBvID0ge307CiAgICB2YXIgYSA9IHRoaXMuc2VyaWFsaXplQXJyYXkoKTsKICAgICQuZWFjaChhLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChvW3RoaXMubmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmICghb1t0aGlzLm5hbWVdLnB1c2gpIHsKICAgICAgICAgIG9bdGhpcy5uYW1lXSA9IFtvW3RoaXMubmFtZV1dOwogICAgICAgIH0KCiAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSB8fCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb1t0aGlzLm5hbWVdID0gdGhpcy52YWx1ZSB8fCAnJzsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIG87CiAgfTsKCiAgJC5mbi5zZXJpYWxpemVPYmplY3RBcnJheSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBvID0ge307CiAgICB2YXIgYSA9IHRoaXMuc2VyaWFsaXplQXJyYXkoKTsKICAgICQuZWFjaChhLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChvW3RoaXMubmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmICghb1t0aGlzLm5hbWVdLnB1c2gpIHsKICAgICAgICAgIG9bdGhpcy5uYW1lXSA9IFtvW3RoaXMubmFtZV1dOwogICAgICAgIH0KCiAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSB8fCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0pIG9bdGhpcy5uYW1lXSA9IFtdOwogICAgICAgIG9bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWUgfHwgJycpOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbzsKICB9Owp9CgpmdW5jdGlvbiBnZXRUZW1wbGF0ZShwYXRoLCBzY3JpcHQpIHsKCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICBpZiAoSGFuZGxlYmFycy50ZW1wbGF0ZXMgPT09IHVuZGVmaW5lZCB8fCBIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIEhhbmRsZWJhcnMudGVtcGxhdGVzID0ge307CiAgICB9IGVsc2UgewogICAgICByZXNvbHZlKEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdKTsKICAgIH0KCiAgICB2YXIgdGVtcGxhdGVGaWxlID0gJC5hamF4KHsKICAgICAgdXJsOiBwYXRoICsgJy5oYnMnLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHsKICAgICAgICBIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXSA9IEhhbmRsZWJhcnMuY29tcGlsZShkYXRhKTsKICAgICAgfSwKCiAgICAgIGZhaWw6IGZ1bmN0aW9uIGZhaWwocmVhc29uKSB7CiAgICAgICAgcmV0dXJuIHJlYXNvbjsKICAgICAgfQogICAgfSk7CgogICAgdmFyIHNjcmlwdEZpbGUgPSAkLmdldFNjcmlwdChzY3JpcHQpOwoKICAgIHZhciByZXF1ZXN0cyA9IFtdOwogICAgaWYgKHBhdGgpIHJlcXVlc3RzLnB1c2godGVtcGxhdGVGaWxlKTsKICAgIGlmIChzY3JpcHQpIHJlcXVlc3RzLnB1c2goc2NyaXB0RmlsZSk7CgogICAgUHJvbWlzZS5hbGwocmVxdWVzdHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICByZXNvbHZlKEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICB9KTsKICB9KTsKfQoKfSx7fV19LHt9LFs1XSkoNSkKfSk7",
      "sourceCodeClassname": "RoomUIReporter",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10007,
    "version": "0.1",
    "description": "Description of RoomUIReporter",
    "objectName": "RoomUIReporter",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "hypertyType": []
  },
  "FakeLocationObserver": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBTeW5jaGVyLmpzIAovLyB2ZXJzaW9uOiAwLjIuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDAyIDIwMTYgMTU6NDg6MDUgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuU3luY2hlcj1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYSl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmYylyZXR1cm4gYyhzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciB1PW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyB1LmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLHV9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sbCxsLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmUmJiFBcnJheS5vYnNlcnZlJiZmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1lLmdldE5vdGlmaWVyLG49InBlcmZvcm1DaGFuZ2UiLG89Il9vcmlnaW5hbCIsaT0ic3BsaWNlIixzPXtwdXNoOmZ1bmN0aW9uIGMoZSl7dmFyIHQ9YXJndW1lbnRzLHM9Y1tvXS5hcHBseSh0aGlzLHQpO3JldHVybiByKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6cy10Lmxlbmd0aCxhZGRlZENvdW50OnQubGVuZ3RoLHJlbW92ZWQ6W119fSksc30sdW5zaGlmdDpmdW5jdGlvbiB1KGUpe3ZhciB0PWFyZ3VtZW50cyxzPXVbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHBvcDpmdW5jdGlvbiBsKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1sW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnRoaXMubGVuZ3RoLGFkZGVkQ291bnQ6MCxyZW1vdmVkOlt0XX19LHRoaXMpLHR9LHNoaWZ0OmZ1bmN0aW9uIGYoKXt2YXIgZT10aGlzLmxlbmd0aCx0PWZbb10uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5sZW5ndGghPT1lJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6MCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzcGxpY2U6ZnVuY3Rpb24gZChlLHQpe3ZhciBzPWFyZ3VtZW50cyxhPWRbb10uYXBwbHkodGhpcyxzKTtyZXR1cm4oYS5sZW5ndGh8fHMubGVuZ3RoPjIpJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6ZSxhZGRlZENvdW50OnMubGVuZ3RoLTIscmVtb3ZlZDphfX0sdGhpcyksYX19O2Zvcih2YXIgYSBpbiBzKXNbYV1bb109dC5wcm90b3R5cGVbYV0sdC5wcm90b3R5cGVbYV09c1thXTt0Lm9ic2VydmU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5vYnNlcnZlKHQscixbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsaV0pfSx0LnVub2JzZXJ2ZT1lLnVub2JzZXJ2ZX0oT2JqZWN0LEFycmF5KX0se31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiOjE3fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjE4fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjE5fV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjIwfV0sNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjF9XSw3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjoyMn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjIzfV0sOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjI0fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCI6MjV9XSwxMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo0fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBvPSEwO287KXt2YXIgaT1lLHM9dCxhPXI7bz0hMSxudWxsPT09aSYmKGk9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgYz1uKGkscyk7aWYodm9pZCAwIT09Yyl7aWYoInZhbHVlImluIGMpcmV0dXJuIGMudmFsdWU7dmFyIHU9Yy5nZXQ7aWYodm9pZCAwPT09dSlyZXR1cm47cmV0dXJuIHUuY2FsbChhKX12YXIgbD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaSk7aWYobnVsbD09PWwpcmV0dXJuO2U9bCx0PXMscj1hLG89ITAsYz1sPXZvaWQgMH19LHIuX19lc01vZHVsZT0hMH0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NX1dLDE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9bih0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKG8/byhlLHQpOmUuX19wcm90b19fPXQpfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6OH1dLDE1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2hlbHBlcnMvdHlwZW9mIiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxpWyJkZWZhdWx0Il0pKHQpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fX0seyIuLi9oZWxwZXJzL3R5cGVvZiI6MTZ9XSwxNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuY29uc3RydWN0b3I9PT1uPyJzeW1ib2wiOnR5cGVvZiBlfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCI6MTB9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMX1dLDE4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY3JlYXRlKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwxOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwyMDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXREZXNjKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjgxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjo4Mn1dLDIyOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo4M31dLDIzOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiI6ODR9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo4NiwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo4NywiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo4OX1dLDI1OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIiksZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLlN5bWJvbH0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiOjg4fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwyNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0Ijo0OX1dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MzAsIi4vJC53a3MiOjc4fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2fV0sMzM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjM4fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRLZXlzKGUpLHI9bi5nZXRTeW1ib2xzO2lmKHIpZm9yKHZhciBvLGk9cihlKSxzPW4uaXNFbnVtLGE9MDtpLmxlbmd0aD5hOylzLmNhbGwoZSxvPWlbYSsrXSkmJnQucHVzaChvKTtyZXR1cm4gdH19LHsiLi8kIjo1Nn1dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLHUsbCxmPWUmYS5GLGQ9ZSZhLkcscD1lJmEuUyxiPWUmYS5QLGg9ZSZhLkIsdj1lJmEuVyx5PWQ/bzpvW3RdfHwob1t0XT17fSksXz1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGMgaW4gcil1PSFmJiZfJiZjIGluIF8sdSYmYyBpbiB5fHwobD11P19bY106cltjXSx5W2NdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBfW2NdP3JbY106aCYmdT9pKGwsbik6diYmX1tjXT09bD9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShsKTpiJiYiZnVuY3Rpb24iPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxiJiYoKHlbc118fCh5W3NdPXt9KSlbY109bCkpfTthLkY9MSxhLkc9MixhLlM9NCxhLlA9OCxhLkI9MTYsYS5XPTMyLHQuZXhwb3J0cz1hfSx7Ii4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5nbG9iYWwiOjQxfV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYT1lKCIuLyQudG8tbGVuZ3RoIiksYz1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgbCxmLGQscD1jKGUpLGI9bihyLHUsdD8yOjEpLGg9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihsPWEoZS5sZW5ndGgpO2w+aDtoKyspdD9iKHMoZj1lW2hdKVswXSxmWzFdKTpiKGVbaF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEoZj1kLm5leHQoKSkuZG9uZTspbyhkLGIsZi52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtYXJyYXktaXRlciI6NDcsIi4vJC5pdGVyLWNhbGwiOjUwLCIuLyQudG8tbGVuZ3RoIjo3NSwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjc5fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpLG89ZSgiLi8kIikuZ2V0TmFtZXMsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBvKGUpfWNhdGNoKHQpe3JldHVybiBzLnNsaWNlKCl9fTt0LmV4cG9ydHMuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6NTYsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MX1dLDQ0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjozMH1dLDQ3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0seyIuLyQuY29mIjozMH1dLDQ5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6Mjh9XSw1MTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6NTYsIi4vJC5oaWRlIjo0MywiLi8kLnByb3BlcnR5LWRlc2MiOjYxLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYT1lKCIuLyQuaGFzIiksYz1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxsPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGY9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSxiPSJAQGl0ZXJhdG9yIixoPSJrZXlzIix2PSJ2YWx1ZXMiLHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLF8sZyxtLGope3Uocix0LF8pO3ZhciAkLHcsTz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBFKXJldHVybiBFW2VdO3N3aXRjaChlKXtjYXNlIGg6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgdjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIseD1nPT12LEM9ITEsRT1lLnByb3RvdHlwZSxTPUVbZF18fEVbYl18fGcmJkVbZ10sVD1TfHxPKGcpO2lmKFMpe3ZhciBSPWYoVC5jYWxsKG5ldyBlKSk7bChSLGssITApLCFuJiZhKEUsYikmJnMoUixkLHkpLHgmJlMubmFtZSE9PXYmJihDPSEwLFQ9ZnVuY3Rpb24oKXtyZXR1cm4gUy5jYWxsKHRoaXMpfSl9aWYobiYmIWp8fCFwJiYhQyYmRVtkXXx8cyhFLGQsVCksY1t0XT1ULGNba109eSxnKWlmKCQ9e3ZhbHVlczp4P1Q6Tyh2KSxrZXlzOm0/VDpPKGgpLGVudHJpZXM6eD9PKCJlbnRyaWVzIik6VH0sailmb3IodyBpbiAkKXcgaW4gRXx8aShFLHcsJFt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fEMpLHQsJCk7cmV0dXJuICR9fSx7Ii4vJCI6NTYsIi4vJC5leHBvcnQiOjM3LCIuLyQuaGFzIjo0MiwiLi8kLmhpZGUiOjQzLCIuLyQuaXRlci1jcmVhdGUiOjUxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLmxpYnJhcnkiOjU4LCIuLyQucmVkZWZpbmUiOjYzLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYSl7fXJldHVybiByfX0seyIuLyQud2tzIjo3OH1dLDU0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDU1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSw1NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaT1vKGUpLHM9bi5nZXRLZXlzKGkpLGE9cy5sZW5ndGgsYz0wO2E+YzspaWYoaVtyPXNbYysrXV09PT10KXJldHVybiByfX0seyIuLyQiOjU2LCIuLyQudG8taW9iamVjdCI6NzR9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLnRhc2siKS5zZXQsYz1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxsPXMuUHJvbWlzZSxmPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGYmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihmKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGMpe3ZhciBwPTEsYj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGMoZCkub2JzZXJ2ZShiLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe2IuZGF0YT1wPS1wfX1lbHNlIGk9bCYmbC5yZXNvbHZlP2Z1bmN0aW9uKCl7bC5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXthLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpmJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjozMCwiLi8kLmdsb2JhbCI6NDEsIi4vJC50YXNrIjo3Mn1dLDYwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjozMSwiLi8kLmV4cG9ydCI6MzcsIi4vJC5mYWlscyI6Mzh9XSw2MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjYzfV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6NDN9XSw2NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw2NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDY2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjo1NiwiLi8kLmNvcmUiOjMxLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQud2tzIjo3OH1dLDY3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjo1NiwiLi8kLmhhcyI6NDIsIi4vJC53a3MiOjc4fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6NDF9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQud2tzIjo3OH1dLDcwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDcxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYT1TdHJpbmcobyh0KSksYz1uKHIpLHU9YS5sZW5ndGg7cmV0dXJuIDA+Y3x8Yz49dT9lPyIiOnZvaWQgMDooaT1hLmNoYXJDb2RlQXQoYyksNTUyOTY+aXx8aT41NjMxOXx8YysxPT09dXx8KHM9YS5jaGFyQ29kZUF0KGMrMSkpPDU2MzIwfHxzPjU3MzQzP2U/YS5jaGFyQXQoYyk6aTplP2Euc2xpY2UoYyxjKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLnRvLWludGVnZXIiOjczfV0sNzI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYT1lKCIuLyQuaW52b2tlIiksYz1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxsPWUoIi4vJC5nbG9iYWwiKSxmPWwucHJvY2VzcyxkPWwuc2V0SW1tZWRpYXRlLHA9bC5jbGVhckltbWVkaWF0ZSxiPWwuTWVzc2FnZUNoYW5uZWwsaD0wLHY9e30seT0ib25yZWFkeXN0YXRlY2hhbmdlIixfPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYodi5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9dltlXTtkZWxldGUgdltlXSx0KCl9fSxnPWZ1bmN0aW9uKGUpe18uY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gdlsrK2hdPWZ1bmN0aW9uKCl7YSgiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKGgpLGh9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHZbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGYpP249ZnVuY3Rpb24oZSl7Zi5uZXh0VGljayhzKF8sZSwxKSl9OmI/KG89bmV3IGIsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcsbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6bC5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFsLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7bC5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZywhMSkpOm49eSBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXtjLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVt5XT1mdW5jdGlvbigpe2MucmVtb3ZlQ2hpbGQodGhpcyksXy5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKF8sZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MzAsIi4vJC5jdHgiOjMyLCIuLyQuZG9tLWNyZWF0ZSI6MzUsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaHRtbCI6NDQsIi4vJC5pbnZva2UiOjQ1fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLmlvYmplY3QiOjQ2fV0sNzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo3M31dLDc2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjMzfV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjo0MSwiLi8kLnNoYXJlZCI6NjgsIi4vJC51aWQiOjc3fV0sNzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDgwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MjcsIi4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5pdGVyLXN0ZXAiOjU0LCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLnRvLWlvYmplY3QiOjc0fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIGUobih0KSxyKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDgzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImtleXMiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZShuKHQpKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1vYmplY3QiOjc2fV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vJC5zZXQtcHJvdG8iKS5zZXR9KX0seyIuLyQuZXhwb3J0IjozNywiLi8kLnNldC1wcm90byI6NjV9XSw4NTpbZnVuY3Rpb24oZSx0LHIpe30se31dLDg2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLmN0eCIpLGM9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxsPWUoIi4vJC5pcy1vYmplY3QiKSxmPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLGI9ZSgiLi8kLmZvci1vZiIpLGg9ZSgiLi8kLnNldC1wcm90byIpLnNldCx2PWUoIi4vJC5zYW1lLXZhbHVlIikseT1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxfPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksZz1lKCIuLyQubWljcm90YXNrIiksbT0iUHJvbWlzZSIsaj1zLnByb2Nlc3MsJD0icHJvY2VzcyI9PWMoaiksdz1zW21dLE89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gaChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmTygpLGgodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLHg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnYoZSx0KX0sQz1mdW5jdGlvbihlKXt2YXIgdD1mKGUpW3ldO3JldHVybiB2b2lkIDAhPXQ/dDplfSxFPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBsKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFM9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sVD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFI9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO2coZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxhPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGE9dC5yZXNvbHZlLGM9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2MoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPUUocikpP2kuY2FsbChyLGEsYyk6YShyKSk6YyhuKX1jYXRjaCh1KXtjKHUpfX07ci5sZW5ndGg+aTspYShyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO00obykmJigkP2ouZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxNPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFNKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFIodCwhMCkpfSxOPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PUUoZSkpP2coZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxhKE4sbiwxKSxhKEQsbiwxKSl9Y2F0Y2gobyl7RC5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFIociwhMSkpfWNhdGNoKG4pe0QuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxtKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYShOLHQsMSksYShELHQsMSkpfWNhdGNoKHIpe0QuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFMoXyh0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlIobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxtKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShtKSxuPWUoIi4vJC5jb3JlIilbbV0sdSh1LlMrdS5GKiFrLG0se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxPKCEwKSksbSx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmeChlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLG0se2FsbDpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGE9VChmdW5jdGlvbigpe2IoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYT1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxhW29dPWUsLS1yfHxuKGEpKX0saSl9KTpuKGEpfSk7cmV0dXJuIGEmJmkoYS5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PUModGhpcykscj1uZXcgUyh0KSxuPXIucmVqZWN0LG89VChmdW5jdGlvbigpe2IoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjU2LCIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY2xhc3NvZiI6MjksIi4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5leHBvcnQiOjM3LCIuLyQuZm9yLW9mIjozOSwiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5LCIuLyQuaXRlci1kZXRlY3QiOjUzLCIuLyQubGlicmFyeSI6NTgsIi4vJC5taWNyb3Rhc2siOjU5LCIuLyQucmVkZWZpbmUtYWxsIjo2MiwiLi8kLnNhbWUtdmFsdWUiOjY0LCIuLyQuc2V0LXByb3RvIjo2NSwiLi8kLnNldC1zcGVjaWVzIjo2NiwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjY5LCIuLyQuc3RyaWN0LW5ldyI6NzAsIi4vJC53a3MiOjc4fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5zdHJpbmctYXQiOjcxfV0sODg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQuZ2xvYmFsIiksaT1lKCIuLyQuaGFzIikscz1lKCIuLyQuZGVzY3JpcHRvcnMiKSxhPWUoIi4vJC5leHBvcnQiKSxjPWUoIi4vJC5yZWRlZmluZSIpLHU9ZSgiLi8kLmZhaWxzIiksbD1lKCIuLyQuc2hhcmVkIiksZj1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxkPWUoIi4vJC51aWQiKSxwPWUoIi4vJC53a3MiKSxiPWUoIi4vJC5rZXlvZiIpLGg9ZSgiLi8kLmdldC1uYW1lcyIpLHY9ZSgiLi8kLmVudW0ta2V5cyIpLHk9ZSgiLi8kLmlzLWFycmF5IiksXz1lKCIuLyQuYW4tb2JqZWN0IiksZz1lKCIuLyQudG8taW9iamVjdCIpLG09ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxqPW4uZ2V0RGVzYywkPW4uc2V0RGVzYyx3PW4uY3JlYXRlLE89aC5nZXQsaz1vLlN5bWJvbCx4PW8uSlNPTixDPXgmJnguc3RyaW5naWZ5LEU9ITEsUz1wKCJfaGlkZGVuIiksVD1uLmlzRW51bSxSPWwoInN5bWJvbC1yZWdpc3RyeSIpLE09bCgic3ltYm9scyIpLEQ9ImZ1bmN0aW9uIj09dHlwZW9mIGssTj1PYmplY3QucHJvdG90eXBlLFA9cyYmdShmdW5jdGlvbigpe3JldHVybiA3IT13KCQoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49aihOLHQpO24mJmRlbGV0ZSBOW3RdLCQoZSx0LHIpLG4mJmUhPT1OJiYkKE4sdCxuKX06JCxBPWZ1bmN0aW9uKGUpe3ZhciB0PU1bZV09dyhrLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSxzJiZFJiZQKE4sZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtpKHRoaXMsUykmJmkodGhpc1tTXSxlKSYmKHRoaXNbU11bZV09ITEpLFAodGhpcyxlLG0oMSx0KSl9fSksdH0sTD1mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9LEY9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByJiZpKE0sdCk/KHIuZW51bWVyYWJsZT8oaShlLFMpJiZlW1NdW3RdJiYoZVtTXVt0XT0hMSkscj13KHIse2VudW1lcmFibGU6bSgwLCExKX0pKTooaShlLFMpfHwkKGUsUyxtKDEse30pKSxlW1NdW3RdPSEwKSxQKGUsdCxyKSk6JChlLHQscil9LEk9ZnVuY3Rpb24oZSx0KXtfKGUpO2Zvcih2YXIgcixuPXYodD1nKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KUYoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sVj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3coZSk6SSh3KGUpLHQpfSxVPWZ1bmN0aW9uKGUpe3ZhciB0PVQuY2FsbCh0aGlzLGUpO3JldHVybiB0fHwhaSh0aGlzLGUpfHwhaShNLGUpfHxpKHRoaXMsUykmJnRoaXNbU11bZV0/dDohMH0sej1mdW5jdGlvbihlLHQpe3ZhciByPWooZT1nKGUpLHQpO3JldHVybiFyfHwhaShNLHQpfHxpKGUsUykmJmVbU11bdF18fChyLmVudW1lcmFibGU9ITApLHJ9LEg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pfHx0PT1TfHxuLnB1c2godCk7cmV0dXJuIG59LEI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pJiZuLnB1c2goTVt0XSk7cmV0dXJuIG59LEo9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIUwoZSkpe2Zvcih2YXIgdCxyLG49W2VdLG89MSxpPWFyZ3VtZW50cztpLmxlbmd0aD5vOyluLnB1c2goaVtvKytdKTtyZXR1cm4gdD1uWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10KSwhciYmeSh0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksTCh0KT92b2lkIDA6dH0pLG5bMV09dCxDLmFwcGx5KHgsbil9fSxXPXUoZnVuY3Rpb24oKXt2YXIgZT1rKCk7cmV0dXJuIltudWxsXSIhPUMoW2VdKXx8Int9IiE9Qyh7YTplfSl8fCJ7fSIhPUMoT2JqZWN0KGUpKX0pO0R8fChrPWZ1bmN0aW9uKCl7aWYoTCh0aGlzKSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3JldHVybiBBKGQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApKX0sYyhrLnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxMPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Yga30sbi5jcmVhdGU9VixuLmlzRW51bT1VLG4uZ2V0RGVzYz16LG4uc2V0RGVzYz1GLG4uc2V0RGVzY3M9SSxuLmdldE5hbWVzPWguZ2V0PUgsbi5nZXRTeW1ib2xzPUIscyYmIWUoIi4vJC5saWJyYXJ5IikmJmMoTiwicHJvcGVydHlJc0VudW1lcmFibGUiLFUsITApKTt2YXIgWT17ImZvciI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoUixlKz0iIik/UltlXTpSW2VdPWsoZSl9LGtleUZvcjpmdW5jdGlvbihlKXtyZXR1cm4gYihSLGUpfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtFPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtFPSExfX07bi5lYWNoLmNhbGwoImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGZ1bmN0aW9uKGUpe3ZhciB0PXAoZSk7WVtlXT1EP3Q6QSh0KX0pLEU9ITAsYShhLkcrYS5XLHtTeW1ib2w6a30pLGEoYS5TLCJTeW1ib2wiLFkpLGEoYS5TK2EuRiohRCwiT2JqZWN0Iix7Y3JlYXRlOlYsZGVmaW5lUHJvcGVydHk6RixkZWZpbmVQcm9wZXJ0aWVzOkksZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOnosZ2V0T3duUHJvcGVydHlOYW1lczpILGdldE93blByb3BlcnR5U3ltYm9sczpCfSkseCYmYShhLlMrYS5GKighRHx8VyksIkpTT04iLHtzdHJpbmdpZnk6Sn0pLGYoaywiU3ltYm9sIiksZihNYXRoLCJNYXRoIiwhMCksZihvLkpTT04sIkpTT04iLCEwKX0seyIuLyQiOjU2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLmVudW0ta2V5cyI6MzYsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4LCIuLyQuZ2V0LW5hbWVzIjo0MCwiLi8kLmdsb2JhbCI6NDEsIi4vJC5oYXMiOjQyLCIuLyQuaXMtYXJyYXkiOjQ4LCIuLyQua2V5b2YiOjU3LCIuLyQubGlicmFyeSI6NTgsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNoYXJlZCI6NjgsIi4vJC50by1pb2JqZWN0Ijo3NCwiLi8kLnVpZCI6NzcsIi4vJC53a3MiOjc4fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjgwfV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXt3aW5kb3cuTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5nPVtdLHRoaXMuaz1lfWZ1bmN0aW9uIHIoZSl7IWZ1bmN0aW9uIHIoKXt2YXIgbj1lLnRha2VSZWNvcmRzKCk7bi5sZW5ndGgmJmUuayhuLGUpLGUuZj1zZXRUaW1lb3V0KHIsdC5fcGVyaW9kKX0oKX1mdW5jdGlvbiBuKHQpe3ZhciByLG49e3R5cGU6bnVsbCx0YXJnZXQ6bnVsbCxhZGRlZE5vZGVzOltdLHJlbW92ZWROb2RlczpbXSxwcmV2aW91c1NpYmxpbmc6bnVsbCxuZXh0U2libGluZzpudWxsLGF0dHJpYnV0ZU5hbWU6bnVsbCxhdHRyaWJ1dGVOYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpudWxsfTtmb3IociBpbiB0KW5bcl0hPT1lJiZ0W3JdIT09ZSYmKG5bcl09dFtyXSk7cmV0dXJuIG59ZnVuY3Rpb24gbyhlLHQpe3ZhciByPWEoZSx0KTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIG8sYz1uLmxlbmd0aDt0LmEmJnIuYSYmaShuLGUsci5hLHQuZCksKHQuYnx8dC5lKSYmKG89cyhuLGUscix0KSksKG98fG4ubGVuZ3RoIT09YykmJihyPWEoZSx0KSl9fWZ1bmN0aW9uIGkodCxyLG8saSl7Zm9yKHZhciBzLGEsYz17fSx1PXIuYXR0cmlidXRlcyxsPXUubGVuZ3RoO2wtLTspcz11W2xdLGE9cy5uYW1lLGkmJmlbYV09PT1lfHwocy52YWx1ZSE9PW9bYV0mJnQucHVzaChuKHt0eXBlOiJhdHRyaWJ1dGVzIix0YXJnZXQ6cixhdHRyaWJ1dGVOYW1lOmEsb2xkVmFsdWU6b1thXSxhdHRyaWJ1dGVOYW1lc3BhY2U6cy5uYW1lc3BhY2VVUkl9KSksY1thXT0hMCk7Zm9yKGEgaW4gbyljW2FdfHx0LnB1c2gobih7dGFyZ2V0OnIsdHlwZToiYXR0cmlidXRlcyIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV19KSl9ZnVuY3Rpb24gcyh0LHIsbyxzKXtmdW5jdGlvbiBhKGUscixvLGEsYyl7dmFyIGw9ZS5sZW5ndGgtMTtjPS1+KChsLWMpLzIpO2Zvcih2YXIgZixkLHA7cD1lLnBvcCgpOylmPW9bcC5oXSxkPWFbcC5pXSxzLmImJmMmJk1hdGguYWJzKHAuaC1wLmkpPj1sJiYodC5wdXNoKG4oe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0OnIsYWRkZWROb2RlczpbZl0scmVtb3ZlZE5vZGVzOltmXSxuZXh0U2libGluZzpmLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpmLnByZXZpb3VzU2libGluZ30pKSxjLS0pLHMuYSYmZC5hJiZpKHQsZixkLmEscy5kKSxzLmMmJjM9PT1mLm5vZGVUeXBlJiZmLm5vZGVWYWx1ZSE9PWQuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpmfSkpLHMuZSYmdShmLGQpfWZ1bmN0aW9uIHUocixvKXtmb3IodmFyIGQscCxiLGgsdix5PXIuY2hpbGROb2RlcyxfPW8uYixnPXkubGVuZ3RoLG09Xz9fLmxlbmd0aDowLGo9MCwkPTAsdz0wO2c+JHx8bT53OyloPXlbJF0sdj0oYj1fW3ddKSYmYi5qLGg9PT12PyhzLmEmJmIuYSYmaSh0LGgsYi5hLHMuZCkscy5jJiZiLmMhPT1lJiZoLm5vZGVWYWx1ZSE9PWIuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpofSkpLHAmJmEocCxyLHksXyxqKSxzLmUmJihoLmNoaWxkTm9kZXMubGVuZ3RofHxiLmImJmIuYi5sZW5ndGgpJiZ1KGgsYiksJCsrLHcrKyk6KGw9ITAsZHx8KGQ9e30scD1bXSksaCYmKGRbYj1jKGgpXXx8KGRbYl09ITAsLTE9PT0oYj1mKF8saCx3LCJqIikpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2hdLG5leHRTaWJsaW5nOmgubmV4dFNpYmxpbmcscHJldmlvdXNTaWJsaW5nOmgucHJldmlvdXNTaWJsaW5nfSkpLGorKyk6cC5wdXNoKHtoOiQsaTpifSkpLCQrKyksdiYmdiE9PXlbJF0mJihkW2I9Yyh2KV18fChkW2JdPSEwLC0xPT09KGI9Zih5LHYsJCkpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpvLmoscmVtb3ZlZE5vZGVzOlt2XSxuZXh0U2libGluZzpfW3crMV0scHJldmlvdXNTaWJsaW5nOl9bdy0xXX0pKSxqLS0pOnAucHVzaCh7aDpiLGk6d30pKSx3KyspKTtwJiZhKHAscix5LF8sail9dmFyIGw7cmV0dXJuIHUocixvKSxsfWZ1bmN0aW9uIGEoZSx0KXt2YXIgcj0hMDtyZXR1cm4gZnVuY3Rpb24gbihlKXt2YXIgbz17ajplfTtyZXR1cm4hdC5jfHwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGU/KHQuYSYmciYmMT09PWUubm9kZVR5cGUmJihvLmE9bChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5kJiYhdC5kW3IubmFtZV18fChlW3IubmFtZV09ci52YWx1ZSksZX0pKSxyJiYodC5ifHx0LmN8fHQuYSYmdC5lKSYmKG8uYj11KGUuY2hpbGROb2RlcyxuKSkscj10LmUpOm8uYz1lLm5vZGVWYWx1ZSxvfShlKX1mdW5jdGlvbiBjKGUpe3RyeXtyZXR1cm4gZS5pZHx8KGUubW9faWQ9ZS5tb19pZHx8ZCsrKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGUubm9kZVZhbHVlfWNhdGNoKHIpe3JldHVybiBkKyt9fX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciByPVtdLG49MDtuPGUubGVuZ3RoO24rKylyW25dPXQoZVtuXSxuLGUpO3JldHVybiByfWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIHI9e30sbj0wO248ZS5sZW5ndGg7bisrKXI9dChyLGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBmKGUsdCxyLG4pe2Zvcig7cjxlLmxlbmd0aDtyKyspaWYoKG4/ZVtyXVtuXTplW3JdKT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9dC5fcGVyaW9kPTMwLHQucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXthOiEhKHQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXJ8fHQuYXR0cmlidXRlT2xkVmFsdWUpLGI6ISF0LmNoaWxkTGlzdCxlOiEhdC5zdWJ0cmVlLGM6ISghdC5jaGFyYWN0ZXJEYXRhJiYhdC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpfSxpPXRoaXMuZyxzPTA7czxpLmxlbmd0aDtzKyspaVtzXS5tPT09ZSYmaS5zcGxpY2UocywxKTt0LmF0dHJpYnV0ZUZpbHRlciYmKG4uZD1sKHQuYXR0cmlidXRlRmlsdGVyLGZ1bmN0aW9uKGUsdCl7CnJldHVybiBlW3RdPSEwLGV9KSksaS5wdXNoKHttOmUsbDpvKGUsbil9KSx0aGlzLmZ8fHIodGhpcyl9LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5nLHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdLmwoZSk7cmV0dXJuIGV9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmc9W10sY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGx9fTt2YXIgZD0xO3JldHVybiB0fSh2b2lkIDApfSx7fV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXtPYmplY3Qub2JzZXJ2ZXx8ZnVuY3Rpb24oZSx0LHIsbil7InVzZSBzdHJpY3QiO3ZhciBvLGkscz1bImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInJlY29uZmlndXJlIiwic2V0UHJvdG90eXBlIiwicHJldmVudEV4dGVuc2lvbnMiXSxhPXQuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1lLmNhbGwodCl9fShlLnByb3RvdHlwZS50b1N0cmluZyksYz10LnByb3RvdHlwZS5pbmRleE9mP3QuaW5kZXhPZnx8ZnVuY3Rpb24oZSxyLG4pe3JldHVybiB0LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxyLG4pfTpmdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPXJ8fDA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LHU9ci5NYXAhPT1uJiZNYXAucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE1hcH06ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PVtdO3JldHVybntzaXplOjAsaGFzOmZ1bmN0aW9uKHQpe3JldHVybiBjKGUsdCk+LTF9LGdldDpmdW5jdGlvbihyKXtyZXR1cm4gdFtjKGUscildfSxzZXQ6ZnVuY3Rpb24ocixuKXt2YXIgbz1jKGUscik7LTE9PT1vPyhlLnB1c2gociksdC5wdXNoKG4pLHRoaXMuc2l6ZSsrKTp0W29dPW59LCJkZWxldGUiOmZ1bmN0aW9uKHIpe3ZhciBuPWMoZSxyKTtuPi0xJiYoZS5zcGxpY2UobiwxKSx0LnNwbGljZShuLDEpLHRoaXMuc2l6ZS0tKX0sZm9yRWFjaDpmdW5jdGlvbihyKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylyLmNhbGwoYXJndW1lbnRzWzFdLHRbbl0sZVtuXSx0aGlzKX19fSxsPWUuZ2V0T3duUHJvcGVydHlOYW1lcz9mdW5jdGlvbigpe3ZhciB0PWUuZ2V0T3duUHJvcGVydHlOYW1lczt0cnl7YXJndW1lbnRzLmNhbGxlZX1jYXRjaChyKXt2YXIgbj0odChjKS5qb2luKCIgIikrIiAiKS5yZXBsYWNlKC9wcm90b3R5cGUgfGxlbmd0aCB8bmFtZSAvZywiIikuc2xpY2UoMCwtMSkuc3BsaXQoIiAiKTtuLmxlbmd0aCYmKHQ9ZnVuY3Rpb24odCl7dmFyIHI9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KWZvcih2YXIgbyxpPTA7aTxuLmxlbmd0aDspKG89YyhyLG5baSsrXSkpPi0xJiZyLnNwbGljZShvLDEpO3JldHVybiByfSl9cmV0dXJuIHR9KCk6ZnVuY3Rpb24odCl7dmFyIHIsbixvPVtdO2lmKCJoYXNPd25Qcm9wZXJ0eSJpbiB0KWZvcihyIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmby5wdXNoKHIpO2Vsc2V7bj1lLmhhc093blByb3BlcnR5O2ZvcihyIGluIHQpbi5jYWxsKHQscikmJm8ucHVzaChyKX1yZXR1cm4gYSh0KSYmby5wdXNoKCJsZW5ndGgiKSxvfSxmPWUuZ2V0UHJvdG90eXBlT2YsZD1lLmRlZmluZVByb3BlcnRpZXMmJmUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHA9ci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbigpe3ZhciBlPStuZXcgRGF0ZSx0PWU7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cigodD0rbmV3IERhdGUpLWUpfSwxNyl9fSgpLGI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW8uZ2V0KGUpO24/KHYobixlKSxtKGUsbix0LHIpKToobj1oKGUpLG0oZSxuLHQsciksMT09PW8uc2l6ZSYmcCh5KSl9LGg9ZnVuY3Rpb24odCxyKXt2YXIgbixpPWwodCkscz1bXSxhPTAscj17aGFuZGxlcnM6dSgpLGZyb3plbjplLmlzRnJvemVuP2UuaXNGcm96ZW4odCk6ITEsZXh0ZW5zaWJsZTplLmlzRXh0ZW5zaWJsZT9lLmlzRXh0ZW5zaWJsZSh0KTohMCxwcm90bzpmJiZmKHQpLHByb3BlcnRpZXM6aSx2YWx1ZXM6cyxub3RpZmllcjpnKHQscil9O2lmKGQpZm9yKG49ci5kZXNjcmlwdG9ycz1bXTthPGkubGVuZ3RoOyluW2FdPWQodCxpW2FdKSxzW2FdPXRbaVthKytdXTtlbHNlIGZvcig7YTxpLmxlbmd0aDspc1thXT10W2lbYSsrXV07cmV0dXJuIG8uc2V0KHQscikscn0sdj1mdW5jdGlvbigpe3ZhciB0PWQ/ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaT10LnByb3BlcnRpZXNbcl0scz1lW2ldLGE9dC52YWx1ZXNbcl0sYz10LmRlc2NyaXB0b3JzW3JdOyJ2YWx1ZSJpbiBvJiYoYT09PXM/MD09PWEmJjEvYSE9PTEvczphPT09YXx8cz09PXMpJiYoaihlLHQse25hbWU6aSx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOmF9LG4pLHQudmFsdWVzW3JdPXMpLCFjLmNvbmZpZ3VyYWJsZXx8by5jb25maWd1cmFibGUmJm8ud3JpdGFibGU9PT1jLndyaXRhYmxlJiZvLmVudW1lcmFibGU9PT1jLmVudW1lcmFibGUmJm8uZ2V0PT09Yy5nZXQmJm8uc2V0PT09Yy5zZXR8fChqKGUsdCx7bmFtZTppLHR5cGU6InJlY29uZmlndXJlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LmRlc2NyaXB0b3JzW3JdPW8pfTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10LnByb3BlcnRpZXNbcl0saT1lW29dLHM9dC52YWx1ZXNbcl07KHM9PT1pPzA9PT1zJiYxL3MhPT0xL2k6cz09PXN8fGk9PT1pKSYmKGooZSx0LHtuYW1lOm8sdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpzfSxuKSx0LnZhbHVlc1tyXT1pKX0scj1kP2Z1bmN0aW9uKGUscixuLG8saSl7Zm9yKHZhciBzLGE9ci5sZW5ndGg7biYmYS0tOyludWxsIT09clthXSYmKHM9ZChlLHJbYV0pLG4tLSxzP3QoZSxvLGEsaSxzKTooaihlLG8se25hbWU6clthXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm8udmFsdWVzW2FdfSxpKSxvLnByb3BlcnRpZXMuc3BsaWNlKGEsMSksby52YWx1ZXMuc3BsaWNlKGEsMSksby5kZXNjcmlwdG9ycy5zcGxpY2UoYSwxKSkpfTpmdW5jdGlvbihlLHQscixuLG8pe2Zvcih2YXIgaT10Lmxlbmd0aDtyJiZpLS07KW51bGwhPT10W2ldJiYoaihlLG4se25hbWU6dFtpXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm4udmFsdWVzW2ldfSxvKSxuLnByb3BlcnRpZXMuc3BsaWNlKGksMSksbi52YWx1ZXMuc3BsaWNlKGksMSksci0tKX07cmV0dXJuIGZ1bmN0aW9uKG4sbyxpKXtpZihuLmhhbmRsZXJzLnNpemUmJiFuLmZyb3plbil7dmFyIHMsYSx1LHAsYixoLHYseSxfPW4udmFsdWVzLGc9bi5kZXNjcmlwdG9ycyxtPTA7aWYobi5leHRlbnNpYmxlKWlmKHM9bi5wcm9wZXJ0aWVzLnNsaWNlKCksYT1zLmxlbmd0aCx1PWwobyksZyl7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSx5PWQobyxiKSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKG9bYl0pLGcucHVzaCh5KSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpLHkpKTtyKG8scyxhLG4saSksZS5pc0V4dGVuc2libGUobyl8fChuLmV4dGVuc2libGU9ITEsaihvLG4se3R5cGU6InByZXZlbnRFeHRlbnNpb25zIixvYmplY3Q6b30saSksbi5mcm96ZW49ZS5pc0Zyb3plbihvKSl9ZWxzZXtmb3IoO208dS5sZW5ndGg7KWI9dVttKytdLHA9YyhzLGIpLGg9b1tiXSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKGgpKTooc1twXT1udWxsLGEtLSx0KG8sbixwLGkpKTtyKG8scyxhLG4saSl9ZWxzZSBpZighbi5mcm96ZW4pe2Zvcig7bTxzLmxlbmd0aDttKyspYj1zW21dLHQobyxuLG0saSxkKG8sYikpO2UuaXNGcm96ZW4obykmJihuLmZyb3plbj0hMCl9ZiYmKHY9ZihvKSx2IT09bi5wcm90byYmKGoobyxuLHt0eXBlOiJzZXRQcm90b3R5cGUiLG5hbWU6Il9fcHJvdG9fXyIsb2JqZWN0Om8sb2xkVmFsdWU6bi5wcm90b30pLG4ucHJvdG89dikpfX19KCkseT1mdW5jdGlvbigpe28uc2l6ZSYmKG8uZm9yRWFjaCh2KSxpLmZvckVhY2goXykscCh5KSl9LF89ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmNoYW5nZVJlY29yZHM7ci5sZW5ndGgmJihlLmNoYW5nZVJlY29yZHM9W10sdChyKSl9LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyJiYodD1vLmdldChlKSksdCYmdC5ub3RpZmllcnx8e25vdGlmeTpmdW5jdGlvbih0KXt0LnR5cGU7dmFyIHI9by5nZXQoZSk7aWYocil7dmFyIG4saT17b2JqZWN0OmV9O2ZvcihuIGluIHQpIm9iamVjdCIhPT1uJiYoaVtuXT10W25dKTtqKGUscixpKX19LHBlcmZvcm1DaGFuZ2U6ZnVuY3Rpb24odCxyKXtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBub24tc3RyaW5nIGNoYW5nZVR5cGUiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgcGVyZm9ybSBub24tZnVuY3Rpb24iKTt2YXIgaSxzLGE9by5nZXQoZSksYz1hcmd1bWVudHNbMl0sdT1jPT09bj9yKCk6ci5jYWxsKGMpO2lmKGEmJnYoYSxlLHQpLGEmJnUmJiJvYmplY3QiPT10eXBlb2YgdSl7cz17b2JqZWN0OmUsdHlwZTp0fTtmb3IoaSBpbiB1KSJvYmplY3QiIT09aSYmInR5cGUiIT09aSYmKHNbaV09dVtpXSk7aihlLGEscyl9fX19LG09ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89aS5nZXQocik7b3x8aS5zZXQocixvPXtvYnNlcnZlZDp1KCksY2hhbmdlUmVjb3JkczpbXX0pLG8ub2JzZXJ2ZWQuc2V0KGUse2FjY2VwdExpc3Q6bi5zbGljZSgpLGRhdGE6dH0pLHQuaGFuZGxlcnMuc2V0KHIsbyl9LGo9ZnVuY3Rpb24oZSx0LHIsbil7dC5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXQub2JzZXJ2ZWQuZ2V0KGUpLmFjY2VwdExpc3Q7KCJzdHJpbmciIT10eXBlb2Ygbnx8LTE9PT1jKG8sbikpJiZjKG8sci50eXBlKT4tMSYmdC5jaGFuZ2VSZWNvcmRzLnB1c2gocil9KX07bz11KCksaT11KCksZS5vYnNlcnZlPWZ1bmN0aW9uKHQscixvKXtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3Qgb2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7aWYoZS5pc0Zyb3plbiYmZS5pc0Zyb3plbihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBhIGZyb3plbiBmdW5jdGlvbiBvYmplY3QiKTtpZihvPT09bilvPXM7ZWxzZSBpZighb3x8Im9iamVjdCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoaXJkIGFyZ3VtZW50IHRvIE9iamVjdC5vYnNlcnZlIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncy4iKTtyZXR1cm4gYih0LHIsbyksdH0sZS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCB1bm9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHIsbj1pLmdldCh0KTtyZXR1cm4gbiYmKHI9bi5vYnNlcnZlZC5nZXQoZSkpJiYobi5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dihlLmRhdGEsdCl9KSxwKGZ1bmN0aW9uKCl7XyhuLHQpfSksMT09PW4ub2JzZXJ2ZWQuc2l6ZSYmbi5vYnNlcnZlZC5oYXMoZSk/aVsiZGVsZXRlIl0odCk6bi5vYnNlcnZlZFsiZGVsZXRlIl0oZSksMT09PXIuZGF0YS5oYW5kbGVycy5zaXplP29bImRlbGV0ZSJdKGUpOnIuZGF0YS5oYW5kbGVyc1siZGVsZXRlIl0odCkpLGV9LGUuZ2V0Tm90aWZpZXI9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmdldE5vdGlmaWVyIGNhbm5vdCBnZXROb3RpZmllciBub24tb2JqZWN0Iik7cmV0dXJuIGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4odCk/bnVsbDpnKHQpfSxlLmRlbGl2ZXJDaGFuZ2VSZWNvcmRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgdD1pLmdldChlKTt0JiYodC5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dihlLmRhdGEsdCl9KSxfKHQsZSkpfX0oT2JqZWN0LEFycmF5LHRoaXMpfSx7fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5EYXRhT2JqZWN0T2JzZXJ2ZXI9ci5EYXRhT2JqZWN0UmVwb3J0ZXI9ci5TeW5jaGVyPXZvaWQgMCxlKCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iKSxlKCJvYmplY3Qub2JzZXJ2ZSIpLGUoImFycmF5Lm9ic2VydmUiKTt2YXIgbz1lKCIuL3N5bmNoZXIvU3luY2hlciIpLGk9bihvKSxzPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxhPW4ocyksYz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIiksdT1uKGMpO3IuU3luY2hlcj1pWyJkZWZhdWx0Il0sci5EYXRhT2JqZWN0UmVwb3J0ZXI9YVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdE9ic2VydmVyPXVbImRlZmF1bHQiXX0seyIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjo5NSwiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vc3luY2hlci9TeW5jaGVyIjo5OSwiYXJyYXkub2JzZXJ2ZSI6MSwibXV0YXRpb25vYnNlcnZlci1zaGltIjo5MCwib2JqZWN0Lm9ic2VydmUiOjkxfV0sOTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCIuL1N5bmNPYmplY3QiKSxwPW4oZCksYj1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGg9bihiKSx2PWUoIi4uL3V0aWxzL3V0aWxzLmpzIikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxpLHMpeygwLHVbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgYT10aGlzO2EuX3N5bmNoZXI9dCxhLl91cmw9cixhLl9zY2hlbWE9bixhLl9zdGF0dXM9byxhLl9zeW5jT2JqPW5ldyBwWyJkZWZhdWx0Il0oaSksYS5fY2hpbGRyZW5zPXMsYS5fdmVyc2lvbj0wLGEuX2NoaWxkSWQ9MCxhLl9jaGlsZHJlbk9iamVjdHM9e30sYS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYS5fb3duZXI9dC5fb3duZXIsYS5fYnVzPXQuX2J1c31yZXR1cm4oMCxmWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXQuX3VybCsiL2NoaWxkcmVuLyI7dC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz1yK24saT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihyKXtpZihyLmZyb20hPT1lLl9vd25lcilzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uQ2hpbGRDcmVhdGUocik7YnJlYWs7Y2FzZSJkZWxldGUiOmNvbnNvbGUubG9nKHIpO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4ocil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSwoMCxhWyJkZWZhdWx0Il0pKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGlsZHJlbk9iamVjdHNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicGF1c2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InJlc3VtZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToic3RvcCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToiYWRkQ2hpbGQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyLl9jaGlsZElkKys7dmFyIG49ci5fb3duZXIrIiMiK3IuX2NoaWxkSWQsbz1yLl91cmwrIi9jaGlsZHJlbi8iK2Uscz17dHlwZToiY3JlYXRlIixmcm9tOnIuX293bmVyLHRvOm8sYm9keTp7cmVzb3VyY2U6bix2YWx1ZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSl7dmFyIGk9ci5fYnVzLnBvc3RNZXNzYWdlKHMpO2NvbnNvbGUubG9nKCJjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICIrci5fb3duZXIrIiApOiAiLHMpO3ZhciBhPW5ldyBoWyJkZWZhdWx0Il0ocixuLHQsci5fb3duZXIsaSk7YS5vbkNoYW5nZShmdW5jdGlvbihlKXtyLl9vbkNoYW5nZShlLHtwYXRoOm8sY2hpbGRJZDpufSl9KSxyLl9jaGlsZHJlbk9iamVjdHNbbl09YSxlKGEpfSl9fSx7a2V5OiJvbkFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleToiX29uQ2hpbGRDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2U7Y29uc29sZS5sb2coImNyZWF0ZS1vYnNlcnZlci1jaGlsZCggIit0Ll9vd25lcisiICk6ICIsZSk7dmFyIG49bmV3IGhbImRlZmF1bHQiXSh0LHIsZS5ib2R5LnZhbHVlKTt0Ll9jaGlsZHJlbk9iamVjdHNbcl09bixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNvdXJjZTp0Ll9vd25lcn19KX0pO3ZhciBvPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTplLmJvZHkudmFsdWUsY2hpbGRJZDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX07dC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJihjb25zb2xlLmxvZygiQURELUNISUxEUkVOLUVWRU5UOiAiLG8pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pKX19LHtrZXk6Il9vbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rKywib24iPT09ci5fc3RhdHVzKXt2YXIgbj17dHlwZToidXBkYXRlIixmcm9tOnIuX3VybCx0bzpyLl91cmwrIi9jaGFuZ2VzIixib2R5Ont2ZXJzaW9uOnIuX3ZlcnNpb24sc291cmNlOnIuX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PWQuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PWQuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1kLkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAsdi5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT1kLk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBjPWkub2JqLHU9aS5sYXN0O2Muc3BsaWNlKHUsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXksdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCIuL0RhdGFPYmplY3RDaGlsZCI6OTQsIi4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1lKCIuL1N5bmNPYmplY3QiKSx1PW4oYyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxzKXsoMCxpWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9wYXJlbnQ9dCxhLl9jaGlsZElkPXIsYS5fb3duZXI9byxhLl9tc2dJZD1zLGEuX3N5bmNPYmo9bmV3IHVbImRlZmF1bHQiXShuKSxhLl9idXM9dC5fYnVzLGEuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0Ijo5OCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx2PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHk9bih2KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4vRGF0YU9iamVjdENoaWxkIiksaj1uKG0pLCQ9e0FOWToiYW55IixTVEFSVDoic3RhcnQiLEVYQUNUOiJleGFjdCJ9LHc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLHMsYyxsKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGY9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8scy5kYXRhLGMpKSxkPWY7cmV0dXJuIGQuX3ZlcnNpb249bCxkLl9maWx0ZXJzPXt9LGQuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtkLl9vbkZpbHRlcihlKX0pLCgwLGlbImRlZmF1bHQiXSkocy5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cy5jaGlsZHJlbnNbZV07ZC5fY2hpbGRyZW5PYmplY3RzW2VdPW5ldyBqWyJkZWZhdWx0Il0oZCxlLHQpfSksZC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxmfXJldHVybigwLHlbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsKyIvY2hhbmdlcyIsZnVuY3Rpb24odCl7InVwZGF0ZSI9PT10LnR5cGUmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTokLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9JC5BTlk6KG4udHlwZT0kLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fZmlsdGVyc1tyXTtuLnR5cGU9PT0kLkFOWT9uLmNhbGxiYWNrKGUpOm4udHlwZT09PSQuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihyKSYmbi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLkVYQUNUJiZlLmZpZWxkPT09ciYmbi5jYWxsYmFjayhlKX0pfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT13LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0Ijo5MywiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjoxNX1dLDk2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx2PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHk9bih2KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksaj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGM9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8saSxzKSksbD1jO3JldHVybiBsLl9zdWJzY3JpcHRpb25zPXt9LGwuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrcisiLVNFTkQ6ICIsZSksbC5fb25DaGFuZ2UoZSl9KSxsLl9hbGxvY2F0ZUxpc3RlbmVycygpLGN9cmV0dXJuKDAseVsiZGVmYXVsdCJdKSh0LGUpLCgwLGZbImRlZmF1bHQiXSkodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LSIrZS5fdXJsKyItUkNWOiAiLHQpLHQudHlwZSl7Y2FzZSJyZXNwb25zZSI6ZS5fb25SZXNwb25zZSh0KTticmVhaztjYXNlInJlYWQiOmUuX29uUmVhZCh0KX19KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJpbnZpdGVPYnNlcnZlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToiY3JlYXRlIixmcm9tOnQuX3N5bmNoZXIuX293bmVyLHRvOnQuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTp0Ll91cmwsc2NoZW1hOnQuX3NjaGVtYSx2YWx1ZTp0Ll9zeW5jT2JqLmRhdGEsYXV0aG9yaXNlOmV9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJvblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVhZEhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLGFjY2VwdDpmdW5jdGlvbigpe3ZhciBuPXt1cmw6cixzdGF0dXM6Im9uIn07dC5fc3Vic2NyaXB0aW9uc1tyXT1uO3ZhciBvPXt9O3JldHVybigwLGlbImRlZmF1bHQiXSkodC5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXQuX2NoaWxkcmVuT2JqZWN0c1tlXS5kYXRhO29bZV09KDAsbS5kZWVwQ2xvbmUpKHIpfSksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNjaGVtYTp0Ll9zY2hlbWEsdmVyc2lvbjp0Ll92ZXJzaW9uLHZhbHVlOntkYXRhOigwLG0uZGVlcENsb25lKSh0LmRhdGEpLGNoaWxkcmVuczpvfX19KSxufSxyZWplY3Q6ZnVuY3Rpb24ocil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAzLGRlc2M6cn19KX19O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJTVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbiksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG4pKX19LHtrZXk6Il9vblVuU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj10Ll9zdWJzY3JpcHRpb25zW3JdO2RlbGV0ZSB0Ll9zdWJzY3JpcHRpb25zW3JdO3ZhciBvPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLG9iamVjdDpufTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiVU4tU1VCU0NSSVBUSU9OLUVWRU5UOiAiLG8pLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihvKSl9fSx7a2V5OiJfb25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiYoY29uc29sZS5sb2coIlJFU1BPTlNFLUVWRU5UOiAiLHIpLHQuX29uUmVzcG9uc2VIYW5kbGVyKHIpKX19LHtrZXk6Il9vblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxhY2NlcHQ6ZnVuY3Rpb24oKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsdmFsdWU6KDAsbS5kZWVwQ2xvbmUpKHQuZGF0YSl9fSl9LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDEsZGVzYzpyfX0pfX07dC5fb25SZWFkSGFuZGxlciYmKGNvbnNvbGUubG9nKCJSRUFELUVWRU5UOiAiLHIpLHQuX29uUmVhZEhhbmRsZXIocikpfX0se2tleToic3Vic2NyaXB0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnN9fV0pLHR9KGdbImRlZmF1bHQiXSk7clsiZGVmYXVsdCJdPWosdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCIuL0RhdGFPYmplY3QiOjkzLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjoxNX1dLDk3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGE9bihzKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixvKXsoMCxpWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIHM9dGhpcztzLl9vd25lcj10LHMuX3VybD1yLHMuX2J1cz1uLHMuX2NoaWxkcmVuPW8scy5fY2hhbmdlcz1bXSxzLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybigwLGFbImRlZmF1bHQiXSkoZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YVByb3Zpc2lvbmFsLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZXMucHVzaCh0KX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImFwcGx5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2NoYW5nZXMuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KX0pfX0se2tleToiY2hpbGRyZW4iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbn19XSksZX0oKTtyWyJkZWZhdWx0Il09Yyx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5ODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxyLk9iamVjdFR5cGU9ci5DaGFuZ2VUeXBlPXZvaWQgMDt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSx1PW4oYyksbD1lKCIuLi91dGlscy91dGlscy5qcyIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgcj10aGlzO3IuX29ic2VydmVycz1bXSxyLl9maWx0ZXJzPXt9LHQ/ci5fZGF0YT0oMCxsLmRlZXBDbG9uZSkodCk6ci5fZGF0YT17fSxyLl9pbnRlcm5hbE9ic2VydmUobmV3IGQsci5fZGF0YSl9cmV0dXJuKDAsdVsiZGVmYXVsdCJdKShlLFt7a2V5OiJvYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYnNlcnZlcnMucHVzaChlKX19LHtrZXk6ImZpbmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gdGhpcy5fZmluZFdpdGhTcGxpdCh0KX19LHtrZXk6ImZpbmRCZWZvcmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXt9LHI9ZS5zcGxpdCgiLiIpO3JldHVybiB0Lmxhc3Q9ci5wb3AoKSx0Lm9iaj10aGlzLl9maW5kV2l0aFNwbGl0KHIpLHR9fSx7a2V5OiJfZmluZFdpdGhTcGxpdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9dFtlXX0pLHR9fSx7a2V5OiJfZmlyZUV2ZW50Iix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0KGUpfSl9fSx7a2V5OiJfaXNPYnNlcnZhYmxlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb25zdHJ1Y3Rvcj09PU9iamVjdHx8ZS5jb25zdHJ1Y3Rvcj09PUFycmF5fX0se2tleToiX2ludGVybmFsT2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX2lzT2JzZXJ2YWJsZSh0KSl7dmFyIG49ZnVuY3Rpb24odCl7ci5fb25DaGFuZ2VzKGUsdCl9O2lmKHQuY29uc3RydWN0b3I9PT1PYmplY3Qpe09iamVjdC5vYnNlcnZlKHQsbik7Zm9yKHZhciBvIGluIHQpci5faXNPYnNlcnZhYmxlKHRbb10pJiZyLl9pbnRlcm5hbE9ic2VydmUoZVsibmV3Il0obyksdFtvXSl9ZWxzZSBpZih0LmNvbnN0cnVjdG9yPT09QXJyYXkpe0FycmF5Lm9ic2VydmUodCxuKTtmb3IodmFyIGkgaW4gdClpZihyLl9pc09ic2VydmFibGUodFtpXSkpe3ZhciBzPWVbIm5ldyJdKG5ldyBwKHRbaV0saSkpO3IuX2ludGVybmFsT2JzZXJ2ZShzLHRbaV0pfX19fX0se2tleToiX29uQ2hhbmdlcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2Zvcih2YXIgbiBpbiB0KXt2YXIgbz10W25dLm9iamVjdCxpPXZvaWQgMDtpZihvLmNvbnN0cnVjdG9yPT09T2JqZWN0JiYoaT1oLk9CSkVDVCksby5jb25zdHJ1Y3Rvcj09PUFycmF5JiYoaT1oLkFSUkFZKSwic3BsaWNlIj09PXRbbl0udHlwZSkhZnVuY3Rpb24oKXt2YXIgcz10W25dLmluZGV4LGE9ZVsibmV3Il0oIiIrcyksYz1hLnRvU3RyaW5nKCksdT10W25dLnJlbW92ZWQubGVuZ3RoO2lmKDAhPT11KXt2YXIgZj10W25dLnJlbW92ZWQ7Zi5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7ci5faXNPYnNlcnZhYmxlKHQpJiZlLnJlbW92ZUluZGV4KHMrbil9KSxyLl9maXJlRXZlbnQoe2NUeXBlOmIuUkVNT1ZFLG9UeXBlOmksZmllbGQ6YyxkYXRhOnV9KX12YXIgZD10W25dLmFkZGVkQ291bnQ7aWYoMCE9PWQpe3ZhciBoPW8uc2xpY2UocyxzK2QpO2guZm9yRWFjaChmdW5jdGlvbih0LG4pe2lmKHIuX2lzT2JzZXJ2YWJsZSh0KSl7dmFyIG89ZVsibmV3Il0obmV3IHAodCxzK24pKTtyLl9pbnRlcm5hbE9ic2VydmUobyx0KX19KSxyLl9maXJlRXZlbnQoe2NUeXBlOmIuQURELG9UeXBlOmksZmllbGQ6YyxkYXRhOigwLGwuZGVlcENsb25lKShoKX0pfXMhPT1vLmxlbmd0aC0xJiZlLnJlSW5kZXhGcm9tKG8pfSgpO2Vsc2V7dmFyIHM9ZVsibmV3Il0odFtuXS5uYW1lKSxhPXMudG9TdHJpbmcoKTtpZigtMSE9PWEuaW5kZXhPZigiU3ltYm9sIikpY29udGludWU7dmFyIGM9b1t0W25dLm5hbWVdOyJ1cGRhdGUiPT09dFtuXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuVVBEQVRFLG9UeXBlOmksZmllbGQ6YSxkYXRhOigwLGwuZGVlcENsb25lKShjKX0pLCJhZGQiPT09dFtuXS50eXBlJiYodGhpcy5faW50ZXJuYWxPYnNlcnZlKHMsYyksdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLkFERCxvVHlwZTppLGZpZWxkOmEsZGF0YTooMCxsLmRlZXBDbG9uZSkoYyl9KSksImRlbGV0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5SRU1PVkUsb1R5cGU6aSxmaWVsZDphfSl9fX19LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhfX1dKSxlfSgpLGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpLHRoaXMuX3BhdGg9W10sdGhpcy5fb2JzZXJ2YWJsZXM9e319cmV0dXJuKDAsdVsiZGVmYXVsdCJdKShlLFt7a2V5OiJyZW1vdmVJbmRleCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX29ic2VydmFibGVzW2VdfX0se2tleToicmVJbmRleEZyb20iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLl9vYnNlcnZhYmxlcykuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj10Ll9vYnNlcnZhYmxlc1tyXSxvPWUuaW5kZXhPZihuLm9iaik7bi5pZHghPW8mJihuLmlkeD1vLGRlbGV0ZSB0Ll9vYnNlcnZhYmxlc1tyXSx0Ll9vYnNlcnZhYmxlc1tvXT1uKX0pfX0se2tleToibmV3Iix2YWx1ZTpmdW5jdGlvbihlKXtlLmNvbnN0cnVjdG9yPT1wJiYodGhpcy5fb2JzZXJ2YWJsZXNbZS5pZHhdPWUpO3ZhciB0PXRoaXMuY2xvbmUoKTtyZXR1cm4gdC5fcGF0aC5wdXNoKGUpLHR9fSx7a2V5OiJjbG9uZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3BhdGgucHVzaChlKX0pLHR9fSx7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0iIjtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKHQscil7MD09PXI/ZT10LnRvU3RyaW5nKCk6ZSs9Ii4iK3QudG9TdHJpbmcoKX0pLGV9fV0pLGV9KCkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSksdGhpcy5vYmo9dCx0aGlzLmlkeD1yfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWR4LnRvU3RyaW5nKCl9fV0pLGV9KCksYj1yLkNoYW5nZVR5cGU9e1VQREFURToidXBkYXRlIixBREQ6ImFkZCIsUkVNT1ZFOiJyZW1vdmUifSxoPXIuT2JqZWN0VHlwZT17T0JKRUNUOiJvYmplY3QiLEFSUkFZOiJhcnJheSJ9O3JbImRlZmF1bHQiXT1mfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMDAsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksdT1uKGMpLGw9ZSgiLi9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxmPW4obCksZD1lKCIuL0RhdGFPYmplY3RPYnNlcnZlciIpLHA9bihkKSxiPWUoIi4vRGF0YVByb3Zpc2lvbmFsIiksaD1uKGIpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuKXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG89dGhpcztvLl9vd25lcj10LG8uX2J1cz1yLG8uX3N1YlVSTD1uLnJ1bnRpbWVVUkwrIi9zbSIsby5fcmVwb3J0ZXJzPXt9LG8uX29ic2VydmVycz17fSxvLl9wcm92aXNpb25hbHM9e30sci5hZGRMaXN0ZW5lcih0LGZ1bmN0aW9uKGUpe2lmKGUuZnJvbSE9PXQpc3dpdGNoKGNvbnNvbGUubG9nKCJTeW5jaGVyLVJDVjogIixlKSxlLnR5cGUpe2Nhc2UiZm9yd2FyZCI6by5fb25Gb3J3YXJkKGUpO2JyZWFrO2Nhc2UiY3JlYXRlIjpvLl9vblJlbW90ZUNyZWF0ZShlKTticmVhaztjYXNlImRlbGV0ZSI6by5fb25SZW1vdGVEZWxldGUoZSl9fSl9cmV0dXJuKDAsdVsiZGVmYXVsdCJdKShlLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3IucmVwb3J0ZXI9bi5fb3duZXIsci5zY2hlbWE9ZTt2YXIgbz17dHlwZToiY3JlYXRlIixmcm9tOm4uX293bmVyLHRvOm4uX3N1YlVSTCxib2R5OntzY2hlbWE6ZSx2YWx1ZTpyLGF1dGhvcmlzZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24odCxpKXtuLl9idXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihvKXtpZihjb25zb2xlLmxvZygiY3JlYXRlLXJlc3BvbnNlOiAiLG8pLDIwMD09PW8uYm9keS5jb2RlKXt2YXIgcz1vLmJvZHkucmVzb3VyY2UsYT1uZXcgZlsiZGVmYXVsdCJdKG4scyxlLCJvbiIscixvLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpO24uX3JlcG9ydGVyc1tzXT1hLHQoYSl9ZWxzZSBpKG8uYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJzdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206ci5fb3duZXIsdG86ci5fc3ViVVJMLGJvZHk6e3NjaGVtYTplLHJlc291cmNlOnR9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihvLGkpe3IuX2J1cy5wb3N0TWVzc2FnZShuLGZ1bmN0aW9uKG4pe2NvbnNvbGUubG9nKCJzdWJzY3JpYmUtcmVzcG9uc2U6ICIsbik7dmFyIHM9ci5fcHJvdmlzaW9uYWxzW3RdO2lmKGRlbGV0ZSByLl9wcm92aXNpb25hbHNbdF0scyYmcy5fcmVsZWFzZUxpc3RlbmVycygpLG4uYm9keS5jb2RlPDIwMClzPW5ldyBoWyJkZWZhdWx0Il0oci5fb3duZXIsdCxyLl9idXMsbi5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKSxyLl9wcm92aXNpb25hbHNbdF09cztlbHNlIGlmKDIwMD09PW4uYm9keS5jb2RlKXt2YXIgYT1uZXcgcFsiZGVmYXVsdCJdKHIsdCxlLCJvbiIsbi5ib2R5LnZhbHVlLHMuY2hpbGRyZW4sbi5ib2R5LnZlcnNpb24pO3IuX29ic2VydmVyc1t0XT1hLG8oYSkscy5hcHBseShhKX1lbHNlIGkobi5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToicmVhZCIsZnJvbTp0Ll9vd25lcix0bzplfTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLG4pe3QuX2J1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJyZWFkLXJlc3BvbnNlOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlP2UodC5ib2R5LnZhbHVlKTpuKHQuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJvbk5vdGlmaWNhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dC5fcmVwb3J0ZXJzW2UuYm9keS50b107ci5fb25Gb3J3YXJkKGUpfX0se2tleToiX29uUmVtb3RlQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tLnNsaWNlKDAsLTEzKSxuPXt0eXBlOmUudHlwZSxmcm9tOmUuYm9keS5zb3VyY2UsdXJsOnIsc2NoZW1hOmUuYm9keS5zY2hlbWEsdmFsdWU6ZS5ib2R5LnZhbHVlLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2s6ZnVuY3Rpb24ocil7dmFyIG49MjAwO3ImJihuPXIpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm59fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiTk9USUZJQ0FUSU9OLUVWRU5UOiAiLG4pLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihuKSl9fSx7a2V5OiJfb25SZW1vdGVEZWxldGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2Usbj10Ll9vYnNlcnZlcnNbcl07aWYobil7dmFyIG89e3R5cGU6ZS50eXBlLHVybDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2s6ZnVuY3Rpb24ocil7dmFyIG89MjAwO3ImJihvPXIpLDIwMD09PW8mJm5bImRlbGV0ZSJdKCksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6byxzb3VyY2U6dC5fb3duZXJ9fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiTk9USUZJQ0FUSU9OLUVWRU5UOiAiLG8pLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihvKSl9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDQsc291cmNlOnQuX293bmVyfX0pfX0se2tleToib3duZXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcn19LHtrZXk6InJlcG9ydGVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcG9ydGVyc319LHtrZXk6Im9ic2VydmVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29ic2VydmVyc319XSksZX0oKTtyWyJkZWZhdWx0Il09dix0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdE9ic2VydmVyIjo5NSwiLi9EYXRhT2JqZWN0UmVwb3J0ZXIiOjk2LCIuL0RhdGFQcm92aXNpb25hbCI6OTcsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sMTAwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlKXtpZighZSl0aHJvdyBFcnJvcigiVVJMIGlzIG5lZWRlZCB0byBzcGxpdCIpO3ZhciB0PS8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpLHI9IiQxLCQyLCQzIixuPWUucmVwbGFjZSh0LHIpLnNwbGl0KCIsIik7blswXT09PWUmJihuWzBdPSJodHRwcyIsblsxXT1lKTt2YXIgbz17dHlwZTpuWzBdLGRvbWFpbjpuWzFdLGlkZW50aXR5Om5bMl19O3JldHVybiBvfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIikscj17dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX07cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlKXtyZXR1cm4hKCgwLGJbImRlZmF1bHQiXSkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGU/SlNPTi5wYXJzZSgoMCxkWyJkZWZhdWx0Il0pKGUpKTp2b2lkIDB9ZnVuY3Rpb24gYyhlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX1mdW5jdGlvbiB1KGUpe3ZhciB0PW8oZSk7cmV0dXJuIHQuaWRlbnRpdHkucmVwbGFjZSgiLyIsIiIpKyJAIit0LmRvbWFpbn1mdW5jdGlvbiBsKGUpe2lmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PW8oZSk7aWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIGMoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBmPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSIpLGQ9bihmKSxwPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGI9bihwKTtyLmRpdmlkZVVSTD1vLHIuZGl2aWRlRW1haWw9aSxyLmVtcHR5T2JqZWN0PXMsci5kZWVwQ2xvbmU9YSxyLmdldFVzZXJVUkxGcm9tRW1haWw9YyxyLmdldFVzZXJFbWFpbEZyb21VUkw9dSxyLmNvbnZlcnRUb1VzZXJVUkw9bH0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiOjIsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6N31dfSx7fSxbOTJdKSg5Mil9KTsKCgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIEZha2VMb2NhdGlvbk9ic2VydmVySHlwZXJ0eSA9IHsKICAgIHJlY2VpdmVkUG9zaXRpb246IGZhbHNlLAoKICAgIHBvc2l0aW9uOiB1bmRlZmluZWQKfTsKCnZhciBGYWtlTG9hY2F0aW9uRmFjdG9yeSA9IGZ1bmN0aW9uIEZha2VMb2FjYXRpb25GYWN0b3J5KGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbikgewogICAgdmFyIG9iamVjdERlc2NVUkwgPSAnaHlwZXJ0eS1jYXRhbG9ndWU6Ly9sb2NhbGhvc3QvLndlbGwta25vd24vZGF0YXNjaGVtYXMvTG9jYXRpb25EYXRhU2NoZW1hJzsKICAgIHZhciBzeW5jaGVyID0gbmV3IF9TeW5jaGVyLlN5bmNoZXIoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKTsKCiAgICBzeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGV2ZW50LmFjaygpOwogICAgICAgIHN5bmNoZXIuc3Vic2NyaWJlKG9iamVjdERlc2NVUkwsIGV2ZW50LnVybCkudGhlbihmdW5jdGlvbiAob2JzZXJ2ZXIpIHsKICAgICAgICAgICAgb2JzZXJ2ZXIub25DaGFuZ2UoJyonLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgIEZha2VMb2NhdGlvbk9ic2VydmVySHlwZXJ0eS5yZWNlaXZlZFBvc2l0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgIEZha2VMb2NhdGlvbk9ic2VydmVySHlwZXJ0eS5wb3NpdGlvbiA9IGV2ZW50LmRhdGEuZ2VvcG9zaXRpb247CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSk7CgogICAgcmV0dXJuIEZha2VMb2NhdGlvbk9ic2VydmVySHlwZXJ0eTsKfTsKCmZ1bmN0aW9uIGFjdGl2YXRlKGh5cGVydHlVUkwsIGJ1cywgY29uZmlndXJhdGlvbikgewogICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiAnRmFrZUxvY2F0aW9uT2JzZXJ2ZXInLAogICAgICAgIGluc3RhbmNlOiBGYWtlTG9hY2F0aW9uRmFjdG9yeShoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pCiAgICB9Owp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7InNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlciI6MX1dfSx7fSxbMl0pKDIpCn0pOw==",
      "sourceCodeClassname": "FakeLocationObserver",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10008,
    "version": "0.1",
    "description": "Description of FakeLocationObserver",
    "objectName": "FakeLocationObserver",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "hypertyType": []
  },
  "Location": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBTeW5jaGVyLmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MjQgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuU3luY2hlcj1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYSl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmYylyZXR1cm4gYyhzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciB1PW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyB1LmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLHV9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sbCxsLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmUmJiFBcnJheS5vYnNlcnZlJiZmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1lLmdldE5vdGlmaWVyLG49InBlcmZvcm1DaGFuZ2UiLG89Il9vcmlnaW5hbCIsaT0ic3BsaWNlIixzPXtwdXNoOmZ1bmN0aW9uIGMoZSl7dmFyIHQ9YXJndW1lbnRzLHM9Y1tvXS5hcHBseSh0aGlzLHQpO3JldHVybiByKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6cy10Lmxlbmd0aCxhZGRlZENvdW50OnQubGVuZ3RoLHJlbW92ZWQ6W119fSksc30sdW5zaGlmdDpmdW5jdGlvbiB1KGUpe3ZhciB0PWFyZ3VtZW50cyxzPXVbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHBvcDpmdW5jdGlvbiBsKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1sW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnRoaXMubGVuZ3RoLGFkZGVkQ291bnQ6MCxyZW1vdmVkOlt0XX19LHRoaXMpLHR9LHNoaWZ0OmZ1bmN0aW9uIGYoKXt2YXIgZT10aGlzLmxlbmd0aCx0PWZbb10uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5sZW5ndGghPT1lJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6MCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzcGxpY2U6ZnVuY3Rpb24gZChlLHQpe3ZhciBzPWFyZ3VtZW50cyxhPWRbb10uYXBwbHkodGhpcyxzKTtyZXR1cm4oYS5sZW5ndGh8fHMubGVuZ3RoPjIpJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6ZSxhZGRlZENvdW50OnMubGVuZ3RoLTIscmVtb3ZlZDphfX0sdGhpcyksYX19O2Zvcih2YXIgYSBpbiBzKXNbYV1bb109dC5wcm90b3R5cGVbYV0sdC5wcm90b3R5cGVbYV09c1thXTt0Lm9ic2VydmU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5vYnNlcnZlKHQscixbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsaV0pfSx0LnVub2JzZXJ2ZT1lLnVub2JzZXJ2ZX0oT2JqZWN0LEFycmF5KX0se31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiOjE3fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjE4fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjE5fV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjIwfV0sNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjF9XSw3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjoyMn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjIzfV0sOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjI0fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCI6MjV9XSwxMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo0fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBvPSEwO287KXt2YXIgaT1lLHM9dCxhPXI7bz0hMSxudWxsPT09aSYmKGk9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgYz1uKGkscyk7aWYodm9pZCAwIT09Yyl7aWYoInZhbHVlImluIGMpcmV0dXJuIGMudmFsdWU7dmFyIHU9Yy5nZXQ7aWYodm9pZCAwPT09dSlyZXR1cm47cmV0dXJuIHUuY2FsbChhKX12YXIgbD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaSk7aWYobnVsbD09PWwpcmV0dXJuO2U9bCx0PXMscj1hLG89ITAsYz1sPXZvaWQgMH19LHIuX19lc01vZHVsZT0hMH0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NX1dLDE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9bih0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKG8/byhlLHQpOmUuX19wcm90b19fPXQpfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6OH1dLDE1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2hlbHBlcnMvdHlwZW9mIiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxpWyJkZWZhdWx0Il0pKHQpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fX0seyIuLi9oZWxwZXJzL3R5cGVvZiI6MTZ9XSwxNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuY29uc3RydWN0b3I9PT1uPyJzeW1ib2wiOnR5cGVvZiBlfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCI6MTB9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMX1dLDE4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY3JlYXRlKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwxOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwyMDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXREZXNjKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjgxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjo4Mn1dLDIyOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo4M31dLDIzOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiI6ODR9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo4NiwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo4NywiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo4OX1dLDI1OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIiksZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLlN5bWJvbH0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiOjg4fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwyNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0Ijo0OX1dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MzAsIi4vJC53a3MiOjc4fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2fV0sMzM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjM4fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRLZXlzKGUpLHI9bi5nZXRTeW1ib2xzO2lmKHIpZm9yKHZhciBvLGk9cihlKSxzPW4uaXNFbnVtLGE9MDtpLmxlbmd0aD5hOylzLmNhbGwoZSxvPWlbYSsrXSkmJnQucHVzaChvKTtyZXR1cm4gdH19LHsiLi8kIjo1Nn1dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLHUsbCxmPWUmYS5GLGQ9ZSZhLkcscD1lJmEuUyxiPWUmYS5QLGg9ZSZhLkIseT1lJmEuVyx2PWQ/bzpvW3RdfHwob1t0XT17fSksXz1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGMgaW4gcil1PSFmJiZfJiZjIGluIF8sdSYmYyBpbiB2fHwobD11P19bY106cltjXSx2W2NdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBfW2NdP3JbY106aCYmdT9pKGwsbik6eSYmX1tjXT09bD9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShsKTpiJiYiZnVuY3Rpb24iPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxiJiYoKHZbc118fCh2W3NdPXt9KSlbY109bCkpfTthLkY9MSxhLkc9MixhLlM9NCxhLlA9OCxhLkI9MTYsYS5XPTMyLHQuZXhwb3J0cz1hfSx7Ii4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5nbG9iYWwiOjQxfV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYT1lKCIuLyQudG8tbGVuZ3RoIiksYz1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgbCxmLGQscD1jKGUpLGI9bihyLHUsdD8yOjEpLGg9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihsPWEoZS5sZW5ndGgpO2w+aDtoKyspdD9iKHMoZj1lW2hdKVswXSxmWzFdKTpiKGVbaF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEoZj1kLm5leHQoKSkuZG9uZTspbyhkLGIsZi52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtYXJyYXktaXRlciI6NDcsIi4vJC5pdGVyLWNhbGwiOjUwLCIuLyQudG8tbGVuZ3RoIjo3NSwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjc5fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpLG89ZSgiLi8kIikuZ2V0TmFtZXMsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBvKGUpfWNhdGNoKHQpe3JldHVybiBzLnNsaWNlKCl9fTt0LmV4cG9ydHMuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6NTYsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MX1dLDQ0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjozMH1dLDQ3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0seyIuLyQuY29mIjozMH1dLDQ5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6Mjh9XSw1MTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6NTYsIi4vJC5oaWRlIjo0MywiLi8kLnByb3BlcnR5LWRlc2MiOjYxLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYT1lKCIuLyQuaGFzIiksYz1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxsPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGY9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSxiPSJAQGl0ZXJhdG9yIixoPSJrZXlzIix5PSJ2YWx1ZXMiLHY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLF8sZyxtLGope3Uocix0LF8pO3ZhciAkLHcsTz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBFKXJldHVybiBFW2VdO3N3aXRjaChlKXtjYXNlIGg6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIseD1nPT15LEM9ITEsRT1lLnByb3RvdHlwZSxTPUVbZF18fEVbYl18fGcmJkVbZ10sVD1TfHxPKGcpO2lmKFMpe3ZhciBSPWYoVC5jYWxsKG5ldyBlKSk7bChSLGssITApLCFuJiZhKEUsYikmJnMoUixkLHYpLHgmJlMubmFtZSE9PXkmJihDPSEwLFQ9ZnVuY3Rpb24oKXtyZXR1cm4gUy5jYWxsKHRoaXMpfSl9aWYobiYmIWp8fCFwJiYhQyYmRVtkXXx8cyhFLGQsVCksY1t0XT1ULGNba109dixnKWlmKCQ9e3ZhbHVlczp4P1Q6Tyh5KSxrZXlzOm0/VDpPKGgpLGVudHJpZXM6eD9PKCJlbnRyaWVzIik6VH0sailmb3IodyBpbiAkKXcgaW4gRXx8aShFLHcsJFt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fEMpLHQsJCk7cmV0dXJuICR9fSx7Ii4vJCI6NTYsIi4vJC5leHBvcnQiOjM3LCIuLyQuaGFzIjo0MiwiLi8kLmhpZGUiOjQzLCIuLyQuaXRlci1jcmVhdGUiOjUxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLmxpYnJhcnkiOjU4LCIuLyQucmVkZWZpbmUiOjYzLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYSl7fXJldHVybiByfX0seyIuLyQud2tzIjo3OH1dLDU0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDU1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSw1NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaT1vKGUpLHM9bi5nZXRLZXlzKGkpLGE9cy5sZW5ndGgsYz0wO2E+YzspaWYoaVtyPXNbYysrXV09PT10KXJldHVybiByfX0seyIuLyQiOjU2LCIuLyQudG8taW9iamVjdCI6NzR9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLnRhc2siKS5zZXQsYz1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxsPXMuUHJvbWlzZSxmPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGYmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihmKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGMpe3ZhciBwPTEsYj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGMoZCkub2JzZXJ2ZShiLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe2IuZGF0YT1wPS1wfX1lbHNlIGk9bCYmbC5yZXNvbHZlP2Z1bmN0aW9uKCl7bC5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXthLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpmJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjozMCwiLi8kLmdsb2JhbCI6NDEsIi4vJC50YXNrIjo3Mn1dLDYwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjozMSwiLi8kLmV4cG9ydCI6MzcsIi4vJC5mYWlscyI6Mzh9XSw2MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjYzfV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6NDN9XSw2NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw2NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDY2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjo1NiwiLi8kLmNvcmUiOjMxLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQud2tzIjo3OH1dLDY3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjo1NiwiLi8kLmhhcyI6NDIsIi4vJC53a3MiOjc4fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6NDF9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQud2tzIjo3OH1dLDcwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDcxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYT1TdHJpbmcobyh0KSksYz1uKHIpLHU9YS5sZW5ndGg7cmV0dXJuIDA+Y3x8Yz49dT9lPyIiOnZvaWQgMDooaT1hLmNoYXJDb2RlQXQoYyksNTUyOTY+aXx8aT41NjMxOXx8YysxPT09dXx8KHM9YS5jaGFyQ29kZUF0KGMrMSkpPDU2MzIwfHxzPjU3MzQzP2U/YS5jaGFyQXQoYyk6aTplP2Euc2xpY2UoYyxjKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLnRvLWludGVnZXIiOjczfV0sNzI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYT1lKCIuLyQuaW52b2tlIiksYz1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxsPWUoIi4vJC5nbG9iYWwiKSxmPWwucHJvY2VzcyxkPWwuc2V0SW1tZWRpYXRlLHA9bC5jbGVhckltbWVkaWF0ZSxiPWwuTWVzc2FnZUNoYW5uZWwsaD0wLHk9e30sdj0ib25yZWFkeXN0YXRlY2hhbmdlIixfPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxnPWZ1bmN0aW9uKGUpe18uY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrK2hdPWZ1bmN0aW9uKCl7YSgiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKGgpLGh9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGYpP249ZnVuY3Rpb24oZSl7Zi5uZXh0VGljayhzKF8sZSwxKSl9OmI/KG89bmV3IGIsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcsbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6bC5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFsLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7bC5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZywhMSkpOm49diBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXtjLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVt2XT1mdW5jdGlvbigpe2MucmVtb3ZlQ2hpbGQodGhpcyksXy5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKF8sZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MzAsIi4vJC5jdHgiOjMyLCIuLyQuZG9tLWNyZWF0ZSI6MzUsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaHRtbCI6NDQsIi4vJC5pbnZva2UiOjQ1fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLmlvYmplY3QiOjQ2fV0sNzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo3M31dLDc2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjMzfV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjo0MSwiLi8kLnNoYXJlZCI6NjgsIi4vJC51aWQiOjc3fV0sNzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDgwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MjcsIi4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5pdGVyLXN0ZXAiOjU0LCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLnRvLWlvYmplY3QiOjc0fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIGUobih0KSxyKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDgzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImtleXMiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZShuKHQpKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1vYmplY3QiOjc2fV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vJC5zZXQtcHJvdG8iKS5zZXR9KX0seyIuLyQuZXhwb3J0IjozNywiLi8kLnNldC1wcm90byI6NjV9XSw4NTpbZnVuY3Rpb24oZSx0LHIpe30se31dLDg2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLmN0eCIpLGM9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxsPWUoIi4vJC5pcy1vYmplY3QiKSxmPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLGI9ZSgiLi8kLmZvci1vZiIpLGg9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksdj1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxfPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksZz1lKCIuLyQubWljcm90YXNrIiksbT0iUHJvbWlzZSIsaj1zLnByb2Nlc3MsJD0icHJvY2VzcyI9PWMoaiksdz1zW21dLE89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gaChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmTygpLGgodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLHg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sQz1mdW5jdGlvbihlKXt2YXIgdD1mKGUpW3ZdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxFPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBsKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFM9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sVD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFI9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO2coZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxhPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGE9dC5yZXNvbHZlLGM9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2MoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPUUocikpP2kuY2FsbChyLGEsYyk6YShyKSk6YyhuKX1jYXRjaCh1KXtjKHUpfX07ci5sZW5ndGg+aTspYShyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO00obykmJigkP2ouZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxNPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFNKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFIodCwhMCkpfSxOPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PUUoZSkpP2coZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxhKE4sbiwxKSxhKEQsbiwxKSl9Y2F0Y2gobyl7RC5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFIociwhMSkpfWNhdGNoKG4pe0QuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxtKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYShOLHQsMSksYShELHQsMSkpfWNhdGNoKHIpe0QuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFMoXyh0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlIobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxtKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShtKSxuPWUoIi4vJC5jb3JlIilbbV0sdSh1LlMrdS5GKiFrLG0se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxPKCEwKSksbSx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmeChlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLG0se2FsbDpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGE9VChmdW5jdGlvbigpe2IoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYT1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxhW29dPWUsLS1yfHxuKGEpKX0saSl9KTpuKGEpfSk7cmV0dXJuIGEmJmkoYS5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PUModGhpcykscj1uZXcgUyh0KSxuPXIucmVqZWN0LG89VChmdW5jdGlvbigpe2IoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjU2LCIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY2xhc3NvZiI6MjksIi4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5leHBvcnQiOjM3LCIuLyQuZm9yLW9mIjozOSwiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5LCIuLyQuaXRlci1kZXRlY3QiOjUzLCIuLyQubGlicmFyeSI6NTgsIi4vJC5taWNyb3Rhc2siOjU5LCIuLyQucmVkZWZpbmUtYWxsIjo2MiwiLi8kLnNhbWUtdmFsdWUiOjY0LCIuLyQuc2V0LXByb3RvIjo2NSwiLi8kLnNldC1zcGVjaWVzIjo2NiwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjY5LCIuLyQuc3RyaWN0LW5ldyI6NzAsIi4vJC53a3MiOjc4fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5zdHJpbmctYXQiOjcxfV0sODg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQuZ2xvYmFsIiksaT1lKCIuLyQuaGFzIikscz1lKCIuLyQuZGVzY3JpcHRvcnMiKSxhPWUoIi4vJC5leHBvcnQiKSxjPWUoIi4vJC5yZWRlZmluZSIpLHU9ZSgiLi8kLmZhaWxzIiksbD1lKCIuLyQuc2hhcmVkIiksZj1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxkPWUoIi4vJC51aWQiKSxwPWUoIi4vJC53a3MiKSxiPWUoIi4vJC5rZXlvZiIpLGg9ZSgiLi8kLmdldC1uYW1lcyIpLHk9ZSgiLi8kLmVudW0ta2V5cyIpLHY9ZSgiLi8kLmlzLWFycmF5IiksXz1lKCIuLyQuYW4tb2JqZWN0IiksZz1lKCIuLyQudG8taW9iamVjdCIpLG09ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxqPW4uZ2V0RGVzYywkPW4uc2V0RGVzYyx3PW4uY3JlYXRlLE89aC5nZXQsaz1vLlN5bWJvbCx4PW8uSlNPTixDPXgmJnguc3RyaW5naWZ5LEU9ITEsUz1wKCJfaGlkZGVuIiksVD1uLmlzRW51bSxSPWwoInN5bWJvbC1yZWdpc3RyeSIpLE09bCgic3ltYm9scyIpLEQ9ImZ1bmN0aW9uIj09dHlwZW9mIGssTj1PYmplY3QucHJvdG90eXBlLFA9cyYmdShmdW5jdGlvbigpe3JldHVybiA3IT13KCQoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49aihOLHQpO24mJmRlbGV0ZSBOW3RdLCQoZSx0LHIpLG4mJmUhPT1OJiYkKE4sdCxuKX06JCxBPWZ1bmN0aW9uKGUpe3ZhciB0PU1bZV09dyhrLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSxzJiZFJiZQKE4sZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtpKHRoaXMsUykmJmkodGhpc1tTXSxlKSYmKHRoaXNbU11bZV09ITEpLFAodGhpcyxlLG0oMSx0KSl9fSksdH0sTD1mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9LEY9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByJiZpKE0sdCk/KHIuZW51bWVyYWJsZT8oaShlLFMpJiZlW1NdW3RdJiYoZVtTXVt0XT0hMSkscj13KHIse2VudW1lcmFibGU6bSgwLCExKX0pKTooaShlLFMpfHwkKGUsUyxtKDEse30pKSxlW1NdW3RdPSEwKSxQKGUsdCxyKSk6JChlLHQscil9LEk9ZnVuY3Rpb24oZSx0KXtfKGUpO2Zvcih2YXIgcixuPXkodD1nKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KUYoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sVj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3coZSk6SSh3KGUpLHQpfSxVPWZ1bmN0aW9uKGUpe3ZhciB0PVQuY2FsbCh0aGlzLGUpO3JldHVybiB0fHwhaSh0aGlzLGUpfHwhaShNLGUpfHxpKHRoaXMsUykmJnRoaXNbU11bZV0/dDohMH0sej1mdW5jdGlvbihlLHQpe3ZhciByPWooZT1nKGUpLHQpO3JldHVybiFyfHwhaShNLHQpfHxpKGUsUykmJmVbU11bdF18fChyLmVudW1lcmFibGU9ITApLHJ9LEg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pfHx0PT1TfHxuLnB1c2godCk7cmV0dXJuIG59LEI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pJiZuLnB1c2goTVt0XSk7cmV0dXJuIG59LEo9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIUwoZSkpe2Zvcih2YXIgdCxyLG49W2VdLG89MSxpPWFyZ3VtZW50cztpLmxlbmd0aD5vOyluLnB1c2goaVtvKytdKTtyZXR1cm4gdD1uWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10KSwhciYmdih0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksTCh0KT92b2lkIDA6dH0pLG5bMV09dCxDLmFwcGx5KHgsbil9fSxXPXUoZnVuY3Rpb24oKXt2YXIgZT1rKCk7cmV0dXJuIltudWxsXSIhPUMoW2VdKXx8Int9IiE9Qyh7YTplfSl8fCJ7fSIhPUMoT2JqZWN0KGUpKX0pO0R8fChrPWZ1bmN0aW9uKCl7aWYoTCh0aGlzKSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3JldHVybiBBKGQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApKX0sYyhrLnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxMPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Yga30sbi5jcmVhdGU9VixuLmlzRW51bT1VLG4uZ2V0RGVzYz16LG4uc2V0RGVzYz1GLG4uc2V0RGVzY3M9SSxuLmdldE5hbWVzPWguZ2V0PUgsbi5nZXRTeW1ib2xzPUIscyYmIWUoIi4vJC5saWJyYXJ5IikmJmMoTiwicHJvcGVydHlJc0VudW1lcmFibGUiLFUsITApKTt2YXIgWT17ImZvciI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoUixlKz0iIik/UltlXTpSW2VdPWsoZSl9LGtleUZvcjpmdW5jdGlvbihlKXtyZXR1cm4gYihSLGUpfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtFPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtFPSExfX07bi5lYWNoLmNhbGwoImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGZ1bmN0aW9uKGUpe3ZhciB0PXAoZSk7WVtlXT1EP3Q6QSh0KX0pLEU9ITAsYShhLkcrYS5XLHtTeW1ib2w6a30pLGEoYS5TLCJTeW1ib2wiLFkpLGEoYS5TK2EuRiohRCwiT2JqZWN0Iix7Y3JlYXRlOlYsZGVmaW5lUHJvcGVydHk6RixkZWZpbmVQcm9wZXJ0aWVzOkksZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOnosZ2V0T3duUHJvcGVydHlOYW1lczpILGdldE93blByb3BlcnR5U3ltYm9sczpCfSkseCYmYShhLlMrYS5GKighRHx8VyksIkpTT04iLHtzdHJpbmdpZnk6Sn0pLGYoaywiU3ltYm9sIiksZihNYXRoLCJNYXRoIiwhMCksZihvLkpTT04sIkpTT04iLCEwKX0seyIuLyQiOjU2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLmVudW0ta2V5cyI6MzYsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4LCIuLyQuZ2V0LW5hbWVzIjo0MCwiLi8kLmdsb2JhbCI6NDEsIi4vJC5oYXMiOjQyLCIuLyQuaXMtYXJyYXkiOjQ4LCIuLyQua2V5b2YiOjU3LCIuLyQubGlicmFyeSI6NTgsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNoYXJlZCI6NjgsIi4vJC50by1pb2JqZWN0Ijo3NCwiLi8kLnVpZCI6NzcsIi4vJC53a3MiOjc4fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjgwfV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXt3aW5kb3cuTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5nPVtdLHRoaXMuaz1lfWZ1bmN0aW9uIHIoZSl7IWZ1bmN0aW9uIHIoKXt2YXIgbj1lLnRha2VSZWNvcmRzKCk7bi5sZW5ndGgmJmUuayhuLGUpLGUuZj1zZXRUaW1lb3V0KHIsdC5fcGVyaW9kKX0oKX1mdW5jdGlvbiBuKHQpe3ZhciByLG49e3R5cGU6bnVsbCx0YXJnZXQ6bnVsbCxhZGRlZE5vZGVzOltdLHJlbW92ZWROb2RlczpbXSxwcmV2aW91c1NpYmxpbmc6bnVsbCxuZXh0U2libGluZzpudWxsLGF0dHJpYnV0ZU5hbWU6bnVsbCxhdHRyaWJ1dGVOYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpudWxsfTtmb3IociBpbiB0KW5bcl0hPT1lJiZ0W3JdIT09ZSYmKG5bcl09dFtyXSk7cmV0dXJuIG59ZnVuY3Rpb24gbyhlLHQpe3ZhciByPWEoZSx0KTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIG8sYz1uLmxlbmd0aDt0LmEmJnIuYSYmaShuLGUsci5hLHQuZCksKHQuYnx8dC5lKSYmKG89cyhuLGUscix0KSksKG98fG4ubGVuZ3RoIT09YykmJihyPWEoZSx0KSl9fWZ1bmN0aW9uIGkodCxyLG8saSl7Zm9yKHZhciBzLGEsYz17fSx1PXIuYXR0cmlidXRlcyxsPXUubGVuZ3RoO2wtLTspcz11W2xdLGE9cy5uYW1lLGkmJmlbYV09PT1lfHwocy52YWx1ZSE9PW9bYV0mJnQucHVzaChuKHt0eXBlOiJhdHRyaWJ1dGVzIix0YXJnZXQ6cixhdHRyaWJ1dGVOYW1lOmEsb2xkVmFsdWU6b1thXSxhdHRyaWJ1dGVOYW1lc3BhY2U6cy5uYW1lc3BhY2VVUkl9KSksY1thXT0hMCk7Zm9yKGEgaW4gbyljW2FdfHx0LnB1c2gobih7dGFyZ2V0OnIsdHlwZToiYXR0cmlidXRlcyIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV19KSl9ZnVuY3Rpb24gcyh0LHIsbyxzKXtmdW5jdGlvbiBhKGUscixvLGEsYyl7dmFyIGw9ZS5sZW5ndGgtMTtjPS1+KChsLWMpLzIpO2Zvcih2YXIgZixkLHA7cD1lLnBvcCgpOylmPW9bcC5oXSxkPWFbcC5pXSxzLmImJmMmJk1hdGguYWJzKHAuaC1wLmkpPj1sJiYodC5wdXNoKG4oe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0OnIsYWRkZWROb2RlczpbZl0scmVtb3ZlZE5vZGVzOltmXSxuZXh0U2libGluZzpmLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpmLnByZXZpb3VzU2libGluZ30pKSxjLS0pLHMuYSYmZC5hJiZpKHQsZixkLmEscy5kKSxzLmMmJjM9PT1mLm5vZGVUeXBlJiZmLm5vZGVWYWx1ZSE9PWQuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpmfSkpLHMuZSYmdShmLGQpfWZ1bmN0aW9uIHUocixvKXtmb3IodmFyIGQscCxiLGgseSx2PXIuY2hpbGROb2RlcyxfPW8uYixnPXYubGVuZ3RoLG09Xz9fLmxlbmd0aDowLGo9MCwkPTAsdz0wO2c+JHx8bT53OyloPXZbJF0seT0oYj1fW3ddKSYmYi5qLGg9PT15PyhzLmEmJmIuYSYmaSh0LGgsYi5hLHMuZCkscy5jJiZiLmMhPT1lJiZoLm5vZGVWYWx1ZSE9PWIuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpofSkpLHAmJmEocCxyLHYsXyxqKSxzLmUmJihoLmNoaWxkTm9kZXMubGVuZ3RofHxiLmImJmIuYi5sZW5ndGgpJiZ1KGgsYiksJCsrLHcrKyk6KGw9ITAsZHx8KGQ9e30scD1bXSksaCYmKGRbYj1jKGgpXXx8KGRbYl09ITAsLTE9PT0oYj1mKF8saCx3LCJqIikpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2hdLG5leHRTaWJsaW5nOmgubmV4dFNpYmxpbmcscHJldmlvdXNTaWJsaW5nOmgucHJldmlvdXNTaWJsaW5nfSkpLGorKyk6cC5wdXNoKHtoOiQsaTpifSkpLCQrKykseSYmeSE9PXZbJF0mJihkW2I9Yyh5KV18fChkW2JdPSEwLC0xPT09KGI9Zih2LHksJCkpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpvLmoscmVtb3ZlZE5vZGVzOlt5XSxuZXh0U2libGluZzpfW3crMV0scHJldmlvdXNTaWJsaW5nOl9bdy0xXX0pKSxqLS0pOnAucHVzaCh7aDpiLGk6d30pKSx3KyspKTtwJiZhKHAscix2LF8sail9dmFyIGw7cmV0dXJuIHUocixvKSxsfWZ1bmN0aW9uIGEoZSx0KXt2YXIgcj0hMDtyZXR1cm4gZnVuY3Rpb24gbihlKXt2YXIgbz17ajplfTtyZXR1cm4hdC5jfHwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGU/KHQuYSYmciYmMT09PWUubm9kZVR5cGUmJihvLmE9bChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5kJiYhdC5kW3IubmFtZV18fChlW3IubmFtZV09ci52YWx1ZSksZX0pKSxyJiYodC5ifHx0LmN8fHQuYSYmdC5lKSYmKG8uYj11KGUuY2hpbGROb2RlcyxuKSkscj10LmUpOm8uYz1lLm5vZGVWYWx1ZSxvfShlKX1mdW5jdGlvbiBjKGUpe3RyeXtyZXR1cm4gZS5pZHx8KGUubW9faWQ9ZS5tb19pZHx8ZCsrKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGUubm9kZVZhbHVlfWNhdGNoKHIpe3JldHVybiBkKyt9fX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciByPVtdLG49MDtuPGUubGVuZ3RoO24rKylyW25dPXQoZVtuXSxuLGUpO3JldHVybiByfWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIHI9e30sbj0wO248ZS5sZW5ndGg7bisrKXI9dChyLGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBmKGUsdCxyLG4pe2Zvcig7cjxlLmxlbmd0aDtyKyspaWYoKG4/ZVtyXVtuXTplW3JdKT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9dC5fcGVyaW9kPTMwLHQucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXthOiEhKHQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXJ8fHQuYXR0cmlidXRlT2xkVmFsdWUpLGI6ISF0LmNoaWxkTGlzdCxlOiEhdC5zdWJ0cmVlLGM6ISghdC5jaGFyYWN0ZXJEYXRhJiYhdC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpfSxpPXRoaXMuZyxzPTA7czxpLmxlbmd0aDtzKyspaVtzXS5tPT09ZSYmaS5zcGxpY2UocywxKTt0LmF0dHJpYnV0ZUZpbHRlciYmKG4uZD1sKHQuYXR0cmlidXRlRmlsdGVyLGZ1bmN0aW9uKGUsdCl7CnJldHVybiBlW3RdPSEwLGV9KSksaS5wdXNoKHttOmUsbDpvKGUsbil9KSx0aGlzLmZ8fHIodGhpcyl9LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5nLHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdLmwoZSk7cmV0dXJuIGV9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmc9W10sY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGx9fTt2YXIgZD0xO3JldHVybiB0fSh2b2lkIDApfSx7fV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXtPYmplY3Qub2JzZXJ2ZXx8ZnVuY3Rpb24oZSx0LHIsbil7InVzZSBzdHJpY3QiO3ZhciBvLGkscz1bImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInJlY29uZmlndXJlIiwic2V0UHJvdG90eXBlIiwicHJldmVudEV4dGVuc2lvbnMiXSxhPXQuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1lLmNhbGwodCl9fShlLnByb3RvdHlwZS50b1N0cmluZyksYz10LnByb3RvdHlwZS5pbmRleE9mP3QuaW5kZXhPZnx8ZnVuY3Rpb24oZSxyLG4pe3JldHVybiB0LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxyLG4pfTpmdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPXJ8fDA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LHU9ci5NYXAhPT1uJiZNYXAucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE1hcH06ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PVtdO3JldHVybntzaXplOjAsaGFzOmZ1bmN0aW9uKHQpe3JldHVybiBjKGUsdCk+LTF9LGdldDpmdW5jdGlvbihyKXtyZXR1cm4gdFtjKGUscildfSxzZXQ6ZnVuY3Rpb24ocixuKXt2YXIgbz1jKGUscik7LTE9PT1vPyhlLnB1c2gociksdC5wdXNoKG4pLHRoaXMuc2l6ZSsrKTp0W29dPW59LCJkZWxldGUiOmZ1bmN0aW9uKHIpe3ZhciBuPWMoZSxyKTtuPi0xJiYoZS5zcGxpY2UobiwxKSx0LnNwbGljZShuLDEpLHRoaXMuc2l6ZS0tKX0sZm9yRWFjaDpmdW5jdGlvbihyKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylyLmNhbGwoYXJndW1lbnRzWzFdLHRbbl0sZVtuXSx0aGlzKX19fSxsPWUuZ2V0T3duUHJvcGVydHlOYW1lcz9mdW5jdGlvbigpe3ZhciB0PWUuZ2V0T3duUHJvcGVydHlOYW1lczt0cnl7YXJndW1lbnRzLmNhbGxlZX1jYXRjaChyKXt2YXIgbj0odChjKS5qb2luKCIgIikrIiAiKS5yZXBsYWNlKC9wcm90b3R5cGUgfGxlbmd0aCB8bmFtZSAvZywiIikuc2xpY2UoMCwtMSkuc3BsaXQoIiAiKTtuLmxlbmd0aCYmKHQ9ZnVuY3Rpb24odCl7dmFyIHI9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KWZvcih2YXIgbyxpPTA7aTxuLmxlbmd0aDspKG89YyhyLG5baSsrXSkpPi0xJiZyLnNwbGljZShvLDEpO3JldHVybiByfSl9cmV0dXJuIHR9KCk6ZnVuY3Rpb24odCl7dmFyIHIsbixvPVtdO2lmKCJoYXNPd25Qcm9wZXJ0eSJpbiB0KWZvcihyIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmby5wdXNoKHIpO2Vsc2V7bj1lLmhhc093blByb3BlcnR5O2ZvcihyIGluIHQpbi5jYWxsKHQscikmJm8ucHVzaChyKX1yZXR1cm4gYSh0KSYmby5wdXNoKCJsZW5ndGgiKSxvfSxmPWUuZ2V0UHJvdG90eXBlT2YsZD1lLmRlZmluZVByb3BlcnRpZXMmJmUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHA9ci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbigpe3ZhciBlPStuZXcgRGF0ZSx0PWU7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cigodD0rbmV3IERhdGUpLWUpfSwxNyl9fSgpLGI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW8uZ2V0KGUpO24/KHkobixlKSxtKGUsbix0LHIpKToobj1oKGUpLG0oZSxuLHQsciksMT09PW8uc2l6ZSYmcCh2KSl9LGg9ZnVuY3Rpb24odCxyKXt2YXIgbixpPWwodCkscz1bXSxhPTAscj17aGFuZGxlcnM6dSgpLGZyb3plbjplLmlzRnJvemVuP2UuaXNGcm96ZW4odCk6ITEsZXh0ZW5zaWJsZTplLmlzRXh0ZW5zaWJsZT9lLmlzRXh0ZW5zaWJsZSh0KTohMCxwcm90bzpmJiZmKHQpLHByb3BlcnRpZXM6aSx2YWx1ZXM6cyxub3RpZmllcjpnKHQscil9O2lmKGQpZm9yKG49ci5kZXNjcmlwdG9ycz1bXTthPGkubGVuZ3RoOyluW2FdPWQodCxpW2FdKSxzW2FdPXRbaVthKytdXTtlbHNlIGZvcig7YTxpLmxlbmd0aDspc1thXT10W2lbYSsrXV07cmV0dXJuIG8uc2V0KHQscikscn0seT1mdW5jdGlvbigpe3ZhciB0PWQ/ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaT10LnByb3BlcnRpZXNbcl0scz1lW2ldLGE9dC52YWx1ZXNbcl0sYz10LmRlc2NyaXB0b3JzW3JdOyJ2YWx1ZSJpbiBvJiYoYT09PXM/MD09PWEmJjEvYSE9PTEvczphPT09YXx8cz09PXMpJiYoaihlLHQse25hbWU6aSx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOmF9LG4pLHQudmFsdWVzW3JdPXMpLCFjLmNvbmZpZ3VyYWJsZXx8by5jb25maWd1cmFibGUmJm8ud3JpdGFibGU9PT1jLndyaXRhYmxlJiZvLmVudW1lcmFibGU9PT1jLmVudW1lcmFibGUmJm8uZ2V0PT09Yy5nZXQmJm8uc2V0PT09Yy5zZXR8fChqKGUsdCx7bmFtZTppLHR5cGU6InJlY29uZmlndXJlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LmRlc2NyaXB0b3JzW3JdPW8pfTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10LnByb3BlcnRpZXNbcl0saT1lW29dLHM9dC52YWx1ZXNbcl07KHM9PT1pPzA9PT1zJiYxL3MhPT0xL2k6cz09PXN8fGk9PT1pKSYmKGooZSx0LHtuYW1lOm8sdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpzfSxuKSx0LnZhbHVlc1tyXT1pKX0scj1kP2Z1bmN0aW9uKGUscixuLG8saSl7Zm9yKHZhciBzLGE9ci5sZW5ndGg7biYmYS0tOyludWxsIT09clthXSYmKHM9ZChlLHJbYV0pLG4tLSxzP3QoZSxvLGEsaSxzKTooaihlLG8se25hbWU6clthXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm8udmFsdWVzW2FdfSxpKSxvLnByb3BlcnRpZXMuc3BsaWNlKGEsMSksby52YWx1ZXMuc3BsaWNlKGEsMSksby5kZXNjcmlwdG9ycy5zcGxpY2UoYSwxKSkpfTpmdW5jdGlvbihlLHQscixuLG8pe2Zvcih2YXIgaT10Lmxlbmd0aDtyJiZpLS07KW51bGwhPT10W2ldJiYoaihlLG4se25hbWU6dFtpXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm4udmFsdWVzW2ldfSxvKSxuLnByb3BlcnRpZXMuc3BsaWNlKGksMSksbi52YWx1ZXMuc3BsaWNlKGksMSksci0tKX07cmV0dXJuIGZ1bmN0aW9uKG4sbyxpKXtpZihuLmhhbmRsZXJzLnNpemUmJiFuLmZyb3plbil7dmFyIHMsYSx1LHAsYixoLHksdixfPW4udmFsdWVzLGc9bi5kZXNjcmlwdG9ycyxtPTA7aWYobi5leHRlbnNpYmxlKWlmKHM9bi5wcm9wZXJ0aWVzLnNsaWNlKCksYT1zLmxlbmd0aCx1PWwobyksZyl7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSx2PWQobyxiKSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKG9bYl0pLGcucHVzaCh2KSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpLHYpKTtyKG8scyxhLG4saSksZS5pc0V4dGVuc2libGUobyl8fChuLmV4dGVuc2libGU9ITEsaihvLG4se3R5cGU6InByZXZlbnRFeHRlbnNpb25zIixvYmplY3Q6b30saSksbi5mcm96ZW49ZS5pc0Zyb3plbihvKSl9ZWxzZXtmb3IoO208dS5sZW5ndGg7KWI9dVttKytdLHA9YyhzLGIpLGg9b1tiXSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKGgpKTooc1twXT1udWxsLGEtLSx0KG8sbixwLGkpKTtyKG8scyxhLG4saSl9ZWxzZSBpZighbi5mcm96ZW4pe2Zvcig7bTxzLmxlbmd0aDttKyspYj1zW21dLHQobyxuLG0saSxkKG8sYikpO2UuaXNGcm96ZW4obykmJihuLmZyb3plbj0hMCl9ZiYmKHk9ZihvKSx5IT09bi5wcm90byYmKGoobyxuLHt0eXBlOiJzZXRQcm90b3R5cGUiLG5hbWU6Il9fcHJvdG9fXyIsb2JqZWN0Om8sb2xkVmFsdWU6bi5wcm90b30pLG4ucHJvdG89eSkpfX19KCksdj1mdW5jdGlvbigpe28uc2l6ZSYmKG8uZm9yRWFjaCh5KSxpLmZvckVhY2goXykscCh2KSl9LF89ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmNoYW5nZVJlY29yZHM7ci5sZW5ndGgmJihlLmNoYW5nZVJlY29yZHM9W10sdChyKSl9LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyJiYodD1vLmdldChlKSksdCYmdC5ub3RpZmllcnx8e25vdGlmeTpmdW5jdGlvbih0KXt0LnR5cGU7dmFyIHI9by5nZXQoZSk7aWYocil7dmFyIG4saT17b2JqZWN0OmV9O2ZvcihuIGluIHQpIm9iamVjdCIhPT1uJiYoaVtuXT10W25dKTtqKGUscixpKX19LHBlcmZvcm1DaGFuZ2U6ZnVuY3Rpb24odCxyKXtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBub24tc3RyaW5nIGNoYW5nZVR5cGUiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgcGVyZm9ybSBub24tZnVuY3Rpb24iKTt2YXIgaSxzLGE9by5nZXQoZSksYz1hcmd1bWVudHNbMl0sdT1jPT09bj9yKCk6ci5jYWxsKGMpO2lmKGEmJnkoYSxlLHQpLGEmJnUmJiJvYmplY3QiPT10eXBlb2YgdSl7cz17b2JqZWN0OmUsdHlwZTp0fTtmb3IoaSBpbiB1KSJvYmplY3QiIT09aSYmInR5cGUiIT09aSYmKHNbaV09dVtpXSk7aihlLGEscyl9fX19LG09ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89aS5nZXQocik7b3x8aS5zZXQocixvPXtvYnNlcnZlZDp1KCksY2hhbmdlUmVjb3JkczpbXX0pLG8ub2JzZXJ2ZWQuc2V0KGUse2FjY2VwdExpc3Q6bi5zbGljZSgpLGRhdGE6dH0pLHQuaGFuZGxlcnMuc2V0KHIsbyl9LGo9ZnVuY3Rpb24oZSx0LHIsbil7dC5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXQub2JzZXJ2ZWQuZ2V0KGUpLmFjY2VwdExpc3Q7KCJzdHJpbmciIT10eXBlb2Ygbnx8LTE9PT1jKG8sbikpJiZjKG8sci50eXBlKT4tMSYmdC5jaGFuZ2VSZWNvcmRzLnB1c2gocil9KX07bz11KCksaT11KCksZS5vYnNlcnZlPWZ1bmN0aW9uKHQscixvKXtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3Qgb2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7aWYoZS5pc0Zyb3plbiYmZS5pc0Zyb3plbihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBhIGZyb3plbiBmdW5jdGlvbiBvYmplY3QiKTtpZihvPT09bilvPXM7ZWxzZSBpZighb3x8Im9iamVjdCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoaXJkIGFyZ3VtZW50IHRvIE9iamVjdC5vYnNlcnZlIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncy4iKTtyZXR1cm4gYih0LHIsbyksdH0sZS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCB1bm9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHIsbj1pLmdldCh0KTtyZXR1cm4gbiYmKHI9bi5vYnNlcnZlZC5nZXQoZSkpJiYobi5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxwKGZ1bmN0aW9uKCl7XyhuLHQpfSksMT09PW4ub2JzZXJ2ZWQuc2l6ZSYmbi5vYnNlcnZlZC5oYXMoZSk/aVsiZGVsZXRlIl0odCk6bi5vYnNlcnZlZFsiZGVsZXRlIl0oZSksMT09PXIuZGF0YS5oYW5kbGVycy5zaXplP29bImRlbGV0ZSJdKGUpOnIuZGF0YS5oYW5kbGVyc1siZGVsZXRlIl0odCkpLGV9LGUuZ2V0Tm90aWZpZXI9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmdldE5vdGlmaWVyIGNhbm5vdCBnZXROb3RpZmllciBub24tb2JqZWN0Iik7cmV0dXJuIGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4odCk/bnVsbDpnKHQpfSxlLmRlbGl2ZXJDaGFuZ2VSZWNvcmRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgdD1pLmdldChlKTt0JiYodC5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxfKHQsZSkpfX0oT2JqZWN0LEFycmF5LHRoaXMpfSx7fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5EYXRhT2JqZWN0T2JzZXJ2ZXI9ci5EYXRhT2JqZWN0UmVwb3J0ZXI9ci5TeW5jaGVyPXZvaWQgMCxlKCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iKSxlKCJvYmplY3Qub2JzZXJ2ZSIpLGUoImFycmF5Lm9ic2VydmUiKTt2YXIgbz1lKCIuL3N5bmNoZXIvU3luY2hlciIpLGk9bihvKSxzPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxhPW4ocyksYz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIiksdT1uKGMpO3IuU3luY2hlcj1pWyJkZWZhdWx0Il0sci5EYXRhT2JqZWN0UmVwb3J0ZXI9YVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdE9ic2VydmVyPXVbImRlZmF1bHQiXX0seyIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjo5NSwiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vc3luY2hlci9TeW5jaGVyIjo5OSwiYXJyYXkub2JzZXJ2ZSI6MSwibXV0YXRpb25vYnNlcnZlci1zaGltIjo5MCwib2JqZWN0Lm9ic2VydmUiOjkxfV0sOTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCIuL1N5bmNPYmplY3QiKSxwPW4oZCksYj1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGg9bihiKSx5PWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxpLHMpeygwLHVbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgYT10aGlzO2EuX3N5bmNoZXI9dCxhLl91cmw9cixhLl9zY2hlbWE9bixhLl9zdGF0dXM9byxhLl9zeW5jT2JqPW5ldyBwWyJkZWZhdWx0Il0oaSksYS5fY2hpbGRyZW5zPXMsYS5fdmVyc2lvbj0wLGEuX2NoaWxkSWQ9MCxhLl9jaGlsZHJlbk9iamVjdHM9e30sYS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYS5fb3duZXI9dC5fb3duZXIsYS5fYnVzPXQuX2J1c31yZXR1cm4oMCxmWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXQuX3VybCsiL2NoaWxkcmVuLyI7dC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz1yK24saT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihyKXtpZihyLmZyb20hPT1lLl9vd25lcilzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uQ2hpbGRDcmVhdGUocik7YnJlYWs7Y2FzZSJkZWxldGUiOmNvbnNvbGUubG9nKHIpO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4ocil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSwoMCxhWyJkZWZhdWx0Il0pKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGlsZHJlbk9iamVjdHNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicGF1c2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InJlc3VtZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToic3RvcCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToiYWRkQ2hpbGQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyLl9jaGlsZElkKys7dmFyIG49ci5fb3duZXIrIiMiK3IuX2NoaWxkSWQsbz1yLl91cmwrIi9jaGlsZHJlbi8iK2Uscz17dHlwZToiY3JlYXRlIixmcm9tOnIuX293bmVyLHRvOm8sYm9keTp7cmVzb3VyY2U6bix2YWx1ZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSl7dmFyIGk9ci5fYnVzLnBvc3RNZXNzYWdlKHMpO2NvbnNvbGUubG9nKCJjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICIrci5fb3duZXIrIiApOiAiLHMpO3ZhciBhPW5ldyBoWyJkZWZhdWx0Il0ocixuLHQsci5fb3duZXIsaSk7YS5vbkNoYW5nZShmdW5jdGlvbihlKXtyLl9vbkNoYW5nZShlLHtwYXRoOm8sY2hpbGRJZDpufSl9KSxyLl9jaGlsZHJlbk9iamVjdHNbbl09YSxlKGEpfSl9fSx7a2V5OiJvbkFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleToiX29uQ2hpbGRDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2U7Y29uc29sZS5sb2coImNyZWF0ZS1vYnNlcnZlci1jaGlsZCggIit0Ll9vd25lcisiICk6ICIsZSk7dmFyIG49bmV3IGhbImRlZmF1bHQiXSh0LHIsZS5ib2R5LnZhbHVlKTt0Ll9jaGlsZHJlbk9iamVjdHNbcl09bixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNvdXJjZTp0Ll9vd25lcn19KX0pO3ZhciBvPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTplLmJvZHkudmFsdWUsY2hpbGRJZDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX07dC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJihjb25zb2xlLmxvZygiQURELUNISUxEUkVOLUVWRU5UOiAiLG8pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pKX19LHtrZXk6Il9vbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rKywib24iPT09ci5fc3RhdHVzKXt2YXIgbj17dHlwZToidXBkYXRlIixmcm9tOnIuX3VybCx0bzpyLl91cmwrIi9jaGFuZ2VzIixib2R5Ont2ZXJzaW9uOnIuX3ZlcnNpb24sc291cmNlOnIuX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PWQuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PWQuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1kLkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAseS5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT1kLk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBjPWkub2JqLHU9aS5sYXN0O2Muc3BsaWNlKHUsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCIuL0RhdGFPYmplY3RDaGlsZCI6OTQsIi4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1lKCIuL1N5bmNPYmplY3QiKSx1PW4oYyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxzKXsoMCxpWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9wYXJlbnQ9dCxhLl9jaGlsZElkPXIsYS5fb3duZXI9byxhLl9tc2dJZD1zLGEuX3N5bmNPYmo9bmV3IHVbImRlZmF1bHQiXShuKSxhLl9idXM9dC5fYnVzLGEuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0Ijo5OCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4vRGF0YU9iamVjdENoaWxkIiksaj1uKG0pLCQ9e0FOWToiYW55IixTVEFSVDoic3RhcnQiLEVYQUNUOiJleGFjdCJ9LHc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLHMsYyxsKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGY9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8scy5kYXRhLGMpKSxkPWY7cmV0dXJuIGQuX3ZlcnNpb249bCxkLl9maWx0ZXJzPXt9LGQuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtkLl9vbkZpbHRlcihlKX0pLCgwLGlbImRlZmF1bHQiXSkocy5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cy5jaGlsZHJlbnNbZV07ZC5fY2hpbGRyZW5PYmplY3RzW2VdPW5ldyBqWyJkZWZhdWx0Il0oZCxlLHQpfSksZC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxmfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsKyIvY2hhbmdlcyIsZnVuY3Rpb24odCl7InVwZGF0ZSI9PT10LnR5cGUmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTokLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9JC5BTlk6KG4udHlwZT0kLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fZmlsdGVyc1tyXTtuLnR5cGU9PT0kLkFOWT9uLmNhbGxiYWNrKGUpOm4udHlwZT09PSQuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihyKSYmbi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLkVYQUNUJiZlLmZpZWxkPT09ciYmbi5jYWxsYmFjayhlKX0pfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT13LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0Ijo5MywiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjoxNX1dLDk2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksaj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGM9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8saSxzKSksbD1jO3JldHVybiBsLl9zdWJzY3JpcHRpb25zPXt9LGwuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrcisiLVNFTkQ6ICIsZSksbC5fb25DaGFuZ2UoZSl9KSxsLl9hbGxvY2F0ZUxpc3RlbmVycygpLGN9cmV0dXJuKDAsdlsiZGVmYXVsdCJdKSh0LGUpLCgwLGZbImRlZmF1bHQiXSkodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LSIrZS5fdXJsKyItUkNWOiAiLHQpLHQudHlwZSl7Y2FzZSJyZXNwb25zZSI6ZS5fb25SZXNwb25zZSh0KTticmVhaztjYXNlInJlYWQiOmUuX29uUmVhZCh0KX19KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJpbnZpdGVPYnNlcnZlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToiY3JlYXRlIixmcm9tOnQuX3N5bmNoZXIuX293bmVyLHRvOnQuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTp0Ll91cmwsc2NoZW1hOnQuX3NjaGVtYSx2YWx1ZTp0Ll9zeW5jT2JqLmRhdGEsYXV0aG9yaXNlOmV9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJvblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVhZEhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2NlcHQ6ZnVuY3Rpb24oKXt2YXIgbj17dXJsOnIsc3RhdHVzOiJvbiJ9O3QuX3N1YnNjcmlwdGlvbnNbcl09bjt2YXIgbz17fTtyZXR1cm4oMCxpWyJkZWZhdWx0Il0pKHQuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10Ll9jaGlsZHJlbk9iamVjdHNbZV0uZGF0YTtvW2VdPSgwLG0uZGVlcENsb25lKShyKX0pLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzY2hlbWE6dC5fc2NoZW1hLHZlcnNpb246dC5fdmVyc2lvbix2YWx1ZTp7ZGF0YTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKSxjaGlsZHJlbnM6b319fSksbn0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOnJ9fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiU1VCU0NSSVBUSU9OLUVWRU5UOiAiLG4pLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihuKSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5mcm9tLG49dC5fc3Vic2NyaXB0aW9uc1tyXTtkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXTt2YXIgbz17dHlwZTplLmJvZHkudHlwZSx1cmw6cixvYmplY3Q6bn07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlVOLVNVQlNDUklQVElPTi1FVkVOVDogIixvKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobykpfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKGNvbnNvbGUubG9nKCJSRVNQT05TRS1FVkVOVDogIixyKSx0Ll9vblJlc3BvbnNlSGFuZGxlcihyKSl9fSx7a2V5OiJfb25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sYWNjZXB0OmZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOigwLG0uZGVlcENsb25lKSh0LmRhdGEpfX0pfSxyZWplY3Q6ZnVuY3Rpb24ocil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAxLGRlc2M6cn19KX19O3QuX29uUmVhZEhhbmRsZXImJihjb25zb2xlLmxvZygiUkVBRC1FVkVOVDogIixyKSx0Ll9vblJlYWRIYW5kbGVyKHIpKX19LHtrZXk6InN1YnNjcmlwdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1qLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Ijo5MywiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBzPXRoaXM7cy5fb3duZXI9dCxzLl91cmw9cixzLl9idXM9bixzLl9jaGlsZHJlbj1vLHMuX2NoYW5nZXM9W10scy5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4oMCxhWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7clsiZGVmYXVsdCJdPWMsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5PYmplY3RUeXBlPXIuQ2hhbmdlVHlwZT12b2lkIDA7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksdT1uKGMpLGw9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIHI9dGhpcztyLl9vYnNlcnZlcnM9W10sci5fZmlsdGVycz17fSx0P3IuX2RhdGE9KDAsbC5kZWVwQ2xvbmUpKHQpOnIuX2RhdGE9e30sci5faW50ZXJuYWxPYnNlcnZlKG5ldyBkLHIuX2RhdGEpfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToib2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSl9fSx7a2V5OiJmaW5kIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIuIik7cmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQodCl9fSx7a2V5OiJmaW5kQmVmb3JlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxyPWUuc3BsaXQoIi4iKTtyZXR1cm4gdC5sYXN0PXIucG9wKCksdC5vYmo9dGhpcy5fZmluZFdpdGhTcGxpdChyKSx0fX0se2tleToiX2ZpbmRXaXRoU3BsaXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt0PXRbZV19KSx0fX0se2tleToiX2ZpcmVFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfX0se2tleToiX2lzT2JzZXJ2YWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1PYmplY3R8fGUuY29uc3RydWN0b3I9PT1BcnJheX19LHtrZXk6Il9pbnRlcm5hbE9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBuPWZ1bmN0aW9uKHQpe3IuX29uQ2hhbmdlcyhlLHQpfTtpZih0LmNvbnN0cnVjdG9yPT09T2JqZWN0KXtPYmplY3Qub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgbyBpbiB0KXIuX2lzT2JzZXJ2YWJsZSh0W29dKSYmci5faW50ZXJuYWxPYnNlcnZlKGVbIm5ldyJdKG8pLHRbb10pfWVsc2UgaWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5KXtBcnJheS5vYnNlcnZlKHQsbik7Zm9yKHZhciBpIGluIHQpaWYoci5faXNPYnNlcnZhYmxlKHRbaV0pKXt2YXIgcz1lWyJuZXciXShuZXcgcCh0W2ldLGkpKTtyLl9pbnRlcm5hbE9ic2VydmUocyx0W2ldKX19fX19LHtrZXk6Il9vbkNoYW5nZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztmb3IodmFyIG4gaW4gdCl7dmFyIG89dFtuXS5vYmplY3QsaT12b2lkIDA7aWYoby5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmKGk9aC5PQkpFQ1QpLG8uY29uc3RydWN0b3I9PT1BcnJheSYmKGk9aC5BUlJBWSksInNwbGljZSI9PT10W25dLnR5cGUpIWZ1bmN0aW9uKCl7dmFyIHM9dFtuXS5pbmRleCxhPWVbIm5ldyJdKCIiK3MpLGM9YS50b1N0cmluZygpLHU9dFtuXS5yZW1vdmVkLmxlbmd0aDtpZigwIT09dSl7dmFyIGY9dFtuXS5yZW1vdmVkO2YuZm9yRWFjaChmdW5jdGlvbih0LG4pe3IuX2lzT2JzZXJ2YWJsZSh0KSYmZS5yZW1vdmVJbmRleChzK24pfSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmMsZGF0YTp1fSl9dmFyIGQ9dFtuXS5hZGRlZENvdW50O2lmKDAhPT1kKXt2YXIgaD1vLnNsaWNlKHMscytkKTtoLmZvckVhY2goZnVuY3Rpb24odCxuKXtpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBvPWVbIm5ldyJdKG5ldyBwKHQscytuKSk7ci5faW50ZXJuYWxPYnNlcnZlKG8sdCl9fSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLkFERCxvVHlwZTppLGZpZWxkOmMsZGF0YTooMCxsLmRlZXBDbG9uZSkoaCl9KX1zIT09by5sZW5ndGgtMSYmZS5yZUluZGV4RnJvbShvKX0oKTtlbHNle3ZhciBzPWVbIm5ldyJdKHRbbl0ubmFtZSksYT1zLnRvU3RyaW5nKCk7aWYoLTEhPT1hLmluZGV4T2YoIlN5bWJvbCIpKWNvbnRpbnVlO3ZhciBjPW9bdFtuXS5uYW1lXTsidXBkYXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlVQREFURSxvVHlwZTppLGZpZWxkOmEsZGF0YTooMCxsLmRlZXBDbG9uZSkoYyl9KSwiYWRkIj09PXRbbl0udHlwZSYmKHRoaXMuX2ludGVybmFsT2JzZXJ2ZShzLGMpLHRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSkpLCJkZWxldGUiPT09dFtuXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuUkVNT1ZFLG9UeXBlOmksZmllbGQ6YX0pfX19fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksZX0oKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLl9wYXRoPVtdLHRoaXMuX29ic2VydmFibGVzPXt9fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToicmVtb3ZlSW5kZXgiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9vYnNlcnZhYmxlc1tlXX19LHtrZXk6InJlSW5kZXhGcm9tIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOygwLGlbImRlZmF1bHQiXSkodGhpcy5fb2JzZXJ2YWJsZXMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fb2JzZXJ2YWJsZXNbcl0sbz1lLmluZGV4T2Yobi5vYmopO24uaWR4IT1vJiYobi5pZHg9byxkZWxldGUgdC5fb2JzZXJ2YWJsZXNbcl0sdC5fb2JzZXJ2YWJsZXNbb109bil9KX19LHtrZXk6Im5ldyIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5jb25zdHJ1Y3Rvcj09cCYmKHRoaXMuX29ic2VydmFibGVzW2UuaWR4XT1lKTt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIHQuX3BhdGgucHVzaChlKSx0fX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9wYXRoLnB1c2goZSl9KSx0fX0se2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbih0LHIpezA9PT1yP2U9dC50b1N0cmluZygpOmUrPSIuIit0LnRvU3RyaW5nKCl9KSxlfX1dKSxlfSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpLHRoaXMub2JqPXQsdGhpcy5pZHg9cn1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGI9ci5DaGFuZ2VUeXBlPXtVUERBVEU6InVwZGF0ZSIsQUREOiJhZGQiLFJFTU9WRToicmVtb3ZlIn0saD1yLk9iamVjdFR5cGU9e09CSkVDVDoib2JqZWN0IixBUlJBWToiYXJyYXkifTtyWyJkZWZhdWx0Il09Zn0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5OTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4vRGF0YU9iamVjdFJlcG9ydGVyIiksZj1uKGwpLGQ9ZSgiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxwPW4oZCksYj1lKCIuL0RhdGFQcm92aXNpb25hbCIpLGg9bihiKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBvPXRoaXM7by5fb3duZXI9dCxvLl9idXM9cixvLl9zdWJVUkw9bi5ydW50aW1lVVJMKyIvc20iLG8uX3JlcG9ydGVycz17fSxvLl9vYnNlcnZlcnM9e30sby5fcHJvdmlzaW9uYWxzPXt9LHIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtpZihlLmZyb20hPT10KXN3aXRjaChjb25zb2xlLmxvZygiU3luY2hlci1SQ1Y6ICIsZSksZS50eXBlKXtjYXNlImZvcndhcmQiOm8uX29uRm9yd2FyZChlKTticmVhaztjYXNlImNyZWF0ZSI6by5fb25SZW1vdGVDcmVhdGUoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOm8uX29uUmVtb3RlRGVsZXRlKGUpfX0pfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiY3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyLnJlcG9ydGVyPW4uX293bmVyLHIuc2NoZW1hPWU7dmFyIG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6cixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKHQsaSl7bi5fYnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24obyl7aWYoY29uc29sZS5sb2coImNyZWF0ZS1yZXNwb25zZTogIixvKSwyMDA9PT1vLmJvZHkuY29kZSl7dmFyIHM9by5ib2R5LnJlc291cmNlLGE9bmV3IGZbImRlZmF1bHQiXShuLHMsZSwib24iLHIsby5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTtuLl9yZXBvcnRlcnNbc109YSx0KGEpfWVsc2UgaShvLmJvZHkuZGVzYyl9KX0pfX0se2tleToic3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX293bmVyLHRvOnIuX3N1YlVSTCxib2R5OntzY2hlbWE6ZSxyZXNvdXJjZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24obyxpKXtyLl9idXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihuKXtjb25zb2xlLmxvZygic3Vic2NyaWJlLXJlc3BvbnNlOiAiLG4pO3ZhciBzPXIuX3Byb3Zpc2lvbmFsc1t0XTtpZihkZWxldGUgci5fcHJvdmlzaW9uYWxzW3RdLHMmJnMuX3JlbGVhc2VMaXN0ZW5lcnMoKSxuLmJvZHkuY29kZTwyMDApcz1uZXcgaFsiZGVmYXVsdCJdKHIuX293bmVyLHQsci5fYnVzLG4uYm9keS5jaGlsZHJlblJlc291cmNlcyksci5fcHJvdmlzaW9uYWxzW3RdPXM7ZWxzZSBpZigyMDA9PT1uLmJvZHkuY29kZSl7dmFyIGE9bmV3IHBbImRlZmF1bHQiXShyLHQsZSwib24iLG4uYm9keS52YWx1ZSxzLmNoaWxkcmVuLG4uYm9keS52ZXJzaW9uKTtyLl9vYnNlcnZlcnNbdF09YSxvKGEpLHMuYXBwbHkoYSl9ZWxzZSBpKG4uYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJyZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InJlYWQiLGZyb206dC5fb3duZXIsdG86ZX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSxuKXt0Ll9idXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbih0KXtjb25zb2xlLmxvZygicmVhZC1yZXNwb25zZTogIix0KSwyMDA9PT10LmJvZHkuY29kZT9lKHQuYm9keS52YWx1ZSk6bih0LmJvZHkuZGVzYyl9KX0pfX0se2tleToib25Ob3RpZmljYXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcj1lfX0se2tleToiX29uRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuX3JlcG9ydGVyc1tlLmJvZHkudG9dO3IuX29uRm9yd2FyZChlKX19LHtrZXk6Il9vblJlbW90ZUNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbS5zbGljZSgwLC0xMyksbj17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixuKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdO2lmKG4pe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBvPTIwMDtyJiYobz1yKSwyMDA9PT1vJiZuWyJkZWxldGUiXSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixvKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobykpfWVsc2UgdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6Im93bmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXJ9fSx7a2V5OiJyZXBvcnRlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXBvcnRlcnN9fSx7a2V5OiJvYnNlcnZlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXksdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjo5NiwiLi9EYXRhUHJvdmlzaW9uYWwiOjk3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDEwMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSl7aWYoIWUpdGhyb3cgRXJyb3IoIlVSTCBpcyBuZWVkZWQgdG8gc3BsaXQiKTt2YXIgdD0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSxyPSIkMSwkMiwkMyIsbj1lLnJlcGxhY2UodCxyKS5zcGxpdCgiLCIpO25bMF09PT1lJiYoblswXT0iaHR0cHMiLG5bMV09ZSk7dmFyIG89e3R5cGU6blswXSxkb21haW46blsxXSxpZGVudGl0eTpuWzJdfTtyZXR1cm4gb31mdW5jdGlvbiBpKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpLHI9e3VzZXJuYW1lOmUuc3Vic3RyaW5nKDAsdCksZG9tYWluOmUuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCl9O3JldHVybiByfWZ1bmN0aW9uIHMoZSl7cmV0dXJuISgoMCxiWyJkZWZhdWx0Il0pKGUpLmxlbmd0aD4wKX1mdW5jdGlvbiBhKGUpe3JldHVybiBlP0pTT04ucGFyc2UoKDAsZFsiZGVmYXVsdCJdKShlKSk6dm9pZCAwfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIik7cmV0dXJuInVzZXI6Ly8iK2Uuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsdCl9ZnVuY3Rpb24gdShlKXt2YXIgdD1vKGUpO3JldHVybiB0LmlkZW50aXR5LnJlcGxhY2UoIi8iLCIiKSsiQCIrdC5kb21haW59ZnVuY3Rpb24gbChlKXtpZigidXNlcjovLyI9PT1lLnN1YnN0cmluZygwLDcpKXt2YXIgdD1vKGUpO2lmKHQuZG9tYWluJiZ0LmlkZW50aXR5KXJldHVybiBlO3Rocm93InVzZXJVUkwgd2l0aCB3cm9uZyBmb3JtYXQifXJldHVybiBjKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgZj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiKSxkPW4oZikscD1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxiPW4ocCk7ci5kaXZpZGVVUkw9byxyLmRpdmlkZUVtYWlsPWksci5lbXB0eU9iamVjdD1zLHIuZGVlcENsb25lPWEsci5nZXRVc2VyVVJMRnJvbUVtYWlsPWMsci5nZXRVc2VyRW1haWxGcm9tVVJMPXUsci5jb252ZXJ0VG9Vc2VyVVJMPWx9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IjoyLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjd9XX0se30sWzkyXSkoOTIpfSk7CgoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKiEKICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMcwogKiBJUHY2IFN1cHBvcnQKICoKICogVmVyc2lvbjogMS4xOC4xCiAqCiAqIEF1dGhvcjogUm9kbmV5IFJlaG0KICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5pby9VUkkuanMvCiAqCiAqIExpY2Vuc2VkIHVuZGVyCiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZQogKgogKi8KCihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICd1c2Ugc3RyaWN0JzsKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanMKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAvLyBOb2RlCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLgogICAgZGVmaW5lKGZhY3RvcnkpOwogIH0gZWxzZSB7CiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQogICAgcm9vdC5JUHY2ID0gZmFjdG9yeShyb290KTsKICB9Cn0odGhpcywgZnVuY3Rpb24gKHJvb3QpIHsKICAndXNlIHN0cmljdCc7CgogIC8qCiAgdmFyIF9pbiA9ICJmZTgwOjAwMDA6MDAwMDowMDAwOjAyMDQ6NjFmZjpmZTlkOmYxNTYiOwogIHZhciBfb3V0ID0gSVB2Ni5iZXN0KF9pbik7CiAgdmFyIF9leHBlY3RlZCA9ICJmZTgwOjoyMDQ6NjFmZjpmZTlkOmYxNTYiOwoKICBjb25zb2xlLmxvZyhfaW4sIF9vdXQsIF9leHBlY3RlZCwgX291dCA9PT0gX2V4cGVjdGVkKTsKICAqLwoKICAvLyBzYXZlIGN1cnJlbnQgSVB2NiB2YXJpYWJsZSwgaWYgYW55CiAgdmFyIF9JUHY2ID0gcm9vdCAmJiByb290LklQdjY7CgogIGZ1bmN0aW9uIGJlc3RQcmVzZW50YXRpb24oYWRkcmVzcykgewogICAgLy8gYmFzZWQgb246CiAgICAvLyBKYXZhc2NyaXB0IHRvIHRlc3QgYW4gSVB2NiBhZGRyZXNzIGZvciBwcm9wZXIgZm9ybWF0LCBhbmQgdG8KICAgIC8vIHByZXNlbnQgdGhlICJiZXN0IHRleHQgcmVwcmVzZW50YXRpb24iIGFjY29yZGluZyB0byBJRVRGIERyYWZ0IFJGQyBhdAogICAgLy8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi02bWFuLXRleHQtYWRkci1yZXByZXNlbnRhdGlvbi0wNAogICAgLy8gOCBGZWIgMjAxMCBSaWNoIEJyb3duLCBEYXJ0d2FyZSwgTExDCiAgICAvLyBQbGVhc2UgZmVlbCBmcmVlIHRvIHVzZSB0aGlzIGNvZGUgYXMgbG9uZyBhcyB5b3UgcHJvdmlkZSBhIGxpbmsgdG8KICAgIC8vIGh0dHA6Ly93d3cuaW50ZXJtYXBwZXIuY29tCiAgICAvLyBodHRwOi8vaW50ZXJtYXBwZXIuY29tL3N1cHBvcnQvdG9vbHMvSVBWNi1WYWxpZGF0b3IuYXNweAogICAgLy8gaHR0cDovL2Rvd25sb2FkLmRhcnR3YXJlLmNvbS90aGlyZHBhcnR5L2lwdjZ2YWxpZGF0b3IuanMKCiAgICB2YXIgX2FkZHJlc3MgPSBhZGRyZXNzLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgc2VnbWVudHMgPSBfYWRkcmVzcy5zcGxpdCgnOicpOwogICAgdmFyIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDsKICAgIHZhciB0b3RhbCA9IDg7CgogICAgLy8gdHJpbSBjb2xvbnMgKDo6IG9yIDo6YTpiOmPigKYgb3Ig4oCmYTpiOmM6OikKICAgIGlmIChzZWdtZW50c1swXSA9PT0gJycgJiYgc2VnbWVudHNbMV0gPT09ICcnICYmIHNlZ21lbnRzWzJdID09PSAnJykgewogICAgICAvLyBtdXN0IGhhdmUgYmVlbiA6OgogICAgICAvLyByZW1vdmUgZmlyc3QgdHdvIGl0ZW1zCiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7CiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7CiAgICB9IGVsc2UgaWYgKHNlZ21lbnRzWzBdID09PSAnJyAmJiBzZWdtZW50c1sxXSA9PT0gJycpIHsKICAgICAgLy8gbXVzdCBoYXZlIGJlZW4gOjp4eHh4CiAgICAgIC8vIHJlbW92ZSB0aGUgZmlyc3QgaXRlbQogICAgICBzZWdtZW50cy5zaGlmdCgpOwogICAgfSBlbHNlIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXSA9PT0gJycgJiYgc2VnbWVudHNbbGVuZ3RoIC0gMl0gPT09ICcnKSB7CiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIHh4eHg6OgogICAgICBzZWdtZW50cy5wb3AoKTsKICAgIH0KCiAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7CgogICAgLy8gYWRqdXN0IHRvdGFsIHNlZ21lbnRzIGZvciBJUHY0IHRyYWlsZXIKICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXS5pbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICAgIC8vIGZvdW5kIGEgIi4iIHdoaWNoIG1lYW5zIElQdjQKICAgICAgdG90YWwgPSA3OwogICAgfQoKICAgIC8vIGZpbGwgZW1wdHkgc2VnbWVudHMgdGhlbSB3aXRoICIwMDAwIgogICAgdmFyIHBvczsKICAgIGZvciAocG9zID0gMDsgcG9zIDwgbGVuZ3RoOyBwb3MrKykgewogICAgICBpZiAoc2VnbWVudHNbcG9zXSA9PT0gJycpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3MgPCB0b3RhbCkgewogICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAxLCAnMDAwMCcpOwogICAgICB3aGlsZSAoc2VnbWVudHMubGVuZ3RoIDwgdG90YWwpIHsKICAgICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAwLCAnMDAwMCcpOwogICAgICB9CiAgICB9CgogICAgLy8gc3RyaXAgbGVhZGluZyB6ZXJvcwogICAgdmFyIF9zZWdtZW50czsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWw7IGkrKykgewogICAgICBfc2VnbWVudHMgPSBzZWdtZW50c1tpXS5zcGxpdCgnJyk7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMyA7IGorKykgewogICAgICAgIGlmIChfc2VnbWVudHNbMF0gPT09ICcwJyAmJiBfc2VnbWVudHMubGVuZ3RoID4gMSkgewogICAgICAgICAgX3NlZ21lbnRzLnNwbGljZSgwLDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHNlZ21lbnRzW2ldID0gX3NlZ21lbnRzLmpvaW4oJycpOwogICAgfQoKICAgIC8vIGZpbmQgbG9uZ2VzdCBzZXF1ZW5jZSBvZiB6ZXJvZXMgYW5kIGNvYWxlc2NlIHRoZW0gaW50byBvbmUgc2VnbWVudAogICAgdmFyIGJlc3QgPSAtMTsKICAgIHZhciBfYmVzdCA9IDA7CiAgICB2YXIgX2N1cnJlbnQgPSAwOwogICAgdmFyIGN1cnJlbnQgPSAtMTsKICAgIHZhciBpbnplcm9lcyA9IGZhbHNlOwogICAgLy8gaTsgYWxyZWFkeSBkZWNsYXJlZAoKICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7CiAgICAgIGlmIChpbnplcm9lcykgewogICAgICAgIGlmIChzZWdtZW50c1tpXSA9PT0gJzAnKSB7CiAgICAgICAgICBfY3VycmVudCArPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbnplcm9lcyA9IGZhbHNlOwogICAgICAgICAgaWYgKF9jdXJyZW50ID4gX2Jlc3QpIHsKICAgICAgICAgICAgYmVzdCA9IGN1cnJlbnQ7CiAgICAgICAgICAgIF9iZXN0ID0gX2N1cnJlbnQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChzZWdtZW50c1tpXSA9PT0gJzAnKSB7CiAgICAgICAgICBpbnplcm9lcyA9IHRydWU7CiAgICAgICAgICBjdXJyZW50ID0gaTsKICAgICAgICAgIF9jdXJyZW50ID0gMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoX2N1cnJlbnQgPiBfYmVzdCkgewogICAgICBiZXN0ID0gY3VycmVudDsKICAgICAgX2Jlc3QgPSBfY3VycmVudDsKICAgIH0KCiAgICBpZiAoX2Jlc3QgPiAxKSB7CiAgICAgIHNlZ21lbnRzLnNwbGljZShiZXN0LCBfYmVzdCwgJycpOwogICAgfQoKICAgIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDsKCiAgICAvLyBhc3NlbWJsZSByZW1haW5pbmcgc2VnbWVudHMKICAgIHZhciByZXN1bHQgPSAnJzsKICAgIGlmIChzZWdtZW50c1swXSA9PT0gJycpICB7CiAgICAgIHJlc3VsdCA9ICc6JzsKICAgIH0KCiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgcmVzdWx0ICs9IHNlZ21lbnRzW2ldOwogICAgICBpZiAoaSA9PT0gbGVuZ3RoIC0gMSkgewogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICByZXN1bHQgKz0gJzonOwogICAgfQoKICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXSA9PT0gJycpIHsKICAgICAgcmVzdWx0ICs9ICc6JzsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gbm9Db25mbGljdCgpIHsKICAgIC8qanNoaW50IHZhbGlkdGhpczogdHJ1ZSAqLwogICAgaWYgKHJvb3QuSVB2NiA9PT0gdGhpcykgewogICAgICByb290LklQdjYgPSBfSVB2NjsKICAgIH0KICAKICAgIHJldHVybiB0aGlzOwogIH0KCiAgcmV0dXJuIHsKICAgIGJlc3Q6IGJlc3RQcmVzZW50YXRpb24sCiAgICBub0NvbmZsaWN0OiBub0NvbmZsaWN0CiAgfTsKfSkpOwoKfSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qIQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzCiAqIFNlY29uZCBMZXZlbCBEb21haW4gKFNMRCkgU3VwcG9ydAogKgogKiBWZXJzaW9uOiAxLjE4LjEKICoKICogQXV0aG9yOiBSb2RuZXkgUmVobQogKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy8KICoKICogTGljZW5zZWQgdW5kZXIKICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlCiAqCiAqLwoKKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7CiAgJ3VzZSBzdHJpY3QnOwogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qcwogIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHsKICAgIC8vIE5vZGUKICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuCiAgICBkZWZpbmUoZmFjdG9yeSk7CiAgfSBlbHNlIHsKICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICByb290LlNlY29uZExldmVsRG9tYWlucyA9IGZhY3Rvcnkocm9vdCk7CiAgfQp9KHRoaXMsIGZ1bmN0aW9uIChyb290KSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvLyBzYXZlIGN1cnJlbnQgU2Vjb25kTGV2ZWxEb21haW5zIHZhcmlhYmxlLCBpZiBhbnkKICB2YXIgX1NlY29uZExldmVsRG9tYWlucyA9IHJvb3QgJiYgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnM7CgogIHZhciBTTEQgPSB7CiAgICAvLyBsaXN0IG9mIGtub3duIFNlY29uZCBMZXZlbCBEb21haW5zCiAgICAvLyBjb252ZXJ0ZWQgbGlzdCBvZiBTTERzIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dhdmluZ21pbGxlci9zZWNvbmQtbGV2ZWwtZG9tYWlucwogICAgLy8gLS0tLQogICAgLy8gcHVibGljc3VmZml4Lm9yZyBpcyBtb3JlIGN1cnJlbnQgYW5kIGFjdHVhbGx5IHVzZWQgYnkgYSBjb3VwbGUgb2YgYnJvd3NlcnMgaW50ZXJuYWxseS4KICAgIC8vIGRvd25zaWRlIGlzIGl0IGFsc28gY29udGFpbnMgZG9tYWlucyBsaWtlICJkeW5kbnMub3JnIiAtIHdoaWNoIGlzIGZpbmUgZm9yIHRoZSBzZWN1cml0eQogICAgLy8gaXNzdWVzIGJyb3dzZXIgaGF2ZSB0byBkZWFsIHdpdGggKFNPUCBmb3IgY29va2llcywgZXRjKSAtIGJ1dCBpcyB3YXkgb3ZlcmJvYXJkIGZvciBVUkkuanMKICAgIC8vIC0tLS0KICAgIGxpc3Q6IHsKICAgICAgJ2FjJzonIGNvbSBnb3YgbWlsIG5ldCBvcmcgJywKICAgICAgJ2FlJzonIGFjIGNvIGdvdiBtaWwgbmFtZSBuZXQgb3JnIHBybyBzY2ggJywKICAgICAgJ2FmJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2FsJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdhbyc6JyBjbyBlZCBndiBpdCBvZyBwYiAnLAogICAgICAnYXInOicgY29tIGVkdSBnb2IgZ292IGludCBtaWwgbmV0IG9yZyB0dXIgJywKICAgICAgJ2F0JzonIGFjIGNvIGd2IG9yICcsCiAgICAgICdhdSc6JyBhc24gY29tIGNzaXJvIGVkdSBnb3YgaWQgbmV0IG9yZyAnLAogICAgICAnYmEnOicgY28gY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgcnMgdW5iaSB1bm1vIHVuc2EgdW50eiB1bnplICcsCiAgICAgICdiYic6JyBiaXogY28gY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnIHN0b3JlIHR2ICcsCiAgICAgICdiaCc6JyBiaXogY2MgY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdibic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdibyc6JyBjb20gZWR1IGdvYiBnb3YgaW50IG1pbCBuZXQgb3JnIHR2ICcsCiAgICAgICdicic6JyBhZG0gYWR2IGFnciBhbSBhcnEgYXJ0IGF0byBiIGJpbyBibG9nIGJtZCBjaW0gY25nIGNudCBjb20gY29vcCBlY24gZWR1IGVuZyBlc3AgZXRjIGV0aSBmYXIgZmxvZyBmbSBmbmQgZm90IGZzdCBnMTIgZ2dmIGdvdiBpbWIgaW5kIGluZiBqb3IganVzIGxlbCBtYXQgbWVkIG1pbCBtdXMgbmV0IG5vbSBub3QgbnRyIG9kbyBvcmcgcHBnIHBybyBwc2MgcHNpIHFzbCByZWMgc2xnIHNydiB0bXAgdHJkIHR1ciB0diB2ZXQgdmxvZyB3aWtpIHpsZyAnLAogICAgICAnYnMnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnYnonOicgZHUgZXQgb20gb3YgcmcgJywKICAgICAgJ2NhJzonIGFiIGJjIG1iIG5iIG5mIG5sIG5zIG50IG51IG9uIHBlIHFjIHNrIHlrICcsCiAgICAgICdjayc6JyBiaXogY28gZWR1IGdlbiBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdjbic6JyBhYyBhaCBiaiBjb20gY3EgZWR1IGZqIGdkIGdvdiBncyBneCBneiBoYSBoYiBoZSBoaSBobCBobiBqbCBqcyBqeCBsbiBtaWwgbmV0IG5tIG54IG9yZyBxaCBzYyBzZCBzaCBzbiBzeCB0aiB0dyB4aiB4eiB5biB6aiAnLAogICAgICAnY28nOicgY29tIGVkdSBnb3YgbWlsIG5ldCBub20gb3JnICcsCiAgICAgICdjcic6JyBhYyBjIGNvIGVkIGZpIGdvIG9yIHNhICcsCiAgICAgICdjeSc6JyBhYyBiaXogY29tIGVrbG9nZXMgZ292IGx0ZCBuYW1lIG5ldCBvcmcgcGFybGlhbWVudCBwcmVzcyBwcm8gdG0gJywKICAgICAgJ2RvJzonIGFydCBjb20gZWR1IGdvYiBnb3YgbWlsIG5ldCBvcmcgc2xkIHdlYiAnLAogICAgICAnZHonOicgYXJ0IGFzc28gY29tIGVkdSBnb3YgbmV0IG9yZyBwb2wgJywKICAgICAgJ2VjJzonIGNvbSBlZHUgZmluIGdvdiBpbmZvIG1lZCBtaWwgbmV0IG9yZyBwcm8gJywKICAgICAgJ2VnJzonIGNvbSBlZHUgZXVuIGdvdiBtaWwgbmFtZSBuZXQgb3JnIHNjaSAnLAogICAgICAnZXInOicgY29tIGVkdSBnb3YgaW5kIG1pbCBuZXQgb3JnIHJvY2hlc3QgdyAnLAogICAgICAnZXMnOicgY29tIGVkdSBnb2Igbm9tIG9yZyAnLAogICAgICAnZXQnOicgYml6IGNvbSBlZHUgZ292IGluZm8gbmFtZSBuZXQgb3JnICcsCiAgICAgICdmaic6JyBhYyBiaXogY29tIGluZm8gbWlsIG5hbWUgbmV0IG9yZyBwcm8gJywKICAgICAgJ2ZrJzonIGFjIGNvIGdvdiBuZXQgbm9tIG9yZyAnLAogICAgICAnZnInOicgYXNzbyBjb20gZiBnb3V2IG5vbSBwcmQgcHJlc3NlIHRtICcsCiAgICAgICdnZyc6JyBjbyBuZXQgb3JnICcsCiAgICAgICdnaCc6JyBjb20gZWR1IGdvdiBtaWwgb3JnICcsCiAgICAgICdnbic6JyBhYyBjb20gZ292IG5ldCBvcmcgJywKICAgICAgJ2dyJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdndCc6JyBjb20gZWR1IGdvYiBpbmQgbWlsIG5ldCBvcmcgJywKICAgICAgJ2d1JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2hrJzonIGNvbSBlZHUgZ292IGlkdiBuZXQgb3JnICcsCiAgICAgICdodSc6JyAyMDAwIGFncmFyIGJvbHQgY2FzaW5vIGNpdHkgY28gZXJvdGljYSBlcm90aWthIGZpbG0gZm9ydW0gZ2FtZXMgaG90ZWwgaW5mbyBpbmdhdGxhbiBqb2dhc3oga29ueXZlbG8gbGFrYXMgbWVkaWEgbmV3cyBvcmcgcHJpdiByZWtsYW0gc2V4IHNob3Agc3BvcnQgc3VsaSBzemV4IHRtIHRvenNkZSB1dGF6YXMgdmlkZW8gJywKICAgICAgJ2lkJzonIGFjIGNvIGdvIG1pbCBuZXQgb3Igc2NoIHdlYiAnLAogICAgICAnaWwnOicgYWMgY28gZ292IGlkZiBrMTIgbXVuaSBuZXQgb3JnICcsCiAgICAgICdpbic6JyBhYyBjbyBlZHUgZXJuZXQgZmlybSBnZW4gZ292IGkgaW5kIG1pbCBuZXQgbmljIG9yZyByZXMgJywKICAgICAgJ2lxJzonIGNvbSBlZHUgZ292IGkgbWlsIG5ldCBvcmcgJywKICAgICAgJ2lyJzonIGFjIGNvIGRuc3NlYyBnb3YgaSBpZCBuZXQgb3JnIHNjaCAnLAogICAgICAnaXQnOicgZWR1IGdvdiAnLAogICAgICAnamUnOicgY28gbmV0IG9yZyAnLAogICAgICAnam8nOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJywKICAgICAgJ2pwJzonIGFjIGFkIGNvIGVkIGdvIGdyIGxnIG5lIG9yICcsCiAgICAgICdrZSc6JyBhYyBjbyBnbyBpbmZvIG1lIG1vYmkgbmUgb3Igc2MgJywKICAgICAgJ2toJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnIHBlciAnLAogICAgICAna2knOicgYml6IGNvbSBkZSBlZHUgZ292IGluZm8gbW9iIG5ldCBvcmcgdGVsICcsCiAgICAgICdrbSc6JyBhc3NvIGNvbSBjb29wIGVkdSBnb3V2IGsgbWVkZWNpbiBtaWwgbm9tIG5vdGFpcmVzIHBoYXJtYWNpZW5zIHByZXNzZSB0bSB2ZXRlcmluYWlyZSAnLAogICAgICAna24nOicgZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdrcic6JyBhYyBidXNhbiBjaHVuZ2J1ayBjaHVuZ25hbSBjbyBkYWVndSBkYWVqZW9uIGVzIGdhbmd3b24gZ28gZ3dhbmdqdSBneWVvbmdidWsgZ3llb25nZ2kgZ3llb25nbmFtIGhzIGluY2hlb24gamVqdSBqZW9uYnVrIGplb25uYW0gayBrZyBtaWwgbXMgbmUgb3IgcGUgcmUgc2Mgc2VvdWwgdWxzYW4gJywKICAgICAgJ2t3JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2t5JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2t6JzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdsYic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdsayc6JyBhc3NuIGNvbSBlZHUgZ292IGdycCBob3RlbCBpbnQgbHRkIG5ldCBuZ28gb3JnIHNjaCBzb2Mgd2ViICcsCiAgICAgICdscic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdsdic6JyBhc24gY29tIGNvbmYgZWR1IGdvdiBpZCBtaWwgbmV0IG9yZyAnLAogICAgICAnbHknOicgY29tIGVkdSBnb3YgaWQgbWVkIG5ldCBvcmcgcGxjIHNjaCAnLAogICAgICAnbWEnOicgYWMgY28gZ292IG0gbmV0IG9yZyBwcmVzcyAnLAogICAgICAnbWMnOicgYXNzbyB0bSAnLAogICAgICAnbWUnOicgYWMgY28gZWR1IGdvdiBpdHMgbmV0IG9yZyBwcml2ICcsCiAgICAgICdtZyc6JyBjb20gZWR1IGdvdiBtaWwgbm9tIG9yZyBwcmQgdG0gJywKICAgICAgJ21rJzonIGNvbSBlZHUgZ292IGluZiBuYW1lIG5ldCBvcmcgcHJvICcsCiAgICAgICdtbCc6JyBjb20gZWR1IGdvdiBuZXQgb3JnIHByZXNzZSAnLAogICAgICAnbW4nOicgZWR1IGdvdiBvcmcgJywKICAgICAgJ21vJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ210JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ212JzonIGFlcm8gYml6IGNvbSBjb29wIGVkdSBnb3YgaW5mbyBpbnQgbWlsIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvICcsCiAgICAgICdtdyc6JyBhYyBjbyBjb20gY29vcCBlZHUgZ292IGludCBtdXNldW0gbmV0IG9yZyAnLAogICAgICAnbXgnOicgY29tIGVkdSBnb2IgbmV0IG9yZyAnLAogICAgICAnbXknOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJywKICAgICAgJ25mJzonIGFydHMgY29tIGZpcm0gaW5mbyBuZXQgb3RoZXIgcGVyIHJlYyBzdG9yZSB3ZWIgJywKICAgICAgJ25nJzonIGJpeiBjb20gZWR1IGdvdiBtaWwgbW9iaSBuYW1lIG5ldCBvcmcgc2NoICcsCiAgICAgICduaSc6JyBhYyBjbyBjb20gZWR1IGdvYiBtaWwgbmV0IG5vbSBvcmcgJywKICAgICAgJ25wJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICducic6JyBiaXogY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdvbSc6JyBhYyBiaXogY28gY29tIGVkdSBnb3YgbWVkIG1pbCBtdXNldW0gbmV0IG9yZyBwcm8gc2NoICcsCiAgICAgICdwZSc6JyBjb20gZWR1IGdvYiBtaWwgbmV0IG5vbSBvcmcgc2xkICcsCiAgICAgICdwaCc6JyBjb20gZWR1IGdvdiBpIG1pbCBuZXQgbmdvIG9yZyAnLAogICAgICAncGsnOicgYml6IGNvbSBlZHUgZmFtIGdvYiBnb2sgZ29uIGdvcCBnb3MgZ292IG5ldCBvcmcgd2ViICcsCiAgICAgICdwbCc6JyBhcnQgYmlhbHlzdG9rIGJpeiBjb20gZWR1IGdkYSBnZGFuc2sgZ29yem93IGdvdiBpbmZvIGthdG93aWNlIGtyYWtvdyBsb2R6IGx1YmxpbiBtaWwgbmV0IG5nbyBvbHN6dHluIG9yZyBwb3puYW4gcHdyIHJhZG9tIHNsdXBzayBzemN6ZWNpbiB0b3J1biB3YXJzemF3YSB3YXcgd3JvYyB3cm9jbGF3IHpnb3JhICcsCiAgICAgICdwcic6JyBhYyBiaXogY29tIGVkdSBlc3QgZ292IGluZm8gaXNsYSBuYW1lIG5ldCBvcmcgcHJvIHByb2YgJywKICAgICAgJ3BzJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgcGxvIHNlYyAnLAogICAgICAncHcnOicgYmVsYXUgY28gZWQgZ28gbmUgb3IgJywKICAgICAgJ3JvJzonIGFydHMgY29tIGZpcm0gaW5mbyBub20gbnQgb3JnIHJlYyBzdG9yZSB0bSB3d3cgJywKICAgICAgJ3JzJzonIGFjIGNvIGVkdSBnb3YgaW4gb3JnICcsCiAgICAgICdzYic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdzYyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdzaCc6JyBjbyBjb20gZWR1IGdvdiBuZXQgbm9tIG9yZyAnLAogICAgICAnc2wnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnc3QnOicgY28gY29tIGNvbnN1bGFkbyBlZHUgZW1iYWl4YWRhIGdvdiBtaWwgbmV0IG9yZyBwcmluY2lwZSBzYW90b21lIHN0b3JlICcsCiAgICAgICdzdic6JyBjb20gZWR1IGdvYiBvcmcgcmVkICcsCiAgICAgICdzeic6JyBhYyBjbyBvcmcgJywKICAgICAgJ3RyJzonIGF2IGJicyBiZWwgYml6IGNvbSBkciBlZHUgZ2VuIGdvdiBpbmZvIGsxMiBuYW1lIG5ldCBvcmcgcG9sIHRlbCB0c2sgdHYgd2ViICcsCiAgICAgICd0dCc6JyBhZXJvIGJpeiBjYXQgY28gY29tIGNvb3AgZWR1IGdvdiBpbmZvIGludCBqb2JzIG1pbCBtb2JpIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvIHRlbCB0cmF2ZWwgJywKICAgICAgJ3R3JzonIGNsdWIgY29tIGViaXogZWR1IGdhbWUgZ292IGlkdiBtaWwgbmV0IG9yZyAnLAogICAgICAnbXUnOicgYWMgY28gY29tIGdvdiBuZXQgb3Igb3JnICcsCiAgICAgICdteic6JyBhYyBjbyBlZHUgZ292IG9yZyAnLAogICAgICAnbmEnOicgY28gY29tICcsCiAgICAgICdueic6JyBhYyBjbyBjcmkgZ2VlayBnZW4gZ292dCBoZWFsdGggaXdpIG1hb3JpIG1pbCBuZXQgb3JnIHBhcmxpYW1lbnQgc2Nob29sICcsCiAgICAgICdwYSc6JyBhYm8gYWMgY29tIGVkdSBnb2IgaW5nIG1lZCBuZXQgbm9tIG9yZyBzbGQgJywKICAgICAgJ3B0JzonIGNvbSBlZHUgZ292IGludCBuZXQgbm9tZSBvcmcgcHVibCAnLAogICAgICAncHknOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgJywKICAgICAgJ3FhJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdyZSc6JyBhc3NvIGNvbSBub20gJywKICAgICAgJ3J1JzonIGFjIGFkeWdleWEgYWx0YWkgYW11ciBhcmtoYW5nZWxzayBhc3RyYWtoYW4gYmFzaGtpcmlhIGJlbGdvcm9kIGJpciBicnlhbnNrIGJ1cnlhdGlhIGNiZyBjaGVsIGNoZWx5YWJpbnNrIGNoaXRhIGNodWtvdGthIGNodXZhc2hpYSBjb20gZGFnZXN0YW4gZS1idXJnIGVkdSBnb3YgZ3Jvem55IGludCBpcmt1dHNrIGl2YW5vdm8gaXpoZXZzayBqYXIgam9zaGthci1vbGEga2FsbXlraWEga2FsdWdhIGthbWNoYXRrYSBrYXJlbGlhIGthemFuIGtjaHIga2VtZXJvdm8ga2hhYmFyb3ZzayBraGFrYXNzaWEga2h2IGtpcm92IGtvZW5pZyBrb21pIGtvc3Ryb21hIGtyYW5veWFyc2sga3ViYW4ga3VyZ2FuIGt1cnNrIGxpcGV0c2sgbWFnYWRhbiBtYXJpIG1hcmktZWwgbWFyaW5lIG1pbCBtb3Jkb3ZpYSBtb3NyZWcgbXNrIG11cm1hbnNrIG5hbGNoaWsgbmV0IG5ub3Ygbm92IG5vdm9zaWJpcnNrIG5zayBvbXNrIG9yZW5idXJnIG9yZyBvcnlvbCBwZW56YSBwZXJtIHBwIHBza292IHB0eiBybmQgcnlhemFuIHNha2hhbGluIHNhbWFyYSBzYXJhdG92IHNpbWJpcnNrIHNtb2xlbnNrIHNwYiBzdGF2cm9wb2wgc3R2IHN1cmd1dCB0YW1ib3YgdGF0YXJzdGFuIHRvbSB0b21zayB0c2FyaXRzeW4gdHNrIHR1bGEgdHV2YSB0dmVyIHR5dW1lbiB1ZG0gdWRtdXJ0aWEgdWxhbi11ZGUgdmxhZGlrYXZrYXogdmxhZGltaXIgdmxhZGl2b3N0b2sgdm9sZ29ncmFkIHZvbG9nZGEgdm9yb25lemggdnJuIHZ5YXRrYSB5YWt1dGlhIHlhbWFsIHlla2F0ZXJpbmJ1cmcgeXV6aG5vLXNha2hhbGluc2sgJywKICAgICAgJ3J3JzonIGFjIGNvIGNvbSBlZHUgZ291diBnb3YgaW50IG1pbCBuZXQgJywKICAgICAgJ3NhJzonIGNvbSBlZHUgZ292IG1lZCBuZXQgb3JnIHB1YiBzY2ggJywKICAgICAgJ3NkJzonIGNvbSBlZHUgZ292IGluZm8gbWVkIG5ldCBvcmcgdHYgJywKICAgICAgJ3NlJzonIGEgYWMgYiBiZCBjIGQgZSBmIGcgaCBpIGsgbCBtIG4gbyBvcmcgcCBwYXJ0aSBwcCBwcmVzcyByIHMgdCB0bSB1IHcgeCB5IHogJywKICAgICAgJ3NnJzonIGNvbSBlZHUgZ292IGlkbiBuZXQgb3JnIHBlciAnLAogICAgICAnc24nOicgYXJ0IGNvbSBlZHUgZ291diBvcmcgcGVyc28gdW5pdiAnLAogICAgICAnc3knOicgY29tIGVkdSBnb3YgbWlsIG5ldCBuZXdzIG9yZyAnLAogICAgICAndGgnOicgYWMgY28gZ28gaW4gbWkgbmV0IG9yICcsCiAgICAgICd0aic6JyBhYyBiaXogY28gY29tIGVkdSBnbyBnb3YgaW5mbyBpbnQgbWlsIG5hbWUgbmV0IG5pYyBvcmcgdGVzdCB3ZWIgJywKICAgICAgJ3RuJzonIGFncmluZXQgY29tIGRlZmVuc2UgZWR1bmV0IGVucyBmaW4gZ292IGluZCBpbmZvIGludGwgbWluY29tIG5hdCBuZXQgb3JnIHBlcnNvIHJucnQgcm5zIHJudSB0b3VyaXNtICcsCiAgICAgICd0eic6JyBhYyBjbyBnbyBuZSBvciAnLAogICAgICAndWEnOicgYml6IGNoZXJrYXNzeSBjaGVybmlnb3YgY2hlcm5vdnRzeSBjayBjbiBjbyBjb20gY3JpbWVhIGN2IGRuIGRuZXByb3BldHJvdnNrIGRvbmV0c2sgZHAgZWR1IGdvdiBpZiBpbiBpdmFuby1mcmFua2l2c2sga2gga2hhcmtvdiBraGVyc29uIGtobWVsbml0c2tpeSBraWV2IGtpcm92b2dyYWQga20ga3Iga3Mga3YgbGcgbHVnYW5zayBsdXRzayBsdml2IG1lIG1rIG5ldCBuaWtvbGFldiBvZCBvZGVzc2Egb3JnIHBsIHBvbHRhdmEgcHAgcm92bm8gcnYgc2ViYXN0b3BvbCBzdW15IHRlIHRlcm5vcGlsIHV6aGdvcm9kIHZpbm5pY2Egdm4gemFwb3Jpemh6aGUgemhpdG9taXIgenAgenQgJywKICAgICAgJ3VnJzonIGFjIGNvIGdvIG5lIG9yIG9yZyBzYyAnLAogICAgICAndWsnOicgYWMgYmwgYnJpdGlzaC1saWJyYXJ5IGNvIGN5bSBnb3YgZ292dCBpY25ldCBqZXQgbGVhIGx0ZCBtZSBtaWwgbW9kIG5hdGlvbmFsLWxpYnJhcnktc2NvdGxhbmQgbmVsIG5ldCBuaHMgbmljIG5scyBvcmcgb3JnbiBwYXJsaWFtZW50IHBsYyBwb2xpY2Ugc2NoIHNjb3Qgc29jICcsCiAgICAgICd1cyc6JyBkbmkgZmVkIGlzYSBraWRzIG5zbiAnLAogICAgICAndXknOicgY29tIGVkdSBndWIgbWlsIG5ldCBvcmcgJywKICAgICAgJ3ZlJzonIGNvIGNvbSBlZHUgZ29iIGluZm8gbWlsIG5ldCBvcmcgd2ViICcsCiAgICAgICd2aSc6JyBjbyBjb20gazEyIG5ldCBvcmcgJywKICAgICAgJ3ZuJzonIGFjIGJpeiBjb20gZWR1IGdvdiBoZWFsdGggaW5mbyBpbnQgbmFtZSBuZXQgb3JnIHBybyAnLAogICAgICAneWUnOicgY28gY29tIGdvdiBsdGQgbWUgbmV0IG9yZyBwbGMgJywKICAgICAgJ3l1JzonIGFjIGNvIGVkdSBnb3Ygb3JnICcsCiAgICAgICd6YSc6JyBhYyBhZ3JpYyBhbHQgYm91cnNlIGNpdHkgY28gY3liZXJuZXQgZGIgZWR1IGdvdiBncm9uZGFyIGlhY2Nlc3MgaW10IGluY2EgbGFuZGVzaWduIGxhdyBtaWwgbmV0IG5nbyBuaXMgbm9tIG9saXZldHRpIG9yZyBwaXggc2Nob29sIHRtIHdlYiAnLAogICAgICAnem0nOicgYWMgY28gY29tIGVkdSBnb3YgbmV0IG9yZyBzY2ggJwogICAgfSwKICAgIC8vIGdvcmhpbGwgMjAxMy0xMC0yNTogVXNpbmcgaW5kZXhPZigpIGluc3RlYWQgUmVnZXhwKCkuIFNpZ25pZmljYW50IGJvb3N0CiAgICAvLyBpbiBib3RoIHBlcmZvcm1hbmNlIGFuZCBtZW1vcnkgZm9vdHByaW50LiBObyBpbml0aWFsaXphdGlvbiByZXF1aXJlZC4KICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3VyaS1qcy1zbGQtcmVnZXgtdnMtYmluYXJ5LXNlYXJjaC80CiAgICAvLyBGb2xsb3dpbmcgbWV0aG9kcyB1c2UgbGFzdEluZGV4T2YoKSByYXRoZXIgdGhhbiBhcnJheS5zcGxpdCgpIGluIG9yZGVyCiAgICAvLyB0byBhdm9pZCBhbnkgbWVtb3J5IGFsbG9jYXRpb25zLgogICAgaGFzOiBmdW5jdGlvbihkb21haW4pIHsKICAgICAgdmFyIHRsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicpOwogICAgICBpZiAodGxkT2Zmc2V0IDw9IDAgfHwgdGxkT2Zmc2V0ID49IChkb21haW4ubGVuZ3RoLTEpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7CiAgICAgIGlmIChzbGRPZmZzZXQgPD0gMCB8fCBzbGRPZmZzZXQgPj0gKHRsZE9mZnNldC0xKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgc2xkTGlzdCA9IFNMRC5saXN0W2RvbWFpbi5zbGljZSh0bGRPZmZzZXQrMSldOwogICAgICBpZiAoIXNsZExpc3QpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHNsZExpc3QuaW5kZXhPZignICcgKyBkb21haW4uc2xpY2Uoc2xkT2Zmc2V0KzEsIHRsZE9mZnNldCkgKyAnICcpID49IDA7CiAgICB9LAogICAgaXM6IGZ1bmN0aW9uKGRvbWFpbikgewogICAgICB2YXIgdGxkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIGlmICh0bGRPZmZzZXQgPD0gMCB8fCB0bGRPZmZzZXQgPj0gKGRvbWFpbi5sZW5ndGgtMSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIHNsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicsIHRsZE9mZnNldC0xKTsKICAgICAgaWYgKHNsZE9mZnNldCA+PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07CiAgICAgIGlmICghc2xkTGlzdCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gc2xkTGlzdC5pbmRleE9mKCcgJyArIGRvbWFpbi5zbGljZSgwLCB0bGRPZmZzZXQpICsgJyAnKSA+PSAwOwogICAgfSwKICAgIGdldDogZnVuY3Rpb24oZG9tYWluKSB7CiAgICAgIHZhciB0bGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nKTsKICAgICAgaWYgKHRsZE9mZnNldCA8PSAwIHx8IHRsZE9mZnNldCA+PSAoZG9tYWluLmxlbmd0aC0xKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7CiAgICAgIGlmIChzbGRPZmZzZXQgPD0gMCB8fCBzbGRPZmZzZXQgPj0gKHRsZE9mZnNldC0xKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07CiAgICAgIGlmICghc2xkTGlzdCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGlmIChzbGRMaXN0LmluZGV4T2YoJyAnICsgZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxLCB0bGRPZmZzZXQpICsgJyAnKSA8IDApIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxKTsKICAgIH0sCiAgICBub0NvbmZsaWN0OiBmdW5jdGlvbigpewogICAgICBpZiAocm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPT09IHRoaXMpIHsKICAgICAgICByb290LlNlY29uZExldmVsRG9tYWlucyA9IF9TZWNvbmRMZXZlbERvbWFpbnM7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKCiAgcmV0dXJuIFNMRDsKfSkpOwoKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qIQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzCiAqCiAqIFZlcnNpb246IDEuMTguMQogKgogKiBBdXRob3I6IFJvZG5leSBSZWhtCiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuaW8vVVJJLmpzLwogKgogKiBMaWNlbnNlZCB1bmRlcgogKiAgIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UKICoKICovCihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICd1c2Ugc3RyaWN0JzsKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanMKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAvLyBOb2RlCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnLi9wdW55Y29kZScpLCByZXF1aXJlKCcuL0lQdjYnKSwgcmVxdWlyZSgnLi9TZWNvbmRMZXZlbERvbWFpbnMnKSk7CiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS4KICAgIGRlZmluZShbJy4vcHVueWNvZGUnLCAnLi9JUHY2JywgJy4vU2Vjb25kTGV2ZWxEb21haW5zJ10sIGZhY3RvcnkpOwogIH0gZWxzZSB7CiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQogICAgcm9vdC5VUkkgPSBmYWN0b3J5KHJvb3QucHVueWNvZGUsIHJvb3QuSVB2Niwgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMsIHJvb3QpOwogIH0KfSh0aGlzLCBmdW5jdGlvbiAocHVueWNvZGUsIElQdjYsIFNMRCwgcm9vdCkgewogICd1c2Ugc3RyaWN0JzsKICAvKmdsb2JhbCBsb2NhdGlvbiwgZXNjYXBlLCB1bmVzY2FwZSAqLwogIC8vIEZJWE1FOiB2Mi4wLjAgcmVuYW1jZSBub24tY2FtZWxDYXNlIHByb3BlcnRpZXMgdG8gdXBwZXJjYXNlCiAgLypqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqLwoKICAvLyBzYXZlIGN1cnJlbnQgVVJJIHZhcmlhYmxlLCBpZiBhbnkKICB2YXIgX1VSSSA9IHJvb3QgJiYgcm9vdC5VUkk7CgogIGZ1bmN0aW9uIFVSSSh1cmwsIGJhc2UpIHsKICAgIHZhciBfdXJsU3VwcGxpZWQgPSBhcmd1bWVudHMubGVuZ3RoID49IDE7CiAgICB2YXIgX2Jhc2VTdXBwbGllZCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMjsKCiAgICAvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmQKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBVUkkpKSB7CiAgICAgIGlmIChfdXJsU3VwcGxpZWQpIHsKICAgICAgICBpZiAoX2Jhc2VTdXBwbGllZCkgewogICAgICAgICAgcmV0dXJuIG5ldyBVUkkodXJsLCBiYXNlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgVVJJKHVybCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVVJJKCk7CiAgICB9CgogICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmIChfdXJsU3VwcGxpZWQpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bmRlZmluZWQgaXMgbm90IGEgdmFsaWQgYXJndW1lbnQgZm9yIFVSSScpOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYgKyAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB1cmwgPSAnJzsKICAgICAgfQogICAgfQoKICAgIHRoaXMuaHJlZih1cmwpOwoKICAgIC8vIHJlc29sdmUgdG8gYmFzZSBhY2NvcmRpbmcgdG8gaHR0cDovL2R2Y3MudzMub3JnL2hnL3VybC9yYXctZmlsZS90aXAvT3ZlcnZpZXcuaHRtbCNjb25zdHJ1Y3RvcgogICAgaWYgKGJhc2UgIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy5hYnNvbHV0ZVRvKGJhc2UpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgVVJJLnZlcnNpb24gPSAnMS4xOC4xJzsKCiAgdmFyIHAgPSBVUkkucHJvdG90eXBlOwogIHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKICBmdW5jdGlvbiBlc2NhcGVSZWdFeChzdHJpbmcpIHsKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2NvbW1pdC84NWFjMjE3ODNjMTFmOGNjYWIwNjEwNmRiYTk3MzVhMzFhODY5MjRkI2NvbW1pdGNvbW1lbnQtODIxOTYzCiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXF1cL1xcXSkvZywgJ1xcJDEnKTsKICB9CgogIGZ1bmN0aW9uIGdldFR5cGUodmFsdWUpIHsKICAgIC8vIElFOCBkb2Vzbid0IHJldHVybiBbT2JqZWN0IFVuZGVmaW5lZF0gYnV0IFtPYmplY3QgT2JqZWN0XSBmb3IgdW5kZWZpbmVkIHZhbHVlCiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gJ1VuZGVmaW5lZCc7CiAgICB9CgogICAgcmV0dXJuIFN0cmluZyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpKS5zbGljZSg4LCAtMSk7CiAgfQoKICBmdW5jdGlvbiBpc0FycmF5KG9iaikgewogICAgcmV0dXJuIGdldFR5cGUob2JqKSA9PT0gJ0FycmF5JzsKICB9CgogIGZ1bmN0aW9uIGZpbHRlckFycmF5VmFsdWVzKGRhdGEsIHZhbHVlKSB7CiAgICB2YXIgbG9va3VwID0ge307CiAgICB2YXIgaSwgbGVuZ3RoOwoKICAgIGlmIChnZXRUeXBlKHZhbHVlKSA9PT0gJ1JlZ0V4cCcpIHsKICAgICAgbG9va3VwID0gbnVsbDsKICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBsb29rdXBbdmFsdWVbaV1dID0gdHJ1ZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbG9va3VwW3ZhbHVlXSA9IHRydWU7CiAgICB9CgogICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZGF0YS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAvKmpzaGludCBsYXhicmVhazogdHJ1ZSAqLwogICAgICB2YXIgX21hdGNoID0gbG9va3VwICYmIGxvb2t1cFtkYXRhW2ldXSAhPT0gdW5kZWZpbmVkCiAgICAgICAgfHwgIWxvb2t1cCAmJiB2YWx1ZS50ZXN0KGRhdGFbaV0pOwogICAgICAvKmpzaGludCBsYXhicmVhazogZmFsc2UgKi8KICAgICAgaWYgKF9tYXRjaCkgewogICAgICAgIGRhdGEuc3BsaWNlKGksIDEpOwogICAgICAgIGxlbmd0aC0tOwogICAgICAgIGktLTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBkYXRhOwogIH0KCiAgZnVuY3Rpb24gYXJyYXlDb250YWlucyhsaXN0LCB2YWx1ZSkgewogICAgdmFyIGksIGxlbmd0aDsKCiAgICAvLyB2YWx1ZSBtYXkgYmUgc3RyaW5nLCBudW1iZXIsIGFycmF5LCByZWdleHAKICAgIGlmIChpc0FycmF5KHZhbHVlKSkgewogICAgICAvLyBOb3RlOiB0aGlzIGNhbiBiZSBvcHRpbWl6ZWQgdG8gTyhuKSAoaW5zdGVhZCBvZiBjdXJyZW50IE8obSAqIG4pKQogICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIGlmICghYXJyYXlDb250YWlucyhsaXN0LCB2YWx1ZVtpXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHZhciBfdHlwZSA9IGdldFR5cGUodmFsdWUpOwogICAgZm9yIChpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoX3R5cGUgPT09ICdSZWdFeHAnKSB7CiAgICAgICAgaWYgKHR5cGVvZiBsaXN0W2ldID09PSAnc3RyaW5nJyAmJiBsaXN0W2ldLm1hdGNoKHZhbHVlKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGxpc3RbaV0gPT09IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBhcnJheXNFcXVhbChvbmUsIHR3bykgewogICAgaWYgKCFpc0FycmF5KG9uZSkgfHwgIWlzQXJyYXkodHdvKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gYXJyYXlzIGNhbid0IGJlIGVxdWFsIGlmIHRoZXkgaGF2ZSBkaWZmZXJlbnQgYW1vdW50IG9mIGNvbnRlbnQKICAgIGlmIChvbmUubGVuZ3RoICE9PSB0d28ubGVuZ3RoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBvbmUuc29ydCgpOwogICAgdHdvLnNvcnQoKTsKCiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9uZS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgaWYgKG9uZVtpXSAhPT0gdHdvW2ldKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmltU2xhc2hlcyh0ZXh0KSB7CiAgICB2YXIgdHJpbV9leHByZXNzaW9uID0gL15cLyt8XC8rJC9nOwogICAgcmV0dXJuIHRleHQucmVwbGFjZSh0cmltX2V4cHJlc3Npb24sICcnKTsKICB9CgogIFVSSS5fcGFydHMgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHByb3RvY29sOiBudWxsLAogICAgICB1c2VybmFtZTogbnVsbCwKICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgIGhvc3RuYW1lOiBudWxsLAogICAgICB1cm46IG51bGwsCiAgICAgIHBvcnQ6IG51bGwsCiAgICAgIHBhdGg6IG51bGwsCiAgICAgIHF1ZXJ5OiBudWxsLAogICAgICBmcmFnbWVudDogbnVsbCwKICAgICAgLy8gc3RhdGUKICAgICAgZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzOiBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLAogICAgICBlc2NhcGVRdWVyeVNwYWNlOiBVUkkuZXNjYXBlUXVlcnlTcGFjZQogICAgfTsKICB9OwogIC8vIHN0YXRlOiBhbGxvdyBkdXBsaWNhdGUgcXVlcnkgcGFyYW1ldGVycyAoYT0xJmE9MSkKICBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzID0gZmFsc2U7CiAgLy8gc3RhdGU6IHJlcGxhY2VzICsgd2l0aCAlMjAgKHNwYWNlIGluIHF1ZXJ5IHN0cmluZ3MpCiAgVVJJLmVzY2FwZVF1ZXJ5U3BhY2UgPSB0cnVlOwogIC8vIHN0YXRpYyBwcm9wZXJ0aWVzCiAgVVJJLnByb3RvY29sX2V4cHJlc3Npb24gPSAvXlthLXpdW2EtejAtOS4rLV0qJC9pOwogIFVSSS5pZG5fZXhwcmVzc2lvbiA9IC9bXmEtejAtOVwuLV0vaTsKICBVUkkucHVueWNvZGVfZXhwcmVzc2lvbiA9IC8oeG4tLSkvaTsKICAvLyB3ZWxsLCAzMzMuNDQ0LjU1NS42NjYgbWF0Y2hlcywgYnV0IGl0IHN1cmUgYWluJ3Qgbm8gSVB2NCAtIGRvIHdlIGNhcmU/CiAgVVJJLmlwNF9leHByZXNzaW9uID0gL15cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9JC87CiAgLy8gY3JlZGl0cyB0byBSaWNoIEJyb3duCiAgLy8gc291cmNlOiBodHRwOi8vZm9ydW1zLmludGVybWFwcGVyLmNvbS92aWV3dG9waWMucGhwP3A9MTA5NiMxMDk2CiAgLy8gc3BlY2lmaWNhdGlvbjogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjNDI5MS50eHQKICBVUkkuaXA2X2V4cHJlc3Npb24gPSAvXlxzKigoKFswLTlBLUZhLWZdezEsNH06KXs3fShbMC05QS1GYS1mXXsxLDR9fDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs2fSg6WzAtOUEtRmEtZl17MSw0fXwoKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezV9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsMn0pfDooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezR9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsM30pfCgoOlswLTlBLUZhLWZdezEsNH0pPzooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXszfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDR9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDJ9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezJ9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNX0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsM306KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7MX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw2fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw0fTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoOigoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDd9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDV9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpKSglLispP1xzKiQvOwogIC8vIGV4cHJlc3Npb24gdXNlZCBpcyAiZ3J1YmVyIHJldmlzZWQiIChAZ3J1YmVyIHYyKSBkZXRlcm1pbmVkIHRvIGJlIHRoZQogIC8vIGJlc3Qgc29sdXRpb24gaW4gYSByZWdleC1nb2xmIHdlIGRpZCBhIGNvdXBsZSBvZiBhZ2VzIGFnbyBhdAogIC8vICogaHR0cDovL21hdGhpYXNieW5lbnMuYmUvZGVtby91cmwtcmVnZXgKICAvLyAqIGh0dHA6Ly9yb2RuZXlyZWhtLmRlL3QvdXJsLXJlZ2V4Lmh0bWwKICBVUkkuZmluZF91cmlfZXhwcmVzc2lvbiA9IC9cYigoPzpbYS16XVtcdy1dKzooPzpcL3sxLDN9fFthLXowLTklXSl8d3d3XGR7MCwzfVsuXXxbYS16MC05LlwtXStbLl1bYS16XXsyLDR9XC8pKD86W15ccygpPD5dK3xcKChbXlxzKCk8Pl0rfChcKFteXHMoKTw+XStcKSkpKlwpKSsoPzpcKChbXlxzKCk8Pl0rfChcKFteXHMoKTw+XStcKSkpKlwpfFteXHNgISgpXFtcXXt9OzonIi4sPD4/wqvCu+KAnOKAneKAmOKAmV0pKS9pZzsKICBVUkkuZmluZFVyaSA9IHsKICAgIC8vIHZhbGlkICJzY2hlbWU6Ly8iIG9yICJ3d3cuIgogICAgc3RhcnQ6IC9cYig/OihbYS16XVthLXowLTkuKy1dKjpcL1wvKXx3d3dcLikvZ2ksCiAgICAvLyBldmVyeXRoaW5nIHVwIHRvIHRoZSBuZXh0IHdoaXRlc3BhY2UKICAgIGVuZDogL1tcc1xyXG5dfCQvLAogICAgLy8gdHJpbSB0cmFpbGluZyBwdW5jdHVhdGlvbiBjYXB0dXJlZCBieSBlbmQgUmVnRXhwCiAgICB0cmltOiAvW2AhKClcW1xde307OiciLiw8Pj/Cq8K74oCc4oCd4oCe4oCY4oCZXSskLwogIH07CiAgLy8gaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy91cmktc2NoZW1lcy5odG1sCiAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX1RDUF9hbmRfVURQX3BvcnRfbnVtYmVycyNXZWxsLWtub3duX3BvcnRzCiAgVVJJLmRlZmF1bHRQb3J0cyA9IHsKICAgIGh0dHA6ICc4MCcsCiAgICBodHRwczogJzQ0MycsCiAgICBmdHA6ICcyMScsCiAgICBnb3BoZXI6ICc3MCcsCiAgICB3czogJzgwJywKICAgIHdzczogJzQ0MycKICB9OwogIC8vIGFsbG93ZWQgaG9zdG5hbWUgY2hhcmFjdGVycyBhY2NvcmRpbmcgdG8gUkZDIDM5ODYKICAvLyBBTFBIQSBESUdJVCAiLSIgIi4iICJfIiAifiIgIiEiICIkIiAiJiIgIiciICIoIiAiKSIgIioiICIrIiAiLCIgIjsiICI9IiAlZW5jb2RlZAogIC8vIEkndmUgbmV2ZXIgc2VlbiBhIChub24tSUROKSBob3N0bmFtZSBvdGhlciB0aGFuOiBBTFBIQSBESUdJVCAuIC0KICBVUkkuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzID0gL1teYS16QS1aMC05XC4tXS87CiAgLy8gbWFwIERPTSBFbGVtZW50cyB0byB0aGVpciBVUkkgYXR0cmlidXRlCiAgVVJJLmRvbUF0dHJpYnV0ZXMgPSB7CiAgICAnYSc6ICdocmVmJywKICAgICdibG9ja3F1b3RlJzogJ2NpdGUnLAogICAgJ2xpbmsnOiAnaHJlZicsCiAgICAnYmFzZSc6ICdocmVmJywKICAgICdzY3JpcHQnOiAnc3JjJywKICAgICdmb3JtJzogJ2FjdGlvbicsCiAgICAnaW1nJzogJ3NyYycsCiAgICAnYXJlYSc6ICdocmVmJywKICAgICdpZnJhbWUnOiAnc3JjJywKICAgICdlbWJlZCc6ICdzcmMnLAogICAgJ3NvdXJjZSc6ICdzcmMnLAogICAgJ3RyYWNrJzogJ3NyYycsCiAgICAnaW5wdXQnOiAnc3JjJywgLy8gYnV0IG9ubHkgaWYgdHlwZT0iaW1hZ2UiCiAgICAnYXVkaW8nOiAnc3JjJywKICAgICd2aWRlbyc6ICdzcmMnCiAgfTsKICBVUkkuZ2V0RG9tQXR0cmlidXRlID0gZnVuY3Rpb24obm9kZSkgewogICAgaWYgKCFub2RlIHx8ICFub2RlLm5vZGVOYW1lKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgdmFyIG5vZGVOYW1lID0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgLy8gPGlucHV0PiBzaG91bGQgb25seSBleHBvc2Ugc3JjIGZvciB0eXBlPSJpbWFnZSIKICAgIGlmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBub2RlLnR5cGUgIT09ICdpbWFnZScpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gVVJJLmRvbUF0dHJpYnV0ZXNbbm9kZU5hbWVdOwogIH07CgogIGZ1bmN0aW9uIGVzY2FwZUZvckR1bWJGaXJlZm94MzYodmFsdWUpIHsKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MQogICAgcmV0dXJuIGVzY2FwZSh2YWx1ZSk7CiAgfQoKICAvLyBlbmNvZGluZyAvIGRlY29kaW5nIGFjY29yZGluZyB0byBSRkMzOTg2CiAgZnVuY3Rpb24gc3RyaWN0RW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykgewogICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvZW5jb2RlVVJJQ29tcG9uZW50CiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykKICAgICAgLnJlcGxhY2UoL1shJygpKl0vZywgZXNjYXBlRm9yRHVtYkZpcmVmb3gzNikKICAgICAgLnJlcGxhY2UoL1wqL2csICclMkEnKTsKICB9CiAgVVJJLmVuY29kZSA9IHN0cmljdEVuY29kZVVSSUNvbXBvbmVudDsKICBVUkkuZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50OwogIFVSSS5pc284ODU5ID0gZnVuY3Rpb24oKSB7CiAgICBVUkkuZW5jb2RlID0gZXNjYXBlOwogICAgVVJJLmRlY29kZSA9IHVuZXNjYXBlOwogIH07CiAgVVJJLnVuaWNvZGUgPSBmdW5jdGlvbigpIHsKICAgIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7CiAgICBVUkkuZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50OwogIH07CiAgVVJJLmNoYXJhY3RlcnMgPSB7CiAgICBwYXRobmFtZTogewogICAgICBlbmNvZGU6IHsKICAgICAgICAvLyBSRkMzOTg2IDIuMTogRm9yIGNvbnNpc3RlbmN5LCBVUkkgcHJvZHVjZXJzIGFuZCBub3JtYWxpemVycyBzaG91bGQKICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLgogICAgICAgIGV4cHJlc3Npb246IC8lKDI0fDI2fDJCfDJDfDNCfDNEfDNBfDQwKS9pZywKICAgICAgICBtYXA6IHsKICAgICAgICAgIC8vIC0uX34hJygpKgogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjYnOiAnJicsCiAgICAgICAgICAnJTJCJzogJysnLAogICAgICAgICAgJyUyQyc6ICcsJywKICAgICAgICAgICclM0InOiAnOycsCiAgICAgICAgICAnJTNEJzogJz0nLAogICAgICAgICAgJyUzQSc6ICc6JywKICAgICAgICAgICclNDAnOiAnQCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlY29kZTogewogICAgICAgIGV4cHJlc3Npb246IC9bXC9cPyNdL2csCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnLyc6ICclMkYnLAogICAgICAgICAgJz8nOiAnJTNGJywKICAgICAgICAgICcjJzogJyUyMycKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZXNlcnZlZDogewogICAgICBlbmNvZGU6IHsKICAgICAgICAvLyBSRkMzOTg2IDIuMTogRm9yIGNvbnNpc3RlbmN5LCBVUkkgcHJvZHVjZXJzIGFuZCBub3JtYWxpemVycyBzaG91bGQKICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLgogICAgICAgIGV4cHJlc3Npb246IC8lKDIxfDIzfDI0fDI2fDI3fDI4fDI5fDJBfDJCfDJDfDJGfDNBfDNCfDNEfDNGfDQwfDVCfDVEKS9pZywKICAgICAgICBtYXA6IHsKICAgICAgICAgIC8vIGdlbi1kZWxpbXMKICAgICAgICAgICclM0EnOiAnOicsCiAgICAgICAgICAnJTJGJzogJy8nLAogICAgICAgICAgJyUzRic6ICc/JywKICAgICAgICAgICclMjMnOiAnIycsCiAgICAgICAgICAnJTVCJzogJ1snLAogICAgICAgICAgJyU1RCc6ICddJywKICAgICAgICAgICclNDAnOiAnQCcsCiAgICAgICAgICAvLyBzdWItZGVsaW1zCiAgICAgICAgICAnJTIxJzogJyEnLAogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjYnOiAnJicsCiAgICAgICAgICAnJTI3JzogJ1wnJywKICAgICAgICAgICclMjgnOiAnKCcsCiAgICAgICAgICAnJTI5JzogJyknLAogICAgICAgICAgJyUyQSc6ICcqJywKICAgICAgICAgICclMkInOiAnKycsCiAgICAgICAgICAnJTJDJzogJywnLAogICAgICAgICAgJyUzQic6ICc7JywKICAgICAgICAgICclM0QnOiAnPScKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB1cm5wYXRoOiB7CiAgICAgIC8vIFRoZSBjaGFyYWN0ZXJzIHVuZGVyIGBlbmNvZGVgIGFyZSB0aGUgY2hhcmFjdGVycyBjYWxsZWQgb3V0IGJ5IFJGQyAyMTQxIGFzIGJlaW5nIGFjY2VwdGFibGUKICAgICAgLy8gZm9yIHVzYWdlIGluIGEgVVJOLiBSRkMyMTQxIGFsc28gY2FsbHMgb3V0ICItIiwgIi4iLCBhbmQgIl8iIGFzIGFjY2VwdGFibGUgY2hhcmFjdGVycywgYnV0CiAgICAgIC8vIHRoZXNlIGFyZW4ndCBlbmNvZGVkIGJ5IGVuY29kZVVSSUNvbXBvbmVudCwgc28gd2UgZG9uJ3QgaGF2ZSB0byBjYWxsIHRoZW0gb3V0IGhlcmUuIEFsc28KICAgICAgLy8gbm90ZSB0aGF0IHRoZSBjb2xvbiBjaGFyYWN0ZXIgaXMgbm90IGZlYXR1cmVkIGluIHRoZSBlbmNvZGluZyBtYXA7IHRoaXMgaXMgYmVjYXVzZSBVUkkuanMKICAgICAgLy8gZ2l2ZXMgdGhlIGNvbG9ucyBpbiBVUk5zIHNlbWFudGljIG1lYW5pbmcgYXMgdGhlIGRlbGltaXRlcnMgb2YgcGF0aCBzZWdlbWVudHMsIGFuZCBzbyBpdAogICAgICAvLyBzaG91bGQgbm90IGFwcGVhciB1bmVuY29kZWQgaW4gYSBzZWdtZW50IGl0c2VsZi4KICAgICAgLy8gU2VlIGFsc28gdGhlIG5vdGUgYWJvdmUgYWJvdXQgUkZDMzk4NiBhbmQgY2FwaXRhbGFsaXplZCBoZXggZGlnaXRzLgogICAgICBlbmNvZGU6IHsKICAgICAgICBleHByZXNzaW9uOiAvJSgyMXwyNHwyN3wyOHwyOXwyQXwyQnwyQ3wzQnwzRHw0MCkvaWcsCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnJTIxJzogJyEnLAogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjcnOiAnXCcnLAogICAgICAgICAgJyUyOCc6ICcoJywKICAgICAgICAgICclMjknOiAnKScsCiAgICAgICAgICAnJTJBJzogJyonLAogICAgICAgICAgJyUyQic6ICcrJywKICAgICAgICAgICclMkMnOiAnLCcsCiAgICAgICAgICAnJTNCJzogJzsnLAogICAgICAgICAgJyUzRCc6ICc9JywKICAgICAgICAgICclNDAnOiAnQCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIFRoZXNlIGNoYXJhY3RlcnMgYXJlIHRoZSBjaGFyYWN0ZXJzIGNhbGxlZCBvdXQgYnkgUkZDMjE0MSBhcyAicmVzZXJ2ZWQiIGNoYXJhY3RlcnMgdGhhdAogICAgICAvLyBzaG91bGQgbmV2ZXIgYXBwZWFyIGluIGEgVVJOLCBwbHVzIHRoZSBjb2xvbiBjaGFyYWN0ZXIgKHNlZSBub3RlIGFib3ZlKS4KICAgICAgZGVjb2RlOiB7CiAgICAgICAgZXhwcmVzc2lvbjogL1tcL1w/IzpdL2csCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnLyc6ICclMkYnLAogICAgICAgICAgJz8nOiAnJTNGJywKICAgICAgICAgICcjJzogJyUyMycsCiAgICAgICAgICAnOic6ICclM0EnCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICBVUkkuZW5jb2RlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHsKICAgIHZhciBlc2NhcGVkID0gVVJJLmVuY29kZShzdHJpbmcgKyAnJyk7CiAgICBpZiAoZXNjYXBlUXVlcnlTcGFjZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTsKICAgIH0KCiAgICByZXR1cm4gZXNjYXBlUXVlcnlTcGFjZSA/IGVzY2FwZWQucmVwbGFjZSgvJTIwL2csICcrJykgOiBlc2NhcGVkOwogIH07CiAgVVJJLmRlY29kZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7CiAgICBzdHJpbmcgKz0gJyc7CiAgICBpZiAoZXNjYXBlUXVlcnlTcGFjZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTsKICAgIH0KCiAgICB0cnkgewogICAgICByZXR1cm4gVVJJLmRlY29kZShlc2NhcGVRdWVyeVNwYWNlID8gc3RyaW5nLnJlcGxhY2UoL1wrL2csICclMjAnKSA6IHN0cmluZyk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgLy8gd2UncmUgbm90IGdvaW5nIHRvIG1lc3Mgd2l0aCB3ZWlyZCBlbmNvZGluZ3MsCiAgICAgIC8vIGdpdmUgdXAgYW5kIHJldHVybiB0aGUgdW5kZWNvZGVkIG9yaWdpbmFsIHN0cmluZwogICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzg3CiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvOTIKICAgICAgcmV0dXJuIHN0cmluZzsKICAgIH0KICB9OwogIC8vIGdlbmVyYXRlIGVuY29kZS9kZWNvZGUgcGF0aCBmdW5jdGlvbnMKICB2YXIgX3BhcnRzID0geydlbmNvZGUnOidlbmNvZGUnLCAnZGVjb2RlJzonZGVjb2RlJ307CiAgdmFyIF9wYXJ0OwogIHZhciBnZW5lcmF0ZUFjY2Vzc29yID0gZnVuY3Rpb24oX2dyb3VwLCBfcGFydCkgewogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBVUklbX3BhcnRdKHN0cmluZyArICcnKS5yZXBsYWNlKFVSSS5jaGFyYWN0ZXJzW19ncm91cF1bX3BhcnRdLmV4cHJlc3Npb24sIGZ1bmN0aW9uKGMpIHsKICAgICAgICAgIHJldHVybiBVUkkuY2hhcmFjdGVyc1tfZ3JvdXBdW19wYXJ0XS5tYXBbY107CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyB3ZSdyZSBub3QgZ29pbmcgdG8gbWVzcyB3aXRoIHdlaXJkIGVuY29kaW5ncywKICAgICAgICAvLyBnaXZlIHVwIGFuZCByZXR1cm4gdGhlIHVuZGVjb2RlZCBvcmlnaW5hbCBzdHJpbmcKICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzg3CiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MgogICAgICAgIHJldHVybiBzdHJpbmc7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgZm9yIChfcGFydCBpbiBfcGFydHMpIHsKICAgIFVSSVtfcGFydCArICdQYXRoU2VnbWVudCddID0gZ2VuZXJhdGVBY2Nlc3NvcigncGF0aG5hbWUnLCBfcGFydHNbX3BhcnRdKTsKICAgIFVSSVtfcGFydCArICdVcm5QYXRoU2VnbWVudCddID0gZ2VuZXJhdGVBY2Nlc3NvcigndXJucGF0aCcsIF9wYXJ0c1tfcGFydF0pOwogIH0KCiAgdmFyIGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uID0gZnVuY3Rpb24oX3NlcCwgX2NvZGluZ0Z1bmNOYW1lLCBfaW5uZXJDb2RpbmdGdW5jTmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykgewogICAgICAvLyBXaHkgcGFzcyBpbiBuYW1lcyBvZiBmdW5jdGlvbnMsIHJhdGhlciB0aGFuIHRoZSBmdW5jdGlvbiBvYmplY3RzIHRoZW1zZWx2ZXM/IFRoZQogICAgICAvLyBkZWZpbml0aW9ucyBvZiBzb21lIGZ1bmN0aW9ucyAoYnV0IGluIHBhcnRpY3VsYXIsIFVSSS5kZWNvZGUpIHdpbGwgb2NjYXNpb25hbGx5IGNoYW5nZSBkdWUKICAgICAgLy8gdG8gVVJJLmpzIGhhdmluZyBJU084ODU5IGFuZCBVbmljb2RlIG1vZGVzLiBQYXNzaW5nIGluIHRoZSBuYW1lIGFuZCBnZXR0aW5nIGl0IHdpbGwgZW5zdXJlCiAgICAgIC8vIHRoYXQgdGhlIGZ1bmN0aW9ucyB3ZSB1c2UgaGVyZSBhcmUgImZyZXNoIi4KICAgICAgdmFyIGFjdHVhbENvZGluZ0Z1bmM7CiAgICAgIGlmICghX2lubmVyQ29kaW5nRnVuY05hbWUpIHsKICAgICAgICBhY3R1YWxDb2RpbmdGdW5jID0gVVJJW19jb2RpbmdGdW5jTmFtZV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWN0dWFsQ29kaW5nRnVuYyA9IGZ1bmN0aW9uKHN0cmluZykgewogICAgICAgICAgcmV0dXJuIFVSSVtfY29kaW5nRnVuY05hbWVdKFVSSVtfaW5uZXJDb2RpbmdGdW5jTmFtZV0oc3RyaW5nKSk7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIHNlZ21lbnRzID0gKHN0cmluZyArICcnKS5zcGxpdChfc2VwKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIHNlZ21lbnRzW2ldID0gYWN0dWFsQ29kaW5nRnVuYyhzZWdtZW50c1tpXSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKF9zZXApOwogICAgfTsKICB9OwoKICAvLyBUaGlzIHRha2VzIHBsYWNlIG91dHNpZGUgdGhlIGFib3ZlIGxvb3AgYmVjYXVzZSB3ZSBkb24ndCB3YW50LCBlLmcuLCBlbmNvZGVVcm5QYXRoIGZ1bmN0aW9ucy4KICBVUkkuZGVjb2RlUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCcvJywgJ2RlY29kZVBhdGhTZWdtZW50Jyk7CiAgVVJJLmRlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdkZWNvZGVVcm5QYXRoU2VnbWVudCcpOwogIFVSSS5yZWNvZGVQYXRoID0gZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24oJy8nLCAnZW5jb2RlUGF0aFNlZ21lbnQnLCAnZGVjb2RlJyk7CiAgVVJJLnJlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdlbmNvZGVVcm5QYXRoU2VnbWVudCcsICdkZWNvZGUnKTsKCiAgVVJJLmVuY29kZVJlc2VydmVkID0gZ2VuZXJhdGVBY2Nlc3NvcigncmVzZXJ2ZWQnLCAnZW5jb2RlJyk7CgogIFVSSS5wYXJzZSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIHZhciBwb3M7CiAgICBpZiAoIXBhcnRzKSB7CiAgICAgIHBhcnRzID0ge307CiAgICB9CiAgICAvLyBbcHJvdG9jb2wiOi8vIlt1c2VybmFtZVsiOiJwYXNzd29yZF0iQCJdaG9zdG5hbWVbIjoicG9ydF0iLyI/XVtwYXRoXVsiPyJxdWVyeXN0cmluZ11bIiMiZnJhZ21lbnRdCgogICAgLy8gZXh0cmFjdCBmcmFnbWVudAogICAgcG9zID0gc3RyaW5nLmluZGV4T2YoJyMnKTsKICAgIGlmIChwb3MgPiAtMSkgewogICAgICAvLyBlc2NhcGluZz8KICAgICAgcGFydHMuZnJhZ21lbnQgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpIHx8IG51bGw7CiAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKTsKICAgIH0KCiAgICAvLyBleHRyYWN0IHF1ZXJ5CiAgICBwb3MgPSBzdHJpbmcuaW5kZXhPZignPycpOwogICAgaWYgKHBvcyA+IC0xKSB7CiAgICAgIC8vIGVzY2FwaW5nPwogICAgICBwYXJ0cy5xdWVyeSA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSkgfHwgbnVsbDsKICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpOwogICAgfQoKICAgIC8vIGV4dHJhY3QgcHJvdG9jb2wKICAgIGlmIChzdHJpbmcuc3Vic3RyaW5nKDAsIDIpID09PSAnLy8nKSB7CiAgICAgIC8vIHJlbGF0aXZlLXNjaGVtZQogICAgICBwYXJ0cy5wcm90b2NvbCA9IG51bGw7CiAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcoMik7CiAgICAgIC8vIGV4dHJhY3QgInVzZXI6cGFzc0Bob3N0OnBvcnQiCiAgICAgIHN0cmluZyA9IFVSSS5wYXJzZUF1dGhvcml0eShzdHJpbmcsIHBhcnRzKTsKICAgIH0gZWxzZSB7CiAgICAgIHBvcyA9IHN0cmluZy5pbmRleE9mKCc6Jyk7CiAgICAgIGlmIChwb3MgPiAtMSkgewogICAgICAgIHBhcnRzLnByb3RvY29sID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpIHx8IG51bGw7CiAgICAgICAgaWYgKHBhcnRzLnByb3RvY29sICYmICFwYXJ0cy5wcm90b2NvbC5tYXRjaChVUkkucHJvdG9jb2xfZXhwcmVzc2lvbikpIHsKICAgICAgICAgIC8vIDogbWF5IGJlIHdpdGhpbiB0aGUgcGF0aAogICAgICAgICAgcGFydHMucHJvdG9jb2wgPSB1bmRlZmluZWQ7CiAgICAgICAgfSBlbHNlIGlmIChzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEsIHBvcyArIDMpID09PSAnLy8nKSB7CiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDMpOwoKICAgICAgICAgIC8vIGV4dHJhY3QgInVzZXI6cGFzc0Bob3N0OnBvcnQiCiAgICAgICAgICBzdHJpbmcgPSBVUkkucGFyc2VBdXRob3JpdHkoc3RyaW5nLCBwYXJ0cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSk7CiAgICAgICAgICBwYXJ0cy51cm4gPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIHdoYXQncyBsZWZ0IG11c3QgYmUgdGhlIHBhdGgKICAgIHBhcnRzLnBhdGggPSBzdHJpbmc7CgogICAgLy8gYW5kIHdlJ3JlIGRvbmUKICAgIHJldHVybiBwYXJ0czsKICB9OwogIFVSSS5wYXJzZUhvc3QgPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7CiAgICAvLyBDb3B5IGNocm9tZSwgSUUsIG9wZXJhIGJhY2tzbGFzaC1oYW5kbGluZyBiZWhhdmlvci4KICAgIC8vIEJhY2sgc2xhc2hlcyBiZWZvcmUgdGhlIHF1ZXJ5IHN0cmluZyBnZXQgY29udmVydGVkIHRvIGZvcndhcmQgc2xhc2hlcwogICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvYmxvYi8zODZmZDI0ZjQ5YjBlOWQxYThhMDc2NTkyYTQwNDE2OGZhZWVjYzM0L2xpYi91cmwuanMjTDExNS1MMTI0CiAgICAvLyBTZWU6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yNTkxNgogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvcHVsbC8yMzMKICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cXC9nLCAnLycpOwoKICAgIC8vIGV4dHJhY3QgaG9zdDpwb3J0CiAgICB2YXIgcG9zID0gc3RyaW5nLmluZGV4T2YoJy8nKTsKICAgIHZhciBicmFja2V0UG9zOwogICAgdmFyIHQ7CgogICAgaWYgKHBvcyA9PT0gLTEpIHsKICAgICAgcG9zID0gc3RyaW5nLmxlbmd0aDsKICAgIH0KCiAgICBpZiAoc3RyaW5nLmNoYXJBdCgwKSA9PT0gJ1snKSB7CiAgICAgIC8vIElQdjYgaG9zdCAtIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtNm1hbi10ZXh0LWFkZHItcmVwcmVzZW50YXRpb24tMDQjc2VjdGlvbi02CiAgICAgIC8vIEkgY2xhaW0gbW9zdCBjbGllbnQgc29mdHdhcmUgYnJlYWtzIG9uIElQdjYgYW55d2F5cy4gVG8gc2ltcGxpZnkgdGhpbmdzLCBVUkkgb25seSBhY2NlcHRzCiAgICAgIC8vIElQdjYrcG9ydCBpbiB0aGUgZm9ybWF0IFsyMDAxOmRiODo6MV06ODAgKGZvciB0aGUgdGltZSBiZWluZykKICAgICAgYnJhY2tldFBvcyA9IHN0cmluZy5pbmRleE9mKCddJyk7CiAgICAgIHBhcnRzLmhvc3RuYW1lID0gc3RyaW5nLnN1YnN0cmluZygxLCBicmFja2V0UG9zKSB8fCBudWxsOwogICAgICBwYXJ0cy5wb3J0ID0gc3RyaW5nLnN1YnN0cmluZyhicmFja2V0UG9zICsgMiwgcG9zKSB8fCBudWxsOwogICAgICBpZiAocGFydHMucG9ydCA9PT0gJy8nKSB7CiAgICAgICAgcGFydHMucG9ydCA9IG51bGw7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBmaXJzdENvbG9uID0gc3RyaW5nLmluZGV4T2YoJzonKTsKICAgICAgdmFyIGZpcnN0U2xhc2ggPSBzdHJpbmcuaW5kZXhPZignLycpOwogICAgICB2YXIgbmV4dENvbG9uID0gc3RyaW5nLmluZGV4T2YoJzonLCBmaXJzdENvbG9uICsgMSk7CiAgICAgIGlmIChuZXh0Q29sb24gIT09IC0xICYmIChmaXJzdFNsYXNoID09PSAtMSB8fCBuZXh0Q29sb24gPCBmaXJzdFNsYXNoKSkgewogICAgICAgIC8vIElQdjYgaG9zdCBjb250YWlucyBtdWx0aXBsZSBjb2xvbnMgLSBidXQgbm8gcG9ydAogICAgICAgIC8vIHRoaXMgbm90YXRpb24gaXMgYWN0dWFsbHkgbm90IGFsbG93ZWQgYnkgUkZDIDM5ODYsIGJ1dCB3ZSdyZSBhIGxpYmVyYWwgcGFyc2VyCiAgICAgICAgcGFydHMuaG9zdG5hbWUgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcykgfHwgbnVsbDsKICAgICAgICBwYXJ0cy5wb3J0ID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpLnNwbGl0KCc6Jyk7CiAgICAgICAgcGFydHMuaG9zdG5hbWUgPSB0WzBdIHx8IG51bGw7CiAgICAgICAgcGFydHMucG9ydCA9IHRbMV0gfHwgbnVsbDsKICAgICAgfQogICAgfQoKICAgIGlmIChwYXJ0cy5ob3N0bmFtZSAmJiBzdHJpbmcuc3Vic3RyaW5nKHBvcykuY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgcG9zKys7CiAgICAgIHN0cmluZyA9ICcvJyArIHN0cmluZzsKICAgIH0KCiAgICByZXR1cm4gc3RyaW5nLnN1YnN0cmluZyhwb3MpIHx8ICcvJzsKICB9OwogIFVSSS5wYXJzZUF1dGhvcml0eSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIHN0cmluZyA9IFVSSS5wYXJzZVVzZXJpbmZvKHN0cmluZywgcGFydHMpOwogICAgcmV0dXJuIFVSSS5wYXJzZUhvc3Qoc3RyaW5nLCBwYXJ0cyk7CiAgfTsKICBVUkkucGFyc2VVc2VyaW5mbyA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIC8vIGV4dHJhY3QgdXNlcm5hbWU6cGFzc3dvcmQKICAgIHZhciBmaXJzdFNsYXNoID0gc3RyaW5nLmluZGV4T2YoJy8nKTsKICAgIHZhciBwb3MgPSBzdHJpbmcubGFzdEluZGV4T2YoJ0AnLCBmaXJzdFNsYXNoID4gLTEgPyBmaXJzdFNsYXNoIDogc3RyaW5nLmxlbmd0aCAtIDEpOwogICAgdmFyIHQ7CgogICAgLy8gYXV0aG9yaXR5QCBtdXN0IGNvbWUgYmVmb3JlIC9wYXRoCiAgICBpZiAocG9zID4gLTEgJiYgKGZpcnN0U2xhc2ggPT09IC0xIHx8IHBvcyA8IGZpcnN0U2xhc2gpKSB7CiAgICAgIHQgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcykuc3BsaXQoJzonKTsKICAgICAgcGFydHMudXNlcm5hbWUgPSB0WzBdID8gVVJJLmRlY29kZSh0WzBdKSA6IG51bGw7CiAgICAgIHQuc2hpZnQoKTsKICAgICAgcGFydHMucGFzc3dvcmQgPSB0WzBdID8gVVJJLmRlY29kZSh0LmpvaW4oJzonKSkgOiBudWxsOwogICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpOwogICAgfSBlbHNlIHsKICAgICAgcGFydHMudXNlcm5hbWUgPSBudWxsOwogICAgICBwYXJ0cy5wYXNzd29yZCA9IG51bGw7CiAgICB9CgogICAgcmV0dXJuIHN0cmluZzsKICB9OwogIFVSSS5wYXJzZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7CiAgICBpZiAoIXN0cmluZykgewogICAgICByZXR1cm4ge307CiAgICB9CgogICAgLy8gdGhyb3cgb3V0IHRoZSBmdW5reSBidXNpbmVzcyAtICI/IltuYW1lIj0idmFsdWUiJiJdKwogICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoLyYrL2csICcmJykucmVwbGFjZSgvXlw/KiYqfCYrJC9nLCAnJyk7CgogICAgaWYgKCFzdHJpbmcpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQoKICAgIHZhciBpdGVtcyA9IHt9OwogICAgdmFyIHNwbGl0cyA9IHN0cmluZy5zcGxpdCgnJicpOwogICAgdmFyIGxlbmd0aCA9IHNwbGl0cy5sZW5ndGg7CiAgICB2YXIgdiwgbmFtZSwgdmFsdWU7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2ID0gc3BsaXRzW2ldLnNwbGl0KCc9Jyk7CiAgICAgIG5hbWUgPSBVUkkuZGVjb2RlUXVlcnkodi5zaGlmdCgpLCBlc2NhcGVRdWVyeVNwYWNlKTsKICAgICAgLy8gbm8gIj0iIGlzIG51bGwgYWNjb3JkaW5nIHRvIGh0dHA6Ly9kdmNzLnczLm9yZy9oZy91cmwvcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWwjY29sbGVjdC11cmwtcGFyYW1ldGVycwogICAgICB2YWx1ZSA9IHYubGVuZ3RoID8gVVJJLmRlY29kZVF1ZXJ5KHYuam9pbignPScpLCBlc2NhcGVRdWVyeVNwYWNlKSA6IG51bGw7CgogICAgICBpZiAoaGFzT3duLmNhbGwoaXRlbXMsIG5hbWUpKSB7CiAgICAgICAgaWYgKHR5cGVvZiBpdGVtc1tuYW1lXSA9PT0gJ3N0cmluZycgfHwgaXRlbXNbbmFtZV0gPT09IG51bGwpIHsKICAgICAgICAgIGl0ZW1zW25hbWVdID0gW2l0ZW1zW25hbWVdXTsKICAgICAgICB9CgogICAgICAgIGl0ZW1zW25hbWVdLnB1c2godmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW1zW25hbWVdID0gdmFsdWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gaXRlbXM7CiAgfTsKCiAgVVJJLmJ1aWxkID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHZhciB0ID0gJyc7CgogICAgaWYgKHBhcnRzLnByb3RvY29sKSB7CiAgICAgIHQgKz0gcGFydHMucHJvdG9jb2wgKyAnOic7CiAgICB9CgogICAgaWYgKCFwYXJ0cy51cm4gJiYgKHQgfHwgcGFydHMuaG9zdG5hbWUpKSB7CiAgICAgIHQgKz0gJy8vJzsKICAgIH0KCiAgICB0ICs9IChVUkkuYnVpbGRBdXRob3JpdHkocGFydHMpIHx8ICcnKTsKCiAgICBpZiAodHlwZW9mIHBhcnRzLnBhdGggPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmIChwYXJ0cy5wYXRoLmNoYXJBdCgwKSAhPT0gJy8nICYmIHR5cGVvZiBwYXJ0cy5ob3N0bmFtZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB0ICs9ICcvJzsKICAgICAgfQoKICAgICAgdCArPSBwYXJ0cy5wYXRoOwogICAgfQoKICAgIGlmICh0eXBlb2YgcGFydHMucXVlcnkgPT09ICdzdHJpbmcnICYmIHBhcnRzLnF1ZXJ5KSB7CiAgICAgIHQgKz0gJz8nICsgcGFydHMucXVlcnk7CiAgICB9CgogICAgaWYgKHR5cGVvZiBwYXJ0cy5mcmFnbWVudCA9PT0gJ3N0cmluZycgJiYgcGFydHMuZnJhZ21lbnQpIHsKICAgICAgdCArPSAnIycgKyBwYXJ0cy5mcmFnbWVudDsKICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgVVJJLmJ1aWxkSG9zdCA9IGZ1bmN0aW9uKHBhcnRzKSB7CiAgICB2YXIgdCA9ICcnOwoKICAgIGlmICghcGFydHMuaG9zdG5hbWUpIHsKICAgICAgcmV0dXJuICcnOwogICAgfSBlbHNlIGlmIChVUkkuaXA2X2V4cHJlc3Npb24udGVzdChwYXJ0cy5ob3N0bmFtZSkpIHsKICAgICAgdCArPSAnWycgKyBwYXJ0cy5ob3N0bmFtZSArICddJzsKICAgIH0gZWxzZSB7CiAgICAgIHQgKz0gcGFydHMuaG9zdG5hbWU7CiAgICB9CgogICAgaWYgKHBhcnRzLnBvcnQpIHsKICAgICAgdCArPSAnOicgKyBwYXJ0cy5wb3J0OwogICAgfQoKICAgIHJldHVybiB0OwogIH07CiAgVVJJLmJ1aWxkQXV0aG9yaXR5ID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHJldHVybiBVUkkuYnVpbGRVc2VyaW5mbyhwYXJ0cykgKyBVUkkuYnVpbGRIb3N0KHBhcnRzKTsKICB9OwogIFVSSS5idWlsZFVzZXJpbmZvID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHZhciB0ID0gJyc7CgogICAgaWYgKHBhcnRzLnVzZXJuYW1lKSB7CiAgICAgIHQgKz0gVVJJLmVuY29kZShwYXJ0cy51c2VybmFtZSk7CiAgICB9CgogICAgaWYgKHBhcnRzLnBhc3N3b3JkKSB7CiAgICAgIHQgKz0gJzonICsgVVJJLmVuY29kZShwYXJ0cy5wYXNzd29yZCk7CiAgICB9CgogICAgaWYgKHQpIHsKICAgICAgdCArPSAnQCc7CiAgICB9CgogICAgcmV0dXJuIHQ7CiAgfTsKICBVUkkuYnVpbGRRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgZXNjYXBlUXVlcnlTcGFjZSkgewogICAgLy8gYWNjb3JkaW5nIHRvIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODYgb3IgaHR0cDovL2xhYnMuYXBhY2hlLm9yZy93ZWJhcmNoL3VyaS9yZmMvcmZjMzk4Ni5odG1sCiAgICAvLyBiZWluZyDCuy0uX34hJCYnKCkqKyw7PTpALz/CqyAlSEVYIGFuZCBhbG51bSBhcmUgYWxsb3dlZAogICAgLy8gdGhlIFJGQyBleHBsaWNpdGx5IHN0YXRlcyA/L2ZvbyBiZWluZyBhIHZhbGlkIHVzZSBjYXNlLCBubyBtZW50aW9uIG9mIHBhcmFtZXRlciBzeW50YXghCiAgICAvLyBVUkkuanMgdHJlYXRzIHRoZSBxdWVyeSBzdHJpbmcgYXMgYmVpbmcgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkCiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MC9pbnRlcmFjdC9mb3Jtcy5odG1sI2Zvcm0tY29udGVudC10eXBlCgogICAgdmFyIHQgPSAnJzsKICAgIHZhciB1bmlxdWUsIGtleSwgaSwgbGVuZ3RoOwogICAgZm9yIChrZXkgaW4gZGF0YSkgewogICAgICBpZiAoaGFzT3duLmNhbGwoZGF0YSwga2V5KSAmJiBrZXkpIHsKICAgICAgICBpZiAoaXNBcnJheShkYXRhW2tleV0pKSB7CiAgICAgICAgICB1bmlxdWUgPSB7fTsKICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGRhdGFba2V5XS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoZGF0YVtrZXldW2ldICE9PSB1bmRlZmluZWQgJiYgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdCArPSAnJicgKyBVUkkuYnVpbGRRdWVyeVBhcmFtZXRlcihrZXksIGRhdGFba2V5XVtpXSwgZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyAhPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhW2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdCArPSAnJicgKyBVUkkuYnVpbGRRdWVyeVBhcmFtZXRlcihrZXksIGRhdGFba2V5XSwgZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHQuc3Vic3RyaW5nKDEpOwogIH07CiAgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkgewogICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MC9pbnRlcmFjdC9mb3Jtcy5odG1sI2Zvcm0tY29udGVudC10eXBlIC0tIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZAogICAgLy8gZG9uJ3QgYXBwZW5kICI9IiBmb3IgbnVsbCB2YWx1ZXMsIGFjY29yZGluZyB0byBodHRwOi8vZHZjcy53My5vcmcvaGcvdXJsL3Jhdy1maWxlL3RpcC9PdmVydmlldy5odG1sI3VybC1wYXJhbWV0ZXItc2VyaWFsaXphdGlvbgogICAgcmV0dXJuIFVSSS5lbmNvZGVRdWVyeShuYW1lLCBlc2NhcGVRdWVyeVNwYWNlKSArICh2YWx1ZSAhPT0gbnVsbCA/ICc9JyArIFVSSS5lbmNvZGVRdWVyeSh2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkgOiAnJyk7CiAgfTsKCiAgVVJJLmFkZFF1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgbmFtZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHsKICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkgewogICAgICAgICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmIChkYXRhW25hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBkYXRhW25hbWVdID0gdmFsdWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhW25hbWVdID09PSAnc3RyaW5nJykgewogICAgICAgIGRhdGFbbmFtZV0gPSBbZGF0YVtuYW1lXV07CiAgICAgIH0KCiAgICAgIGlmICghaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07CiAgICAgIH0KCiAgICAgIGRhdGFbbmFtZV0gPSAoZGF0YVtuYW1lXSB8fCBbXSkuY29uY2F0KHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKICBVUkkucmVtb3ZlUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSkgewogICAgdmFyIGksIGxlbmd0aCwga2V5OwoKICAgIGlmIChpc0FycmF5KG5hbWUpKSB7CiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG5hbWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBkYXRhW25hbWVbaV1dID0gdW5kZWZpbmVkOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGdldFR5cGUobmFtZSkgPT09ICdSZWdFeHAnKSB7CiAgICAgIGZvciAoa2V5IGluIGRhdGEpIHsKICAgICAgICBpZiAobmFtZS50ZXN0KGtleSkpIHsKICAgICAgICAgIGRhdGFba2V5XSA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7CiAgICAgIGZvciAoa2V5IGluIG5hbWUpIHsKICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkgewogICAgICAgICAgVVJJLnJlbW92ZVF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKGdldFR5cGUodmFsdWUpID09PSAnUmVnRXhwJykgewogICAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pICYmIHZhbHVlLnRlc3QoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhW25hbWVdID09PSBTdHJpbmcodmFsdWUpICYmICghaXNBcnJheSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAxKSkgewogICAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDsKICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5yZW1vdmVRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcsIFJlZ0V4cCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKICBVUkkuaGFzUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpIHsKICAgIHN3aXRjaCAoZ2V0VHlwZShuYW1lKSkgewogICAgICBjYXNlICdTdHJpbmcnOgogICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gaGVyZQogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnUmVnRXhwJzoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkgewogICAgICAgICAgaWYgKGhhc093bi5jYWxsKGRhdGEsIGtleSkpIHsKICAgICAgICAgICAgaWYgKG5hbWUudGVzdChrZXkpICYmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IFVSSS5oYXNRdWVyeShkYXRhLCBrZXksIHZhbHVlKSkpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgY2FzZSAnT2JqZWN0JzoKICAgICAgICBmb3IgKHZhciBfa2V5IGluIG5hbWUpIHsKICAgICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBfa2V5KSkgewogICAgICAgICAgICBpZiAoIVVSSS5oYXNRdWVyeShkYXRhLCBfa2V5LCBuYW1lW19rZXldKSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5oYXNRdWVyeSgpIGFjY2VwdHMgYSBzdHJpbmcsIHJlZ3VsYXIgZXhwcmVzc2lvbiBvciBvYmplY3QgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7CiAgICB9CgogICAgc3dpdGNoIChnZXRUeXBlKHZhbHVlKSkgewogICAgICBjYXNlICdVbmRlZmluZWQnOgogICAgICAgIC8vIHRydWUgaWYgZXhpc3RzIChidXQgbWF5IGJlIGVtcHR5KQogICAgICAgIHJldHVybiBuYW1lIGluIGRhdGE7IC8vIGRhdGFbbmFtZV0gIT09IHVuZGVmaW5lZDsKCiAgICAgIGNhc2UgJ0Jvb2xlYW4nOgogICAgICAgIC8vIHRydWUgaWYgZXhpc3RzIGFuZCBub24tZW1wdHkKICAgICAgICB2YXIgX2Jvb2x5ID0gQm9vbGVhbihpc0FycmF5KGRhdGFbbmFtZV0pID8gZGF0YVtuYW1lXS5sZW5ndGggOiBkYXRhW25hbWVdKTsKICAgICAgICByZXR1cm4gdmFsdWUgPT09IF9ib29seTsKCiAgICAgIGNhc2UgJ0Z1bmN0aW9uJzoKICAgICAgICAvLyBhbGxvdyBjb21wbGV4IGNvbXBhcmlzb24KICAgICAgICByZXR1cm4gISF2YWx1ZShkYXRhW25hbWVdLCBuYW1lLCBkYXRhKTsKCiAgICAgIGNhc2UgJ0FycmF5JzoKICAgICAgICBpZiAoIWlzQXJyYXkoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBvcCA9IHdpdGhpbkFycmF5ID8gYXJyYXlDb250YWlucyA6IGFycmF5c0VxdWFsOwogICAgICAgIHJldHVybiBvcChkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBjYXNlICdSZWdFeHAnOgogICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSkgewogICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZGF0YVtuYW1lXSAmJiBkYXRhW25hbWVdLm1hdGNoKHZhbHVlKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXdpdGhpbkFycmF5KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYXJyYXlDb250YWlucyhkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBjYXNlICdOdW1iZXInOgogICAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKTsKICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgIGNhc2UgJ1N0cmluZyc6CiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pKSB7CiAgICAgICAgICByZXR1cm4gZGF0YVtuYW1lXSA9PT0gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXdpdGhpbkFycmF5KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYXJyYXlDb250YWlucyhkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5oYXNRdWVyeSgpIGFjY2VwdHMgdW5kZWZpbmVkLCBib29sZWFuLCBzdHJpbmcsIG51bWJlciwgUmVnRXhwLCBGdW5jdGlvbiBhcyB0aGUgdmFsdWUgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKCgogIFVSSS5qb2luUGF0aHMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBpbnB1dCA9IFtdOwogICAgdmFyIHNlZ21lbnRzID0gW107CiAgICB2YXIgbm9uRW1wdHlTZWdtZW50cyA9IDA7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHVybCA9IG5ldyBVUkkoYXJndW1lbnRzW2ldKTsKICAgICAgaW5wdXQucHVzaCh1cmwpOwogICAgICB2YXIgX3NlZ21lbnRzID0gdXJsLnNlZ21lbnQoKTsKICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBfc2VnbWVudHMubGVuZ3RoOyBzKyspIHsKICAgICAgICBpZiAodHlwZW9mIF9zZWdtZW50c1tzXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHNlZ21lbnRzLnB1c2goX3NlZ21lbnRzW3NdKTsKICAgICAgICB9CgogICAgICAgIGlmIChfc2VnbWVudHNbc10pIHsKICAgICAgICAgIG5vbkVtcHR5U2VnbWVudHMrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhbm9uRW1wdHlTZWdtZW50cykgewogICAgICByZXR1cm4gbmV3IFVSSSgnJyk7CiAgICB9CgogICAgdmFyIHVyaSA9IG5ldyBVUkkoJycpLnNlZ21lbnQoc2VnbWVudHMpOwoKICAgIGlmIChpbnB1dFswXS5wYXRoKCkgPT09ICcnIHx8IGlucHV0WzBdLnBhdGgoKS5zbGljZSgwLCAxKSA9PT0gJy8nKSB7CiAgICAgIHVyaS5wYXRoKCcvJyArIHVyaS5wYXRoKCkpOwogICAgfQoKICAgIHJldHVybiB1cmkubm9ybWFsaXplKCk7CiAgfTsKCiAgVVJJLmNvbW1vblBhdGggPSBmdW5jdGlvbihvbmUsIHR3bykgewogICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKG9uZS5sZW5ndGgsIHR3by5sZW5ndGgpOwogICAgdmFyIHBvczsKCiAgICAvLyBmaW5kIGZpcnN0IG5vbi1tYXRjaGluZyBjaGFyYWN0ZXIKICAgIGZvciAocG9zID0gMDsgcG9zIDwgbGVuZ3RoOyBwb3MrKykgewogICAgICBpZiAob25lLmNoYXJBdChwb3MpICE9PSB0d28uY2hhckF0KHBvcykpIHsKICAgICAgICBwb3MtLTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3MgPCAxKSB7CiAgICAgIHJldHVybiBvbmUuY2hhckF0KDApID09PSB0d28uY2hhckF0KDApICYmIG9uZS5jaGFyQXQoMCkgPT09ICcvJyA/ICcvJyA6ICcnOwogICAgfQoKICAgIC8vIHJldmVydCB0byBsYXN0IC8KICAgIGlmIChvbmUuY2hhckF0KHBvcykgIT09ICcvJyB8fCB0d28uY2hhckF0KHBvcykgIT09ICcvJykgewogICAgICBwb3MgPSBvbmUuc3Vic3RyaW5nKDAsIHBvcykubGFzdEluZGV4T2YoJy8nKTsKICAgIH0KCiAgICByZXR1cm4gb25lLnN1YnN0cmluZygwLCBwb3MgKyAxKTsKICB9OwoKICBVUkkud2l0aGluU3RyaW5nID0gZnVuY3Rpb24oc3RyaW5nLCBjYWxsYmFjaywgb3B0aW9ucykgewogICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTsKICAgIHZhciBfc3RhcnQgPSBvcHRpb25zLnN0YXJ0IHx8IFVSSS5maW5kVXJpLnN0YXJ0OwogICAgdmFyIF9lbmQgPSBvcHRpb25zLmVuZCB8fCBVUkkuZmluZFVyaS5lbmQ7CiAgICB2YXIgX3RyaW0gPSBvcHRpb25zLnRyaW0gfHwgVVJJLmZpbmRVcmkudHJpbTsKICAgIHZhciBfYXR0cmlidXRlT3BlbiA9IC9bYS16MC05LV09WyInXT8kL2k7CgogICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICB2YXIgbWF0Y2ggPSBfc3RhcnQuZXhlYyhzdHJpbmcpOwogICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHZhciBzdGFydCA9IG1hdGNoLmluZGV4OwogICAgICBpZiAob3B0aW9ucy5pZ25vcmVIdG1sKSB7CiAgICAgICAgLy8gYXR0cmlidXQoZT1bIiddPyQpCiAgICAgICAgdmFyIGF0dHJpYnV0ZU9wZW4gPSBzdHJpbmcuc2xpY2UoTWF0aC5tYXgoc3RhcnQgLSAzLCAwKSwgc3RhcnQpOwogICAgICAgIGlmIChhdHRyaWJ1dGVPcGVuICYmIF9hdHRyaWJ1dGVPcGVuLnRlc3QoYXR0cmlidXRlT3BlbikpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGVuZCA9IHN0YXJ0ICsgc3RyaW5nLnNsaWNlKHN0YXJ0KS5zZWFyY2goX2VuZCk7CiAgICAgIHZhciBzbGljZSA9IHN0cmluZy5zbGljZShzdGFydCwgZW5kKS5yZXBsYWNlKF90cmltLCAnJyk7CiAgICAgIGlmIChvcHRpb25zLmlnbm9yZSAmJiBvcHRpb25zLmlnbm9yZS50ZXN0KHNsaWNlKSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBlbmQgPSBzdGFydCArIHNsaWNlLmxlbmd0aDsKICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKHNsaWNlLCBzdGFydCwgZW5kLCBzdHJpbmcpOwogICAgICBzdHJpbmcgPSBzdHJpbmcuc2xpY2UoMCwgc3RhcnQpICsgcmVzdWx0ICsgc3RyaW5nLnNsaWNlKGVuZCk7CiAgICAgIF9zdGFydC5sYXN0SW5kZXggPSBzdGFydCArIHJlc3VsdC5sZW5ndGg7CiAgICB9CgogICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7CiAgICByZXR1cm4gc3RyaW5nOwogIH07CgogIFVSSS5lbnN1cmVWYWxpZEhvc3RuYW1lID0gZnVuY3Rpb24odikgewogICAgLy8gVGhlb3JldGljYWxseSBVUklzIGFsbG93IHBlcmNlbnQtZW5jb2RpbmcgaW4gSG9zdG5hbWVzIChhY2NvcmRpbmcgdG8gUkZDIDM5ODYpCiAgICAvLyB0aGV5IGFyZSBub3QgcGFydCBvZiBETlMgYW5kIHRoZXJlZm9yZSBpZ25vcmVkIGJ5IFVSSS5qcwoKICAgIGlmICh2Lm1hdGNoKFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKSB7CiAgICAgIC8vIHRlc3QgcHVueWNvZGUKICAgICAgaWYgKCFwdW55Y29kZSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dIGFuZCBQdW55Y29kZS5qcyBpcyBub3QgYXZhaWxhYmxlJyk7CiAgICAgIH0KCiAgICAgIGlmIChwdW55Y29kZS50b0FTQ0lJKHYpLm1hdGNoKFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTsKICAgICAgfQogICAgfQogIH07CgogIC8vIG5vQ29uZmxpY3QKICBVUkkubm9Db25mbGljdCA9IGZ1bmN0aW9uKHJlbW92ZUFsbCkgewogICAgaWYgKHJlbW92ZUFsbCkgewogICAgICB2YXIgdW5jb25mbGljdGVkID0gewogICAgICAgIFVSSTogdGhpcy5ub0NvbmZsaWN0KCkKICAgICAgfTsKCiAgICAgIGlmIChyb290LlVSSVRlbXBsYXRlICYmIHR5cGVvZiByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1bmNvbmZsaWN0ZWQuVVJJVGVtcGxhdGUgPSByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QoKTsKICAgICAgfQoKICAgICAgaWYgKHJvb3QuSVB2NiAmJiB0eXBlb2Ygcm9vdC5JUHY2Lm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1bmNvbmZsaWN0ZWQuSVB2NiA9IHJvb3QuSVB2Ni5ub0NvbmZsaWN0KCk7CiAgICAgIH0KCiAgICAgIGlmIChyb290LlNlY29uZExldmVsRG9tYWlucyAmJiB0eXBlb2Ygcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMubm9Db25mbGljdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHVuY29uZmxpY3RlZC5TZWNvbmRMZXZlbERvbWFpbnMgPSByb290LlNlY29uZExldmVsRG9tYWlucy5ub0NvbmZsaWN0KCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1bmNvbmZsaWN0ZWQ7CiAgICB9IGVsc2UgaWYgKHJvb3QuVVJJID09PSB0aGlzKSB7CiAgICAgIHJvb3QuVVJJID0gX1VSSTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLmJ1aWxkID0gZnVuY3Rpb24oZGVmZXJCdWlsZCkgewogICAgaWYgKGRlZmVyQnVpbGQgPT09IHRydWUpIHsKICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSB0cnVlOwogICAgfSBlbHNlIGlmIChkZWZlckJ1aWxkID09PSB1bmRlZmluZWQgfHwgdGhpcy5fZGVmZXJyZWRfYnVpbGQpIHsKICAgICAgdGhpcy5fc3RyaW5nID0gVVJJLmJ1aWxkKHRoaXMuX3BhcnRzKTsKICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLmNsb25lID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmV3IFVSSSh0aGlzKTsKICB9OwoKICBwLnZhbHVlT2YgPSBwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5idWlsZChmYWxzZSkuX3N0cmluZzsKICB9OwoKCiAgZnVuY3Rpb24gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcihfcGFydCl7CiAgICByZXR1cm4gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLl9wYXJ0c1tfcGFydF0gfHwgJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fcGFydHNbX3BhcnRdID0gdiB8fCBudWxsOwogICAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgfTsKICB9CgogIGZ1bmN0aW9uIGdlbmVyYXRlUHJlZml4QWNjZXNzb3IoX3BhcnQsIF9rZXkpewogICAgcmV0dXJuIGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcGFydHNbX3BhcnRdIHx8ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh2ICE9PSBudWxsKSB7CiAgICAgICAgICB2ID0gdiArICcnOwogICAgICAgICAgaWYgKHYuY2hhckF0KDApID09PSBfa2V5KSB7CiAgICAgICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuX3BhcnRzW19wYXJ0XSA9IHY7CiAgICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICB9OwogIH0KCiAgcC5wcm90b2NvbCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3Byb3RvY29sJyk7CiAgcC51c2VybmFtZSA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3VzZXJuYW1lJyk7CiAgcC5wYXNzd29yZCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3Bhc3N3b3JkJyk7CiAgcC5ob3N0bmFtZSA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ2hvc3RuYW1lJyk7CiAgcC5wb3J0ID0gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcigncG9ydCcpOwogIHAucXVlcnkgPSBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKCdxdWVyeScsICc/Jyk7CiAgcC5mcmFnbWVudCA9IGdlbmVyYXRlUHJlZml4QWNjZXNzb3IoJ2ZyYWdtZW50JywgJyMnKTsKCiAgcC5zZWFyY2ggPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgdmFyIHQgPSB0aGlzLnF1ZXJ5KHYsIGJ1aWxkKTsKICAgIHJldHVybiB0eXBlb2YgdCA9PT0gJ3N0cmluZycgJiYgdC5sZW5ndGggPyAoJz8nICsgdCkgOiB0OwogIH07CiAgcC5oYXNoID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIHZhciB0ID0gdGhpcy5mcmFnbWVudCh2LCBidWlsZCk7CiAgICByZXR1cm4gdHlwZW9mIHQgPT09ICdzdHJpbmcnICYmIHQubGVuZ3RoID8gKCcjJyArIHQpIDogdDsKICB9OwoKICBwLnBhdGhuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkgewogICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aCB8fCAodGhpcy5fcGFydHMuaG9zdG5hbWUgPyAnLycgOiAnJyk7CiAgICAgIHJldHVybiB2ID8gKHRoaXMuX3BhcnRzLnVybiA/IFVSSS5kZWNvZGVVcm5QYXRoIDogVVJJLmRlY29kZVBhdGgpKHJlcykgOiByZXM7CiAgICB9IGVsc2UgewogICAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHYgPyBVUkkucmVjb2RlVXJuUGF0aCh2KSA6ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB2ID8gVVJJLnJlY29kZVBhdGgodikgOiAnLyc7CiAgICAgIH0KICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAucGF0aCA9IHAucGF0aG5hbWU7CiAgcC5ocmVmID0gZnVuY3Rpb24oaHJlZiwgYnVpbGQpIHsKICAgIHZhciBrZXk7CgogICAgaWYgKGhyZWYgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpOwogICAgfQoKICAgIHRoaXMuX3N0cmluZyA9ICcnOwogICAgdGhpcy5fcGFydHMgPSBVUkkuX3BhcnRzKCk7CgogICAgdmFyIF9VUkkgPSBocmVmIGluc3RhbmNlb2YgVVJJOwogICAgdmFyIF9vYmplY3QgPSB0eXBlb2YgaHJlZiA9PT0gJ29iamVjdCcgJiYgKGhyZWYuaG9zdG5hbWUgfHwgaHJlZi5wYXRoIHx8IGhyZWYucGF0aG5hbWUpOwogICAgaWYgKGhyZWYubm9kZU5hbWUpIHsKICAgICAgdmFyIGF0dHJpYnV0ZSA9IFVSSS5nZXREb21BdHRyaWJ1dGUoaHJlZik7CiAgICAgIGhyZWYgPSBocmVmW2F0dHJpYnV0ZV0gfHwgJyc7CiAgICAgIF9vYmplY3QgPSBmYWxzZTsKICAgIH0KCiAgICAvLyB3aW5kb3cubG9jYXRpb24gaXMgcmVwb3J0ZWQgdG8gYmUgYW4gb2JqZWN0LCBidXQgaXQncyBub3QgdGhlIHNvcnQKICAgIC8vIG9mIG9iamVjdCB3ZSdyZSBsb29raW5nIGZvcjoKICAgIC8vICogbG9jYXRpb24ucHJvdG9jb2wgZW5kcyB3aXRoIGEgY29sb24KICAgIC8vICogbG9jYXRpb24ucXVlcnkgIT0gb2JqZWN0LnNlYXJjaAogICAgLy8gKiBsb2NhdGlvbi5oYXNoICE9IG9iamVjdC5mcmFnbWVudAogICAgLy8gc2ltcGx5IHNlcmlhbGl6aW5nIHRoZSB1bmtub3duIG9iamVjdCBzaG91bGQgZG8gdGhlIHRyaWNrCiAgICAvLyAoZm9yIGxvY2F0aW9uLCBub3QgZm9yIGV2ZXJ5dGhpbmcuLi4pCiAgICBpZiAoIV9VUkkgJiYgX29iamVjdCAmJiBocmVmLnBhdGhuYW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgaHJlZiA9IGhyZWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICBpZiAodHlwZW9mIGhyZWYgPT09ICdzdHJpbmcnIHx8IGhyZWYgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgICAgdGhpcy5fcGFydHMgPSBVUkkucGFyc2UoU3RyaW5nKGhyZWYpLCB0aGlzLl9wYXJ0cyk7CiAgICB9IGVsc2UgaWYgKF9VUkkgfHwgX29iamVjdCkgewogICAgICB2YXIgc3JjID0gX1VSSSA/IGhyZWYuX3BhcnRzIDogaHJlZjsKICAgICAgZm9yIChrZXkgaW4gc3JjKSB7CiAgICAgICAgaWYgKGhhc093bi5jYWxsKHRoaXMuX3BhcnRzLCBrZXkpKSB7CiAgICAgICAgICB0aGlzLl9wYXJ0c1trZXldID0gc3JjW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGlucHV0Jyk7CiAgICB9CgogICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gaWRlbnRpZmljYXRpb24gYWNjZXNzb3JzCiAgcC5pcyA9IGZ1bmN0aW9uKHdoYXQpIHsKICAgIHZhciBpcCA9IGZhbHNlOwogICAgdmFyIGlwNCA9IGZhbHNlOwogICAgdmFyIGlwNiA9IGZhbHNlOwogICAgdmFyIG5hbWUgPSBmYWxzZTsKICAgIHZhciBzbGQgPSBmYWxzZTsKICAgIHZhciBpZG4gPSBmYWxzZTsKICAgIHZhciBwdW55Y29kZSA9IGZhbHNlOwogICAgdmFyIHJlbGF0aXZlID0gIXRoaXMuX3BhcnRzLnVybjsKCiAgICBpZiAodGhpcy5fcGFydHMuaG9zdG5hbWUpIHsKICAgICAgcmVsYXRpdmUgPSBmYWxzZTsKICAgICAgaXA0ID0gVVJJLmlwNF9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICBpcDYgPSBVUkkuaXA2X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIGlwID0gaXA0IHx8IGlwNjsKICAgICAgbmFtZSA9ICFpcDsKICAgICAgc2xkID0gbmFtZSAmJiBTTEQgJiYgU0xELmhhcyh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIGlkbiA9IG5hbWUgJiYgVVJJLmlkbl9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICBwdW55Y29kZSA9IG5hbWUgJiYgVVJJLnB1bnljb2RlX2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICB9CgogICAgc3dpdGNoICh3aGF0LnRvTG93ZXJDYXNlKCkpIHsKICAgICAgY2FzZSAncmVsYXRpdmUnOgogICAgICAgIHJldHVybiByZWxhdGl2ZTsKCiAgICAgIGNhc2UgJ2Fic29sdXRlJzoKICAgICAgICByZXR1cm4gIXJlbGF0aXZlOwoKICAgICAgLy8gaG9zdG5hbWUgaWRlbnRpZmljYXRpb24KICAgICAgY2FzZSAnZG9tYWluJzoKICAgICAgY2FzZSAnbmFtZSc6CiAgICAgICAgcmV0dXJuIG5hbWU7CgogICAgICBjYXNlICdzbGQnOgogICAgICAgIHJldHVybiBzbGQ7CgogICAgICBjYXNlICdpcCc6CiAgICAgICAgcmV0dXJuIGlwOwoKICAgICAgY2FzZSAnaXA0JzoKICAgICAgY2FzZSAnaXB2NCc6CiAgICAgIGNhc2UgJ2luZXQ0JzoKICAgICAgICByZXR1cm4gaXA0OwoKICAgICAgY2FzZSAnaXA2JzoKICAgICAgY2FzZSAnaXB2Nic6CiAgICAgIGNhc2UgJ2luZXQ2JzoKICAgICAgICByZXR1cm4gaXA2OwoKICAgICAgY2FzZSAnaWRuJzoKICAgICAgICByZXR1cm4gaWRuOwoKICAgICAgY2FzZSAndXJsJzoKICAgICAgICByZXR1cm4gIXRoaXMuX3BhcnRzLnVybjsKCiAgICAgIGNhc2UgJ3Vybic6CiAgICAgICAgcmV0dXJuICEhdGhpcy5fcGFydHMudXJuOwoKICAgICAgY2FzZSAncHVueWNvZGUnOgogICAgICAgIHJldHVybiBwdW55Y29kZTsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9OwoKICAvLyBjb21wb25lbnQgc3BlY2lmaWMgaW5wdXQgdmFsaWRhdGlvbgogIHZhciBfcHJvdG9jb2wgPSBwLnByb3RvY29sOwogIHZhciBfcG9ydCA9IHAucG9ydDsKICB2YXIgX2hvc3RuYW1lID0gcC5ob3N0bmFtZTsKCiAgcC5wcm90b2NvbCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICh2KSB7CiAgICAgICAgLy8gYWNjZXB0IHRyYWlsaW5nIDovLwogICAgICAgIHYgPSB2LnJlcGxhY2UoLzooXC9cLyk/JC8sICcnKTsKCiAgICAgICAgaWYgKCF2Lm1hdGNoKFVSSS5wcm90b2NvbF9leHByZXNzaW9uKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvdG9jb2wgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIG9yIGRvZXNuXCd0IHN0YXJ0IHdpdGggW0EtWl0nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfcHJvdG9jb2wuY2FsbCh0aGlzLCB2LCBidWlsZCk7CiAgfTsKICBwLnNjaGVtZSA9IHAucHJvdG9jb2w7CiAgcC5wb3J0ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICh2ID09PSAwKSB7CiAgICAgICAgdiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmICh2KSB7CiAgICAgICAgdiArPSAnJzsKICAgICAgICBpZiAodi5jaGFyQXQoMCkgPT09ICc6JykgewogICAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHYubWF0Y2goL1teMC05XS8pKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQb3J0ICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbMC05XScpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIF9wb3J0LmNhbGwodGhpcywgdiwgYnVpbGQpOwogIH07CiAgcC5ob3N0bmFtZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgeCA9IHt9OwogICAgICB2YXIgcmVzID0gVVJJLnBhcnNlSG9zdCh2LCB4KTsKICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTsKICAgICAgfQoKICAgICAgdiA9IHguaG9zdG5hbWU7CiAgICB9CiAgICByZXR1cm4gX2hvc3RuYW1lLmNhbGwodGhpcywgdiwgYnVpbGQpOwogIH07CgogIC8vIGNvbXBvdW5kIGFjY2Vzc29ycwogIHAub3JpZ2luID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2woKTsKICAgICAgdmFyIGF1dGhvcml0eSA9IHRoaXMuYXV0aG9yaXR5KCk7CiAgICAgIGlmICghYXV0aG9yaXR5KSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICByZXR1cm4gKHByb3RvY29sID8gcHJvdG9jb2wgKyAnOi8vJyA6ICcnKSArIHRoaXMuYXV0aG9yaXR5KCk7CiAgICB9IGVsc2UgewogICAgICB2YXIgb3JpZ2luID0gVVJJKHYpOwogICAgICB0aGlzCiAgICAgICAgLnByb3RvY29sKG9yaWdpbi5wcm90b2NvbCgpKQogICAgICAgIC5hdXRob3JpdHkob3JpZ2luLmF1dGhvcml0eSgpKQogICAgICAgIC5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuaG9zdCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUgPyBVUkkuYnVpbGRIb3N0KHRoaXMuX3BhcnRzKSA6ICcnOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUhvc3QodiwgdGhpcy5fcGFydHMpOwogICAgICBpZiAocmVzICE9PSAnLycpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSAiJyArIHYgKyAnIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5hdXRob3JpdHkgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gVVJJLmJ1aWxkQXV0aG9yaXR5KHRoaXMuX3BhcnRzKSA6ICcnOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUF1dGhvcml0eSh2LCB0aGlzLl9wYXJ0cyk7CiAgICAgIGlmIChyZXMgIT09ICcvJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dJyk7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnVzZXJpbmZvID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhciB0ID0gVVJJLmJ1aWxkVXNlcmluZm8odGhpcy5fcGFydHMpOwogICAgICByZXR1cm4gdCA/IHQuc3Vic3RyaW5nKDAsIHQubGVuZ3RoIC0xKSA6IHQ7CiAgICB9IGVsc2UgewogICAgICBpZiAodlt2Lmxlbmd0aC0xXSAhPT0gJ0AnKSB7CiAgICAgICAgdiArPSAnQCc7CiAgICAgIH0KCiAgICAgIFVSSS5wYXJzZVVzZXJpbmZvKHYsIHRoaXMuX3BhcnRzKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAucmVzb3VyY2UgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgdmFyIHBhcnRzOwoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMucGF0aCgpICsgdGhpcy5zZWFyY2goKSArIHRoaXMuaGFzaCgpOwogICAgfQoKICAgIHBhcnRzID0gVVJJLnBhcnNlKHYpOwogICAgdGhpcy5fcGFydHMucGF0aCA9IHBhcnRzLnBhdGg7CiAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IHBhcnRzLnF1ZXJ5OwogICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBwYXJ0cy5mcmFnbWVudDsKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIGZyYWN0aW9uIGFjY2Vzc29ycwogIHAuc3ViZG9tYWluID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICAvLyBjb252ZW5pZW5jZSwgcmV0dXJuICJ3d3ciIGZyb20gInd3dy5leGFtcGxlLm9yZyIKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICAvLyBncmFiIGRvbWFpbiBhbmQgYWRkIGFub3RoZXIgc2VnbWVudAogICAgICB2YXIgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoIC0gdGhpcy5kb21haW4oKS5sZW5ndGggLSAxOwogICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGVuZCkgfHwgJyc7CiAgICB9IGVsc2UgewogICAgICB2YXIgZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aCAtIHRoaXMuZG9tYWluKCkubGVuZ3RoOwogICAgICB2YXIgc3ViID0gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGUpOwogICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoJ14nICsgZXNjYXBlUmVnRXgoc3ViKSk7CgogICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLicpIHsKICAgICAgICB2ICs9ICcuJzsKICAgICAgfQoKICAgICAgaWYgKHYpIHsKICAgICAgICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSh2KTsKICAgICAgfQoKICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5kb21haW4gPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgIGJ1aWxkID0gdjsKICAgICAgdiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICAvLyBjb252ZW5pZW5jZSwgcmV0dXJuICJleGFtcGxlLm9yZyIgZnJvbSAid3d3LmV4YW1wbGUub3JnIgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIC8vIGlmIGhvc3RuYW1lIGNvbnNpc3RzIG9mIDEgb3IgMiBzZWdtZW50cywgaXQgbXVzdCBiZSB0aGUgZG9tYWluCiAgICAgIHZhciB0ID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubWF0Y2goL1wuL2cpOwogICAgICBpZiAodCAmJiB0Lmxlbmd0aCA8IDIpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWU7CiAgICAgIH0KCiAgICAgIC8vIGdyYWIgdGxkIGFuZCBhZGQgYW5vdGhlciBzZWdtZW50CiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGggLSB0aGlzLnRsZChidWlsZCkubGVuZ3RoIC0gMTsKICAgICAgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGFzdEluZGV4T2YoJy4nLCBlbmQgLTEpICsgMTsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhlbmQpIHx8ICcnOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCF2KSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY2Fubm90IHNldCBkb21haW4gZW1wdHknKTsKICAgICAgfQoKICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodik7CgogICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMuZG9tYWluKCkpICsgJyQnKTsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnRsZCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHsKICAgICAgYnVpbGQgPSB2OwogICAgICB2ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIC8vIHJldHVybiAib3JnIiBmcm9tICJ3d3cuZXhhbXBsZS5vcmciCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgdmFyIHBvcyA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIHZhciB0bGQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcocG9zICsgMSk7CgogICAgICBpZiAoYnVpbGQgIT09IHRydWUgJiYgU0xEICYmIFNMRC5saXN0W3RsZC50b0xvd2VyQ2FzZSgpXSkgewogICAgICAgIHJldHVybiBTTEQuZ2V0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB8fCB0bGQ7CiAgICAgIH0KCiAgICAgIHJldHVybiB0bGQ7CiAgICB9IGVsc2UgewogICAgICB2YXIgcmVwbGFjZTsKCiAgICAgIGlmICghdikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Nhbm5vdCBzZXQgVExEIGVtcHR5Jyk7CiAgICAgIH0gZWxzZSBpZiAodi5tYXRjaCgvW15hLXpBLVowLTktXS8pKSB7CiAgICAgICAgaWYgKFNMRCAmJiBTTEQuaXModikpIHsKICAgICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMudGxkKCkpICsgJyQnKTsKICAgICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVExEICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05XScpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkgewogICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignY2Fubm90IHNldCBUTEQgb24gbm9uLWRvbWFpbiBob3N0Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy50bGQoKSkgKyAnJCcpOwogICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTsKICAgICAgfQoKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuZGlyZWN0b3J5ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5wYXRoICYmICF0aGlzLl9wYXJ0cy5ob3N0bmFtZSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykgewogICAgICAgIHJldHVybiAnLyc7CiAgICAgIH0KCiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGggLSAxOwogICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCwgZW5kKSB8fCAodGhpcy5fcGFydHMuaG9zdG5hbWUgPyAnLycgOiAnJyk7CgogICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoKHJlcykgOiByZXM7CgogICAgfSBlbHNlIHsKICAgICAgdmFyIGUgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGg7CiAgICAgIHZhciBkaXJlY3RvcnkgPSB0aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZygwLCBlKTsKICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKCdeJyArIGVzY2FwZVJlZ0V4KGRpcmVjdG9yeSkpOwoKICAgICAgLy8gZnVsbHkgcXVhbGlmaWVyIGRpcmVjdG9yaWVzIGJlZ2luIHdpdGggYSBzbGFzaAogICAgICBpZiAoIXRoaXMuaXMoJ3JlbGF0aXZlJykpIHsKICAgICAgICBpZiAoIXYpIHsKICAgICAgICAgIHYgPSAnLyc7CiAgICAgICAgfQoKICAgICAgICBpZiAodi5jaGFyQXQoMCkgIT09ICcvJykgewogICAgICAgICAgdiA9ICcvJyArIHY7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBkaXJlY3RvcmllcyBhbHdheXMgZW5kIHdpdGggYSBzbGFzaAogICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLycpIHsKICAgICAgICB2ICs9ICcvJzsKICAgICAgfQoKICAgICAgdiA9IFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHJlcGxhY2UsIHYpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5maWxlbmFtZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSB0cnVlKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMucGF0aCB8fCB0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIHZhciBwb3MgPSB0aGlzLl9wYXJ0cy5wYXRoLmxhc3RJbmRleE9mKCcvJyk7CiAgICAgIHZhciByZXMgPSB0aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZyhwb3MrMSk7CgogICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoU2VnbWVudChyZXMpIDogcmVzOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG11dGF0ZWREaXJlY3RvcnkgPSBmYWxzZTsKCiAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJy8nKSB7CiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICB9CgogICAgICBpZiAodi5tYXRjaCgvXC4/XC8vKSkgewogICAgICAgIG11dGF0ZWREaXJlY3RvcnkgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy5maWxlbmFtZSgpKSArICckJyk7CiAgICAgIHYgPSBVUkkucmVjb2RlUGF0aCh2KTsKICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZShyZXBsYWNlLCB2KTsKCiAgICAgIGlmIChtdXRhdGVkRGlyZWN0b3J5KSB7CiAgICAgICAgdGhpcy5ub3JtYWxpemVQYXRoKGJ1aWxkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5zdWZmaXggPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkgewogICAgICBpZiAoIXRoaXMuX3BhcnRzLnBhdGggfHwgdGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICB2YXIgZmlsZW5hbWUgPSB0aGlzLmZpbGVuYW1lKCk7CiAgICAgIHZhciBwb3MgPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICB2YXIgcywgcmVzOwoKICAgICAgaWYgKHBvcyA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIC8vIHN1ZmZpeCBtYXkgb25seSBjb250YWluIGFsbnVtIGNoYXJhY3RlcnMgKHl1cCwgSSBtYWRlIHRoaXMgdXAuKQogICAgICBzID0gZmlsZW5hbWUuc3Vic3RyaW5nKHBvcysxKTsKICAgICAgcmVzID0gKC9eW2EtejAtOSVdKyQvaSkudGVzdChzKSA/IHMgOiAnJzsKICAgICAgcmV0dXJuIHYgPyBVUkkuZGVjb2RlUGF0aFNlZ21lbnQocmVzKSA6IHJlczsKICAgIH0gZWxzZSB7CiAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJy4nKSB7CiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICB9CgogICAgICB2YXIgc3VmZml4ID0gdGhpcy5zdWZmaXgoKTsKICAgICAgdmFyIHJlcGxhY2U7CgogICAgICBpZiAoIXN1ZmZpeCkgewogICAgICAgIGlmICghdikgewogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9wYXJ0cy5wYXRoICs9ICcuJyArIFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICB9IGVsc2UgaWYgKCF2KSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgoJy4nICsgc3VmZml4KSArICckJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgoc3VmZml4KSArICckJyk7CiAgICAgIH0KCiAgICAgIGlmIChyZXBsYWNlKSB7CiAgICAgICAgdiA9IFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB0aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UocmVwbGFjZSwgdik7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnNlZ21lbnQgPSBmdW5jdGlvbihzZWdtZW50LCB2LCBidWlsZCkgewogICAgdmFyIHNlcGFyYXRvciA9IHRoaXMuX3BhcnRzLnVybiA/ICc6JyA6ICcvJzsKICAgIHZhciBwYXRoID0gdGhpcy5wYXRoKCk7CiAgICB2YXIgYWJzb2x1dGUgPSBwYXRoLnN1YnN0cmluZygwLCAxKSA9PT0gJy8nOwogICAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdChzZXBhcmF0b3IpOwoKICAgIGlmIChzZWdtZW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHNlZ21lbnQgIT09ICdudW1iZXInKSB7CiAgICAgIGJ1aWxkID0gdjsKICAgICAgdiA9IHNlZ21lbnQ7CiAgICAgIHNlZ21lbnQgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKHNlZ21lbnQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc2VnbWVudCAhPT0gJ251bWJlcicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdCYWQgc2VnbWVudCAiJyArIHNlZ21lbnQgKyAnIiwgbXVzdCBiZSAwLWJhc2VkIGludGVnZXInKTsKICAgIH0KCiAgICBpZiAoYWJzb2x1dGUpIHsKICAgICAgc2VnbWVudHMuc2hpZnQoKTsKICAgIH0KCiAgICBpZiAoc2VnbWVudCA8IDApIHsKICAgICAgLy8gYWxsb3cgbmVnYXRpdmUgaW5kZXhlcyB0byBhZGRyZXNzIGZyb20gdGhlIGVuZAogICAgICBzZWdtZW50ID0gTWF0aC5tYXgoc2VnbWVudHMubGVuZ3RoICsgc2VnbWVudCwgMCk7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICAvKmpzaGludCBsYXhicmVhazogdHJ1ZSAqLwogICAgICByZXR1cm4gc2VnbWVudCA9PT0gdW5kZWZpbmVkCiAgICAgICAgPyBzZWdtZW50cwogICAgICAgIDogc2VnbWVudHNbc2VnbWVudF07CiAgICAgIC8qanNoaW50IGxheGJyZWFrOiBmYWxzZSAqLwogICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSBudWxsIHx8IHNlZ21lbnRzW3NlZ21lbnRdID09PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKGlzQXJyYXkodikpIHsKICAgICAgICBzZWdtZW50cyA9IFtdOwogICAgICAgIC8vIGNvbGxhcHNlIGVtcHR5IGVsZW1lbnRzIHdpdGhpbiBhcnJheQogICAgICAgIGZvciAodmFyIGk9MCwgbD12Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgaWYgKCF2W2ldLmxlbmd0aCAmJiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXS5sZW5ndGgpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzZWdtZW50cy5sZW5ndGggJiYgIXNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtMV0ubGVuZ3RoKSB7CiAgICAgICAgICAgIHNlZ21lbnRzLnBvcCgpOwogICAgICAgICAgfQoKICAgICAgICAgIHNlZ21lbnRzLnB1c2godHJpbVNsYXNoZXModltpXSkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh2IHx8IHR5cGVvZiB2ID09PSAnc3RyaW5nJykgewogICAgICAgIHYgPSB0cmltU2xhc2hlcyh2KTsKICAgICAgICBpZiAoc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9PT0gJycpIHsKICAgICAgICAgIC8vIGVtcHR5IHRyYWlsaW5nIGVsZW1lbnRzIGhhdmUgdG8gYmUgb3ZlcndyaXR0ZW4KICAgICAgICAgIC8vIHRvIHByZXZlbnQgcmVzdWx0cyBzdWNoIGFzIC9mb28vL2JhcgogICAgICAgICAgc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9IHY7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlZ21lbnRzLnB1c2godik7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAodikgewogICAgICAgIHNlZ21lbnRzW3NlZ21lbnRdID0gdHJpbVNsYXNoZXModik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VnbWVudHMuc3BsaWNlKHNlZ21lbnQsIDEpOwogICAgICB9CiAgICB9CgogICAgaWYgKGFic29sdXRlKSB7CiAgICAgIHNlZ21lbnRzLnVuc2hpZnQoJycpOwogICAgfQoKICAgIHJldHVybiB0aGlzLnBhdGgoc2VnbWVudHMuam9pbihzZXBhcmF0b3IpLCBidWlsZCk7CiAgfTsKICBwLnNlZ21lbnRDb2RlZCA9IGZ1bmN0aW9uKHNlZ21lbnQsIHYsIGJ1aWxkKSB7CiAgICB2YXIgc2VnbWVudHMsIGksIGw7CgogICAgaWYgKHR5cGVvZiBzZWdtZW50ICE9PSAnbnVtYmVyJykgewogICAgICBidWlsZCA9IHY7CiAgICAgIHYgPSBzZWdtZW50OwogICAgICBzZWdtZW50ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgc2VnbWVudHMgPSB0aGlzLnNlZ21lbnQoc2VnbWVudCwgdiwgYnVpbGQpOwogICAgICBpZiAoIWlzQXJyYXkoc2VnbWVudHMpKSB7CiAgICAgICAgc2VnbWVudHMgPSBzZWdtZW50cyAhPT0gdW5kZWZpbmVkID8gVVJJLmRlY29kZShzZWdtZW50cykgOiB1bmRlZmluZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChpID0gMCwgbCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgc2VnbWVudHNbaV0gPSBVUkkuZGVjb2RlKHNlZ21lbnRzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzZWdtZW50czsKICAgIH0KCiAgICBpZiAoIWlzQXJyYXkodikpIHsKICAgICAgdiA9ICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgfHwgdiBpbnN0YW5jZW9mIFN0cmluZykgPyBVUkkuZW5jb2RlKHYpIDogdjsKICAgIH0gZWxzZSB7CiAgICAgIGZvciAoaSA9IDAsIGwgPSB2Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHZbaV0gPSBVUkkuZW5jb2RlKHZbaV0pOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc2VnbWVudChzZWdtZW50LCB2LCBidWlsZCk7CiAgfTsKCiAgLy8gbXV0YXRpbmcgcXVlcnkgc3RyaW5nCiAgdmFyIHEgPSBwLnF1ZXJ5OwogIHAucXVlcnkgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHYgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09ICdmdW5jdGlvbicpIHsKICAgICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgIHZhciByZXN1bHQgPSB2LmNhbGwodGhpcywgZGF0YSk7CiAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkocmVzdWx0IHx8IGRhdGEsIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9IGVsc2UgaWYgKHYgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHsKICAgICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeSh2LCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHEuY2FsbCh0aGlzLCB2LCBidWlsZCk7CiAgICB9CiAgfTsKICBwLnNldFF1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGJ1aWxkKSB7CiAgICB2YXIgZGF0YSA9IFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKCiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnIHx8IG5hbWUgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgICAgZGF0YVtuYW1lXSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IG51bGw7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JykgewogICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkgewogICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7CiAgICAgICAgICBkYXRhW2tleV0gPSBuYW1lW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBuYW1lIHBhcmFtZXRlcicpOwogICAgfQoKICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkoZGF0YSwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHsKICAgICAgYnVpbGQgPSB2YWx1ZTsKICAgIH0KCiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICByZXR1cm4gdGhpczsKICB9OwogIHAuYWRkUXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYnVpbGQpIHsKICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWUpOwogICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgewogICAgICBidWlsZCA9IHZhbHVlOwogICAgfQoKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBidWlsZCkgewogICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICBVUkkucmVtb3ZlUXVlcnkoZGF0YSwgbmFtZSwgdmFsdWUpOwogICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgewogICAgICBidWlsZCA9IHZhbHVlOwogICAgfQoKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5oYXNRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSkgewogICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICByZXR1cm4gVVJJLmhhc1F1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSk7CiAgfTsKICBwLnNldFNlYXJjaCA9IHAuc2V0UXVlcnk7CiAgcC5hZGRTZWFyY2ggPSBwLmFkZFF1ZXJ5OwogIHAucmVtb3ZlU2VhcmNoID0gcC5yZW1vdmVRdWVyeTsKICBwLmhhc1NlYXJjaCA9IHAuaGFzUXVlcnk7CgogIC8vIHNhbml0aXppbmcgVVJMcwogIHAubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB0aGlzCiAgICAgICAgLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKQogICAgICAgIC5ub3JtYWxpemVQYXRoKGZhbHNlKQogICAgICAgIC5ub3JtYWxpemVRdWVyeShmYWxzZSkKICAgICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpCiAgICAgICAgLmJ1aWxkKCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMKICAgICAgLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKQogICAgICAubm9ybWFsaXplSG9zdG5hbWUoZmFsc2UpCiAgICAgIC5ub3JtYWxpemVQb3J0KGZhbHNlKQogICAgICAubm9ybWFsaXplUGF0aChmYWxzZSkKICAgICAgLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKQogICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpCiAgICAgIC5idWlsZCgpOwogIH07CiAgcC5ub3JtYWxpemVQcm90b2NvbCA9IGZ1bmN0aW9uKGJ1aWxkKSB7CiAgICBpZiAodHlwZW9mIHRoaXMuX3BhcnRzLnByb3RvY29sID09PSAnc3RyaW5nJykgewogICAgICB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9IHRoaXMuX3BhcnRzLnByb3RvY29sLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwogIHAubm9ybWFsaXplSG9zdG5hbWUgPSBmdW5jdGlvbihidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB7CiAgICAgIGlmICh0aGlzLmlzKCdJRE4nKSAmJiBwdW55Y29kZSkgewogICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pcygnSVB2NicpICYmIElQdjYpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IElQdjYuYmVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5ub3JtYWxpemVQb3J0ID0gZnVuY3Rpb24oYnVpbGQpIHsKICAgIC8vIHJlbW92ZSBwb3J0IG9mIGl0J3MgdGhlIHByb3RvY29sJ3MgZGVmYXVsdAogICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9PT0gJ3N0cmluZycgJiYgdGhpcy5fcGFydHMucG9ydCA9PT0gVVJJLmRlZmF1bHRQb3J0c1t0aGlzLl9wYXJ0cy5wcm90b2NvbF0pIHsKICAgICAgdGhpcy5fcGFydHMucG9ydCA9IG51bGw7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwogIHAubm9ybWFsaXplUGF0aCA9IGZ1bmN0aW9uKGJ1aWxkKSB7CiAgICB2YXIgX3BhdGggPSB0aGlzLl9wYXJ0cy5wYXRoOwogICAgaWYgKCFfcGF0aCkgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSBVUkkucmVjb2RlVXJuUGF0aCh0aGlzLl9wYXJ0cy5wYXRoKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBpZiAodGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIF9wYXRoID0gVVJJLnJlY29kZVBhdGgoX3BhdGgpOwoKICAgIHZhciBfd2FzX3JlbGF0aXZlOwogICAgdmFyIF9sZWFkaW5nUGFyZW50cyA9ICcnOwogICAgdmFyIF9wYXJlbnQsIF9wb3M7CgogICAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzCiAgICBpZiAoX3BhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgX3dhc19yZWxhdGl2ZSA9IHRydWU7CiAgICAgIF9wYXRoID0gJy8nICsgX3BhdGg7CiAgICB9CgogICAgLy8gaGFuZGxlIHJlbGF0aXZlIGZpbGVzIChhcyBvcHBvc2VkIHRvIGRpcmVjdG9yaWVzKQogICAgaWYgKF9wYXRoLnNsaWNlKC0zKSA9PT0gJy8uLicgfHwgX3BhdGguc2xpY2UoLTIpID09PSAnLy4nKSB7CiAgICAgIF9wYXRoICs9ICcvJzsKICAgIH0KCiAgICAvLyByZXNvbHZlIHNpbXBsZXMKICAgIF9wYXRoID0gX3BhdGgKICAgICAgLnJlcGxhY2UoLyhcLyhcLlwvKSspfChcL1wuJCkvZywgJy8nKQogICAgICAucmVwbGFjZSgvXC97Mix9L2csICcvJyk7CgogICAgLy8gcmVtZW1iZXIgbGVhZGluZyBwYXJlbnRzCiAgICBpZiAoX3dhc19yZWxhdGl2ZSkgewogICAgICBfbGVhZGluZ1BhcmVudHMgPSBfcGF0aC5zdWJzdHJpbmcoMSkubWF0Y2goL14oXC5cLlwvKSsvKSB8fCAnJzsKICAgICAgaWYgKF9sZWFkaW5nUGFyZW50cykgewogICAgICAgIF9sZWFkaW5nUGFyZW50cyA9IF9sZWFkaW5nUGFyZW50c1swXTsKICAgICAgfQogICAgfQoKICAgIC8vIHJlc29sdmUgcGFyZW50cwogICAgd2hpbGUgKHRydWUpIHsKICAgICAgX3BhcmVudCA9IF9wYXRoLnNlYXJjaCgvXC9cLlwuKFwvfCQpLyk7CiAgICAgIGlmIChfcGFyZW50ID09PSAtMSkgewogICAgICAgIC8vIG5vIG1vcmUgLi4vIHRvIHJlc29sdmUKICAgICAgICBicmVhazsKICAgICAgfSBlbHNlIGlmIChfcGFyZW50ID09PSAwKSB7CiAgICAgICAgLy8gdG9wIGxldmVsIGNhbm5vdCBiZSByZWxhdGl2ZSwgc2tpcCBpdAogICAgICAgIF9wYXRoID0gX3BhdGguc3Vic3RyaW5nKDMpOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBfcG9zID0gX3BhdGguc3Vic3RyaW5nKDAsIF9wYXJlbnQpLmxhc3RJbmRleE9mKCcvJyk7CiAgICAgIGlmIChfcG9zID09PSAtMSkgewogICAgICAgIF9wb3MgPSBfcGFyZW50OwogICAgICB9CiAgICAgIF9wYXRoID0gX3BhdGguc3Vic3RyaW5nKDAsIF9wb3MpICsgX3BhdGguc3Vic3RyaW5nKF9wYXJlbnQgKyAzKTsKICAgIH0KCiAgICAvLyByZXZlcnQgdG8gcmVsYXRpdmUKICAgIGlmIChfd2FzX3JlbGF0aXZlICYmIHRoaXMuaXMoJ3JlbGF0aXZlJykpIHsKICAgICAgX3BhdGggPSBfbGVhZGluZ1BhcmVudHMgKyBfcGF0aC5zdWJzdHJpbmcoMSk7CiAgICB9CgogICAgdGhpcy5fcGFydHMucGF0aCA9IF9wYXRoOwogICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZVBhdGhuYW1lID0gcC5ub3JtYWxpemVQYXRoOwogIHAubm9ybWFsaXplUXVlcnkgPSBmdW5jdGlvbihidWlsZCkgewogICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5xdWVyeSA9PT0gJ3N0cmluZycpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5xdWVyeS5sZW5ndGgpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5xdWVyeShVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZUZyYWdtZW50ID0gZnVuY3Rpb24oYnVpbGQpIHsKICAgIGlmICghdGhpcy5fcGFydHMuZnJhZ21lbnQpIHsKICAgICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBudWxsOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZVNlYXJjaCA9IHAubm9ybWFsaXplUXVlcnk7CiAgcC5ub3JtYWxpemVIYXNoID0gcC5ub3JtYWxpemVGcmFnbWVudDsKCiAgcC5pc284ODU5ID0gZnVuY3Rpb24oKSB7CiAgICAvLyBleHBlY3QgdW5pY29kZSBpbnB1dCwgaXNvODg1OSBvdXRwdXQKICAgIHZhciBlID0gVVJJLmVuY29kZTsKICAgIHZhciBkID0gVVJJLmRlY29kZTsKCiAgICBVUkkuZW5jb2RlID0gZXNjYXBlOwogICAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDsKICAgIHRyeSB7CiAgICAgIHRoaXMubm9ybWFsaXplKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBVUkkuZW5jb2RlID0gZTsKICAgICAgVVJJLmRlY29kZSA9IGQ7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLnVuaWNvZGUgPSBmdW5jdGlvbigpIHsKICAgIC8vIGV4cGVjdCBpc284ODU5IGlucHV0LCB1bmljb2RlIG91dHB1dAogICAgdmFyIGUgPSBVUkkuZW5jb2RlOwogICAgdmFyIGQgPSBVUkkuZGVjb2RlOwoKICAgIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7CiAgICBVUkkuZGVjb2RlID0gdW5lc2NhcGU7CiAgICB0cnkgewogICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgVVJJLmVuY29kZSA9IGU7CiAgICAgIFVSSS5kZWNvZGUgPSBkOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcC5yZWFkYWJsZSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHVyaSA9IHRoaXMuY2xvbmUoKTsKICAgIC8vIHJlbW92aW5nIHVzZXJuYW1lLCBwYXNzd29yZCwgYmVjYXVzZSB0aGV5IHNob3VsZG4ndCBiZSBkaXNwbGF5ZWQgYWNjb3JkaW5nIHRvIFJGQyAzOTg2CiAgICB1cmkudXNlcm5hbWUoJycpLnBhc3N3b3JkKCcnKS5ub3JtYWxpemUoKTsKICAgIHZhciB0ID0gJyc7CiAgICBpZiAodXJpLl9wYXJ0cy5wcm90b2NvbCkgewogICAgICB0ICs9IHVyaS5fcGFydHMucHJvdG9jb2wgKyAnOi8vJzsKICAgIH0KCiAgICBpZiAodXJpLl9wYXJ0cy5ob3N0bmFtZSkgewogICAgICBpZiAodXJpLmlzKCdwdW55Y29kZScpICYmIHB1bnljb2RlKSB7CiAgICAgICAgdCArPSBwdW55Y29kZS50b1VuaWNvZGUodXJpLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgICAgaWYgKHVyaS5fcGFydHMucG9ydCkgewogICAgICAgICAgdCArPSAnOicgKyB1cmkuX3BhcnRzLnBvcnQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHQgKz0gdXJpLmhvc3QoKTsKICAgICAgfQogICAgfQoKICAgIGlmICh1cmkuX3BhcnRzLmhvc3RuYW1lICYmIHVyaS5fcGFydHMucGF0aCAmJiB1cmkuX3BhcnRzLnBhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgdCArPSAnLyc7CiAgICB9CgogICAgdCArPSB1cmkucGF0aCh0cnVlKTsKICAgIGlmICh1cmkuX3BhcnRzLnF1ZXJ5KSB7CiAgICAgIHZhciBxID0gJyc7CiAgICAgIGZvciAodmFyIGkgPSAwLCBxcCA9IHVyaS5fcGFydHMucXVlcnkuc3BsaXQoJyYnKSwgbCA9IHFwLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHZhciBrdiA9IChxcFtpXSB8fCAnJykuc3BsaXQoJz0nKTsKICAgICAgICBxICs9ICcmJyArIFVSSS5kZWNvZGVRdWVyeShrdlswXSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkKICAgICAgICAgIC5yZXBsYWNlKC8mL2csICclMjYnKTsKCiAgICAgICAgaWYgKGt2WzFdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHEgKz0gJz0nICsgVVJJLmRlY29kZVF1ZXJ5KGt2WzFdLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKQogICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJTI2Jyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHQgKz0gJz8nICsgcS5zdWJzdHJpbmcoMSk7CiAgICB9CgogICAgdCArPSBVUkkuZGVjb2RlUXVlcnkodXJpLmhhc2goKSwgdHJ1ZSk7CiAgICByZXR1cm4gdDsKICB9OwoKICAvLyByZXNvbHZpbmcgcmVsYXRpdmUgYW5kIGFic29sdXRlIFVSTHMKICBwLmFic29sdXRlVG8gPSBmdW5jdGlvbihiYXNlKSB7CiAgICB2YXIgcmVzb2x2ZWQgPSB0aGlzLmNsb25lKCk7CiAgICB2YXIgcHJvcGVydGllcyA9IFsncHJvdG9jb2wnLCAndXNlcm5hbWUnLCAncGFzc3dvcmQnLCAnaG9zdG5hbWUnLCAncG9ydCddOwogICAgdmFyIGJhc2VkaXIsIGksIHA7CgogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSTnMgZG8gbm90IGhhdmUgYW55IGdlbmVyYWxseSBkZWZpbmVkIGhpZXJhcmNoaWNhbCBjb21wb25lbnRzJyk7CiAgICB9CgogICAgaWYgKCEoYmFzZSBpbnN0YW5jZW9mIFVSSSkpIHsKICAgICAgYmFzZSA9IG5ldyBVUkkoYmFzZSk7CiAgICB9CgogICAgaWYgKCFyZXNvbHZlZC5fcGFydHMucHJvdG9jb2wpIHsKICAgICAgcmVzb2x2ZWQuX3BhcnRzLnByb3RvY29sID0gYmFzZS5fcGFydHMucHJvdG9jb2w7CiAgICB9CgogICAgaWYgKHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB7CiAgICAgIHJldHVybiByZXNvbHZlZDsKICAgIH0KCiAgICBmb3IgKGkgPSAwOyAocCA9IHByb3BlcnRpZXNbaV0pOyBpKyspIHsKICAgICAgcmVzb2x2ZWQuX3BhcnRzW3BdID0gYmFzZS5fcGFydHNbcF07CiAgICB9CgogICAgaWYgKCFyZXNvbHZlZC5fcGFydHMucGF0aCkgewogICAgICByZXNvbHZlZC5fcGFydHMucGF0aCA9IGJhc2UuX3BhcnRzLnBhdGg7CiAgICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5KSB7CiAgICAgICAgcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5ID0gYmFzZS5fcGFydHMucXVlcnk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAocmVzb2x2ZWQuX3BhcnRzLnBhdGguc3Vic3RyaW5nKC0yKSA9PT0gJy4uJykgewogICAgICByZXNvbHZlZC5fcGFydHMucGF0aCArPSAnLyc7CiAgICB9CgogICAgaWYgKHJlc29sdmVkLnBhdGgoKS5jaGFyQXQoMCkgIT09ICcvJykgewogICAgICBiYXNlZGlyID0gYmFzZS5kaXJlY3RvcnkoKTsKICAgICAgYmFzZWRpciA9IGJhc2VkaXIgPyBiYXNlZGlyIDogYmFzZS5wYXRoKCkuaW5kZXhPZignLycpID09PSAwID8gJy8nIDogJyc7CiAgICAgIHJlc29sdmVkLl9wYXJ0cy5wYXRoID0gKGJhc2VkaXIgPyAoYmFzZWRpciArICcvJykgOiAnJykgKyByZXNvbHZlZC5fcGFydHMucGF0aDsKICAgICAgcmVzb2x2ZWQubm9ybWFsaXplUGF0aCgpOwogICAgfQoKICAgIHJlc29sdmVkLmJ1aWxkKCk7CiAgICByZXR1cm4gcmVzb2x2ZWQ7CiAgfTsKICBwLnJlbGF0aXZlVG8gPSBmdW5jdGlvbihiYXNlKSB7CiAgICB2YXIgcmVsYXRpdmUgPSB0aGlzLmNsb25lKCkubm9ybWFsaXplKCk7CiAgICB2YXIgcmVsYXRpdmVQYXJ0cywgYmFzZVBhcnRzLCBjb21tb24sIHJlbGF0aXZlUGF0aCwgYmFzZVBhdGg7CgogICAgaWYgKHJlbGF0aXZlLl9wYXJ0cy51cm4pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpOwogICAgfQoKICAgIGJhc2UgPSBuZXcgVVJJKGJhc2UpLm5vcm1hbGl6ZSgpOwogICAgcmVsYXRpdmVQYXJ0cyA9IHJlbGF0aXZlLl9wYXJ0czsKICAgIGJhc2VQYXJ0cyA9IGJhc2UuX3BhcnRzOwogICAgcmVsYXRpdmVQYXRoID0gcmVsYXRpdmUucGF0aCgpOwogICAgYmFzZVBhdGggPSBiYXNlLnBhdGgoKTsKCiAgICBpZiAocmVsYXRpdmVQYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignVVJJIGlzIGFscmVhZHkgcmVsYXRpdmUnKTsKICAgIH0KCiAgICBpZiAoYmFzZVBhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY2FsY3VsYXRlIGEgVVJJIHJlbGF0aXZlIHRvIGFub3RoZXIgcmVsYXRpdmUgVVJJJyk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGFydHMucHJvdG9jb2wgPT09IGJhc2VQYXJ0cy5wcm90b2NvbCkgewogICAgICByZWxhdGl2ZVBhcnRzLnByb3RvY29sID0gbnVsbDsKICAgIH0KCiAgICBpZiAocmVsYXRpdmVQYXJ0cy51c2VybmFtZSAhPT0gYmFzZVBhcnRzLnVzZXJuYW1lIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IGJhc2VQYXJ0cy5wYXNzd29yZCkgewogICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTsKICAgIH0KCiAgICBpZiAocmVsYXRpdmVQYXJ0cy5wcm90b2NvbCAhPT0gbnVsbCB8fCByZWxhdGl2ZVBhcnRzLnVzZXJuYW1lICE9PSBudWxsIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IG51bGwpIHsKICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGFydHMuaG9zdG5hbWUgPT09IGJhc2VQYXJ0cy5ob3N0bmFtZSAmJiByZWxhdGl2ZVBhcnRzLnBvcnQgPT09IGJhc2VQYXJ0cy5wb3J0KSB7CiAgICAgIHJlbGF0aXZlUGFydHMuaG9zdG5hbWUgPSBudWxsOwogICAgICByZWxhdGl2ZVBhcnRzLnBvcnQgPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGF0aCA9PT0gYmFzZVBhdGgpIHsKICAgICAgcmVsYXRpdmVQYXJ0cy5wYXRoID0gJyc7CiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpOwogICAgfQoKICAgIC8vIGRldGVybWluZSBjb21tb24gc3ViIHBhdGgKICAgIGNvbW1vbiA9IFVSSS5jb21tb25QYXRoKHJlbGF0aXZlUGF0aCwgYmFzZVBhdGgpOwoKICAgIC8vIElmIHRoZSBwYXRocyBoYXZlIG5vdGhpbmcgaW4gY29tbW9uLCByZXR1cm4gYSByZWxhdGl2ZSBVUkwgd2l0aCB0aGUgYWJzb2x1dGUgcGF0aC4KICAgIGlmICghY29tbW9uKSB7CiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpOwogICAgfQoKICAgIHZhciBwYXJlbnRzID0gYmFzZVBhcnRzLnBhdGgKICAgICAgLnN1YnN0cmluZyhjb21tb24ubGVuZ3RoKQogICAgICAucmVwbGFjZSgvW15cL10qJC8sICcnKQogICAgICAucmVwbGFjZSgvLio/XC8vZywgJy4uLycpOwoKICAgIHJlbGF0aXZlUGFydHMucGF0aCA9IChwYXJlbnRzICsgcmVsYXRpdmVQYXJ0cy5wYXRoLnN1YnN0cmluZyhjb21tb24ubGVuZ3RoKSkgfHwgJy4vJzsKCiAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTsKICB9OwoKICAvLyBjb21wYXJpbmcgVVJJcwogIHAuZXF1YWxzID0gZnVuY3Rpb24odXJpKSB7CiAgICB2YXIgb25lID0gdGhpcy5jbG9uZSgpOwogICAgdmFyIHR3byA9IG5ldyBVUkkodXJpKTsKICAgIHZhciBvbmVfbWFwID0ge307CiAgICB2YXIgdHdvX21hcCA9IHt9OwogICAgdmFyIGNoZWNrZWQgPSB7fTsKICAgIHZhciBvbmVfcXVlcnksIHR3b19xdWVyeSwga2V5OwoKICAgIG9uZS5ub3JtYWxpemUoKTsKICAgIHR3by5ub3JtYWxpemUoKTsKCiAgICAvLyBleGFjdCBtYXRjaAogICAgaWYgKG9uZS50b1N0cmluZygpID09PSB0d28udG9TdHJpbmcoKSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBleHRyYWN0IHF1ZXJ5IHN0cmluZwogICAgb25lX3F1ZXJ5ID0gb25lLnF1ZXJ5KCk7CiAgICB0d29fcXVlcnkgPSB0d28ucXVlcnkoKTsKICAgIG9uZS5xdWVyeSgnJyk7CiAgICB0d28ucXVlcnkoJycpOwoKICAgIC8vIGRlZmluaXRlbHkgbm90IGVxdWFsIGlmIG5vdCBldmVuIG5vbi1xdWVyeSBwYXJ0cyBtYXRjaAogICAgaWYgKG9uZS50b1N0cmluZygpICE9PSB0d28udG9TdHJpbmcoKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gcXVlcnkgcGFyYW1ldGVycyBoYXZlIHRoZSBzYW1lIGxlbmd0aCwgZXZlbiBpZiB0aGV5J3JlIHBlcm11dGVkCiAgICBpZiAob25lX3F1ZXJ5Lmxlbmd0aCAhPT0gdHdvX3F1ZXJ5Lmxlbmd0aCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgb25lX21hcCA9IFVSSS5wYXJzZVF1ZXJ5KG9uZV9xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICB0d29fbWFwID0gVVJJLnBhcnNlUXVlcnkodHdvX3F1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKCiAgICBmb3IgKGtleSBpbiBvbmVfbWFwKSB7CiAgICAgIGlmIChoYXNPd24uY2FsbChvbmVfbWFwLCBrZXkpKSB7CiAgICAgICAgaWYgKCFpc0FycmF5KG9uZV9tYXBba2V5XSkpIHsKICAgICAgICAgIGlmIChvbmVfbWFwW2tleV0gIT09IHR3b19tYXBba2V5XSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICghYXJyYXlzRXF1YWwob25lX21hcFtrZXldLCB0d29fbWFwW2tleV0pKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBjaGVja2VkW2tleV0gPSB0cnVlOwogICAgICB9CiAgICB9CgogICAgZm9yIChrZXkgaW4gdHdvX21hcCkgewogICAgICBpZiAoaGFzT3duLmNhbGwodHdvX21hcCwga2V5KSkgewogICAgICAgIGlmICghY2hlY2tlZFtrZXldKSB7CiAgICAgICAgICAvLyB0d28gY29udGFpbnMgYSBwYXJhbWV0ZXIgbm90IHByZXNlbnQgaW4gb25lCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLy8gc3RhdGUKICBwLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9IGZ1bmN0aW9uKHYpIHsKICAgIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9ICEhdjsKICAgIHJldHVybiB0aGlzOwogIH07CgogIHAuZXNjYXBlUXVlcnlTcGFjZSA9IGZ1bmN0aW9uKHYpIHsKICAgIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UgPSAhIXY7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICByZXR1cm4gVVJJOwp9KSk7Cgp9LHsiLi9JUHY2IjoyLCIuL1NlY29uZExldmVsRG9tYWlucyI6MywiLi9wdW55Y29kZSI6NX1dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7Ci8qISBodHRwczovL210aHMuYmUvcHVueWNvZGUgdjEuNC4wIGJ5IEBtYXRoaWFzICovCjsoZnVuY3Rpb24ocm9vdCkgewoKCS8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgKi8KCXZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiYKCQkhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzOwoJdmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJgoJCSFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlOwoJdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDsKCWlmICgKCQlmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fAoJCWZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8CgkJZnJlZUdsb2JhbC5zZWxmID09PSBmcmVlR2xvYmFsCgkpIHsKCQlyb290ID0gZnJlZUdsb2JhbDsKCX0KCgkvKioKCSAqIFRoZSBgcHVueWNvZGVgIG9iamVjdC4KCSAqIEBuYW1lIHB1bnljb2RlCgkgKiBAdHlwZSBPYmplY3QKCSAqLwoJdmFyIHB1bnljb2RlLAoKCS8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi8KCW1heEludCA9IDIxNDc0ODM2NDcsIC8vIGFrYS4gMHg3RkZGRkZGRiBvciAyXjMxLTEKCgkvKiogQm9vdHN0cmluZyBwYXJhbWV0ZXJzICovCgliYXNlID0gMzYsCgl0TWluID0gMSwKCXRNYXggPSAyNiwKCXNrZXcgPSAzOCwKCWRhbXAgPSA3MDAsCglpbml0aWFsQmlhcyA9IDcyLAoJaW5pdGlhbE4gPSAxMjgsIC8vIDB4ODAKCWRlbGltaXRlciA9ICctJywgLy8gJ1x4MkQnCgoJLyoqIFJlZ3VsYXIgZXhwcmVzc2lvbnMgKi8KCXJlZ2V4UHVueWNvZGUgPSAvXnhuLS0vLAoJcmVnZXhOb25BU0NJSSA9IC9bXlx4MjAtXHg3RV0vLCAvLyB1bnByaW50YWJsZSBBU0NJSSBjaGFycyArIG5vbi1BU0NJSSBjaGFycwoJcmVnZXhTZXBhcmF0b3JzID0gL1tceDJFXHUzMDAyXHVGRjBFXHVGRjYxXS9nLCAvLyBSRkMgMzQ5MCBzZXBhcmF0b3JzCgoJLyoqIEVycm9yIG1lc3NhZ2VzICovCgllcnJvcnMgPSB7CgkJJ292ZXJmbG93JzogJ092ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzJywKCQknbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLAoJCSdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnCgl9LAoKCS8qKiBDb252ZW5pZW5jZSBzaG9ydGN1dHMgKi8KCWJhc2VNaW51c1RNaW4gPSBiYXNlIC0gdE1pbiwKCWZsb29yID0gTWF0aC5mbG9vciwKCXN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUsCgoJLyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqLwoJa2V5OwoKCS8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKCS8qKgoJICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIGVycm9yIHR5cGUuCgkgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuCgkgKi8KCWZ1bmN0aW9uIGVycm9yKHR5cGUpIHsKCQl0aHJvdyBuZXcgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pOwoJfQoKCS8qKgoJICogQSBnZW5lcmljIGBBcnJheSNtYXBgIHV0aWxpdHkgZnVuY3Rpb24uCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci4KCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeSBhcnJheQoJICogaXRlbS4KCSAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi4KCSAqLwoJZnVuY3Rpb24gbWFwKGFycmF5LCBmbikgewoJCXZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7CgkJdmFyIHJlc3VsdCA9IFtdOwoJCXdoaWxlIChsZW5ndGgtLSkgewoJCQlyZXN1bHRbbGVuZ3RoXSA9IGZuKGFycmF5W2xlbmd0aF0pOwoJCX0KCQlyZXR1cm4gcmVzdWx0OwoJfQoKCS8qKgoJICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsCgkgKiBhZGRyZXNzZXMuCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy4KCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeQoJICogY2hhcmFjdGVyLgoJICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2sKCSAqIGZ1bmN0aW9uLgoJICovCglmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikgewoJCXZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpOwoJCXZhciByZXN1bHQgPSAnJzsKCQlpZiAocGFydHMubGVuZ3RoID4gMSkgewoJCQkvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlCgkJCS8vIHRoZSBsb2NhbCBwYXJ0IChpLmUuIGV2ZXJ5dGhpbmcgdXAgdG8gYEBgKSBpbnRhY3QuCgkJCXJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnOwoJCQlzdHJpbmcgPSBwYXJ0c1sxXTsKCQl9CgkJLy8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LgoJCXN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1x4MkUnKTsKCQl2YXIgbGFiZWxzID0gc3RyaW5nLnNwbGl0KCcuJyk7CgkJdmFyIGVuY29kZWQgPSBtYXAobGFiZWxzLCBmbikuam9pbignLicpOwoJCXJldHVybiByZXN1bHQgKyBlbmNvZGVkOwoJfQoKCS8qKgoJICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZQoJICogY2hhcmFjdGVyIGluIHRoZSBzdHJpbmcuIFdoaWxlIEphdmFTY3JpcHQgdXNlcyBVQ1MtMiBpbnRlcm5hbGx5LAoJICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2gKCSAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LAoJICogbWF0Y2hpbmcgVVRGLTE2LgoJICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgCgkgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyCgkgKiBAbmFtZSBkZWNvZGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuCgkgKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBuZXcgYXJyYXkgb2YgY29kZSBwb2ludHMuCgkgKi8KCWZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7CgkJdmFyIG91dHB1dCA9IFtdLAoJCSAgICBjb3VudGVyID0gMCwKCQkgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCwKCQkgICAgdmFsdWUsCgkJICAgIGV4dHJhOwoJCXdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7CgkJCXZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTsKCQkJaWYgKHZhbHVlID49IDB4RDgwMCAmJiB2YWx1ZSA8PSAweERCRkYgJiYgY291bnRlciA8IGxlbmd0aCkgewoJCQkJLy8gaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyCgkJCQlleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7CgkJCQlpZiAoKGV4dHJhICYgMHhGQzAwKSA9PSAweERDMDApIHsgLy8gbG93IHN1cnJvZ2F0ZQoJCQkJCW91dHB1dC5wdXNoKCgodmFsdWUgJiAweDNGRikgPDwgMTApICsgKGV4dHJhICYgMHgzRkYpICsgMHgxMDAwMCk7CgkJCQl9IGVsc2UgewoJCQkJCS8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0CgkJCQkJLy8gY29kZSB1bml0IGlzIHRoZSBoaWdoIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyCgkJCQkJb3V0cHV0LnB1c2godmFsdWUpOwoJCQkJCWNvdW50ZXItLTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCW91dHB1dC5wdXNoKHZhbHVlKTsKCQkJfQoJCX0KCQlyZXR1cm4gb3V0cHV0OwoJfQoKCS8qKgoJICogQ3JlYXRlcyBhIHN0cmluZyBiYXNlZCBvbiBhbiBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLgoJICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgCgkgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMgoJICogQG5hbWUgZW5jb2RlCgkgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLgoJICovCglmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7CgkJcmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJdmFyIG91dHB1dCA9ICcnOwoJCQlpZiAodmFsdWUgPiAweEZGRkYpIHsKCQkJCXZhbHVlIC09IDB4MTAwMDA7CgkJCQlvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTsKCQkJCXZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjsKCQkJfQoJCQlvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlKTsKCQkJcmV0dXJuIG91dHB1dDsKCQl9KS5qb2luKCcnKTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci4KCSAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS4KCSAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpbgoJICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpbiB0aGUgcmFuZ2UgYDBgIHRvIGBiYXNlIC0gMWAsIG9yIGBiYXNlYCBpZgoJICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuCgkgKi8KCWZ1bmN0aW9uIGJhc2ljVG9EaWdpdChjb2RlUG9pbnQpIHsKCQlpZiAoY29kZVBvaW50IC0gNDggPCAxMCkgewoJCQlyZXR1cm4gY29kZVBvaW50IC0gMjI7CgkJfQoJCWlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7CgkJCXJldHVybiBjb2RlUG9pbnQgLSA2NTsKCQl9CgkJaWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHsKCQkJcmV0dXJuIGNvZGVQb2ludCAtIDk3OwoJCX0KCQlyZXR1cm4gYmFzZTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC4KCSAqIEBzZWUgYGJhc2ljVG9EaWdpdCgpYAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuCgkgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYmFzaWMgY29kZSBwb2ludCB3aG9zZSB2YWx1ZSAod2hlbiB1c2VkIGZvcgoJICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpcyBgZGlnaXRgLCB3aGljaCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2UKCSAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpcwoJICogdXNlZDsgZWxzZSwgdGhlIGxvd2VyY2FzZSBmb3JtIGlzIHVzZWQuIFRoZSBiZWhhdmlvciBpcyB1bmRlZmluZWQKCSAqIGlmIGBmbGFnYCBpcyBub24temVybyBhbmQgYGRpZ2l0YCBoYXMgbm8gdXBwZXJjYXNlIGZvcm0uCgkgKi8KCWZ1bmN0aW9uIGRpZ2l0VG9CYXNpYyhkaWdpdCwgZmxhZykgewoJCS8vICAwLi4yNSBtYXAgdG8gQVNDSUkgYS4ueiBvciBBLi5aCgkJLy8gMjYuLjM1IG1hcCB0byBBU0NJSSAwLi45CgkJcmV0dXJuIGRpZ2l0ICsgMjIgKyA3NSAqIChkaWdpdCA8IDI2KSAtICgoZmxhZyAhPSAwKSA8PCA1KTsKCX0KCgkvKioKCSAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuCgkgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzQ5MiNzZWN0aW9uLTMuNAoJICogQHByaXZhdGUKCSAqLwoJZnVuY3Rpb24gYWRhcHQoZGVsdGEsIG51bVBvaW50cywgZmlyc3RUaW1lKSB7CgkJdmFyIGsgPSAwOwoJCWRlbHRhID0gZmlyc3RUaW1lID8gZmxvb3IoZGVsdGEgLyBkYW1wKSA6IGRlbHRhID4+IDE7CgkJZGVsdGEgKz0gZmxvb3IoZGVsdGEgLyBudW1Qb2ludHMpOwoJCWZvciAoLyogbm8gaW5pdGlhbGl6YXRpb24gKi87IGRlbHRhID4gYmFzZU1pbnVzVE1pbiAqIHRNYXggPj4gMTsgayArPSBiYXNlKSB7CgkJCWRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTsKCQl9CgkJcmV0dXJuIGZsb29yKGsgKyAoYmFzZU1pbnVzVE1pbiArIDEpICogZGVsdGEgLyAoZGVsdGEgKyBza2V3KSk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZQoJICogc3ltYm9scy4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLgoJICovCglmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHsKCQkvLyBEb24ndCB1c2UgVUNTLTIKCQl2YXIgb3V0cHV0ID0gW10sCgkJICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLAoJCSAgICBvdXQsCgkJICAgIGkgPSAwLAoJCSAgICBuID0gaW5pdGlhbE4sCgkJICAgIGJpYXMgPSBpbml0aWFsQmlhcywKCQkgICAgYmFzaWMsCgkJICAgIGosCgkJICAgIGluZGV4LAoJCSAgICBvbGRpLAoJCSAgICB3LAoJCSAgICBrLAoJCSAgICBkaWdpdCwKCQkgICAgdCwKCQkgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovCgkJICAgIGJhc2VNaW51c1Q7CgoJCS8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHM6IGxldCBgYmFzaWNgIGJlIHRoZSBudW1iZXIgb2YgaW5wdXQgY29kZQoJCS8vIHBvaW50cyBiZWZvcmUgdGhlIGxhc3QgZGVsaW1pdGVyLCBvciBgMGAgaWYgdGhlcmUgaXMgbm9uZSwgdGhlbiBjb3B5CgkJLy8gdGhlIGZpcnN0IGJhc2ljIGNvZGUgcG9pbnRzIHRvIHRoZSBvdXRwdXQuCgoJCWJhc2ljID0gaW5wdXQubGFzdEluZGV4T2YoZGVsaW1pdGVyKTsKCQlpZiAoYmFzaWMgPCAwKSB7CgkJCWJhc2ljID0gMDsKCQl9CgoJCWZvciAoaiA9IDA7IGogPCBiYXNpYzsgKytqKSB7CgkJCS8vIGlmIGl0J3Mgbm90IGEgYmFzaWMgY29kZSBwb2ludAoJCQlpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7CgkJCQllcnJvcignbm90LWJhc2ljJyk7CgkJCX0KCQkJb3V0cHV0LnB1c2goaW5wdXQuY2hhckNvZGVBdChqKSk7CgkJfQoKCQkvLyBNYWluIGRlY29kaW5nIGxvb3A6IHN0YXJ0IGp1c3QgYWZ0ZXIgdGhlIGxhc3QgZGVsaW1pdGVyIGlmIGFueSBiYXNpYyBjb2RlCgkJLy8gcG9pbnRzIHdlcmUgY29waWVkOyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nIG90aGVyd2lzZS4KCgkJZm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHsKCgkJCS8vIGBpbmRleGAgaXMgdGhlIGluZGV4IG9mIHRoZSBuZXh0IGNoYXJhY3RlciB0byBiZSBjb25zdW1lZC4KCQkJLy8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLAoJCQkvLyB3aGljaCBnZXRzIGFkZGVkIHRvIGBpYC4gVGhlIG92ZXJmbG93IGNoZWNraW5nIGlzIGVhc2llcgoJCQkvLyBpZiB3ZSBpbmNyZWFzZSBgaWAgYXMgd2UgZ28sIHRoZW4gc3VidHJhY3Qgb2ZmIGl0cyBzdGFydGluZwoJCQkvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLgoJCQlmb3IgKG9sZGkgPSBpLCB3ID0gMSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7CgoJCQkJaWYgKGluZGV4ID49IGlucHV0TGVuZ3RoKSB7CgkJCQkJZXJyb3IoJ2ludmFsaWQtaW5wdXQnKTsKCQkJCX0KCgkJCQlkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTsKCgkJCQlpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7CgkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQl9CgoJCQkJaSArPSBkaWdpdCAqIHc7CgkJCQl0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTsKCgkJCQlpZiAoZGlnaXQgPCB0KSB7CgkJCQkJYnJlYWs7CgkJCQl9CgoJCQkJYmFzZU1pbnVzVCA9IGJhc2UgLSB0OwoJCQkJaWYgKHcgPiBmbG9vcihtYXhJbnQgLyBiYXNlTWludXNUKSkgewoJCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQkJfQoKCQkJCXcgKj0gYmFzZU1pbnVzVDsKCgkJCX0KCgkJCW91dCA9IG91dHB1dC5sZW5ndGggKyAxOwoJCQliaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTsKCgkJCS8vIGBpYCB3YXMgc3VwcG9zZWQgdG8gd3JhcCBhcm91bmQgZnJvbSBgb3V0YCB0byBgMGAsCgkJCS8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6CgkJCWlmIChmbG9vcihpIC8gb3V0KSA+IG1heEludCAtIG4pIHsKCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQl9CgoJCQluICs9IGZsb29yKGkgLyBvdXQpOwoJCQlpICU9IG91dDsKCgkJCS8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXQKCQkJb3V0cHV0LnNwbGljZShpKyssIDAsIG4pOwoKCQl9CgoJCXJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMgKGUuZy4gYSBkb21haW4gbmFtZSBsYWJlbCkgdG8gYQoJICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLgoJICovCglmdW5jdGlvbiBlbmNvZGUoaW5wdXQpIHsKCQl2YXIgbiwKCQkgICAgZGVsdGEsCgkJICAgIGhhbmRsZWRDUENvdW50LAoJCSAgICBiYXNpY0xlbmd0aCwKCQkgICAgYmlhcywKCQkgICAgaiwKCQkgICAgbSwKCQkgICAgcSwKCQkgICAgaywKCQkgICAgdCwKCQkgICAgY3VycmVudFZhbHVlLAoJCSAgICBvdXRwdXQgPSBbXSwKCQkgICAgLyoqIGBpbnB1dExlbmd0aGAgd2lsbCBob2xkIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgaW4gYGlucHV0YC4gKi8KCQkgICAgaW5wdXRMZW5ndGgsCgkJICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqLwoJCSAgICBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsCgkJICAgIGJhc2VNaW51c1QsCgkJICAgIHFNaW51c1Q7CgoJCS8vIENvbnZlcnQgdGhlIGlucHV0IGluIFVDUy0yIHRvIFVuaWNvZGUKCQlpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpOwoKCQkvLyBDYWNoZSB0aGUgbGVuZ3RoCgkJaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7CgoJCS8vIEluaXRpYWxpemUgdGhlIHN0YXRlCgkJbiA9IGluaXRpYWxOOwoJCWRlbHRhID0gMDsKCQliaWFzID0gaW5pdGlhbEJpYXM7CgoJCS8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHMKCQlmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikgewoJCQljdXJyZW50VmFsdWUgPSBpbnB1dFtqXTsKCQkJaWYgKGN1cnJlbnRWYWx1ZSA8IDB4ODApIHsKCQkJCW91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTsKCQkJfQoJCX0KCgkJaGFuZGxlZENQQ291bnQgPSBiYXNpY0xlbmd0aCA9IG91dHB1dC5sZW5ndGg7CgoJCS8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkOwoJCS8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy4KCgkJLy8gRmluaXNoIHRoZSBiYXNpYyBzdHJpbmcgLSBpZiBpdCBpcyBub3QgZW1wdHkgLSB3aXRoIGEgZGVsaW1pdGVyCgkJaWYgKGJhc2ljTGVuZ3RoKSB7CgkJCW91dHB1dC5wdXNoKGRlbGltaXRlcik7CgkJfQoKCQkvLyBNYWluIGVuY29kaW5nIGxvb3A6CgkJd2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHsKCgkJCS8vIEFsbCBub24tYmFzaWMgY29kZSBwb2ludHMgPCBuIGhhdmUgYmVlbiBoYW5kbGVkIGFscmVhZHkuIEZpbmQgdGhlIG5leHQKCQkJLy8gbGFyZ2VyIG9uZToKCQkJZm9yIChtID0gbWF4SW50LCBqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHsKCQkJCWN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdOwoJCQkJaWYgKGN1cnJlbnRWYWx1ZSA+PSBuICYmIGN1cnJlbnRWYWx1ZSA8IG0pIHsKCQkJCQltID0gY3VycmVudFZhbHVlOwoJCQkJfQoJCQl9CgoJCQkvLyBJbmNyZWFzZSBgZGVsdGFgIGVub3VnaCB0byBhZHZhbmNlIHRoZSBkZWNvZGVyJ3MgPG4saT4gc3RhdGUgdG8gPG0sMD4sCgkJCS8vIGJ1dCBndWFyZCBhZ2FpbnN0IG92ZXJmbG93CgkJCWhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTsKCQkJaWYgKG0gLSBuID4gZmxvb3IoKG1heEludCAtIGRlbHRhKSAvIGhhbmRsZWRDUENvdW50UGx1c09uZSkpIHsKCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQl9CgoJCQlkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lOwoJCQluID0gbTsKCgkJCWZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7CgkJCQljdXJyZW50VmFsdWUgPSBpbnB1dFtqXTsKCgkJCQlpZiAoY3VycmVudFZhbHVlIDwgbiAmJiArK2RlbHRhID4gbWF4SW50KSB7CgkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQl9CgoJCQkJaWYgKGN1cnJlbnRWYWx1ZSA9PSBuKSB7CgkJCQkJLy8gUmVwcmVzZW50IGRlbHRhIGFzIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIKCQkJCQlmb3IgKHEgPSBkZWx0YSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7CgkJCQkJCXQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpOwoJCQkJCQlpZiAocSA8IHQpIHsKCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJCXFNaW51c1QgPSBxIC0gdDsKCQkJCQkJYmFzZU1pbnVzVCA9IGJhc2UgLSB0OwoJCQkJCQlvdXRwdXQucHVzaCgKCQkJCQkJCXN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNULCAwKSkKCQkJCQkJKTsKCQkJCQkJcSA9IGZsb29yKHFNaW51c1QgLyBiYXNlTWludXNUKTsKCQkJCQl9CgoJCQkJCW91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSwgMCkpKTsKCQkJCQliaWFzID0gYWRhcHQoZGVsdGEsIGhhbmRsZWRDUENvdW50UGx1c09uZSwgaGFuZGxlZENQQ291bnQgPT0gYmFzaWNMZW5ndGgpOwoJCQkJCWRlbHRhID0gMDsKCQkJCQkrK2hhbmRsZWRDUENvdW50OwoJCQkJfQoJCQl9CgoJCQkrK2RlbHRhOwoJCQkrK247CgoJCX0KCQlyZXR1cm4gb3V0cHV0LmpvaW4oJycpOwoJfQoKCS8qKgoJICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzcwoJICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLgoJICogaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgb24gYSBzdHJpbmcgdGhhdCBoYXMgYWxyZWFkeSBiZWVuCgkgKiBjb252ZXJ0ZWQgdG8gVW5pY29kZS4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZWQgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0bwoJICogY29udmVydCB0byBVbmljb2RlLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlCgkgKiBzdHJpbmcuCgkgKi8KCWZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkgewoJCXJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykgewoJCQlyZXR1cm4gcmVnZXhQdW55Y29kZS50ZXN0KHN0cmluZykKCQkJCT8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKQoJCQkJOiBzdHJpbmc7CgkJfSk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG8KCSAqIFB1bnljb2RlLiBPbmx5IHRoZSBub24tQVNDSUkgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHdpbGwgYmUgY29udmVydGVkLAoJICogaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQncyBhbHJlYWR5IGluCgkgKiBBU0NJSS4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvIGNvbnZlcnQsIGFzIGEKCSAqIFVuaWNvZGUgc3RyaW5nLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIFB1bnljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBkb21haW4gbmFtZSBvcgoJICogZW1haWwgYWRkcmVzcy4KCSAqLwoJZnVuY3Rpb24gdG9BU0NJSShpbnB1dCkgewoJCXJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykgewoJCQlyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZykKCQkJCT8gJ3huLS0nICsgZW5jb2RlKHN0cmluZykKCQkJCTogc3RyaW5nOwoJCX0pOwoJfQoKCS8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKCS8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi8KCXB1bnljb2RlID0gewoJCS8qKgoJCSAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBQdW55Y29kZS5qcyB2ZXJzaW9uIG51bWJlci4KCQkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCQkgKiBAdHlwZSBTdHJpbmcKCQkgKi8KCQkndmVyc2lvbic6ICcxLjMuMicsCgkJLyoqCgkJICogQW4gb2JqZWN0IG9mIG1ldGhvZHMgdG8gY29udmVydCBmcm9tIEphdmFTY3JpcHQncyBpbnRlcm5hbCBjaGFyYWN0ZXIKCQkgKiByZXByZXNlbnRhdGlvbiAoVUNTLTIpIHRvIFVuaWNvZGUgY29kZSBwb2ludHMsIGFuZCBiYWNrLgoJCSAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPgoJCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJCSAqIEB0eXBlIE9iamVjdAoJCSAqLwoJCSd1Y3MyJzogewoJCQknZGVjb2RlJzogdWNzMmRlY29kZSwKCQkJJ2VuY29kZSc6IHVjczJlbmNvZGUKCQl9LAoJCSdkZWNvZGUnOiBkZWNvZGUsCgkJJ2VuY29kZSc6IGVuY29kZSwKCQkndG9BU0NJSSc6IHRvQVNDSUksCgkJJ3RvVW5pY29kZSc6IHRvVW5pY29kZQoJfTsKCgkvKiogRXhwb3NlIGBwdW55Y29kZWAgKi8KCS8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMsIGxpa2Ugci5qcywgY2hlY2sgZm9yIHNwZWNpZmljIGNvbmRpdGlvbiBwYXR0ZXJucwoJLy8gbGlrZSB0aGUgZm9sbG93aW5nOgoJaWYgKAoJCXR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJgoJCXR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmCgkJZGVmaW5lLmFtZAoJKSB7CgkJZGVmaW5lKCdwdW55Y29kZScsIGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gcHVueWNvZGU7CgkJfSk7Cgl9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHsKCQlpZiAobW9kdWxlLmV4cG9ydHMgPT0gZnJlZUV4cG9ydHMpIHsKCQkJLy8gaW4gTm9kZS5qcywgaW8uanMsIG9yIFJpbmdvSlMgdjAuOC4wKwoJCQlmcmVlTW9kdWxlLmV4cG9ydHMgPSBwdW55Y29kZTsKCQl9IGVsc2UgewoJCQkvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLQoJCQlmb3IgKGtleSBpbiBwdW55Y29kZSkgewoJCQkJcHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pOwoJCQl9CgkJfQoJfSBlbHNlIHsKCQkvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyCgkJcm9vdC5wdW55Y29kZSA9IHB1bnljb2RlOwoJfQoKfSh0aGlzKSk7Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIF91cmlqcyA9IHJlcXVpcmUoJ3VyaWpzJyk7Cgp2YXIgX3VyaWpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VyaWpzKTsKCnZhciBfcG9zaXRpb24gPSByZXF1aXJlKCcuL3Bvc2l0aW9uJyk7Cgp2YXIgX3Bvc2l0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc2l0aW9uKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgTG9jYXRpb25IeXBlcnR5ID0gewogICAgZ2V0Q3VycmVudFBvc2l0aW9uOiBmdW5jdGlvbiBnZXRDdXJyZW50UG9zaXRpb24oKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZnVuY3Rpb24gKHBvc2l0aW9uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShwb3NpdGlvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIHN0YXJ0UG9zaXRpb25Ccm9hZGNhc3Q6IGZ1bmN0aW9uIHN0YXJ0UG9zaXRpb25Ccm9hZGNhc3Qoc3Vic2NyaWJlcnMpIHsKICAgICAgICB0aGlzLl9zeW5jaGVyLmNyZWF0ZSh0aGlzLl9vYmplY3REZXNjVVJMLCBzdWJzY3JpYmVycywgKDAsIF9wb3NpdGlvbjIuZGVmYXVsdCkoKSkudGhlbihmdW5jdGlvbiAocmVwb3J0ZXIpIHsKICAgICAgICAgICAgcmVwb3J0ZXIub25TdWJzY3JpcHRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQuYWNjZXB0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbihmdW5jdGlvbiAocG9zaXRpb24pIHsKICAgICAgICAgICAgICAgIHJlcG9ydGVyLmRhdGEudmFsdWVzID0gW3sgbmFtZTogJ2xhdGl0dWRlJywgdW5pdDogJ2xhdCcsIHZhbHVlOiBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUgfSwgeyBuYW1lOiAnbG9uZ2l0dWRlJywgdW5pdDogJ2xvbicsIHZhbHVlOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlIH1dOwogICAgICAgICAgICAgICAgcmVwb3J0ZXIuZGF0YS50aW1lID0gcG9zaXRpb24udGltZXN0YW1wOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KfTsKCnZhciBMb2NhdGlvbkh5cGVydHlGYWN0b3J5ID0gZnVuY3Rpb24gTG9jYXRpb25IeXBlcnR5RmFjdG9yeShoeXBlcnR5VVJMLCBidXMsIGNvbmZpZykgewogICAgdmFyIHVyaSA9IG5ldyBfdXJpanMyLmRlZmF1bHQoaHlwZXJ0eVVSTCk7CiAgICBMb2NhdGlvbkh5cGVydHkuX29iamVjdERlc2NVUkwgPSAnaHlwZXJ0eS1jYXRhbG9ndWU6Ly8nICsgdXJpLmhvc3RuYW1lKCkgKyAnLy53ZWxsLWtub3duL2RhdGFzY2hlbWFzL0NvbnRleHREYXRhU2NoZW1hJzsKICAgIExvY2F0aW9uSHlwZXJ0eS5fc3luY2hlciA9IG5ldyBfU3luY2hlci5TeW5jaGVyKGh5cGVydHlVUkwsIGJ1cywgY29uZmlnKTsKCiAgICByZXR1cm4gTG9jYXRpb25IeXBlcnR5Owp9OwoKZnVuY3Rpb24gYWN0aXZhdGUoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWcpIHsKICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogJ0xvY2F0aW9uJywKICAgICAgICBpbnN0YW5jZTogTG9jYXRpb25IeXBlcnR5RmFjdG9yeShoeXBlcnR5VVJMLCBidXMsIGNvbmZpZykKICAgIH07Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi9wb3NpdGlvbiI6Nywic2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyIjoxLCJ1cmlqcyI6NH1dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gUG9zaXRpb25GYWN0b3J5Owp2YXIgTG9jYXRpb25PYmplY3QgPSB7fTsKCmZ1bmN0aW9uIGdldElkKCkgewogICAgcmV0dXJuICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTsKfQoKZnVuY3Rpb24gUG9zaXRpb25GYWN0b3J5KCkgewogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHsKICAgICAgICBzY2hlbWE6ICJjb250ZXh0IiwKICAgICAgICBpZDogZ2V0SWQoKSwKICAgICAgICB0eXBlOiAibG9jYXRpb24iLAogICAgICAgIHRpbWU6ICIwIiwKICAgICAgICB2YWx1ZXM6IFt7CiAgICAgICAgICAgIG5hbWU6ICJsYXRpdHVkZSIsCiAgICAgICAgICAgIHVuaXQ6ICJsYXQiLAogICAgICAgICAgICB2YWx1ZTogMAogICAgICAgIH0sIHsKICAgICAgICAgICAgbmFtZTogImxvbmdpdHVkZSIsCiAgICAgICAgICAgIHVuaXQ6ICJsYXQiLAogICAgICAgICAgICB2YWx1ZTogMAogICAgICAgIH1dCiAgICB9KTsKfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dfSx7fSxbNl0pKDYpCn0pOw==",
      "sourceCodeClassname": "Location",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10009,
    "version": "0.1",
    "description": "Description of Location",
    "objectName": "Location",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "hypertyType": []
  },
  "UserStatus": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBIeXBlcnR5RGlzY292ZXJ5LmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MTYgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuSHlwZXJ0eURpc2NvdmVyeT1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYyl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgdT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYyYmdSlyZXR1cm4gdShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBhPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBhLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGF9dmFyIGY9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sZixmLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5Ijo3fV0sMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjh9XSwzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjo5fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjEwfV0sNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsaVsiZGVmYXVsdCJdKShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKX0seyIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjJ9XSw3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuKG4uSlNPTiYmbi5KU09OLnN0cmluZ2lmeXx8SlNPTi5zdHJpbmdpZnkpLmFwcGx5KEpTT04sYXJndW1lbnRzKX19LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjE2fV0sODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6Mzh9XSw5OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo2Mn1dLDEwOltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjoxNiwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6NjMsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjY0LCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjY1LCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjY2fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwxMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwxMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0IjozMX1dLDE0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MTUsIi4vJC53a3MiOjU5fV0sMTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwxNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDE3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjExfV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjIyfV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6MjQsIi4vJC5pcy1vYmplY3QiOjMxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmN0eCIpLHM9InByb3RvdHlwZSIsYz1mdW5jdGlvbihlLHQscil7dmFyIHUsYSxmLGw9ZSZjLkYsZD1lJmMuRyxwPWUmYy5TLCQ9ZSZjLlAsdj1lJmMuQix5PWUmYy5XLGg9ZD9vOm9bdF18fChvW3RdPXt9KSxiPWQ/bjpwP25bdF06KG5bdF18fHt9KVtzXTtkJiYocj10KTtmb3IodSBpbiByKWE9IWwmJmImJnUgaW4gYixhJiZ1IGluIGh8fChmPWE/Ylt1XTpyW3VdLGhbdV09ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGJbdV0/clt1XTp2JiZhP2koZixuKTp5JiZiW3VdPT1mP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFtzXT1lW3NdLHR9KGYpOiQmJiJmdW5jdGlvbiI9PXR5cGVvZiBmP2koRnVuY3Rpb24uY2FsbCxmKTpmLCQmJigoaFtzXXx8KGhbc109e30pKVt1XT1mKSl9O2MuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsdC5leHBvcnRzPWN9LHsiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmdsb2JhbCI6MjR9XSwyMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDIzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLG89ZSgiLi8kLml0ZXItY2FsbCIpLGk9ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxzPWUoIi4vJC5hbi1vYmplY3QiKSxjPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBmLGwsZCxwPXUoZSksJD1uKHIsYSx0PzI6MSksdj0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBwKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKGkocCkpZm9yKGY9YyhlLmxlbmd0aCk7Zj52O3YrKyl0PyQocyhsPWVbdl0pWzBdLGxbMV0pOiQoZVt2XSk7ZWxzZSBmb3IoZD1wLmNhbGwoZSk7IShsPWQubmV4dCgpKS5kb25lOylvKGQsJCxsLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1hcnJheS1pdGVyIjozMCwiLi8kLml0ZXItY2FsbCI6MzIsIi4vJC50by1sZW5ndGgiOjU2LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6NjB9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDI1OltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDI2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjozOCwiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLnByb3BlcnR5LWRlc2MiOjQyfV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6MjR9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sMjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjE1fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fGlbb109PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2goaSl7dmFyIHM9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09cyYmbihzLmNhbGwoZSkpLGl9fX0seyIuLyQuYW4tb2JqZWN0IjoxM31dLDMzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxpPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLHM9e307ZSgiLi8kLmhpZGUiKShzLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShzLHtuZXh0Om8oMSxyKX0pLGkoZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjozOCwiLi8kLmhpZGUiOjI2LCIuLyQucHJvcGVydHktZGVzYyI6NDIsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxvPWUoIi4vJC5leHBvcnQiKSxpPWUoIi4vJC5yZWRlZmluZSIpLHM9ZSgiLi8kLmhpZGUiKSxjPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxhPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksbD1lKCIuLyQiKS5nZXRQcm90byxkPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxwPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLCQ9IkBAaXRlcmF0b3IiLHY9ImtleXMiLHk9InZhbHVlcyIsaD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsYixtLGcseCl7YShyLHQsYik7dmFyIGosdyxfPWZ1bmN0aW9uKGUpe2lmKCFwJiZlIGluIFApcmV0dXJuIFBbZV07c3dpdGNoKGUpe2Nhc2UgdjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSB5OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGs9dCsiIEl0ZXJhdG9yIixPPW09PXksTT0hMSxQPWUucHJvdG90eXBlLFM9UFtkXXx8UFskXXx8bSYmUFttXSxFPVN8fF8obSk7aWYoUyl7dmFyIFU9bChFLmNhbGwobmV3IGUpKTtmKFUsaywhMCksIW4mJmMoUCwkKSYmcyhVLGQsaCksTyYmUy5uYW1lIT09eSYmKE09ITAsRT1mdW5jdGlvbigpe3JldHVybiBTLmNhbGwodGhpcyl9KX1pZihuJiYheHx8IXAmJiFNJiZQW2RdfHxzKFAsZCxFKSx1W3RdPUUsdVtrXT1oLG0paWYoaj17dmFsdWVzOk8/RTpfKHkpLGtleXM6Zz9FOl8odiksZW50cmllczpPP18oImVudHJpZXMiKTpFfSx4KWZvcih3IGluIGopdyBpbiBQfHxpKFAsdyxqW3ddKTtlbHNlIG8oby5QK28uRioocHx8TSksdCxqKTtyZXR1cm4gan19LHsiLi8kIjozOCwiLi8kLmV4cG9ydCI6MjEsIi4vJC5oYXMiOjI1LCIuLyQuaGlkZSI6MjYsIi4vJC5pdGVyLWNyZWF0ZSI6MzMsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQubGlicmFyeSI6MzksIi4vJC5yZWRlZmluZSI6NDQsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NDgsIi4vJC53a3MiOjU5fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aVsicmV0dXJuIl09ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2gocyl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3I9ITB9LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChjKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjU5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sMzc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDM5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQudGFzayIpLnNldCx1PXMuTXV0YXRpb25PYnNlcnZlcnx8cy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGE9cy5wcm9jZXNzLGY9cy5Qcm9taXNlLGw9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYSksZD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IobCYmKGU9YS5kb21haW4pJiYoYS5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtvPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGwpaT1mdW5jdGlvbigpe2EubmV4dFRpY2soZCl9O2Vsc2UgaWYodSl7dmFyIHA9MSwkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShkKS5vYnNlcnZlKCQse2NoYXJhY3RlckRhdGE6ITB9KSxpPWZ1bmN0aW9uKCl7JC5kYXRhPXA9LXB9fWVsc2UgaT1mJiZmLnJlc29sdmU/ZnVuY3Rpb24oKXtmLnJlc29sdmUoKS50aGVuKGQpfTpmdW5jdGlvbigpe2MuY2FsbChzLGQpfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmwmJmEuZG9tYWlufTtvJiYoby5uZXh0PXQpLG58fChuPXQsaSgpKSxvPXR9fSx7Ii4vJC5jb2YiOjE1LCIuLyQuZ2xvYmFsIjoyNCwiLi8kLnRhc2siOjUzfV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxzPXt9O3NbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixzKX19LHsiLi8kLmNvcmUiOjE2LCIuLyQuZXhwb3J0IjoyMSwiLi8kLmZhaWxzIjoyMn1dLDQyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDQzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6NDR9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjoyNn1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxvPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5hbi1vYmplY3QiKSxzPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbyh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixvKXt0cnl7bz1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxvKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGkpe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSx0KSxyP2UuX19wcm90b19fPXQ6byhlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpzfX0seyIuLyQiOjM4LCIuLyQuYW4tb2JqZWN0IjoxMywiLi8kLmN0eCI6MTcsIi4vJC5pcy1vYmplY3QiOjMxfV0sNDc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxvPWUoIi4vJCIpLGk9ZSgiLi8kLmRlc2NyaXB0b3JzIikscz1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtpJiZ0JiYhdFtzXSYmby5zZXREZXNjKHQscyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjM4LCIuLyQuY29yZSI6MTYsIi4vJC5kZXNjcmlwdG9ycyI6MTksIi4vJC53a3MiOjU5fV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLG89ZSgiLi8kLmhhcyIpLGk9ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIW8oZT1yP2U6ZS5wcm90b3R5cGUsaSkmJm4oZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjM4LCIuLyQuaGFzIjoyNSwiLi8kLndrcyI6NTl9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPSJfX2NvcmUtanNfc2hhcmVkX18iLGk9bltvXXx8KG5bb109e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0seyIuLyQuZ2xvYmFsIjoyNH1dLDUwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLG89ZSgiLi8kLmEtZnVuY3Rpb24iKSxpPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC53a3MiOjU5fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGkscyxjPVN0cmluZyhvKHQpKSx1PW4ociksYT1jLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1hP2U/IiI6dm9pZCAwOihpPWMuY2hhckNvZGVBdCh1KSw1NTI5Nj5pfHxpPjU2MzE5fHx1KzE9PT1hfHwocz1jLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fHM+NTczNDM/ZT9jLmNoYXJBdCh1KTppOmU/Yy5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsocy01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQudG8taW50ZWdlciI6NTR9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5jdHgiKSxjPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYT1lKCIuLyQuZG9tLWNyZWF0ZSIpLGY9ZSgiLi8kLmdsb2JhbCIpLGw9Zi5wcm9jZXNzLGQ9Zi5zZXRJbW1lZGlhdGUscD1mLmNsZWFySW1tZWRpYXRlLCQ9Zi5NZXNzYWdlQ2hhbm5lbCx2PTAseT17fSxoPSJvbnJlYWR5c3RhdGVjaGFuZ2UiLGI9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZih5Lmhhc093blByb3BlcnR5KGUpKXt2YXIgdD15W2VdO2RlbGV0ZSB5W2VdLHQoKX19LG09ZnVuY3Rpb24oZSl7Yi5jYWxsKGUuZGF0YSl9O2QmJnB8fChkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiB5Wysrdl09ZnVuY3Rpb24oKXtjKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgeVtlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikobCk/bj1mdW5jdGlvbihlKXtsLm5leHRUaWNrKHMoYixlLDEpKX06JD8obz1uZXcgJCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9bSxuPXMoaS5wb3N0TWVzc2FnZSxpLDEpKTpmLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtmLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtLCExKSk6bj1oIGluIGEoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYSgic2NyaXB0IikpW2hdPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0seyIuLyQuY29mIjoxNSwiLi8kLmN0eCI6MTcsIi4vJC5kb20tY3JlYXRlIjoyMCwiLi8kLmdsb2JhbCI6MjQsIi4vJC5odG1sIjoyNywiLi8kLmludm9rZSI6Mjh9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0Iiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LHsiLi8kLmRlZmluZWQiOjE4LCIuLyQuaW9iamVjdCI6Mjl9XSw1NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjU0fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6MTh9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsbz1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24rbykudG9TdHJpbmcoMzYpKX19LHt9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksbz1lKCIuLyQudWlkIiksaT1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aSYmaVtlXXx8KGl8fG8pKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjI0LCIuLyQuc2hhcmVkIjo0OSwiLi8kLnVpZCI6NTh9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MTQsIi4vJC5jb3JlIjoxNiwiLi8kLml0ZXJhdG9ycyI6MzcsIi4vJC53a3MiOjU5fV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLG89ZSgiLi8kLml0ZXItc3RlcCIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpLHM9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLGkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjoxMiwiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLml0ZXItc3RlcCI6MzYsIi4vJC5pdGVyYXRvcnMiOjM3LCIuLyQudG8taW9iamVjdCI6NTV9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjQxLCIuLyQudG8tb2JqZWN0Ijo1N31dLDYzOltmdW5jdGlvbihlLHQscil7fSx7fV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4sbz1lKCIuLyQiKSxpPWUoIi4vJC5saWJyYXJ5Iikscz1lKCIuLyQuZ2xvYmFsIiksYz1lKCIuLyQuY3R4IiksdT1lKCIuLyQuY2xhc3NvZiIpLGE9ZSgiLi8kLmV4cG9ydCIpLGY9ZSgiLi8kLmlzLW9iamVjdCIpLGw9ZSgiLi8kLmFuLW9iamVjdCIpLGQ9ZSgiLi8kLmEtZnVuY3Rpb24iKSxwPWUoIi4vJC5zdHJpY3QtbmV3IiksJD1lKCIuLyQuZm9yLW9mIiksdj1lKCIuLyQuc2V0LXByb3RvIikuc2V0LHk9ZSgiLi8kLnNhbWUtdmFsdWUiKSxoPWUoIi4vJC53a3MiKSgic3BlY2llcyIpLGI9ZSgiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiKSxtPWUoIi4vJC5taWNyb3Rhc2siKSxnPSJQcm9taXNlIix4PXMucHJvY2VzcyxqPSJwcm9jZXNzIj09dSh4KSx3PXNbZ10sXz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgdyhmdW5jdGlvbigpe30pO3JldHVybiBlJiYodC5jb25zdHJ1Y3Rvcj1PYmplY3QpLHcucmVzb2x2ZSh0KT09PXR9LGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPW5ldyB3KGUpO3JldHVybiB2KHIsdC5wcm90b3R5cGUpLHJ9dmFyIHI9ITE7dHJ5e2lmKHI9dyYmdy5yZXNvbHZlJiZfKCksdih0LHcpLHQucHJvdG90eXBlPW8uY3JlYXRlKHcucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dH19KSx0LnJlc29sdmUoNSkudGhlbihmdW5jdGlvbigpe30paW5zdGFuY2VvZiB0fHwocj0hMSksciYmZSgiLi8kLmRlc2NyaXB0b3JzIikpe3ZhciBuPSExO3cucmVzb2x2ZShvLnNldERlc2Moe30sInRoZW4iLHtnZXQ6ZnVuY3Rpb24oKXtuPSEwfX0pKSxyPW59fWNhdGNoKGkpe3I9ITF9cmV0dXJuIHJ9KCksTz1mdW5jdGlvbihlLHQpe3JldHVybiBpJiZlPT09dyYmdD09PW4/ITA6eShlLHQpfSxNPWZ1bmN0aW9uKGUpe3ZhciB0PWwoZSlbaF07cmV0dXJuIHZvaWQgMCE9dD90OmV9LFA9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGYoZSkmJiJmdW5jdGlvbiI9PXR5cGVvZih0PWUudGhlbik/dDohMX0sUz1mdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9ZCh0KSx0aGlzLnJlamVjdD1kKHIpfSxFPWZ1bmN0aW9uKGUpe3RyeXtlKCl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fX0sVT1mdW5jdGlvbihlLHQpe2lmKCFlLm4pe2Uubj0hMDt2YXIgcj1lLmM7bShmdW5jdGlvbigpe2Zvcih2YXIgbj1lLnYsbz0xPT1lLnMsaT0wLGM9ZnVuY3Rpb24odCl7dmFyIHIsaSxzPW8/dC5vazp0LmZhaWwsYz10LnJlc29sdmUsdT10LnJlamVjdDt0cnl7cz8ob3x8KGUuaD0hMCkscj1zPT09ITA/bjpzKG4pLHI9PT10LnByb21pc2U/dShUeXBlRXJyb3IoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KGk9UChyKSk/aS5jYWxsKHIsYyx1KTpjKHIpKTp1KG4pfWNhdGNoKGEpe3UoYSl9fTtyLmxlbmd0aD5pOyljKHJbaSsrXSk7ci5sZW5ndGg9MCxlLm49ITEsdCYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0LHIsbz1lLnA7VChvKSYmKGo/eC5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLG4sbyk6KHQ9cy5vbnVuaGFuZGxlZHJlamVjdGlvbik/dCh7cHJvbWlzZTpvLHJlYXNvbjpufSk6KHI9cy5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixuKSksZS5hPXZvaWQgMH0sMSl9KX19LFQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1lLl9kLG49ci5hfHxyLmMsbz0wO2lmKHIuaClyZXR1cm4hMTtmb3IoO24ubGVuZ3RoPm87KWlmKHQ9bltvKytdLHQuZmFpbHx8IVQodC5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sRD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuZHx8KHQuZD0hMCx0PXQucnx8dCx0LnY9ZSx0LnM9Mix0LmE9dC5jLnNsaWNlKCksVSh0LCEwKSl9LEE9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLmQpe3IuZD0hMCxyPXIucnx8cjt0cnl7aWYoci5wPT09ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9UChlKSk/bShmdW5jdGlvbigpe3ZhciBuPXtyOnIsZDohMX07dHJ5e3QuY2FsbChlLGMoQSxuLDEpLGMoRCxuLDEpKX1jYXRjaChvKXtELmNhbGwobixvKX19KTooci52PWUsci5zPTEsVShyLCExKSl9Y2F0Y2gobil7RC5jYWxsKHtyOnIsZDohMX0sbil9fX07a3x8KHc9ZnVuY3Rpb24oZSl7ZChlKTt2YXIgdD10aGlzLl9kPXtwOnAodGhpcyx3LGcpLGM6W10sYTp2b2lkIDAsczowLGQ6ITEsdjp2b2lkIDAsaDohMSxuOiExfTt0cnl7ZShjKEEsdCwxKSxjKEQsdCwxKSl9Y2F0Y2gocil7RC5jYWxsKHQscil9fSxlKCIuLyQucmVkZWZpbmUtYWxsIikody5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgUyhiKHRoaXMsdykpLG49ci5wcm9taXNlLG89dGhpcy5fZDtyZXR1cm4gci5vaz0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOiEwLHIuZmFpbD0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdCxvLmMucHVzaChyKSxvLmEmJm8uYS5wdXNoKHIpLG8ucyYmVShvLCExKSxufSwiY2F0Y2giOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pKSxhKGEuRythLlcrYS5GKiFrLHtQcm9taXNlOnd9KSxlKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSh3LGcpLGUoIi4vJC5zZXQtc3BlY2llcyIpKGcpLG49ZSgiLi8kLmNvcmUiKVtnXSxhKGEuUythLkYqIWssZyx7cmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZWplY3Q7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiooIWt8fF8oITApKSxnLHtyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiB3JiZPKGUuY29uc3RydWN0b3IsdGhpcykpcmV0dXJuIGU7dmFyIHQ9bmV3IFModGhpcykscj10LnJlc29sdmU7cmV0dXJuIHIoZSksdC5wcm9taXNlfX0pLGEoYS5TK2EuRiohKGsmJmUoIi4vJC5pdGVyLWRldGVjdCIpKGZ1bmN0aW9uKGUpe3cuYWxsKGUpWyJjYXRjaCJdKGZ1bmN0aW9uKCl7fSl9KSksZyx7YWxsOmZ1bmN0aW9uKGUpe3ZhciB0PU0odGhpcykscj1uZXcgUyh0KSxuPXIucmVzb2x2ZSxpPXIucmVqZWN0LHM9W10sYz1FKGZ1bmN0aW9uKCl7JChlLCExLHMucHVzaCxzKTt2YXIgcj1zLmxlbmd0aCxjPUFycmF5KHIpO3I/by5lYWNoLmNhbGwocyxmdW5jdGlvbihlLG8pe3ZhciBzPSExO3QucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3N8fChzPSEwLGNbb109ZSwtLXJ8fG4oYykpfSxpKX0pOm4oYyl9KTtyZXR1cm4gYyYmaShjLmVycm9yKSxyLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9TSh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZWplY3Qsbz1FKGZ1bmN0aW9uKCl7JChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8mJm4oby5lcnJvciksci5wcm9taXNlfX0pfSx7Ii4vJCI6MzgsIi4vJC5hLWZ1bmN0aW9uIjoxMSwiLi8kLmFuLW9iamVjdCI6MTMsIi4vJC5jbGFzc29mIjoxNCwiLi8kLmNvcmUiOjE2LCIuLyQuY3R4IjoxNywiLi8kLmRlc2NyaXB0b3JzIjoxOSwiLi8kLmV4cG9ydCI6MjEsIi4vJC5mb3Itb2YiOjIzLCIuLyQuZ2xvYmFsIjoyNCwiLi8kLmlzLW9iamVjdCI6MzEsIi4vJC5pdGVyLWRldGVjdCI6MzUsIi4vJC5saWJyYXJ5IjozOSwiLi8kLm1pY3JvdGFzayI6NDAsIi4vJC5yZWRlZmluZS1hbGwiOjQzLCIuLyQuc2FtZS12YWx1ZSI6NDUsIi4vJC5zZXQtcHJvdG8iOjQ2LCIuLyQuc2V0LXNwZWNpZXMiOjQ3LCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjQ4LCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciI6NTAsIi4vJC5zdHJpY3QtbmV3Ijo1MSwiLi8kLndrcyI6NTl9XSw2NTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQuc3RyaW5nLWF0IikoITApO2UoIi4vJC5pdGVyLWRlZmluZSIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LHI9dGhpcy5faTtyZXR1cm4gcj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1uKHQsciksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LHsiLi8kLml0ZXItZGVmaW5lIjozNCwiLi8kLnN0cmluZy1hdCI6NTJ9XSw2NjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpO24uTm9kZUxpc3Q9bi5IVE1MQ29sbGVjdGlvbj1uLkFycmF5fSx7Ii4vJC5pdGVyYXRvcnMiOjM3LCIuL2VzNi5hcnJheS5pdGVyYXRvciI6NjF9XSw2NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCIuL2h5cGVydHktZGlzY292ZXJ5L0h5cGVydHlEaXNjb3ZlcnkiKSxpPW4obyk7clsiZGVmYXVsdCJdPWlbImRlZmF1bHQiXSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vaHlwZXJ0eS1kaXNjb3ZlcnkvSHlwZXJ0eURpc2NvdmVyeSI6Njh9XSw2ODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGM9bihzKSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGE9bih1KSxmPWUoIi4uL3V0aWxzL3V0aWxzIiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXsoMCxjWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIG49dGhpcztuLm1lc3NhZ2VCdXM9cixuLmRvbWFpbj0oMCxmLmRpdmlkZVVSTCkodCkuZG9tYWluLG4uZGlzY292ZXJ5VVJMPXR9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RQZXJOYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10P3Q6ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6ImRhdGFPYmplY3Q6Ly8iK2V9fTtyZXR1cm4gbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZS51cmw7bj9lKG4pOnQoIkRhdGFPYmplY3QgbmFtZSBkb2VzIG5vdCBleGlzdCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eVBlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXQ/dDpyLmRvbWFpbjt2YXIgbz0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLHM9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbisiLyIsYm9keTp7cmVzb3VyY2U6b319O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZTogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJtZXNzYWdlIHJlcGx5IixyKTt2YXIgbz12b2lkIDAsaT12b2lkIDAscz12b2lkIDAsYz1yLmJvZHkudmFsdWU7Zm9yKG8gaW4gYylpZih2b2lkIDAhPT1jW29dLmxhc3RNb2RpZmllZClpZih2b2lkIDA9PT1pKWk9bmV3IERhdGUoY1tvXS5sYXN0TW9kaWZpZWQpLHM9bztlbHNle3ZhciB1PW5ldyBEYXRlKGNbb10ubGFzdE1vZGlmaWVkKTtpLmdldFRpbWUoKTx1LmdldFRpbWUoKSYmKGk9dSxzPW8pfWNvbnNvbGUubG9nKCJMYXN0IEh5cGVydHk6ICIscyxpKTt2YXIgYT1zO2lmKHZvaWQgMD09PWEpcmV0dXJuIG4oIlVzZXIgSHlwZXJ0eSBub3QgZm91bmQiKTt2YXIgZj17aWQ6ZSxkZXNjcmlwdG9yOmNbYV0uZGVzY3JpcHRvcixoeXBlcnR5VVJMOmF9O2NvbnNvbGUubG9nKCI9PT0+IGh5cGVydHlEaXNjb3ZlcnkgbWVzc2FnZUJ1bmRsZTogIixmKSx0KGYpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dD90OnIuZG9tYWluO3ZhciBvPSJ1c2VyOi8vIitlLnN1YnN0cmluZyhlLmluZGV4T2YoIkAiKSsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIkAiKSkscz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituKyIvIixib2R5OntyZXNvdXJjZTpvfX07cmV0dXJuIGNvbnNvbGUubG9nKCJNZXNzYWdlIGRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcjogIixzLG4sbyksbmV3IGlbImRlZmF1bHQiXShmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXIgcmVwbHkiLHIpO3ZhciBuPXIuYm9keS52YWx1ZTtyZXR1cm4gbj92b2lkIGUobik6dCgiVXNlciBIeXBlcnR5IG5vdCBmb3VuZCIpfSl9KX19XSksZX0oKTtyWyJkZWZhdWx0Il09bCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzIjo2OSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjo2fV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUpe2lmKCFlKXRocm93IEVycm9yKCJVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Iik7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmluZGV4T2YoIkAiKSxyPXt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfTtyZXR1cm4gcn1mdW5jdGlvbiBzKGUpe3JldHVybiEoKDAsJFsiZGVmYXVsdCJdKShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKCgwLGRbImRlZmF1bHQiXSkoZSkpOnZvaWQgMH1mdW5jdGlvbiB1KGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9byhlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufWZ1bmN0aW9uIGYoZSl7aWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9byhlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gdShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IiksZD1uKGwpLHA9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksJD1uKHApO3IuZGl2aWRlVVJMPW8sci5kaXZpZGVFbWFpbD1pLHIuZW1wdHlPYmplY3Q9cyxyLmRlZXBDbG9uZT1jLHIuZ2V0VXNlclVSTEZyb21FbWFpbD11LHIuZ2V0VXNlckVtYWlsRnJvbVVSTD1hLHIuY29udmVydFRvVXNlclVSTD1mfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6MSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozfV19LHt9LFs2N10pKDY3KX0pOwoKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBTeW5jaGVyLmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MjQgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuU3luY2hlcj1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYSl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmYylyZXR1cm4gYyhzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciB1PW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyB1LmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLHV9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sbCxsLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmUmJiFBcnJheS5vYnNlcnZlJiZmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1lLmdldE5vdGlmaWVyLG49InBlcmZvcm1DaGFuZ2UiLG89Il9vcmlnaW5hbCIsaT0ic3BsaWNlIixzPXtwdXNoOmZ1bmN0aW9uIGMoZSl7dmFyIHQ9YXJndW1lbnRzLHM9Y1tvXS5hcHBseSh0aGlzLHQpO3JldHVybiByKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6cy10Lmxlbmd0aCxhZGRlZENvdW50OnQubGVuZ3RoLHJlbW92ZWQ6W119fSksc30sdW5zaGlmdDpmdW5jdGlvbiB1KGUpe3ZhciB0PWFyZ3VtZW50cyxzPXVbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHBvcDpmdW5jdGlvbiBsKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1sW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnRoaXMubGVuZ3RoLGFkZGVkQ291bnQ6MCxyZW1vdmVkOlt0XX19LHRoaXMpLHR9LHNoaWZ0OmZ1bmN0aW9uIGYoKXt2YXIgZT10aGlzLmxlbmd0aCx0PWZbb10uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5sZW5ndGghPT1lJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6MCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzcGxpY2U6ZnVuY3Rpb24gZChlLHQpe3ZhciBzPWFyZ3VtZW50cyxhPWRbb10uYXBwbHkodGhpcyxzKTtyZXR1cm4oYS5sZW5ndGh8fHMubGVuZ3RoPjIpJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6ZSxhZGRlZENvdW50OnMubGVuZ3RoLTIscmVtb3ZlZDphfX0sdGhpcyksYX19O2Zvcih2YXIgYSBpbiBzKXNbYV1bb109dC5wcm90b3R5cGVbYV0sdC5wcm90b3R5cGVbYV09c1thXTt0Lm9ic2VydmU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5vYnNlcnZlKHQscixbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsaV0pfSx0LnVub2JzZXJ2ZT1lLnVub2JzZXJ2ZX0oT2JqZWN0LEFycmF5KX0se31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiOjE3fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjE4fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjE5fV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjIwfV0sNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjF9XSw3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjoyMn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjIzfV0sOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjI0fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCI6MjV9XSwxMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo0fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBvPSEwO287KXt2YXIgaT1lLHM9dCxhPXI7bz0hMSxudWxsPT09aSYmKGk9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgYz1uKGkscyk7aWYodm9pZCAwIT09Yyl7aWYoInZhbHVlImluIGMpcmV0dXJuIGMudmFsdWU7dmFyIHU9Yy5nZXQ7aWYodm9pZCAwPT09dSlyZXR1cm47cmV0dXJuIHUuY2FsbChhKX12YXIgbD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaSk7aWYobnVsbD09PWwpcmV0dXJuO2U9bCx0PXMscj1hLG89ITAsYz1sPXZvaWQgMH19LHIuX19lc01vZHVsZT0hMH0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NX1dLDE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9bih0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKG8/byhlLHQpOmUuX19wcm90b19fPXQpfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6OH1dLDE1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2hlbHBlcnMvdHlwZW9mIiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxpWyJkZWZhdWx0Il0pKHQpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fX0seyIuLi9oZWxwZXJzL3R5cGVvZiI6MTZ9XSwxNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuY29uc3RydWN0b3I9PT1uPyJzeW1ib2wiOnR5cGVvZiBlfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCI6MTB9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMX1dLDE4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY3JlYXRlKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwxOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwyMDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXREZXNjKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjgxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjo4Mn1dLDIyOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo4M31dLDIzOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiI6ODR9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo4NiwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo4NywiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo4OX1dLDI1OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIiksZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLlN5bWJvbH0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiOjg4fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwyNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0Ijo0OX1dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MzAsIi4vJC53a3MiOjc4fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2fV0sMzM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjM4fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRLZXlzKGUpLHI9bi5nZXRTeW1ib2xzO2lmKHIpZm9yKHZhciBvLGk9cihlKSxzPW4uaXNFbnVtLGE9MDtpLmxlbmd0aD5hOylzLmNhbGwoZSxvPWlbYSsrXSkmJnQucHVzaChvKTtyZXR1cm4gdH19LHsiLi8kIjo1Nn1dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLHUsbCxmPWUmYS5GLGQ9ZSZhLkcscD1lJmEuUyxiPWUmYS5QLGg9ZSZhLkIseT1lJmEuVyx2PWQ/bzpvW3RdfHwob1t0XT17fSksXz1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGMgaW4gcil1PSFmJiZfJiZjIGluIF8sdSYmYyBpbiB2fHwobD11P19bY106cltjXSx2W2NdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBfW2NdP3JbY106aCYmdT9pKGwsbik6eSYmX1tjXT09bD9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShsKTpiJiYiZnVuY3Rpb24iPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxiJiYoKHZbc118fCh2W3NdPXt9KSlbY109bCkpfTthLkY9MSxhLkc9MixhLlM9NCxhLlA9OCxhLkI9MTYsYS5XPTMyLHQuZXhwb3J0cz1hfSx7Ii4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5nbG9iYWwiOjQxfV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYT1lKCIuLyQudG8tbGVuZ3RoIiksYz1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgbCxmLGQscD1jKGUpLGI9bihyLHUsdD8yOjEpLGg9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihsPWEoZS5sZW5ndGgpO2w+aDtoKyspdD9iKHMoZj1lW2hdKVswXSxmWzFdKTpiKGVbaF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEoZj1kLm5leHQoKSkuZG9uZTspbyhkLGIsZi52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtYXJyYXktaXRlciI6NDcsIi4vJC5pdGVyLWNhbGwiOjUwLCIuLyQudG8tbGVuZ3RoIjo3NSwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjc5fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpLG89ZSgiLi8kIikuZ2V0TmFtZXMsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBvKGUpfWNhdGNoKHQpe3JldHVybiBzLnNsaWNlKCl9fTt0LmV4cG9ydHMuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6NTYsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MX1dLDQ0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjozMH1dLDQ3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0seyIuLyQuY29mIjozMH1dLDQ5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6Mjh9XSw1MTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6NTYsIi4vJC5oaWRlIjo0MywiLi8kLnByb3BlcnR5LWRlc2MiOjYxLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYT1lKCIuLyQuaGFzIiksYz1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxsPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGY9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSxiPSJAQGl0ZXJhdG9yIixoPSJrZXlzIix5PSJ2YWx1ZXMiLHY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLF8sZyxtLGope3Uocix0LF8pO3ZhciAkLHcsTz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBFKXJldHVybiBFW2VdO3N3aXRjaChlKXtjYXNlIGg6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIseD1nPT15LEM9ITEsRT1lLnByb3RvdHlwZSxTPUVbZF18fEVbYl18fGcmJkVbZ10sVD1TfHxPKGcpO2lmKFMpe3ZhciBSPWYoVC5jYWxsKG5ldyBlKSk7bChSLGssITApLCFuJiZhKEUsYikmJnMoUixkLHYpLHgmJlMubmFtZSE9PXkmJihDPSEwLFQ9ZnVuY3Rpb24oKXtyZXR1cm4gUy5jYWxsKHRoaXMpfSl9aWYobiYmIWp8fCFwJiYhQyYmRVtkXXx8cyhFLGQsVCksY1t0XT1ULGNba109dixnKWlmKCQ9e3ZhbHVlczp4P1Q6Tyh5KSxrZXlzOm0/VDpPKGgpLGVudHJpZXM6eD9PKCJlbnRyaWVzIik6VH0sailmb3IodyBpbiAkKXcgaW4gRXx8aShFLHcsJFt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fEMpLHQsJCk7cmV0dXJuICR9fSx7Ii4vJCI6NTYsIi4vJC5leHBvcnQiOjM3LCIuLyQuaGFzIjo0MiwiLi8kLmhpZGUiOjQzLCIuLyQuaXRlci1jcmVhdGUiOjUxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLmxpYnJhcnkiOjU4LCIuLyQucmVkZWZpbmUiOjYzLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYSl7fXJldHVybiByfX0seyIuLyQud2tzIjo3OH1dLDU0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDU1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSw1NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaT1vKGUpLHM9bi5nZXRLZXlzKGkpLGE9cy5sZW5ndGgsYz0wO2E+YzspaWYoaVtyPXNbYysrXV09PT10KXJldHVybiByfX0seyIuLyQiOjU2LCIuLyQudG8taW9iamVjdCI6NzR9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLnRhc2siKS5zZXQsYz1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxsPXMuUHJvbWlzZSxmPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGYmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihmKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGMpe3ZhciBwPTEsYj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGMoZCkub2JzZXJ2ZShiLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe2IuZGF0YT1wPS1wfX1lbHNlIGk9bCYmbC5yZXNvbHZlP2Z1bmN0aW9uKCl7bC5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXthLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpmJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjozMCwiLi8kLmdsb2JhbCI6NDEsIi4vJC50YXNrIjo3Mn1dLDYwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjozMSwiLi8kLmV4cG9ydCI6MzcsIi4vJC5mYWlscyI6Mzh9XSw2MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjYzfV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6NDN9XSw2NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw2NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDY2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjo1NiwiLi8kLmNvcmUiOjMxLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQud2tzIjo3OH1dLDY3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjo1NiwiLi8kLmhhcyI6NDIsIi4vJC53a3MiOjc4fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6NDF9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQud2tzIjo3OH1dLDcwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDcxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYT1TdHJpbmcobyh0KSksYz1uKHIpLHU9YS5sZW5ndGg7cmV0dXJuIDA+Y3x8Yz49dT9lPyIiOnZvaWQgMDooaT1hLmNoYXJDb2RlQXQoYyksNTUyOTY+aXx8aT41NjMxOXx8YysxPT09dXx8KHM9YS5jaGFyQ29kZUF0KGMrMSkpPDU2MzIwfHxzPjU3MzQzP2U/YS5jaGFyQXQoYyk6aTplP2Euc2xpY2UoYyxjKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLnRvLWludGVnZXIiOjczfV0sNzI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYT1lKCIuLyQuaW52b2tlIiksYz1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxsPWUoIi4vJC5nbG9iYWwiKSxmPWwucHJvY2VzcyxkPWwuc2V0SW1tZWRpYXRlLHA9bC5jbGVhckltbWVkaWF0ZSxiPWwuTWVzc2FnZUNoYW5uZWwsaD0wLHk9e30sdj0ib25yZWFkeXN0YXRlY2hhbmdlIixfPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxnPWZ1bmN0aW9uKGUpe18uY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrK2hdPWZ1bmN0aW9uKCl7YSgiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKGgpLGh9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGYpP249ZnVuY3Rpb24oZSl7Zi5uZXh0VGljayhzKF8sZSwxKSl9OmI/KG89bmV3IGIsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcsbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6bC5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFsLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7bC5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZywhMSkpOm49diBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXtjLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVt2XT1mdW5jdGlvbigpe2MucmVtb3ZlQ2hpbGQodGhpcyksXy5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKF8sZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MzAsIi4vJC5jdHgiOjMyLCIuLyQuZG9tLWNyZWF0ZSI6MzUsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaHRtbCI6NDQsIi4vJC5pbnZva2UiOjQ1fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLmlvYmplY3QiOjQ2fV0sNzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo3M31dLDc2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjMzfV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjo0MSwiLi8kLnNoYXJlZCI6NjgsIi4vJC51aWQiOjc3fV0sNzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDgwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MjcsIi4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5pdGVyLXN0ZXAiOjU0LCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLnRvLWlvYmplY3QiOjc0fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIGUobih0KSxyKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDgzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImtleXMiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZShuKHQpKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1vYmplY3QiOjc2fV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vJC5zZXQtcHJvdG8iKS5zZXR9KX0seyIuLyQuZXhwb3J0IjozNywiLi8kLnNldC1wcm90byI6NjV9XSw4NTpbZnVuY3Rpb24oZSx0LHIpe30se31dLDg2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLmN0eCIpLGM9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxsPWUoIi4vJC5pcy1vYmplY3QiKSxmPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLGI9ZSgiLi8kLmZvci1vZiIpLGg9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksdj1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxfPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksZz1lKCIuLyQubWljcm90YXNrIiksbT0iUHJvbWlzZSIsaj1zLnByb2Nlc3MsJD0icHJvY2VzcyI9PWMoaiksdz1zW21dLE89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gaChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmTygpLGgodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLHg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sQz1mdW5jdGlvbihlKXt2YXIgdD1mKGUpW3ZdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxFPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBsKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFM9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sVD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFI9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO2coZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxhPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGE9dC5yZXNvbHZlLGM9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2MoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPUUocikpP2kuY2FsbChyLGEsYyk6YShyKSk6YyhuKX1jYXRjaCh1KXtjKHUpfX07ci5sZW5ndGg+aTspYShyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO00obykmJigkP2ouZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxNPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFNKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFIodCwhMCkpfSxOPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PUUoZSkpP2coZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxhKE4sbiwxKSxhKEQsbiwxKSl9Y2F0Y2gobyl7RC5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFIociwhMSkpfWNhdGNoKG4pe0QuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxtKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYShOLHQsMSksYShELHQsMSkpfWNhdGNoKHIpe0QuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFMoXyh0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlIobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxtKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShtKSxuPWUoIi4vJC5jb3JlIilbbV0sdSh1LlMrdS5GKiFrLG0se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxPKCEwKSksbSx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmeChlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLG0se2FsbDpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGE9VChmdW5jdGlvbigpe2IoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYT1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxhW29dPWUsLS1yfHxuKGEpKX0saSl9KTpuKGEpfSk7cmV0dXJuIGEmJmkoYS5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PUModGhpcykscj1uZXcgUyh0KSxuPXIucmVqZWN0LG89VChmdW5jdGlvbigpe2IoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjU2LCIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY2xhc3NvZiI6MjksIi4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5leHBvcnQiOjM3LCIuLyQuZm9yLW9mIjozOSwiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5LCIuLyQuaXRlci1kZXRlY3QiOjUzLCIuLyQubGlicmFyeSI6NTgsIi4vJC5taWNyb3Rhc2siOjU5LCIuLyQucmVkZWZpbmUtYWxsIjo2MiwiLi8kLnNhbWUtdmFsdWUiOjY0LCIuLyQuc2V0LXByb3RvIjo2NSwiLi8kLnNldC1zcGVjaWVzIjo2NiwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjY5LCIuLyQuc3RyaWN0LW5ldyI6NzAsIi4vJC53a3MiOjc4fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5zdHJpbmctYXQiOjcxfV0sODg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQuZ2xvYmFsIiksaT1lKCIuLyQuaGFzIikscz1lKCIuLyQuZGVzY3JpcHRvcnMiKSxhPWUoIi4vJC5leHBvcnQiKSxjPWUoIi4vJC5yZWRlZmluZSIpLHU9ZSgiLi8kLmZhaWxzIiksbD1lKCIuLyQuc2hhcmVkIiksZj1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxkPWUoIi4vJC51aWQiKSxwPWUoIi4vJC53a3MiKSxiPWUoIi4vJC5rZXlvZiIpLGg9ZSgiLi8kLmdldC1uYW1lcyIpLHk9ZSgiLi8kLmVudW0ta2V5cyIpLHY9ZSgiLi8kLmlzLWFycmF5IiksXz1lKCIuLyQuYW4tb2JqZWN0IiksZz1lKCIuLyQudG8taW9iamVjdCIpLG09ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxqPW4uZ2V0RGVzYywkPW4uc2V0RGVzYyx3PW4uY3JlYXRlLE89aC5nZXQsaz1vLlN5bWJvbCx4PW8uSlNPTixDPXgmJnguc3RyaW5naWZ5LEU9ITEsUz1wKCJfaGlkZGVuIiksVD1uLmlzRW51bSxSPWwoInN5bWJvbC1yZWdpc3RyeSIpLE09bCgic3ltYm9scyIpLEQ9ImZ1bmN0aW9uIj09dHlwZW9mIGssTj1PYmplY3QucHJvdG90eXBlLFA9cyYmdShmdW5jdGlvbigpe3JldHVybiA3IT13KCQoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49aihOLHQpO24mJmRlbGV0ZSBOW3RdLCQoZSx0LHIpLG4mJmUhPT1OJiYkKE4sdCxuKX06JCxBPWZ1bmN0aW9uKGUpe3ZhciB0PU1bZV09dyhrLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSxzJiZFJiZQKE4sZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtpKHRoaXMsUykmJmkodGhpc1tTXSxlKSYmKHRoaXNbU11bZV09ITEpLFAodGhpcyxlLG0oMSx0KSl9fSksdH0sTD1mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9LEY9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByJiZpKE0sdCk/KHIuZW51bWVyYWJsZT8oaShlLFMpJiZlW1NdW3RdJiYoZVtTXVt0XT0hMSkscj13KHIse2VudW1lcmFibGU6bSgwLCExKX0pKTooaShlLFMpfHwkKGUsUyxtKDEse30pKSxlW1NdW3RdPSEwKSxQKGUsdCxyKSk6JChlLHQscil9LEk9ZnVuY3Rpb24oZSx0KXtfKGUpO2Zvcih2YXIgcixuPXkodD1nKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KUYoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sVj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3coZSk6SSh3KGUpLHQpfSxVPWZ1bmN0aW9uKGUpe3ZhciB0PVQuY2FsbCh0aGlzLGUpO3JldHVybiB0fHwhaSh0aGlzLGUpfHwhaShNLGUpfHxpKHRoaXMsUykmJnRoaXNbU11bZV0/dDohMH0sej1mdW5jdGlvbihlLHQpe3ZhciByPWooZT1nKGUpLHQpO3JldHVybiFyfHwhaShNLHQpfHxpKGUsUykmJmVbU11bdF18fChyLmVudW1lcmFibGU9ITApLHJ9LEg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pfHx0PT1TfHxuLnB1c2godCk7cmV0dXJuIG59LEI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pJiZuLnB1c2goTVt0XSk7cmV0dXJuIG59LEo9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIUwoZSkpe2Zvcih2YXIgdCxyLG49W2VdLG89MSxpPWFyZ3VtZW50cztpLmxlbmd0aD5vOyluLnB1c2goaVtvKytdKTtyZXR1cm4gdD1uWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10KSwhciYmdih0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksTCh0KT92b2lkIDA6dH0pLG5bMV09dCxDLmFwcGx5KHgsbil9fSxXPXUoZnVuY3Rpb24oKXt2YXIgZT1rKCk7cmV0dXJuIltudWxsXSIhPUMoW2VdKXx8Int9IiE9Qyh7YTplfSl8fCJ7fSIhPUMoT2JqZWN0KGUpKX0pO0R8fChrPWZ1bmN0aW9uKCl7aWYoTCh0aGlzKSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3JldHVybiBBKGQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApKX0sYyhrLnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxMPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Yga30sbi5jcmVhdGU9VixuLmlzRW51bT1VLG4uZ2V0RGVzYz16LG4uc2V0RGVzYz1GLG4uc2V0RGVzY3M9SSxuLmdldE5hbWVzPWguZ2V0PUgsbi5nZXRTeW1ib2xzPUIscyYmIWUoIi4vJC5saWJyYXJ5IikmJmMoTiwicHJvcGVydHlJc0VudW1lcmFibGUiLFUsITApKTt2YXIgWT17ImZvciI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoUixlKz0iIik/UltlXTpSW2VdPWsoZSl9LGtleUZvcjpmdW5jdGlvbihlKXtyZXR1cm4gYihSLGUpfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtFPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtFPSExfX07bi5lYWNoLmNhbGwoImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGZ1bmN0aW9uKGUpe3ZhciB0PXAoZSk7WVtlXT1EP3Q6QSh0KX0pLEU9ITAsYShhLkcrYS5XLHtTeW1ib2w6a30pLGEoYS5TLCJTeW1ib2wiLFkpLGEoYS5TK2EuRiohRCwiT2JqZWN0Iix7Y3JlYXRlOlYsZGVmaW5lUHJvcGVydHk6RixkZWZpbmVQcm9wZXJ0aWVzOkksZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOnosZ2V0T3duUHJvcGVydHlOYW1lczpILGdldE93blByb3BlcnR5U3ltYm9sczpCfSkseCYmYShhLlMrYS5GKighRHx8VyksIkpTT04iLHtzdHJpbmdpZnk6Sn0pLGYoaywiU3ltYm9sIiksZihNYXRoLCJNYXRoIiwhMCksZihvLkpTT04sIkpTT04iLCEwKX0seyIuLyQiOjU2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLmVudW0ta2V5cyI6MzYsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4LCIuLyQuZ2V0LW5hbWVzIjo0MCwiLi8kLmdsb2JhbCI6NDEsIi4vJC5oYXMiOjQyLCIuLyQuaXMtYXJyYXkiOjQ4LCIuLyQua2V5b2YiOjU3LCIuLyQubGlicmFyeSI6NTgsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNoYXJlZCI6NjgsIi4vJC50by1pb2JqZWN0Ijo3NCwiLi8kLnVpZCI6NzcsIi4vJC53a3MiOjc4fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjgwfV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXt3aW5kb3cuTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5nPVtdLHRoaXMuaz1lfWZ1bmN0aW9uIHIoZSl7IWZ1bmN0aW9uIHIoKXt2YXIgbj1lLnRha2VSZWNvcmRzKCk7bi5sZW5ndGgmJmUuayhuLGUpLGUuZj1zZXRUaW1lb3V0KHIsdC5fcGVyaW9kKX0oKX1mdW5jdGlvbiBuKHQpe3ZhciByLG49e3R5cGU6bnVsbCx0YXJnZXQ6bnVsbCxhZGRlZE5vZGVzOltdLHJlbW92ZWROb2RlczpbXSxwcmV2aW91c1NpYmxpbmc6bnVsbCxuZXh0U2libGluZzpudWxsLGF0dHJpYnV0ZU5hbWU6bnVsbCxhdHRyaWJ1dGVOYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpudWxsfTtmb3IociBpbiB0KW5bcl0hPT1lJiZ0W3JdIT09ZSYmKG5bcl09dFtyXSk7cmV0dXJuIG59ZnVuY3Rpb24gbyhlLHQpe3ZhciByPWEoZSx0KTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIG8sYz1uLmxlbmd0aDt0LmEmJnIuYSYmaShuLGUsci5hLHQuZCksKHQuYnx8dC5lKSYmKG89cyhuLGUscix0KSksKG98fG4ubGVuZ3RoIT09YykmJihyPWEoZSx0KSl9fWZ1bmN0aW9uIGkodCxyLG8saSl7Zm9yKHZhciBzLGEsYz17fSx1PXIuYXR0cmlidXRlcyxsPXUubGVuZ3RoO2wtLTspcz11W2xdLGE9cy5uYW1lLGkmJmlbYV09PT1lfHwocy52YWx1ZSE9PW9bYV0mJnQucHVzaChuKHt0eXBlOiJhdHRyaWJ1dGVzIix0YXJnZXQ6cixhdHRyaWJ1dGVOYW1lOmEsb2xkVmFsdWU6b1thXSxhdHRyaWJ1dGVOYW1lc3BhY2U6cy5uYW1lc3BhY2VVUkl9KSksY1thXT0hMCk7Zm9yKGEgaW4gbyljW2FdfHx0LnB1c2gobih7dGFyZ2V0OnIsdHlwZToiYXR0cmlidXRlcyIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV19KSl9ZnVuY3Rpb24gcyh0LHIsbyxzKXtmdW5jdGlvbiBhKGUscixvLGEsYyl7dmFyIGw9ZS5sZW5ndGgtMTtjPS1+KChsLWMpLzIpO2Zvcih2YXIgZixkLHA7cD1lLnBvcCgpOylmPW9bcC5oXSxkPWFbcC5pXSxzLmImJmMmJk1hdGguYWJzKHAuaC1wLmkpPj1sJiYodC5wdXNoKG4oe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0OnIsYWRkZWROb2RlczpbZl0scmVtb3ZlZE5vZGVzOltmXSxuZXh0U2libGluZzpmLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpmLnByZXZpb3VzU2libGluZ30pKSxjLS0pLHMuYSYmZC5hJiZpKHQsZixkLmEscy5kKSxzLmMmJjM9PT1mLm5vZGVUeXBlJiZmLm5vZGVWYWx1ZSE9PWQuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpmfSkpLHMuZSYmdShmLGQpfWZ1bmN0aW9uIHUocixvKXtmb3IodmFyIGQscCxiLGgseSx2PXIuY2hpbGROb2RlcyxfPW8uYixnPXYubGVuZ3RoLG09Xz9fLmxlbmd0aDowLGo9MCwkPTAsdz0wO2c+JHx8bT53OyloPXZbJF0seT0oYj1fW3ddKSYmYi5qLGg9PT15PyhzLmEmJmIuYSYmaSh0LGgsYi5hLHMuZCkscy5jJiZiLmMhPT1lJiZoLm5vZGVWYWx1ZSE9PWIuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpofSkpLHAmJmEocCxyLHYsXyxqKSxzLmUmJihoLmNoaWxkTm9kZXMubGVuZ3RofHxiLmImJmIuYi5sZW5ndGgpJiZ1KGgsYiksJCsrLHcrKyk6KGw9ITAsZHx8KGQ9e30scD1bXSksaCYmKGRbYj1jKGgpXXx8KGRbYl09ITAsLTE9PT0oYj1mKF8saCx3LCJqIikpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2hdLG5leHRTaWJsaW5nOmgubmV4dFNpYmxpbmcscHJldmlvdXNTaWJsaW5nOmgucHJldmlvdXNTaWJsaW5nfSkpLGorKyk6cC5wdXNoKHtoOiQsaTpifSkpLCQrKykseSYmeSE9PXZbJF0mJihkW2I9Yyh5KV18fChkW2JdPSEwLC0xPT09KGI9Zih2LHksJCkpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpvLmoscmVtb3ZlZE5vZGVzOlt5XSxuZXh0U2libGluZzpfW3crMV0scHJldmlvdXNTaWJsaW5nOl9bdy0xXX0pKSxqLS0pOnAucHVzaCh7aDpiLGk6d30pKSx3KyspKTtwJiZhKHAscix2LF8sail9dmFyIGw7cmV0dXJuIHUocixvKSxsfWZ1bmN0aW9uIGEoZSx0KXt2YXIgcj0hMDtyZXR1cm4gZnVuY3Rpb24gbihlKXt2YXIgbz17ajplfTtyZXR1cm4hdC5jfHwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGU/KHQuYSYmciYmMT09PWUubm9kZVR5cGUmJihvLmE9bChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5kJiYhdC5kW3IubmFtZV18fChlW3IubmFtZV09ci52YWx1ZSksZX0pKSxyJiYodC5ifHx0LmN8fHQuYSYmdC5lKSYmKG8uYj11KGUuY2hpbGROb2RlcyxuKSkscj10LmUpOm8uYz1lLm5vZGVWYWx1ZSxvfShlKX1mdW5jdGlvbiBjKGUpe3RyeXtyZXR1cm4gZS5pZHx8KGUubW9faWQ9ZS5tb19pZHx8ZCsrKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGUubm9kZVZhbHVlfWNhdGNoKHIpe3JldHVybiBkKyt9fX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciByPVtdLG49MDtuPGUubGVuZ3RoO24rKylyW25dPXQoZVtuXSxuLGUpO3JldHVybiByfWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIHI9e30sbj0wO248ZS5sZW5ndGg7bisrKXI9dChyLGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBmKGUsdCxyLG4pe2Zvcig7cjxlLmxlbmd0aDtyKyspaWYoKG4/ZVtyXVtuXTplW3JdKT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9dC5fcGVyaW9kPTMwLHQucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXthOiEhKHQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXJ8fHQuYXR0cmlidXRlT2xkVmFsdWUpLGI6ISF0LmNoaWxkTGlzdCxlOiEhdC5zdWJ0cmVlLGM6ISghdC5jaGFyYWN0ZXJEYXRhJiYhdC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpfSxpPXRoaXMuZyxzPTA7czxpLmxlbmd0aDtzKyspaVtzXS5tPT09ZSYmaS5zcGxpY2UocywxKTt0LmF0dHJpYnV0ZUZpbHRlciYmKG4uZD1sKHQuYXR0cmlidXRlRmlsdGVyLGZ1bmN0aW9uKGUsdCl7CnJldHVybiBlW3RdPSEwLGV9KSksaS5wdXNoKHttOmUsbDpvKGUsbil9KSx0aGlzLmZ8fHIodGhpcyl9LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5nLHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdLmwoZSk7cmV0dXJuIGV9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmc9W10sY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGx9fTt2YXIgZD0xO3JldHVybiB0fSh2b2lkIDApfSx7fV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXtPYmplY3Qub2JzZXJ2ZXx8ZnVuY3Rpb24oZSx0LHIsbil7InVzZSBzdHJpY3QiO3ZhciBvLGkscz1bImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInJlY29uZmlndXJlIiwic2V0UHJvdG90eXBlIiwicHJldmVudEV4dGVuc2lvbnMiXSxhPXQuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1lLmNhbGwodCl9fShlLnByb3RvdHlwZS50b1N0cmluZyksYz10LnByb3RvdHlwZS5pbmRleE9mP3QuaW5kZXhPZnx8ZnVuY3Rpb24oZSxyLG4pe3JldHVybiB0LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxyLG4pfTpmdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPXJ8fDA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LHU9ci5NYXAhPT1uJiZNYXAucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE1hcH06ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PVtdO3JldHVybntzaXplOjAsaGFzOmZ1bmN0aW9uKHQpe3JldHVybiBjKGUsdCk+LTF9LGdldDpmdW5jdGlvbihyKXtyZXR1cm4gdFtjKGUscildfSxzZXQ6ZnVuY3Rpb24ocixuKXt2YXIgbz1jKGUscik7LTE9PT1vPyhlLnB1c2gociksdC5wdXNoKG4pLHRoaXMuc2l6ZSsrKTp0W29dPW59LCJkZWxldGUiOmZ1bmN0aW9uKHIpe3ZhciBuPWMoZSxyKTtuPi0xJiYoZS5zcGxpY2UobiwxKSx0LnNwbGljZShuLDEpLHRoaXMuc2l6ZS0tKX0sZm9yRWFjaDpmdW5jdGlvbihyKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylyLmNhbGwoYXJndW1lbnRzWzFdLHRbbl0sZVtuXSx0aGlzKX19fSxsPWUuZ2V0T3duUHJvcGVydHlOYW1lcz9mdW5jdGlvbigpe3ZhciB0PWUuZ2V0T3duUHJvcGVydHlOYW1lczt0cnl7YXJndW1lbnRzLmNhbGxlZX1jYXRjaChyKXt2YXIgbj0odChjKS5qb2luKCIgIikrIiAiKS5yZXBsYWNlKC9wcm90b3R5cGUgfGxlbmd0aCB8bmFtZSAvZywiIikuc2xpY2UoMCwtMSkuc3BsaXQoIiAiKTtuLmxlbmd0aCYmKHQ9ZnVuY3Rpb24odCl7dmFyIHI9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KWZvcih2YXIgbyxpPTA7aTxuLmxlbmd0aDspKG89YyhyLG5baSsrXSkpPi0xJiZyLnNwbGljZShvLDEpO3JldHVybiByfSl9cmV0dXJuIHR9KCk6ZnVuY3Rpb24odCl7dmFyIHIsbixvPVtdO2lmKCJoYXNPd25Qcm9wZXJ0eSJpbiB0KWZvcihyIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmby5wdXNoKHIpO2Vsc2V7bj1lLmhhc093blByb3BlcnR5O2ZvcihyIGluIHQpbi5jYWxsKHQscikmJm8ucHVzaChyKX1yZXR1cm4gYSh0KSYmby5wdXNoKCJsZW5ndGgiKSxvfSxmPWUuZ2V0UHJvdG90eXBlT2YsZD1lLmRlZmluZVByb3BlcnRpZXMmJmUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHA9ci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbigpe3ZhciBlPStuZXcgRGF0ZSx0PWU7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cigodD0rbmV3IERhdGUpLWUpfSwxNyl9fSgpLGI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW8uZ2V0KGUpO24/KHkobixlKSxtKGUsbix0LHIpKToobj1oKGUpLG0oZSxuLHQsciksMT09PW8uc2l6ZSYmcCh2KSl9LGg9ZnVuY3Rpb24odCxyKXt2YXIgbixpPWwodCkscz1bXSxhPTAscj17aGFuZGxlcnM6dSgpLGZyb3plbjplLmlzRnJvemVuP2UuaXNGcm96ZW4odCk6ITEsZXh0ZW5zaWJsZTplLmlzRXh0ZW5zaWJsZT9lLmlzRXh0ZW5zaWJsZSh0KTohMCxwcm90bzpmJiZmKHQpLHByb3BlcnRpZXM6aSx2YWx1ZXM6cyxub3RpZmllcjpnKHQscil9O2lmKGQpZm9yKG49ci5kZXNjcmlwdG9ycz1bXTthPGkubGVuZ3RoOyluW2FdPWQodCxpW2FdKSxzW2FdPXRbaVthKytdXTtlbHNlIGZvcig7YTxpLmxlbmd0aDspc1thXT10W2lbYSsrXV07cmV0dXJuIG8uc2V0KHQscikscn0seT1mdW5jdGlvbigpe3ZhciB0PWQ/ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaT10LnByb3BlcnRpZXNbcl0scz1lW2ldLGE9dC52YWx1ZXNbcl0sYz10LmRlc2NyaXB0b3JzW3JdOyJ2YWx1ZSJpbiBvJiYoYT09PXM/MD09PWEmJjEvYSE9PTEvczphPT09YXx8cz09PXMpJiYoaihlLHQse25hbWU6aSx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOmF9LG4pLHQudmFsdWVzW3JdPXMpLCFjLmNvbmZpZ3VyYWJsZXx8by5jb25maWd1cmFibGUmJm8ud3JpdGFibGU9PT1jLndyaXRhYmxlJiZvLmVudW1lcmFibGU9PT1jLmVudW1lcmFibGUmJm8uZ2V0PT09Yy5nZXQmJm8uc2V0PT09Yy5zZXR8fChqKGUsdCx7bmFtZTppLHR5cGU6InJlY29uZmlndXJlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LmRlc2NyaXB0b3JzW3JdPW8pfTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10LnByb3BlcnRpZXNbcl0saT1lW29dLHM9dC52YWx1ZXNbcl07KHM9PT1pPzA9PT1zJiYxL3MhPT0xL2k6cz09PXN8fGk9PT1pKSYmKGooZSx0LHtuYW1lOm8sdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpzfSxuKSx0LnZhbHVlc1tyXT1pKX0scj1kP2Z1bmN0aW9uKGUscixuLG8saSl7Zm9yKHZhciBzLGE9ci5sZW5ndGg7biYmYS0tOyludWxsIT09clthXSYmKHM9ZChlLHJbYV0pLG4tLSxzP3QoZSxvLGEsaSxzKTooaihlLG8se25hbWU6clthXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm8udmFsdWVzW2FdfSxpKSxvLnByb3BlcnRpZXMuc3BsaWNlKGEsMSksby52YWx1ZXMuc3BsaWNlKGEsMSksby5kZXNjcmlwdG9ycy5zcGxpY2UoYSwxKSkpfTpmdW5jdGlvbihlLHQscixuLG8pe2Zvcih2YXIgaT10Lmxlbmd0aDtyJiZpLS07KW51bGwhPT10W2ldJiYoaihlLG4se25hbWU6dFtpXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm4udmFsdWVzW2ldfSxvKSxuLnByb3BlcnRpZXMuc3BsaWNlKGksMSksbi52YWx1ZXMuc3BsaWNlKGksMSksci0tKX07cmV0dXJuIGZ1bmN0aW9uKG4sbyxpKXtpZihuLmhhbmRsZXJzLnNpemUmJiFuLmZyb3plbil7dmFyIHMsYSx1LHAsYixoLHksdixfPW4udmFsdWVzLGc9bi5kZXNjcmlwdG9ycyxtPTA7aWYobi5leHRlbnNpYmxlKWlmKHM9bi5wcm9wZXJ0aWVzLnNsaWNlKCksYT1zLmxlbmd0aCx1PWwobyksZyl7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSx2PWQobyxiKSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKG9bYl0pLGcucHVzaCh2KSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpLHYpKTtyKG8scyxhLG4saSksZS5pc0V4dGVuc2libGUobyl8fChuLmV4dGVuc2libGU9ITEsaihvLG4se3R5cGU6InByZXZlbnRFeHRlbnNpb25zIixvYmplY3Q6b30saSksbi5mcm96ZW49ZS5pc0Zyb3plbihvKSl9ZWxzZXtmb3IoO208dS5sZW5ndGg7KWI9dVttKytdLHA9YyhzLGIpLGg9b1tiXSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKGgpKTooc1twXT1udWxsLGEtLSx0KG8sbixwLGkpKTtyKG8scyxhLG4saSl9ZWxzZSBpZighbi5mcm96ZW4pe2Zvcig7bTxzLmxlbmd0aDttKyspYj1zW21dLHQobyxuLG0saSxkKG8sYikpO2UuaXNGcm96ZW4obykmJihuLmZyb3plbj0hMCl9ZiYmKHk9ZihvKSx5IT09bi5wcm90byYmKGoobyxuLHt0eXBlOiJzZXRQcm90b3R5cGUiLG5hbWU6Il9fcHJvdG9fXyIsb2JqZWN0Om8sb2xkVmFsdWU6bi5wcm90b30pLG4ucHJvdG89eSkpfX19KCksdj1mdW5jdGlvbigpe28uc2l6ZSYmKG8uZm9yRWFjaCh5KSxpLmZvckVhY2goXykscCh2KSl9LF89ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmNoYW5nZVJlY29yZHM7ci5sZW5ndGgmJihlLmNoYW5nZVJlY29yZHM9W10sdChyKSl9LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyJiYodD1vLmdldChlKSksdCYmdC5ub3RpZmllcnx8e25vdGlmeTpmdW5jdGlvbih0KXt0LnR5cGU7dmFyIHI9by5nZXQoZSk7aWYocil7dmFyIG4saT17b2JqZWN0OmV9O2ZvcihuIGluIHQpIm9iamVjdCIhPT1uJiYoaVtuXT10W25dKTtqKGUscixpKX19LHBlcmZvcm1DaGFuZ2U6ZnVuY3Rpb24odCxyKXtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBub24tc3RyaW5nIGNoYW5nZVR5cGUiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgcGVyZm9ybSBub24tZnVuY3Rpb24iKTt2YXIgaSxzLGE9by5nZXQoZSksYz1hcmd1bWVudHNbMl0sdT1jPT09bj9yKCk6ci5jYWxsKGMpO2lmKGEmJnkoYSxlLHQpLGEmJnUmJiJvYmplY3QiPT10eXBlb2YgdSl7cz17b2JqZWN0OmUsdHlwZTp0fTtmb3IoaSBpbiB1KSJvYmplY3QiIT09aSYmInR5cGUiIT09aSYmKHNbaV09dVtpXSk7aihlLGEscyl9fX19LG09ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89aS5nZXQocik7b3x8aS5zZXQocixvPXtvYnNlcnZlZDp1KCksY2hhbmdlUmVjb3JkczpbXX0pLG8ub2JzZXJ2ZWQuc2V0KGUse2FjY2VwdExpc3Q6bi5zbGljZSgpLGRhdGE6dH0pLHQuaGFuZGxlcnMuc2V0KHIsbyl9LGo9ZnVuY3Rpb24oZSx0LHIsbil7dC5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXQub2JzZXJ2ZWQuZ2V0KGUpLmFjY2VwdExpc3Q7KCJzdHJpbmciIT10eXBlb2Ygbnx8LTE9PT1jKG8sbikpJiZjKG8sci50eXBlKT4tMSYmdC5jaGFuZ2VSZWNvcmRzLnB1c2gocil9KX07bz11KCksaT11KCksZS5vYnNlcnZlPWZ1bmN0aW9uKHQscixvKXtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3Qgb2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7aWYoZS5pc0Zyb3plbiYmZS5pc0Zyb3plbihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBhIGZyb3plbiBmdW5jdGlvbiBvYmplY3QiKTtpZihvPT09bilvPXM7ZWxzZSBpZighb3x8Im9iamVjdCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoaXJkIGFyZ3VtZW50IHRvIE9iamVjdC5vYnNlcnZlIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncy4iKTtyZXR1cm4gYih0LHIsbyksdH0sZS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCB1bm9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHIsbj1pLmdldCh0KTtyZXR1cm4gbiYmKHI9bi5vYnNlcnZlZC5nZXQoZSkpJiYobi5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxwKGZ1bmN0aW9uKCl7XyhuLHQpfSksMT09PW4ub2JzZXJ2ZWQuc2l6ZSYmbi5vYnNlcnZlZC5oYXMoZSk/aVsiZGVsZXRlIl0odCk6bi5vYnNlcnZlZFsiZGVsZXRlIl0oZSksMT09PXIuZGF0YS5oYW5kbGVycy5zaXplP29bImRlbGV0ZSJdKGUpOnIuZGF0YS5oYW5kbGVyc1siZGVsZXRlIl0odCkpLGV9LGUuZ2V0Tm90aWZpZXI9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmdldE5vdGlmaWVyIGNhbm5vdCBnZXROb3RpZmllciBub24tb2JqZWN0Iik7cmV0dXJuIGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4odCk/bnVsbDpnKHQpfSxlLmRlbGl2ZXJDaGFuZ2VSZWNvcmRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgdD1pLmdldChlKTt0JiYodC5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxfKHQsZSkpfX0oT2JqZWN0LEFycmF5LHRoaXMpfSx7fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5EYXRhT2JqZWN0T2JzZXJ2ZXI9ci5EYXRhT2JqZWN0UmVwb3J0ZXI9ci5TeW5jaGVyPXZvaWQgMCxlKCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iKSxlKCJvYmplY3Qub2JzZXJ2ZSIpLGUoImFycmF5Lm9ic2VydmUiKTt2YXIgbz1lKCIuL3N5bmNoZXIvU3luY2hlciIpLGk9bihvKSxzPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxhPW4ocyksYz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIiksdT1uKGMpO3IuU3luY2hlcj1pWyJkZWZhdWx0Il0sci5EYXRhT2JqZWN0UmVwb3J0ZXI9YVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdE9ic2VydmVyPXVbImRlZmF1bHQiXX0seyIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjo5NSwiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vc3luY2hlci9TeW5jaGVyIjo5OSwiYXJyYXkub2JzZXJ2ZSI6MSwibXV0YXRpb25vYnNlcnZlci1zaGltIjo5MCwib2JqZWN0Lm9ic2VydmUiOjkxfV0sOTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCIuL1N5bmNPYmplY3QiKSxwPW4oZCksYj1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGg9bihiKSx5PWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxpLHMpeygwLHVbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgYT10aGlzO2EuX3N5bmNoZXI9dCxhLl91cmw9cixhLl9zY2hlbWE9bixhLl9zdGF0dXM9byxhLl9zeW5jT2JqPW5ldyBwWyJkZWZhdWx0Il0oaSksYS5fY2hpbGRyZW5zPXMsYS5fdmVyc2lvbj0wLGEuX2NoaWxkSWQ9MCxhLl9jaGlsZHJlbk9iamVjdHM9e30sYS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYS5fb3duZXI9dC5fb3duZXIsYS5fYnVzPXQuX2J1c31yZXR1cm4oMCxmWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXQuX3VybCsiL2NoaWxkcmVuLyI7dC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz1yK24saT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihyKXtpZihyLmZyb20hPT1lLl9vd25lcilzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uQ2hpbGRDcmVhdGUocik7YnJlYWs7Y2FzZSJkZWxldGUiOmNvbnNvbGUubG9nKHIpO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4ocil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSwoMCxhWyJkZWZhdWx0Il0pKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGlsZHJlbk9iamVjdHNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicGF1c2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InJlc3VtZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToic3RvcCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToiYWRkQ2hpbGQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyLl9jaGlsZElkKys7dmFyIG49ci5fb3duZXIrIiMiK3IuX2NoaWxkSWQsbz1yLl91cmwrIi9jaGlsZHJlbi8iK2Uscz17dHlwZToiY3JlYXRlIixmcm9tOnIuX293bmVyLHRvOm8sYm9keTp7cmVzb3VyY2U6bix2YWx1ZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSl7dmFyIGk9ci5fYnVzLnBvc3RNZXNzYWdlKHMpO2NvbnNvbGUubG9nKCJjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICIrci5fb3duZXIrIiApOiAiLHMpO3ZhciBhPW5ldyBoWyJkZWZhdWx0Il0ocixuLHQsci5fb3duZXIsaSk7YS5vbkNoYW5nZShmdW5jdGlvbihlKXtyLl9vbkNoYW5nZShlLHtwYXRoOm8sY2hpbGRJZDpufSl9KSxyLl9jaGlsZHJlbk9iamVjdHNbbl09YSxlKGEpfSl9fSx7a2V5OiJvbkFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleToiX29uQ2hpbGRDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2U7Y29uc29sZS5sb2coImNyZWF0ZS1vYnNlcnZlci1jaGlsZCggIit0Ll9vd25lcisiICk6ICIsZSk7dmFyIG49bmV3IGhbImRlZmF1bHQiXSh0LHIsZS5ib2R5LnZhbHVlKTt0Ll9jaGlsZHJlbk9iamVjdHNbcl09bixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNvdXJjZTp0Ll9vd25lcn19KX0pO3ZhciBvPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTplLmJvZHkudmFsdWUsY2hpbGRJZDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX07dC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJihjb25zb2xlLmxvZygiQURELUNISUxEUkVOLUVWRU5UOiAiLG8pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pKX19LHtrZXk6Il9vbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rKywib24iPT09ci5fc3RhdHVzKXt2YXIgbj17dHlwZToidXBkYXRlIixmcm9tOnIuX3VybCx0bzpyLl91cmwrIi9jaGFuZ2VzIixib2R5Ont2ZXJzaW9uOnIuX3ZlcnNpb24sc291cmNlOnIuX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PWQuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PWQuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1kLkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAseS5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT1kLk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBjPWkub2JqLHU9aS5sYXN0O2Muc3BsaWNlKHUsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCIuL0RhdGFPYmplY3RDaGlsZCI6OTQsIi4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1lKCIuL1N5bmNPYmplY3QiKSx1PW4oYyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxzKXsoMCxpWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9wYXJlbnQ9dCxhLl9jaGlsZElkPXIsYS5fb3duZXI9byxhLl9tc2dJZD1zLGEuX3N5bmNPYmo9bmV3IHVbImRlZmF1bHQiXShuKSxhLl9idXM9dC5fYnVzLGEuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0Ijo5OCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4vRGF0YU9iamVjdENoaWxkIiksaj1uKG0pLCQ9e0FOWToiYW55IixTVEFSVDoic3RhcnQiLEVYQUNUOiJleGFjdCJ9LHc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLHMsYyxsKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGY9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8scy5kYXRhLGMpKSxkPWY7cmV0dXJuIGQuX3ZlcnNpb249bCxkLl9maWx0ZXJzPXt9LGQuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtkLl9vbkZpbHRlcihlKX0pLCgwLGlbImRlZmF1bHQiXSkocy5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cy5jaGlsZHJlbnNbZV07ZC5fY2hpbGRyZW5PYmplY3RzW2VdPW5ldyBqWyJkZWZhdWx0Il0oZCxlLHQpfSksZC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxmfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsKyIvY2hhbmdlcyIsZnVuY3Rpb24odCl7InVwZGF0ZSI9PT10LnR5cGUmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTokLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9JC5BTlk6KG4udHlwZT0kLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fZmlsdGVyc1tyXTtuLnR5cGU9PT0kLkFOWT9uLmNhbGxiYWNrKGUpOm4udHlwZT09PSQuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihyKSYmbi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLkVYQUNUJiZlLmZpZWxkPT09ciYmbi5jYWxsYmFjayhlKX0pfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT13LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0Ijo5MywiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjoxNX1dLDk2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksaj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGM9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8saSxzKSksbD1jO3JldHVybiBsLl9zdWJzY3JpcHRpb25zPXt9LGwuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrcisiLVNFTkQ6ICIsZSksbC5fb25DaGFuZ2UoZSl9KSxsLl9hbGxvY2F0ZUxpc3RlbmVycygpLGN9cmV0dXJuKDAsdlsiZGVmYXVsdCJdKSh0LGUpLCgwLGZbImRlZmF1bHQiXSkodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LSIrZS5fdXJsKyItUkNWOiAiLHQpLHQudHlwZSl7Y2FzZSJyZXNwb25zZSI6ZS5fb25SZXNwb25zZSh0KTticmVhaztjYXNlInJlYWQiOmUuX29uUmVhZCh0KX19KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJpbnZpdGVPYnNlcnZlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToiY3JlYXRlIixmcm9tOnQuX3N5bmNoZXIuX293bmVyLHRvOnQuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTp0Ll91cmwsc2NoZW1hOnQuX3NjaGVtYSx2YWx1ZTp0Ll9zeW5jT2JqLmRhdGEsYXV0aG9yaXNlOmV9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJvblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVhZEhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2NlcHQ6ZnVuY3Rpb24oKXt2YXIgbj17dXJsOnIsc3RhdHVzOiJvbiJ9O3QuX3N1YnNjcmlwdGlvbnNbcl09bjt2YXIgbz17fTtyZXR1cm4oMCxpWyJkZWZhdWx0Il0pKHQuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10Ll9jaGlsZHJlbk9iamVjdHNbZV0uZGF0YTtvW2VdPSgwLG0uZGVlcENsb25lKShyKX0pLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzY2hlbWE6dC5fc2NoZW1hLHZlcnNpb246dC5fdmVyc2lvbix2YWx1ZTp7ZGF0YTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKSxjaGlsZHJlbnM6b319fSksbn0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOnJ9fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiU1VCU0NSSVBUSU9OLUVWRU5UOiAiLG4pLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihuKSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5mcm9tLG49dC5fc3Vic2NyaXB0aW9uc1tyXTtkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXTt2YXIgbz17dHlwZTplLmJvZHkudHlwZSx1cmw6cixvYmplY3Q6bn07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlVOLVNVQlNDUklQVElPTi1FVkVOVDogIixvKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobykpfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKGNvbnNvbGUubG9nKCJSRVNQT05TRS1FVkVOVDogIixyKSx0Ll9vblJlc3BvbnNlSGFuZGxlcihyKSl9fSx7a2V5OiJfb25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sYWNjZXB0OmZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOigwLG0uZGVlcENsb25lKSh0LmRhdGEpfX0pfSxyZWplY3Q6ZnVuY3Rpb24ocil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAxLGRlc2M6cn19KX19O3QuX29uUmVhZEhhbmRsZXImJihjb25zb2xlLmxvZygiUkVBRC1FVkVOVDogIixyKSx0Ll9vblJlYWRIYW5kbGVyKHIpKX19LHtrZXk6InN1YnNjcmlwdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1qLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Ijo5MywiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBzPXRoaXM7cy5fb3duZXI9dCxzLl91cmw9cixzLl9idXM9bixzLl9jaGlsZHJlbj1vLHMuX2NoYW5nZXM9W10scy5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4oMCxhWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7clsiZGVmYXVsdCJdPWMsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5PYmplY3RUeXBlPXIuQ2hhbmdlVHlwZT12b2lkIDA7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksdT1uKGMpLGw9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIHI9dGhpcztyLl9vYnNlcnZlcnM9W10sci5fZmlsdGVycz17fSx0P3IuX2RhdGE9KDAsbC5kZWVwQ2xvbmUpKHQpOnIuX2RhdGE9e30sci5faW50ZXJuYWxPYnNlcnZlKG5ldyBkLHIuX2RhdGEpfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToib2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSl9fSx7a2V5OiJmaW5kIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIuIik7cmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQodCl9fSx7a2V5OiJmaW5kQmVmb3JlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxyPWUuc3BsaXQoIi4iKTtyZXR1cm4gdC5sYXN0PXIucG9wKCksdC5vYmo9dGhpcy5fZmluZFdpdGhTcGxpdChyKSx0fX0se2tleToiX2ZpbmRXaXRoU3BsaXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt0PXRbZV19KSx0fX0se2tleToiX2ZpcmVFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfX0se2tleToiX2lzT2JzZXJ2YWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1PYmplY3R8fGUuY29uc3RydWN0b3I9PT1BcnJheX19LHtrZXk6Il9pbnRlcm5hbE9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBuPWZ1bmN0aW9uKHQpe3IuX29uQ2hhbmdlcyhlLHQpfTtpZih0LmNvbnN0cnVjdG9yPT09T2JqZWN0KXtPYmplY3Qub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgbyBpbiB0KXIuX2lzT2JzZXJ2YWJsZSh0W29dKSYmci5faW50ZXJuYWxPYnNlcnZlKGVbIm5ldyJdKG8pLHRbb10pfWVsc2UgaWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5KXtBcnJheS5vYnNlcnZlKHQsbik7Zm9yKHZhciBpIGluIHQpaWYoci5faXNPYnNlcnZhYmxlKHRbaV0pKXt2YXIgcz1lWyJuZXciXShuZXcgcCh0W2ldLGkpKTtyLl9pbnRlcm5hbE9ic2VydmUocyx0W2ldKX19fX19LHtrZXk6Il9vbkNoYW5nZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztmb3IodmFyIG4gaW4gdCl7dmFyIG89dFtuXS5vYmplY3QsaT12b2lkIDA7aWYoby5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmKGk9aC5PQkpFQ1QpLG8uY29uc3RydWN0b3I9PT1BcnJheSYmKGk9aC5BUlJBWSksInNwbGljZSI9PT10W25dLnR5cGUpIWZ1bmN0aW9uKCl7dmFyIHM9dFtuXS5pbmRleCxhPWVbIm5ldyJdKCIiK3MpLGM9YS50b1N0cmluZygpLHU9dFtuXS5yZW1vdmVkLmxlbmd0aDtpZigwIT09dSl7dmFyIGY9dFtuXS5yZW1vdmVkO2YuZm9yRWFjaChmdW5jdGlvbih0LG4pe3IuX2lzT2JzZXJ2YWJsZSh0KSYmZS5yZW1vdmVJbmRleChzK24pfSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmMsZGF0YTp1fSl9dmFyIGQ9dFtuXS5hZGRlZENvdW50O2lmKDAhPT1kKXt2YXIgaD1vLnNsaWNlKHMscytkKTtoLmZvckVhY2goZnVuY3Rpb24odCxuKXtpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBvPWVbIm5ldyJdKG5ldyBwKHQscytuKSk7ci5faW50ZXJuYWxPYnNlcnZlKG8sdCl9fSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLkFERCxvVHlwZTppLGZpZWxkOmMsZGF0YTooMCxsLmRlZXBDbG9uZSkoaCl9KX1zIT09by5sZW5ndGgtMSYmZS5yZUluZGV4RnJvbShvKX0oKTtlbHNle3ZhciBzPWVbIm5ldyJdKHRbbl0ubmFtZSksYT1zLnRvU3RyaW5nKCk7aWYoLTEhPT1hLmluZGV4T2YoIlN5bWJvbCIpKWNvbnRpbnVlO3ZhciBjPW9bdFtuXS5uYW1lXTsidXBkYXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlVQREFURSxvVHlwZTppLGZpZWxkOmEsZGF0YTooMCxsLmRlZXBDbG9uZSkoYyl9KSwiYWRkIj09PXRbbl0udHlwZSYmKHRoaXMuX2ludGVybmFsT2JzZXJ2ZShzLGMpLHRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSkpLCJkZWxldGUiPT09dFtuXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuUkVNT1ZFLG9UeXBlOmksZmllbGQ6YX0pfX19fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksZX0oKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLl9wYXRoPVtdLHRoaXMuX29ic2VydmFibGVzPXt9fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToicmVtb3ZlSW5kZXgiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9vYnNlcnZhYmxlc1tlXX19LHtrZXk6InJlSW5kZXhGcm9tIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOygwLGlbImRlZmF1bHQiXSkodGhpcy5fb2JzZXJ2YWJsZXMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fb2JzZXJ2YWJsZXNbcl0sbz1lLmluZGV4T2Yobi5vYmopO24uaWR4IT1vJiYobi5pZHg9byxkZWxldGUgdC5fb2JzZXJ2YWJsZXNbcl0sdC5fb2JzZXJ2YWJsZXNbb109bil9KX19LHtrZXk6Im5ldyIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5jb25zdHJ1Y3Rvcj09cCYmKHRoaXMuX29ic2VydmFibGVzW2UuaWR4XT1lKTt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIHQuX3BhdGgucHVzaChlKSx0fX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9wYXRoLnB1c2goZSl9KSx0fX0se2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbih0LHIpezA9PT1yP2U9dC50b1N0cmluZygpOmUrPSIuIit0LnRvU3RyaW5nKCl9KSxlfX1dKSxlfSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpLHRoaXMub2JqPXQsdGhpcy5pZHg9cn1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGI9ci5DaGFuZ2VUeXBlPXtVUERBVEU6InVwZGF0ZSIsQUREOiJhZGQiLFJFTU9WRToicmVtb3ZlIn0saD1yLk9iamVjdFR5cGU9e09CSkVDVDoib2JqZWN0IixBUlJBWToiYXJyYXkifTtyWyJkZWZhdWx0Il09Zn0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5OTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4vRGF0YU9iamVjdFJlcG9ydGVyIiksZj1uKGwpLGQ9ZSgiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxwPW4oZCksYj1lKCIuL0RhdGFQcm92aXNpb25hbCIpLGg9bihiKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBvPXRoaXM7by5fb3duZXI9dCxvLl9idXM9cixvLl9zdWJVUkw9bi5ydW50aW1lVVJMKyIvc20iLG8uX3JlcG9ydGVycz17fSxvLl9vYnNlcnZlcnM9e30sby5fcHJvdmlzaW9uYWxzPXt9LHIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtpZihlLmZyb20hPT10KXN3aXRjaChjb25zb2xlLmxvZygiU3luY2hlci1SQ1Y6ICIsZSksZS50eXBlKXtjYXNlImZvcndhcmQiOm8uX29uRm9yd2FyZChlKTticmVhaztjYXNlImNyZWF0ZSI6by5fb25SZW1vdGVDcmVhdGUoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOm8uX29uUmVtb3RlRGVsZXRlKGUpfX0pfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiY3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyLnJlcG9ydGVyPW4uX293bmVyLHIuc2NoZW1hPWU7dmFyIG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6cixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKHQsaSl7bi5fYnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24obyl7aWYoY29uc29sZS5sb2coImNyZWF0ZS1yZXNwb25zZTogIixvKSwyMDA9PT1vLmJvZHkuY29kZSl7dmFyIHM9by5ib2R5LnJlc291cmNlLGE9bmV3IGZbImRlZmF1bHQiXShuLHMsZSwib24iLHIsby5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTtuLl9yZXBvcnRlcnNbc109YSx0KGEpfWVsc2UgaShvLmJvZHkuZGVzYyl9KX0pfX0se2tleToic3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX293bmVyLHRvOnIuX3N1YlVSTCxib2R5OntzY2hlbWE6ZSxyZXNvdXJjZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24obyxpKXtyLl9idXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihuKXtjb25zb2xlLmxvZygic3Vic2NyaWJlLXJlc3BvbnNlOiAiLG4pO3ZhciBzPXIuX3Byb3Zpc2lvbmFsc1t0XTtpZihkZWxldGUgci5fcHJvdmlzaW9uYWxzW3RdLHMmJnMuX3JlbGVhc2VMaXN0ZW5lcnMoKSxuLmJvZHkuY29kZTwyMDApcz1uZXcgaFsiZGVmYXVsdCJdKHIuX293bmVyLHQsci5fYnVzLG4uYm9keS5jaGlsZHJlblJlc291cmNlcyksci5fcHJvdmlzaW9uYWxzW3RdPXM7ZWxzZSBpZigyMDA9PT1uLmJvZHkuY29kZSl7dmFyIGE9bmV3IHBbImRlZmF1bHQiXShyLHQsZSwib24iLG4uYm9keS52YWx1ZSxzLmNoaWxkcmVuLG4uYm9keS52ZXJzaW9uKTtyLl9vYnNlcnZlcnNbdF09YSxvKGEpLHMuYXBwbHkoYSl9ZWxzZSBpKG4uYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJyZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InJlYWQiLGZyb206dC5fb3duZXIsdG86ZX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSxuKXt0Ll9idXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbih0KXtjb25zb2xlLmxvZygicmVhZC1yZXNwb25zZTogIix0KSwyMDA9PT10LmJvZHkuY29kZT9lKHQuYm9keS52YWx1ZSk6bih0LmJvZHkuZGVzYyl9KX0pfX0se2tleToib25Ob3RpZmljYXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcj1lfX0se2tleToiX29uRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuX3JlcG9ydGVyc1tlLmJvZHkudG9dO3IuX29uRm9yd2FyZChlKX19LHtrZXk6Il9vblJlbW90ZUNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbS5zbGljZSgwLC0xMyksbj17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixuKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdO2lmKG4pe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBvPTIwMDtyJiYobz1yKSwyMDA9PT1vJiZuWyJkZWxldGUiXSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixvKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobykpfWVsc2UgdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6Im93bmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXJ9fSx7a2V5OiJyZXBvcnRlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXBvcnRlcnN9fSx7a2V5OiJvYnNlcnZlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXksdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjo5NiwiLi9EYXRhUHJvdmlzaW9uYWwiOjk3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDEwMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSl7aWYoIWUpdGhyb3cgRXJyb3IoIlVSTCBpcyBuZWVkZWQgdG8gc3BsaXQiKTt2YXIgdD0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSxyPSIkMSwkMiwkMyIsbj1lLnJlcGxhY2UodCxyKS5zcGxpdCgiLCIpO25bMF09PT1lJiYoblswXT0iaHR0cHMiLG5bMV09ZSk7dmFyIG89e3R5cGU6blswXSxkb21haW46blsxXSxpZGVudGl0eTpuWzJdfTtyZXR1cm4gb31mdW5jdGlvbiBpKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpLHI9e3VzZXJuYW1lOmUuc3Vic3RyaW5nKDAsdCksZG9tYWluOmUuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCl9O3JldHVybiByfWZ1bmN0aW9uIHMoZSl7cmV0dXJuISgoMCxiWyJkZWZhdWx0Il0pKGUpLmxlbmd0aD4wKX1mdW5jdGlvbiBhKGUpe3JldHVybiBlP0pTT04ucGFyc2UoKDAsZFsiZGVmYXVsdCJdKShlKSk6dm9pZCAwfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIik7cmV0dXJuInVzZXI6Ly8iK2Uuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsdCl9ZnVuY3Rpb24gdShlKXt2YXIgdD1vKGUpO3JldHVybiB0LmlkZW50aXR5LnJlcGxhY2UoIi8iLCIiKSsiQCIrdC5kb21haW59ZnVuY3Rpb24gbChlKXtpZigidXNlcjovLyI9PT1lLnN1YnN0cmluZygwLDcpKXt2YXIgdD1vKGUpO2lmKHQuZG9tYWluJiZ0LmlkZW50aXR5KXJldHVybiBlO3Rocm93InVzZXJVUkwgd2l0aCB3cm9uZyBmb3JtYXQifXJldHVybiBjKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgZj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiKSxkPW4oZikscD1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxiPW4ocCk7ci5kaXZpZGVVUkw9byxyLmRpdmlkZUVtYWlsPWksci5lbXB0eU9iamVjdD1zLHIuZGVlcENsb25lPWEsci5nZXRVc2VyVVJMRnJvbUVtYWlsPWMsci5nZXRVc2VyRW1haWxGcm9tVVJMPXUsci5jb252ZXJ0VG9Vc2VyVVJMPWx9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IjoyLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjd9XX0se30sWzkyXSkoOTIpfSk7CgoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKiEKICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMcwogKiBJUHY2IFN1cHBvcnQKICoKICogVmVyc2lvbjogMS4xOC4xCiAqCiAqIEF1dGhvcjogUm9kbmV5IFJlaG0KICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5pby9VUkkuanMvCiAqCiAqIExpY2Vuc2VkIHVuZGVyCiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZQogKgogKi8KCihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICd1c2Ugc3RyaWN0JzsKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanMKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAvLyBOb2RlCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLgogICAgZGVmaW5lKGZhY3RvcnkpOwogIH0gZWxzZSB7CiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQogICAgcm9vdC5JUHY2ID0gZmFjdG9yeShyb290KTsKICB9Cn0odGhpcywgZnVuY3Rpb24gKHJvb3QpIHsKICAndXNlIHN0cmljdCc7CgogIC8qCiAgdmFyIF9pbiA9ICJmZTgwOjAwMDA6MDAwMDowMDAwOjAyMDQ6NjFmZjpmZTlkOmYxNTYiOwogIHZhciBfb3V0ID0gSVB2Ni5iZXN0KF9pbik7CiAgdmFyIF9leHBlY3RlZCA9ICJmZTgwOjoyMDQ6NjFmZjpmZTlkOmYxNTYiOwoKICBjb25zb2xlLmxvZyhfaW4sIF9vdXQsIF9leHBlY3RlZCwgX291dCA9PT0gX2V4cGVjdGVkKTsKICAqLwoKICAvLyBzYXZlIGN1cnJlbnQgSVB2NiB2YXJpYWJsZSwgaWYgYW55CiAgdmFyIF9JUHY2ID0gcm9vdCAmJiByb290LklQdjY7CgogIGZ1bmN0aW9uIGJlc3RQcmVzZW50YXRpb24oYWRkcmVzcykgewogICAgLy8gYmFzZWQgb246CiAgICAvLyBKYXZhc2NyaXB0IHRvIHRlc3QgYW4gSVB2NiBhZGRyZXNzIGZvciBwcm9wZXIgZm9ybWF0LCBhbmQgdG8KICAgIC8vIHByZXNlbnQgdGhlICJiZXN0IHRleHQgcmVwcmVzZW50YXRpb24iIGFjY29yZGluZyB0byBJRVRGIERyYWZ0IFJGQyBhdAogICAgLy8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi02bWFuLXRleHQtYWRkci1yZXByZXNlbnRhdGlvbi0wNAogICAgLy8gOCBGZWIgMjAxMCBSaWNoIEJyb3duLCBEYXJ0d2FyZSwgTExDCiAgICAvLyBQbGVhc2UgZmVlbCBmcmVlIHRvIHVzZSB0aGlzIGNvZGUgYXMgbG9uZyBhcyB5b3UgcHJvdmlkZSBhIGxpbmsgdG8KICAgIC8vIGh0dHA6Ly93d3cuaW50ZXJtYXBwZXIuY29tCiAgICAvLyBodHRwOi8vaW50ZXJtYXBwZXIuY29tL3N1cHBvcnQvdG9vbHMvSVBWNi1WYWxpZGF0b3IuYXNweAogICAgLy8gaHR0cDovL2Rvd25sb2FkLmRhcnR3YXJlLmNvbS90aGlyZHBhcnR5L2lwdjZ2YWxpZGF0b3IuanMKCiAgICB2YXIgX2FkZHJlc3MgPSBhZGRyZXNzLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgc2VnbWVudHMgPSBfYWRkcmVzcy5zcGxpdCgnOicpOwogICAgdmFyIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDsKICAgIHZhciB0b3RhbCA9IDg7CgogICAgLy8gdHJpbSBjb2xvbnMgKDo6IG9yIDo6YTpiOmPigKYgb3Ig4oCmYTpiOmM6OikKICAgIGlmIChzZWdtZW50c1swXSA9PT0gJycgJiYgc2VnbWVudHNbMV0gPT09ICcnICYmIHNlZ21lbnRzWzJdID09PSAnJykgewogICAgICAvLyBtdXN0IGhhdmUgYmVlbiA6OgogICAgICAvLyByZW1vdmUgZmlyc3QgdHdvIGl0ZW1zCiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7CiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7CiAgICB9IGVsc2UgaWYgKHNlZ21lbnRzWzBdID09PSAnJyAmJiBzZWdtZW50c1sxXSA9PT0gJycpIHsKICAgICAgLy8gbXVzdCBoYXZlIGJlZW4gOjp4eHh4CiAgICAgIC8vIHJlbW92ZSB0aGUgZmlyc3QgaXRlbQogICAgICBzZWdtZW50cy5zaGlmdCgpOwogICAgfSBlbHNlIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXSA9PT0gJycgJiYgc2VnbWVudHNbbGVuZ3RoIC0gMl0gPT09ICcnKSB7CiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIHh4eHg6OgogICAgICBzZWdtZW50cy5wb3AoKTsKICAgIH0KCiAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7CgogICAgLy8gYWRqdXN0IHRvdGFsIHNlZ21lbnRzIGZvciBJUHY0IHRyYWlsZXIKICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXS5pbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICAgIC8vIGZvdW5kIGEgIi4iIHdoaWNoIG1lYW5zIElQdjQKICAgICAgdG90YWwgPSA3OwogICAgfQoKICAgIC8vIGZpbGwgZW1wdHkgc2VnbWVudHMgdGhlbSB3aXRoICIwMDAwIgogICAgdmFyIHBvczsKICAgIGZvciAocG9zID0gMDsgcG9zIDwgbGVuZ3RoOyBwb3MrKykgewogICAgICBpZiAoc2VnbWVudHNbcG9zXSA9PT0gJycpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3MgPCB0b3RhbCkgewogICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAxLCAnMDAwMCcpOwogICAgICB3aGlsZSAoc2VnbWVudHMubGVuZ3RoIDwgdG90YWwpIHsKICAgICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAwLCAnMDAwMCcpOwogICAgICB9CiAgICB9CgogICAgLy8gc3RyaXAgbGVhZGluZyB6ZXJvcwogICAgdmFyIF9zZWdtZW50czsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWw7IGkrKykgewogICAgICBfc2VnbWVudHMgPSBzZWdtZW50c1tpXS5zcGxpdCgnJyk7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMyA7IGorKykgewogICAgICAgIGlmIChfc2VnbWVudHNbMF0gPT09ICcwJyAmJiBfc2VnbWVudHMubGVuZ3RoID4gMSkgewogICAgICAgICAgX3NlZ21lbnRzLnNwbGljZSgwLDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHNlZ21lbnRzW2ldID0gX3NlZ21lbnRzLmpvaW4oJycpOwogICAgfQoKICAgIC8vIGZpbmQgbG9uZ2VzdCBzZXF1ZW5jZSBvZiB6ZXJvZXMgYW5kIGNvYWxlc2NlIHRoZW0gaW50byBvbmUgc2VnbWVudAogICAgdmFyIGJlc3QgPSAtMTsKICAgIHZhciBfYmVzdCA9IDA7CiAgICB2YXIgX2N1cnJlbnQgPSAwOwogICAgdmFyIGN1cnJlbnQgPSAtMTsKICAgIHZhciBpbnplcm9lcyA9IGZhbHNlOwogICAgLy8gaTsgYWxyZWFkeSBkZWNsYXJlZAoKICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7CiAgICAgIGlmIChpbnplcm9lcykgewogICAgICAgIGlmIChzZWdtZW50c1tpXSA9PT0gJzAnKSB7CiAgICAgICAgICBfY3VycmVudCArPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbnplcm9lcyA9IGZhbHNlOwogICAgICAgICAgaWYgKF9jdXJyZW50ID4gX2Jlc3QpIHsKICAgICAgICAgICAgYmVzdCA9IGN1cnJlbnQ7CiAgICAgICAgICAgIF9iZXN0ID0gX2N1cnJlbnQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChzZWdtZW50c1tpXSA9PT0gJzAnKSB7CiAgICAgICAgICBpbnplcm9lcyA9IHRydWU7CiAgICAgICAgICBjdXJyZW50ID0gaTsKICAgICAgICAgIF9jdXJyZW50ID0gMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoX2N1cnJlbnQgPiBfYmVzdCkgewogICAgICBiZXN0ID0gY3VycmVudDsKICAgICAgX2Jlc3QgPSBfY3VycmVudDsKICAgIH0KCiAgICBpZiAoX2Jlc3QgPiAxKSB7CiAgICAgIHNlZ21lbnRzLnNwbGljZShiZXN0LCBfYmVzdCwgJycpOwogICAgfQoKICAgIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDsKCiAgICAvLyBhc3NlbWJsZSByZW1haW5pbmcgc2VnbWVudHMKICAgIHZhciByZXN1bHQgPSAnJzsKICAgIGlmIChzZWdtZW50c1swXSA9PT0gJycpICB7CiAgICAgIHJlc3VsdCA9ICc6JzsKICAgIH0KCiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgcmVzdWx0ICs9IHNlZ21lbnRzW2ldOwogICAgICBpZiAoaSA9PT0gbGVuZ3RoIC0gMSkgewogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICByZXN1bHQgKz0gJzonOwogICAgfQoKICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXSA9PT0gJycpIHsKICAgICAgcmVzdWx0ICs9ICc6JzsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gbm9Db25mbGljdCgpIHsKICAgIC8qanNoaW50IHZhbGlkdGhpczogdHJ1ZSAqLwogICAgaWYgKHJvb3QuSVB2NiA9PT0gdGhpcykgewogICAgICByb290LklQdjYgPSBfSVB2NjsKICAgIH0KICAKICAgIHJldHVybiB0aGlzOwogIH0KCiAgcmV0dXJuIHsKICAgIGJlc3Q6IGJlc3RQcmVzZW50YXRpb24sCiAgICBub0NvbmZsaWN0OiBub0NvbmZsaWN0CiAgfTsKfSkpOwoKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qIQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzCiAqIFNlY29uZCBMZXZlbCBEb21haW4gKFNMRCkgU3VwcG9ydAogKgogKiBWZXJzaW9uOiAxLjE4LjEKICoKICogQXV0aG9yOiBSb2RuZXkgUmVobQogKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy8KICoKICogTGljZW5zZWQgdW5kZXIKICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlCiAqCiAqLwoKKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7CiAgJ3VzZSBzdHJpY3QnOwogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qcwogIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHsKICAgIC8vIE5vZGUKICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuCiAgICBkZWZpbmUoZmFjdG9yeSk7CiAgfSBlbHNlIHsKICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICByb290LlNlY29uZExldmVsRG9tYWlucyA9IGZhY3Rvcnkocm9vdCk7CiAgfQp9KHRoaXMsIGZ1bmN0aW9uIChyb290KSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvLyBzYXZlIGN1cnJlbnQgU2Vjb25kTGV2ZWxEb21haW5zIHZhcmlhYmxlLCBpZiBhbnkKICB2YXIgX1NlY29uZExldmVsRG9tYWlucyA9IHJvb3QgJiYgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnM7CgogIHZhciBTTEQgPSB7CiAgICAvLyBsaXN0IG9mIGtub3duIFNlY29uZCBMZXZlbCBEb21haW5zCiAgICAvLyBjb252ZXJ0ZWQgbGlzdCBvZiBTTERzIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dhdmluZ21pbGxlci9zZWNvbmQtbGV2ZWwtZG9tYWlucwogICAgLy8gLS0tLQogICAgLy8gcHVibGljc3VmZml4Lm9yZyBpcyBtb3JlIGN1cnJlbnQgYW5kIGFjdHVhbGx5IHVzZWQgYnkgYSBjb3VwbGUgb2YgYnJvd3NlcnMgaW50ZXJuYWxseS4KICAgIC8vIGRvd25zaWRlIGlzIGl0IGFsc28gY29udGFpbnMgZG9tYWlucyBsaWtlICJkeW5kbnMub3JnIiAtIHdoaWNoIGlzIGZpbmUgZm9yIHRoZSBzZWN1cml0eQogICAgLy8gaXNzdWVzIGJyb3dzZXIgaGF2ZSB0byBkZWFsIHdpdGggKFNPUCBmb3IgY29va2llcywgZXRjKSAtIGJ1dCBpcyB3YXkgb3ZlcmJvYXJkIGZvciBVUkkuanMKICAgIC8vIC0tLS0KICAgIGxpc3Q6IHsKICAgICAgJ2FjJzonIGNvbSBnb3YgbWlsIG5ldCBvcmcgJywKICAgICAgJ2FlJzonIGFjIGNvIGdvdiBtaWwgbmFtZSBuZXQgb3JnIHBybyBzY2ggJywKICAgICAgJ2FmJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2FsJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdhbyc6JyBjbyBlZCBndiBpdCBvZyBwYiAnLAogICAgICAnYXInOicgY29tIGVkdSBnb2IgZ292IGludCBtaWwgbmV0IG9yZyB0dXIgJywKICAgICAgJ2F0JzonIGFjIGNvIGd2IG9yICcsCiAgICAgICdhdSc6JyBhc24gY29tIGNzaXJvIGVkdSBnb3YgaWQgbmV0IG9yZyAnLAogICAgICAnYmEnOicgY28gY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgcnMgdW5iaSB1bm1vIHVuc2EgdW50eiB1bnplICcsCiAgICAgICdiYic6JyBiaXogY28gY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnIHN0b3JlIHR2ICcsCiAgICAgICdiaCc6JyBiaXogY2MgY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdibic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdibyc6JyBjb20gZWR1IGdvYiBnb3YgaW50IG1pbCBuZXQgb3JnIHR2ICcsCiAgICAgICdicic6JyBhZG0gYWR2IGFnciBhbSBhcnEgYXJ0IGF0byBiIGJpbyBibG9nIGJtZCBjaW0gY25nIGNudCBjb20gY29vcCBlY24gZWR1IGVuZyBlc3AgZXRjIGV0aSBmYXIgZmxvZyBmbSBmbmQgZm90IGZzdCBnMTIgZ2dmIGdvdiBpbWIgaW5kIGluZiBqb3IganVzIGxlbCBtYXQgbWVkIG1pbCBtdXMgbmV0IG5vbSBub3QgbnRyIG9kbyBvcmcgcHBnIHBybyBwc2MgcHNpIHFzbCByZWMgc2xnIHNydiB0bXAgdHJkIHR1ciB0diB2ZXQgdmxvZyB3aWtpIHpsZyAnLAogICAgICAnYnMnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnYnonOicgZHUgZXQgb20gb3YgcmcgJywKICAgICAgJ2NhJzonIGFiIGJjIG1iIG5iIG5mIG5sIG5zIG50IG51IG9uIHBlIHFjIHNrIHlrICcsCiAgICAgICdjayc6JyBiaXogY28gZWR1IGdlbiBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdjbic6JyBhYyBhaCBiaiBjb20gY3EgZWR1IGZqIGdkIGdvdiBncyBneCBneiBoYSBoYiBoZSBoaSBobCBobiBqbCBqcyBqeCBsbiBtaWwgbmV0IG5tIG54IG9yZyBxaCBzYyBzZCBzaCBzbiBzeCB0aiB0dyB4aiB4eiB5biB6aiAnLAogICAgICAnY28nOicgY29tIGVkdSBnb3YgbWlsIG5ldCBub20gb3JnICcsCiAgICAgICdjcic6JyBhYyBjIGNvIGVkIGZpIGdvIG9yIHNhICcsCiAgICAgICdjeSc6JyBhYyBiaXogY29tIGVrbG9nZXMgZ292IGx0ZCBuYW1lIG5ldCBvcmcgcGFybGlhbWVudCBwcmVzcyBwcm8gdG0gJywKICAgICAgJ2RvJzonIGFydCBjb20gZWR1IGdvYiBnb3YgbWlsIG5ldCBvcmcgc2xkIHdlYiAnLAogICAgICAnZHonOicgYXJ0IGFzc28gY29tIGVkdSBnb3YgbmV0IG9yZyBwb2wgJywKICAgICAgJ2VjJzonIGNvbSBlZHUgZmluIGdvdiBpbmZvIG1lZCBtaWwgbmV0IG9yZyBwcm8gJywKICAgICAgJ2VnJzonIGNvbSBlZHUgZXVuIGdvdiBtaWwgbmFtZSBuZXQgb3JnIHNjaSAnLAogICAgICAnZXInOicgY29tIGVkdSBnb3YgaW5kIG1pbCBuZXQgb3JnIHJvY2hlc3QgdyAnLAogICAgICAnZXMnOicgY29tIGVkdSBnb2Igbm9tIG9yZyAnLAogICAgICAnZXQnOicgYml6IGNvbSBlZHUgZ292IGluZm8gbmFtZSBuZXQgb3JnICcsCiAgICAgICdmaic6JyBhYyBiaXogY29tIGluZm8gbWlsIG5hbWUgbmV0IG9yZyBwcm8gJywKICAgICAgJ2ZrJzonIGFjIGNvIGdvdiBuZXQgbm9tIG9yZyAnLAogICAgICAnZnInOicgYXNzbyBjb20gZiBnb3V2IG5vbSBwcmQgcHJlc3NlIHRtICcsCiAgICAgICdnZyc6JyBjbyBuZXQgb3JnICcsCiAgICAgICdnaCc6JyBjb20gZWR1IGdvdiBtaWwgb3JnICcsCiAgICAgICdnbic6JyBhYyBjb20gZ292IG5ldCBvcmcgJywKICAgICAgJ2dyJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdndCc6JyBjb20gZWR1IGdvYiBpbmQgbWlsIG5ldCBvcmcgJywKICAgICAgJ2d1JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2hrJzonIGNvbSBlZHUgZ292IGlkdiBuZXQgb3JnICcsCiAgICAgICdodSc6JyAyMDAwIGFncmFyIGJvbHQgY2FzaW5vIGNpdHkgY28gZXJvdGljYSBlcm90aWthIGZpbG0gZm9ydW0gZ2FtZXMgaG90ZWwgaW5mbyBpbmdhdGxhbiBqb2dhc3oga29ueXZlbG8gbGFrYXMgbWVkaWEgbmV3cyBvcmcgcHJpdiByZWtsYW0gc2V4IHNob3Agc3BvcnQgc3VsaSBzemV4IHRtIHRvenNkZSB1dGF6YXMgdmlkZW8gJywKICAgICAgJ2lkJzonIGFjIGNvIGdvIG1pbCBuZXQgb3Igc2NoIHdlYiAnLAogICAgICAnaWwnOicgYWMgY28gZ292IGlkZiBrMTIgbXVuaSBuZXQgb3JnICcsCiAgICAgICdpbic6JyBhYyBjbyBlZHUgZXJuZXQgZmlybSBnZW4gZ292IGkgaW5kIG1pbCBuZXQgbmljIG9yZyByZXMgJywKICAgICAgJ2lxJzonIGNvbSBlZHUgZ292IGkgbWlsIG5ldCBvcmcgJywKICAgICAgJ2lyJzonIGFjIGNvIGRuc3NlYyBnb3YgaSBpZCBuZXQgb3JnIHNjaCAnLAogICAgICAnaXQnOicgZWR1IGdvdiAnLAogICAgICAnamUnOicgY28gbmV0IG9yZyAnLAogICAgICAnam8nOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJywKICAgICAgJ2pwJzonIGFjIGFkIGNvIGVkIGdvIGdyIGxnIG5lIG9yICcsCiAgICAgICdrZSc6JyBhYyBjbyBnbyBpbmZvIG1lIG1vYmkgbmUgb3Igc2MgJywKICAgICAgJ2toJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnIHBlciAnLAogICAgICAna2knOicgYml6IGNvbSBkZSBlZHUgZ292IGluZm8gbW9iIG5ldCBvcmcgdGVsICcsCiAgICAgICdrbSc6JyBhc3NvIGNvbSBjb29wIGVkdSBnb3V2IGsgbWVkZWNpbiBtaWwgbm9tIG5vdGFpcmVzIHBoYXJtYWNpZW5zIHByZXNzZSB0bSB2ZXRlcmluYWlyZSAnLAogICAgICAna24nOicgZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdrcic6JyBhYyBidXNhbiBjaHVuZ2J1ayBjaHVuZ25hbSBjbyBkYWVndSBkYWVqZW9uIGVzIGdhbmd3b24gZ28gZ3dhbmdqdSBneWVvbmdidWsgZ3llb25nZ2kgZ3llb25nbmFtIGhzIGluY2hlb24gamVqdSBqZW9uYnVrIGplb25uYW0gayBrZyBtaWwgbXMgbmUgb3IgcGUgcmUgc2Mgc2VvdWwgdWxzYW4gJywKICAgICAgJ2t3JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2t5JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2t6JzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdsYic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdsayc6JyBhc3NuIGNvbSBlZHUgZ292IGdycCBob3RlbCBpbnQgbHRkIG5ldCBuZ28gb3JnIHNjaCBzb2Mgd2ViICcsCiAgICAgICdscic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdsdic6JyBhc24gY29tIGNvbmYgZWR1IGdvdiBpZCBtaWwgbmV0IG9yZyAnLAogICAgICAnbHknOicgY29tIGVkdSBnb3YgaWQgbWVkIG5ldCBvcmcgcGxjIHNjaCAnLAogICAgICAnbWEnOicgYWMgY28gZ292IG0gbmV0IG9yZyBwcmVzcyAnLAogICAgICAnbWMnOicgYXNzbyB0bSAnLAogICAgICAnbWUnOicgYWMgY28gZWR1IGdvdiBpdHMgbmV0IG9yZyBwcml2ICcsCiAgICAgICdtZyc6JyBjb20gZWR1IGdvdiBtaWwgbm9tIG9yZyBwcmQgdG0gJywKICAgICAgJ21rJzonIGNvbSBlZHUgZ292IGluZiBuYW1lIG5ldCBvcmcgcHJvICcsCiAgICAgICdtbCc6JyBjb20gZWR1IGdvdiBuZXQgb3JnIHByZXNzZSAnLAogICAgICAnbW4nOicgZWR1IGdvdiBvcmcgJywKICAgICAgJ21vJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ210JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ212JzonIGFlcm8gYml6IGNvbSBjb29wIGVkdSBnb3YgaW5mbyBpbnQgbWlsIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvICcsCiAgICAgICdtdyc6JyBhYyBjbyBjb20gY29vcCBlZHUgZ292IGludCBtdXNldW0gbmV0IG9yZyAnLAogICAgICAnbXgnOicgY29tIGVkdSBnb2IgbmV0IG9yZyAnLAogICAgICAnbXknOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJywKICAgICAgJ25mJzonIGFydHMgY29tIGZpcm0gaW5mbyBuZXQgb3RoZXIgcGVyIHJlYyBzdG9yZSB3ZWIgJywKICAgICAgJ25nJzonIGJpeiBjb20gZWR1IGdvdiBtaWwgbW9iaSBuYW1lIG5ldCBvcmcgc2NoICcsCiAgICAgICduaSc6JyBhYyBjbyBjb20gZWR1IGdvYiBtaWwgbmV0IG5vbSBvcmcgJywKICAgICAgJ25wJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICducic6JyBiaXogY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdvbSc6JyBhYyBiaXogY28gY29tIGVkdSBnb3YgbWVkIG1pbCBtdXNldW0gbmV0IG9yZyBwcm8gc2NoICcsCiAgICAgICdwZSc6JyBjb20gZWR1IGdvYiBtaWwgbmV0IG5vbSBvcmcgc2xkICcsCiAgICAgICdwaCc6JyBjb20gZWR1IGdvdiBpIG1pbCBuZXQgbmdvIG9yZyAnLAogICAgICAncGsnOicgYml6IGNvbSBlZHUgZmFtIGdvYiBnb2sgZ29uIGdvcCBnb3MgZ292IG5ldCBvcmcgd2ViICcsCiAgICAgICdwbCc6JyBhcnQgYmlhbHlzdG9rIGJpeiBjb20gZWR1IGdkYSBnZGFuc2sgZ29yem93IGdvdiBpbmZvIGthdG93aWNlIGtyYWtvdyBsb2R6IGx1YmxpbiBtaWwgbmV0IG5nbyBvbHN6dHluIG9yZyBwb3puYW4gcHdyIHJhZG9tIHNsdXBzayBzemN6ZWNpbiB0b3J1biB3YXJzemF3YSB3YXcgd3JvYyB3cm9jbGF3IHpnb3JhICcsCiAgICAgICdwcic6JyBhYyBiaXogY29tIGVkdSBlc3QgZ292IGluZm8gaXNsYSBuYW1lIG5ldCBvcmcgcHJvIHByb2YgJywKICAgICAgJ3BzJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgcGxvIHNlYyAnLAogICAgICAncHcnOicgYmVsYXUgY28gZWQgZ28gbmUgb3IgJywKICAgICAgJ3JvJzonIGFydHMgY29tIGZpcm0gaW5mbyBub20gbnQgb3JnIHJlYyBzdG9yZSB0bSB3d3cgJywKICAgICAgJ3JzJzonIGFjIGNvIGVkdSBnb3YgaW4gb3JnICcsCiAgICAgICdzYic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdzYyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdzaCc6JyBjbyBjb20gZWR1IGdvdiBuZXQgbm9tIG9yZyAnLAogICAgICAnc2wnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnc3QnOicgY28gY29tIGNvbnN1bGFkbyBlZHUgZW1iYWl4YWRhIGdvdiBtaWwgbmV0IG9yZyBwcmluY2lwZSBzYW90b21lIHN0b3JlICcsCiAgICAgICdzdic6JyBjb20gZWR1IGdvYiBvcmcgcmVkICcsCiAgICAgICdzeic6JyBhYyBjbyBvcmcgJywKICAgICAgJ3RyJzonIGF2IGJicyBiZWwgYml6IGNvbSBkciBlZHUgZ2VuIGdvdiBpbmZvIGsxMiBuYW1lIG5ldCBvcmcgcG9sIHRlbCB0c2sgdHYgd2ViICcsCiAgICAgICd0dCc6JyBhZXJvIGJpeiBjYXQgY28gY29tIGNvb3AgZWR1IGdvdiBpbmZvIGludCBqb2JzIG1pbCBtb2JpIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvIHRlbCB0cmF2ZWwgJywKICAgICAgJ3R3JzonIGNsdWIgY29tIGViaXogZWR1IGdhbWUgZ292IGlkdiBtaWwgbmV0IG9yZyAnLAogICAgICAnbXUnOicgYWMgY28gY29tIGdvdiBuZXQgb3Igb3JnICcsCiAgICAgICdteic6JyBhYyBjbyBlZHUgZ292IG9yZyAnLAogICAgICAnbmEnOicgY28gY29tICcsCiAgICAgICdueic6JyBhYyBjbyBjcmkgZ2VlayBnZW4gZ292dCBoZWFsdGggaXdpIG1hb3JpIG1pbCBuZXQgb3JnIHBhcmxpYW1lbnQgc2Nob29sICcsCiAgICAgICdwYSc6JyBhYm8gYWMgY29tIGVkdSBnb2IgaW5nIG1lZCBuZXQgbm9tIG9yZyBzbGQgJywKICAgICAgJ3B0JzonIGNvbSBlZHUgZ292IGludCBuZXQgbm9tZSBvcmcgcHVibCAnLAogICAgICAncHknOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgJywKICAgICAgJ3FhJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdyZSc6JyBhc3NvIGNvbSBub20gJywKICAgICAgJ3J1JzonIGFjIGFkeWdleWEgYWx0YWkgYW11ciBhcmtoYW5nZWxzayBhc3RyYWtoYW4gYmFzaGtpcmlhIGJlbGdvcm9kIGJpciBicnlhbnNrIGJ1cnlhdGlhIGNiZyBjaGVsIGNoZWx5YWJpbnNrIGNoaXRhIGNodWtvdGthIGNodXZhc2hpYSBjb20gZGFnZXN0YW4gZS1idXJnIGVkdSBnb3YgZ3Jvem55IGludCBpcmt1dHNrIGl2YW5vdm8gaXpoZXZzayBqYXIgam9zaGthci1vbGEga2FsbXlraWEga2FsdWdhIGthbWNoYXRrYSBrYXJlbGlhIGthemFuIGtjaHIga2VtZXJvdm8ga2hhYmFyb3ZzayBraGFrYXNzaWEga2h2IGtpcm92IGtvZW5pZyBrb21pIGtvc3Ryb21hIGtyYW5veWFyc2sga3ViYW4ga3VyZ2FuIGt1cnNrIGxpcGV0c2sgbWFnYWRhbiBtYXJpIG1hcmktZWwgbWFyaW5lIG1pbCBtb3Jkb3ZpYSBtb3NyZWcgbXNrIG11cm1hbnNrIG5hbGNoaWsgbmV0IG5ub3Ygbm92IG5vdm9zaWJpcnNrIG5zayBvbXNrIG9yZW5idXJnIG9yZyBvcnlvbCBwZW56YSBwZXJtIHBwIHBza292IHB0eiBybmQgcnlhemFuIHNha2hhbGluIHNhbWFyYSBzYXJhdG92IHNpbWJpcnNrIHNtb2xlbnNrIHNwYiBzdGF2cm9wb2wgc3R2IHN1cmd1dCB0YW1ib3YgdGF0YXJzdGFuIHRvbSB0b21zayB0c2FyaXRzeW4gdHNrIHR1bGEgdHV2YSB0dmVyIHR5dW1lbiB1ZG0gdWRtdXJ0aWEgdWxhbi11ZGUgdmxhZGlrYXZrYXogdmxhZGltaXIgdmxhZGl2b3N0b2sgdm9sZ29ncmFkIHZvbG9nZGEgdm9yb25lemggdnJuIHZ5YXRrYSB5YWt1dGlhIHlhbWFsIHlla2F0ZXJpbmJ1cmcgeXV6aG5vLXNha2hhbGluc2sgJywKICAgICAgJ3J3JzonIGFjIGNvIGNvbSBlZHUgZ291diBnb3YgaW50IG1pbCBuZXQgJywKICAgICAgJ3NhJzonIGNvbSBlZHUgZ292IG1lZCBuZXQgb3JnIHB1YiBzY2ggJywKICAgICAgJ3NkJzonIGNvbSBlZHUgZ292IGluZm8gbWVkIG5ldCBvcmcgdHYgJywKICAgICAgJ3NlJzonIGEgYWMgYiBiZCBjIGQgZSBmIGcgaCBpIGsgbCBtIG4gbyBvcmcgcCBwYXJ0aSBwcCBwcmVzcyByIHMgdCB0bSB1IHcgeCB5IHogJywKICAgICAgJ3NnJzonIGNvbSBlZHUgZ292IGlkbiBuZXQgb3JnIHBlciAnLAogICAgICAnc24nOicgYXJ0IGNvbSBlZHUgZ291diBvcmcgcGVyc28gdW5pdiAnLAogICAgICAnc3knOicgY29tIGVkdSBnb3YgbWlsIG5ldCBuZXdzIG9yZyAnLAogICAgICAndGgnOicgYWMgY28gZ28gaW4gbWkgbmV0IG9yICcsCiAgICAgICd0aic6JyBhYyBiaXogY28gY29tIGVkdSBnbyBnb3YgaW5mbyBpbnQgbWlsIG5hbWUgbmV0IG5pYyBvcmcgdGVzdCB3ZWIgJywKICAgICAgJ3RuJzonIGFncmluZXQgY29tIGRlZmVuc2UgZWR1bmV0IGVucyBmaW4gZ292IGluZCBpbmZvIGludGwgbWluY29tIG5hdCBuZXQgb3JnIHBlcnNvIHJucnQgcm5zIHJudSB0b3VyaXNtICcsCiAgICAgICd0eic6JyBhYyBjbyBnbyBuZSBvciAnLAogICAgICAndWEnOicgYml6IGNoZXJrYXNzeSBjaGVybmlnb3YgY2hlcm5vdnRzeSBjayBjbiBjbyBjb20gY3JpbWVhIGN2IGRuIGRuZXByb3BldHJvdnNrIGRvbmV0c2sgZHAgZWR1IGdvdiBpZiBpbiBpdmFuby1mcmFua2l2c2sga2gga2hhcmtvdiBraGVyc29uIGtobWVsbml0c2tpeSBraWV2IGtpcm92b2dyYWQga20ga3Iga3Mga3YgbGcgbHVnYW5zayBsdXRzayBsdml2IG1lIG1rIG5ldCBuaWtvbGFldiBvZCBvZGVzc2Egb3JnIHBsIHBvbHRhdmEgcHAgcm92bm8gcnYgc2ViYXN0b3BvbCBzdW15IHRlIHRlcm5vcGlsIHV6aGdvcm9kIHZpbm5pY2Egdm4gemFwb3Jpemh6aGUgemhpdG9taXIgenAgenQgJywKICAgICAgJ3VnJzonIGFjIGNvIGdvIG5lIG9yIG9yZyBzYyAnLAogICAgICAndWsnOicgYWMgYmwgYnJpdGlzaC1saWJyYXJ5IGNvIGN5bSBnb3YgZ292dCBpY25ldCBqZXQgbGVhIGx0ZCBtZSBtaWwgbW9kIG5hdGlvbmFsLWxpYnJhcnktc2NvdGxhbmQgbmVsIG5ldCBuaHMgbmljIG5scyBvcmcgb3JnbiBwYXJsaWFtZW50IHBsYyBwb2xpY2Ugc2NoIHNjb3Qgc29jICcsCiAgICAgICd1cyc6JyBkbmkgZmVkIGlzYSBraWRzIG5zbiAnLAogICAgICAndXknOicgY29tIGVkdSBndWIgbWlsIG5ldCBvcmcgJywKICAgICAgJ3ZlJzonIGNvIGNvbSBlZHUgZ29iIGluZm8gbWlsIG5ldCBvcmcgd2ViICcsCiAgICAgICd2aSc6JyBjbyBjb20gazEyIG5ldCBvcmcgJywKICAgICAgJ3ZuJzonIGFjIGJpeiBjb20gZWR1IGdvdiBoZWFsdGggaW5mbyBpbnQgbmFtZSBuZXQgb3JnIHBybyAnLAogICAgICAneWUnOicgY28gY29tIGdvdiBsdGQgbWUgbmV0IG9yZyBwbGMgJywKICAgICAgJ3l1JzonIGFjIGNvIGVkdSBnb3Ygb3JnICcsCiAgICAgICd6YSc6JyBhYyBhZ3JpYyBhbHQgYm91cnNlIGNpdHkgY28gY3liZXJuZXQgZGIgZWR1IGdvdiBncm9uZGFyIGlhY2Nlc3MgaW10IGluY2EgbGFuZGVzaWduIGxhdyBtaWwgbmV0IG5nbyBuaXMgbm9tIG9saXZldHRpIG9yZyBwaXggc2Nob29sIHRtIHdlYiAnLAogICAgICAnem0nOicgYWMgY28gY29tIGVkdSBnb3YgbmV0IG9yZyBzY2ggJwogICAgfSwKICAgIC8vIGdvcmhpbGwgMjAxMy0xMC0yNTogVXNpbmcgaW5kZXhPZigpIGluc3RlYWQgUmVnZXhwKCkuIFNpZ25pZmljYW50IGJvb3N0CiAgICAvLyBpbiBib3RoIHBlcmZvcm1hbmNlIGFuZCBtZW1vcnkgZm9vdHByaW50LiBObyBpbml0aWFsaXphdGlvbiByZXF1aXJlZC4KICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3VyaS1qcy1zbGQtcmVnZXgtdnMtYmluYXJ5LXNlYXJjaC80CiAgICAvLyBGb2xsb3dpbmcgbWV0aG9kcyB1c2UgbGFzdEluZGV4T2YoKSByYXRoZXIgdGhhbiBhcnJheS5zcGxpdCgpIGluIG9yZGVyCiAgICAvLyB0byBhdm9pZCBhbnkgbWVtb3J5IGFsbG9jYXRpb25zLgogICAgaGFzOiBmdW5jdGlvbihkb21haW4pIHsKICAgICAgdmFyIHRsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicpOwogICAgICBpZiAodGxkT2Zmc2V0IDw9IDAgfHwgdGxkT2Zmc2V0ID49IChkb21haW4ubGVuZ3RoLTEpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7CiAgICAgIGlmIChzbGRPZmZzZXQgPD0gMCB8fCBzbGRPZmZzZXQgPj0gKHRsZE9mZnNldC0xKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgc2xkTGlzdCA9IFNMRC5saXN0W2RvbWFpbi5zbGljZSh0bGRPZmZzZXQrMSldOwogICAgICBpZiAoIXNsZExpc3QpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHNsZExpc3QuaW5kZXhPZignICcgKyBkb21haW4uc2xpY2Uoc2xkT2Zmc2V0KzEsIHRsZE9mZnNldCkgKyAnICcpID49IDA7CiAgICB9LAogICAgaXM6IGZ1bmN0aW9uKGRvbWFpbikgewogICAgICB2YXIgdGxkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIGlmICh0bGRPZmZzZXQgPD0gMCB8fCB0bGRPZmZzZXQgPj0gKGRvbWFpbi5sZW5ndGgtMSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIHNsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicsIHRsZE9mZnNldC0xKTsKICAgICAgaWYgKHNsZE9mZnNldCA+PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07CiAgICAgIGlmICghc2xkTGlzdCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gc2xkTGlzdC5pbmRleE9mKCcgJyArIGRvbWFpbi5zbGljZSgwLCB0bGRPZmZzZXQpICsgJyAnKSA+PSAwOwogICAgfSwKICAgIGdldDogZnVuY3Rpb24oZG9tYWluKSB7CiAgICAgIHZhciB0bGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nKTsKICAgICAgaWYgKHRsZE9mZnNldCA8PSAwIHx8IHRsZE9mZnNldCA+PSAoZG9tYWluLmxlbmd0aC0xKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7CiAgICAgIGlmIChzbGRPZmZzZXQgPD0gMCB8fCBzbGRPZmZzZXQgPj0gKHRsZE9mZnNldC0xKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07CiAgICAgIGlmICghc2xkTGlzdCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGlmIChzbGRMaXN0LmluZGV4T2YoJyAnICsgZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxLCB0bGRPZmZzZXQpICsgJyAnKSA8IDApIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxKTsKICAgIH0sCiAgICBub0NvbmZsaWN0OiBmdW5jdGlvbigpewogICAgICBpZiAocm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPT09IHRoaXMpIHsKICAgICAgICByb290LlNlY29uZExldmVsRG9tYWlucyA9IF9TZWNvbmRMZXZlbERvbWFpbnM7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKCiAgcmV0dXJuIFNMRDsKfSkpOwoKfSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qIQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzCiAqCiAqIFZlcnNpb246IDEuMTguMQogKgogKiBBdXRob3I6IFJvZG5leSBSZWhtCiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuaW8vVVJJLmpzLwogKgogKiBMaWNlbnNlZCB1bmRlcgogKiAgIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UKICoKICovCihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICd1c2Ugc3RyaWN0JzsKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanMKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAvLyBOb2RlCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnLi9wdW55Y29kZScpLCByZXF1aXJlKCcuL0lQdjYnKSwgcmVxdWlyZSgnLi9TZWNvbmRMZXZlbERvbWFpbnMnKSk7CiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS4KICAgIGRlZmluZShbJy4vcHVueWNvZGUnLCAnLi9JUHY2JywgJy4vU2Vjb25kTGV2ZWxEb21haW5zJ10sIGZhY3RvcnkpOwogIH0gZWxzZSB7CiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQogICAgcm9vdC5VUkkgPSBmYWN0b3J5KHJvb3QucHVueWNvZGUsIHJvb3QuSVB2Niwgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMsIHJvb3QpOwogIH0KfSh0aGlzLCBmdW5jdGlvbiAocHVueWNvZGUsIElQdjYsIFNMRCwgcm9vdCkgewogICd1c2Ugc3RyaWN0JzsKICAvKmdsb2JhbCBsb2NhdGlvbiwgZXNjYXBlLCB1bmVzY2FwZSAqLwogIC8vIEZJWE1FOiB2Mi4wLjAgcmVuYW1jZSBub24tY2FtZWxDYXNlIHByb3BlcnRpZXMgdG8gdXBwZXJjYXNlCiAgLypqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqLwoKICAvLyBzYXZlIGN1cnJlbnQgVVJJIHZhcmlhYmxlLCBpZiBhbnkKICB2YXIgX1VSSSA9IHJvb3QgJiYgcm9vdC5VUkk7CgogIGZ1bmN0aW9uIFVSSSh1cmwsIGJhc2UpIHsKICAgIHZhciBfdXJsU3VwcGxpZWQgPSBhcmd1bWVudHMubGVuZ3RoID49IDE7CiAgICB2YXIgX2Jhc2VTdXBwbGllZCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMjsKCiAgICAvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmQKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBVUkkpKSB7CiAgICAgIGlmIChfdXJsU3VwcGxpZWQpIHsKICAgICAgICBpZiAoX2Jhc2VTdXBwbGllZCkgewogICAgICAgICAgcmV0dXJuIG5ldyBVUkkodXJsLCBiYXNlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgVVJJKHVybCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVVJJKCk7CiAgICB9CgogICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmIChfdXJsU3VwcGxpZWQpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bmRlZmluZWQgaXMgbm90IGEgdmFsaWQgYXJndW1lbnQgZm9yIFVSSScpOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYgKyAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB1cmwgPSAnJzsKICAgICAgfQogICAgfQoKICAgIHRoaXMuaHJlZih1cmwpOwoKICAgIC8vIHJlc29sdmUgdG8gYmFzZSBhY2NvcmRpbmcgdG8gaHR0cDovL2R2Y3MudzMub3JnL2hnL3VybC9yYXctZmlsZS90aXAvT3ZlcnZpZXcuaHRtbCNjb25zdHJ1Y3RvcgogICAgaWYgKGJhc2UgIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy5hYnNvbHV0ZVRvKGJhc2UpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgVVJJLnZlcnNpb24gPSAnMS4xOC4xJzsKCiAgdmFyIHAgPSBVUkkucHJvdG90eXBlOwogIHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKICBmdW5jdGlvbiBlc2NhcGVSZWdFeChzdHJpbmcpIHsKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2NvbW1pdC84NWFjMjE3ODNjMTFmOGNjYWIwNjEwNmRiYTk3MzVhMzFhODY5MjRkI2NvbW1pdGNvbW1lbnQtODIxOTYzCiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXF1cL1xcXSkvZywgJ1xcJDEnKTsKICB9CgogIGZ1bmN0aW9uIGdldFR5cGUodmFsdWUpIHsKICAgIC8vIElFOCBkb2Vzbid0IHJldHVybiBbT2JqZWN0IFVuZGVmaW5lZF0gYnV0IFtPYmplY3QgT2JqZWN0XSBmb3IgdW5kZWZpbmVkIHZhbHVlCiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gJ1VuZGVmaW5lZCc7CiAgICB9CgogICAgcmV0dXJuIFN0cmluZyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpKS5zbGljZSg4LCAtMSk7CiAgfQoKICBmdW5jdGlvbiBpc0FycmF5KG9iaikgewogICAgcmV0dXJuIGdldFR5cGUob2JqKSA9PT0gJ0FycmF5JzsKICB9CgogIGZ1bmN0aW9uIGZpbHRlckFycmF5VmFsdWVzKGRhdGEsIHZhbHVlKSB7CiAgICB2YXIgbG9va3VwID0ge307CiAgICB2YXIgaSwgbGVuZ3RoOwoKICAgIGlmIChnZXRUeXBlKHZhbHVlKSA9PT0gJ1JlZ0V4cCcpIHsKICAgICAgbG9va3VwID0gbnVsbDsKICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBsb29rdXBbdmFsdWVbaV1dID0gdHJ1ZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbG9va3VwW3ZhbHVlXSA9IHRydWU7CiAgICB9CgogICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZGF0YS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAvKmpzaGludCBsYXhicmVhazogdHJ1ZSAqLwogICAgICB2YXIgX21hdGNoID0gbG9va3VwICYmIGxvb2t1cFtkYXRhW2ldXSAhPT0gdW5kZWZpbmVkCiAgICAgICAgfHwgIWxvb2t1cCAmJiB2YWx1ZS50ZXN0KGRhdGFbaV0pOwogICAgICAvKmpzaGludCBsYXhicmVhazogZmFsc2UgKi8KICAgICAgaWYgKF9tYXRjaCkgewogICAgICAgIGRhdGEuc3BsaWNlKGksIDEpOwogICAgICAgIGxlbmd0aC0tOwogICAgICAgIGktLTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBkYXRhOwogIH0KCiAgZnVuY3Rpb24gYXJyYXlDb250YWlucyhsaXN0LCB2YWx1ZSkgewogICAgdmFyIGksIGxlbmd0aDsKCiAgICAvLyB2YWx1ZSBtYXkgYmUgc3RyaW5nLCBudW1iZXIsIGFycmF5LCByZWdleHAKICAgIGlmIChpc0FycmF5KHZhbHVlKSkgewogICAgICAvLyBOb3RlOiB0aGlzIGNhbiBiZSBvcHRpbWl6ZWQgdG8gTyhuKSAoaW5zdGVhZCBvZiBjdXJyZW50IE8obSAqIG4pKQogICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIGlmICghYXJyYXlDb250YWlucyhsaXN0LCB2YWx1ZVtpXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHZhciBfdHlwZSA9IGdldFR5cGUodmFsdWUpOwogICAgZm9yIChpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoX3R5cGUgPT09ICdSZWdFeHAnKSB7CiAgICAgICAgaWYgKHR5cGVvZiBsaXN0W2ldID09PSAnc3RyaW5nJyAmJiBsaXN0W2ldLm1hdGNoKHZhbHVlKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGxpc3RbaV0gPT09IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBhcnJheXNFcXVhbChvbmUsIHR3bykgewogICAgaWYgKCFpc0FycmF5KG9uZSkgfHwgIWlzQXJyYXkodHdvKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gYXJyYXlzIGNhbid0IGJlIGVxdWFsIGlmIHRoZXkgaGF2ZSBkaWZmZXJlbnQgYW1vdW50IG9mIGNvbnRlbnQKICAgIGlmIChvbmUubGVuZ3RoICE9PSB0d28ubGVuZ3RoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBvbmUuc29ydCgpOwogICAgdHdvLnNvcnQoKTsKCiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9uZS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgaWYgKG9uZVtpXSAhPT0gdHdvW2ldKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmltU2xhc2hlcyh0ZXh0KSB7CiAgICB2YXIgdHJpbV9leHByZXNzaW9uID0gL15cLyt8XC8rJC9nOwogICAgcmV0dXJuIHRleHQucmVwbGFjZSh0cmltX2V4cHJlc3Npb24sICcnKTsKICB9CgogIFVSSS5fcGFydHMgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHByb3RvY29sOiBudWxsLAogICAgICB1c2VybmFtZTogbnVsbCwKICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgIGhvc3RuYW1lOiBudWxsLAogICAgICB1cm46IG51bGwsCiAgICAgIHBvcnQ6IG51bGwsCiAgICAgIHBhdGg6IG51bGwsCiAgICAgIHF1ZXJ5OiBudWxsLAogICAgICBmcmFnbWVudDogbnVsbCwKICAgICAgLy8gc3RhdGUKICAgICAgZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzOiBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLAogICAgICBlc2NhcGVRdWVyeVNwYWNlOiBVUkkuZXNjYXBlUXVlcnlTcGFjZQogICAgfTsKICB9OwogIC8vIHN0YXRlOiBhbGxvdyBkdXBsaWNhdGUgcXVlcnkgcGFyYW1ldGVycyAoYT0xJmE9MSkKICBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzID0gZmFsc2U7CiAgLy8gc3RhdGU6IHJlcGxhY2VzICsgd2l0aCAlMjAgKHNwYWNlIGluIHF1ZXJ5IHN0cmluZ3MpCiAgVVJJLmVzY2FwZVF1ZXJ5U3BhY2UgPSB0cnVlOwogIC8vIHN0YXRpYyBwcm9wZXJ0aWVzCiAgVVJJLnByb3RvY29sX2V4cHJlc3Npb24gPSAvXlthLXpdW2EtejAtOS4rLV0qJC9pOwogIFVSSS5pZG5fZXhwcmVzc2lvbiA9IC9bXmEtejAtOVwuLV0vaTsKICBVUkkucHVueWNvZGVfZXhwcmVzc2lvbiA9IC8oeG4tLSkvaTsKICAvLyB3ZWxsLCAzMzMuNDQ0LjU1NS42NjYgbWF0Y2hlcywgYnV0IGl0IHN1cmUgYWluJ3Qgbm8gSVB2NCAtIGRvIHdlIGNhcmU/CiAgVVJJLmlwNF9leHByZXNzaW9uID0gL15cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9JC87CiAgLy8gY3JlZGl0cyB0byBSaWNoIEJyb3duCiAgLy8gc291cmNlOiBodHRwOi8vZm9ydW1zLmludGVybWFwcGVyLmNvbS92aWV3dG9waWMucGhwP3A9MTA5NiMxMDk2CiAgLy8gc3BlY2lmaWNhdGlvbjogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjNDI5MS50eHQKICBVUkkuaXA2X2V4cHJlc3Npb24gPSAvXlxzKigoKFswLTlBLUZhLWZdezEsNH06KXs3fShbMC05QS1GYS1mXXsxLDR9fDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs2fSg6WzAtOUEtRmEtZl17MSw0fXwoKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezV9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsMn0pfDooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezR9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsM30pfCgoOlswLTlBLUZhLWZdezEsNH0pPzooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXszfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDR9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDJ9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezJ9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNX0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsM306KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7MX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw2fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw0fTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoOigoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDd9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDV9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpKSglLispP1xzKiQvOwogIC8vIGV4cHJlc3Npb24gdXNlZCBpcyAiZ3J1YmVyIHJldmlzZWQiIChAZ3J1YmVyIHYyKSBkZXRlcm1pbmVkIHRvIGJlIHRoZQogIC8vIGJlc3Qgc29sdXRpb24gaW4gYSByZWdleC1nb2xmIHdlIGRpZCBhIGNvdXBsZSBvZiBhZ2VzIGFnbyBhdAogIC8vICogaHR0cDovL21hdGhpYXNieW5lbnMuYmUvZGVtby91cmwtcmVnZXgKICAvLyAqIGh0dHA6Ly9yb2RuZXlyZWhtLmRlL3QvdXJsLXJlZ2V4Lmh0bWwKICBVUkkuZmluZF91cmlfZXhwcmVzc2lvbiA9IC9cYigoPzpbYS16XVtcdy1dKzooPzpcL3sxLDN9fFthLXowLTklXSl8d3d3XGR7MCwzfVsuXXxbYS16MC05LlwtXStbLl1bYS16XXsyLDR9XC8pKD86W15ccygpPD5dK3xcKChbXlxzKCk8Pl0rfChcKFteXHMoKTw+XStcKSkpKlwpKSsoPzpcKChbXlxzKCk8Pl0rfChcKFteXHMoKTw+XStcKSkpKlwpfFteXHNgISgpXFtcXXt9OzonIi4sPD4/wqvCu+KAnOKAneKAmOKAmV0pKS9pZzsKICBVUkkuZmluZFVyaSA9IHsKICAgIC8vIHZhbGlkICJzY2hlbWU6Ly8iIG9yICJ3d3cuIgogICAgc3RhcnQ6IC9cYig/OihbYS16XVthLXowLTkuKy1dKjpcL1wvKXx3d3dcLikvZ2ksCiAgICAvLyBldmVyeXRoaW5nIHVwIHRvIHRoZSBuZXh0IHdoaXRlc3BhY2UKICAgIGVuZDogL1tcc1xyXG5dfCQvLAogICAgLy8gdHJpbSB0cmFpbGluZyBwdW5jdHVhdGlvbiBjYXB0dXJlZCBieSBlbmQgUmVnRXhwCiAgICB0cmltOiAvW2AhKClcW1xde307OiciLiw8Pj/Cq8K74oCc4oCd4oCe4oCY4oCZXSskLwogIH07CiAgLy8gaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy91cmktc2NoZW1lcy5odG1sCiAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX1RDUF9hbmRfVURQX3BvcnRfbnVtYmVycyNXZWxsLWtub3duX3BvcnRzCiAgVVJJLmRlZmF1bHRQb3J0cyA9IHsKICAgIGh0dHA6ICc4MCcsCiAgICBodHRwczogJzQ0MycsCiAgICBmdHA6ICcyMScsCiAgICBnb3BoZXI6ICc3MCcsCiAgICB3czogJzgwJywKICAgIHdzczogJzQ0MycKICB9OwogIC8vIGFsbG93ZWQgaG9zdG5hbWUgY2hhcmFjdGVycyBhY2NvcmRpbmcgdG8gUkZDIDM5ODYKICAvLyBBTFBIQSBESUdJVCAiLSIgIi4iICJfIiAifiIgIiEiICIkIiAiJiIgIiciICIoIiAiKSIgIioiICIrIiAiLCIgIjsiICI9IiAlZW5jb2RlZAogIC8vIEkndmUgbmV2ZXIgc2VlbiBhIChub24tSUROKSBob3N0bmFtZSBvdGhlciB0aGFuOiBBTFBIQSBESUdJVCAuIC0KICBVUkkuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzID0gL1teYS16QS1aMC05XC4tXS87CiAgLy8gbWFwIERPTSBFbGVtZW50cyB0byB0aGVpciBVUkkgYXR0cmlidXRlCiAgVVJJLmRvbUF0dHJpYnV0ZXMgPSB7CiAgICAnYSc6ICdocmVmJywKICAgICdibG9ja3F1b3RlJzogJ2NpdGUnLAogICAgJ2xpbmsnOiAnaHJlZicsCiAgICAnYmFzZSc6ICdocmVmJywKICAgICdzY3JpcHQnOiAnc3JjJywKICAgICdmb3JtJzogJ2FjdGlvbicsCiAgICAnaW1nJzogJ3NyYycsCiAgICAnYXJlYSc6ICdocmVmJywKICAgICdpZnJhbWUnOiAnc3JjJywKICAgICdlbWJlZCc6ICdzcmMnLAogICAgJ3NvdXJjZSc6ICdzcmMnLAogICAgJ3RyYWNrJzogJ3NyYycsCiAgICAnaW5wdXQnOiAnc3JjJywgLy8gYnV0IG9ubHkgaWYgdHlwZT0iaW1hZ2UiCiAgICAnYXVkaW8nOiAnc3JjJywKICAgICd2aWRlbyc6ICdzcmMnCiAgfTsKICBVUkkuZ2V0RG9tQXR0cmlidXRlID0gZnVuY3Rpb24obm9kZSkgewogICAgaWYgKCFub2RlIHx8ICFub2RlLm5vZGVOYW1lKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgdmFyIG5vZGVOYW1lID0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgLy8gPGlucHV0PiBzaG91bGQgb25seSBleHBvc2Ugc3JjIGZvciB0eXBlPSJpbWFnZSIKICAgIGlmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBub2RlLnR5cGUgIT09ICdpbWFnZScpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gVVJJLmRvbUF0dHJpYnV0ZXNbbm9kZU5hbWVdOwogIH07CgogIGZ1bmN0aW9uIGVzY2FwZUZvckR1bWJGaXJlZm94MzYodmFsdWUpIHsKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MQogICAgcmV0dXJuIGVzY2FwZSh2YWx1ZSk7CiAgfQoKICAvLyBlbmNvZGluZyAvIGRlY29kaW5nIGFjY29yZGluZyB0byBSRkMzOTg2CiAgZnVuY3Rpb24gc3RyaWN0RW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykgewogICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvZW5jb2RlVVJJQ29tcG9uZW50CiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykKICAgICAgLnJlcGxhY2UoL1shJygpKl0vZywgZXNjYXBlRm9yRHVtYkZpcmVmb3gzNikKICAgICAgLnJlcGxhY2UoL1wqL2csICclMkEnKTsKICB9CiAgVVJJLmVuY29kZSA9IHN0cmljdEVuY29kZVVSSUNvbXBvbmVudDsKICBVUkkuZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50OwogIFVSSS5pc284ODU5ID0gZnVuY3Rpb24oKSB7CiAgICBVUkkuZW5jb2RlID0gZXNjYXBlOwogICAgVVJJLmRlY29kZSA9IHVuZXNjYXBlOwogIH07CiAgVVJJLnVuaWNvZGUgPSBmdW5jdGlvbigpIHsKICAgIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7CiAgICBVUkkuZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50OwogIH07CiAgVVJJLmNoYXJhY3RlcnMgPSB7CiAgICBwYXRobmFtZTogewogICAgICBlbmNvZGU6IHsKICAgICAgICAvLyBSRkMzOTg2IDIuMTogRm9yIGNvbnNpc3RlbmN5LCBVUkkgcHJvZHVjZXJzIGFuZCBub3JtYWxpemVycyBzaG91bGQKICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLgogICAgICAgIGV4cHJlc3Npb246IC8lKDI0fDI2fDJCfDJDfDNCfDNEfDNBfDQwKS9pZywKICAgICAgICBtYXA6IHsKICAgICAgICAgIC8vIC0uX34hJygpKgogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjYnOiAnJicsCiAgICAgICAgICAnJTJCJzogJysnLAogICAgICAgICAgJyUyQyc6ICcsJywKICAgICAgICAgICclM0InOiAnOycsCiAgICAgICAgICAnJTNEJzogJz0nLAogICAgICAgICAgJyUzQSc6ICc6JywKICAgICAgICAgICclNDAnOiAnQCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlY29kZTogewogICAgICAgIGV4cHJlc3Npb246IC9bXC9cPyNdL2csCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnLyc6ICclMkYnLAogICAgICAgICAgJz8nOiAnJTNGJywKICAgICAgICAgICcjJzogJyUyMycKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZXNlcnZlZDogewogICAgICBlbmNvZGU6IHsKICAgICAgICAvLyBSRkMzOTg2IDIuMTogRm9yIGNvbnNpc3RlbmN5LCBVUkkgcHJvZHVjZXJzIGFuZCBub3JtYWxpemVycyBzaG91bGQKICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLgogICAgICAgIGV4cHJlc3Npb246IC8lKDIxfDIzfDI0fDI2fDI3fDI4fDI5fDJBfDJCfDJDfDJGfDNBfDNCfDNEfDNGfDQwfDVCfDVEKS9pZywKICAgICAgICBtYXA6IHsKICAgICAgICAgIC8vIGdlbi1kZWxpbXMKICAgICAgICAgICclM0EnOiAnOicsCiAgICAgICAgICAnJTJGJzogJy8nLAogICAgICAgICAgJyUzRic6ICc/JywKICAgICAgICAgICclMjMnOiAnIycsCiAgICAgICAgICAnJTVCJzogJ1snLAogICAgICAgICAgJyU1RCc6ICddJywKICAgICAgICAgICclNDAnOiAnQCcsCiAgICAgICAgICAvLyBzdWItZGVsaW1zCiAgICAgICAgICAnJTIxJzogJyEnLAogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjYnOiAnJicsCiAgICAgICAgICAnJTI3JzogJ1wnJywKICAgICAgICAgICclMjgnOiAnKCcsCiAgICAgICAgICAnJTI5JzogJyknLAogICAgICAgICAgJyUyQSc6ICcqJywKICAgICAgICAgICclMkInOiAnKycsCiAgICAgICAgICAnJTJDJzogJywnLAogICAgICAgICAgJyUzQic6ICc7JywKICAgICAgICAgICclM0QnOiAnPScKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB1cm5wYXRoOiB7CiAgICAgIC8vIFRoZSBjaGFyYWN0ZXJzIHVuZGVyIGBlbmNvZGVgIGFyZSB0aGUgY2hhcmFjdGVycyBjYWxsZWQgb3V0IGJ5IFJGQyAyMTQxIGFzIGJlaW5nIGFjY2VwdGFibGUKICAgICAgLy8gZm9yIHVzYWdlIGluIGEgVVJOLiBSRkMyMTQxIGFsc28gY2FsbHMgb3V0ICItIiwgIi4iLCBhbmQgIl8iIGFzIGFjY2VwdGFibGUgY2hhcmFjdGVycywgYnV0CiAgICAgIC8vIHRoZXNlIGFyZW4ndCBlbmNvZGVkIGJ5IGVuY29kZVVSSUNvbXBvbmVudCwgc28gd2UgZG9uJ3QgaGF2ZSB0byBjYWxsIHRoZW0gb3V0IGhlcmUuIEFsc28KICAgICAgLy8gbm90ZSB0aGF0IHRoZSBjb2xvbiBjaGFyYWN0ZXIgaXMgbm90IGZlYXR1cmVkIGluIHRoZSBlbmNvZGluZyBtYXA7IHRoaXMgaXMgYmVjYXVzZSBVUkkuanMKICAgICAgLy8gZ2l2ZXMgdGhlIGNvbG9ucyBpbiBVUk5zIHNlbWFudGljIG1lYW5pbmcgYXMgdGhlIGRlbGltaXRlcnMgb2YgcGF0aCBzZWdlbWVudHMsIGFuZCBzbyBpdAogICAgICAvLyBzaG91bGQgbm90IGFwcGVhciB1bmVuY29kZWQgaW4gYSBzZWdtZW50IGl0c2VsZi4KICAgICAgLy8gU2VlIGFsc28gdGhlIG5vdGUgYWJvdmUgYWJvdXQgUkZDMzk4NiBhbmQgY2FwaXRhbGFsaXplZCBoZXggZGlnaXRzLgogICAgICBlbmNvZGU6IHsKICAgICAgICBleHByZXNzaW9uOiAvJSgyMXwyNHwyN3wyOHwyOXwyQXwyQnwyQ3wzQnwzRHw0MCkvaWcsCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnJTIxJzogJyEnLAogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjcnOiAnXCcnLAogICAgICAgICAgJyUyOCc6ICcoJywKICAgICAgICAgICclMjknOiAnKScsCiAgICAgICAgICAnJTJBJzogJyonLAogICAgICAgICAgJyUyQic6ICcrJywKICAgICAgICAgICclMkMnOiAnLCcsCiAgICAgICAgICAnJTNCJzogJzsnLAogICAgICAgICAgJyUzRCc6ICc9JywKICAgICAgICAgICclNDAnOiAnQCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIFRoZXNlIGNoYXJhY3RlcnMgYXJlIHRoZSBjaGFyYWN0ZXJzIGNhbGxlZCBvdXQgYnkgUkZDMjE0MSBhcyAicmVzZXJ2ZWQiIGNoYXJhY3RlcnMgdGhhdAogICAgICAvLyBzaG91bGQgbmV2ZXIgYXBwZWFyIGluIGEgVVJOLCBwbHVzIHRoZSBjb2xvbiBjaGFyYWN0ZXIgKHNlZSBub3RlIGFib3ZlKS4KICAgICAgZGVjb2RlOiB7CiAgICAgICAgZXhwcmVzc2lvbjogL1tcL1w/IzpdL2csCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnLyc6ICclMkYnLAogICAgICAgICAgJz8nOiAnJTNGJywKICAgICAgICAgICcjJzogJyUyMycsCiAgICAgICAgICAnOic6ICclM0EnCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICBVUkkuZW5jb2RlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHsKICAgIHZhciBlc2NhcGVkID0gVVJJLmVuY29kZShzdHJpbmcgKyAnJyk7CiAgICBpZiAoZXNjYXBlUXVlcnlTcGFjZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTsKICAgIH0KCiAgICByZXR1cm4gZXNjYXBlUXVlcnlTcGFjZSA/IGVzY2FwZWQucmVwbGFjZSgvJTIwL2csICcrJykgOiBlc2NhcGVkOwogIH07CiAgVVJJLmRlY29kZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7CiAgICBzdHJpbmcgKz0gJyc7CiAgICBpZiAoZXNjYXBlUXVlcnlTcGFjZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTsKICAgIH0KCiAgICB0cnkgewogICAgICByZXR1cm4gVVJJLmRlY29kZShlc2NhcGVRdWVyeVNwYWNlID8gc3RyaW5nLnJlcGxhY2UoL1wrL2csICclMjAnKSA6IHN0cmluZyk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgLy8gd2UncmUgbm90IGdvaW5nIHRvIG1lc3Mgd2l0aCB3ZWlyZCBlbmNvZGluZ3MsCiAgICAgIC8vIGdpdmUgdXAgYW5kIHJldHVybiB0aGUgdW5kZWNvZGVkIG9yaWdpbmFsIHN0cmluZwogICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzg3CiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvOTIKICAgICAgcmV0dXJuIHN0cmluZzsKICAgIH0KICB9OwogIC8vIGdlbmVyYXRlIGVuY29kZS9kZWNvZGUgcGF0aCBmdW5jdGlvbnMKICB2YXIgX3BhcnRzID0geydlbmNvZGUnOidlbmNvZGUnLCAnZGVjb2RlJzonZGVjb2RlJ307CiAgdmFyIF9wYXJ0OwogIHZhciBnZW5lcmF0ZUFjY2Vzc29yID0gZnVuY3Rpb24oX2dyb3VwLCBfcGFydCkgewogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBVUklbX3BhcnRdKHN0cmluZyArICcnKS5yZXBsYWNlKFVSSS5jaGFyYWN0ZXJzW19ncm91cF1bX3BhcnRdLmV4cHJlc3Npb24sIGZ1bmN0aW9uKGMpIHsKICAgICAgICAgIHJldHVybiBVUkkuY2hhcmFjdGVyc1tfZ3JvdXBdW19wYXJ0XS5tYXBbY107CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyB3ZSdyZSBub3QgZ29pbmcgdG8gbWVzcyB3aXRoIHdlaXJkIGVuY29kaW5ncywKICAgICAgICAvLyBnaXZlIHVwIGFuZCByZXR1cm4gdGhlIHVuZGVjb2RlZCBvcmlnaW5hbCBzdHJpbmcKICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzg3CiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MgogICAgICAgIHJldHVybiBzdHJpbmc7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgZm9yIChfcGFydCBpbiBfcGFydHMpIHsKICAgIFVSSVtfcGFydCArICdQYXRoU2VnbWVudCddID0gZ2VuZXJhdGVBY2Nlc3NvcigncGF0aG5hbWUnLCBfcGFydHNbX3BhcnRdKTsKICAgIFVSSVtfcGFydCArICdVcm5QYXRoU2VnbWVudCddID0gZ2VuZXJhdGVBY2Nlc3NvcigndXJucGF0aCcsIF9wYXJ0c1tfcGFydF0pOwogIH0KCiAgdmFyIGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uID0gZnVuY3Rpb24oX3NlcCwgX2NvZGluZ0Z1bmNOYW1lLCBfaW5uZXJDb2RpbmdGdW5jTmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykgewogICAgICAvLyBXaHkgcGFzcyBpbiBuYW1lcyBvZiBmdW5jdGlvbnMsIHJhdGhlciB0aGFuIHRoZSBmdW5jdGlvbiBvYmplY3RzIHRoZW1zZWx2ZXM/IFRoZQogICAgICAvLyBkZWZpbml0aW9ucyBvZiBzb21lIGZ1bmN0aW9ucyAoYnV0IGluIHBhcnRpY3VsYXIsIFVSSS5kZWNvZGUpIHdpbGwgb2NjYXNpb25hbGx5IGNoYW5nZSBkdWUKICAgICAgLy8gdG8gVVJJLmpzIGhhdmluZyBJU084ODU5IGFuZCBVbmljb2RlIG1vZGVzLiBQYXNzaW5nIGluIHRoZSBuYW1lIGFuZCBnZXR0aW5nIGl0IHdpbGwgZW5zdXJlCiAgICAgIC8vIHRoYXQgdGhlIGZ1bmN0aW9ucyB3ZSB1c2UgaGVyZSBhcmUgImZyZXNoIi4KICAgICAgdmFyIGFjdHVhbENvZGluZ0Z1bmM7CiAgICAgIGlmICghX2lubmVyQ29kaW5nRnVuY05hbWUpIHsKICAgICAgICBhY3R1YWxDb2RpbmdGdW5jID0gVVJJW19jb2RpbmdGdW5jTmFtZV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWN0dWFsQ29kaW5nRnVuYyA9IGZ1bmN0aW9uKHN0cmluZykgewogICAgICAgICAgcmV0dXJuIFVSSVtfY29kaW5nRnVuY05hbWVdKFVSSVtfaW5uZXJDb2RpbmdGdW5jTmFtZV0oc3RyaW5nKSk7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIHNlZ21lbnRzID0gKHN0cmluZyArICcnKS5zcGxpdChfc2VwKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIHNlZ21lbnRzW2ldID0gYWN0dWFsQ29kaW5nRnVuYyhzZWdtZW50c1tpXSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKF9zZXApOwogICAgfTsKICB9OwoKICAvLyBUaGlzIHRha2VzIHBsYWNlIG91dHNpZGUgdGhlIGFib3ZlIGxvb3AgYmVjYXVzZSB3ZSBkb24ndCB3YW50LCBlLmcuLCBlbmNvZGVVcm5QYXRoIGZ1bmN0aW9ucy4KICBVUkkuZGVjb2RlUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCcvJywgJ2RlY29kZVBhdGhTZWdtZW50Jyk7CiAgVVJJLmRlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdkZWNvZGVVcm5QYXRoU2VnbWVudCcpOwogIFVSSS5yZWNvZGVQYXRoID0gZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24oJy8nLCAnZW5jb2RlUGF0aFNlZ21lbnQnLCAnZGVjb2RlJyk7CiAgVVJJLnJlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdlbmNvZGVVcm5QYXRoU2VnbWVudCcsICdkZWNvZGUnKTsKCiAgVVJJLmVuY29kZVJlc2VydmVkID0gZ2VuZXJhdGVBY2Nlc3NvcigncmVzZXJ2ZWQnLCAnZW5jb2RlJyk7CgogIFVSSS5wYXJzZSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIHZhciBwb3M7CiAgICBpZiAoIXBhcnRzKSB7CiAgICAgIHBhcnRzID0ge307CiAgICB9CiAgICAvLyBbcHJvdG9jb2wiOi8vIlt1c2VybmFtZVsiOiJwYXNzd29yZF0iQCJdaG9zdG5hbWVbIjoicG9ydF0iLyI/XVtwYXRoXVsiPyJxdWVyeXN0cmluZ11bIiMiZnJhZ21lbnRdCgogICAgLy8gZXh0cmFjdCBmcmFnbWVudAogICAgcG9zID0gc3RyaW5nLmluZGV4T2YoJyMnKTsKICAgIGlmIChwb3MgPiAtMSkgewogICAgICAvLyBlc2NhcGluZz8KICAgICAgcGFydHMuZnJhZ21lbnQgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpIHx8IG51bGw7CiAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKTsKICAgIH0KCiAgICAvLyBleHRyYWN0IHF1ZXJ5CiAgICBwb3MgPSBzdHJpbmcuaW5kZXhPZignPycpOwogICAgaWYgKHBvcyA+IC0xKSB7CiAgICAgIC8vIGVzY2FwaW5nPwogICAgICBwYXJ0cy5xdWVyeSA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSkgfHwgbnVsbDsKICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpOwogICAgfQoKICAgIC8vIGV4dHJhY3QgcHJvdG9jb2wKICAgIGlmIChzdHJpbmcuc3Vic3RyaW5nKDAsIDIpID09PSAnLy8nKSB7CiAgICAgIC8vIHJlbGF0aXZlLXNjaGVtZQogICAgICBwYXJ0cy5wcm90b2NvbCA9IG51bGw7CiAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcoMik7CiAgICAgIC8vIGV4dHJhY3QgInVzZXI6cGFzc0Bob3N0OnBvcnQiCiAgICAgIHN0cmluZyA9IFVSSS5wYXJzZUF1dGhvcml0eShzdHJpbmcsIHBhcnRzKTsKICAgIH0gZWxzZSB7CiAgICAgIHBvcyA9IHN0cmluZy5pbmRleE9mKCc6Jyk7CiAgICAgIGlmIChwb3MgPiAtMSkgewogICAgICAgIHBhcnRzLnByb3RvY29sID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpIHx8IG51bGw7CiAgICAgICAgaWYgKHBhcnRzLnByb3RvY29sICYmICFwYXJ0cy5wcm90b2NvbC5tYXRjaChVUkkucHJvdG9jb2xfZXhwcmVzc2lvbikpIHsKICAgICAgICAgIC8vIDogbWF5IGJlIHdpdGhpbiB0aGUgcGF0aAogICAgICAgICAgcGFydHMucHJvdG9jb2wgPSB1bmRlZmluZWQ7CiAgICAgICAgfSBlbHNlIGlmIChzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEsIHBvcyArIDMpID09PSAnLy8nKSB7CiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDMpOwoKICAgICAgICAgIC8vIGV4dHJhY3QgInVzZXI6cGFzc0Bob3N0OnBvcnQiCiAgICAgICAgICBzdHJpbmcgPSBVUkkucGFyc2VBdXRob3JpdHkoc3RyaW5nLCBwYXJ0cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSk7CiAgICAgICAgICBwYXJ0cy51cm4gPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIHdoYXQncyBsZWZ0IG11c3QgYmUgdGhlIHBhdGgKICAgIHBhcnRzLnBhdGggPSBzdHJpbmc7CgogICAgLy8gYW5kIHdlJ3JlIGRvbmUKICAgIHJldHVybiBwYXJ0czsKICB9OwogIFVSSS5wYXJzZUhvc3QgPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7CiAgICAvLyBDb3B5IGNocm9tZSwgSUUsIG9wZXJhIGJhY2tzbGFzaC1oYW5kbGluZyBiZWhhdmlvci4KICAgIC8vIEJhY2sgc2xhc2hlcyBiZWZvcmUgdGhlIHF1ZXJ5IHN0cmluZyBnZXQgY29udmVydGVkIHRvIGZvcndhcmQgc2xhc2hlcwogICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvYmxvYi8zODZmZDI0ZjQ5YjBlOWQxYThhMDc2NTkyYTQwNDE2OGZhZWVjYzM0L2xpYi91cmwuanMjTDExNS1MMTI0CiAgICAvLyBTZWU6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yNTkxNgogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvcHVsbC8yMzMKICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cXC9nLCAnLycpOwoKICAgIC8vIGV4dHJhY3QgaG9zdDpwb3J0CiAgICB2YXIgcG9zID0gc3RyaW5nLmluZGV4T2YoJy8nKTsKICAgIHZhciBicmFja2V0UG9zOwogICAgdmFyIHQ7CgogICAgaWYgKHBvcyA9PT0gLTEpIHsKICAgICAgcG9zID0gc3RyaW5nLmxlbmd0aDsKICAgIH0KCiAgICBpZiAoc3RyaW5nLmNoYXJBdCgwKSA9PT0gJ1snKSB7CiAgICAgIC8vIElQdjYgaG9zdCAtIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtNm1hbi10ZXh0LWFkZHItcmVwcmVzZW50YXRpb24tMDQjc2VjdGlvbi02CiAgICAgIC8vIEkgY2xhaW0gbW9zdCBjbGllbnQgc29mdHdhcmUgYnJlYWtzIG9uIElQdjYgYW55d2F5cy4gVG8gc2ltcGxpZnkgdGhpbmdzLCBVUkkgb25seSBhY2NlcHRzCiAgICAgIC8vIElQdjYrcG9ydCBpbiB0aGUgZm9ybWF0IFsyMDAxOmRiODo6MV06ODAgKGZvciB0aGUgdGltZSBiZWluZykKICAgICAgYnJhY2tldFBvcyA9IHN0cmluZy5pbmRleE9mKCddJyk7CiAgICAgIHBhcnRzLmhvc3RuYW1lID0gc3RyaW5nLnN1YnN0cmluZygxLCBicmFja2V0UG9zKSB8fCBudWxsOwogICAgICBwYXJ0cy5wb3J0ID0gc3RyaW5nLnN1YnN0cmluZyhicmFja2V0UG9zICsgMiwgcG9zKSB8fCBudWxsOwogICAgICBpZiAocGFydHMucG9ydCA9PT0gJy8nKSB7CiAgICAgICAgcGFydHMucG9ydCA9IG51bGw7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBmaXJzdENvbG9uID0gc3RyaW5nLmluZGV4T2YoJzonKTsKICAgICAgdmFyIGZpcnN0U2xhc2ggPSBzdHJpbmcuaW5kZXhPZignLycpOwogICAgICB2YXIgbmV4dENvbG9uID0gc3RyaW5nLmluZGV4T2YoJzonLCBmaXJzdENvbG9uICsgMSk7CiAgICAgIGlmIChuZXh0Q29sb24gIT09IC0xICYmIChmaXJzdFNsYXNoID09PSAtMSB8fCBuZXh0Q29sb24gPCBmaXJzdFNsYXNoKSkgewogICAgICAgIC8vIElQdjYgaG9zdCBjb250YWlucyBtdWx0aXBsZSBjb2xvbnMgLSBidXQgbm8gcG9ydAogICAgICAgIC8vIHRoaXMgbm90YXRpb24gaXMgYWN0dWFsbHkgbm90IGFsbG93ZWQgYnkgUkZDIDM5ODYsIGJ1dCB3ZSdyZSBhIGxpYmVyYWwgcGFyc2VyCiAgICAgICAgcGFydHMuaG9zdG5hbWUgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcykgfHwgbnVsbDsKICAgICAgICBwYXJ0cy5wb3J0ID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpLnNwbGl0KCc6Jyk7CiAgICAgICAgcGFydHMuaG9zdG5hbWUgPSB0WzBdIHx8IG51bGw7CiAgICAgICAgcGFydHMucG9ydCA9IHRbMV0gfHwgbnVsbDsKICAgICAgfQogICAgfQoKICAgIGlmIChwYXJ0cy5ob3N0bmFtZSAmJiBzdHJpbmcuc3Vic3RyaW5nKHBvcykuY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgcG9zKys7CiAgICAgIHN0cmluZyA9ICcvJyArIHN0cmluZzsKICAgIH0KCiAgICByZXR1cm4gc3RyaW5nLnN1YnN0cmluZyhwb3MpIHx8ICcvJzsKICB9OwogIFVSSS5wYXJzZUF1dGhvcml0eSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIHN0cmluZyA9IFVSSS5wYXJzZVVzZXJpbmZvKHN0cmluZywgcGFydHMpOwogICAgcmV0dXJuIFVSSS5wYXJzZUhvc3Qoc3RyaW5nLCBwYXJ0cyk7CiAgfTsKICBVUkkucGFyc2VVc2VyaW5mbyA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIC8vIGV4dHJhY3QgdXNlcm5hbWU6cGFzc3dvcmQKICAgIHZhciBmaXJzdFNsYXNoID0gc3RyaW5nLmluZGV4T2YoJy8nKTsKICAgIHZhciBwb3MgPSBzdHJpbmcubGFzdEluZGV4T2YoJ0AnLCBmaXJzdFNsYXNoID4gLTEgPyBmaXJzdFNsYXNoIDogc3RyaW5nLmxlbmd0aCAtIDEpOwogICAgdmFyIHQ7CgogICAgLy8gYXV0aG9yaXR5QCBtdXN0IGNvbWUgYmVmb3JlIC9wYXRoCiAgICBpZiAocG9zID4gLTEgJiYgKGZpcnN0U2xhc2ggPT09IC0xIHx8IHBvcyA8IGZpcnN0U2xhc2gpKSB7CiAgICAgIHQgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcykuc3BsaXQoJzonKTsKICAgICAgcGFydHMudXNlcm5hbWUgPSB0WzBdID8gVVJJLmRlY29kZSh0WzBdKSA6IG51bGw7CiAgICAgIHQuc2hpZnQoKTsKICAgICAgcGFydHMucGFzc3dvcmQgPSB0WzBdID8gVVJJLmRlY29kZSh0LmpvaW4oJzonKSkgOiBudWxsOwogICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpOwogICAgfSBlbHNlIHsKICAgICAgcGFydHMudXNlcm5hbWUgPSBudWxsOwogICAgICBwYXJ0cy5wYXNzd29yZCA9IG51bGw7CiAgICB9CgogICAgcmV0dXJuIHN0cmluZzsKICB9OwogIFVSSS5wYXJzZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7CiAgICBpZiAoIXN0cmluZykgewogICAgICByZXR1cm4ge307CiAgICB9CgogICAgLy8gdGhyb3cgb3V0IHRoZSBmdW5reSBidXNpbmVzcyAtICI/IltuYW1lIj0idmFsdWUiJiJdKwogICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoLyYrL2csICcmJykucmVwbGFjZSgvXlw/KiYqfCYrJC9nLCAnJyk7CgogICAgaWYgKCFzdHJpbmcpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQoKICAgIHZhciBpdGVtcyA9IHt9OwogICAgdmFyIHNwbGl0cyA9IHN0cmluZy5zcGxpdCgnJicpOwogICAgdmFyIGxlbmd0aCA9IHNwbGl0cy5sZW5ndGg7CiAgICB2YXIgdiwgbmFtZSwgdmFsdWU7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2ID0gc3BsaXRzW2ldLnNwbGl0KCc9Jyk7CiAgICAgIG5hbWUgPSBVUkkuZGVjb2RlUXVlcnkodi5zaGlmdCgpLCBlc2NhcGVRdWVyeVNwYWNlKTsKICAgICAgLy8gbm8gIj0iIGlzIG51bGwgYWNjb3JkaW5nIHRvIGh0dHA6Ly9kdmNzLnczLm9yZy9oZy91cmwvcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWwjY29sbGVjdC11cmwtcGFyYW1ldGVycwogICAgICB2YWx1ZSA9IHYubGVuZ3RoID8gVVJJLmRlY29kZVF1ZXJ5KHYuam9pbignPScpLCBlc2NhcGVRdWVyeVNwYWNlKSA6IG51bGw7CgogICAgICBpZiAoaGFzT3duLmNhbGwoaXRlbXMsIG5hbWUpKSB7CiAgICAgICAgaWYgKHR5cGVvZiBpdGVtc1tuYW1lXSA9PT0gJ3N0cmluZycgfHwgaXRlbXNbbmFtZV0gPT09IG51bGwpIHsKICAgICAgICAgIGl0ZW1zW25hbWVdID0gW2l0ZW1zW25hbWVdXTsKICAgICAgICB9CgogICAgICAgIGl0ZW1zW25hbWVdLnB1c2godmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW1zW25hbWVdID0gdmFsdWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gaXRlbXM7CiAgfTsKCiAgVVJJLmJ1aWxkID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHZhciB0ID0gJyc7CgogICAgaWYgKHBhcnRzLnByb3RvY29sKSB7CiAgICAgIHQgKz0gcGFydHMucHJvdG9jb2wgKyAnOic7CiAgICB9CgogICAgaWYgKCFwYXJ0cy51cm4gJiYgKHQgfHwgcGFydHMuaG9zdG5hbWUpKSB7CiAgICAgIHQgKz0gJy8vJzsKICAgIH0KCiAgICB0ICs9IChVUkkuYnVpbGRBdXRob3JpdHkocGFydHMpIHx8ICcnKTsKCiAgICBpZiAodHlwZW9mIHBhcnRzLnBhdGggPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmIChwYXJ0cy5wYXRoLmNoYXJBdCgwKSAhPT0gJy8nICYmIHR5cGVvZiBwYXJ0cy5ob3N0bmFtZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB0ICs9ICcvJzsKICAgICAgfQoKICAgICAgdCArPSBwYXJ0cy5wYXRoOwogICAgfQoKICAgIGlmICh0eXBlb2YgcGFydHMucXVlcnkgPT09ICdzdHJpbmcnICYmIHBhcnRzLnF1ZXJ5KSB7CiAgICAgIHQgKz0gJz8nICsgcGFydHMucXVlcnk7CiAgICB9CgogICAgaWYgKHR5cGVvZiBwYXJ0cy5mcmFnbWVudCA9PT0gJ3N0cmluZycgJiYgcGFydHMuZnJhZ21lbnQpIHsKICAgICAgdCArPSAnIycgKyBwYXJ0cy5mcmFnbWVudDsKICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgVVJJLmJ1aWxkSG9zdCA9IGZ1bmN0aW9uKHBhcnRzKSB7CiAgICB2YXIgdCA9ICcnOwoKICAgIGlmICghcGFydHMuaG9zdG5hbWUpIHsKICAgICAgcmV0dXJuICcnOwogICAgfSBlbHNlIGlmIChVUkkuaXA2X2V4cHJlc3Npb24udGVzdChwYXJ0cy5ob3N0bmFtZSkpIHsKICAgICAgdCArPSAnWycgKyBwYXJ0cy5ob3N0bmFtZSArICddJzsKICAgIH0gZWxzZSB7CiAgICAgIHQgKz0gcGFydHMuaG9zdG5hbWU7CiAgICB9CgogICAgaWYgKHBhcnRzLnBvcnQpIHsKICAgICAgdCArPSAnOicgKyBwYXJ0cy5wb3J0OwogICAgfQoKICAgIHJldHVybiB0OwogIH07CiAgVVJJLmJ1aWxkQXV0aG9yaXR5ID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHJldHVybiBVUkkuYnVpbGRVc2VyaW5mbyhwYXJ0cykgKyBVUkkuYnVpbGRIb3N0KHBhcnRzKTsKICB9OwogIFVSSS5idWlsZFVzZXJpbmZvID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHZhciB0ID0gJyc7CgogICAgaWYgKHBhcnRzLnVzZXJuYW1lKSB7CiAgICAgIHQgKz0gVVJJLmVuY29kZShwYXJ0cy51c2VybmFtZSk7CiAgICB9CgogICAgaWYgKHBhcnRzLnBhc3N3b3JkKSB7CiAgICAgIHQgKz0gJzonICsgVVJJLmVuY29kZShwYXJ0cy5wYXNzd29yZCk7CiAgICB9CgogICAgaWYgKHQpIHsKICAgICAgdCArPSAnQCc7CiAgICB9CgogICAgcmV0dXJuIHQ7CiAgfTsKICBVUkkuYnVpbGRRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgZXNjYXBlUXVlcnlTcGFjZSkgewogICAgLy8gYWNjb3JkaW5nIHRvIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODYgb3IgaHR0cDovL2xhYnMuYXBhY2hlLm9yZy93ZWJhcmNoL3VyaS9yZmMvcmZjMzk4Ni5odG1sCiAgICAvLyBiZWluZyDCuy0uX34hJCYnKCkqKyw7PTpALz/CqyAlSEVYIGFuZCBhbG51bSBhcmUgYWxsb3dlZAogICAgLy8gdGhlIFJGQyBleHBsaWNpdGx5IHN0YXRlcyA/L2ZvbyBiZWluZyBhIHZhbGlkIHVzZSBjYXNlLCBubyBtZW50aW9uIG9mIHBhcmFtZXRlciBzeW50YXghCiAgICAvLyBVUkkuanMgdHJlYXRzIHRoZSBxdWVyeSBzdHJpbmcgYXMgYmVpbmcgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkCiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MC9pbnRlcmFjdC9mb3Jtcy5odG1sI2Zvcm0tY29udGVudC10eXBlCgogICAgdmFyIHQgPSAnJzsKICAgIHZhciB1bmlxdWUsIGtleSwgaSwgbGVuZ3RoOwogICAgZm9yIChrZXkgaW4gZGF0YSkgewogICAgICBpZiAoaGFzT3duLmNhbGwoZGF0YSwga2V5KSAmJiBrZXkpIHsKICAgICAgICBpZiAoaXNBcnJheShkYXRhW2tleV0pKSB7CiAgICAgICAgICB1bmlxdWUgPSB7fTsKICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGRhdGFba2V5XS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoZGF0YVtrZXldW2ldICE9PSB1bmRlZmluZWQgJiYgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdCArPSAnJicgKyBVUkkuYnVpbGRRdWVyeVBhcmFtZXRlcihrZXksIGRhdGFba2V5XVtpXSwgZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyAhPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhW2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdCArPSAnJicgKyBVUkkuYnVpbGRRdWVyeVBhcmFtZXRlcihrZXksIGRhdGFba2V5XSwgZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHQuc3Vic3RyaW5nKDEpOwogIH07CiAgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkgewogICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MC9pbnRlcmFjdC9mb3Jtcy5odG1sI2Zvcm0tY29udGVudC10eXBlIC0tIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZAogICAgLy8gZG9uJ3QgYXBwZW5kICI9IiBmb3IgbnVsbCB2YWx1ZXMsIGFjY29yZGluZyB0byBodHRwOi8vZHZjcy53My5vcmcvaGcvdXJsL3Jhdy1maWxlL3RpcC9PdmVydmlldy5odG1sI3VybC1wYXJhbWV0ZXItc2VyaWFsaXphdGlvbgogICAgcmV0dXJuIFVSSS5lbmNvZGVRdWVyeShuYW1lLCBlc2NhcGVRdWVyeVNwYWNlKSArICh2YWx1ZSAhPT0gbnVsbCA/ICc9JyArIFVSSS5lbmNvZGVRdWVyeSh2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkgOiAnJyk7CiAgfTsKCiAgVVJJLmFkZFF1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgbmFtZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHsKICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkgewogICAgICAgICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmIChkYXRhW25hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBkYXRhW25hbWVdID0gdmFsdWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhW25hbWVdID09PSAnc3RyaW5nJykgewogICAgICAgIGRhdGFbbmFtZV0gPSBbZGF0YVtuYW1lXV07CiAgICAgIH0KCiAgICAgIGlmICghaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07CiAgICAgIH0KCiAgICAgIGRhdGFbbmFtZV0gPSAoZGF0YVtuYW1lXSB8fCBbXSkuY29uY2F0KHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKICBVUkkucmVtb3ZlUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSkgewogICAgdmFyIGksIGxlbmd0aCwga2V5OwoKICAgIGlmIChpc0FycmF5KG5hbWUpKSB7CiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG5hbWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBkYXRhW25hbWVbaV1dID0gdW5kZWZpbmVkOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGdldFR5cGUobmFtZSkgPT09ICdSZWdFeHAnKSB7CiAgICAgIGZvciAoa2V5IGluIGRhdGEpIHsKICAgICAgICBpZiAobmFtZS50ZXN0KGtleSkpIHsKICAgICAgICAgIGRhdGFba2V5XSA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7CiAgICAgIGZvciAoa2V5IGluIG5hbWUpIHsKICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkgewogICAgICAgICAgVVJJLnJlbW92ZVF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKGdldFR5cGUodmFsdWUpID09PSAnUmVnRXhwJykgewogICAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pICYmIHZhbHVlLnRlc3QoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhW25hbWVdID09PSBTdHJpbmcodmFsdWUpICYmICghaXNBcnJheSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAxKSkgewogICAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDsKICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5yZW1vdmVRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcsIFJlZ0V4cCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKICBVUkkuaGFzUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpIHsKICAgIHN3aXRjaCAoZ2V0VHlwZShuYW1lKSkgewogICAgICBjYXNlICdTdHJpbmcnOgogICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gaGVyZQogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnUmVnRXhwJzoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkgewogICAgICAgICAgaWYgKGhhc093bi5jYWxsKGRhdGEsIGtleSkpIHsKICAgICAgICAgICAgaWYgKG5hbWUudGVzdChrZXkpICYmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IFVSSS5oYXNRdWVyeShkYXRhLCBrZXksIHZhbHVlKSkpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgY2FzZSAnT2JqZWN0JzoKICAgICAgICBmb3IgKHZhciBfa2V5IGluIG5hbWUpIHsKICAgICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBfa2V5KSkgewogICAgICAgICAgICBpZiAoIVVSSS5oYXNRdWVyeShkYXRhLCBfa2V5LCBuYW1lW19rZXldKSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5oYXNRdWVyeSgpIGFjY2VwdHMgYSBzdHJpbmcsIHJlZ3VsYXIgZXhwcmVzc2lvbiBvciBvYmplY3QgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7CiAgICB9CgogICAgc3dpdGNoIChnZXRUeXBlKHZhbHVlKSkgewogICAgICBjYXNlICdVbmRlZmluZWQnOgogICAgICAgIC8vIHRydWUgaWYgZXhpc3RzIChidXQgbWF5IGJlIGVtcHR5KQogICAgICAgIHJldHVybiBuYW1lIGluIGRhdGE7IC8vIGRhdGFbbmFtZV0gIT09IHVuZGVmaW5lZDsKCiAgICAgIGNhc2UgJ0Jvb2xlYW4nOgogICAgICAgIC8vIHRydWUgaWYgZXhpc3RzIGFuZCBub24tZW1wdHkKICAgICAgICB2YXIgX2Jvb2x5ID0gQm9vbGVhbihpc0FycmF5KGRhdGFbbmFtZV0pID8gZGF0YVtuYW1lXS5sZW5ndGggOiBkYXRhW25hbWVdKTsKICAgICAgICByZXR1cm4gdmFsdWUgPT09IF9ib29seTsKCiAgICAgIGNhc2UgJ0Z1bmN0aW9uJzoKICAgICAgICAvLyBhbGxvdyBjb21wbGV4IGNvbXBhcmlzb24KICAgICAgICByZXR1cm4gISF2YWx1ZShkYXRhW25hbWVdLCBuYW1lLCBkYXRhKTsKCiAgICAgIGNhc2UgJ0FycmF5JzoKICAgICAgICBpZiAoIWlzQXJyYXkoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBvcCA9IHdpdGhpbkFycmF5ID8gYXJyYXlDb250YWlucyA6IGFycmF5c0VxdWFsOwogICAgICAgIHJldHVybiBvcChkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBjYXNlICdSZWdFeHAnOgogICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSkgewogICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZGF0YVtuYW1lXSAmJiBkYXRhW25hbWVdLm1hdGNoKHZhbHVlKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXdpdGhpbkFycmF5KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYXJyYXlDb250YWlucyhkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBjYXNlICdOdW1iZXInOgogICAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKTsKICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgIGNhc2UgJ1N0cmluZyc6CiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pKSB7CiAgICAgICAgICByZXR1cm4gZGF0YVtuYW1lXSA9PT0gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXdpdGhpbkFycmF5KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYXJyYXlDb250YWlucyhkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5oYXNRdWVyeSgpIGFjY2VwdHMgdW5kZWZpbmVkLCBib29sZWFuLCBzdHJpbmcsIG51bWJlciwgUmVnRXhwLCBGdW5jdGlvbiBhcyB0aGUgdmFsdWUgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKCgogIFVSSS5qb2luUGF0aHMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBpbnB1dCA9IFtdOwogICAgdmFyIHNlZ21lbnRzID0gW107CiAgICB2YXIgbm9uRW1wdHlTZWdtZW50cyA9IDA7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHVybCA9IG5ldyBVUkkoYXJndW1lbnRzW2ldKTsKICAgICAgaW5wdXQucHVzaCh1cmwpOwogICAgICB2YXIgX3NlZ21lbnRzID0gdXJsLnNlZ21lbnQoKTsKICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBfc2VnbWVudHMubGVuZ3RoOyBzKyspIHsKICAgICAgICBpZiAodHlwZW9mIF9zZWdtZW50c1tzXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHNlZ21lbnRzLnB1c2goX3NlZ21lbnRzW3NdKTsKICAgICAgICB9CgogICAgICAgIGlmIChfc2VnbWVudHNbc10pIHsKICAgICAgICAgIG5vbkVtcHR5U2VnbWVudHMrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhbm9uRW1wdHlTZWdtZW50cykgewogICAgICByZXR1cm4gbmV3IFVSSSgnJyk7CiAgICB9CgogICAgdmFyIHVyaSA9IG5ldyBVUkkoJycpLnNlZ21lbnQoc2VnbWVudHMpOwoKICAgIGlmIChpbnB1dFswXS5wYXRoKCkgPT09ICcnIHx8IGlucHV0WzBdLnBhdGgoKS5zbGljZSgwLCAxKSA9PT0gJy8nKSB7CiAgICAgIHVyaS5wYXRoKCcvJyArIHVyaS5wYXRoKCkpOwogICAgfQoKICAgIHJldHVybiB1cmkubm9ybWFsaXplKCk7CiAgfTsKCiAgVVJJLmNvbW1vblBhdGggPSBmdW5jdGlvbihvbmUsIHR3bykgewogICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKG9uZS5sZW5ndGgsIHR3by5sZW5ndGgpOwogICAgdmFyIHBvczsKCiAgICAvLyBmaW5kIGZpcnN0IG5vbi1tYXRjaGluZyBjaGFyYWN0ZXIKICAgIGZvciAocG9zID0gMDsgcG9zIDwgbGVuZ3RoOyBwb3MrKykgewogICAgICBpZiAob25lLmNoYXJBdChwb3MpICE9PSB0d28uY2hhckF0KHBvcykpIHsKICAgICAgICBwb3MtLTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3MgPCAxKSB7CiAgICAgIHJldHVybiBvbmUuY2hhckF0KDApID09PSB0d28uY2hhckF0KDApICYmIG9uZS5jaGFyQXQoMCkgPT09ICcvJyA/ICcvJyA6ICcnOwogICAgfQoKICAgIC8vIHJldmVydCB0byBsYXN0IC8KICAgIGlmIChvbmUuY2hhckF0KHBvcykgIT09ICcvJyB8fCB0d28uY2hhckF0KHBvcykgIT09ICcvJykgewogICAgICBwb3MgPSBvbmUuc3Vic3RyaW5nKDAsIHBvcykubGFzdEluZGV4T2YoJy8nKTsKICAgIH0KCiAgICByZXR1cm4gb25lLnN1YnN0cmluZygwLCBwb3MgKyAxKTsKICB9OwoKICBVUkkud2l0aGluU3RyaW5nID0gZnVuY3Rpb24oc3RyaW5nLCBjYWxsYmFjaywgb3B0aW9ucykgewogICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTsKICAgIHZhciBfc3RhcnQgPSBvcHRpb25zLnN0YXJ0IHx8IFVSSS5maW5kVXJpLnN0YXJ0OwogICAgdmFyIF9lbmQgPSBvcHRpb25zLmVuZCB8fCBVUkkuZmluZFVyaS5lbmQ7CiAgICB2YXIgX3RyaW0gPSBvcHRpb25zLnRyaW0gfHwgVVJJLmZpbmRVcmkudHJpbTsKICAgIHZhciBfYXR0cmlidXRlT3BlbiA9IC9bYS16MC05LV09WyInXT8kL2k7CgogICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICB2YXIgbWF0Y2ggPSBfc3RhcnQuZXhlYyhzdHJpbmcpOwogICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHZhciBzdGFydCA9IG1hdGNoLmluZGV4OwogICAgICBpZiAob3B0aW9ucy5pZ25vcmVIdG1sKSB7CiAgICAgICAgLy8gYXR0cmlidXQoZT1bIiddPyQpCiAgICAgICAgdmFyIGF0dHJpYnV0ZU9wZW4gPSBzdHJpbmcuc2xpY2UoTWF0aC5tYXgoc3RhcnQgLSAzLCAwKSwgc3RhcnQpOwogICAgICAgIGlmIChhdHRyaWJ1dGVPcGVuICYmIF9hdHRyaWJ1dGVPcGVuLnRlc3QoYXR0cmlidXRlT3BlbikpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGVuZCA9IHN0YXJ0ICsgc3RyaW5nLnNsaWNlKHN0YXJ0KS5zZWFyY2goX2VuZCk7CiAgICAgIHZhciBzbGljZSA9IHN0cmluZy5zbGljZShzdGFydCwgZW5kKS5yZXBsYWNlKF90cmltLCAnJyk7CiAgICAgIGlmIChvcHRpb25zLmlnbm9yZSAmJiBvcHRpb25zLmlnbm9yZS50ZXN0KHNsaWNlKSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBlbmQgPSBzdGFydCArIHNsaWNlLmxlbmd0aDsKICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKHNsaWNlLCBzdGFydCwgZW5kLCBzdHJpbmcpOwogICAgICBzdHJpbmcgPSBzdHJpbmcuc2xpY2UoMCwgc3RhcnQpICsgcmVzdWx0ICsgc3RyaW5nLnNsaWNlKGVuZCk7CiAgICAgIF9zdGFydC5sYXN0SW5kZXggPSBzdGFydCArIHJlc3VsdC5sZW5ndGg7CiAgICB9CgogICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7CiAgICByZXR1cm4gc3RyaW5nOwogIH07CgogIFVSSS5lbnN1cmVWYWxpZEhvc3RuYW1lID0gZnVuY3Rpb24odikgewogICAgLy8gVGhlb3JldGljYWxseSBVUklzIGFsbG93IHBlcmNlbnQtZW5jb2RpbmcgaW4gSG9zdG5hbWVzIChhY2NvcmRpbmcgdG8gUkZDIDM5ODYpCiAgICAvLyB0aGV5IGFyZSBub3QgcGFydCBvZiBETlMgYW5kIHRoZXJlZm9yZSBpZ25vcmVkIGJ5IFVSSS5qcwoKICAgIGlmICh2Lm1hdGNoKFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKSB7CiAgICAgIC8vIHRlc3QgcHVueWNvZGUKICAgICAgaWYgKCFwdW55Y29kZSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dIGFuZCBQdW55Y29kZS5qcyBpcyBub3QgYXZhaWxhYmxlJyk7CiAgICAgIH0KCiAgICAgIGlmIChwdW55Y29kZS50b0FTQ0lJKHYpLm1hdGNoKFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTsKICAgICAgfQogICAgfQogIH07CgogIC8vIG5vQ29uZmxpY3QKICBVUkkubm9Db25mbGljdCA9IGZ1bmN0aW9uKHJlbW92ZUFsbCkgewogICAgaWYgKHJlbW92ZUFsbCkgewogICAgICB2YXIgdW5jb25mbGljdGVkID0gewogICAgICAgIFVSSTogdGhpcy5ub0NvbmZsaWN0KCkKICAgICAgfTsKCiAgICAgIGlmIChyb290LlVSSVRlbXBsYXRlICYmIHR5cGVvZiByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1bmNvbmZsaWN0ZWQuVVJJVGVtcGxhdGUgPSByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QoKTsKICAgICAgfQoKICAgICAgaWYgKHJvb3QuSVB2NiAmJiB0eXBlb2Ygcm9vdC5JUHY2Lm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1bmNvbmZsaWN0ZWQuSVB2NiA9IHJvb3QuSVB2Ni5ub0NvbmZsaWN0KCk7CiAgICAgIH0KCiAgICAgIGlmIChyb290LlNlY29uZExldmVsRG9tYWlucyAmJiB0eXBlb2Ygcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMubm9Db25mbGljdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHVuY29uZmxpY3RlZC5TZWNvbmRMZXZlbERvbWFpbnMgPSByb290LlNlY29uZExldmVsRG9tYWlucy5ub0NvbmZsaWN0KCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1bmNvbmZsaWN0ZWQ7CiAgICB9IGVsc2UgaWYgKHJvb3QuVVJJID09PSB0aGlzKSB7CiAgICAgIHJvb3QuVVJJID0gX1VSSTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLmJ1aWxkID0gZnVuY3Rpb24oZGVmZXJCdWlsZCkgewogICAgaWYgKGRlZmVyQnVpbGQgPT09IHRydWUpIHsKICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSB0cnVlOwogICAgfSBlbHNlIGlmIChkZWZlckJ1aWxkID09PSB1bmRlZmluZWQgfHwgdGhpcy5fZGVmZXJyZWRfYnVpbGQpIHsKICAgICAgdGhpcy5fc3RyaW5nID0gVVJJLmJ1aWxkKHRoaXMuX3BhcnRzKTsKICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLmNsb25lID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmV3IFVSSSh0aGlzKTsKICB9OwoKICBwLnZhbHVlT2YgPSBwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5idWlsZChmYWxzZSkuX3N0cmluZzsKICB9OwoKCiAgZnVuY3Rpb24gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcihfcGFydCl7CiAgICByZXR1cm4gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLl9wYXJ0c1tfcGFydF0gfHwgJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fcGFydHNbX3BhcnRdID0gdiB8fCBudWxsOwogICAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgfTsKICB9CgogIGZ1bmN0aW9uIGdlbmVyYXRlUHJlZml4QWNjZXNzb3IoX3BhcnQsIF9rZXkpewogICAgcmV0dXJuIGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcGFydHNbX3BhcnRdIHx8ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh2ICE9PSBudWxsKSB7CiAgICAgICAgICB2ID0gdiArICcnOwogICAgICAgICAgaWYgKHYuY2hhckF0KDApID09PSBfa2V5KSB7CiAgICAgICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuX3BhcnRzW19wYXJ0XSA9IHY7CiAgICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICB9OwogIH0KCiAgcC5wcm90b2NvbCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3Byb3RvY29sJyk7CiAgcC51c2VybmFtZSA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3VzZXJuYW1lJyk7CiAgcC5wYXNzd29yZCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3Bhc3N3b3JkJyk7CiAgcC5ob3N0bmFtZSA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ2hvc3RuYW1lJyk7CiAgcC5wb3J0ID0gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcigncG9ydCcpOwogIHAucXVlcnkgPSBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKCdxdWVyeScsICc/Jyk7CiAgcC5mcmFnbWVudCA9IGdlbmVyYXRlUHJlZml4QWNjZXNzb3IoJ2ZyYWdtZW50JywgJyMnKTsKCiAgcC5zZWFyY2ggPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgdmFyIHQgPSB0aGlzLnF1ZXJ5KHYsIGJ1aWxkKTsKICAgIHJldHVybiB0eXBlb2YgdCA9PT0gJ3N0cmluZycgJiYgdC5sZW5ndGggPyAoJz8nICsgdCkgOiB0OwogIH07CiAgcC5oYXNoID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIHZhciB0ID0gdGhpcy5mcmFnbWVudCh2LCBidWlsZCk7CiAgICByZXR1cm4gdHlwZW9mIHQgPT09ICdzdHJpbmcnICYmIHQubGVuZ3RoID8gKCcjJyArIHQpIDogdDsKICB9OwoKICBwLnBhdGhuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkgewogICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aCB8fCAodGhpcy5fcGFydHMuaG9zdG5hbWUgPyAnLycgOiAnJyk7CiAgICAgIHJldHVybiB2ID8gKHRoaXMuX3BhcnRzLnVybiA/IFVSSS5kZWNvZGVVcm5QYXRoIDogVVJJLmRlY29kZVBhdGgpKHJlcykgOiByZXM7CiAgICB9IGVsc2UgewogICAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHYgPyBVUkkucmVjb2RlVXJuUGF0aCh2KSA6ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB2ID8gVVJJLnJlY29kZVBhdGgodikgOiAnLyc7CiAgICAgIH0KICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAucGF0aCA9IHAucGF0aG5hbWU7CiAgcC5ocmVmID0gZnVuY3Rpb24oaHJlZiwgYnVpbGQpIHsKICAgIHZhciBrZXk7CgogICAgaWYgKGhyZWYgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpOwogICAgfQoKICAgIHRoaXMuX3N0cmluZyA9ICcnOwogICAgdGhpcy5fcGFydHMgPSBVUkkuX3BhcnRzKCk7CgogICAgdmFyIF9VUkkgPSBocmVmIGluc3RhbmNlb2YgVVJJOwogICAgdmFyIF9vYmplY3QgPSB0eXBlb2YgaHJlZiA9PT0gJ29iamVjdCcgJiYgKGhyZWYuaG9zdG5hbWUgfHwgaHJlZi5wYXRoIHx8IGhyZWYucGF0aG5hbWUpOwogICAgaWYgKGhyZWYubm9kZU5hbWUpIHsKICAgICAgdmFyIGF0dHJpYnV0ZSA9IFVSSS5nZXREb21BdHRyaWJ1dGUoaHJlZik7CiAgICAgIGhyZWYgPSBocmVmW2F0dHJpYnV0ZV0gfHwgJyc7CiAgICAgIF9vYmplY3QgPSBmYWxzZTsKICAgIH0KCiAgICAvLyB3aW5kb3cubG9jYXRpb24gaXMgcmVwb3J0ZWQgdG8gYmUgYW4gb2JqZWN0LCBidXQgaXQncyBub3QgdGhlIHNvcnQKICAgIC8vIG9mIG9iamVjdCB3ZSdyZSBsb29raW5nIGZvcjoKICAgIC8vICogbG9jYXRpb24ucHJvdG9jb2wgZW5kcyB3aXRoIGEgY29sb24KICAgIC8vICogbG9jYXRpb24ucXVlcnkgIT0gb2JqZWN0LnNlYXJjaAogICAgLy8gKiBsb2NhdGlvbi5oYXNoICE9IG9iamVjdC5mcmFnbWVudAogICAgLy8gc2ltcGx5IHNlcmlhbGl6aW5nIHRoZSB1bmtub3duIG9iamVjdCBzaG91bGQgZG8gdGhlIHRyaWNrCiAgICAvLyAoZm9yIGxvY2F0aW9uLCBub3QgZm9yIGV2ZXJ5dGhpbmcuLi4pCiAgICBpZiAoIV9VUkkgJiYgX29iamVjdCAmJiBocmVmLnBhdGhuYW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgaHJlZiA9IGhyZWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICBpZiAodHlwZW9mIGhyZWYgPT09ICdzdHJpbmcnIHx8IGhyZWYgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgICAgdGhpcy5fcGFydHMgPSBVUkkucGFyc2UoU3RyaW5nKGhyZWYpLCB0aGlzLl9wYXJ0cyk7CiAgICB9IGVsc2UgaWYgKF9VUkkgfHwgX29iamVjdCkgewogICAgICB2YXIgc3JjID0gX1VSSSA/IGhyZWYuX3BhcnRzIDogaHJlZjsKICAgICAgZm9yIChrZXkgaW4gc3JjKSB7CiAgICAgICAgaWYgKGhhc093bi5jYWxsKHRoaXMuX3BhcnRzLCBrZXkpKSB7CiAgICAgICAgICB0aGlzLl9wYXJ0c1trZXldID0gc3JjW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGlucHV0Jyk7CiAgICB9CgogICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gaWRlbnRpZmljYXRpb24gYWNjZXNzb3JzCiAgcC5pcyA9IGZ1bmN0aW9uKHdoYXQpIHsKICAgIHZhciBpcCA9IGZhbHNlOwogICAgdmFyIGlwNCA9IGZhbHNlOwogICAgdmFyIGlwNiA9IGZhbHNlOwogICAgdmFyIG5hbWUgPSBmYWxzZTsKICAgIHZhciBzbGQgPSBmYWxzZTsKICAgIHZhciBpZG4gPSBmYWxzZTsKICAgIHZhciBwdW55Y29kZSA9IGZhbHNlOwogICAgdmFyIHJlbGF0aXZlID0gIXRoaXMuX3BhcnRzLnVybjsKCiAgICBpZiAodGhpcy5fcGFydHMuaG9zdG5hbWUpIHsKICAgICAgcmVsYXRpdmUgPSBmYWxzZTsKICAgICAgaXA0ID0gVVJJLmlwNF9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICBpcDYgPSBVUkkuaXA2X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIGlwID0gaXA0IHx8IGlwNjsKICAgICAgbmFtZSA9ICFpcDsKICAgICAgc2xkID0gbmFtZSAmJiBTTEQgJiYgU0xELmhhcyh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIGlkbiA9IG5hbWUgJiYgVVJJLmlkbl9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICBwdW55Y29kZSA9IG5hbWUgJiYgVVJJLnB1bnljb2RlX2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICB9CgogICAgc3dpdGNoICh3aGF0LnRvTG93ZXJDYXNlKCkpIHsKICAgICAgY2FzZSAncmVsYXRpdmUnOgogICAgICAgIHJldHVybiByZWxhdGl2ZTsKCiAgICAgIGNhc2UgJ2Fic29sdXRlJzoKICAgICAgICByZXR1cm4gIXJlbGF0aXZlOwoKICAgICAgLy8gaG9zdG5hbWUgaWRlbnRpZmljYXRpb24KICAgICAgY2FzZSAnZG9tYWluJzoKICAgICAgY2FzZSAnbmFtZSc6CiAgICAgICAgcmV0dXJuIG5hbWU7CgogICAgICBjYXNlICdzbGQnOgogICAgICAgIHJldHVybiBzbGQ7CgogICAgICBjYXNlICdpcCc6CiAgICAgICAgcmV0dXJuIGlwOwoKICAgICAgY2FzZSAnaXA0JzoKICAgICAgY2FzZSAnaXB2NCc6CiAgICAgIGNhc2UgJ2luZXQ0JzoKICAgICAgICByZXR1cm4gaXA0OwoKICAgICAgY2FzZSAnaXA2JzoKICAgICAgY2FzZSAnaXB2Nic6CiAgICAgIGNhc2UgJ2luZXQ2JzoKICAgICAgICByZXR1cm4gaXA2OwoKICAgICAgY2FzZSAnaWRuJzoKICAgICAgICByZXR1cm4gaWRuOwoKICAgICAgY2FzZSAndXJsJzoKICAgICAgICByZXR1cm4gIXRoaXMuX3BhcnRzLnVybjsKCiAgICAgIGNhc2UgJ3Vybic6CiAgICAgICAgcmV0dXJuICEhdGhpcy5fcGFydHMudXJuOwoKICAgICAgY2FzZSAncHVueWNvZGUnOgogICAgICAgIHJldHVybiBwdW55Y29kZTsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9OwoKICAvLyBjb21wb25lbnQgc3BlY2lmaWMgaW5wdXQgdmFsaWRhdGlvbgogIHZhciBfcHJvdG9jb2wgPSBwLnByb3RvY29sOwogIHZhciBfcG9ydCA9IHAucG9ydDsKICB2YXIgX2hvc3RuYW1lID0gcC5ob3N0bmFtZTsKCiAgcC5wcm90b2NvbCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICh2KSB7CiAgICAgICAgLy8gYWNjZXB0IHRyYWlsaW5nIDovLwogICAgICAgIHYgPSB2LnJlcGxhY2UoLzooXC9cLyk/JC8sICcnKTsKCiAgICAgICAgaWYgKCF2Lm1hdGNoKFVSSS5wcm90b2NvbF9leHByZXNzaW9uKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvdG9jb2wgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIG9yIGRvZXNuXCd0IHN0YXJ0IHdpdGggW0EtWl0nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfcHJvdG9jb2wuY2FsbCh0aGlzLCB2LCBidWlsZCk7CiAgfTsKICBwLnNjaGVtZSA9IHAucHJvdG9jb2w7CiAgcC5wb3J0ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICh2ID09PSAwKSB7CiAgICAgICAgdiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmICh2KSB7CiAgICAgICAgdiArPSAnJzsKICAgICAgICBpZiAodi5jaGFyQXQoMCkgPT09ICc6JykgewogICAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHYubWF0Y2goL1teMC05XS8pKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQb3J0ICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbMC05XScpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIF9wb3J0LmNhbGwodGhpcywgdiwgYnVpbGQpOwogIH07CiAgcC5ob3N0bmFtZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgeCA9IHt9OwogICAgICB2YXIgcmVzID0gVVJJLnBhcnNlSG9zdCh2LCB4KTsKICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTsKICAgICAgfQoKICAgICAgdiA9IHguaG9zdG5hbWU7CiAgICB9CiAgICByZXR1cm4gX2hvc3RuYW1lLmNhbGwodGhpcywgdiwgYnVpbGQpOwogIH07CgogIC8vIGNvbXBvdW5kIGFjY2Vzc29ycwogIHAub3JpZ2luID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2woKTsKICAgICAgdmFyIGF1dGhvcml0eSA9IHRoaXMuYXV0aG9yaXR5KCk7CiAgICAgIGlmICghYXV0aG9yaXR5KSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICByZXR1cm4gKHByb3RvY29sID8gcHJvdG9jb2wgKyAnOi8vJyA6ICcnKSArIHRoaXMuYXV0aG9yaXR5KCk7CiAgICB9IGVsc2UgewogICAgICB2YXIgb3JpZ2luID0gVVJJKHYpOwogICAgICB0aGlzCiAgICAgICAgLnByb3RvY29sKG9yaWdpbi5wcm90b2NvbCgpKQogICAgICAgIC5hdXRob3JpdHkob3JpZ2luLmF1dGhvcml0eSgpKQogICAgICAgIC5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuaG9zdCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUgPyBVUkkuYnVpbGRIb3N0KHRoaXMuX3BhcnRzKSA6ICcnOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUhvc3QodiwgdGhpcy5fcGFydHMpOwogICAgICBpZiAocmVzICE9PSAnLycpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSAiJyArIHYgKyAnIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5hdXRob3JpdHkgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gVVJJLmJ1aWxkQXV0aG9yaXR5KHRoaXMuX3BhcnRzKSA6ICcnOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUF1dGhvcml0eSh2LCB0aGlzLl9wYXJ0cyk7CiAgICAgIGlmIChyZXMgIT09ICcvJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dJyk7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnVzZXJpbmZvID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhciB0ID0gVVJJLmJ1aWxkVXNlcmluZm8odGhpcy5fcGFydHMpOwogICAgICByZXR1cm4gdCA/IHQuc3Vic3RyaW5nKDAsIHQubGVuZ3RoIC0xKSA6IHQ7CiAgICB9IGVsc2UgewogICAgICBpZiAodlt2Lmxlbmd0aC0xXSAhPT0gJ0AnKSB7CiAgICAgICAgdiArPSAnQCc7CiAgICAgIH0KCiAgICAgIFVSSS5wYXJzZVVzZXJpbmZvKHYsIHRoaXMuX3BhcnRzKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAucmVzb3VyY2UgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgdmFyIHBhcnRzOwoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMucGF0aCgpICsgdGhpcy5zZWFyY2goKSArIHRoaXMuaGFzaCgpOwogICAgfQoKICAgIHBhcnRzID0gVVJJLnBhcnNlKHYpOwogICAgdGhpcy5fcGFydHMucGF0aCA9IHBhcnRzLnBhdGg7CiAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IHBhcnRzLnF1ZXJ5OwogICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBwYXJ0cy5mcmFnbWVudDsKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIGZyYWN0aW9uIGFjY2Vzc29ycwogIHAuc3ViZG9tYWluID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICAvLyBjb252ZW5pZW5jZSwgcmV0dXJuICJ3d3ciIGZyb20gInd3dy5leGFtcGxlLm9yZyIKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICAvLyBncmFiIGRvbWFpbiBhbmQgYWRkIGFub3RoZXIgc2VnbWVudAogICAgICB2YXIgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoIC0gdGhpcy5kb21haW4oKS5sZW5ndGggLSAxOwogICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGVuZCkgfHwgJyc7CiAgICB9IGVsc2UgewogICAgICB2YXIgZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aCAtIHRoaXMuZG9tYWluKCkubGVuZ3RoOwogICAgICB2YXIgc3ViID0gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGUpOwogICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoJ14nICsgZXNjYXBlUmVnRXgoc3ViKSk7CgogICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLicpIHsKICAgICAgICB2ICs9ICcuJzsKICAgICAgfQoKICAgICAgaWYgKHYpIHsKICAgICAgICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSh2KTsKICAgICAgfQoKICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5kb21haW4gPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgIGJ1aWxkID0gdjsKICAgICAgdiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICAvLyBjb252ZW5pZW5jZSwgcmV0dXJuICJleGFtcGxlLm9yZyIgZnJvbSAid3d3LmV4YW1wbGUub3JnIgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIC8vIGlmIGhvc3RuYW1lIGNvbnNpc3RzIG9mIDEgb3IgMiBzZWdtZW50cywgaXQgbXVzdCBiZSB0aGUgZG9tYWluCiAgICAgIHZhciB0ID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubWF0Y2goL1wuL2cpOwogICAgICBpZiAodCAmJiB0Lmxlbmd0aCA8IDIpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWU7CiAgICAgIH0KCiAgICAgIC8vIGdyYWIgdGxkIGFuZCBhZGQgYW5vdGhlciBzZWdtZW50CiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGggLSB0aGlzLnRsZChidWlsZCkubGVuZ3RoIC0gMTsKICAgICAgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGFzdEluZGV4T2YoJy4nLCBlbmQgLTEpICsgMTsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhlbmQpIHx8ICcnOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCF2KSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY2Fubm90IHNldCBkb21haW4gZW1wdHknKTsKICAgICAgfQoKICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodik7CgogICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMuZG9tYWluKCkpICsgJyQnKTsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnRsZCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHsKICAgICAgYnVpbGQgPSB2OwogICAgICB2ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIC8vIHJldHVybiAib3JnIiBmcm9tICJ3d3cuZXhhbXBsZS5vcmciCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgdmFyIHBvcyA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIHZhciB0bGQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcocG9zICsgMSk7CgogICAgICBpZiAoYnVpbGQgIT09IHRydWUgJiYgU0xEICYmIFNMRC5saXN0W3RsZC50b0xvd2VyQ2FzZSgpXSkgewogICAgICAgIHJldHVybiBTTEQuZ2V0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB8fCB0bGQ7CiAgICAgIH0KCiAgICAgIHJldHVybiB0bGQ7CiAgICB9IGVsc2UgewogICAgICB2YXIgcmVwbGFjZTsKCiAgICAgIGlmICghdikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Nhbm5vdCBzZXQgVExEIGVtcHR5Jyk7CiAgICAgIH0gZWxzZSBpZiAodi5tYXRjaCgvW15hLXpBLVowLTktXS8pKSB7CiAgICAgICAgaWYgKFNMRCAmJiBTTEQuaXModikpIHsKICAgICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMudGxkKCkpICsgJyQnKTsKICAgICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVExEICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05XScpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkgewogICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignY2Fubm90IHNldCBUTEQgb24gbm9uLWRvbWFpbiBob3N0Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy50bGQoKSkgKyAnJCcpOwogICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTsKICAgICAgfQoKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuZGlyZWN0b3J5ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5wYXRoICYmICF0aGlzLl9wYXJ0cy5ob3N0bmFtZSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykgewogICAgICAgIHJldHVybiAnLyc7CiAgICAgIH0KCiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGggLSAxOwogICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCwgZW5kKSB8fCAodGhpcy5fcGFydHMuaG9zdG5hbWUgPyAnLycgOiAnJyk7CgogICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoKHJlcykgOiByZXM7CgogICAgfSBlbHNlIHsKICAgICAgdmFyIGUgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGg7CiAgICAgIHZhciBkaXJlY3RvcnkgPSB0aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZygwLCBlKTsKICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKCdeJyArIGVzY2FwZVJlZ0V4KGRpcmVjdG9yeSkpOwoKICAgICAgLy8gZnVsbHkgcXVhbGlmaWVyIGRpcmVjdG9yaWVzIGJlZ2luIHdpdGggYSBzbGFzaAogICAgICBpZiAoIXRoaXMuaXMoJ3JlbGF0aXZlJykpIHsKICAgICAgICBpZiAoIXYpIHsKICAgICAgICAgIHYgPSAnLyc7CiAgICAgICAgfQoKICAgICAgICBpZiAodi5jaGFyQXQoMCkgIT09ICcvJykgewogICAgICAgICAgdiA9ICcvJyArIHY7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBkaXJlY3RvcmllcyBhbHdheXMgZW5kIHdpdGggYSBzbGFzaAogICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLycpIHsKICAgICAgICB2ICs9ICcvJzsKICAgICAgfQoKICAgICAgdiA9IFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHJlcGxhY2UsIHYpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5maWxlbmFtZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSB0cnVlKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMucGF0aCB8fCB0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIHZhciBwb3MgPSB0aGlzLl9wYXJ0cy5wYXRoLmxhc3RJbmRleE9mKCcvJyk7CiAgICAgIHZhciByZXMgPSB0aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZyhwb3MrMSk7CgogICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoU2VnbWVudChyZXMpIDogcmVzOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG11dGF0ZWREaXJlY3RvcnkgPSBmYWxzZTsKCiAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJy8nKSB7CiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICB9CgogICAgICBpZiAodi5tYXRjaCgvXC4/XC8vKSkgewogICAgICAgIG11dGF0ZWREaXJlY3RvcnkgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy5maWxlbmFtZSgpKSArICckJyk7CiAgICAgIHYgPSBVUkkucmVjb2RlUGF0aCh2KTsKICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZShyZXBsYWNlLCB2KTsKCiAgICAgIGlmIChtdXRhdGVkRGlyZWN0b3J5KSB7CiAgICAgICAgdGhpcy5ub3JtYWxpemVQYXRoKGJ1aWxkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5zdWZmaXggPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkgewogICAgICBpZiAoIXRoaXMuX3BhcnRzLnBhdGggfHwgdGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICB2YXIgZmlsZW5hbWUgPSB0aGlzLmZpbGVuYW1lKCk7CiAgICAgIHZhciBwb3MgPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICB2YXIgcywgcmVzOwoKICAgICAgaWYgKHBvcyA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIC8vIHN1ZmZpeCBtYXkgb25seSBjb250YWluIGFsbnVtIGNoYXJhY3RlcnMgKHl1cCwgSSBtYWRlIHRoaXMgdXAuKQogICAgICBzID0gZmlsZW5hbWUuc3Vic3RyaW5nKHBvcysxKTsKICAgICAgcmVzID0gKC9eW2EtejAtOSVdKyQvaSkudGVzdChzKSA/IHMgOiAnJzsKICAgICAgcmV0dXJuIHYgPyBVUkkuZGVjb2RlUGF0aFNlZ21lbnQocmVzKSA6IHJlczsKICAgIH0gZWxzZSB7CiAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJy4nKSB7CiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICB9CgogICAgICB2YXIgc3VmZml4ID0gdGhpcy5zdWZmaXgoKTsKICAgICAgdmFyIHJlcGxhY2U7CgogICAgICBpZiAoIXN1ZmZpeCkgewogICAgICAgIGlmICghdikgewogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9wYXJ0cy5wYXRoICs9ICcuJyArIFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICB9IGVsc2UgaWYgKCF2KSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgoJy4nICsgc3VmZml4KSArICckJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgoc3VmZml4KSArICckJyk7CiAgICAgIH0KCiAgICAgIGlmIChyZXBsYWNlKSB7CiAgICAgICAgdiA9IFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB0aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UocmVwbGFjZSwgdik7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnNlZ21lbnQgPSBmdW5jdGlvbihzZWdtZW50LCB2LCBidWlsZCkgewogICAgdmFyIHNlcGFyYXRvciA9IHRoaXMuX3BhcnRzLnVybiA/ICc6JyA6ICcvJzsKICAgIHZhciBwYXRoID0gdGhpcy5wYXRoKCk7CiAgICB2YXIgYWJzb2x1dGUgPSBwYXRoLnN1YnN0cmluZygwLCAxKSA9PT0gJy8nOwogICAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdChzZXBhcmF0b3IpOwoKICAgIGlmIChzZWdtZW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHNlZ21lbnQgIT09ICdudW1iZXInKSB7CiAgICAgIGJ1aWxkID0gdjsKICAgICAgdiA9IHNlZ21lbnQ7CiAgICAgIHNlZ21lbnQgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKHNlZ21lbnQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc2VnbWVudCAhPT0gJ251bWJlcicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdCYWQgc2VnbWVudCAiJyArIHNlZ21lbnQgKyAnIiwgbXVzdCBiZSAwLWJhc2VkIGludGVnZXInKTsKICAgIH0KCiAgICBpZiAoYWJzb2x1dGUpIHsKICAgICAgc2VnbWVudHMuc2hpZnQoKTsKICAgIH0KCiAgICBpZiAoc2VnbWVudCA8IDApIHsKICAgICAgLy8gYWxsb3cgbmVnYXRpdmUgaW5kZXhlcyB0byBhZGRyZXNzIGZyb20gdGhlIGVuZAogICAgICBzZWdtZW50ID0gTWF0aC5tYXgoc2VnbWVudHMubGVuZ3RoICsgc2VnbWVudCwgMCk7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICAvKmpzaGludCBsYXhicmVhazogdHJ1ZSAqLwogICAgICByZXR1cm4gc2VnbWVudCA9PT0gdW5kZWZpbmVkCiAgICAgICAgPyBzZWdtZW50cwogICAgICAgIDogc2VnbWVudHNbc2VnbWVudF07CiAgICAgIC8qanNoaW50IGxheGJyZWFrOiBmYWxzZSAqLwogICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSBudWxsIHx8IHNlZ21lbnRzW3NlZ21lbnRdID09PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKGlzQXJyYXkodikpIHsKICAgICAgICBzZWdtZW50cyA9IFtdOwogICAgICAgIC8vIGNvbGxhcHNlIGVtcHR5IGVsZW1lbnRzIHdpdGhpbiBhcnJheQogICAgICAgIGZvciAodmFyIGk9MCwgbD12Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgaWYgKCF2W2ldLmxlbmd0aCAmJiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXS5sZW5ndGgpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzZWdtZW50cy5sZW5ndGggJiYgIXNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtMV0ubGVuZ3RoKSB7CiAgICAgICAgICAgIHNlZ21lbnRzLnBvcCgpOwogICAgICAgICAgfQoKICAgICAgICAgIHNlZ21lbnRzLnB1c2godHJpbVNsYXNoZXModltpXSkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh2IHx8IHR5cGVvZiB2ID09PSAnc3RyaW5nJykgewogICAgICAgIHYgPSB0cmltU2xhc2hlcyh2KTsKICAgICAgICBpZiAoc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9PT0gJycpIHsKICAgICAgICAgIC8vIGVtcHR5IHRyYWlsaW5nIGVsZW1lbnRzIGhhdmUgdG8gYmUgb3ZlcndyaXR0ZW4KICAgICAgICAgIC8vIHRvIHByZXZlbnQgcmVzdWx0cyBzdWNoIGFzIC9mb28vL2JhcgogICAgICAgICAgc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9IHY7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlZ21lbnRzLnB1c2godik7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAodikgewogICAgICAgIHNlZ21lbnRzW3NlZ21lbnRdID0gdHJpbVNsYXNoZXModik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VnbWVudHMuc3BsaWNlKHNlZ21lbnQsIDEpOwogICAgICB9CiAgICB9CgogICAgaWYgKGFic29sdXRlKSB7CiAgICAgIHNlZ21lbnRzLnVuc2hpZnQoJycpOwogICAgfQoKICAgIHJldHVybiB0aGlzLnBhdGgoc2VnbWVudHMuam9pbihzZXBhcmF0b3IpLCBidWlsZCk7CiAgfTsKICBwLnNlZ21lbnRDb2RlZCA9IGZ1bmN0aW9uKHNlZ21lbnQsIHYsIGJ1aWxkKSB7CiAgICB2YXIgc2VnbWVudHMsIGksIGw7CgogICAgaWYgKHR5cGVvZiBzZWdtZW50ICE9PSAnbnVtYmVyJykgewogICAgICBidWlsZCA9IHY7CiAgICAgIHYgPSBzZWdtZW50OwogICAgICBzZWdtZW50ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgc2VnbWVudHMgPSB0aGlzLnNlZ21lbnQoc2VnbWVudCwgdiwgYnVpbGQpOwogICAgICBpZiAoIWlzQXJyYXkoc2VnbWVudHMpKSB7CiAgICAgICAgc2VnbWVudHMgPSBzZWdtZW50cyAhPT0gdW5kZWZpbmVkID8gVVJJLmRlY29kZShzZWdtZW50cykgOiB1bmRlZmluZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChpID0gMCwgbCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgc2VnbWVudHNbaV0gPSBVUkkuZGVjb2RlKHNlZ21lbnRzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzZWdtZW50czsKICAgIH0KCiAgICBpZiAoIWlzQXJyYXkodikpIHsKICAgICAgdiA9ICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgfHwgdiBpbnN0YW5jZW9mIFN0cmluZykgPyBVUkkuZW5jb2RlKHYpIDogdjsKICAgIH0gZWxzZSB7CiAgICAgIGZvciAoaSA9IDAsIGwgPSB2Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHZbaV0gPSBVUkkuZW5jb2RlKHZbaV0pOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc2VnbWVudChzZWdtZW50LCB2LCBidWlsZCk7CiAgfTsKCiAgLy8gbXV0YXRpbmcgcXVlcnkgc3RyaW5nCiAgdmFyIHEgPSBwLnF1ZXJ5OwogIHAucXVlcnkgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHYgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09ICdmdW5jdGlvbicpIHsKICAgICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgIHZhciByZXN1bHQgPSB2LmNhbGwodGhpcywgZGF0YSk7CiAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkocmVzdWx0IHx8IGRhdGEsIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9IGVsc2UgaWYgKHYgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHsKICAgICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeSh2LCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHEuY2FsbCh0aGlzLCB2LCBidWlsZCk7CiAgICB9CiAgfTsKICBwLnNldFF1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGJ1aWxkKSB7CiAgICB2YXIgZGF0YSA9IFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKCiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnIHx8IG5hbWUgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgICAgZGF0YVtuYW1lXSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IG51bGw7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JykgewogICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkgewogICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7CiAgICAgICAgICBkYXRhW2tleV0gPSBuYW1lW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBuYW1lIHBhcmFtZXRlcicpOwogICAgfQoKICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkoZGF0YSwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHsKICAgICAgYnVpbGQgPSB2YWx1ZTsKICAgIH0KCiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICByZXR1cm4gdGhpczsKICB9OwogIHAuYWRkUXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYnVpbGQpIHsKICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWUpOwogICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgewogICAgICBidWlsZCA9IHZhbHVlOwogICAgfQoKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBidWlsZCkgewogICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICBVUkkucmVtb3ZlUXVlcnkoZGF0YSwgbmFtZSwgdmFsdWUpOwogICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgewogICAgICBidWlsZCA9IHZhbHVlOwogICAgfQoKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5oYXNRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSkgewogICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICByZXR1cm4gVVJJLmhhc1F1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSk7CiAgfTsKICBwLnNldFNlYXJjaCA9IHAuc2V0UXVlcnk7CiAgcC5hZGRTZWFyY2ggPSBwLmFkZFF1ZXJ5OwogIHAucmVtb3ZlU2VhcmNoID0gcC5yZW1vdmVRdWVyeTsKICBwLmhhc1NlYXJjaCA9IHAuaGFzUXVlcnk7CgogIC8vIHNhbml0aXppbmcgVVJMcwogIHAubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB0aGlzCiAgICAgICAgLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKQogICAgICAgIC5ub3JtYWxpemVQYXRoKGZhbHNlKQogICAgICAgIC5ub3JtYWxpemVRdWVyeShmYWxzZSkKICAgICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpCiAgICAgICAgLmJ1aWxkKCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMKICAgICAgLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKQogICAgICAubm9ybWFsaXplSG9zdG5hbWUoZmFsc2UpCiAgICAgIC5ub3JtYWxpemVQb3J0KGZhbHNlKQogICAgICAubm9ybWFsaXplUGF0aChmYWxzZSkKICAgICAgLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKQogICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpCiAgICAgIC5idWlsZCgpOwogIH07CiAgcC5ub3JtYWxpemVQcm90b2NvbCA9IGZ1bmN0aW9uKGJ1aWxkKSB7CiAgICBpZiAodHlwZW9mIHRoaXMuX3BhcnRzLnByb3RvY29sID09PSAnc3RyaW5nJykgewogICAgICB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9IHRoaXMuX3BhcnRzLnByb3RvY29sLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwogIHAubm9ybWFsaXplSG9zdG5hbWUgPSBmdW5jdGlvbihidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB7CiAgICAgIGlmICh0aGlzLmlzKCdJRE4nKSAmJiBwdW55Y29kZSkgewogICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pcygnSVB2NicpICYmIElQdjYpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IElQdjYuYmVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5ub3JtYWxpemVQb3J0ID0gZnVuY3Rpb24oYnVpbGQpIHsKICAgIC8vIHJlbW92ZSBwb3J0IG9mIGl0J3MgdGhlIHByb3RvY29sJ3MgZGVmYXVsdAogICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9PT0gJ3N0cmluZycgJiYgdGhpcy5fcGFydHMucG9ydCA9PT0gVVJJLmRlZmF1bHRQb3J0c1t0aGlzLl9wYXJ0cy5wcm90b2NvbF0pIHsKICAgICAgdGhpcy5fcGFydHMucG9ydCA9IG51bGw7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwogIHAubm9ybWFsaXplUGF0aCA9IGZ1bmN0aW9uKGJ1aWxkKSB7CiAgICB2YXIgX3BhdGggPSB0aGlzLl9wYXJ0cy5wYXRoOwogICAgaWYgKCFfcGF0aCkgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSBVUkkucmVjb2RlVXJuUGF0aCh0aGlzLl9wYXJ0cy5wYXRoKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBpZiAodGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIF9wYXRoID0gVVJJLnJlY29kZVBhdGgoX3BhdGgpOwoKICAgIHZhciBfd2FzX3JlbGF0aXZlOwogICAgdmFyIF9sZWFkaW5nUGFyZW50cyA9ICcnOwogICAgdmFyIF9wYXJlbnQsIF9wb3M7CgogICAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzCiAgICBpZiAoX3BhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgX3dhc19yZWxhdGl2ZSA9IHRydWU7CiAgICAgIF9wYXRoID0gJy8nICsgX3BhdGg7CiAgICB9CgogICAgLy8gaGFuZGxlIHJlbGF0aXZlIGZpbGVzIChhcyBvcHBvc2VkIHRvIGRpcmVjdG9yaWVzKQogICAgaWYgKF9wYXRoLnNsaWNlKC0zKSA9PT0gJy8uLicgfHwgX3BhdGguc2xpY2UoLTIpID09PSAnLy4nKSB7CiAgICAgIF9wYXRoICs9ICcvJzsKICAgIH0KCiAgICAvLyByZXNvbHZlIHNpbXBsZXMKICAgIF9wYXRoID0gX3BhdGgKICAgICAgLnJlcGxhY2UoLyhcLyhcLlwvKSspfChcL1wuJCkvZywgJy8nKQogICAgICAucmVwbGFjZSgvXC97Mix9L2csICcvJyk7CgogICAgLy8gcmVtZW1iZXIgbGVhZGluZyBwYXJlbnRzCiAgICBpZiAoX3dhc19yZWxhdGl2ZSkgewogICAgICBfbGVhZGluZ1BhcmVudHMgPSBfcGF0aC5zdWJzdHJpbmcoMSkubWF0Y2goL14oXC5cLlwvKSsvKSB8fCAnJzsKICAgICAgaWYgKF9sZWFkaW5nUGFyZW50cykgewogICAgICAgIF9sZWFkaW5nUGFyZW50cyA9IF9sZWFkaW5nUGFyZW50c1swXTsKICAgICAgfQogICAgfQoKICAgIC8vIHJlc29sdmUgcGFyZW50cwogICAgd2hpbGUgKHRydWUpIHsKICAgICAgX3BhcmVudCA9IF9wYXRoLnNlYXJjaCgvXC9cLlwuKFwvfCQpLyk7CiAgICAgIGlmIChfcGFyZW50ID09PSAtMSkgewogICAgICAgIC8vIG5vIG1vcmUgLi4vIHRvIHJlc29sdmUKICAgICAgICBicmVhazsKICAgICAgfSBlbHNlIGlmIChfcGFyZW50ID09PSAwKSB7CiAgICAgICAgLy8gdG9wIGxldmVsIGNhbm5vdCBiZSByZWxhdGl2ZSwgc2tpcCBpdAogICAgICAgIF9wYXRoID0gX3BhdGguc3Vic3RyaW5nKDMpOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBfcG9zID0gX3BhdGguc3Vic3RyaW5nKDAsIF9wYXJlbnQpLmxhc3RJbmRleE9mKCcvJyk7CiAgICAgIGlmIChfcG9zID09PSAtMSkgewogICAgICAgIF9wb3MgPSBfcGFyZW50OwogICAgICB9CiAgICAgIF9wYXRoID0gX3BhdGguc3Vic3RyaW5nKDAsIF9wb3MpICsgX3BhdGguc3Vic3RyaW5nKF9wYXJlbnQgKyAzKTsKICAgIH0KCiAgICAvLyByZXZlcnQgdG8gcmVsYXRpdmUKICAgIGlmIChfd2FzX3JlbGF0aXZlICYmIHRoaXMuaXMoJ3JlbGF0aXZlJykpIHsKICAgICAgX3BhdGggPSBfbGVhZGluZ1BhcmVudHMgKyBfcGF0aC5zdWJzdHJpbmcoMSk7CiAgICB9CgogICAgdGhpcy5fcGFydHMucGF0aCA9IF9wYXRoOwogICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZVBhdGhuYW1lID0gcC5ub3JtYWxpemVQYXRoOwogIHAubm9ybWFsaXplUXVlcnkgPSBmdW5jdGlvbihidWlsZCkgewogICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5xdWVyeSA9PT0gJ3N0cmluZycpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5xdWVyeS5sZW5ndGgpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5xdWVyeShVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZUZyYWdtZW50ID0gZnVuY3Rpb24oYnVpbGQpIHsKICAgIGlmICghdGhpcy5fcGFydHMuZnJhZ21lbnQpIHsKICAgICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBudWxsOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZVNlYXJjaCA9IHAubm9ybWFsaXplUXVlcnk7CiAgcC5ub3JtYWxpemVIYXNoID0gcC5ub3JtYWxpemVGcmFnbWVudDsKCiAgcC5pc284ODU5ID0gZnVuY3Rpb24oKSB7CiAgICAvLyBleHBlY3QgdW5pY29kZSBpbnB1dCwgaXNvODg1OSBvdXRwdXQKICAgIHZhciBlID0gVVJJLmVuY29kZTsKICAgIHZhciBkID0gVVJJLmRlY29kZTsKCiAgICBVUkkuZW5jb2RlID0gZXNjYXBlOwogICAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDsKICAgIHRyeSB7CiAgICAgIHRoaXMubm9ybWFsaXplKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBVUkkuZW5jb2RlID0gZTsKICAgICAgVVJJLmRlY29kZSA9IGQ7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLnVuaWNvZGUgPSBmdW5jdGlvbigpIHsKICAgIC8vIGV4cGVjdCBpc284ODU5IGlucHV0LCB1bmljb2RlIG91dHB1dAogICAgdmFyIGUgPSBVUkkuZW5jb2RlOwogICAgdmFyIGQgPSBVUkkuZGVjb2RlOwoKICAgIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7CiAgICBVUkkuZGVjb2RlID0gdW5lc2NhcGU7CiAgICB0cnkgewogICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgVVJJLmVuY29kZSA9IGU7CiAgICAgIFVSSS5kZWNvZGUgPSBkOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcC5yZWFkYWJsZSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHVyaSA9IHRoaXMuY2xvbmUoKTsKICAgIC8vIHJlbW92aW5nIHVzZXJuYW1lLCBwYXNzd29yZCwgYmVjYXVzZSB0aGV5IHNob3VsZG4ndCBiZSBkaXNwbGF5ZWQgYWNjb3JkaW5nIHRvIFJGQyAzOTg2CiAgICB1cmkudXNlcm5hbWUoJycpLnBhc3N3b3JkKCcnKS5ub3JtYWxpemUoKTsKICAgIHZhciB0ID0gJyc7CiAgICBpZiAodXJpLl9wYXJ0cy5wcm90b2NvbCkgewogICAgICB0ICs9IHVyaS5fcGFydHMucHJvdG9jb2wgKyAnOi8vJzsKICAgIH0KCiAgICBpZiAodXJpLl9wYXJ0cy5ob3N0bmFtZSkgewogICAgICBpZiAodXJpLmlzKCdwdW55Y29kZScpICYmIHB1bnljb2RlKSB7CiAgICAgICAgdCArPSBwdW55Y29kZS50b1VuaWNvZGUodXJpLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgICAgaWYgKHVyaS5fcGFydHMucG9ydCkgewogICAgICAgICAgdCArPSAnOicgKyB1cmkuX3BhcnRzLnBvcnQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHQgKz0gdXJpLmhvc3QoKTsKICAgICAgfQogICAgfQoKICAgIGlmICh1cmkuX3BhcnRzLmhvc3RuYW1lICYmIHVyaS5fcGFydHMucGF0aCAmJiB1cmkuX3BhcnRzLnBhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgdCArPSAnLyc7CiAgICB9CgogICAgdCArPSB1cmkucGF0aCh0cnVlKTsKICAgIGlmICh1cmkuX3BhcnRzLnF1ZXJ5KSB7CiAgICAgIHZhciBxID0gJyc7CiAgICAgIGZvciAodmFyIGkgPSAwLCBxcCA9IHVyaS5fcGFydHMucXVlcnkuc3BsaXQoJyYnKSwgbCA9IHFwLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHZhciBrdiA9IChxcFtpXSB8fCAnJykuc3BsaXQoJz0nKTsKICAgICAgICBxICs9ICcmJyArIFVSSS5kZWNvZGVRdWVyeShrdlswXSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkKICAgICAgICAgIC5yZXBsYWNlKC8mL2csICclMjYnKTsKCiAgICAgICAgaWYgKGt2WzFdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHEgKz0gJz0nICsgVVJJLmRlY29kZVF1ZXJ5KGt2WzFdLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKQogICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJTI2Jyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHQgKz0gJz8nICsgcS5zdWJzdHJpbmcoMSk7CiAgICB9CgogICAgdCArPSBVUkkuZGVjb2RlUXVlcnkodXJpLmhhc2goKSwgdHJ1ZSk7CiAgICByZXR1cm4gdDsKICB9OwoKICAvLyByZXNvbHZpbmcgcmVsYXRpdmUgYW5kIGFic29sdXRlIFVSTHMKICBwLmFic29sdXRlVG8gPSBmdW5jdGlvbihiYXNlKSB7CiAgICB2YXIgcmVzb2x2ZWQgPSB0aGlzLmNsb25lKCk7CiAgICB2YXIgcHJvcGVydGllcyA9IFsncHJvdG9jb2wnLCAndXNlcm5hbWUnLCAncGFzc3dvcmQnLCAnaG9zdG5hbWUnLCAncG9ydCddOwogICAgdmFyIGJhc2VkaXIsIGksIHA7CgogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSTnMgZG8gbm90IGhhdmUgYW55IGdlbmVyYWxseSBkZWZpbmVkIGhpZXJhcmNoaWNhbCBjb21wb25lbnRzJyk7CiAgICB9CgogICAgaWYgKCEoYmFzZSBpbnN0YW5jZW9mIFVSSSkpIHsKICAgICAgYmFzZSA9IG5ldyBVUkkoYmFzZSk7CiAgICB9CgogICAgaWYgKCFyZXNvbHZlZC5fcGFydHMucHJvdG9jb2wpIHsKICAgICAgcmVzb2x2ZWQuX3BhcnRzLnByb3RvY29sID0gYmFzZS5fcGFydHMucHJvdG9jb2w7CiAgICB9CgogICAgaWYgKHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB7CiAgICAgIHJldHVybiByZXNvbHZlZDsKICAgIH0KCiAgICBmb3IgKGkgPSAwOyAocCA9IHByb3BlcnRpZXNbaV0pOyBpKyspIHsKICAgICAgcmVzb2x2ZWQuX3BhcnRzW3BdID0gYmFzZS5fcGFydHNbcF07CiAgICB9CgogICAgaWYgKCFyZXNvbHZlZC5fcGFydHMucGF0aCkgewogICAgICByZXNvbHZlZC5fcGFydHMucGF0aCA9IGJhc2UuX3BhcnRzLnBhdGg7CiAgICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5KSB7CiAgICAgICAgcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5ID0gYmFzZS5fcGFydHMucXVlcnk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAocmVzb2x2ZWQuX3BhcnRzLnBhdGguc3Vic3RyaW5nKC0yKSA9PT0gJy4uJykgewogICAgICByZXNvbHZlZC5fcGFydHMucGF0aCArPSAnLyc7CiAgICB9CgogICAgaWYgKHJlc29sdmVkLnBhdGgoKS5jaGFyQXQoMCkgIT09ICcvJykgewogICAgICBiYXNlZGlyID0gYmFzZS5kaXJlY3RvcnkoKTsKICAgICAgYmFzZWRpciA9IGJhc2VkaXIgPyBiYXNlZGlyIDogYmFzZS5wYXRoKCkuaW5kZXhPZignLycpID09PSAwID8gJy8nIDogJyc7CiAgICAgIHJlc29sdmVkLl9wYXJ0cy5wYXRoID0gKGJhc2VkaXIgPyAoYmFzZWRpciArICcvJykgOiAnJykgKyByZXNvbHZlZC5fcGFydHMucGF0aDsKICAgICAgcmVzb2x2ZWQubm9ybWFsaXplUGF0aCgpOwogICAgfQoKICAgIHJlc29sdmVkLmJ1aWxkKCk7CiAgICByZXR1cm4gcmVzb2x2ZWQ7CiAgfTsKICBwLnJlbGF0aXZlVG8gPSBmdW5jdGlvbihiYXNlKSB7CiAgICB2YXIgcmVsYXRpdmUgPSB0aGlzLmNsb25lKCkubm9ybWFsaXplKCk7CiAgICB2YXIgcmVsYXRpdmVQYXJ0cywgYmFzZVBhcnRzLCBjb21tb24sIHJlbGF0aXZlUGF0aCwgYmFzZVBhdGg7CgogICAgaWYgKHJlbGF0aXZlLl9wYXJ0cy51cm4pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpOwogICAgfQoKICAgIGJhc2UgPSBuZXcgVVJJKGJhc2UpLm5vcm1hbGl6ZSgpOwogICAgcmVsYXRpdmVQYXJ0cyA9IHJlbGF0aXZlLl9wYXJ0czsKICAgIGJhc2VQYXJ0cyA9IGJhc2UuX3BhcnRzOwogICAgcmVsYXRpdmVQYXRoID0gcmVsYXRpdmUucGF0aCgpOwogICAgYmFzZVBhdGggPSBiYXNlLnBhdGgoKTsKCiAgICBpZiAocmVsYXRpdmVQYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignVVJJIGlzIGFscmVhZHkgcmVsYXRpdmUnKTsKICAgIH0KCiAgICBpZiAoYmFzZVBhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY2FsY3VsYXRlIGEgVVJJIHJlbGF0aXZlIHRvIGFub3RoZXIgcmVsYXRpdmUgVVJJJyk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGFydHMucHJvdG9jb2wgPT09IGJhc2VQYXJ0cy5wcm90b2NvbCkgewogICAgICByZWxhdGl2ZVBhcnRzLnByb3RvY29sID0gbnVsbDsKICAgIH0KCiAgICBpZiAocmVsYXRpdmVQYXJ0cy51c2VybmFtZSAhPT0gYmFzZVBhcnRzLnVzZXJuYW1lIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IGJhc2VQYXJ0cy5wYXNzd29yZCkgewogICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTsKICAgIH0KCiAgICBpZiAocmVsYXRpdmVQYXJ0cy5wcm90b2NvbCAhPT0gbnVsbCB8fCByZWxhdGl2ZVBhcnRzLnVzZXJuYW1lICE9PSBudWxsIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IG51bGwpIHsKICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGFydHMuaG9zdG5hbWUgPT09IGJhc2VQYXJ0cy5ob3N0bmFtZSAmJiByZWxhdGl2ZVBhcnRzLnBvcnQgPT09IGJhc2VQYXJ0cy5wb3J0KSB7CiAgICAgIHJlbGF0aXZlUGFydHMuaG9zdG5hbWUgPSBudWxsOwogICAgICByZWxhdGl2ZVBhcnRzLnBvcnQgPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGF0aCA9PT0gYmFzZVBhdGgpIHsKICAgICAgcmVsYXRpdmVQYXJ0cy5wYXRoID0gJyc7CiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpOwogICAgfQoKICAgIC8vIGRldGVybWluZSBjb21tb24gc3ViIHBhdGgKICAgIGNvbW1vbiA9IFVSSS5jb21tb25QYXRoKHJlbGF0aXZlUGF0aCwgYmFzZVBhdGgpOwoKICAgIC8vIElmIHRoZSBwYXRocyBoYXZlIG5vdGhpbmcgaW4gY29tbW9uLCByZXR1cm4gYSByZWxhdGl2ZSBVUkwgd2l0aCB0aGUgYWJzb2x1dGUgcGF0aC4KICAgIGlmICghY29tbW9uKSB7CiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpOwogICAgfQoKICAgIHZhciBwYXJlbnRzID0gYmFzZVBhcnRzLnBhdGgKICAgICAgLnN1YnN0cmluZyhjb21tb24ubGVuZ3RoKQogICAgICAucmVwbGFjZSgvW15cL10qJC8sICcnKQogICAgICAucmVwbGFjZSgvLio/XC8vZywgJy4uLycpOwoKICAgIHJlbGF0aXZlUGFydHMucGF0aCA9IChwYXJlbnRzICsgcmVsYXRpdmVQYXJ0cy5wYXRoLnN1YnN0cmluZyhjb21tb24ubGVuZ3RoKSkgfHwgJy4vJzsKCiAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTsKICB9OwoKICAvLyBjb21wYXJpbmcgVVJJcwogIHAuZXF1YWxzID0gZnVuY3Rpb24odXJpKSB7CiAgICB2YXIgb25lID0gdGhpcy5jbG9uZSgpOwogICAgdmFyIHR3byA9IG5ldyBVUkkodXJpKTsKICAgIHZhciBvbmVfbWFwID0ge307CiAgICB2YXIgdHdvX21hcCA9IHt9OwogICAgdmFyIGNoZWNrZWQgPSB7fTsKICAgIHZhciBvbmVfcXVlcnksIHR3b19xdWVyeSwga2V5OwoKICAgIG9uZS5ub3JtYWxpemUoKTsKICAgIHR3by5ub3JtYWxpemUoKTsKCiAgICAvLyBleGFjdCBtYXRjaAogICAgaWYgKG9uZS50b1N0cmluZygpID09PSB0d28udG9TdHJpbmcoKSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBleHRyYWN0IHF1ZXJ5IHN0cmluZwogICAgb25lX3F1ZXJ5ID0gb25lLnF1ZXJ5KCk7CiAgICB0d29fcXVlcnkgPSB0d28ucXVlcnkoKTsKICAgIG9uZS5xdWVyeSgnJyk7CiAgICB0d28ucXVlcnkoJycpOwoKICAgIC8vIGRlZmluaXRlbHkgbm90IGVxdWFsIGlmIG5vdCBldmVuIG5vbi1xdWVyeSBwYXJ0cyBtYXRjaAogICAgaWYgKG9uZS50b1N0cmluZygpICE9PSB0d28udG9TdHJpbmcoKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gcXVlcnkgcGFyYW1ldGVycyBoYXZlIHRoZSBzYW1lIGxlbmd0aCwgZXZlbiBpZiB0aGV5J3JlIHBlcm11dGVkCiAgICBpZiAob25lX3F1ZXJ5Lmxlbmd0aCAhPT0gdHdvX3F1ZXJ5Lmxlbmd0aCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgb25lX21hcCA9IFVSSS5wYXJzZVF1ZXJ5KG9uZV9xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICB0d29fbWFwID0gVVJJLnBhcnNlUXVlcnkodHdvX3F1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKCiAgICBmb3IgKGtleSBpbiBvbmVfbWFwKSB7CiAgICAgIGlmIChoYXNPd24uY2FsbChvbmVfbWFwLCBrZXkpKSB7CiAgICAgICAgaWYgKCFpc0FycmF5KG9uZV9tYXBba2V5XSkpIHsKICAgICAgICAgIGlmIChvbmVfbWFwW2tleV0gIT09IHR3b19tYXBba2V5XSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICghYXJyYXlzRXF1YWwob25lX21hcFtrZXldLCB0d29fbWFwW2tleV0pKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBjaGVja2VkW2tleV0gPSB0cnVlOwogICAgICB9CiAgICB9CgogICAgZm9yIChrZXkgaW4gdHdvX21hcCkgewogICAgICBpZiAoaGFzT3duLmNhbGwodHdvX21hcCwga2V5KSkgewogICAgICAgIGlmICghY2hlY2tlZFtrZXldKSB7CiAgICAgICAgICAvLyB0d28gY29udGFpbnMgYSBwYXJhbWV0ZXIgbm90IHByZXNlbnQgaW4gb25lCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLy8gc3RhdGUKICBwLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9IGZ1bmN0aW9uKHYpIHsKICAgIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9ICEhdjsKICAgIHJldHVybiB0aGlzOwogIH07CgogIHAuZXNjYXBlUXVlcnlTcGFjZSA9IGZ1bmN0aW9uKHYpIHsKICAgIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UgPSAhIXY7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICByZXR1cm4gVVJJOwp9KSk7Cgp9LHsiLi9JUHY2IjozLCIuL1NlY29uZExldmVsRG9tYWlucyI6NCwiLi9wdW55Y29kZSI6Nn1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7Ci8qISBodHRwczovL210aHMuYmUvcHVueWNvZGUgdjEuNC4wIGJ5IEBtYXRoaWFzICovCjsoZnVuY3Rpb24ocm9vdCkgewoKCS8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgKi8KCXZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiYKCQkhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzOwoJdmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJgoJCSFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlOwoJdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDsKCWlmICgKCQlmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fAoJCWZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8CgkJZnJlZUdsb2JhbC5zZWxmID09PSBmcmVlR2xvYmFsCgkpIHsKCQlyb290ID0gZnJlZUdsb2JhbDsKCX0KCgkvKioKCSAqIFRoZSBgcHVueWNvZGVgIG9iamVjdC4KCSAqIEBuYW1lIHB1bnljb2RlCgkgKiBAdHlwZSBPYmplY3QKCSAqLwoJdmFyIHB1bnljb2RlLAoKCS8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi8KCW1heEludCA9IDIxNDc0ODM2NDcsIC8vIGFrYS4gMHg3RkZGRkZGRiBvciAyXjMxLTEKCgkvKiogQm9vdHN0cmluZyBwYXJhbWV0ZXJzICovCgliYXNlID0gMzYsCgl0TWluID0gMSwKCXRNYXggPSAyNiwKCXNrZXcgPSAzOCwKCWRhbXAgPSA3MDAsCglpbml0aWFsQmlhcyA9IDcyLAoJaW5pdGlhbE4gPSAxMjgsIC8vIDB4ODAKCWRlbGltaXRlciA9ICctJywgLy8gJ1x4MkQnCgoJLyoqIFJlZ3VsYXIgZXhwcmVzc2lvbnMgKi8KCXJlZ2V4UHVueWNvZGUgPSAvXnhuLS0vLAoJcmVnZXhOb25BU0NJSSA9IC9bXlx4MjAtXHg3RV0vLCAvLyB1bnByaW50YWJsZSBBU0NJSSBjaGFycyArIG5vbi1BU0NJSSBjaGFycwoJcmVnZXhTZXBhcmF0b3JzID0gL1tceDJFXHUzMDAyXHVGRjBFXHVGRjYxXS9nLCAvLyBSRkMgMzQ5MCBzZXBhcmF0b3JzCgoJLyoqIEVycm9yIG1lc3NhZ2VzICovCgllcnJvcnMgPSB7CgkJJ292ZXJmbG93JzogJ092ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzJywKCQknbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLAoJCSdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnCgl9LAoKCS8qKiBDb252ZW5pZW5jZSBzaG9ydGN1dHMgKi8KCWJhc2VNaW51c1RNaW4gPSBiYXNlIC0gdE1pbiwKCWZsb29yID0gTWF0aC5mbG9vciwKCXN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUsCgoJLyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqLwoJa2V5OwoKCS8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKCS8qKgoJICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIGVycm9yIHR5cGUuCgkgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuCgkgKi8KCWZ1bmN0aW9uIGVycm9yKHR5cGUpIHsKCQl0aHJvdyBuZXcgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pOwoJfQoKCS8qKgoJICogQSBnZW5lcmljIGBBcnJheSNtYXBgIHV0aWxpdHkgZnVuY3Rpb24uCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci4KCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeSBhcnJheQoJICogaXRlbS4KCSAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi4KCSAqLwoJZnVuY3Rpb24gbWFwKGFycmF5LCBmbikgewoJCXZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7CgkJdmFyIHJlc3VsdCA9IFtdOwoJCXdoaWxlIChsZW5ndGgtLSkgewoJCQlyZXN1bHRbbGVuZ3RoXSA9IGZuKGFycmF5W2xlbmd0aF0pOwoJCX0KCQlyZXR1cm4gcmVzdWx0OwoJfQoKCS8qKgoJICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsCgkgKiBhZGRyZXNzZXMuCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy4KCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeQoJICogY2hhcmFjdGVyLgoJICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2sKCSAqIGZ1bmN0aW9uLgoJICovCglmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikgewoJCXZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpOwoJCXZhciByZXN1bHQgPSAnJzsKCQlpZiAocGFydHMubGVuZ3RoID4gMSkgewoJCQkvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlCgkJCS8vIHRoZSBsb2NhbCBwYXJ0IChpLmUuIGV2ZXJ5dGhpbmcgdXAgdG8gYEBgKSBpbnRhY3QuCgkJCXJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnOwoJCQlzdHJpbmcgPSBwYXJ0c1sxXTsKCQl9CgkJLy8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LgoJCXN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1x4MkUnKTsKCQl2YXIgbGFiZWxzID0gc3RyaW5nLnNwbGl0KCcuJyk7CgkJdmFyIGVuY29kZWQgPSBtYXAobGFiZWxzLCBmbikuam9pbignLicpOwoJCXJldHVybiByZXN1bHQgKyBlbmNvZGVkOwoJfQoKCS8qKgoJICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZQoJICogY2hhcmFjdGVyIGluIHRoZSBzdHJpbmcuIFdoaWxlIEphdmFTY3JpcHQgdXNlcyBVQ1MtMiBpbnRlcm5hbGx5LAoJICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2gKCSAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LAoJICogbWF0Y2hpbmcgVVRGLTE2LgoJICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgCgkgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyCgkgKiBAbmFtZSBkZWNvZGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuCgkgKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBuZXcgYXJyYXkgb2YgY29kZSBwb2ludHMuCgkgKi8KCWZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7CgkJdmFyIG91dHB1dCA9IFtdLAoJCSAgICBjb3VudGVyID0gMCwKCQkgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCwKCQkgICAgdmFsdWUsCgkJICAgIGV4dHJhOwoJCXdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7CgkJCXZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTsKCQkJaWYgKHZhbHVlID49IDB4RDgwMCAmJiB2YWx1ZSA8PSAweERCRkYgJiYgY291bnRlciA8IGxlbmd0aCkgewoJCQkJLy8gaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyCgkJCQlleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7CgkJCQlpZiAoKGV4dHJhICYgMHhGQzAwKSA9PSAweERDMDApIHsgLy8gbG93IHN1cnJvZ2F0ZQoJCQkJCW91dHB1dC5wdXNoKCgodmFsdWUgJiAweDNGRikgPDwgMTApICsgKGV4dHJhICYgMHgzRkYpICsgMHgxMDAwMCk7CgkJCQl9IGVsc2UgewoJCQkJCS8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0CgkJCQkJLy8gY29kZSB1bml0IGlzIHRoZSBoaWdoIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyCgkJCQkJb3V0cHV0LnB1c2godmFsdWUpOwoJCQkJCWNvdW50ZXItLTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCW91dHB1dC5wdXNoKHZhbHVlKTsKCQkJfQoJCX0KCQlyZXR1cm4gb3V0cHV0OwoJfQoKCS8qKgoJICogQ3JlYXRlcyBhIHN0cmluZyBiYXNlZCBvbiBhbiBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLgoJICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgCgkgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMgoJICogQG5hbWUgZW5jb2RlCgkgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLgoJICovCglmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7CgkJcmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJdmFyIG91dHB1dCA9ICcnOwoJCQlpZiAodmFsdWUgPiAweEZGRkYpIHsKCQkJCXZhbHVlIC09IDB4MTAwMDA7CgkJCQlvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTsKCQkJCXZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjsKCQkJfQoJCQlvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlKTsKCQkJcmV0dXJuIG91dHB1dDsKCQl9KS5qb2luKCcnKTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci4KCSAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS4KCSAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpbgoJICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpbiB0aGUgcmFuZ2UgYDBgIHRvIGBiYXNlIC0gMWAsIG9yIGBiYXNlYCBpZgoJICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuCgkgKi8KCWZ1bmN0aW9uIGJhc2ljVG9EaWdpdChjb2RlUG9pbnQpIHsKCQlpZiAoY29kZVBvaW50IC0gNDggPCAxMCkgewoJCQlyZXR1cm4gY29kZVBvaW50IC0gMjI7CgkJfQoJCWlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7CgkJCXJldHVybiBjb2RlUG9pbnQgLSA2NTsKCQl9CgkJaWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHsKCQkJcmV0dXJuIGNvZGVQb2ludCAtIDk3OwoJCX0KCQlyZXR1cm4gYmFzZTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC4KCSAqIEBzZWUgYGJhc2ljVG9EaWdpdCgpYAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuCgkgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYmFzaWMgY29kZSBwb2ludCB3aG9zZSB2YWx1ZSAod2hlbiB1c2VkIGZvcgoJICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpcyBgZGlnaXRgLCB3aGljaCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2UKCSAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpcwoJICogdXNlZDsgZWxzZSwgdGhlIGxvd2VyY2FzZSBmb3JtIGlzIHVzZWQuIFRoZSBiZWhhdmlvciBpcyB1bmRlZmluZWQKCSAqIGlmIGBmbGFnYCBpcyBub24temVybyBhbmQgYGRpZ2l0YCBoYXMgbm8gdXBwZXJjYXNlIGZvcm0uCgkgKi8KCWZ1bmN0aW9uIGRpZ2l0VG9CYXNpYyhkaWdpdCwgZmxhZykgewoJCS8vICAwLi4yNSBtYXAgdG8gQVNDSUkgYS4ueiBvciBBLi5aCgkJLy8gMjYuLjM1IG1hcCB0byBBU0NJSSAwLi45CgkJcmV0dXJuIGRpZ2l0ICsgMjIgKyA3NSAqIChkaWdpdCA8IDI2KSAtICgoZmxhZyAhPSAwKSA8PCA1KTsKCX0KCgkvKioKCSAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuCgkgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzQ5MiNzZWN0aW9uLTMuNAoJICogQHByaXZhdGUKCSAqLwoJZnVuY3Rpb24gYWRhcHQoZGVsdGEsIG51bVBvaW50cywgZmlyc3RUaW1lKSB7CgkJdmFyIGsgPSAwOwoJCWRlbHRhID0gZmlyc3RUaW1lID8gZmxvb3IoZGVsdGEgLyBkYW1wKSA6IGRlbHRhID4+IDE7CgkJZGVsdGEgKz0gZmxvb3IoZGVsdGEgLyBudW1Qb2ludHMpOwoJCWZvciAoLyogbm8gaW5pdGlhbGl6YXRpb24gKi87IGRlbHRhID4gYmFzZU1pbnVzVE1pbiAqIHRNYXggPj4gMTsgayArPSBiYXNlKSB7CgkJCWRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTsKCQl9CgkJcmV0dXJuIGZsb29yKGsgKyAoYmFzZU1pbnVzVE1pbiArIDEpICogZGVsdGEgLyAoZGVsdGEgKyBza2V3KSk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZQoJICogc3ltYm9scy4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLgoJICovCglmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHsKCQkvLyBEb24ndCB1c2UgVUNTLTIKCQl2YXIgb3V0cHV0ID0gW10sCgkJICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLAoJCSAgICBvdXQsCgkJICAgIGkgPSAwLAoJCSAgICBuID0gaW5pdGlhbE4sCgkJICAgIGJpYXMgPSBpbml0aWFsQmlhcywKCQkgICAgYmFzaWMsCgkJICAgIGosCgkJICAgIGluZGV4LAoJCSAgICBvbGRpLAoJCSAgICB3LAoJCSAgICBrLAoJCSAgICBkaWdpdCwKCQkgICAgdCwKCQkgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovCgkJICAgIGJhc2VNaW51c1Q7CgoJCS8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHM6IGxldCBgYmFzaWNgIGJlIHRoZSBudW1iZXIgb2YgaW5wdXQgY29kZQoJCS8vIHBvaW50cyBiZWZvcmUgdGhlIGxhc3QgZGVsaW1pdGVyLCBvciBgMGAgaWYgdGhlcmUgaXMgbm9uZSwgdGhlbiBjb3B5CgkJLy8gdGhlIGZpcnN0IGJhc2ljIGNvZGUgcG9pbnRzIHRvIHRoZSBvdXRwdXQuCgoJCWJhc2ljID0gaW5wdXQubGFzdEluZGV4T2YoZGVsaW1pdGVyKTsKCQlpZiAoYmFzaWMgPCAwKSB7CgkJCWJhc2ljID0gMDsKCQl9CgoJCWZvciAoaiA9IDA7IGogPCBiYXNpYzsgKytqKSB7CgkJCS8vIGlmIGl0J3Mgbm90IGEgYmFzaWMgY29kZSBwb2ludAoJCQlpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7CgkJCQllcnJvcignbm90LWJhc2ljJyk7CgkJCX0KCQkJb3V0cHV0LnB1c2goaW5wdXQuY2hhckNvZGVBdChqKSk7CgkJfQoKCQkvLyBNYWluIGRlY29kaW5nIGxvb3A6IHN0YXJ0IGp1c3QgYWZ0ZXIgdGhlIGxhc3QgZGVsaW1pdGVyIGlmIGFueSBiYXNpYyBjb2RlCgkJLy8gcG9pbnRzIHdlcmUgY29waWVkOyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nIG90aGVyd2lzZS4KCgkJZm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHsKCgkJCS8vIGBpbmRleGAgaXMgdGhlIGluZGV4IG9mIHRoZSBuZXh0IGNoYXJhY3RlciB0byBiZSBjb25zdW1lZC4KCQkJLy8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLAoJCQkvLyB3aGljaCBnZXRzIGFkZGVkIHRvIGBpYC4gVGhlIG92ZXJmbG93IGNoZWNraW5nIGlzIGVhc2llcgoJCQkvLyBpZiB3ZSBpbmNyZWFzZSBgaWAgYXMgd2UgZ28sIHRoZW4gc3VidHJhY3Qgb2ZmIGl0cyBzdGFydGluZwoJCQkvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLgoJCQlmb3IgKG9sZGkgPSBpLCB3ID0gMSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7CgoJCQkJaWYgKGluZGV4ID49IGlucHV0TGVuZ3RoKSB7CgkJCQkJZXJyb3IoJ2ludmFsaWQtaW5wdXQnKTsKCQkJCX0KCgkJCQlkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTsKCgkJCQlpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7CgkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQl9CgoJCQkJaSArPSBkaWdpdCAqIHc7CgkJCQl0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTsKCgkJCQlpZiAoZGlnaXQgPCB0KSB7CgkJCQkJYnJlYWs7CgkJCQl9CgoJCQkJYmFzZU1pbnVzVCA9IGJhc2UgLSB0OwoJCQkJaWYgKHcgPiBmbG9vcihtYXhJbnQgLyBiYXNlTWludXNUKSkgewoJCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQkJfQoKCQkJCXcgKj0gYmFzZU1pbnVzVDsKCgkJCX0KCgkJCW91dCA9IG91dHB1dC5sZW5ndGggKyAxOwoJCQliaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTsKCgkJCS8vIGBpYCB3YXMgc3VwcG9zZWQgdG8gd3JhcCBhcm91bmQgZnJvbSBgb3V0YCB0byBgMGAsCgkJCS8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6CgkJCWlmIChmbG9vcihpIC8gb3V0KSA+IG1heEludCAtIG4pIHsKCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQl9CgoJCQluICs9IGZsb29yKGkgLyBvdXQpOwoJCQlpICU9IG91dDsKCgkJCS8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXQKCQkJb3V0cHV0LnNwbGljZShpKyssIDAsIG4pOwoKCQl9CgoJCXJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMgKGUuZy4gYSBkb21haW4gbmFtZSBsYWJlbCkgdG8gYQoJICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLgoJICovCglmdW5jdGlvbiBlbmNvZGUoaW5wdXQpIHsKCQl2YXIgbiwKCQkgICAgZGVsdGEsCgkJICAgIGhhbmRsZWRDUENvdW50LAoJCSAgICBiYXNpY0xlbmd0aCwKCQkgICAgYmlhcywKCQkgICAgaiwKCQkgICAgbSwKCQkgICAgcSwKCQkgICAgaywKCQkgICAgdCwKCQkgICAgY3VycmVudFZhbHVlLAoJCSAgICBvdXRwdXQgPSBbXSwKCQkgICAgLyoqIGBpbnB1dExlbmd0aGAgd2lsbCBob2xkIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgaW4gYGlucHV0YC4gKi8KCQkgICAgaW5wdXRMZW5ndGgsCgkJICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqLwoJCSAgICBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsCgkJICAgIGJhc2VNaW51c1QsCgkJICAgIHFNaW51c1Q7CgoJCS8vIENvbnZlcnQgdGhlIGlucHV0IGluIFVDUy0yIHRvIFVuaWNvZGUKCQlpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpOwoKCQkvLyBDYWNoZSB0aGUgbGVuZ3RoCgkJaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7CgoJCS8vIEluaXRpYWxpemUgdGhlIHN0YXRlCgkJbiA9IGluaXRpYWxOOwoJCWRlbHRhID0gMDsKCQliaWFzID0gaW5pdGlhbEJpYXM7CgoJCS8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHMKCQlmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikgewoJCQljdXJyZW50VmFsdWUgPSBpbnB1dFtqXTsKCQkJaWYgKGN1cnJlbnRWYWx1ZSA8IDB4ODApIHsKCQkJCW91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTsKCQkJfQoJCX0KCgkJaGFuZGxlZENQQ291bnQgPSBiYXNpY0xlbmd0aCA9IG91dHB1dC5sZW5ndGg7CgoJCS8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkOwoJCS8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy4KCgkJLy8gRmluaXNoIHRoZSBiYXNpYyBzdHJpbmcgLSBpZiBpdCBpcyBub3QgZW1wdHkgLSB3aXRoIGEgZGVsaW1pdGVyCgkJaWYgKGJhc2ljTGVuZ3RoKSB7CgkJCW91dHB1dC5wdXNoKGRlbGltaXRlcik7CgkJfQoKCQkvLyBNYWluIGVuY29kaW5nIGxvb3A6CgkJd2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHsKCgkJCS8vIEFsbCBub24tYmFzaWMgY29kZSBwb2ludHMgPCBuIGhhdmUgYmVlbiBoYW5kbGVkIGFscmVhZHkuIEZpbmQgdGhlIG5leHQKCQkJLy8gbGFyZ2VyIG9uZToKCQkJZm9yIChtID0gbWF4SW50LCBqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHsKCQkJCWN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdOwoJCQkJaWYgKGN1cnJlbnRWYWx1ZSA+PSBuICYmIGN1cnJlbnRWYWx1ZSA8IG0pIHsKCQkJCQltID0gY3VycmVudFZhbHVlOwoJCQkJfQoJCQl9CgoJCQkvLyBJbmNyZWFzZSBgZGVsdGFgIGVub3VnaCB0byBhZHZhbmNlIHRoZSBkZWNvZGVyJ3MgPG4saT4gc3RhdGUgdG8gPG0sMD4sCgkJCS8vIGJ1dCBndWFyZCBhZ2FpbnN0IG92ZXJmbG93CgkJCWhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTsKCQkJaWYgKG0gLSBuID4gZmxvb3IoKG1heEludCAtIGRlbHRhKSAvIGhhbmRsZWRDUENvdW50UGx1c09uZSkpIHsKCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQl9CgoJCQlkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lOwoJCQluID0gbTsKCgkJCWZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7CgkJCQljdXJyZW50VmFsdWUgPSBpbnB1dFtqXTsKCgkJCQlpZiAoY3VycmVudFZhbHVlIDwgbiAmJiArK2RlbHRhID4gbWF4SW50KSB7CgkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQl9CgoJCQkJaWYgKGN1cnJlbnRWYWx1ZSA9PSBuKSB7CgkJCQkJLy8gUmVwcmVzZW50IGRlbHRhIGFzIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIKCQkJCQlmb3IgKHEgPSBkZWx0YSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7CgkJCQkJCXQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpOwoJCQkJCQlpZiAocSA8IHQpIHsKCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJCXFNaW51c1QgPSBxIC0gdDsKCQkJCQkJYmFzZU1pbnVzVCA9IGJhc2UgLSB0OwoJCQkJCQlvdXRwdXQucHVzaCgKCQkJCQkJCXN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNULCAwKSkKCQkJCQkJKTsKCQkJCQkJcSA9IGZsb29yKHFNaW51c1QgLyBiYXNlTWludXNUKTsKCQkJCQl9CgoJCQkJCW91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSwgMCkpKTsKCQkJCQliaWFzID0gYWRhcHQoZGVsdGEsIGhhbmRsZWRDUENvdW50UGx1c09uZSwgaGFuZGxlZENQQ291bnQgPT0gYmFzaWNMZW5ndGgpOwoJCQkJCWRlbHRhID0gMDsKCQkJCQkrK2hhbmRsZWRDUENvdW50OwoJCQkJfQoJCQl9CgoJCQkrK2RlbHRhOwoJCQkrK247CgoJCX0KCQlyZXR1cm4gb3V0cHV0LmpvaW4oJycpOwoJfQoKCS8qKgoJICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzcwoJICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLgoJICogaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgb24gYSBzdHJpbmcgdGhhdCBoYXMgYWxyZWFkeSBiZWVuCgkgKiBjb252ZXJ0ZWQgdG8gVW5pY29kZS4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZWQgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0bwoJICogY29udmVydCB0byBVbmljb2RlLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlCgkgKiBzdHJpbmcuCgkgKi8KCWZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkgewoJCXJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykgewoJCQlyZXR1cm4gcmVnZXhQdW55Y29kZS50ZXN0KHN0cmluZykKCQkJCT8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKQoJCQkJOiBzdHJpbmc7CgkJfSk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG8KCSAqIFB1bnljb2RlLiBPbmx5IHRoZSBub24tQVNDSUkgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHdpbGwgYmUgY29udmVydGVkLAoJICogaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQncyBhbHJlYWR5IGluCgkgKiBBU0NJSS4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvIGNvbnZlcnQsIGFzIGEKCSAqIFVuaWNvZGUgc3RyaW5nLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIFB1bnljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBkb21haW4gbmFtZSBvcgoJICogZW1haWwgYWRkcmVzcy4KCSAqLwoJZnVuY3Rpb24gdG9BU0NJSShpbnB1dCkgewoJCXJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykgewoJCQlyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZykKCQkJCT8gJ3huLS0nICsgZW5jb2RlKHN0cmluZykKCQkJCTogc3RyaW5nOwoJCX0pOwoJfQoKCS8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKCS8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi8KCXB1bnljb2RlID0gewoJCS8qKgoJCSAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBQdW55Y29kZS5qcyB2ZXJzaW9uIG51bWJlci4KCQkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCQkgKiBAdHlwZSBTdHJpbmcKCQkgKi8KCQkndmVyc2lvbic6ICcxLjMuMicsCgkJLyoqCgkJICogQW4gb2JqZWN0IG9mIG1ldGhvZHMgdG8gY29udmVydCBmcm9tIEphdmFTY3JpcHQncyBpbnRlcm5hbCBjaGFyYWN0ZXIKCQkgKiByZXByZXNlbnRhdGlvbiAoVUNTLTIpIHRvIFVuaWNvZGUgY29kZSBwb2ludHMsIGFuZCBiYWNrLgoJCSAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPgoJCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJCSAqIEB0eXBlIE9iamVjdAoJCSAqLwoJCSd1Y3MyJzogewoJCQknZGVjb2RlJzogdWNzMmRlY29kZSwKCQkJJ2VuY29kZSc6IHVjczJlbmNvZGUKCQl9LAoJCSdkZWNvZGUnOiBkZWNvZGUsCgkJJ2VuY29kZSc6IGVuY29kZSwKCQkndG9BU0NJSSc6IHRvQVNDSUksCgkJJ3RvVW5pY29kZSc6IHRvVW5pY29kZQoJfTsKCgkvKiogRXhwb3NlIGBwdW55Y29kZWAgKi8KCS8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMsIGxpa2Ugci5qcywgY2hlY2sgZm9yIHNwZWNpZmljIGNvbmRpdGlvbiBwYXR0ZXJucwoJLy8gbGlrZSB0aGUgZm9sbG93aW5nOgoJaWYgKAoJCXR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJgoJCXR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmCgkJZGVmaW5lLmFtZAoJKSB7CgkJZGVmaW5lKCdwdW55Y29kZScsIGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gcHVueWNvZGU7CgkJfSk7Cgl9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHsKCQlpZiAobW9kdWxlLmV4cG9ydHMgPT0gZnJlZUV4cG9ydHMpIHsKCQkJLy8gaW4gTm9kZS5qcywgaW8uanMsIG9yIFJpbmdvSlMgdjAuOC4wKwoJCQlmcmVlTW9kdWxlLmV4cG9ydHMgPSBwdW55Y29kZTsKCQl9IGVsc2UgewoJCQkvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLQoJCQlmb3IgKGtleSBpbiBwdW55Y29kZSkgewoJCQkJcHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pOwoJCQl9CgkJfQoJfSBlbHNlIHsKCQkvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyCgkJcm9vdC5wdW55Y29kZSA9IHB1bnljb2RlOwoJfQoKfSh0aGlzKSk7Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gYWN0aXZhdGU7Cgp2YXIgX0h5cGVydHlEaXNjb3ZlcnkgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0h5cGVydHlEaXNjb3ZlcnknKTsKCnZhciBfSHlwZXJ0eURpc2NvdmVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9IeXBlcnR5RGlzY292ZXJ5KTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIF9FdmVudEVtaXR0ZXIyID0gcmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRFbWl0dGVyLmpzJyk7Cgp2YXIgX0V2ZW50RW1pdHRlcjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FdmVudEVtaXR0ZXIyKTsKCnZhciBfdXJpanMgPSByZXF1aXJlKCd1cmlqcycpOwoKdmFyIF91cmlqczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91cmlqcyk7Cgp2YXIgX2F2YWlsYWJpbGl0eSA9IHJlcXVpcmUoJy4vYXZhaWxhYmlsaXR5LmpzJyk7Cgp2YXIgX2F2YWlsYWJpbGl0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdmFpbGFiaWxpdHkpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKioKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KCi8vIFNlcnZpY2UgRnJhbWV3b3JrCgoKLy8gVXRpbHMKCi8vIGltcG9ydCB7ZGl2aWRlVVJMfSBmcm9tICcuLi91dGlscy91dGlscy5qcyc7CgoKLyoqCiogSHlwZXJ0eSBQcmVzZW5jZTsKKiBAYXV0aG9yIEFwaXplZSBbZGV2QGFwaXplZS5jb21dCiogQHZlcnNpb24gMC4xLjAKKi8KCnZhciBVc2VyU3RhdHVzID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoVXNlclN0YXR1cywgX0V2ZW50RW1pdHRlcik7CgogIGZ1bmN0aW9uIFVzZXJTdGF0dXMoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXNlclN0YXR1cyk7CgogICAgaWYgKCFoeXBlcnR5VVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBoeXBlcnR5VVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFidXMpIHRocm93IG5ldyBFcnJvcignVGhlIE1pbmlCdXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgogICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKFVzZXJTdGF0dXMpLmNhbGwodGhpcywgaHlwZXJ0eVVSTCwgYnVzLCBjb25maWd1cmF0aW9uKSk7CgogICAgX3RoaXMuX3N5bmNoZXIgPSBuZXcgX1N5bmNoZXIuU3luY2hlcihoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pOwoKICAgIF90aGlzLl9oeXBlcnR5RGlzY292ZXJ5ID0gbmV3IF9IeXBlcnR5RGlzY292ZXJ5Mi5kZWZhdWx0KGh5cGVydHlVUkwsIGJ1cyk7CgogICAgX3RoaXMuX3VzZXJTdGF0dXNEZXNjVVJMID0gJ2h5cGVydHktY2F0YWxvZ3VlOi8vJyArIG5ldyBfdXJpanMyLmRlZmF1bHQoaHlwZXJ0eVVSTCkuaG9zdG5hbWUoKSArICcvLndlbGwta25vd24vZGF0YXNjaGVtYXMvQ29udGV4dCc7CgogICAgX3RoaXMuX2hlYXJ0YmVhdCA9IFtdOwoKICAgIF90aGlzLl9zeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uIChldmVudCkgewogICAgICBfdGhpcy5fb25Ob3RpZmljYXRpb24oZXZlbnQpOwogICAgfSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVXNlclN0YXR1cywgW3sKICAgIGtleTogJ19vbk5vdGlmaWNhdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTm90aWZpY2F0aW9uKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29uc29sZS5pbmZvKCdVc2VyU3RhdHVzIEV2ZW50IFJlY2VpdmVkOiAnLCBldmVudCk7CiAgICAgIGNvbnNvbGUubG9nKCdmcm9tIGh5cGVydHknLCBldmVudC5mcm9tKTsKCiAgICAgIGV2ZW50LmFjaygpOwoKICAgICAgaWYgKGV2ZW50LnNjaGVtYSA9PT0gdGhpcy5fdXNlclN0YXR1c0Rlc2NVUkwpIHsKICAgICAgICAvLyBTdWJzY3JpYmUgdG8gdXNlciBzdGF0dXMgcHJlc2VuY2UKICAgICAgICB0aGlzLl9zeW5jaGVyLnN1YnNjcmliZSh0aGlzLl91c2VyU3RhdHVzRGVzY1VSTCwgZXZlbnQudXJsKS50aGVuKGZ1bmN0aW9uIChzdGF0dXNPYmplY3RPYnNlcnZlcikgewogICAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLSBTdGF0dXMgT2JzZXJ2ZXIgcmVjZWl2ZWQgLS0tLS0tLS0tJywgc3RhdHVzT2JqZWN0T2JzZXJ2ZXIpOwogICAgICAgICAgY29uc29sZS5sb2coJ3RyaWdnZXIgc3RhdHVzQ2hhbmdlIGZvcicsIGV2ZW50LmlkZW50aXR5KTsKICAgICAgICAgIF90aGlzMi50cmlnZ2VyKCdzdGF0dXNDaGFuZ2UnLCB7CiAgICAgICAgICAgIGlkZW50aXR5OiBldmVudC5pZGVudGl0eSwKICAgICAgICAgICAgc3RhdHVzOiBfdGhpczIuZ2V0U3RhdHVzKHN0YXR1c09iamVjdE9ic2VydmVyKQogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMyLl9tYW5hZ2VQcmVzZW5jZUhlYXJ0YmVhdChldmVudC5pZGVudGl0eSk7CgogICAgICAgICAgc3RhdHVzT2JqZWN0T2JzZXJ2ZXIub25DaGFuZ2UoJyonLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnc3RhdHVzIGV2ZW50IHJlY2VpdmVkOicsIGV2ZW50KTsKICAgICAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ3N0YXR1c0NoYW5nZScsIHsKICAgICAgICAgICAgICBpZGVudGl0eTogZXZlbnQuaWRlbnRpdHksCiAgICAgICAgICAgICAgc3RhdHVzOiBfdGhpczIuZ2V0U3RhdHVzKHN0YXR1c09iamVjdE9ic2VydmVyKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXMyLl9tYW5hZ2VQcmVzZW5jZUhlYXJ0YmVhdChldmVudC5pZGVudGl0eSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBjb25zb2xlLmxvZyhldmVudC5pZGVudGl0eS5lbWFpbCwgJ2hhcyBzdWJzY3JpYmUgdG8gbXkgc3RhdHVzIGRhdGEgb2JqZWN0LCBzZW5kIGludml0ZSB0byBsaXN0ZW4gbWluZScpOwogICAgICAgICAgX3RoaXMyLl9zdGF0dXNPYmplY3RSZXBvcnRlci5pbnZpdGVPYnNlcnZlcnMoW2V2ZW50LmZyb21dKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBjcmVhdGUgYSBuZXcgc3RhdHVzIG9iamVjdCBzeW5jaGVyCiAgICAgKiBAcGFyYW0gIHtVUkwuVXNlclVSTH0gcGFydGljaXBhbnRzIExpc3Qgb2YgVXNlciBhbGxvd2VkCiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2NyZWF0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKHBhcnRpY2lwYW50cykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBNYXBwaW5nIFBhcnRpY3BhbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7CiAgICAgICAgX3RoaXMzLl9tYXBwaW5nVXNlcihwYXJ0aWNpcGFudHMpLnRoZW4oZnVuY3Rpb24gKGh5cGVydGllcykgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5jcmVhdGVTeW5jaGVyKGh5cGVydGllcywgKDAsIF9hdmFpbGFiaWxpdHkyLmRlZmF1bHQpKCkpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN0YXR1c09iamVjdFJlcG9ydGVyKSB7CiAgICAgICAgICBfdGhpczMuX3N0YXR1c09iamVjdFJlcG9ydGVyID0gc3RhdHVzT2JqZWN0UmVwb3J0ZXI7CgogICAgICAgICAgX3RoaXMzLl9zdGF0dXNPYmplY3RSZXBvcnRlci5vblN1YnNjcmlwdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLSBTdGF0dXMgUmVwb3J0ZXIgcmVjZWl2ZWQgc3Vic2NyaXB0aW9uIHJlcXVlc3QgLS0tLS0tLS0tJywgZXZlbnQpOwogICAgICAgICAgICBldmVudC5hY2NlcHQoKTsKICAgICAgICAgICAgaWYgKGV2ZW50LnVybCA9PT0gX3RoaXMzLl9zdGF0dXNPYmplY3RSZXBvcnRlci5fb3duZXIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGVmaW5lIG15IG93biBwcmVzZW5jZSBzdGF0ZSB0byBhdmFpbGFibGUnKTsKICAgICAgICAgICAgICBfdGhpczMuc2V0U3RhdHVzKCdhdmFpbGFibGUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gc2V0IGludGVydmFsIGZvciBoZWFydGJlYXQKICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMzLl9zZW5kSGVhcnRiZWF0KCk7CiAgICAgICAgICB9LCA1MDAwMCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2NyZWF0ZVN5bmNoZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVN5bmNoZXIoaHlwZXJ0aWVzLCBzdGF0dXMpIHsKICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU3luY2hlciBDcmVhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScsIGh5cGVydGllcywgc3RhdHVzKTsKICAgICAgcmV0dXJuIHRoaXMuX3N5bmNoZXIuY3JlYXRlKHRoaXMuX3VzZXJTdGF0dXNEZXNjVVJMLCBoeXBlcnRpZXMsIHN0YXR1cyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnam9pbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gam9pbihyZXNvdXJjZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFN5bmNoZXIgc3Vic2NyaWJlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTsKCiAgICAgICAgX3RoaXM0Ll9zeW5jaGVyLnN1YnNjcmliZShfdGhpczQuX3VzZXJTdGF0dXNEZXNjVVJMLCByZXNvdXJjZSkudGhlbihmdW5jdGlvbiAoZGF0YU9iamVjdE9ic2VydmVyKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ0RhdGEgT2JqZWN0IE9ic2VydmVyOiAnLCBkYXRhT2JqZWN0T2JzZXJ2ZXIpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdnZXRTdGF0dXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0YXR1cyhzdGF0dXNPYnNlcnZlcikgewogICAgICB2YXIgc3RhdGUgPSBmYWxzZTsKICAgICAgaWYgKHR5cGVvZiBzdGF0dXNPYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBjb25zb2xlLmxvZygnZ2V0U3RhdHVzIGZyb20gb2JzZXJ2ZXI6Jywgc3RhdHVzT2JzZXJ2ZXIuZGF0YS52YWx1ZXNbMF0udmFsdWUpOwogICAgICAgIHJldHVybiBzdGF0dXNPYnNlcnZlci5kYXRhLnZhbHVlc1swXS52YWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnZ2V0U3RhdHVzIGZyb20gcmVwb3J0ZXI6JywgdGhpcy5fc3RhdHVzT2JqZWN0UmVwb3J0ZXIuZGF0YS52YWx1ZXNbMF0udmFsdWUpOwogICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNPYmplY3RSZXBvcnRlci5kYXRhLnZhbHVlc1swXS52YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gc3RhdGU7CiAgICB9CiAgfSwgewogICAga2V5OiAnc2V0U3RhdHVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTdGF0dXMobmV3U3RhdHVzKSB7CiAgICAgIGNvbnNvbGUubG9nKCdzZXRTdGF0dXMnLCBuZXdTdGF0dXMsICdpbiByZXBvcnRlcicsIHRoaXMuX3N0YXR1c09iamVjdFJlcG9ydGVyLmRhdGEpOwogICAgICB0aGlzLl9zdGF0dXNPYmplY3RSZXBvcnRlci5kYXRhLnZhbHVlc1swXS52YWx1ZSA9IG5ld1N0YXR1czsKICAgICAgdGhpcy5fc3RhdHVzT2JqZWN0UmVwb3J0ZXIuZGF0YS50aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVcGRhdGUgc3RhdHVzIG9iamVjdCBkYXRlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnX3NlbmRIZWFydGJlYXQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kSGVhcnRiZWF0KCkgewogICAgICBjb25zb2xlLmxvZygnc2VuZCBoZWFydGJlYXQnKTsKICAgICAgdGhpcy5fc3RhdHVzT2JqZWN0UmVwb3J0ZXIuZGF0YS50aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBNb25pdG9yIHVzZXIgYWN0aXZpdHkgd2l0aGluIGhlYXJ0YmVhdCB0aW1lb3V0IHBlcmlvZAogICAgICovCgogIH0sIHsKICAgIGtleTogJ19tYW5hZ2VQcmVzZW5jZUhlYXJ0YmVhdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21hbmFnZVByZXNlbmNlSGVhcnRiZWF0KGlkZW50aXR5KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coJ3JlbmV3IGhlYXJ0YmVhdCBwZXJpb2QgZm9yJywgaWRlbnRpdHkpOwogICAgICB2YXIgZW1haWwgPSBpZGVudGl0eS5lbWFpbDsKICAgICAgaWYgKGVtYWlsIGluIHRoaXMuX2hlYXJ0YmVhdCkgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9oZWFydGJlYXRbZW1haWxdKTsKICAgICAgfQogICAgICB0aGlzLl9oZWFydGJlYXRbZW1haWxdID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coZW1haWwsICdoYXMgZGlzY29ubmVjdCcpOwogICAgICAgIGNsZWFyVGltZW91dChfdGhpczUuX2hlYXJ0YmVhdFtlbWFpbF0pOwogICAgICAgIF90aGlzNS50cmlnZ2VyKCdzdGF0dXNDaGFuZ2UnLCB7CiAgICAgICAgICBpZGVudGl0eTogaWRlbnRpdHksCiAgICAgICAgICBzdGF0dXM6ICd1bmF2YWlsYWJsZScKICAgICAgICB9KTsKICAgICAgfSwgNjAwMDApOwogICAgfQogIH0sIHsKICAgIGtleTogJ19tYXBwaW5nVXNlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21hcHBpbmdVc2VyKHVzZXJMaXN0KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gX21hcHBpbmdVc2VyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nLCB1c2VyTGlzdCk7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBoeXBlcnRpZXMgPSBbXTsKICAgICAgICB2YXIgY291bnQgPSAwOwoKICAgICAgICBpZiAodXNlckxpc3QubGVuZ3RoID09PSAwKSByZWplY3QoaHlwZXJ0aWVzKTsKCiAgICAgICAgdmFyIHJlc3VsdFVzZXJzID0gZnVuY3Rpb24gcmVzdWx0VXNlcnMoKSB7CiAgICAgICAgICBpZiAoY291bnQgPT09IHVzZXJMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICBjb25zb2xlLmluZm8oJ0hhdmUgJyArIGh5cGVydGllcy5sZW5ndGggKyAndXNlcnMgZm91bmQ7Jyk7CiAgICAgICAgICAgIHJlc29sdmUoaHlwZXJ0aWVzKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2YXIgYWN0aXZlVXNlcnMgPSBmdW5jdGlvbiBhY3RpdmVVc2Vycyh1c2VyKSB7CiAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgaHlwZXJ0aWVzLnB1c2godXNlci5oeXBlcnR5VVJMKTsKICAgICAgICAgIHJlc3VsdFVzZXJzKCk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGluYWN0aXZlVXNlcnMgPSBmdW5jdGlvbiBpbmFjdGl2ZVVzZXJzKCkgewogICAgICAgICAgY291bnQrKzsKICAgICAgICAgIHJlc3VsdFVzZXJzKCk7CiAgICAgICAgfTsKCiAgICAgICAgdXNlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgY29uc29sZS5sb2codXNlcik7CiAgICAgICAgICBpZiAodXNlci5lbWFpbC5sZW5ndGgpIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gX21hcHBpbmdVc2VyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nLCB1c2VyTGlzdCk7CiAgICAgICAgICAgIHJldHVybiBfdGhpczYuX2h5cGVydHlEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnR5UGVyVXNlcih1c2VyLmVtYWlsLCB1c2VyLmRvbWFpbikudGhlbihhY3RpdmVVc2VycykuY2F0Y2goaW5hY3RpdmVVc2Vycyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFVzZXJTdGF0dXM7Cn0oX0V2ZW50RW1pdHRlcjMuZGVmYXVsdCk7CgpmdW5jdGlvbiBhY3RpdmF0ZShoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pIHsKCiAgcmV0dXJuIHsKICAgIG5hbWU6ICdVc2VyU3RhdHVzJywKICAgIGluc3RhbmNlOiBuZXcgVXNlclN0YXR1cyhoeXBlcnR5VVJMLCBidXMsIGNvbmZpZ3VyYXRpb24pCiAgfTsKfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy9FdmVudEVtaXR0ZXIuanMiOjksIi4vYXZhaWxhYmlsaXR5LmpzIjo4LCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L0h5cGVydHlEaXNjb3ZlcnkiOjEsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlciI6MiwidXJpanMiOjV9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgewogICAgICAgIHNjaGVtYTogImNvbnRleHQiLAogICAgICAgIGlkOiAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSksCiAgICAgICAgdHlwZTogInByZXNlbmNlIiwKICAgICAgICB0aW1lOiAiMCIsCiAgICAgICAgdmFsdWVzOiBbewogICAgICAgICAgICBuYW1lOiAiYXZhaWxhYmlsaXR5IiwKICAgICAgICAgICAgdW5pdDogImF2YWlsYWJpbGl0eSIsCiAgICAgICAgICAgIHZhbHVlOiAidW5hdmFpbGFibGUiCiAgICAgICAgfV0KICAgIH0pOwp9OwoKOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKICogRXZlbnRFbWl0dGVyCiAqIEFsbCBjbGFzc2VzIHdoaWNoIGV4dGVuZHMgdGhpcywgY2FuIGhhdmUgYWRkRXZlbnRMaXN0ZW5lciBhbmQgdHJpZ2dlciBldmVudHM7CiAqLwoKdmFyIEV2ZW50RW1pdHRlciA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRFbWl0dGVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhFdmVudEVtaXR0ZXIsIFt7CiAgICBrZXk6ICJhZGRFdmVudExpc3RlbmVyIiwKCgogICAgLyoqCiAgICAgKiBhZGRFdmVudExpc3RlbmVyIGxpc3RlbiBmb3IgYW4gZXZlbnRUeXBlCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgZXZlbnRUeXBlIC0gbGlzdGVuaW5nIGZvciB0aGlzIHR5cGUgb2YgZXZlbnQKICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgICBjYiAgICAgICAgLSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGV2ZW50IGl0IGlzIGludm9rZWQKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpc1tldmVudFR5cGVdID0gY2I7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnZva2UgdGhlIGV2ZW50VHlwZQogICAgICogQHBhcmFtICB7c3RyaW5nfSBldmVudFR5cGUgLSBldmVudCB3aWxsIGJlIGludm9rZWQKICAgICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zIC0gcGFyYW1ldGVycyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYWRkRXZlbnRMaXN0ZW5lcgogICAgICovCgogIH0sIHsKICAgIGtleTogInRyaWdnZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnRUeXBlLCBwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpc1tldmVudFR5cGVdKSB7CiAgICAgICAgX3RoaXNbZXZlbnRUeXBlXShwYXJhbXMpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRXZlbnRFbWl0dGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBFdmVudEVtaXR0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV19LHt9LFs3XSkoNykKfSk7",
      "sourceCodeClassname": "UserStatus",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10010,
    "version": "0.1",
    "description": "Description of UserStatus",
    "objectName": "UserStatus",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "hypertyType": []
  },
  "NotificationObserver": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBTeW5jaGVyLmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBUaHUgSnVuIDA5IDIwMTYgMTI6Mjg6MjQgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuU3luY2hlcj1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQscixuKXtmdW5jdGlvbiBvKHMsYSl7aWYoIXJbc10pe2lmKCF0W3NdKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmYylyZXR1cm4gYyhzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciB1PW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyB1LmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLHV9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgcj10W3NdWzFdW2VdO3JldHVybiBvKHI/cjplKX0sbCxsLmV4cG9ydHMsZSx0LHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7T2JqZWN0Lm9ic2VydmUmJiFBcnJheS5vYnNlcnZlJiZmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1lLmdldE5vdGlmaWVyLG49InBlcmZvcm1DaGFuZ2UiLG89Il9vcmlnaW5hbCIsaT0ic3BsaWNlIixzPXtwdXNoOmZ1bmN0aW9uIGMoZSl7dmFyIHQ9YXJndW1lbnRzLHM9Y1tvXS5hcHBseSh0aGlzLHQpO3JldHVybiByKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6cy10Lmxlbmd0aCxhZGRlZENvdW50OnQubGVuZ3RoLHJlbW92ZWQ6W119fSksc30sdW5zaGlmdDpmdW5jdGlvbiB1KGUpe3ZhciB0PWFyZ3VtZW50cyxzPXVbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHBvcDpmdW5jdGlvbiBsKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1sW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmcih0aGlzKVtuXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnRoaXMubGVuZ3RoLGFkZGVkQ291bnQ6MCxyZW1vdmVkOlt0XX19LHRoaXMpLHR9LHNoaWZ0OmZ1bmN0aW9uIGYoKXt2YXIgZT10aGlzLmxlbmd0aCx0PWZbb10uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5sZW5ndGghPT1lJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6MCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzcGxpY2U6ZnVuY3Rpb24gZChlLHQpe3ZhciBzPWFyZ3VtZW50cyxhPWRbb10uYXBwbHkodGhpcyxzKTtyZXR1cm4oYS5sZW5ndGh8fHMubGVuZ3RoPjIpJiZyKHRoaXMpW25dKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6ZSxhZGRlZENvdW50OnMubGVuZ3RoLTIscmVtb3ZlZDphfX0sdGhpcyksYX19O2Zvcih2YXIgYSBpbiBzKXNbYV1bb109dC5wcm90b3R5cGVbYV0sdC5wcm90b3R5cGVbYV09c1thXTt0Lm9ic2VydmU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5vYnNlcnZlKHQscixbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsaV0pfSx0LnVub2JzZXJ2ZT1lLnVub2JzZXJ2ZX0oT2JqZWN0LEFycmF5KX0se31dLDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiOjE3fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjE4fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjE5fV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjIwfV0sNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjF9XSw3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjoyMn1dLDg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjIzfV0sOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjI0fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCI6MjV9XSwxMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5Ijo0fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKVsiZGVmYXVsdCJdO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBvPSEwO287KXt2YXIgaT1lLHM9dCxhPXI7bz0hMSxudWxsPT09aSYmKGk9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgYz1uKGkscyk7aWYodm9pZCAwIT09Yyl7aWYoInZhbHVlImluIGMpcmV0dXJuIGMudmFsdWU7dmFyIHU9Yy5nZXQ7aWYodm9pZCAwPT09dSlyZXR1cm47cmV0dXJuIHUuY2FsbChhKX12YXIgbD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaSk7aWYobnVsbD09PWwpcmV0dXJuO2U9bCx0PXMscj1hLG89ITAsYz1sPXZvaWQgMH19LHIuX19lc01vZHVsZT0hMH0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NX1dLDE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpWyJkZWZhdWx0Il07clsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9bih0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKG8/byhlLHQpOmUuX19wcm90b19fPXQpfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6OH1dLDE1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2hlbHBlcnMvdHlwZW9mIiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxpWyJkZWZhdWx0Il0pKHQpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fX0seyIuLi9oZWxwZXJzL3R5cGVvZiI6MTZ9XSwxNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sIilbImRlZmF1bHQiXTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuY29uc3RydWN0b3I9PT1uPyJzeW1ib2wiOnR5cGVvZiBlfSxyLl9fZXNNb2R1bGU9ITB9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3N5bWJvbCI6MTB9XSwxNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybihuLkpTT04mJm4uSlNPTi5zdHJpbmdpZnl8fEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLGFyZ3VtZW50cyl9fSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozMX1dLDE4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY3JlYXRlKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwxOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQscil9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTZ9XSwyMDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvJCIpO2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXREZXNjKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvJCI6NTYsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjgxfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjo4Mn1dLDIyOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Qua2V5c30seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo4M31dLDIzOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy8kLmNvcmUiKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiI6ODR9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciKSxlKCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiKSxlKCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiKSxlKCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIiksdC5leHBvcnRzPWUoIi4uL21vZHVsZXMvJC5jb3JlIikuUHJvbWlzZX0seyIuLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo4NiwiLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo4NywiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo4OX1dLDI1OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sIiksZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLlN5bWJvbH0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOjg1LCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiOjg4fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwyNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0seyIuLyQuaXMtb2JqZWN0Ijo0OX1dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9KHQ9T2JqZWN0KGUpKVtvXSk/cjppP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LHsiLi8kLmNvZiI6MzAsIi4vJC53a3MiOjc4fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbChlKS5zbGljZSg4LC0xKX19LHt9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjoiMS4yLjYifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmEtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi8kLmEtZnVuY3Rpb24iOjI2fV0sMzM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSx7fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9IWUoIi4vJC5mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seyIuLyQuZmFpbHMiOjM4fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXMtb2JqZWN0Iiksbz1lKCIuLyQuZ2xvYmFsIikuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LHsiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXRLZXlzKGUpLHI9bi5nZXRTeW1ib2xzO2lmKHIpZm9yKHZhciBvLGk9cihlKSxzPW4uaXNFbnVtLGE9MDtpLmxlbmd0aD5hOylzLmNhbGwoZSxvPWlbYSsrXSkmJnQucHVzaChvKTtyZXR1cm4gdH19LHsiLi8kIjo1Nn1dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmdsb2JhbCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5jdHgiKSxzPSJwcm90b3R5cGUiLGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLHUsbCxmPWUmYS5GLGQ9ZSZhLkcscD1lJmEuUyxiPWUmYS5QLGg9ZSZhLkIseT1lJmEuVyx2PWQ/bzpvW3RdfHwob1t0XT17fSksXz1kP246cD9uW3RdOihuW3RdfHx7fSlbc107ZCYmKHI9dCk7Zm9yKGMgaW4gcil1PSFmJiZfJiZjIGluIF8sdSYmYyBpbiB2fHwobD11P19bY106cltjXSx2W2NdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBfW2NdP3JbY106aCYmdT9pKGwsbik6eSYmX1tjXT09bD9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGU/bmV3IGUodCk6ZSh0KX07cmV0dXJuIHRbc109ZVtzXSx0fShsKTpiJiYiZnVuY3Rpb24iPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxiJiYoKHZbc118fCh2W3NdPXt9KSlbY109bCkpfTthLkY9MSxhLkc9MixhLlM9NCxhLlA9OCxhLkI9MTYsYS5XPTMyLHQuZXhwb3J0cz1hfSx7Ii4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5nbG9iYWwiOjQxfV0sMzg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jdHgiKSxvPWUoIi4vJC5pdGVyLWNhbGwiKSxpPWUoIi4vJC5pcy1hcnJheS1pdGVyIikscz1lKCIuLyQuYW4tb2JqZWN0IiksYT1lKCIuLyQudG8tbGVuZ3RoIiksYz1lKCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscix1KXt2YXIgbCxmLGQscD1jKGUpLGI9bihyLHUsdD8yOjEpLGg9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgcCl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpKHApKWZvcihsPWEoZS5sZW5ndGgpO2w+aDtoKyspdD9iKHMoZj1lW2hdKVswXSxmWzFdKTpiKGVbaF0pO2Vsc2UgZm9yKGQ9cC5jYWxsKGUpOyEoZj1kLm5leHQoKSkuZG9uZTspbyhkLGIsZi52YWx1ZSx0KX19LHsiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtYXJyYXktaXRlciI6NDcsIi4vJC5pdGVyLWNhbGwiOjUwLCIuLyQudG8tbGVuZ3RoIjo3NSwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjc5fV0sNDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpLG89ZSgiLi8kIikuZ2V0TmFtZXMsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBvKGUpfWNhdGNoKHQpe3JldHVybiBzLnNsaWNlKCl9fTt0LmV4cG9ydHMuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LHsiLi8kIjo1NiwiLi8kLnRvLWlvYmplY3QiOjc0fV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LHt9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKTt0LmV4cG9ydHM9ZSgiLi8kLmRlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLnNldERlc2MoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vJCI6NTYsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MX1dLDQ0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vJC5nbG9iYWwiOjQxfV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0seyIuLyQuY29mIjozMH1dLDQ3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSx7Ii4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmNvZiIpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0seyIuLyQuY29mIjozMH1dLDQ5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LHt9XSw1MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKGkpe3ZhciBzPWVbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PXMmJm4ocy5jYWxsKGUpKSxpfX19LHsiLi8kLmFuLW9iamVjdCI6Mjh9XSw1MTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuLyQiKSxvPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksaT1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxzPXt9O2UoIi4vJC5oaWRlIikocyxlKCIuLyQud2tzIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bi5jcmVhdGUocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vJCI6NTYsIi4vJC5oaWRlIjo0MywiLi8kLnByb3BlcnR5LWRlc2MiOjYxLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5saWJyYXJ5Iiksbz1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQucmVkZWZpbmUiKSxzPWUoIi4vJC5oaWRlIiksYT1lKCIuLyQuaGFzIiksYz1lKCIuLyQuaXRlcmF0b3JzIiksdT1lKCIuLyQuaXRlci1jcmVhdGUiKSxsPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGY9ZSgiLi8kIikuZ2V0UHJvdG8sZD1lKCIuLyQud2tzIikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSxiPSJAQGl0ZXJhdG9yIixoPSJrZXlzIix5PSJ2YWx1ZXMiLHY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLF8sZyxtLGope3Uocix0LF8pO3ZhciAkLHcsTz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBFKXJldHVybiBFW2VdO3N3aXRjaChlKXtjYXNlIGg6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxrPXQrIiBJdGVyYXRvciIseD1nPT15LEM9ITEsRT1lLnByb3RvdHlwZSxTPUVbZF18fEVbYl18fGcmJkVbZ10sVD1TfHxPKGcpO2lmKFMpe3ZhciBSPWYoVC5jYWxsKG5ldyBlKSk7bChSLGssITApLCFuJiZhKEUsYikmJnMoUixkLHYpLHgmJlMubmFtZSE9PXkmJihDPSEwLFQ9ZnVuY3Rpb24oKXtyZXR1cm4gUy5jYWxsKHRoaXMpfSl9aWYobiYmIWp8fCFwJiYhQyYmRVtkXXx8cyhFLGQsVCksY1t0XT1ULGNba109dixnKWlmKCQ9e3ZhbHVlczp4P1Q6Tyh5KSxrZXlzOm0/VDpPKGgpLGVudHJpZXM6eD9PKCJlbnRyaWVzIik6VH0sailmb3IodyBpbiAkKXcgaW4gRXx8aShFLHcsJFt3XSk7ZWxzZSBvKG8uUCtvLkYqKHB8fEMpLHQsJCk7cmV0dXJuICR9fSx7Ii4vJCI6NTYsIi4vJC5leHBvcnQiOjM3LCIuLyQuaGFzIjo0MiwiLi8kLmhpZGUiOjQzLCIuLyQuaXRlci1jcmVhdGUiOjUxLCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLmxpYnJhcnkiOjU4LCIuLyQucmVkZWZpbmUiOjYzLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY3LCIuLyQud2tzIjo3OH1dLDUzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2lbInJldHVybiJdPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxzPWlbbl0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyPSEwfSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goYSl7fXJldHVybiByfX0seyIuLyQud2tzIjo3OH1dLDU0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDU1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1PYmplY3Q7dC5leHBvcnRzPXtjcmVhdGU6bi5jcmVhdGUsZ2V0UHJvdG86bi5nZXRQcm90b3R5cGVPZixpc0VudW06e30ucHJvcGVydHlJc0VudW1lcmFibGUsZ2V0RGVzYzpuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixzZXREZXNjOm4uZGVmaW5lUHJvcGVydHksc2V0RGVzY3M6bi5kZWZpbmVQcm9wZXJ0aWVzLGdldEtleXM6bi5rZXlzLGdldE5hbWVzOm4uZ2V0T3duUHJvcGVydHlOYW1lcyxnZXRTeW1ib2xzOm4uZ2V0T3duUHJvcGVydHlTeW1ib2xzLGVhY2g6W10uZm9yRWFjaH19LHt9XSw1NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaT1vKGUpLHM9bi5nZXRLZXlzKGkpLGE9cy5sZW5ndGgsYz0wO2E+YzspaWYoaVtyPXNbYysrXV09PT10KXJldHVybiByfX0seyIuLyQiOjU2LCIuLyQudG8taW9iamVjdCI6NzR9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hMH0se31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLnRhc2siKS5zZXQsYz1zLk11dGF0aW9uT2JzZXJ2ZXJ8fHMuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXMucHJvY2VzcyxsPXMuUHJvbWlzZSxmPSJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKHUpLGQ9ZnVuY3Rpb24oKXt2YXIgZSx0LHI7Zm9yKGYmJihlPXUuZG9tYWluKSYmKHUuZG9tYWluPW51bGwsZS5leGl0KCkpO247KXQ9bi5kb21haW4scj1uLmZuLHQmJnQuZW50ZXIoKSxyKCksdCYmdC5leGl0KCksbj1uLm5leHQ7bz12b2lkIDAsZSYmZS5lbnRlcigpfTtpZihmKWk9ZnVuY3Rpb24oKXt1Lm5leHRUaWNrKGQpfTtlbHNlIGlmKGMpe3ZhciBwPTEsYj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGMoZCkub2JzZXJ2ZShiLHtjaGFyYWN0ZXJEYXRhOiEwfSksaT1mdW5jdGlvbigpe2IuZGF0YT1wPS1wfX1lbHNlIGk9bCYmbC5yZXNvbHZlP2Z1bmN0aW9uKCl7bC5yZXNvbHZlKCkudGhlbihkKX06ZnVuY3Rpb24oKXthLmNhbGwocyxkKX07dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwLGRvbWFpbjpmJiZ1LmRvbWFpbn07byYmKG8ubmV4dD10KSxufHwobj10LGkoKSksbz10fX0seyIuLyQuY29mIjozMCwiLi8kLmdsb2JhbCI6NDEsIi4vJC50YXNrIjo3Mn1dLDYwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpLG89ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJC5mYWlscyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0scz17fTtzW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIscyl9fSx7Ii4vJC5jb3JlIjozMSwiLi8kLmV4cG9ydCI6MzcsIi4vJC5mYWlscyI6Mzh9XSw2MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LHt9XSw2MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5yZWRlZmluZSIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KW4oZSxyLHRbcl0pO3JldHVybiBlfX0seyIuLyQucmVkZWZpbmUiOjYzfV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmhpZGUiKX0seyIuLyQuaGlkZSI6NDN9XSw2NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PT0xL3Q6ZSE9ZSYmdCE9dH19LHt9XSw2NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpLmdldERlc2Msbz1lKCIuLyQuaXMtb2JqZWN0IiksaT1lKCIuLyQuYW4tb2JqZWN0Iikscz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW8odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LHIsbyl7dHJ5e289ZSgiLi8kLmN0eCIpKEZ1bmN0aW9uLmNhbGwsbihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbyh0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChpKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBzKGUsdCkscj9lLl9fcHJvdG9fXz10Om8oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6c319LHsiLi8kIjo1NiwiLi8kLmFuLW9iamVjdCI6MjgsIi4vJC5jdHgiOjMyLCIuLyQuaXMtb2JqZWN0Ijo0OX1dLDY2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5jb3JlIiksbz1lKCIuLyQiKSxpPWUoIi4vJC5kZXNjcmlwdG9ycyIpLHM9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aSYmdCYmIXRbc10mJm8uc2V0RGVzYyh0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LHsiLi8kIjo1NiwiLi8kLmNvcmUiOjMxLCIuLyQuZGVzY3JpcHRvcnMiOjM0LCIuLyQud2tzIjo3OH1dLDY3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuc2V0RGVzYyxvPWUoIi4vJC5oYXMiKSxpPWUoIi4vJC53a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi8kIjo1NiwiLi8kLmhhcyI6NDIsIi4vJC53a3MiOjc4fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz0iX19jb3JlLWpzX3NoYXJlZF9fIixpPW5bb118fChuW29dPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LHsiLi8kLmdsb2JhbCI6NDF9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5hbi1vYmplY3QiKSxvPWUoIi4vJC5hLWZ1bmN0aW9uIiksaT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXN8fHZvaWQgMD09KHI9bihzKVtpXSk/dDpvKHIpfX0seyIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQud2tzIjo3OH1dLDcwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IocisiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yISIpO3JldHVybiBlfX0se31dLDcxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWludGVnZXIiKSxvPWUoIi4vJC5kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYT1TdHJpbmcobyh0KSksYz1uKHIpLHU9YS5sZW5ndGg7cmV0dXJuIDA+Y3x8Yz49dT9lPyIiOnZvaWQgMDooaT1hLmNoYXJDb2RlQXQoYyksNTUyOTY+aXx8aT41NjMxOXx8YysxPT09dXx8KHM9YS5jaGFyQ29kZUF0KGMrMSkpPDU2MzIwfHxzPjU3MzQzP2U/YS5jaGFyQXQoYyk6aTplP2Euc2xpY2UoYyxjKzIpOihpLTU1Mjk2PDwxMCkrKHMtNTYzMjApKzY1NTM2KX19fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLnRvLWludGVnZXIiOjczfV0sNzI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuY3R4IiksYT1lKCIuLyQuaW52b2tlIiksYz1lKCIuLyQuaHRtbCIpLHU9ZSgiLi8kLmRvbS1jcmVhdGUiKSxsPWUoIi4vJC5nbG9iYWwiKSxmPWwucHJvY2VzcyxkPWwuc2V0SW1tZWRpYXRlLHA9bC5jbGVhckltbWVkaWF0ZSxiPWwuTWVzc2FnZUNoYW5uZWwsaD0wLHk9e30sdj0ib25yZWFkeXN0YXRlY2hhbmdlIixfPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoeS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9eVtlXTtkZWxldGUgeVtlXSx0KCl9fSxnPWZ1bmN0aW9uKGUpe18uY2FsbChlLmRhdGEpfTtkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4geVsrK2hdPWZ1bmN0aW9uKCl7YSgiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKGgpLGh9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIHlbZV19LCJwcm9jZXNzIj09ZSgiLi8kLmNvZiIpKGYpP249ZnVuY3Rpb24oZSl7Zi5uZXh0VGljayhzKF8sZSwxKSl9OmI/KG89bmV3IGIsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcsbj1zKGkucG9zdE1lc3NhZ2UsaSwxKSk6bC5hZGRFdmVudExpc3RlbmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFsLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7bC5wb3N0TWVzc2FnZShlKyIiLCIqIil9LGwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZywhMSkpOm49diBpbiB1KCJzY3JpcHQiKT9mdW5jdGlvbihlKXtjLmFwcGVuZENoaWxkKHUoInNjcmlwdCIpKVt2XT1mdW5jdGlvbigpe2MucmVtb3ZlQ2hpbGQodGhpcyksXy5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChzKF8sZSwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LHsiLi8kLmNvZiI6MzAsIi4vJC5jdHgiOjMyLCIuLyQuZG9tLWNyZWF0ZSI6MzUsIi4vJC5nbG9iYWwiOjQxLCIuLyQuaHRtbCI6NDQsIi4vJC5pbnZva2UiOjQ1fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NYXRoLmNlaWwsbz1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP286bikoZSl9fSx7fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaW9iamVjdCIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vJC5kZWZpbmVkIjozMywiLi8kLmlvYmplY3QiOjQ2fV0sNzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vJC50by1pbnRlZ2VyIjo3M31dLDc2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LHsiLi8kLmRlZmluZWQiOjMzfV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0wLG89TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytuK28pLnRvU3RyaW5nKDM2KSl9fSx7fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuc2hhcmVkIikoIndrcyIpLG89ZSgiLi8kLnVpZCIpLGk9ZSgiLi8kLmdsb2JhbCIpLlN5bWJvbDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkmJmlbZV18fChpfHxvKSgiU3ltYm9sLiIrZSkpfX0seyIuLyQuZ2xvYmFsIjo0MSwiLi8kLnNoYXJlZCI6NjgsIi4vJC51aWQiOjc3fV0sNzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY2xhc3NvZiIpLG89ZSgiLi8kLndrcyIpKCJpdGVyYXRvciIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpO3QuZXhwb3J0cz1lKCIuLyQuY29yZSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWU/ZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldOnZvaWQgMH19LHsiLi8kLmNsYXNzb2YiOjI5LCIuLyQuY29yZSI6MzEsIi4vJC5pdGVyYXRvcnMiOjU1LCIuLyQud2tzIjo3OH1dLDgwOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5hZGQtdG8tdW5zY29wYWJsZXMiKSxvPWUoIi4vJC5pdGVyLXN0ZXAiKSxpPWUoIi4vJC5pdGVyYXRvcnMiKSxzPWUoIi4vJC50by1pb2JqZWN0Iik7dC5leHBvcnRzPWUoIi4vJC5pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PXMoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi8kLmFkZC10by11bnNjb3BhYmxlcyI6MjcsIi4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5pdGVyLXN0ZXAiOjU0LCIuLyQuaXRlcmF0b3JzIjo1NSwiLi8kLnRvLWlvYmplY3QiOjc0fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIGUobih0KSxyKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1pb2JqZWN0Ijo3NH1dLDgyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjYwLCIuLyQudG8tb2JqZWN0Ijo3Nn1dLDgzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLW9iamVjdCIpO2UoIi4vJC5vYmplY3Qtc2FwIikoImtleXMiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZShuKHQpKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NjAsIi4vJC50by1vYmplY3QiOjc2fV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vJC5zZXQtcHJvdG8iKS5zZXR9KX0seyIuLyQuZXhwb3J0IjozNywiLi8kLnNldC1wcm90byI6NjV9XSw4NTpbZnVuY3Rpb24oZSx0LHIpe30se31dLDg2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG89ZSgiLi8kIiksaT1lKCIuLyQubGlicmFyeSIpLHM9ZSgiLi8kLmdsb2JhbCIpLGE9ZSgiLi8kLmN0eCIpLGM9ZSgiLi8kLmNsYXNzb2YiKSx1PWUoIi4vJC5leHBvcnQiKSxsPWUoIi4vJC5pcy1vYmplY3QiKSxmPWUoIi4vJC5hbi1vYmplY3QiKSxkPWUoIi4vJC5hLWZ1bmN0aW9uIikscD1lKCIuLyQuc3RyaWN0LW5ldyIpLGI9ZSgiLi8kLmZvci1vZiIpLGg9ZSgiLi8kLnNldC1wcm90byIpLnNldCx5PWUoIi4vJC5zYW1lLXZhbHVlIiksdj1lKCIuLyQud2tzIikoInNwZWNpZXMiKSxfPWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksZz1lKCIuLyQubWljcm90YXNrIiksbT0iUHJvbWlzZSIsaj1zLnByb2Nlc3MsJD0icHJvY2VzcyI9PWMoaiksdz1zW21dLE89ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHcoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSx3LnJlc29sdmUodCk9PT10fSxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgdyhlKTtyZXR1cm4gaChyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPXcmJncucmVzb2x2ZSYmTygpLGgodCx3KSx0LnByb3RvdHlwZT1vLmNyZWF0ZSh3LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTt3LnJlc29sdmUoby5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChpKXtyPSExfXJldHVybiByfSgpLHg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaSYmZT09PXcmJnQ9PT1uPyEwOnkoZSx0KX0sQz1mdW5jdGlvbihlKXt2YXIgdD1mKGUpW3ZdO3JldHVybiB2b2lkIDAhPXQ/dDplfSxFPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBsKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFM9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPWQodCksdGhpcy5yZWplY3Q9ZChyKX0sVD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LFI9ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO2coZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LG89MT09ZS5zLGk9MCxhPWZ1bmN0aW9uKHQpe3ZhciByLGkscz1vP3Qub2s6dC5mYWlsLGE9dC5yZXNvbHZlLGM9dC5yZWplY3Q7dHJ5e3M/KG98fChlLmg9ITApLHI9cz09PSEwP246cyhuKSxyPT09dC5wcm9taXNlP2MoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPUUocikpP2kuY2FsbChyLGEsYyk6YShyKSk6YyhuKX1jYXRjaCh1KXtjKHUpfX07ci5sZW5ndGg+aTspYShyW2krK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLG89ZS5wO00obykmJigkP2ouZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLG8pOih0PXMub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6byxyZWFzb246bn0pOihyPXMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxNPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLG89MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5vOylpZih0PW5bbysrXSx0LmZhaWx8fCFNKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLFIodCwhMCkpfSxOPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PUUoZSkpP2coZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxhKE4sbiwxKSxhKEQsbiwxKSl9Y2F0Y2gobyl7RC5jYWxsKG4sbyl9fSk6KHIudj1lLHIucz0xLFIociwhMSkpfWNhdGNoKG4pe0QuY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2t8fCh3PWZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5fZD17cDpwKHRoaXMsdyxtKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UoYShOLHQsMSksYShELHQsMSkpfWNhdGNoKHIpe0QuY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKHcucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFMoXyh0aGlzLHcpKSxuPXIucHJvbWlzZSxvPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsby5jLnB1c2gociksby5hJiZvLmEucHVzaChyKSxvLnMmJlIobywhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksdSh1LkcrdS5XK3UuRiohayx7UHJvbWlzZTp3fSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikodyxtKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShtKSxuPWUoIi4vJC5jb3JlIilbbV0sdSh1LlMrdS5GKiFrLG0se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqKCFrfHxPKCEwKSksbSx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdyYmeChlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBTKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSx1KHUuUyt1LkYqIShrJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXt3LmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLG0se2FsbDpmdW5jdGlvbihlKXt2YXIgdD1DKHRoaXMpLHI9bmV3IFModCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxzPVtdLGE9VChmdW5jdGlvbigpe2IoZSwhMSxzLnB1c2gscyk7dmFyIHI9cy5sZW5ndGgsYT1BcnJheShyKTtyP28uZWFjaC5jYWxsKHMsZnVuY3Rpb24oZSxvKXt2YXIgcz0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtzfHwocz0hMCxhW29dPWUsLS1yfHxuKGEpKX0saSl9KTpuKGEpfSk7cmV0dXJuIGEmJmkoYS5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PUModGhpcykscj1uZXcgUyh0KSxuPXIucmVqZWN0LG89VChmdW5jdGlvbigpe2IoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvJiZuKG8uZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjU2LCIuLyQuYS1mdW5jdGlvbiI6MjYsIi4vJC5hbi1vYmplY3QiOjI4LCIuLyQuY2xhc3NvZiI6MjksIi4vJC5jb3JlIjozMSwiLi8kLmN0eCI6MzIsIi4vJC5kZXNjcmlwdG9ycyI6MzQsIi4vJC5leHBvcnQiOjM3LCIuLyQuZm9yLW9mIjozOSwiLi8kLmdsb2JhbCI6NDEsIi4vJC5pcy1vYmplY3QiOjQ5LCIuLyQuaXRlci1kZXRlY3QiOjUzLCIuLyQubGlicmFyeSI6NTgsIi4vJC5taWNyb3Rhc2siOjU5LCIuLyQucmVkZWZpbmUtYWxsIjo2MiwiLi8kLnNhbWUtdmFsdWUiOjY0LCIuLyQuc2V0LXByb3RvIjo2NSwiLi8kLnNldC1zcGVjaWVzIjo2NiwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjY5LCIuLyQuc3RyaWN0LW5ldyI6NzAsIi4vJC53a3MiOjc4fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6NTIsIi4vJC5zdHJpbmctYXQiOjcxfV0sODg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQuZ2xvYmFsIiksaT1lKCIuLyQuaGFzIikscz1lKCIuLyQuZGVzY3JpcHRvcnMiKSxhPWUoIi4vJC5leHBvcnQiKSxjPWUoIi4vJC5yZWRlZmluZSIpLHU9ZSgiLi8kLmZhaWxzIiksbD1lKCIuLyQuc2hhcmVkIiksZj1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxkPWUoIi4vJC51aWQiKSxwPWUoIi4vJC53a3MiKSxiPWUoIi4vJC5rZXlvZiIpLGg9ZSgiLi8kLmdldC1uYW1lcyIpLHk9ZSgiLi8kLmVudW0ta2V5cyIpLHY9ZSgiLi8kLmlzLWFycmF5IiksXz1lKCIuLyQuYW4tb2JqZWN0IiksZz1lKCIuLyQudG8taW9iamVjdCIpLG09ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxqPW4uZ2V0RGVzYywkPW4uc2V0RGVzYyx3PW4uY3JlYXRlLE89aC5nZXQsaz1vLlN5bWJvbCx4PW8uSlNPTixDPXgmJnguc3RyaW5naWZ5LEU9ITEsUz1wKCJfaGlkZGVuIiksVD1uLmlzRW51bSxSPWwoInN5bWJvbC1yZWdpc3RyeSIpLE09bCgic3ltYm9scyIpLEQ9ImZ1bmN0aW9uIj09dHlwZW9mIGssTj1PYmplY3QucHJvdG90eXBlLFA9cyYmdShmdW5jdGlvbigpe3JldHVybiA3IT13KCQoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49aihOLHQpO24mJmRlbGV0ZSBOW3RdLCQoZSx0LHIpLG4mJmUhPT1OJiYkKE4sdCxuKX06JCxBPWZ1bmN0aW9uKGUpe3ZhciB0PU1bZV09dyhrLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSxzJiZFJiZQKE4sZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtpKHRoaXMsUykmJmkodGhpc1tTXSxlKSYmKHRoaXNbU11bZV09ITEpLFAodGhpcyxlLG0oMSx0KSl9fSksdH0sTD1mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9LEY9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByJiZpKE0sdCk/KHIuZW51bWVyYWJsZT8oaShlLFMpJiZlW1NdW3RdJiYoZVtTXVt0XT0hMSkscj13KHIse2VudW1lcmFibGU6bSgwLCExKX0pKTooaShlLFMpfHwkKGUsUyxtKDEse30pKSxlW1NdW3RdPSEwKSxQKGUsdCxyKSk6JChlLHQscil9LEk9ZnVuY3Rpb24oZSx0KXtfKGUpO2Zvcih2YXIgcixuPXkodD1nKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KUYoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sVj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3coZSk6SSh3KGUpLHQpfSxVPWZ1bmN0aW9uKGUpe3ZhciB0PVQuY2FsbCh0aGlzLGUpO3JldHVybiB0fHwhaSh0aGlzLGUpfHwhaShNLGUpfHxpKHRoaXMsUykmJnRoaXNbU11bZV0/dDohMH0sej1mdW5jdGlvbihlLHQpe3ZhciByPWooZT1nKGUpLHQpO3JldHVybiFyfHwhaShNLHQpfHxpKGUsUykmJmVbU11bdF18fChyLmVudW1lcmFibGU9ITApLHJ9LEg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pfHx0PT1TfHxuLnB1c2godCk7cmV0dXJuIG59LEI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9TyhnKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKE0sdD1yW28rK10pJiZuLnB1c2goTVt0XSk7cmV0dXJuIG59LEo9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIUwoZSkpe2Zvcih2YXIgdCxyLG49W2VdLG89MSxpPWFyZ3VtZW50cztpLmxlbmd0aD5vOyluLnB1c2goaVtvKytdKTtyZXR1cm4gdD1uWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10KSwhciYmdih0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksTCh0KT92b2lkIDA6dH0pLG5bMV09dCxDLmFwcGx5KHgsbil9fSxXPXUoZnVuY3Rpb24oKXt2YXIgZT1rKCk7cmV0dXJuIltudWxsXSIhPUMoW2VdKXx8Int9IiE9Qyh7YTplfSl8fCJ7fSIhPUMoT2JqZWN0KGUpKX0pO0R8fChrPWZ1bmN0aW9uKCl7aWYoTCh0aGlzKSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3JldHVybiBBKGQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApKX0sYyhrLnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxMPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Yga30sbi5jcmVhdGU9VixuLmlzRW51bT1VLG4uZ2V0RGVzYz16LG4uc2V0RGVzYz1GLG4uc2V0RGVzY3M9SSxuLmdldE5hbWVzPWguZ2V0PUgsbi5nZXRTeW1ib2xzPUIscyYmIWUoIi4vJC5saWJyYXJ5IikmJmMoTiwicHJvcGVydHlJc0VudW1lcmFibGUiLFUsITApKTt2YXIgWT17ImZvciI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoUixlKz0iIik/UltlXTpSW2VdPWsoZSl9LGtleUZvcjpmdW5jdGlvbihlKXtyZXR1cm4gYihSLGUpfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtFPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtFPSExfX07bi5lYWNoLmNhbGwoImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGZ1bmN0aW9uKGUpe3ZhciB0PXAoZSk7WVtlXT1EP3Q6QSh0KX0pLEU9ITAsYShhLkcrYS5XLHtTeW1ib2w6a30pLGEoYS5TLCJTeW1ib2wiLFkpLGEoYS5TK2EuRiohRCwiT2JqZWN0Iix7Y3JlYXRlOlYsZGVmaW5lUHJvcGVydHk6RixkZWZpbmVQcm9wZXJ0aWVzOkksZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOnosZ2V0T3duUHJvcGVydHlOYW1lczpILGdldE93blByb3BlcnR5U3ltYm9sczpCfSkseCYmYShhLlMrYS5GKighRHx8VyksIkpTT04iLHtzdHJpbmdpZnk6Sn0pLGYoaywiU3ltYm9sIiksZihNYXRoLCJNYXRoIiwhMCksZihvLkpTT04sIkpTT04iLCEwKX0seyIuLyQiOjU2LCIuLyQuYW4tb2JqZWN0IjoyOCwiLi8kLmRlc2NyaXB0b3JzIjozNCwiLi8kLmVudW0ta2V5cyI6MzYsIi4vJC5leHBvcnQiOjM3LCIuLyQuZmFpbHMiOjM4LCIuLyQuZ2V0LW5hbWVzIjo0MCwiLi8kLmdsb2JhbCI6NDEsIi4vJC5oYXMiOjQyLCIuLyQuaXMtYXJyYXkiOjQ4LCIuLyQua2V5b2YiOjU3LCIuLyQubGlicmFyeSI6NTgsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2MSwiLi8kLnJlZGVmaW5lIjo2MywiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NywiLi8kLnNoYXJlZCI6NjgsIi4vJC50by1pb2JqZWN0Ijo3NCwiLi8kLnVpZCI6NzcsIi4vJC53a3MiOjc4fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjo1NSwiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjgwfV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXt3aW5kb3cuTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5nPVtdLHRoaXMuaz1lfWZ1bmN0aW9uIHIoZSl7IWZ1bmN0aW9uIHIoKXt2YXIgbj1lLnRha2VSZWNvcmRzKCk7bi5sZW5ndGgmJmUuayhuLGUpLGUuZj1zZXRUaW1lb3V0KHIsdC5fcGVyaW9kKX0oKX1mdW5jdGlvbiBuKHQpe3ZhciByLG49e3R5cGU6bnVsbCx0YXJnZXQ6bnVsbCxhZGRlZE5vZGVzOltdLHJlbW92ZWROb2RlczpbXSxwcmV2aW91c1NpYmxpbmc6bnVsbCxuZXh0U2libGluZzpudWxsLGF0dHJpYnV0ZU5hbWU6bnVsbCxhdHRyaWJ1dGVOYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpudWxsfTtmb3IociBpbiB0KW5bcl0hPT1lJiZ0W3JdIT09ZSYmKG5bcl09dFtyXSk7cmV0dXJuIG59ZnVuY3Rpb24gbyhlLHQpe3ZhciByPWEoZSx0KTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIG8sYz1uLmxlbmd0aDt0LmEmJnIuYSYmaShuLGUsci5hLHQuZCksKHQuYnx8dC5lKSYmKG89cyhuLGUscix0KSksKG98fG4ubGVuZ3RoIT09YykmJihyPWEoZSx0KSl9fWZ1bmN0aW9uIGkodCxyLG8saSl7Zm9yKHZhciBzLGEsYz17fSx1PXIuYXR0cmlidXRlcyxsPXUubGVuZ3RoO2wtLTspcz11W2xdLGE9cy5uYW1lLGkmJmlbYV09PT1lfHwocy52YWx1ZSE9PW9bYV0mJnQucHVzaChuKHt0eXBlOiJhdHRyaWJ1dGVzIix0YXJnZXQ6cixhdHRyaWJ1dGVOYW1lOmEsb2xkVmFsdWU6b1thXSxhdHRyaWJ1dGVOYW1lc3BhY2U6cy5uYW1lc3BhY2VVUkl9KSksY1thXT0hMCk7Zm9yKGEgaW4gbyljW2FdfHx0LnB1c2gobih7dGFyZ2V0OnIsdHlwZToiYXR0cmlidXRlcyIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV19KSl9ZnVuY3Rpb24gcyh0LHIsbyxzKXtmdW5jdGlvbiBhKGUscixvLGEsYyl7dmFyIGw9ZS5sZW5ndGgtMTtjPS1+KChsLWMpLzIpO2Zvcih2YXIgZixkLHA7cD1lLnBvcCgpOylmPW9bcC5oXSxkPWFbcC5pXSxzLmImJmMmJk1hdGguYWJzKHAuaC1wLmkpPj1sJiYodC5wdXNoKG4oe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0OnIsYWRkZWROb2RlczpbZl0scmVtb3ZlZE5vZGVzOltmXSxuZXh0U2libGluZzpmLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpmLnByZXZpb3VzU2libGluZ30pKSxjLS0pLHMuYSYmZC5hJiZpKHQsZixkLmEscy5kKSxzLmMmJjM9PT1mLm5vZGVUeXBlJiZmLm5vZGVWYWx1ZSE9PWQuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpmfSkpLHMuZSYmdShmLGQpfWZ1bmN0aW9uIHUocixvKXtmb3IodmFyIGQscCxiLGgseSx2PXIuY2hpbGROb2RlcyxfPW8uYixnPXYubGVuZ3RoLG09Xz9fLmxlbmd0aDowLGo9MCwkPTAsdz0wO2c+JHx8bT53OyloPXZbJF0seT0oYj1fW3ddKSYmYi5qLGg9PT15PyhzLmEmJmIuYSYmaSh0LGgsYi5hLHMuZCkscy5jJiZiLmMhPT1lJiZoLm5vZGVWYWx1ZSE9PWIuYyYmdC5wdXNoKG4oe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpofSkpLHAmJmEocCxyLHYsXyxqKSxzLmUmJihoLmNoaWxkTm9kZXMubGVuZ3RofHxiLmImJmIuYi5sZW5ndGgpJiZ1KGgsYiksJCsrLHcrKyk6KGw9ITAsZHx8KGQ9e30scD1bXSksaCYmKGRbYj1jKGgpXXx8KGRbYl09ITAsLTE9PT0oYj1mKF8saCx3LCJqIikpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpyLGFkZGVkTm9kZXM6W2hdLG5leHRTaWJsaW5nOmgubmV4dFNpYmxpbmcscHJldmlvdXNTaWJsaW5nOmgucHJldmlvdXNTaWJsaW5nfSkpLGorKyk6cC5wdXNoKHtoOiQsaTpifSkpLCQrKykseSYmeSE9PXZbJF0mJihkW2I9Yyh5KV18fChkW2JdPSEwLC0xPT09KGI9Zih2LHksJCkpP3MuYiYmKHQucHVzaChuKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpvLmoscmVtb3ZlZE5vZGVzOlt5XSxuZXh0U2libGluZzpfW3crMV0scHJldmlvdXNTaWJsaW5nOl9bdy0xXX0pKSxqLS0pOnAucHVzaCh7aDpiLGk6d30pKSx3KyspKTtwJiZhKHAscix2LF8sail9dmFyIGw7cmV0dXJuIHUocixvKSxsfWZ1bmN0aW9uIGEoZSx0KXt2YXIgcj0hMDtyZXR1cm4gZnVuY3Rpb24gbihlKXt2YXIgbz17ajplfTtyZXR1cm4hdC5jfHwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGU/KHQuYSYmciYmMT09PWUubm9kZVR5cGUmJihvLmE9bChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5kJiYhdC5kW3IubmFtZV18fChlW3IubmFtZV09ci52YWx1ZSksZX0pKSxyJiYodC5ifHx0LmN8fHQuYSYmdC5lKSYmKG8uYj11KGUuY2hpbGROb2RlcyxuKSkscj10LmUpOm8uYz1lLm5vZGVWYWx1ZSxvfShlKX1mdW5jdGlvbiBjKGUpe3RyeXtyZXR1cm4gZS5pZHx8KGUubW9faWQ9ZS5tb19pZHx8ZCsrKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGUubm9kZVZhbHVlfWNhdGNoKHIpe3JldHVybiBkKyt9fX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciByPVtdLG49MDtuPGUubGVuZ3RoO24rKylyW25dPXQoZVtuXSxuLGUpO3JldHVybiByfWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIHI9e30sbj0wO248ZS5sZW5ndGg7bisrKXI9dChyLGVbbl0sbixlKTtyZXR1cm4gcn1mdW5jdGlvbiBmKGUsdCxyLG4pe2Zvcig7cjxlLmxlbmd0aDtyKyspaWYoKG4/ZVtyXVtuXTplW3JdKT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9dC5fcGVyaW9kPTMwLHQucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXthOiEhKHQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXJ8fHQuYXR0cmlidXRlT2xkVmFsdWUpLGI6ISF0LmNoaWxkTGlzdCxlOiEhdC5zdWJ0cmVlLGM6ISghdC5jaGFyYWN0ZXJEYXRhJiYhdC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpfSxpPXRoaXMuZyxzPTA7czxpLmxlbmd0aDtzKyspaVtzXS5tPT09ZSYmaS5zcGxpY2UocywxKTt0LmF0dHJpYnV0ZUZpbHRlciYmKG4uZD1sKHQuYXR0cmlidXRlRmlsdGVyLGZ1bmN0aW9uKGUsdCl7CnJldHVybiBlW3RdPSEwLGV9KSksaS5wdXNoKHttOmUsbDpvKGUsbil9KSx0aGlzLmZ8fHIodGhpcyl9LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5nLHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdLmwoZSk7cmV0dXJuIGV9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmc9W10sY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGx9fTt2YXIgZD0xO3JldHVybiB0fSh2b2lkIDApfSx7fV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXtPYmplY3Qub2JzZXJ2ZXx8ZnVuY3Rpb24oZSx0LHIsbil7InVzZSBzdHJpY3QiO3ZhciBvLGkscz1bImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInJlY29uZmlndXJlIiwic2V0UHJvdG90eXBlIiwicHJldmVudEV4dGVuc2lvbnMiXSxhPXQuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1lLmNhbGwodCl9fShlLnByb3RvdHlwZS50b1N0cmluZyksYz10LnByb3RvdHlwZS5pbmRleE9mP3QuaW5kZXhPZnx8ZnVuY3Rpb24oZSxyLG4pe3JldHVybiB0LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxyLG4pfTpmdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPXJ8fDA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LHU9ci5NYXAhPT1uJiZNYXAucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE1hcH06ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PVtdO3JldHVybntzaXplOjAsaGFzOmZ1bmN0aW9uKHQpe3JldHVybiBjKGUsdCk+LTF9LGdldDpmdW5jdGlvbihyKXtyZXR1cm4gdFtjKGUscildfSxzZXQ6ZnVuY3Rpb24ocixuKXt2YXIgbz1jKGUscik7LTE9PT1vPyhlLnB1c2gociksdC5wdXNoKG4pLHRoaXMuc2l6ZSsrKTp0W29dPW59LCJkZWxldGUiOmZ1bmN0aW9uKHIpe3ZhciBuPWMoZSxyKTtuPi0xJiYoZS5zcGxpY2UobiwxKSx0LnNwbGljZShuLDEpLHRoaXMuc2l6ZS0tKX0sZm9yRWFjaDpmdW5jdGlvbihyKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylyLmNhbGwoYXJndW1lbnRzWzFdLHRbbl0sZVtuXSx0aGlzKX19fSxsPWUuZ2V0T3duUHJvcGVydHlOYW1lcz9mdW5jdGlvbigpe3ZhciB0PWUuZ2V0T3duUHJvcGVydHlOYW1lczt0cnl7YXJndW1lbnRzLmNhbGxlZX1jYXRjaChyKXt2YXIgbj0odChjKS5qb2luKCIgIikrIiAiKS5yZXBsYWNlKC9wcm90b3R5cGUgfGxlbmd0aCB8bmFtZSAvZywiIikuc2xpY2UoMCwtMSkuc3BsaXQoIiAiKTtuLmxlbmd0aCYmKHQ9ZnVuY3Rpb24odCl7dmFyIHI9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KWZvcih2YXIgbyxpPTA7aTxuLmxlbmd0aDspKG89YyhyLG5baSsrXSkpPi0xJiZyLnNwbGljZShvLDEpO3JldHVybiByfSl9cmV0dXJuIHR9KCk6ZnVuY3Rpb24odCl7dmFyIHIsbixvPVtdO2lmKCJoYXNPd25Qcm9wZXJ0eSJpbiB0KWZvcihyIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmby5wdXNoKHIpO2Vsc2V7bj1lLmhhc093blByb3BlcnR5O2ZvcihyIGluIHQpbi5jYWxsKHQscikmJm8ucHVzaChyKX1yZXR1cm4gYSh0KSYmby5wdXNoKCJsZW5ndGgiKSxvfSxmPWUuZ2V0UHJvdG90eXBlT2YsZD1lLmRlZmluZVByb3BlcnRpZXMmJmUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHA9ci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbigpe3ZhciBlPStuZXcgRGF0ZSx0PWU7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cigodD0rbmV3IERhdGUpLWUpfSwxNyl9fSgpLGI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW8uZ2V0KGUpO24/KHkobixlKSxtKGUsbix0LHIpKToobj1oKGUpLG0oZSxuLHQsciksMT09PW8uc2l6ZSYmcCh2KSl9LGg9ZnVuY3Rpb24odCxyKXt2YXIgbixpPWwodCkscz1bXSxhPTAscj17aGFuZGxlcnM6dSgpLGZyb3plbjplLmlzRnJvemVuP2UuaXNGcm96ZW4odCk6ITEsZXh0ZW5zaWJsZTplLmlzRXh0ZW5zaWJsZT9lLmlzRXh0ZW5zaWJsZSh0KTohMCxwcm90bzpmJiZmKHQpLHByb3BlcnRpZXM6aSx2YWx1ZXM6cyxub3RpZmllcjpnKHQscil9O2lmKGQpZm9yKG49ci5kZXNjcmlwdG9ycz1bXTthPGkubGVuZ3RoOyluW2FdPWQodCxpW2FdKSxzW2FdPXRbaVthKytdXTtlbHNlIGZvcig7YTxpLmxlbmd0aDspc1thXT10W2lbYSsrXV07cmV0dXJuIG8uc2V0KHQscikscn0seT1mdW5jdGlvbigpe3ZhciB0PWQ/ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaT10LnByb3BlcnRpZXNbcl0scz1lW2ldLGE9dC52YWx1ZXNbcl0sYz10LmRlc2NyaXB0b3JzW3JdOyJ2YWx1ZSJpbiBvJiYoYT09PXM/MD09PWEmJjEvYSE9PTEvczphPT09YXx8cz09PXMpJiYoaihlLHQse25hbWU6aSx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOmF9LG4pLHQudmFsdWVzW3JdPXMpLCFjLmNvbmZpZ3VyYWJsZXx8by5jb25maWd1cmFibGUmJm8ud3JpdGFibGU9PT1jLndyaXRhYmxlJiZvLmVudW1lcmFibGU9PT1jLmVudW1lcmFibGUmJm8uZ2V0PT09Yy5nZXQmJm8uc2V0PT09Yy5zZXR8fChqKGUsdCx7bmFtZTppLHR5cGU6InJlY29uZmlndXJlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxuKSx0LmRlc2NyaXB0b3JzW3JdPW8pfTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10LnByb3BlcnRpZXNbcl0saT1lW29dLHM9dC52YWx1ZXNbcl07KHM9PT1pPzA9PT1zJiYxL3MhPT0xL2k6cz09PXN8fGk9PT1pKSYmKGooZSx0LHtuYW1lOm8sdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpzfSxuKSx0LnZhbHVlc1tyXT1pKX0scj1kP2Z1bmN0aW9uKGUscixuLG8saSl7Zm9yKHZhciBzLGE9ci5sZW5ndGg7biYmYS0tOyludWxsIT09clthXSYmKHM9ZChlLHJbYV0pLG4tLSxzP3QoZSxvLGEsaSxzKTooaihlLG8se25hbWU6clthXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm8udmFsdWVzW2FdfSxpKSxvLnByb3BlcnRpZXMuc3BsaWNlKGEsMSksby52YWx1ZXMuc3BsaWNlKGEsMSksby5kZXNjcmlwdG9ycy5zcGxpY2UoYSwxKSkpfTpmdW5jdGlvbihlLHQscixuLG8pe2Zvcih2YXIgaT10Lmxlbmd0aDtyJiZpLS07KW51bGwhPT10W2ldJiYoaihlLG4se25hbWU6dFtpXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm4udmFsdWVzW2ldfSxvKSxuLnByb3BlcnRpZXMuc3BsaWNlKGksMSksbi52YWx1ZXMuc3BsaWNlKGksMSksci0tKX07cmV0dXJuIGZ1bmN0aW9uKG4sbyxpKXtpZihuLmhhbmRsZXJzLnNpemUmJiFuLmZyb3plbil7dmFyIHMsYSx1LHAsYixoLHksdixfPW4udmFsdWVzLGc9bi5kZXNjcmlwdG9ycyxtPTA7aWYobi5leHRlbnNpYmxlKWlmKHM9bi5wcm9wZXJ0aWVzLnNsaWNlKCksYT1zLmxlbmd0aCx1PWwobyksZyl7Zm9yKDttPHUubGVuZ3RoOyliPXVbbSsrXSxwPWMocyxiKSx2PWQobyxiKSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKG9bYl0pLGcucHVzaCh2KSk6KHNbcF09bnVsbCxhLS0sdChvLG4scCxpLHYpKTtyKG8scyxhLG4saSksZS5pc0V4dGVuc2libGUobyl8fChuLmV4dGVuc2libGU9ITEsaihvLG4se3R5cGU6InByZXZlbnRFeHRlbnNpb25zIixvYmplY3Q6b30saSksbi5mcm96ZW49ZS5pc0Zyb3plbihvKSl9ZWxzZXtmb3IoO208dS5sZW5ndGg7KWI9dVttKytdLHA9YyhzLGIpLGg9b1tiXSwtMT09PXA/KGoobyxuLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksbi5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKGgpKTooc1twXT1udWxsLGEtLSx0KG8sbixwLGkpKTtyKG8scyxhLG4saSl9ZWxzZSBpZighbi5mcm96ZW4pe2Zvcig7bTxzLmxlbmd0aDttKyspYj1zW21dLHQobyxuLG0saSxkKG8sYikpO2UuaXNGcm96ZW4obykmJihuLmZyb3plbj0hMCl9ZiYmKHk9ZihvKSx5IT09bi5wcm90byYmKGoobyxuLHt0eXBlOiJzZXRQcm90b3R5cGUiLG5hbWU6Il9fcHJvdG9fXyIsb2JqZWN0Om8sb2xkVmFsdWU6bi5wcm90b30pLG4ucHJvdG89eSkpfX19KCksdj1mdW5jdGlvbigpe28uc2l6ZSYmKG8uZm9yRWFjaCh5KSxpLmZvckVhY2goXykscCh2KSl9LF89ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmNoYW5nZVJlY29yZHM7ci5sZW5ndGgmJihlLmNoYW5nZVJlY29yZHM9W10sdChyKSl9LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyJiYodD1vLmdldChlKSksdCYmdC5ub3RpZmllcnx8e25vdGlmeTpmdW5jdGlvbih0KXt0LnR5cGU7dmFyIHI9by5nZXQoZSk7aWYocil7dmFyIG4saT17b2JqZWN0OmV9O2ZvcihuIGluIHQpIm9iamVjdCIhPT1uJiYoaVtuXT10W25dKTtqKGUscixpKX19LHBlcmZvcm1DaGFuZ2U6ZnVuY3Rpb24odCxyKXtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBub24tc3RyaW5nIGNoYW5nZVR5cGUiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgcGVyZm9ybSBub24tZnVuY3Rpb24iKTt2YXIgaSxzLGE9by5nZXQoZSksYz1hcmd1bWVudHNbMl0sdT1jPT09bj9yKCk6ci5jYWxsKGMpO2lmKGEmJnkoYSxlLHQpLGEmJnUmJiJvYmplY3QiPT10eXBlb2YgdSl7cz17b2JqZWN0OmUsdHlwZTp0fTtmb3IoaSBpbiB1KSJvYmplY3QiIT09aSYmInR5cGUiIT09aSYmKHNbaV09dVtpXSk7aihlLGEscyl9fX19LG09ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89aS5nZXQocik7b3x8aS5zZXQocixvPXtvYnNlcnZlZDp1KCksY2hhbmdlUmVjb3JkczpbXX0pLG8ub2JzZXJ2ZWQuc2V0KGUse2FjY2VwdExpc3Q6bi5zbGljZSgpLGRhdGE6dH0pLHQuaGFuZGxlcnMuc2V0KHIsbyl9LGo9ZnVuY3Rpb24oZSx0LHIsbil7dC5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXQub2JzZXJ2ZWQuZ2V0KGUpLmFjY2VwdExpc3Q7KCJzdHJpbmciIT10eXBlb2Ygbnx8LTE9PT1jKG8sbikpJiZjKG8sci50eXBlKT4tMSYmdC5jaGFuZ2VSZWNvcmRzLnB1c2gocil9KX07bz11KCksaT11KCksZS5vYnNlcnZlPWZ1bmN0aW9uKHQscixvKXtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3Qgb2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7aWYoZS5pc0Zyb3plbiYmZS5pc0Zyb3plbihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBhIGZyb3plbiBmdW5jdGlvbiBvYmplY3QiKTtpZihvPT09bilvPXM7ZWxzZSBpZighb3x8Im9iamVjdCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoaXJkIGFyZ3VtZW50IHRvIE9iamVjdC5vYnNlcnZlIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncy4iKTtyZXR1cm4gYih0LHIsbyksdH0sZS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCB1bm9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHIsbj1pLmdldCh0KTtyZXR1cm4gbiYmKHI9bi5vYnNlcnZlZC5nZXQoZSkpJiYobi5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxwKGZ1bmN0aW9uKCl7XyhuLHQpfSksMT09PW4ub2JzZXJ2ZWQuc2l6ZSYmbi5vYnNlcnZlZC5oYXMoZSk/aVsiZGVsZXRlIl0odCk6bi5vYnNlcnZlZFsiZGVsZXRlIl0oZSksMT09PXIuZGF0YS5oYW5kbGVycy5zaXplP29bImRlbGV0ZSJdKGUpOnIuZGF0YS5oYW5kbGVyc1siZGVsZXRlIl0odCkpLGV9LGUuZ2V0Tm90aWZpZXI9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmdldE5vdGlmaWVyIGNhbm5vdCBnZXROb3RpZmllciBub24tb2JqZWN0Iik7cmV0dXJuIGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4odCk/bnVsbDpnKHQpfSxlLmRlbGl2ZXJDaGFuZ2VSZWNvcmRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgdD1pLmdldChlKTt0JiYodC5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7eShlLmRhdGEsdCl9KSxfKHQsZSkpfX0oT2JqZWN0LEFycmF5LHRoaXMpfSx7fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5EYXRhT2JqZWN0T2JzZXJ2ZXI9ci5EYXRhT2JqZWN0UmVwb3J0ZXI9ci5TeW5jaGVyPXZvaWQgMCxlKCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iKSxlKCJvYmplY3Qub2JzZXJ2ZSIpLGUoImFycmF5Lm9ic2VydmUiKTt2YXIgbz1lKCIuL3N5bmNoZXIvU3luY2hlciIpLGk9bihvKSxzPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxhPW4ocyksYz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIiksdT1uKGMpO3IuU3luY2hlcj1pWyJkZWZhdWx0Il0sci5EYXRhT2JqZWN0UmVwb3J0ZXI9YVsiZGVmYXVsdCJdLHIuRGF0YU9iamVjdE9ic2VydmVyPXVbImRlZmF1bHQiXX0seyIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjo5NSwiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6OTYsIi4vc3luY2hlci9TeW5jaGVyIjo5OSwiYXJyYXkub2JzZXJ2ZSI6MSwibXV0YXRpb25vYnNlcnZlci1zaGltIjo5MCwib2JqZWN0Lm9ic2VydmUiOjkxfV0sOTM6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxhPW4ocyksYz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSx1PW4oYyksbD1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxmPW4obCksZD1lKCIuL1N5bmNPYmplY3QiKSxwPW4oZCksYj1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGg9bihiKSx5PWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxpLHMpeygwLHVbImRlZmF1bHQiXSkodGhpcyxlKTt2YXIgYT10aGlzO2EuX3N5bmNoZXI9dCxhLl91cmw9cixhLl9zY2hlbWE9bixhLl9zdGF0dXM9byxhLl9zeW5jT2JqPW5ldyBwWyJkZWZhdWx0Il0oaSksYS5fY2hpbGRyZW5zPXMsYS5fdmVyc2lvbj0wLGEuX2NoaWxkSWQ9MCxhLl9jaGlsZHJlbk9iamVjdHM9e30sYS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYS5fb3duZXI9dC5fb3duZXIsYS5fYnVzPXQuX2J1c31yZXR1cm4oMCxmWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXQuX3VybCsiL2NoaWxkcmVuLyI7dC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz1yK24saT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihyKXtpZihyLmZyb20hPT1lLl9vd25lcilzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uQ2hpbGRDcmVhdGUocik7YnJlYWs7Y2FzZSJkZWxldGUiOmNvbnNvbGUubG9nKHIpO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4ocil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSwoMCxhWyJkZWZhdWx0Il0pKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGlsZHJlbk9iamVjdHNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicGF1c2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InJlc3VtZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToic3RvcCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToiYWRkQ2hpbGQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyLl9jaGlsZElkKys7dmFyIG49ci5fb3duZXIrIiMiK3IuX2NoaWxkSWQsbz1yLl91cmwrIi9jaGlsZHJlbi8iK2Uscz17dHlwZToiY3JlYXRlIixmcm9tOnIuX293bmVyLHRvOm8sYm9keTp7cmVzb3VyY2U6bix2YWx1ZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSl7dmFyIGk9ci5fYnVzLnBvc3RNZXNzYWdlKHMpO2NvbnNvbGUubG9nKCJjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICIrci5fb3duZXIrIiApOiAiLHMpO3ZhciBhPW5ldyBoWyJkZWZhdWx0Il0ocixuLHQsci5fb3duZXIsaSk7YS5vbkNoYW5nZShmdW5jdGlvbihlKXtyLl9vbkNoYW5nZShlLHtwYXRoOm8sY2hpbGRJZDpufSl9KSxyLl9jaGlsZHJlbk9iamVjdHNbbl09YSxlKGEpfSl9fSx7a2V5OiJvbkFkZENoaWxkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleToiX29uQ2hpbGRDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2U7Y29uc29sZS5sb2coImNyZWF0ZS1vYnNlcnZlci1jaGlsZCggIit0Ll9vd25lcisiICk6ICIsZSk7dmFyIG49bmV3IGhbImRlZmF1bHQiXSh0LHIsZS5ib2R5LnZhbHVlKTt0Ll9jaGlsZHJlbk9iamVjdHNbcl09bixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNvdXJjZTp0Ll9vd25lcn19KX0pO3ZhciBvPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTplLmJvZHkudmFsdWUsY2hpbGRJZDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX07dC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJihjb25zb2xlLmxvZygiQURELUNISUxEUkVOLUVWRU5UOiAiLG8pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pKX19LHtrZXk6Il9vbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuX3ZlcnNpb24rKywib24iPT09ci5fc3RhdHVzKXt2YXIgbj17dHlwZToidXBkYXRlIixmcm9tOnIuX3VybCx0bzpyLl91cmwrIi9jaGFuZ2VzIixib2R5Ont2ZXJzaW9uOnIuX3ZlcnNpb24sc291cmNlOnIuX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PWQuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PWQuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1kLkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAseS5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT1kLk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PWQuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBjPWkub2JqLHU9aS5sYXN0O2Muc3BsaWNlKHUsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCIuL0RhdGFPYmplY3RDaGlsZCI6OTQsIi4vU3luY09iamVjdCI6OTgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5NDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1lKCIuL1N5bmNPYmplY3QiKSx1PW4oYyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyxzKXsoMCxpWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIGE9dGhpczthLl9wYXJlbnQ9dCxhLl9jaGlsZElkPXIsYS5fb3duZXI9byxhLl9tc2dJZD1zLGEuX3N5bmNPYmo9bmV3IHVbImRlZmF1bHQiXShuKSxhLl9idXM9dC5fYnVzLGEuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYVsiZGVmYXVsdCJdKShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0Ijo5OCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDk1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4vRGF0YU9iamVjdENoaWxkIiksaj1uKG0pLCQ9e0FOWToiYW55IixTVEFSVDoic3RhcnQiLEVYQUNUOiJleGFjdCJ9LHc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLHMsYyxsKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGY9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8scy5kYXRhLGMpKSxkPWY7cmV0dXJuIGQuX3ZlcnNpb249bCxkLl9maWx0ZXJzPXt9LGQuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtkLl9vbkZpbHRlcihlKX0pLCgwLGlbImRlZmF1bHQiXSkocy5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cy5jaGlsZHJlbnNbZV07ZC5fY2hpbGRyZW5PYmplY3RzW2VdPW5ldyBqWyJkZWZhdWx0Il0oZCxlLHQpfSksZC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxmfXJldHVybigwLHZbImRlZmF1bHQiXSkodCxlKSwoMCxmWyJkZWZhdWx0Il0pKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxoWyJkZWZhdWx0Il0pKCgwLGFbImRlZmF1bHQiXSkodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsKyIvY2hhbmdlcyIsZnVuY3Rpb24odCl7InVwZGF0ZSI9PT10LnR5cGUmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsaFsiZGVmYXVsdCJdKSgoMCxhWyJkZWZhdWx0Il0pKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTokLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9JC5BTlk6KG4udHlwZT0kLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsoMCxpWyJkZWZhdWx0Il0pKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fZmlsdGVyc1tyXTtuLnR5cGU9PT0kLkFOWT9uLmNhbGxiYWNrKGUpOm4udHlwZT09PSQuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihyKSYmbi5jYWxsYmFjayhlKTpuLnR5cGU9PT0kLkVYQUNUJiZlLmZpZWxkPT09ciYmbi5jYWxsYmFjayhlKX0pfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT13LHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0Ijo5MywiLi9EYXRhT2JqZWN0Q2hpbGQiOjk0LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTQsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjoxNX1dLDk2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLHU9bihjKSxsPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihsKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikscD1uKGQpLGI9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLGg9bihiKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bih5KSxfPWUoIi4vRGF0YU9iamVjdCIpLGc9bihfKSxtPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksaj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSxzKXsoMCx1WyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIGM9KDAscFsiZGVmYXVsdCJdKSh0aGlzLCgwLGFbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscixuLG8saSxzKSksbD1jO3JldHVybiBsLl9zdWJzY3JpcHRpb25zPXt9LGwuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrcisiLVNFTkQ6ICIsZSksbC5fb25DaGFuZ2UoZSl9KSxsLl9hbGxvY2F0ZUxpc3RlbmVycygpLGN9cmV0dXJuKDAsdlsiZGVmYXVsdCJdKSh0LGUpLCgwLGZbImRlZmF1bHQiXSkodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LSIrZS5fdXJsKyItUkNWOiAiLHQpLHQudHlwZSl7Y2FzZSJyZXNwb25zZSI6ZS5fb25SZXNwb25zZSh0KTticmVhaztjYXNlInJlYWQiOmUuX29uUmVhZCh0KX19KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpeygwLGhbImRlZmF1bHQiXSkoKDAsYVsiZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJpbnZpdGVPYnNlcnZlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToiY3JlYXRlIixmcm9tOnQuX3N5bmNoZXIuX293bmVyLHRvOnQuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTp0Ll91cmwsc2NoZW1hOnQuX3NjaGVtYSx2YWx1ZTp0Ll9zeW5jT2JqLmRhdGEsYXV0aG9yaXNlOmV9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJvblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVhZEhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2NlcHQ6ZnVuY3Rpb24oKXt2YXIgbj17dXJsOnIsc3RhdHVzOiJvbiJ9O3QuX3N1YnNjcmlwdGlvbnNbcl09bjt2YXIgbz17fTtyZXR1cm4oMCxpWyJkZWZhdWx0Il0pKHQuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10Ll9jaGlsZHJlbk9iamVjdHNbZV0uZGF0YTtvW2VdPSgwLG0uZGVlcENsb25lKShyKX0pLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzY2hlbWE6dC5fc2NoZW1hLHZlcnNpb246dC5fdmVyc2lvbix2YWx1ZTp7ZGF0YTooMCxtLmRlZXBDbG9uZSkodC5kYXRhKSxjaGlsZHJlbnM6b319fSksbn0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOnJ9fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiU1VCU0NSSVBUSU9OLUVWRU5UOiAiLG4pLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihuKSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5mcm9tLG49dC5fc3Vic2NyaXB0aW9uc1tyXTtkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXTt2YXIgbz17dHlwZTplLmJvZHkudHlwZSx1cmw6cixvYmplY3Q6bn07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlVOLVNVQlNDUklQVElPTi1FVkVOVDogIixvKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobykpfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKGNvbnNvbGUubG9nKCJSRVNQT05TRS1FVkVOVDogIixyKSx0Ll9vblJlc3BvbnNlSGFuZGxlcihyKSl9fSx7a2V5OiJfb25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sYWNjZXB0OmZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOigwLG0uZGVlcENsb25lKSh0LmRhdGEpfX0pfSxyZWplY3Q6ZnVuY3Rpb24ocil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAxLGRlc2M6cn19KX19O3QuX29uUmVhZEhhbmRsZXImJihjb25zb2xlLmxvZygiUkVBRC1FVkVOVDogIixyKSx0Ll9vblJlYWRIYW5kbGVyKHIpKX19LHtrZXk6InN1YnNjcmlwdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zfX1dKSx0fShnWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1qLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEwMCwiLi9EYXRhT2JqZWN0Ijo5MywiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjo2LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE0LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTV9XSw5NzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obykscz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxhPW4ocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4sbyl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBzPXRoaXM7cy5fb3duZXI9dCxzLl91cmw9cixzLl9idXM9bixzLl9jaGlsZHJlbj1vLHMuX2NoYW5nZXM9W10scy5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4oMCxhWyJkZWZhdWx0Il0pKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7clsiZGVmYXVsdCJdPWMsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjEyfV0sOTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5PYmplY3RUeXBlPXIuQ2hhbmdlVHlwZT12b2lkIDA7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIiksaT1uKG8pLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIiksYT1uKHMpLGM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIiksdT1uKGMpLGw9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXsoMCxhWyJkZWZhdWx0Il0pKHRoaXMsZSk7dmFyIHI9dGhpcztyLl9vYnNlcnZlcnM9W10sci5fZmlsdGVycz17fSx0P3IuX2RhdGE9KDAsbC5kZWVwQ2xvbmUpKHQpOnIuX2RhdGE9e30sci5faW50ZXJuYWxPYnNlcnZlKG5ldyBkLHIuX2RhdGEpfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToib2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSl9fSx7a2V5OiJmaW5kIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIuIik7cmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQodCl9fSx7a2V5OiJmaW5kQmVmb3JlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxyPWUuc3BsaXQoIi4iKTtyZXR1cm4gdC5sYXN0PXIucG9wKCksdC5vYmo9dGhpcy5fZmluZFdpdGhTcGxpdChyKSx0fX0se2tleToiX2ZpbmRXaXRoU3BsaXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt0PXRbZV19KSx0fX0se2tleToiX2ZpcmVFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfX0se2tleToiX2lzT2JzZXJ2YWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1PYmplY3R8fGUuY29uc3RydWN0b3I9PT1BcnJheX19LHtrZXk6Il9pbnRlcm5hbE9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBuPWZ1bmN0aW9uKHQpe3IuX29uQ2hhbmdlcyhlLHQpfTtpZih0LmNvbnN0cnVjdG9yPT09T2JqZWN0KXtPYmplY3Qub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgbyBpbiB0KXIuX2lzT2JzZXJ2YWJsZSh0W29dKSYmci5faW50ZXJuYWxPYnNlcnZlKGVbIm5ldyJdKG8pLHRbb10pfWVsc2UgaWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5KXtBcnJheS5vYnNlcnZlKHQsbik7Zm9yKHZhciBpIGluIHQpaWYoci5faXNPYnNlcnZhYmxlKHRbaV0pKXt2YXIgcz1lWyJuZXciXShuZXcgcCh0W2ldLGkpKTtyLl9pbnRlcm5hbE9ic2VydmUocyx0W2ldKX19fX19LHtrZXk6Il9vbkNoYW5nZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztmb3IodmFyIG4gaW4gdCl7dmFyIG89dFtuXS5vYmplY3QsaT12b2lkIDA7aWYoby5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmKGk9aC5PQkpFQ1QpLG8uY29uc3RydWN0b3I9PT1BcnJheSYmKGk9aC5BUlJBWSksInNwbGljZSI9PT10W25dLnR5cGUpIWZ1bmN0aW9uKCl7dmFyIHM9dFtuXS5pbmRleCxhPWVbIm5ldyJdKCIiK3MpLGM9YS50b1N0cmluZygpLHU9dFtuXS5yZW1vdmVkLmxlbmd0aDtpZigwIT09dSl7dmFyIGY9dFtuXS5yZW1vdmVkO2YuZm9yRWFjaChmdW5jdGlvbih0LG4pe3IuX2lzT2JzZXJ2YWJsZSh0KSYmZS5yZW1vdmVJbmRleChzK24pfSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLlJFTU9WRSxvVHlwZTppLGZpZWxkOmMsZGF0YTp1fSl9dmFyIGQ9dFtuXS5hZGRlZENvdW50O2lmKDAhPT1kKXt2YXIgaD1vLnNsaWNlKHMscytkKTtoLmZvckVhY2goZnVuY3Rpb24odCxuKXtpZihyLl9pc09ic2VydmFibGUodCkpe3ZhciBvPWVbIm5ldyJdKG5ldyBwKHQscytuKSk7ci5faW50ZXJuYWxPYnNlcnZlKG8sdCl9fSksci5fZmlyZUV2ZW50KHtjVHlwZTpiLkFERCxvVHlwZTppLGZpZWxkOmMsZGF0YTooMCxsLmRlZXBDbG9uZSkoaCl9KX1zIT09by5sZW5ndGgtMSYmZS5yZUluZGV4RnJvbShvKX0oKTtlbHNle3ZhciBzPWVbIm5ldyJdKHRbbl0ubmFtZSksYT1zLnRvU3RyaW5nKCk7aWYoLTEhPT1hLmluZGV4T2YoIlN5bWJvbCIpKWNvbnRpbnVlO3ZhciBjPW9bdFtuXS5uYW1lXTsidXBkYXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpiLlVQREFURSxvVHlwZTppLGZpZWxkOmEsZGF0YTooMCxsLmRlZXBDbG9uZSkoYyl9KSwiYWRkIj09PXRbbl0udHlwZSYmKHRoaXMuX2ludGVybmFsT2JzZXJ2ZShzLGMpLHRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yi5BREQsb1R5cGU6aSxmaWVsZDphLGRhdGE6KDAsbC5kZWVwQ2xvbmUpKGMpfSkpLCJkZWxldGUiPT09dFtuXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmIuUkVNT1ZFLG9UeXBlOmksZmllbGQ6YX0pfX19fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksZX0oKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpeygwLGFbImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLl9wYXRoPVtdLHRoaXMuX29ic2VydmFibGVzPXt9fXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToicmVtb3ZlSW5kZXgiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9vYnNlcnZhYmxlc1tlXX19LHtrZXk6InJlSW5kZXhGcm9tIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOygwLGlbImRlZmF1bHQiXSkodGhpcy5fb2JzZXJ2YWJsZXMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fb2JzZXJ2YWJsZXNbcl0sbz1lLmluZGV4T2Yobi5vYmopO24uaWR4IT1vJiYobi5pZHg9byxkZWxldGUgdC5fb2JzZXJ2YWJsZXNbcl0sdC5fb2JzZXJ2YWJsZXNbb109bil9KX19LHtrZXk6Im5ldyIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5jb25zdHJ1Y3Rvcj09cCYmKHRoaXMuX29ic2VydmFibGVzW2UuaWR4XT1lKTt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIHQuX3BhdGgucHVzaChlKSx0fX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9wYXRoLnB1c2goZSl9KSx0fX0se2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbih0LHIpezA9PT1yP2U9dC50b1N0cmluZygpOmUrPSIuIit0LnRvU3RyaW5nKCl9KSxlfX1dKSxlfSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpLHRoaXMub2JqPXQsdGhpcy5pZHg9cn1yZXR1cm4oMCx1WyJkZWZhdWx0Il0pKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGI9ci5DaGFuZ2VUeXBlPXtVUERBVEU6InVwZGF0ZSIsQUREOiJhZGQiLFJFTU9WRToicmVtb3ZlIn0saD1yLk9iamVjdFR5cGU9e09CSkVDVDoib2JqZWN0IixBUlJBWToiYXJyYXkifTtyWyJkZWZhdWx0Il09Zn0seyIuLi91dGlscy91dGlscy5qcyI6MTAwLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjcsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTJ9XSw5OTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpLGk9bihvKSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGE9bihzKSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLHU9bihjKSxsPWUoIi4vRGF0YU9iamVjdFJlcG9ydGVyIiksZj1uKGwpLGQ9ZSgiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxwPW4oZCksYj1lKCIuL0RhdGFQcm92aXNpb25hbCIpLGg9bihiKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbil7KDAsYVsiZGVmYXVsdCJdKSh0aGlzLGUpO3ZhciBvPXRoaXM7by5fb3duZXI9dCxvLl9idXM9cixvLl9zdWJVUkw9bi5ydW50aW1lVVJMKyIvc20iLG8uX3JlcG9ydGVycz17fSxvLl9vYnNlcnZlcnM9e30sby5fcHJvdmlzaW9uYWxzPXt9LHIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtpZihlLmZyb20hPT10KXN3aXRjaChjb25zb2xlLmxvZygiU3luY2hlci1SQ1Y6ICIsZSksZS50eXBlKXtjYXNlImZvcndhcmQiOm8uX29uRm9yd2FyZChlKTticmVhaztjYXNlImNyZWF0ZSI6by5fb25SZW1vdGVDcmVhdGUoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOm8uX29uUmVtb3RlRGVsZXRlKGUpfX0pfXJldHVybigwLHVbImRlZmF1bHQiXSkoZSxbe2tleToiY3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyLnJlcG9ydGVyPW4uX293bmVyLHIuc2NoZW1hPWU7dmFyIG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6cixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgaVsiZGVmYXVsdCJdKGZ1bmN0aW9uKHQsaSl7bi5fYnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24obyl7aWYoY29uc29sZS5sb2coImNyZWF0ZS1yZXNwb25zZTogIixvKSwyMDA9PT1vLmJvZHkuY29kZSl7dmFyIHM9by5ib2R5LnJlc291cmNlLGE9bmV3IGZbImRlZmF1bHQiXShuLHMsZSwib24iLHIsby5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTtuLl9yZXBvcnRlcnNbc109YSx0KGEpfWVsc2UgaShvLmJvZHkuZGVzYyl9KX0pfX0se2tleToic3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX293bmVyLHRvOnIuX3N1YlVSTCxib2R5OntzY2hlbWE6ZSxyZXNvdXJjZTp0fX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24obyxpKXtyLl9idXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihuKXtjb25zb2xlLmxvZygic3Vic2NyaWJlLXJlc3BvbnNlOiAiLG4pO3ZhciBzPXIuX3Byb3Zpc2lvbmFsc1t0XTtpZihkZWxldGUgci5fcHJvdmlzaW9uYWxzW3RdLHMmJnMuX3JlbGVhc2VMaXN0ZW5lcnMoKSxuLmJvZHkuY29kZTwyMDApcz1uZXcgaFsiZGVmYXVsdCJdKHIuX293bmVyLHQsci5fYnVzLG4uYm9keS5jaGlsZHJlblJlc291cmNlcyksci5fcHJvdmlzaW9uYWxzW3RdPXM7ZWxzZSBpZigyMDA9PT1uLmJvZHkuY29kZSl7dmFyIGE9bmV3IHBbImRlZmF1bHQiXShyLHQsZSwib24iLG4uYm9keS52YWx1ZSxzLmNoaWxkcmVuLG4uYm9keS52ZXJzaW9uKTtyLl9vYnNlcnZlcnNbdF09YSxvKGEpLHMuYXBwbHkoYSl9ZWxzZSBpKG4uYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJyZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InJlYWQiLGZyb206dC5fb3duZXIsdG86ZX07cmV0dXJuIG5ldyBpWyJkZWZhdWx0Il0oZnVuY3Rpb24oZSxuKXt0Ll9idXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbih0KXtjb25zb2xlLmxvZygicmVhZC1yZXNwb25zZTogIix0KSwyMDA9PT10LmJvZHkuY29kZT9lKHQuYm9keS52YWx1ZSk6bih0LmJvZHkuZGVzYyl9KX0pfX0se2tleToib25Ob3RpZmljYXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcj1lfX0se2tleToiX29uRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuX3JlcG9ydGVyc1tlLmJvZHkudG9dO3IuX29uRm9yd2FyZChlKX19LHtrZXk6Il9vblJlbW90ZUNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbS5zbGljZSgwLC0xMyksbj17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixuKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdO2lmKG4pe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBvPTIwMDtyJiYobz1yKSwyMDA9PT1vJiZuWyJkZWxldGUiXSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixvKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobykpfWVsc2UgdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6Im93bmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXJ9fSx7a2V5OiJyZXBvcnRlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXBvcnRlcnN9fSx7a2V5OiJvYnNlcnZlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLGV9KCk7clsiZGVmYXVsdCJdPXksdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3RPYnNlcnZlciI6OTUsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjo5NiwiLi9EYXRhUHJvdmlzaW9uYWwiOjk3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMn1dLDEwMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSl7aWYoIWUpdGhyb3cgRXJyb3IoIlVSTCBpcyBuZWVkZWQgdG8gc3BsaXQiKTt2YXIgdD0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSxyPSIkMSwkMiwkMyIsbj1lLnJlcGxhY2UodCxyKS5zcGxpdCgiLCIpO25bMF09PT1lJiYoblswXT0iaHR0cHMiLG5bMV09ZSk7dmFyIG89e3R5cGU6blswXSxkb21haW46blsxXSxpZGVudGl0eTpuWzJdfTtyZXR1cm4gb31mdW5jdGlvbiBpKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpLHI9e3VzZXJuYW1lOmUuc3Vic3RyaW5nKDAsdCksZG9tYWluOmUuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCl9O3JldHVybiByfWZ1bmN0aW9uIHMoZSl7cmV0dXJuISgoMCxiWyJkZWZhdWx0Il0pKGUpLmxlbmd0aD4wKX1mdW5jdGlvbiBhKGUpe3JldHVybiBlP0pTT04ucGFyc2UoKDAsZFsiZGVmYXVsdCJdKShlKSk6dm9pZCAwfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9ZS5pbmRleE9mKCJAIik7cmV0dXJuInVzZXI6Ly8iK2Uuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsdCl9ZnVuY3Rpb24gdShlKXt2YXIgdD1vKGUpO3JldHVybiB0LmlkZW50aXR5LnJlcGxhY2UoIi8iLCIiKSsiQCIrdC5kb21haW59ZnVuY3Rpb24gbChlKXtpZigidXNlcjovLyI9PT1lLnN1YnN0cmluZygwLDcpKXt2YXIgdD1vKGUpO2lmKHQuZG9tYWluJiZ0LmlkZW50aXR5KXJldHVybiBlO3Rocm93InVzZXJVUkwgd2l0aCB3cm9uZyBmb3JtYXQifXJldHVybiBjKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgZj1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiKSxkPW4oZikscD1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSxiPW4ocCk7ci5kaXZpZGVVUkw9byxyLmRpdmlkZUVtYWlsPWksci5lbXB0eU9iamVjdD1zLHIuZGVlcENsb25lPWEsci5nZXRVc2VyVVJMRnJvbUVtYWlsPWMsci5nZXRVc2VyRW1haWxGcm9tVVJMPXUsci5jb252ZXJ0VG9Vc2VyVVJMPWx9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IjoyLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjd9XX0se30sWzkyXSkoOTIpfSk7CgoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKiEKICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMcwogKiBJUHY2IFN1cHBvcnQKICoKICogVmVyc2lvbjogMS4xOC4xCiAqCiAqIEF1dGhvcjogUm9kbmV5IFJlaG0KICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5pby9VUkkuanMvCiAqCiAqIExpY2Vuc2VkIHVuZGVyCiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZQogKgogKi8KCihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICd1c2Ugc3RyaWN0JzsKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanMKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAvLyBOb2RlCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLgogICAgZGVmaW5lKGZhY3RvcnkpOwogIH0gZWxzZSB7CiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQogICAgcm9vdC5JUHY2ID0gZmFjdG9yeShyb290KTsKICB9Cn0odGhpcywgZnVuY3Rpb24gKHJvb3QpIHsKICAndXNlIHN0cmljdCc7CgogIC8qCiAgdmFyIF9pbiA9ICJmZTgwOjAwMDA6MDAwMDowMDAwOjAyMDQ6NjFmZjpmZTlkOmYxNTYiOwogIHZhciBfb3V0ID0gSVB2Ni5iZXN0KF9pbik7CiAgdmFyIF9leHBlY3RlZCA9ICJmZTgwOjoyMDQ6NjFmZjpmZTlkOmYxNTYiOwoKICBjb25zb2xlLmxvZyhfaW4sIF9vdXQsIF9leHBlY3RlZCwgX291dCA9PT0gX2V4cGVjdGVkKTsKICAqLwoKICAvLyBzYXZlIGN1cnJlbnQgSVB2NiB2YXJpYWJsZSwgaWYgYW55CiAgdmFyIF9JUHY2ID0gcm9vdCAmJiByb290LklQdjY7CgogIGZ1bmN0aW9uIGJlc3RQcmVzZW50YXRpb24oYWRkcmVzcykgewogICAgLy8gYmFzZWQgb246CiAgICAvLyBKYXZhc2NyaXB0IHRvIHRlc3QgYW4gSVB2NiBhZGRyZXNzIGZvciBwcm9wZXIgZm9ybWF0LCBhbmQgdG8KICAgIC8vIHByZXNlbnQgdGhlICJiZXN0IHRleHQgcmVwcmVzZW50YXRpb24iIGFjY29yZGluZyB0byBJRVRGIERyYWZ0IFJGQyBhdAogICAgLy8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi02bWFuLXRleHQtYWRkci1yZXByZXNlbnRhdGlvbi0wNAogICAgLy8gOCBGZWIgMjAxMCBSaWNoIEJyb3duLCBEYXJ0d2FyZSwgTExDCiAgICAvLyBQbGVhc2UgZmVlbCBmcmVlIHRvIHVzZSB0aGlzIGNvZGUgYXMgbG9uZyBhcyB5b3UgcHJvdmlkZSBhIGxpbmsgdG8KICAgIC8vIGh0dHA6Ly93d3cuaW50ZXJtYXBwZXIuY29tCiAgICAvLyBodHRwOi8vaW50ZXJtYXBwZXIuY29tL3N1cHBvcnQvdG9vbHMvSVBWNi1WYWxpZGF0b3IuYXNweAogICAgLy8gaHR0cDovL2Rvd25sb2FkLmRhcnR3YXJlLmNvbS90aGlyZHBhcnR5L2lwdjZ2YWxpZGF0b3IuanMKCiAgICB2YXIgX2FkZHJlc3MgPSBhZGRyZXNzLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgc2VnbWVudHMgPSBfYWRkcmVzcy5zcGxpdCgnOicpOwogICAgdmFyIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDsKICAgIHZhciB0b3RhbCA9IDg7CgogICAgLy8gdHJpbSBjb2xvbnMgKDo6IG9yIDo6YTpiOmPigKYgb3Ig4oCmYTpiOmM6OikKICAgIGlmIChzZWdtZW50c1swXSA9PT0gJycgJiYgc2VnbWVudHNbMV0gPT09ICcnICYmIHNlZ21lbnRzWzJdID09PSAnJykgewogICAgICAvLyBtdXN0IGhhdmUgYmVlbiA6OgogICAgICAvLyByZW1vdmUgZmlyc3QgdHdvIGl0ZW1zCiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7CiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7CiAgICB9IGVsc2UgaWYgKHNlZ21lbnRzWzBdID09PSAnJyAmJiBzZWdtZW50c1sxXSA9PT0gJycpIHsKICAgICAgLy8gbXVzdCBoYXZlIGJlZW4gOjp4eHh4CiAgICAgIC8vIHJlbW92ZSB0aGUgZmlyc3QgaXRlbQogICAgICBzZWdtZW50cy5zaGlmdCgpOwogICAgfSBlbHNlIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXSA9PT0gJycgJiYgc2VnbWVudHNbbGVuZ3RoIC0gMl0gPT09ICcnKSB7CiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIHh4eHg6OgogICAgICBzZWdtZW50cy5wb3AoKTsKICAgIH0KCiAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7CgogICAgLy8gYWRqdXN0IHRvdGFsIHNlZ21lbnRzIGZvciBJUHY0IHRyYWlsZXIKICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXS5pbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICAgIC8vIGZvdW5kIGEgIi4iIHdoaWNoIG1lYW5zIElQdjQKICAgICAgdG90YWwgPSA3OwogICAgfQoKICAgIC8vIGZpbGwgZW1wdHkgc2VnbWVudHMgdGhlbSB3aXRoICIwMDAwIgogICAgdmFyIHBvczsKICAgIGZvciAocG9zID0gMDsgcG9zIDwgbGVuZ3RoOyBwb3MrKykgewogICAgICBpZiAoc2VnbWVudHNbcG9zXSA9PT0gJycpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3MgPCB0b3RhbCkgewogICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAxLCAnMDAwMCcpOwogICAgICB3aGlsZSAoc2VnbWVudHMubGVuZ3RoIDwgdG90YWwpIHsKICAgICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAwLCAnMDAwMCcpOwogICAgICB9CiAgICB9CgogICAgLy8gc3RyaXAgbGVhZGluZyB6ZXJvcwogICAgdmFyIF9zZWdtZW50czsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWw7IGkrKykgewogICAgICBfc2VnbWVudHMgPSBzZWdtZW50c1tpXS5zcGxpdCgnJyk7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMyA7IGorKykgewogICAgICAgIGlmIChfc2VnbWVudHNbMF0gPT09ICcwJyAmJiBfc2VnbWVudHMubGVuZ3RoID4gMSkgewogICAgICAgICAgX3NlZ21lbnRzLnNwbGljZSgwLDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHNlZ21lbnRzW2ldID0gX3NlZ21lbnRzLmpvaW4oJycpOwogICAgfQoKICAgIC8vIGZpbmQgbG9uZ2VzdCBzZXF1ZW5jZSBvZiB6ZXJvZXMgYW5kIGNvYWxlc2NlIHRoZW0gaW50byBvbmUgc2VnbWVudAogICAgdmFyIGJlc3QgPSAtMTsKICAgIHZhciBfYmVzdCA9IDA7CiAgICB2YXIgX2N1cnJlbnQgPSAwOwogICAgdmFyIGN1cnJlbnQgPSAtMTsKICAgIHZhciBpbnplcm9lcyA9IGZhbHNlOwogICAgLy8gaTsgYWxyZWFkeSBkZWNsYXJlZAoKICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7CiAgICAgIGlmIChpbnplcm9lcykgewogICAgICAgIGlmIChzZWdtZW50c1tpXSA9PT0gJzAnKSB7CiAgICAgICAgICBfY3VycmVudCArPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbnplcm9lcyA9IGZhbHNlOwogICAgICAgICAgaWYgKF9jdXJyZW50ID4gX2Jlc3QpIHsKICAgICAgICAgICAgYmVzdCA9IGN1cnJlbnQ7CiAgICAgICAgICAgIF9iZXN0ID0gX2N1cnJlbnQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChzZWdtZW50c1tpXSA9PT0gJzAnKSB7CiAgICAgICAgICBpbnplcm9lcyA9IHRydWU7CiAgICAgICAgICBjdXJyZW50ID0gaTsKICAgICAgICAgIF9jdXJyZW50ID0gMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoX2N1cnJlbnQgPiBfYmVzdCkgewogICAgICBiZXN0ID0gY3VycmVudDsKICAgICAgX2Jlc3QgPSBfY3VycmVudDsKICAgIH0KCiAgICBpZiAoX2Jlc3QgPiAxKSB7CiAgICAgIHNlZ21lbnRzLnNwbGljZShiZXN0LCBfYmVzdCwgJycpOwogICAgfQoKICAgIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDsKCiAgICAvLyBhc3NlbWJsZSByZW1haW5pbmcgc2VnbWVudHMKICAgIHZhciByZXN1bHQgPSAnJzsKICAgIGlmIChzZWdtZW50c1swXSA9PT0gJycpICB7CiAgICAgIHJlc3VsdCA9ICc6JzsKICAgIH0KCiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgcmVzdWx0ICs9IHNlZ21lbnRzW2ldOwogICAgICBpZiAoaSA9PT0gbGVuZ3RoIC0gMSkgewogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICByZXN1bHQgKz0gJzonOwogICAgfQoKICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXSA9PT0gJycpIHsKICAgICAgcmVzdWx0ICs9ICc6JzsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gbm9Db25mbGljdCgpIHsKICAgIC8qanNoaW50IHZhbGlkdGhpczogdHJ1ZSAqLwogICAgaWYgKHJvb3QuSVB2NiA9PT0gdGhpcykgewogICAgICByb290LklQdjYgPSBfSVB2NjsKICAgIH0KICAKICAgIHJldHVybiB0aGlzOwogIH0KCiAgcmV0dXJuIHsKICAgIGJlc3Q6IGJlc3RQcmVzZW50YXRpb24sCiAgICBub0NvbmZsaWN0OiBub0NvbmZsaWN0CiAgfTsKfSkpOwoKfSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qIQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzCiAqIFNlY29uZCBMZXZlbCBEb21haW4gKFNMRCkgU3VwcG9ydAogKgogKiBWZXJzaW9uOiAxLjE4LjEKICoKICogQXV0aG9yOiBSb2RuZXkgUmVobQogKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy8KICoKICogTGljZW5zZWQgdW5kZXIKICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlCiAqCiAqLwoKKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7CiAgJ3VzZSBzdHJpY3QnOwogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qcwogIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHsKICAgIC8vIE5vZGUKICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuCiAgICBkZWZpbmUoZmFjdG9yeSk7CiAgfSBlbHNlIHsKICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICByb290LlNlY29uZExldmVsRG9tYWlucyA9IGZhY3Rvcnkocm9vdCk7CiAgfQp9KHRoaXMsIGZ1bmN0aW9uIChyb290KSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvLyBzYXZlIGN1cnJlbnQgU2Vjb25kTGV2ZWxEb21haW5zIHZhcmlhYmxlLCBpZiBhbnkKICB2YXIgX1NlY29uZExldmVsRG9tYWlucyA9IHJvb3QgJiYgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnM7CgogIHZhciBTTEQgPSB7CiAgICAvLyBsaXN0IG9mIGtub3duIFNlY29uZCBMZXZlbCBEb21haW5zCiAgICAvLyBjb252ZXJ0ZWQgbGlzdCBvZiBTTERzIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dhdmluZ21pbGxlci9zZWNvbmQtbGV2ZWwtZG9tYWlucwogICAgLy8gLS0tLQogICAgLy8gcHVibGljc3VmZml4Lm9yZyBpcyBtb3JlIGN1cnJlbnQgYW5kIGFjdHVhbGx5IHVzZWQgYnkgYSBjb3VwbGUgb2YgYnJvd3NlcnMgaW50ZXJuYWxseS4KICAgIC8vIGRvd25zaWRlIGlzIGl0IGFsc28gY29udGFpbnMgZG9tYWlucyBsaWtlICJkeW5kbnMub3JnIiAtIHdoaWNoIGlzIGZpbmUgZm9yIHRoZSBzZWN1cml0eQogICAgLy8gaXNzdWVzIGJyb3dzZXIgaGF2ZSB0byBkZWFsIHdpdGggKFNPUCBmb3IgY29va2llcywgZXRjKSAtIGJ1dCBpcyB3YXkgb3ZlcmJvYXJkIGZvciBVUkkuanMKICAgIC8vIC0tLS0KICAgIGxpc3Q6IHsKICAgICAgJ2FjJzonIGNvbSBnb3YgbWlsIG5ldCBvcmcgJywKICAgICAgJ2FlJzonIGFjIGNvIGdvdiBtaWwgbmFtZSBuZXQgb3JnIHBybyBzY2ggJywKICAgICAgJ2FmJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2FsJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdhbyc6JyBjbyBlZCBndiBpdCBvZyBwYiAnLAogICAgICAnYXInOicgY29tIGVkdSBnb2IgZ292IGludCBtaWwgbmV0IG9yZyB0dXIgJywKICAgICAgJ2F0JzonIGFjIGNvIGd2IG9yICcsCiAgICAgICdhdSc6JyBhc24gY29tIGNzaXJvIGVkdSBnb3YgaWQgbmV0IG9yZyAnLAogICAgICAnYmEnOicgY28gY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgcnMgdW5iaSB1bm1vIHVuc2EgdW50eiB1bnplICcsCiAgICAgICdiYic6JyBiaXogY28gY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnIHN0b3JlIHR2ICcsCiAgICAgICdiaCc6JyBiaXogY2MgY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdibic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdibyc6JyBjb20gZWR1IGdvYiBnb3YgaW50IG1pbCBuZXQgb3JnIHR2ICcsCiAgICAgICdicic6JyBhZG0gYWR2IGFnciBhbSBhcnEgYXJ0IGF0byBiIGJpbyBibG9nIGJtZCBjaW0gY25nIGNudCBjb20gY29vcCBlY24gZWR1IGVuZyBlc3AgZXRjIGV0aSBmYXIgZmxvZyBmbSBmbmQgZm90IGZzdCBnMTIgZ2dmIGdvdiBpbWIgaW5kIGluZiBqb3IganVzIGxlbCBtYXQgbWVkIG1pbCBtdXMgbmV0IG5vbSBub3QgbnRyIG9kbyBvcmcgcHBnIHBybyBwc2MgcHNpIHFzbCByZWMgc2xnIHNydiB0bXAgdHJkIHR1ciB0diB2ZXQgdmxvZyB3aWtpIHpsZyAnLAogICAgICAnYnMnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnYnonOicgZHUgZXQgb20gb3YgcmcgJywKICAgICAgJ2NhJzonIGFiIGJjIG1iIG5iIG5mIG5sIG5zIG50IG51IG9uIHBlIHFjIHNrIHlrICcsCiAgICAgICdjayc6JyBiaXogY28gZWR1IGdlbiBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdjbic6JyBhYyBhaCBiaiBjb20gY3EgZWR1IGZqIGdkIGdvdiBncyBneCBneiBoYSBoYiBoZSBoaSBobCBobiBqbCBqcyBqeCBsbiBtaWwgbmV0IG5tIG54IG9yZyBxaCBzYyBzZCBzaCBzbiBzeCB0aiB0dyB4aiB4eiB5biB6aiAnLAogICAgICAnY28nOicgY29tIGVkdSBnb3YgbWlsIG5ldCBub20gb3JnICcsCiAgICAgICdjcic6JyBhYyBjIGNvIGVkIGZpIGdvIG9yIHNhICcsCiAgICAgICdjeSc6JyBhYyBiaXogY29tIGVrbG9nZXMgZ292IGx0ZCBuYW1lIG5ldCBvcmcgcGFybGlhbWVudCBwcmVzcyBwcm8gdG0gJywKICAgICAgJ2RvJzonIGFydCBjb20gZWR1IGdvYiBnb3YgbWlsIG5ldCBvcmcgc2xkIHdlYiAnLAogICAgICAnZHonOicgYXJ0IGFzc28gY29tIGVkdSBnb3YgbmV0IG9yZyBwb2wgJywKICAgICAgJ2VjJzonIGNvbSBlZHUgZmluIGdvdiBpbmZvIG1lZCBtaWwgbmV0IG9yZyBwcm8gJywKICAgICAgJ2VnJzonIGNvbSBlZHUgZXVuIGdvdiBtaWwgbmFtZSBuZXQgb3JnIHNjaSAnLAogICAgICAnZXInOicgY29tIGVkdSBnb3YgaW5kIG1pbCBuZXQgb3JnIHJvY2hlc3QgdyAnLAogICAgICAnZXMnOicgY29tIGVkdSBnb2Igbm9tIG9yZyAnLAogICAgICAnZXQnOicgYml6IGNvbSBlZHUgZ292IGluZm8gbmFtZSBuZXQgb3JnICcsCiAgICAgICdmaic6JyBhYyBiaXogY29tIGluZm8gbWlsIG5hbWUgbmV0IG9yZyBwcm8gJywKICAgICAgJ2ZrJzonIGFjIGNvIGdvdiBuZXQgbm9tIG9yZyAnLAogICAgICAnZnInOicgYXNzbyBjb20gZiBnb3V2IG5vbSBwcmQgcHJlc3NlIHRtICcsCiAgICAgICdnZyc6JyBjbyBuZXQgb3JnICcsCiAgICAgICdnaCc6JyBjb20gZWR1IGdvdiBtaWwgb3JnICcsCiAgICAgICdnbic6JyBhYyBjb20gZ292IG5ldCBvcmcgJywKICAgICAgJ2dyJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdndCc6JyBjb20gZWR1IGdvYiBpbmQgbWlsIG5ldCBvcmcgJywKICAgICAgJ2d1JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2hrJzonIGNvbSBlZHUgZ292IGlkdiBuZXQgb3JnICcsCiAgICAgICdodSc6JyAyMDAwIGFncmFyIGJvbHQgY2FzaW5vIGNpdHkgY28gZXJvdGljYSBlcm90aWthIGZpbG0gZm9ydW0gZ2FtZXMgaG90ZWwgaW5mbyBpbmdhdGxhbiBqb2dhc3oga29ueXZlbG8gbGFrYXMgbWVkaWEgbmV3cyBvcmcgcHJpdiByZWtsYW0gc2V4IHNob3Agc3BvcnQgc3VsaSBzemV4IHRtIHRvenNkZSB1dGF6YXMgdmlkZW8gJywKICAgICAgJ2lkJzonIGFjIGNvIGdvIG1pbCBuZXQgb3Igc2NoIHdlYiAnLAogICAgICAnaWwnOicgYWMgY28gZ292IGlkZiBrMTIgbXVuaSBuZXQgb3JnICcsCiAgICAgICdpbic6JyBhYyBjbyBlZHUgZXJuZXQgZmlybSBnZW4gZ292IGkgaW5kIG1pbCBuZXQgbmljIG9yZyByZXMgJywKICAgICAgJ2lxJzonIGNvbSBlZHUgZ292IGkgbWlsIG5ldCBvcmcgJywKICAgICAgJ2lyJzonIGFjIGNvIGRuc3NlYyBnb3YgaSBpZCBuZXQgb3JnIHNjaCAnLAogICAgICAnaXQnOicgZWR1IGdvdiAnLAogICAgICAnamUnOicgY28gbmV0IG9yZyAnLAogICAgICAnam8nOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJywKICAgICAgJ2pwJzonIGFjIGFkIGNvIGVkIGdvIGdyIGxnIG5lIG9yICcsCiAgICAgICdrZSc6JyBhYyBjbyBnbyBpbmZvIG1lIG1vYmkgbmUgb3Igc2MgJywKICAgICAgJ2toJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnIHBlciAnLAogICAgICAna2knOicgYml6IGNvbSBkZSBlZHUgZ292IGluZm8gbW9iIG5ldCBvcmcgdGVsICcsCiAgICAgICdrbSc6JyBhc3NvIGNvbSBjb29wIGVkdSBnb3V2IGsgbWVkZWNpbiBtaWwgbm9tIG5vdGFpcmVzIHBoYXJtYWNpZW5zIHByZXNzZSB0bSB2ZXRlcmluYWlyZSAnLAogICAgICAna24nOicgZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdrcic6JyBhYyBidXNhbiBjaHVuZ2J1ayBjaHVuZ25hbSBjbyBkYWVndSBkYWVqZW9uIGVzIGdhbmd3b24gZ28gZ3dhbmdqdSBneWVvbmdidWsgZ3llb25nZ2kgZ3llb25nbmFtIGhzIGluY2hlb24gamVqdSBqZW9uYnVrIGplb25uYW0gayBrZyBtaWwgbXMgbmUgb3IgcGUgcmUgc2Mgc2VvdWwgdWxzYW4gJywKICAgICAgJ2t3JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2t5JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ2t6JzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdsYic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdsayc6JyBhc3NuIGNvbSBlZHUgZ292IGdycCBob3RlbCBpbnQgbHRkIG5ldCBuZ28gb3JnIHNjaCBzb2Mgd2ViICcsCiAgICAgICdscic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdsdic6JyBhc24gY29tIGNvbmYgZWR1IGdvdiBpZCBtaWwgbmV0IG9yZyAnLAogICAgICAnbHknOicgY29tIGVkdSBnb3YgaWQgbWVkIG5ldCBvcmcgcGxjIHNjaCAnLAogICAgICAnbWEnOicgYWMgY28gZ292IG0gbmV0IG9yZyBwcmVzcyAnLAogICAgICAnbWMnOicgYXNzbyB0bSAnLAogICAgICAnbWUnOicgYWMgY28gZWR1IGdvdiBpdHMgbmV0IG9yZyBwcml2ICcsCiAgICAgICdtZyc6JyBjb20gZWR1IGdvdiBtaWwgbm9tIG9yZyBwcmQgdG0gJywKICAgICAgJ21rJzonIGNvbSBlZHUgZ292IGluZiBuYW1lIG5ldCBvcmcgcHJvICcsCiAgICAgICdtbCc6JyBjb20gZWR1IGdvdiBuZXQgb3JnIHByZXNzZSAnLAogICAgICAnbW4nOicgZWR1IGdvdiBvcmcgJywKICAgICAgJ21vJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ210JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJywKICAgICAgJ212JzonIGFlcm8gYml6IGNvbSBjb29wIGVkdSBnb3YgaW5mbyBpbnQgbWlsIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvICcsCiAgICAgICdtdyc6JyBhYyBjbyBjb20gY29vcCBlZHUgZ292IGludCBtdXNldW0gbmV0IG9yZyAnLAogICAgICAnbXgnOicgY29tIGVkdSBnb2IgbmV0IG9yZyAnLAogICAgICAnbXknOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJywKICAgICAgJ25mJzonIGFydHMgY29tIGZpcm0gaW5mbyBuZXQgb3RoZXIgcGVyIHJlYyBzdG9yZSB3ZWIgJywKICAgICAgJ25nJzonIGJpeiBjb20gZWR1IGdvdiBtaWwgbW9iaSBuYW1lIG5ldCBvcmcgc2NoICcsCiAgICAgICduaSc6JyBhYyBjbyBjb20gZWR1IGdvYiBtaWwgbmV0IG5vbSBvcmcgJywKICAgICAgJ25wJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICducic6JyBiaXogY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnICcsCiAgICAgICdvbSc6JyBhYyBiaXogY28gY29tIGVkdSBnb3YgbWVkIG1pbCBtdXNldW0gbmV0IG9yZyBwcm8gc2NoICcsCiAgICAgICdwZSc6JyBjb20gZWR1IGdvYiBtaWwgbmV0IG5vbSBvcmcgc2xkICcsCiAgICAgICdwaCc6JyBjb20gZWR1IGdvdiBpIG1pbCBuZXQgbmdvIG9yZyAnLAogICAgICAncGsnOicgYml6IGNvbSBlZHUgZmFtIGdvYiBnb2sgZ29uIGdvcCBnb3MgZ292IG5ldCBvcmcgd2ViICcsCiAgICAgICdwbCc6JyBhcnQgYmlhbHlzdG9rIGJpeiBjb20gZWR1IGdkYSBnZGFuc2sgZ29yem93IGdvdiBpbmZvIGthdG93aWNlIGtyYWtvdyBsb2R6IGx1YmxpbiBtaWwgbmV0IG5nbyBvbHN6dHluIG9yZyBwb3puYW4gcHdyIHJhZG9tIHNsdXBzayBzemN6ZWNpbiB0b3J1biB3YXJzemF3YSB3YXcgd3JvYyB3cm9jbGF3IHpnb3JhICcsCiAgICAgICdwcic6JyBhYyBiaXogY29tIGVkdSBlc3QgZ292IGluZm8gaXNsYSBuYW1lIG5ldCBvcmcgcHJvIHByb2YgJywKICAgICAgJ3BzJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgcGxvIHNlYyAnLAogICAgICAncHcnOicgYmVsYXUgY28gZWQgZ28gbmUgb3IgJywKICAgICAgJ3JvJzonIGFydHMgY29tIGZpcm0gaW5mbyBub20gbnQgb3JnIHJlYyBzdG9yZSB0bSB3d3cgJywKICAgICAgJ3JzJzonIGFjIGNvIGVkdSBnb3YgaW4gb3JnICcsCiAgICAgICdzYic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdzYyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsCiAgICAgICdzaCc6JyBjbyBjb20gZWR1IGdvdiBuZXQgbm9tIG9yZyAnLAogICAgICAnc2wnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLAogICAgICAnc3QnOicgY28gY29tIGNvbnN1bGFkbyBlZHUgZW1iYWl4YWRhIGdvdiBtaWwgbmV0IG9yZyBwcmluY2lwZSBzYW90b21lIHN0b3JlICcsCiAgICAgICdzdic6JyBjb20gZWR1IGdvYiBvcmcgcmVkICcsCiAgICAgICdzeic6JyBhYyBjbyBvcmcgJywKICAgICAgJ3RyJzonIGF2IGJicyBiZWwgYml6IGNvbSBkciBlZHUgZ2VuIGdvdiBpbmZvIGsxMiBuYW1lIG5ldCBvcmcgcG9sIHRlbCB0c2sgdHYgd2ViICcsCiAgICAgICd0dCc6JyBhZXJvIGJpeiBjYXQgY28gY29tIGNvb3AgZWR1IGdvdiBpbmZvIGludCBqb2JzIG1pbCBtb2JpIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvIHRlbCB0cmF2ZWwgJywKICAgICAgJ3R3JzonIGNsdWIgY29tIGViaXogZWR1IGdhbWUgZ292IGlkdiBtaWwgbmV0IG9yZyAnLAogICAgICAnbXUnOicgYWMgY28gY29tIGdvdiBuZXQgb3Igb3JnICcsCiAgICAgICdteic6JyBhYyBjbyBlZHUgZ292IG9yZyAnLAogICAgICAnbmEnOicgY28gY29tICcsCiAgICAgICdueic6JyBhYyBjbyBjcmkgZ2VlayBnZW4gZ292dCBoZWFsdGggaXdpIG1hb3JpIG1pbCBuZXQgb3JnIHBhcmxpYW1lbnQgc2Nob29sICcsCiAgICAgICdwYSc6JyBhYm8gYWMgY29tIGVkdSBnb2IgaW5nIG1lZCBuZXQgbm9tIG9yZyBzbGQgJywKICAgICAgJ3B0JzonIGNvbSBlZHUgZ292IGludCBuZXQgbm9tZSBvcmcgcHVibCAnLAogICAgICAncHknOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgJywKICAgICAgJ3FhJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsCiAgICAgICdyZSc6JyBhc3NvIGNvbSBub20gJywKICAgICAgJ3J1JzonIGFjIGFkeWdleWEgYWx0YWkgYW11ciBhcmtoYW5nZWxzayBhc3RyYWtoYW4gYmFzaGtpcmlhIGJlbGdvcm9kIGJpciBicnlhbnNrIGJ1cnlhdGlhIGNiZyBjaGVsIGNoZWx5YWJpbnNrIGNoaXRhIGNodWtvdGthIGNodXZhc2hpYSBjb20gZGFnZXN0YW4gZS1idXJnIGVkdSBnb3YgZ3Jvem55IGludCBpcmt1dHNrIGl2YW5vdm8gaXpoZXZzayBqYXIgam9zaGthci1vbGEga2FsbXlraWEga2FsdWdhIGthbWNoYXRrYSBrYXJlbGlhIGthemFuIGtjaHIga2VtZXJvdm8ga2hhYmFyb3ZzayBraGFrYXNzaWEga2h2IGtpcm92IGtvZW5pZyBrb21pIGtvc3Ryb21hIGtyYW5veWFyc2sga3ViYW4ga3VyZ2FuIGt1cnNrIGxpcGV0c2sgbWFnYWRhbiBtYXJpIG1hcmktZWwgbWFyaW5lIG1pbCBtb3Jkb3ZpYSBtb3NyZWcgbXNrIG11cm1hbnNrIG5hbGNoaWsgbmV0IG5ub3Ygbm92IG5vdm9zaWJpcnNrIG5zayBvbXNrIG9yZW5idXJnIG9yZyBvcnlvbCBwZW56YSBwZXJtIHBwIHBza292IHB0eiBybmQgcnlhemFuIHNha2hhbGluIHNhbWFyYSBzYXJhdG92IHNpbWJpcnNrIHNtb2xlbnNrIHNwYiBzdGF2cm9wb2wgc3R2IHN1cmd1dCB0YW1ib3YgdGF0YXJzdGFuIHRvbSB0b21zayB0c2FyaXRzeW4gdHNrIHR1bGEgdHV2YSB0dmVyIHR5dW1lbiB1ZG0gdWRtdXJ0aWEgdWxhbi11ZGUgdmxhZGlrYXZrYXogdmxhZGltaXIgdmxhZGl2b3N0b2sgdm9sZ29ncmFkIHZvbG9nZGEgdm9yb25lemggdnJuIHZ5YXRrYSB5YWt1dGlhIHlhbWFsIHlla2F0ZXJpbmJ1cmcgeXV6aG5vLXNha2hhbGluc2sgJywKICAgICAgJ3J3JzonIGFjIGNvIGNvbSBlZHUgZ291diBnb3YgaW50IG1pbCBuZXQgJywKICAgICAgJ3NhJzonIGNvbSBlZHUgZ292IG1lZCBuZXQgb3JnIHB1YiBzY2ggJywKICAgICAgJ3NkJzonIGNvbSBlZHUgZ292IGluZm8gbWVkIG5ldCBvcmcgdHYgJywKICAgICAgJ3NlJzonIGEgYWMgYiBiZCBjIGQgZSBmIGcgaCBpIGsgbCBtIG4gbyBvcmcgcCBwYXJ0aSBwcCBwcmVzcyByIHMgdCB0bSB1IHcgeCB5IHogJywKICAgICAgJ3NnJzonIGNvbSBlZHUgZ292IGlkbiBuZXQgb3JnIHBlciAnLAogICAgICAnc24nOicgYXJ0IGNvbSBlZHUgZ291diBvcmcgcGVyc28gdW5pdiAnLAogICAgICAnc3knOicgY29tIGVkdSBnb3YgbWlsIG5ldCBuZXdzIG9yZyAnLAogICAgICAndGgnOicgYWMgY28gZ28gaW4gbWkgbmV0IG9yICcsCiAgICAgICd0aic6JyBhYyBiaXogY28gY29tIGVkdSBnbyBnb3YgaW5mbyBpbnQgbWlsIG5hbWUgbmV0IG5pYyBvcmcgdGVzdCB3ZWIgJywKICAgICAgJ3RuJzonIGFncmluZXQgY29tIGRlZmVuc2UgZWR1bmV0IGVucyBmaW4gZ292IGluZCBpbmZvIGludGwgbWluY29tIG5hdCBuZXQgb3JnIHBlcnNvIHJucnQgcm5zIHJudSB0b3VyaXNtICcsCiAgICAgICd0eic6JyBhYyBjbyBnbyBuZSBvciAnLAogICAgICAndWEnOicgYml6IGNoZXJrYXNzeSBjaGVybmlnb3YgY2hlcm5vdnRzeSBjayBjbiBjbyBjb20gY3JpbWVhIGN2IGRuIGRuZXByb3BldHJvdnNrIGRvbmV0c2sgZHAgZWR1IGdvdiBpZiBpbiBpdmFuby1mcmFua2l2c2sga2gga2hhcmtvdiBraGVyc29uIGtobWVsbml0c2tpeSBraWV2IGtpcm92b2dyYWQga20ga3Iga3Mga3YgbGcgbHVnYW5zayBsdXRzayBsdml2IG1lIG1rIG5ldCBuaWtvbGFldiBvZCBvZGVzc2Egb3JnIHBsIHBvbHRhdmEgcHAgcm92bm8gcnYgc2ViYXN0b3BvbCBzdW15IHRlIHRlcm5vcGlsIHV6aGdvcm9kIHZpbm5pY2Egdm4gemFwb3Jpemh6aGUgemhpdG9taXIgenAgenQgJywKICAgICAgJ3VnJzonIGFjIGNvIGdvIG5lIG9yIG9yZyBzYyAnLAogICAgICAndWsnOicgYWMgYmwgYnJpdGlzaC1saWJyYXJ5IGNvIGN5bSBnb3YgZ292dCBpY25ldCBqZXQgbGVhIGx0ZCBtZSBtaWwgbW9kIG5hdGlvbmFsLWxpYnJhcnktc2NvdGxhbmQgbmVsIG5ldCBuaHMgbmljIG5scyBvcmcgb3JnbiBwYXJsaWFtZW50IHBsYyBwb2xpY2Ugc2NoIHNjb3Qgc29jICcsCiAgICAgICd1cyc6JyBkbmkgZmVkIGlzYSBraWRzIG5zbiAnLAogICAgICAndXknOicgY29tIGVkdSBndWIgbWlsIG5ldCBvcmcgJywKICAgICAgJ3ZlJzonIGNvIGNvbSBlZHUgZ29iIGluZm8gbWlsIG5ldCBvcmcgd2ViICcsCiAgICAgICd2aSc6JyBjbyBjb20gazEyIG5ldCBvcmcgJywKICAgICAgJ3ZuJzonIGFjIGJpeiBjb20gZWR1IGdvdiBoZWFsdGggaW5mbyBpbnQgbmFtZSBuZXQgb3JnIHBybyAnLAogICAgICAneWUnOicgY28gY29tIGdvdiBsdGQgbWUgbmV0IG9yZyBwbGMgJywKICAgICAgJ3l1JzonIGFjIGNvIGVkdSBnb3Ygb3JnICcsCiAgICAgICd6YSc6JyBhYyBhZ3JpYyBhbHQgYm91cnNlIGNpdHkgY28gY3liZXJuZXQgZGIgZWR1IGdvdiBncm9uZGFyIGlhY2Nlc3MgaW10IGluY2EgbGFuZGVzaWduIGxhdyBtaWwgbmV0IG5nbyBuaXMgbm9tIG9saXZldHRpIG9yZyBwaXggc2Nob29sIHRtIHdlYiAnLAogICAgICAnem0nOicgYWMgY28gY29tIGVkdSBnb3YgbmV0IG9yZyBzY2ggJwogICAgfSwKICAgIC8vIGdvcmhpbGwgMjAxMy0xMC0yNTogVXNpbmcgaW5kZXhPZigpIGluc3RlYWQgUmVnZXhwKCkuIFNpZ25pZmljYW50IGJvb3N0CiAgICAvLyBpbiBib3RoIHBlcmZvcm1hbmNlIGFuZCBtZW1vcnkgZm9vdHByaW50LiBObyBpbml0aWFsaXphdGlvbiByZXF1aXJlZC4KICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3VyaS1qcy1zbGQtcmVnZXgtdnMtYmluYXJ5LXNlYXJjaC80CiAgICAvLyBGb2xsb3dpbmcgbWV0aG9kcyB1c2UgbGFzdEluZGV4T2YoKSByYXRoZXIgdGhhbiBhcnJheS5zcGxpdCgpIGluIG9yZGVyCiAgICAvLyB0byBhdm9pZCBhbnkgbWVtb3J5IGFsbG9jYXRpb25zLgogICAgaGFzOiBmdW5jdGlvbihkb21haW4pIHsKICAgICAgdmFyIHRsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicpOwogICAgICBpZiAodGxkT2Zmc2V0IDw9IDAgfHwgdGxkT2Zmc2V0ID49IChkb21haW4ubGVuZ3RoLTEpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7CiAgICAgIGlmIChzbGRPZmZzZXQgPD0gMCB8fCBzbGRPZmZzZXQgPj0gKHRsZE9mZnNldC0xKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgc2xkTGlzdCA9IFNMRC5saXN0W2RvbWFpbi5zbGljZSh0bGRPZmZzZXQrMSldOwogICAgICBpZiAoIXNsZExpc3QpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHNsZExpc3QuaW5kZXhPZignICcgKyBkb21haW4uc2xpY2Uoc2xkT2Zmc2V0KzEsIHRsZE9mZnNldCkgKyAnICcpID49IDA7CiAgICB9LAogICAgaXM6IGZ1bmN0aW9uKGRvbWFpbikgewogICAgICB2YXIgdGxkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIGlmICh0bGRPZmZzZXQgPD0gMCB8fCB0bGRPZmZzZXQgPj0gKGRvbWFpbi5sZW5ndGgtMSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIHNsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicsIHRsZE9mZnNldC0xKTsKICAgICAgaWYgKHNsZE9mZnNldCA+PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07CiAgICAgIGlmICghc2xkTGlzdCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gc2xkTGlzdC5pbmRleE9mKCcgJyArIGRvbWFpbi5zbGljZSgwLCB0bGRPZmZzZXQpICsgJyAnKSA+PSAwOwogICAgfSwKICAgIGdldDogZnVuY3Rpb24oZG9tYWluKSB7CiAgICAgIHZhciB0bGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nKTsKICAgICAgaWYgKHRsZE9mZnNldCA8PSAwIHx8IHRsZE9mZnNldCA+PSAoZG9tYWluLmxlbmd0aC0xKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7CiAgICAgIGlmIChzbGRPZmZzZXQgPD0gMCB8fCBzbGRPZmZzZXQgPj0gKHRsZE9mZnNldC0xKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07CiAgICAgIGlmICghc2xkTGlzdCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGlmIChzbGRMaXN0LmluZGV4T2YoJyAnICsgZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxLCB0bGRPZmZzZXQpICsgJyAnKSA8IDApIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxKTsKICAgIH0sCiAgICBub0NvbmZsaWN0OiBmdW5jdGlvbigpewogICAgICBpZiAocm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPT09IHRoaXMpIHsKICAgICAgICByb290LlNlY29uZExldmVsRG9tYWlucyA9IF9TZWNvbmRMZXZlbERvbWFpbnM7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKCiAgcmV0dXJuIFNMRDsKfSkpOwoKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qIQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzCiAqCiAqIFZlcnNpb246IDEuMTguMQogKgogKiBBdXRob3I6IFJvZG5leSBSZWhtCiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuaW8vVVJJLmpzLwogKgogKiBMaWNlbnNlZCB1bmRlcgogKiAgIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UKICoKICovCihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICd1c2Ugc3RyaWN0JzsKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanMKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAvLyBOb2RlCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnLi9wdW55Y29kZScpLCByZXF1aXJlKCcuL0lQdjYnKSwgcmVxdWlyZSgnLi9TZWNvbmRMZXZlbERvbWFpbnMnKSk7CiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS4KICAgIGRlZmluZShbJy4vcHVueWNvZGUnLCAnLi9JUHY2JywgJy4vU2Vjb25kTGV2ZWxEb21haW5zJ10sIGZhY3RvcnkpOwogIH0gZWxzZSB7CiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQogICAgcm9vdC5VUkkgPSBmYWN0b3J5KHJvb3QucHVueWNvZGUsIHJvb3QuSVB2Niwgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMsIHJvb3QpOwogIH0KfSh0aGlzLCBmdW5jdGlvbiAocHVueWNvZGUsIElQdjYsIFNMRCwgcm9vdCkgewogICd1c2Ugc3RyaWN0JzsKICAvKmdsb2JhbCBsb2NhdGlvbiwgZXNjYXBlLCB1bmVzY2FwZSAqLwogIC8vIEZJWE1FOiB2Mi4wLjAgcmVuYW1jZSBub24tY2FtZWxDYXNlIHByb3BlcnRpZXMgdG8gdXBwZXJjYXNlCiAgLypqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqLwoKICAvLyBzYXZlIGN1cnJlbnQgVVJJIHZhcmlhYmxlLCBpZiBhbnkKICB2YXIgX1VSSSA9IHJvb3QgJiYgcm9vdC5VUkk7CgogIGZ1bmN0aW9uIFVSSSh1cmwsIGJhc2UpIHsKICAgIHZhciBfdXJsU3VwcGxpZWQgPSBhcmd1bWVudHMubGVuZ3RoID49IDE7CiAgICB2YXIgX2Jhc2VTdXBwbGllZCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMjsKCiAgICAvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmQKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBVUkkpKSB7CiAgICAgIGlmIChfdXJsU3VwcGxpZWQpIHsKICAgICAgICBpZiAoX2Jhc2VTdXBwbGllZCkgewogICAgICAgICAgcmV0dXJuIG5ldyBVUkkodXJsLCBiYXNlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgVVJJKHVybCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVVJJKCk7CiAgICB9CgogICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmIChfdXJsU3VwcGxpZWQpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bmRlZmluZWQgaXMgbm90IGEgdmFsaWQgYXJndW1lbnQgZm9yIFVSSScpOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYgKyAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB1cmwgPSAnJzsKICAgICAgfQogICAgfQoKICAgIHRoaXMuaHJlZih1cmwpOwoKICAgIC8vIHJlc29sdmUgdG8gYmFzZSBhY2NvcmRpbmcgdG8gaHR0cDovL2R2Y3MudzMub3JnL2hnL3VybC9yYXctZmlsZS90aXAvT3ZlcnZpZXcuaHRtbCNjb25zdHJ1Y3RvcgogICAgaWYgKGJhc2UgIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy5hYnNvbHV0ZVRvKGJhc2UpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgVVJJLnZlcnNpb24gPSAnMS4xOC4xJzsKCiAgdmFyIHAgPSBVUkkucHJvdG90eXBlOwogIHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKICBmdW5jdGlvbiBlc2NhcGVSZWdFeChzdHJpbmcpIHsKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2NvbW1pdC84NWFjMjE3ODNjMTFmOGNjYWIwNjEwNmRiYTk3MzVhMzFhODY5MjRkI2NvbW1pdGNvbW1lbnQtODIxOTYzCiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXF1cL1xcXSkvZywgJ1xcJDEnKTsKICB9CgogIGZ1bmN0aW9uIGdldFR5cGUodmFsdWUpIHsKICAgIC8vIElFOCBkb2Vzbid0IHJldHVybiBbT2JqZWN0IFVuZGVmaW5lZF0gYnV0IFtPYmplY3QgT2JqZWN0XSBmb3IgdW5kZWZpbmVkIHZhbHVlCiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gJ1VuZGVmaW5lZCc7CiAgICB9CgogICAgcmV0dXJuIFN0cmluZyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpKS5zbGljZSg4LCAtMSk7CiAgfQoKICBmdW5jdGlvbiBpc0FycmF5KG9iaikgewogICAgcmV0dXJuIGdldFR5cGUob2JqKSA9PT0gJ0FycmF5JzsKICB9CgogIGZ1bmN0aW9uIGZpbHRlckFycmF5VmFsdWVzKGRhdGEsIHZhbHVlKSB7CiAgICB2YXIgbG9va3VwID0ge307CiAgICB2YXIgaSwgbGVuZ3RoOwoKICAgIGlmIChnZXRUeXBlKHZhbHVlKSA9PT0gJ1JlZ0V4cCcpIHsKICAgICAgbG9va3VwID0gbnVsbDsKICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBsb29rdXBbdmFsdWVbaV1dID0gdHJ1ZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbG9va3VwW3ZhbHVlXSA9IHRydWU7CiAgICB9CgogICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZGF0YS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAvKmpzaGludCBsYXhicmVhazogdHJ1ZSAqLwogICAgICB2YXIgX21hdGNoID0gbG9va3VwICYmIGxvb2t1cFtkYXRhW2ldXSAhPT0gdW5kZWZpbmVkCiAgICAgICAgfHwgIWxvb2t1cCAmJiB2YWx1ZS50ZXN0KGRhdGFbaV0pOwogICAgICAvKmpzaGludCBsYXhicmVhazogZmFsc2UgKi8KICAgICAgaWYgKF9tYXRjaCkgewogICAgICAgIGRhdGEuc3BsaWNlKGksIDEpOwogICAgICAgIGxlbmd0aC0tOwogICAgICAgIGktLTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBkYXRhOwogIH0KCiAgZnVuY3Rpb24gYXJyYXlDb250YWlucyhsaXN0LCB2YWx1ZSkgewogICAgdmFyIGksIGxlbmd0aDsKCiAgICAvLyB2YWx1ZSBtYXkgYmUgc3RyaW5nLCBudW1iZXIsIGFycmF5LCByZWdleHAKICAgIGlmIChpc0FycmF5KHZhbHVlKSkgewogICAgICAvLyBOb3RlOiB0aGlzIGNhbiBiZSBvcHRpbWl6ZWQgdG8gTyhuKSAoaW5zdGVhZCBvZiBjdXJyZW50IE8obSAqIG4pKQogICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIGlmICghYXJyYXlDb250YWlucyhsaXN0LCB2YWx1ZVtpXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHZhciBfdHlwZSA9IGdldFR5cGUodmFsdWUpOwogICAgZm9yIChpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoX3R5cGUgPT09ICdSZWdFeHAnKSB7CiAgICAgICAgaWYgKHR5cGVvZiBsaXN0W2ldID09PSAnc3RyaW5nJyAmJiBsaXN0W2ldLm1hdGNoKHZhbHVlKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGxpc3RbaV0gPT09IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBhcnJheXNFcXVhbChvbmUsIHR3bykgewogICAgaWYgKCFpc0FycmF5KG9uZSkgfHwgIWlzQXJyYXkodHdvKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gYXJyYXlzIGNhbid0IGJlIGVxdWFsIGlmIHRoZXkgaGF2ZSBkaWZmZXJlbnQgYW1vdW50IG9mIGNvbnRlbnQKICAgIGlmIChvbmUubGVuZ3RoICE9PSB0d28ubGVuZ3RoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBvbmUuc29ydCgpOwogICAgdHdvLnNvcnQoKTsKCiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9uZS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgaWYgKG9uZVtpXSAhPT0gdHdvW2ldKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmltU2xhc2hlcyh0ZXh0KSB7CiAgICB2YXIgdHJpbV9leHByZXNzaW9uID0gL15cLyt8XC8rJC9nOwogICAgcmV0dXJuIHRleHQucmVwbGFjZSh0cmltX2V4cHJlc3Npb24sICcnKTsKICB9CgogIFVSSS5fcGFydHMgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHByb3RvY29sOiBudWxsLAogICAgICB1c2VybmFtZTogbnVsbCwKICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgIGhvc3RuYW1lOiBudWxsLAogICAgICB1cm46IG51bGwsCiAgICAgIHBvcnQ6IG51bGwsCiAgICAgIHBhdGg6IG51bGwsCiAgICAgIHF1ZXJ5OiBudWxsLAogICAgICBmcmFnbWVudDogbnVsbCwKICAgICAgLy8gc3RhdGUKICAgICAgZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzOiBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLAogICAgICBlc2NhcGVRdWVyeVNwYWNlOiBVUkkuZXNjYXBlUXVlcnlTcGFjZQogICAgfTsKICB9OwogIC8vIHN0YXRlOiBhbGxvdyBkdXBsaWNhdGUgcXVlcnkgcGFyYW1ldGVycyAoYT0xJmE9MSkKICBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzID0gZmFsc2U7CiAgLy8gc3RhdGU6IHJlcGxhY2VzICsgd2l0aCAlMjAgKHNwYWNlIGluIHF1ZXJ5IHN0cmluZ3MpCiAgVVJJLmVzY2FwZVF1ZXJ5U3BhY2UgPSB0cnVlOwogIC8vIHN0YXRpYyBwcm9wZXJ0aWVzCiAgVVJJLnByb3RvY29sX2V4cHJlc3Npb24gPSAvXlthLXpdW2EtejAtOS4rLV0qJC9pOwogIFVSSS5pZG5fZXhwcmVzc2lvbiA9IC9bXmEtejAtOVwuLV0vaTsKICBVUkkucHVueWNvZGVfZXhwcmVzc2lvbiA9IC8oeG4tLSkvaTsKICAvLyB3ZWxsLCAzMzMuNDQ0LjU1NS42NjYgbWF0Y2hlcywgYnV0IGl0IHN1cmUgYWluJ3Qgbm8gSVB2NCAtIGRvIHdlIGNhcmU/CiAgVVJJLmlwNF9leHByZXNzaW9uID0gL15cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9JC87CiAgLy8gY3JlZGl0cyB0byBSaWNoIEJyb3duCiAgLy8gc291cmNlOiBodHRwOi8vZm9ydW1zLmludGVybWFwcGVyLmNvbS92aWV3dG9waWMucGhwP3A9MTA5NiMxMDk2CiAgLy8gc3BlY2lmaWNhdGlvbjogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjNDI5MS50eHQKICBVUkkuaXA2X2V4cHJlc3Npb24gPSAvXlxzKigoKFswLTlBLUZhLWZdezEsNH06KXs3fShbMC05QS1GYS1mXXsxLDR9fDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs2fSg6WzAtOUEtRmEtZl17MSw0fXwoKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezV9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsMn0pfDooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezR9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsM30pfCgoOlswLTlBLUZhLWZdezEsNH0pPzooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXszfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDR9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDJ9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezJ9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNX0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsM306KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7MX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw2fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw0fTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoOigoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDd9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDV9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpKSglLispP1xzKiQvOwogIC8vIGV4cHJlc3Npb24gdXNlZCBpcyAiZ3J1YmVyIHJldmlzZWQiIChAZ3J1YmVyIHYyKSBkZXRlcm1pbmVkIHRvIGJlIHRoZQogIC8vIGJlc3Qgc29sdXRpb24gaW4gYSByZWdleC1nb2xmIHdlIGRpZCBhIGNvdXBsZSBvZiBhZ2VzIGFnbyBhdAogIC8vICogaHR0cDovL21hdGhpYXNieW5lbnMuYmUvZGVtby91cmwtcmVnZXgKICAvLyAqIGh0dHA6Ly9yb2RuZXlyZWhtLmRlL3QvdXJsLXJlZ2V4Lmh0bWwKICBVUkkuZmluZF91cmlfZXhwcmVzc2lvbiA9IC9cYigoPzpbYS16XVtcdy1dKzooPzpcL3sxLDN9fFthLXowLTklXSl8d3d3XGR7MCwzfVsuXXxbYS16MC05LlwtXStbLl1bYS16XXsyLDR9XC8pKD86W15ccygpPD5dK3xcKChbXlxzKCk8Pl0rfChcKFteXHMoKTw+XStcKSkpKlwpKSsoPzpcKChbXlxzKCk8Pl0rfChcKFteXHMoKTw+XStcKSkpKlwpfFteXHNgISgpXFtcXXt9OzonIi4sPD4/wqvCu+KAnOKAneKAmOKAmV0pKS9pZzsKICBVUkkuZmluZFVyaSA9IHsKICAgIC8vIHZhbGlkICJzY2hlbWU6Ly8iIG9yICJ3d3cuIgogICAgc3RhcnQ6IC9cYig/OihbYS16XVthLXowLTkuKy1dKjpcL1wvKXx3d3dcLikvZ2ksCiAgICAvLyBldmVyeXRoaW5nIHVwIHRvIHRoZSBuZXh0IHdoaXRlc3BhY2UKICAgIGVuZDogL1tcc1xyXG5dfCQvLAogICAgLy8gdHJpbSB0cmFpbGluZyBwdW5jdHVhdGlvbiBjYXB0dXJlZCBieSBlbmQgUmVnRXhwCiAgICB0cmltOiAvW2AhKClcW1xde307OiciLiw8Pj/Cq8K74oCc4oCd4oCe4oCY4oCZXSskLwogIH07CiAgLy8gaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy91cmktc2NoZW1lcy5odG1sCiAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX1RDUF9hbmRfVURQX3BvcnRfbnVtYmVycyNXZWxsLWtub3duX3BvcnRzCiAgVVJJLmRlZmF1bHRQb3J0cyA9IHsKICAgIGh0dHA6ICc4MCcsCiAgICBodHRwczogJzQ0MycsCiAgICBmdHA6ICcyMScsCiAgICBnb3BoZXI6ICc3MCcsCiAgICB3czogJzgwJywKICAgIHdzczogJzQ0MycKICB9OwogIC8vIGFsbG93ZWQgaG9zdG5hbWUgY2hhcmFjdGVycyBhY2NvcmRpbmcgdG8gUkZDIDM5ODYKICAvLyBBTFBIQSBESUdJVCAiLSIgIi4iICJfIiAifiIgIiEiICIkIiAiJiIgIiciICIoIiAiKSIgIioiICIrIiAiLCIgIjsiICI9IiAlZW5jb2RlZAogIC8vIEkndmUgbmV2ZXIgc2VlbiBhIChub24tSUROKSBob3N0bmFtZSBvdGhlciB0aGFuOiBBTFBIQSBESUdJVCAuIC0KICBVUkkuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzID0gL1teYS16QS1aMC05XC4tXS87CiAgLy8gbWFwIERPTSBFbGVtZW50cyB0byB0aGVpciBVUkkgYXR0cmlidXRlCiAgVVJJLmRvbUF0dHJpYnV0ZXMgPSB7CiAgICAnYSc6ICdocmVmJywKICAgICdibG9ja3F1b3RlJzogJ2NpdGUnLAogICAgJ2xpbmsnOiAnaHJlZicsCiAgICAnYmFzZSc6ICdocmVmJywKICAgICdzY3JpcHQnOiAnc3JjJywKICAgICdmb3JtJzogJ2FjdGlvbicsCiAgICAnaW1nJzogJ3NyYycsCiAgICAnYXJlYSc6ICdocmVmJywKICAgICdpZnJhbWUnOiAnc3JjJywKICAgICdlbWJlZCc6ICdzcmMnLAogICAgJ3NvdXJjZSc6ICdzcmMnLAogICAgJ3RyYWNrJzogJ3NyYycsCiAgICAnaW5wdXQnOiAnc3JjJywgLy8gYnV0IG9ubHkgaWYgdHlwZT0iaW1hZ2UiCiAgICAnYXVkaW8nOiAnc3JjJywKICAgICd2aWRlbyc6ICdzcmMnCiAgfTsKICBVUkkuZ2V0RG9tQXR0cmlidXRlID0gZnVuY3Rpb24obm9kZSkgewogICAgaWYgKCFub2RlIHx8ICFub2RlLm5vZGVOYW1lKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgdmFyIG5vZGVOYW1lID0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgLy8gPGlucHV0PiBzaG91bGQgb25seSBleHBvc2Ugc3JjIGZvciB0eXBlPSJpbWFnZSIKICAgIGlmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBub2RlLnR5cGUgIT09ICdpbWFnZScpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gVVJJLmRvbUF0dHJpYnV0ZXNbbm9kZU5hbWVdOwogIH07CgogIGZ1bmN0aW9uIGVzY2FwZUZvckR1bWJGaXJlZm94MzYodmFsdWUpIHsKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MQogICAgcmV0dXJuIGVzY2FwZSh2YWx1ZSk7CiAgfQoKICAvLyBlbmNvZGluZyAvIGRlY29kaW5nIGFjY29yZGluZyB0byBSRkMzOTg2CiAgZnVuY3Rpb24gc3RyaWN0RW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykgewogICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvZW5jb2RlVVJJQ29tcG9uZW50CiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykKICAgICAgLnJlcGxhY2UoL1shJygpKl0vZywgZXNjYXBlRm9yRHVtYkZpcmVmb3gzNikKICAgICAgLnJlcGxhY2UoL1wqL2csICclMkEnKTsKICB9CiAgVVJJLmVuY29kZSA9IHN0cmljdEVuY29kZVVSSUNvbXBvbmVudDsKICBVUkkuZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50OwogIFVSSS5pc284ODU5ID0gZnVuY3Rpb24oKSB7CiAgICBVUkkuZW5jb2RlID0gZXNjYXBlOwogICAgVVJJLmRlY29kZSA9IHVuZXNjYXBlOwogIH07CiAgVVJJLnVuaWNvZGUgPSBmdW5jdGlvbigpIHsKICAgIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7CiAgICBVUkkuZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50OwogIH07CiAgVVJJLmNoYXJhY3RlcnMgPSB7CiAgICBwYXRobmFtZTogewogICAgICBlbmNvZGU6IHsKICAgICAgICAvLyBSRkMzOTg2IDIuMTogRm9yIGNvbnNpc3RlbmN5LCBVUkkgcHJvZHVjZXJzIGFuZCBub3JtYWxpemVycyBzaG91bGQKICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLgogICAgICAgIGV4cHJlc3Npb246IC8lKDI0fDI2fDJCfDJDfDNCfDNEfDNBfDQwKS9pZywKICAgICAgICBtYXA6IHsKICAgICAgICAgIC8vIC0uX34hJygpKgogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjYnOiAnJicsCiAgICAgICAgICAnJTJCJzogJysnLAogICAgICAgICAgJyUyQyc6ICcsJywKICAgICAgICAgICclM0InOiAnOycsCiAgICAgICAgICAnJTNEJzogJz0nLAogICAgICAgICAgJyUzQSc6ICc6JywKICAgICAgICAgICclNDAnOiAnQCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlY29kZTogewogICAgICAgIGV4cHJlc3Npb246IC9bXC9cPyNdL2csCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnLyc6ICclMkYnLAogICAgICAgICAgJz8nOiAnJTNGJywKICAgICAgICAgICcjJzogJyUyMycKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZXNlcnZlZDogewogICAgICBlbmNvZGU6IHsKICAgICAgICAvLyBSRkMzOTg2IDIuMTogRm9yIGNvbnNpc3RlbmN5LCBVUkkgcHJvZHVjZXJzIGFuZCBub3JtYWxpemVycyBzaG91bGQKICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLgogICAgICAgIGV4cHJlc3Npb246IC8lKDIxfDIzfDI0fDI2fDI3fDI4fDI5fDJBfDJCfDJDfDJGfDNBfDNCfDNEfDNGfDQwfDVCfDVEKS9pZywKICAgICAgICBtYXA6IHsKICAgICAgICAgIC8vIGdlbi1kZWxpbXMKICAgICAgICAgICclM0EnOiAnOicsCiAgICAgICAgICAnJTJGJzogJy8nLAogICAgICAgICAgJyUzRic6ICc/JywKICAgICAgICAgICclMjMnOiAnIycsCiAgICAgICAgICAnJTVCJzogJ1snLAogICAgICAgICAgJyU1RCc6ICddJywKICAgICAgICAgICclNDAnOiAnQCcsCiAgICAgICAgICAvLyBzdWItZGVsaW1zCiAgICAgICAgICAnJTIxJzogJyEnLAogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjYnOiAnJicsCiAgICAgICAgICAnJTI3JzogJ1wnJywKICAgICAgICAgICclMjgnOiAnKCcsCiAgICAgICAgICAnJTI5JzogJyknLAogICAgICAgICAgJyUyQSc6ICcqJywKICAgICAgICAgICclMkInOiAnKycsCiAgICAgICAgICAnJTJDJzogJywnLAogICAgICAgICAgJyUzQic6ICc7JywKICAgICAgICAgICclM0QnOiAnPScKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB1cm5wYXRoOiB7CiAgICAgIC8vIFRoZSBjaGFyYWN0ZXJzIHVuZGVyIGBlbmNvZGVgIGFyZSB0aGUgY2hhcmFjdGVycyBjYWxsZWQgb3V0IGJ5IFJGQyAyMTQxIGFzIGJlaW5nIGFjY2VwdGFibGUKICAgICAgLy8gZm9yIHVzYWdlIGluIGEgVVJOLiBSRkMyMTQxIGFsc28gY2FsbHMgb3V0ICItIiwgIi4iLCBhbmQgIl8iIGFzIGFjY2VwdGFibGUgY2hhcmFjdGVycywgYnV0CiAgICAgIC8vIHRoZXNlIGFyZW4ndCBlbmNvZGVkIGJ5IGVuY29kZVVSSUNvbXBvbmVudCwgc28gd2UgZG9uJ3QgaGF2ZSB0byBjYWxsIHRoZW0gb3V0IGhlcmUuIEFsc28KICAgICAgLy8gbm90ZSB0aGF0IHRoZSBjb2xvbiBjaGFyYWN0ZXIgaXMgbm90IGZlYXR1cmVkIGluIHRoZSBlbmNvZGluZyBtYXA7IHRoaXMgaXMgYmVjYXVzZSBVUkkuanMKICAgICAgLy8gZ2l2ZXMgdGhlIGNvbG9ucyBpbiBVUk5zIHNlbWFudGljIG1lYW5pbmcgYXMgdGhlIGRlbGltaXRlcnMgb2YgcGF0aCBzZWdlbWVudHMsIGFuZCBzbyBpdAogICAgICAvLyBzaG91bGQgbm90IGFwcGVhciB1bmVuY29kZWQgaW4gYSBzZWdtZW50IGl0c2VsZi4KICAgICAgLy8gU2VlIGFsc28gdGhlIG5vdGUgYWJvdmUgYWJvdXQgUkZDMzk4NiBhbmQgY2FwaXRhbGFsaXplZCBoZXggZGlnaXRzLgogICAgICBlbmNvZGU6IHsKICAgICAgICBleHByZXNzaW9uOiAvJSgyMXwyNHwyN3wyOHwyOXwyQXwyQnwyQ3wzQnwzRHw0MCkvaWcsCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnJTIxJzogJyEnLAogICAgICAgICAgJyUyNCc6ICckJywKICAgICAgICAgICclMjcnOiAnXCcnLAogICAgICAgICAgJyUyOCc6ICcoJywKICAgICAgICAgICclMjknOiAnKScsCiAgICAgICAgICAnJTJBJzogJyonLAogICAgICAgICAgJyUyQic6ICcrJywKICAgICAgICAgICclMkMnOiAnLCcsCiAgICAgICAgICAnJTNCJzogJzsnLAogICAgICAgICAgJyUzRCc6ICc9JywKICAgICAgICAgICclNDAnOiAnQCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIFRoZXNlIGNoYXJhY3RlcnMgYXJlIHRoZSBjaGFyYWN0ZXJzIGNhbGxlZCBvdXQgYnkgUkZDMjE0MSBhcyAicmVzZXJ2ZWQiIGNoYXJhY3RlcnMgdGhhdAogICAgICAvLyBzaG91bGQgbmV2ZXIgYXBwZWFyIGluIGEgVVJOLCBwbHVzIHRoZSBjb2xvbiBjaGFyYWN0ZXIgKHNlZSBub3RlIGFib3ZlKS4KICAgICAgZGVjb2RlOiB7CiAgICAgICAgZXhwcmVzc2lvbjogL1tcL1w/IzpdL2csCiAgICAgICAgbWFwOiB7CiAgICAgICAgICAnLyc6ICclMkYnLAogICAgICAgICAgJz8nOiAnJTNGJywKICAgICAgICAgICcjJzogJyUyMycsCiAgICAgICAgICAnOic6ICclM0EnCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICBVUkkuZW5jb2RlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHsKICAgIHZhciBlc2NhcGVkID0gVVJJLmVuY29kZShzdHJpbmcgKyAnJyk7CiAgICBpZiAoZXNjYXBlUXVlcnlTcGFjZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTsKICAgIH0KCiAgICByZXR1cm4gZXNjYXBlUXVlcnlTcGFjZSA/IGVzY2FwZWQucmVwbGFjZSgvJTIwL2csICcrJykgOiBlc2NhcGVkOwogIH07CiAgVVJJLmRlY29kZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7CiAgICBzdHJpbmcgKz0gJyc7CiAgICBpZiAoZXNjYXBlUXVlcnlTcGFjZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTsKICAgIH0KCiAgICB0cnkgewogICAgICByZXR1cm4gVVJJLmRlY29kZShlc2NhcGVRdWVyeVNwYWNlID8gc3RyaW5nLnJlcGxhY2UoL1wrL2csICclMjAnKSA6IHN0cmluZyk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgLy8gd2UncmUgbm90IGdvaW5nIHRvIG1lc3Mgd2l0aCB3ZWlyZCBlbmNvZGluZ3MsCiAgICAgIC8vIGdpdmUgdXAgYW5kIHJldHVybiB0aGUgdW5kZWNvZGVkIG9yaWdpbmFsIHN0cmluZwogICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzg3CiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvOTIKICAgICAgcmV0dXJuIHN0cmluZzsKICAgIH0KICB9OwogIC8vIGdlbmVyYXRlIGVuY29kZS9kZWNvZGUgcGF0aCBmdW5jdGlvbnMKICB2YXIgX3BhcnRzID0geydlbmNvZGUnOidlbmNvZGUnLCAnZGVjb2RlJzonZGVjb2RlJ307CiAgdmFyIF9wYXJ0OwogIHZhciBnZW5lcmF0ZUFjY2Vzc29yID0gZnVuY3Rpb24oX2dyb3VwLCBfcGFydCkgewogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBVUklbX3BhcnRdKHN0cmluZyArICcnKS5yZXBsYWNlKFVSSS5jaGFyYWN0ZXJzW19ncm91cF1bX3BhcnRdLmV4cHJlc3Npb24sIGZ1bmN0aW9uKGMpIHsKICAgICAgICAgIHJldHVybiBVUkkuY2hhcmFjdGVyc1tfZ3JvdXBdW19wYXJ0XS5tYXBbY107CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyB3ZSdyZSBub3QgZ29pbmcgdG8gbWVzcyB3aXRoIHdlaXJkIGVuY29kaW5ncywKICAgICAgICAvLyBnaXZlIHVwIGFuZCByZXR1cm4gdGhlIHVuZGVjb2RlZCBvcmlnaW5hbCBzdHJpbmcKICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzg3CiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MgogICAgICAgIHJldHVybiBzdHJpbmc7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgZm9yIChfcGFydCBpbiBfcGFydHMpIHsKICAgIFVSSVtfcGFydCArICdQYXRoU2VnbWVudCddID0gZ2VuZXJhdGVBY2Nlc3NvcigncGF0aG5hbWUnLCBfcGFydHNbX3BhcnRdKTsKICAgIFVSSVtfcGFydCArICdVcm5QYXRoU2VnbWVudCddID0gZ2VuZXJhdGVBY2Nlc3NvcigndXJucGF0aCcsIF9wYXJ0c1tfcGFydF0pOwogIH0KCiAgdmFyIGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uID0gZnVuY3Rpb24oX3NlcCwgX2NvZGluZ0Z1bmNOYW1lLCBfaW5uZXJDb2RpbmdGdW5jTmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykgewogICAgICAvLyBXaHkgcGFzcyBpbiBuYW1lcyBvZiBmdW5jdGlvbnMsIHJhdGhlciB0aGFuIHRoZSBmdW5jdGlvbiBvYmplY3RzIHRoZW1zZWx2ZXM/IFRoZQogICAgICAvLyBkZWZpbml0aW9ucyBvZiBzb21lIGZ1bmN0aW9ucyAoYnV0IGluIHBhcnRpY3VsYXIsIFVSSS5kZWNvZGUpIHdpbGwgb2NjYXNpb25hbGx5IGNoYW5nZSBkdWUKICAgICAgLy8gdG8gVVJJLmpzIGhhdmluZyBJU084ODU5IGFuZCBVbmljb2RlIG1vZGVzLiBQYXNzaW5nIGluIHRoZSBuYW1lIGFuZCBnZXR0aW5nIGl0IHdpbGwgZW5zdXJlCiAgICAgIC8vIHRoYXQgdGhlIGZ1bmN0aW9ucyB3ZSB1c2UgaGVyZSBhcmUgImZyZXNoIi4KICAgICAgdmFyIGFjdHVhbENvZGluZ0Z1bmM7CiAgICAgIGlmICghX2lubmVyQ29kaW5nRnVuY05hbWUpIHsKICAgICAgICBhY3R1YWxDb2RpbmdGdW5jID0gVVJJW19jb2RpbmdGdW5jTmFtZV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWN0dWFsQ29kaW5nRnVuYyA9IGZ1bmN0aW9uKHN0cmluZykgewogICAgICAgICAgcmV0dXJuIFVSSVtfY29kaW5nRnVuY05hbWVdKFVSSVtfaW5uZXJDb2RpbmdGdW5jTmFtZV0oc3RyaW5nKSk7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIHNlZ21lbnRzID0gKHN0cmluZyArICcnKS5zcGxpdChfc2VwKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIHNlZ21lbnRzW2ldID0gYWN0dWFsQ29kaW5nRnVuYyhzZWdtZW50c1tpXSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKF9zZXApOwogICAgfTsKICB9OwoKICAvLyBUaGlzIHRha2VzIHBsYWNlIG91dHNpZGUgdGhlIGFib3ZlIGxvb3AgYmVjYXVzZSB3ZSBkb24ndCB3YW50LCBlLmcuLCBlbmNvZGVVcm5QYXRoIGZ1bmN0aW9ucy4KICBVUkkuZGVjb2RlUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCcvJywgJ2RlY29kZVBhdGhTZWdtZW50Jyk7CiAgVVJJLmRlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdkZWNvZGVVcm5QYXRoU2VnbWVudCcpOwogIFVSSS5yZWNvZGVQYXRoID0gZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24oJy8nLCAnZW5jb2RlUGF0aFNlZ21lbnQnLCAnZGVjb2RlJyk7CiAgVVJJLnJlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdlbmNvZGVVcm5QYXRoU2VnbWVudCcsICdkZWNvZGUnKTsKCiAgVVJJLmVuY29kZVJlc2VydmVkID0gZ2VuZXJhdGVBY2Nlc3NvcigncmVzZXJ2ZWQnLCAnZW5jb2RlJyk7CgogIFVSSS5wYXJzZSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIHZhciBwb3M7CiAgICBpZiAoIXBhcnRzKSB7CiAgICAgIHBhcnRzID0ge307CiAgICB9CiAgICAvLyBbcHJvdG9jb2wiOi8vIlt1c2VybmFtZVsiOiJwYXNzd29yZF0iQCJdaG9zdG5hbWVbIjoicG9ydF0iLyI/XVtwYXRoXVsiPyJxdWVyeXN0cmluZ11bIiMiZnJhZ21lbnRdCgogICAgLy8gZXh0cmFjdCBmcmFnbWVudAogICAgcG9zID0gc3RyaW5nLmluZGV4T2YoJyMnKTsKICAgIGlmIChwb3MgPiAtMSkgewogICAgICAvLyBlc2NhcGluZz8KICAgICAgcGFydHMuZnJhZ21lbnQgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpIHx8IG51bGw7CiAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKTsKICAgIH0KCiAgICAvLyBleHRyYWN0IHF1ZXJ5CiAgICBwb3MgPSBzdHJpbmcuaW5kZXhPZignPycpOwogICAgaWYgKHBvcyA+IC0xKSB7CiAgICAgIC8vIGVzY2FwaW5nPwogICAgICBwYXJ0cy5xdWVyeSA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSkgfHwgbnVsbDsKICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpOwogICAgfQoKICAgIC8vIGV4dHJhY3QgcHJvdG9jb2wKICAgIGlmIChzdHJpbmcuc3Vic3RyaW5nKDAsIDIpID09PSAnLy8nKSB7CiAgICAgIC8vIHJlbGF0aXZlLXNjaGVtZQogICAgICBwYXJ0cy5wcm90b2NvbCA9IG51bGw7CiAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcoMik7CiAgICAgIC8vIGV4dHJhY3QgInVzZXI6cGFzc0Bob3N0OnBvcnQiCiAgICAgIHN0cmluZyA9IFVSSS5wYXJzZUF1dGhvcml0eShzdHJpbmcsIHBhcnRzKTsKICAgIH0gZWxzZSB7CiAgICAgIHBvcyA9IHN0cmluZy5pbmRleE9mKCc6Jyk7CiAgICAgIGlmIChwb3MgPiAtMSkgewogICAgICAgIHBhcnRzLnByb3RvY29sID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpIHx8IG51bGw7CiAgICAgICAgaWYgKHBhcnRzLnByb3RvY29sICYmICFwYXJ0cy5wcm90b2NvbC5tYXRjaChVUkkucHJvdG9jb2xfZXhwcmVzc2lvbikpIHsKICAgICAgICAgIC8vIDogbWF5IGJlIHdpdGhpbiB0aGUgcGF0aAogICAgICAgICAgcGFydHMucHJvdG9jb2wgPSB1bmRlZmluZWQ7CiAgICAgICAgfSBlbHNlIGlmIChzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEsIHBvcyArIDMpID09PSAnLy8nKSB7CiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDMpOwoKICAgICAgICAgIC8vIGV4dHJhY3QgInVzZXI6cGFzc0Bob3N0OnBvcnQiCiAgICAgICAgICBzdHJpbmcgPSBVUkkucGFyc2VBdXRob3JpdHkoc3RyaW5nLCBwYXJ0cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSk7CiAgICAgICAgICBwYXJ0cy51cm4gPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIHdoYXQncyBsZWZ0IG11c3QgYmUgdGhlIHBhdGgKICAgIHBhcnRzLnBhdGggPSBzdHJpbmc7CgogICAgLy8gYW5kIHdlJ3JlIGRvbmUKICAgIHJldHVybiBwYXJ0czsKICB9OwogIFVSSS5wYXJzZUhvc3QgPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7CiAgICAvLyBDb3B5IGNocm9tZSwgSUUsIG9wZXJhIGJhY2tzbGFzaC1oYW5kbGluZyBiZWhhdmlvci4KICAgIC8vIEJhY2sgc2xhc2hlcyBiZWZvcmUgdGhlIHF1ZXJ5IHN0cmluZyBnZXQgY29udmVydGVkIHRvIGZvcndhcmQgc2xhc2hlcwogICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvYmxvYi8zODZmZDI0ZjQ5YjBlOWQxYThhMDc2NTkyYTQwNDE2OGZhZWVjYzM0L2xpYi91cmwuanMjTDExNS1MMTI0CiAgICAvLyBTZWU6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yNTkxNgogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvcHVsbC8yMzMKICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cXC9nLCAnLycpOwoKICAgIC8vIGV4dHJhY3QgaG9zdDpwb3J0CiAgICB2YXIgcG9zID0gc3RyaW5nLmluZGV4T2YoJy8nKTsKICAgIHZhciBicmFja2V0UG9zOwogICAgdmFyIHQ7CgogICAgaWYgKHBvcyA9PT0gLTEpIHsKICAgICAgcG9zID0gc3RyaW5nLmxlbmd0aDsKICAgIH0KCiAgICBpZiAoc3RyaW5nLmNoYXJBdCgwKSA9PT0gJ1snKSB7CiAgICAgIC8vIElQdjYgaG9zdCAtIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtNm1hbi10ZXh0LWFkZHItcmVwcmVzZW50YXRpb24tMDQjc2VjdGlvbi02CiAgICAgIC8vIEkgY2xhaW0gbW9zdCBjbGllbnQgc29mdHdhcmUgYnJlYWtzIG9uIElQdjYgYW55d2F5cy4gVG8gc2ltcGxpZnkgdGhpbmdzLCBVUkkgb25seSBhY2NlcHRzCiAgICAgIC8vIElQdjYrcG9ydCBpbiB0aGUgZm9ybWF0IFsyMDAxOmRiODo6MV06ODAgKGZvciB0aGUgdGltZSBiZWluZykKICAgICAgYnJhY2tldFBvcyA9IHN0cmluZy5pbmRleE9mKCddJyk7CiAgICAgIHBhcnRzLmhvc3RuYW1lID0gc3RyaW5nLnN1YnN0cmluZygxLCBicmFja2V0UG9zKSB8fCBudWxsOwogICAgICBwYXJ0cy5wb3J0ID0gc3RyaW5nLnN1YnN0cmluZyhicmFja2V0UG9zICsgMiwgcG9zKSB8fCBudWxsOwogICAgICBpZiAocGFydHMucG9ydCA9PT0gJy8nKSB7CiAgICAgICAgcGFydHMucG9ydCA9IG51bGw7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBmaXJzdENvbG9uID0gc3RyaW5nLmluZGV4T2YoJzonKTsKICAgICAgdmFyIGZpcnN0U2xhc2ggPSBzdHJpbmcuaW5kZXhPZignLycpOwogICAgICB2YXIgbmV4dENvbG9uID0gc3RyaW5nLmluZGV4T2YoJzonLCBmaXJzdENvbG9uICsgMSk7CiAgICAgIGlmIChuZXh0Q29sb24gIT09IC0xICYmIChmaXJzdFNsYXNoID09PSAtMSB8fCBuZXh0Q29sb24gPCBmaXJzdFNsYXNoKSkgewogICAgICAgIC8vIElQdjYgaG9zdCBjb250YWlucyBtdWx0aXBsZSBjb2xvbnMgLSBidXQgbm8gcG9ydAogICAgICAgIC8vIHRoaXMgbm90YXRpb24gaXMgYWN0dWFsbHkgbm90IGFsbG93ZWQgYnkgUkZDIDM5ODYsIGJ1dCB3ZSdyZSBhIGxpYmVyYWwgcGFyc2VyCiAgICAgICAgcGFydHMuaG9zdG5hbWUgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcykgfHwgbnVsbDsKICAgICAgICBwYXJ0cy5wb3J0ID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpLnNwbGl0KCc6Jyk7CiAgICAgICAgcGFydHMuaG9zdG5hbWUgPSB0WzBdIHx8IG51bGw7CiAgICAgICAgcGFydHMucG9ydCA9IHRbMV0gfHwgbnVsbDsKICAgICAgfQogICAgfQoKICAgIGlmIChwYXJ0cy5ob3N0bmFtZSAmJiBzdHJpbmcuc3Vic3RyaW5nKHBvcykuY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgcG9zKys7CiAgICAgIHN0cmluZyA9ICcvJyArIHN0cmluZzsKICAgIH0KCiAgICByZXR1cm4gc3RyaW5nLnN1YnN0cmluZyhwb3MpIHx8ICcvJzsKICB9OwogIFVSSS5wYXJzZUF1dGhvcml0eSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIHN0cmluZyA9IFVSSS5wYXJzZVVzZXJpbmZvKHN0cmluZywgcGFydHMpOwogICAgcmV0dXJuIFVSSS5wYXJzZUhvc3Qoc3RyaW5nLCBwYXJ0cyk7CiAgfTsKICBVUkkucGFyc2VVc2VyaW5mbyA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHsKICAgIC8vIGV4dHJhY3QgdXNlcm5hbWU6cGFzc3dvcmQKICAgIHZhciBmaXJzdFNsYXNoID0gc3RyaW5nLmluZGV4T2YoJy8nKTsKICAgIHZhciBwb3MgPSBzdHJpbmcubGFzdEluZGV4T2YoJ0AnLCBmaXJzdFNsYXNoID4gLTEgPyBmaXJzdFNsYXNoIDogc3RyaW5nLmxlbmd0aCAtIDEpOwogICAgdmFyIHQ7CgogICAgLy8gYXV0aG9yaXR5QCBtdXN0IGNvbWUgYmVmb3JlIC9wYXRoCiAgICBpZiAocG9zID4gLTEgJiYgKGZpcnN0U2xhc2ggPT09IC0xIHx8IHBvcyA8IGZpcnN0U2xhc2gpKSB7CiAgICAgIHQgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcykuc3BsaXQoJzonKTsKICAgICAgcGFydHMudXNlcm5hbWUgPSB0WzBdID8gVVJJLmRlY29kZSh0WzBdKSA6IG51bGw7CiAgICAgIHQuc2hpZnQoKTsKICAgICAgcGFydHMucGFzc3dvcmQgPSB0WzBdID8gVVJJLmRlY29kZSh0LmpvaW4oJzonKSkgOiBudWxsOwogICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpOwogICAgfSBlbHNlIHsKICAgICAgcGFydHMudXNlcm5hbWUgPSBudWxsOwogICAgICBwYXJ0cy5wYXNzd29yZCA9IG51bGw7CiAgICB9CgogICAgcmV0dXJuIHN0cmluZzsKICB9OwogIFVSSS5wYXJzZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7CiAgICBpZiAoIXN0cmluZykgewogICAgICByZXR1cm4ge307CiAgICB9CgogICAgLy8gdGhyb3cgb3V0IHRoZSBmdW5reSBidXNpbmVzcyAtICI/IltuYW1lIj0idmFsdWUiJiJdKwogICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoLyYrL2csICcmJykucmVwbGFjZSgvXlw/KiYqfCYrJC9nLCAnJyk7CgogICAgaWYgKCFzdHJpbmcpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQoKICAgIHZhciBpdGVtcyA9IHt9OwogICAgdmFyIHNwbGl0cyA9IHN0cmluZy5zcGxpdCgnJicpOwogICAgdmFyIGxlbmd0aCA9IHNwbGl0cy5sZW5ndGg7CiAgICB2YXIgdiwgbmFtZSwgdmFsdWU7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2ID0gc3BsaXRzW2ldLnNwbGl0KCc9Jyk7CiAgICAgIG5hbWUgPSBVUkkuZGVjb2RlUXVlcnkodi5zaGlmdCgpLCBlc2NhcGVRdWVyeVNwYWNlKTsKICAgICAgLy8gbm8gIj0iIGlzIG51bGwgYWNjb3JkaW5nIHRvIGh0dHA6Ly9kdmNzLnczLm9yZy9oZy91cmwvcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWwjY29sbGVjdC11cmwtcGFyYW1ldGVycwogICAgICB2YWx1ZSA9IHYubGVuZ3RoID8gVVJJLmRlY29kZVF1ZXJ5KHYuam9pbignPScpLCBlc2NhcGVRdWVyeVNwYWNlKSA6IG51bGw7CgogICAgICBpZiAoaGFzT3duLmNhbGwoaXRlbXMsIG5hbWUpKSB7CiAgICAgICAgaWYgKHR5cGVvZiBpdGVtc1tuYW1lXSA9PT0gJ3N0cmluZycgfHwgaXRlbXNbbmFtZV0gPT09IG51bGwpIHsKICAgICAgICAgIGl0ZW1zW25hbWVdID0gW2l0ZW1zW25hbWVdXTsKICAgICAgICB9CgogICAgICAgIGl0ZW1zW25hbWVdLnB1c2godmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW1zW25hbWVdID0gdmFsdWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gaXRlbXM7CiAgfTsKCiAgVVJJLmJ1aWxkID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHZhciB0ID0gJyc7CgogICAgaWYgKHBhcnRzLnByb3RvY29sKSB7CiAgICAgIHQgKz0gcGFydHMucHJvdG9jb2wgKyAnOic7CiAgICB9CgogICAgaWYgKCFwYXJ0cy51cm4gJiYgKHQgfHwgcGFydHMuaG9zdG5hbWUpKSB7CiAgICAgIHQgKz0gJy8vJzsKICAgIH0KCiAgICB0ICs9IChVUkkuYnVpbGRBdXRob3JpdHkocGFydHMpIHx8ICcnKTsKCiAgICBpZiAodHlwZW9mIHBhcnRzLnBhdGggPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmIChwYXJ0cy5wYXRoLmNoYXJBdCgwKSAhPT0gJy8nICYmIHR5cGVvZiBwYXJ0cy5ob3N0bmFtZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB0ICs9ICcvJzsKICAgICAgfQoKICAgICAgdCArPSBwYXJ0cy5wYXRoOwogICAgfQoKICAgIGlmICh0eXBlb2YgcGFydHMucXVlcnkgPT09ICdzdHJpbmcnICYmIHBhcnRzLnF1ZXJ5KSB7CiAgICAgIHQgKz0gJz8nICsgcGFydHMucXVlcnk7CiAgICB9CgogICAgaWYgKHR5cGVvZiBwYXJ0cy5mcmFnbWVudCA9PT0gJ3N0cmluZycgJiYgcGFydHMuZnJhZ21lbnQpIHsKICAgICAgdCArPSAnIycgKyBwYXJ0cy5mcmFnbWVudDsKICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgVVJJLmJ1aWxkSG9zdCA9IGZ1bmN0aW9uKHBhcnRzKSB7CiAgICB2YXIgdCA9ICcnOwoKICAgIGlmICghcGFydHMuaG9zdG5hbWUpIHsKICAgICAgcmV0dXJuICcnOwogICAgfSBlbHNlIGlmIChVUkkuaXA2X2V4cHJlc3Npb24udGVzdChwYXJ0cy5ob3N0bmFtZSkpIHsKICAgICAgdCArPSAnWycgKyBwYXJ0cy5ob3N0bmFtZSArICddJzsKICAgIH0gZWxzZSB7CiAgICAgIHQgKz0gcGFydHMuaG9zdG5hbWU7CiAgICB9CgogICAgaWYgKHBhcnRzLnBvcnQpIHsKICAgICAgdCArPSAnOicgKyBwYXJ0cy5wb3J0OwogICAgfQoKICAgIHJldHVybiB0OwogIH07CiAgVVJJLmJ1aWxkQXV0aG9yaXR5ID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHJldHVybiBVUkkuYnVpbGRVc2VyaW5mbyhwYXJ0cykgKyBVUkkuYnVpbGRIb3N0KHBhcnRzKTsKICB9OwogIFVSSS5idWlsZFVzZXJpbmZvID0gZnVuY3Rpb24ocGFydHMpIHsKICAgIHZhciB0ID0gJyc7CgogICAgaWYgKHBhcnRzLnVzZXJuYW1lKSB7CiAgICAgIHQgKz0gVVJJLmVuY29kZShwYXJ0cy51c2VybmFtZSk7CiAgICB9CgogICAgaWYgKHBhcnRzLnBhc3N3b3JkKSB7CiAgICAgIHQgKz0gJzonICsgVVJJLmVuY29kZShwYXJ0cy5wYXNzd29yZCk7CiAgICB9CgogICAgaWYgKHQpIHsKICAgICAgdCArPSAnQCc7CiAgICB9CgogICAgcmV0dXJuIHQ7CiAgfTsKICBVUkkuYnVpbGRRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgZXNjYXBlUXVlcnlTcGFjZSkgewogICAgLy8gYWNjb3JkaW5nIHRvIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODYgb3IgaHR0cDovL2xhYnMuYXBhY2hlLm9yZy93ZWJhcmNoL3VyaS9yZmMvcmZjMzk4Ni5odG1sCiAgICAvLyBiZWluZyDCuy0uX34hJCYnKCkqKyw7PTpALz/CqyAlSEVYIGFuZCBhbG51bSBhcmUgYWxsb3dlZAogICAgLy8gdGhlIFJGQyBleHBsaWNpdGx5IHN0YXRlcyA/L2ZvbyBiZWluZyBhIHZhbGlkIHVzZSBjYXNlLCBubyBtZW50aW9uIG9mIHBhcmFtZXRlciBzeW50YXghCiAgICAvLyBVUkkuanMgdHJlYXRzIHRoZSBxdWVyeSBzdHJpbmcgYXMgYmVpbmcgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkCiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MC9pbnRlcmFjdC9mb3Jtcy5odG1sI2Zvcm0tY29udGVudC10eXBlCgogICAgdmFyIHQgPSAnJzsKICAgIHZhciB1bmlxdWUsIGtleSwgaSwgbGVuZ3RoOwogICAgZm9yIChrZXkgaW4gZGF0YSkgewogICAgICBpZiAoaGFzT3duLmNhbGwoZGF0YSwga2V5KSAmJiBrZXkpIHsKICAgICAgICBpZiAoaXNBcnJheShkYXRhW2tleV0pKSB7CiAgICAgICAgICB1bmlxdWUgPSB7fTsKICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGRhdGFba2V5XS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoZGF0YVtrZXldW2ldICE9PSB1bmRlZmluZWQgJiYgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdCArPSAnJicgKyBVUkkuYnVpbGRRdWVyeVBhcmFtZXRlcihrZXksIGRhdGFba2V5XVtpXSwgZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyAhPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhW2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdCArPSAnJicgKyBVUkkuYnVpbGRRdWVyeVBhcmFtZXRlcihrZXksIGRhdGFba2V5XSwgZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHQuc3Vic3RyaW5nKDEpOwogIH07CiAgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkgewogICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MC9pbnRlcmFjdC9mb3Jtcy5odG1sI2Zvcm0tY29udGVudC10eXBlIC0tIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZAogICAgLy8gZG9uJ3QgYXBwZW5kICI9IiBmb3IgbnVsbCB2YWx1ZXMsIGFjY29yZGluZyB0byBodHRwOi8vZHZjcy53My5vcmcvaGcvdXJsL3Jhdy1maWxlL3RpcC9PdmVydmlldy5odG1sI3VybC1wYXJhbWV0ZXItc2VyaWFsaXphdGlvbgogICAgcmV0dXJuIFVSSS5lbmNvZGVRdWVyeShuYW1lLCBlc2NhcGVRdWVyeVNwYWNlKSArICh2YWx1ZSAhPT0gbnVsbCA/ICc9JyArIFVSSS5lbmNvZGVRdWVyeSh2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkgOiAnJyk7CiAgfTsKCiAgVVJJLmFkZFF1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgbmFtZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHsKICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkgewogICAgICAgICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmIChkYXRhW25hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBkYXRhW25hbWVdID0gdmFsdWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhW25hbWVdID09PSAnc3RyaW5nJykgewogICAgICAgIGRhdGFbbmFtZV0gPSBbZGF0YVtuYW1lXV07CiAgICAgIH0KCiAgICAgIGlmICghaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07CiAgICAgIH0KCiAgICAgIGRhdGFbbmFtZV0gPSAoZGF0YVtuYW1lXSB8fCBbXSkuY29uY2F0KHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKICBVUkkucmVtb3ZlUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSkgewogICAgdmFyIGksIGxlbmd0aCwga2V5OwoKICAgIGlmIChpc0FycmF5KG5hbWUpKSB7CiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG5hbWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBkYXRhW25hbWVbaV1dID0gdW5kZWZpbmVkOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGdldFR5cGUobmFtZSkgPT09ICdSZWdFeHAnKSB7CiAgICAgIGZvciAoa2V5IGluIGRhdGEpIHsKICAgICAgICBpZiAobmFtZS50ZXN0KGtleSkpIHsKICAgICAgICAgIGRhdGFba2V5XSA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7CiAgICAgIGZvciAoa2V5IGluIG5hbWUpIHsKICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkgewogICAgICAgICAgVVJJLnJlbW92ZVF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKGdldFR5cGUodmFsdWUpID09PSAnUmVnRXhwJykgewogICAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pICYmIHZhbHVlLnRlc3QoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhW25hbWVdID09PSBTdHJpbmcodmFsdWUpICYmICghaXNBcnJheSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAxKSkgewogICAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDsKICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5yZW1vdmVRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcsIFJlZ0V4cCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKICBVUkkuaGFzUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpIHsKICAgIHN3aXRjaCAoZ2V0VHlwZShuYW1lKSkgewogICAgICBjYXNlICdTdHJpbmcnOgogICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gaGVyZQogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnUmVnRXhwJzoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkgewogICAgICAgICAgaWYgKGhhc093bi5jYWxsKGRhdGEsIGtleSkpIHsKICAgICAgICAgICAgaWYgKG5hbWUudGVzdChrZXkpICYmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IFVSSS5oYXNRdWVyeShkYXRhLCBrZXksIHZhbHVlKSkpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgY2FzZSAnT2JqZWN0JzoKICAgICAgICBmb3IgKHZhciBfa2V5IGluIG5hbWUpIHsKICAgICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBfa2V5KSkgewogICAgICAgICAgICBpZiAoIVVSSS5oYXNRdWVyeShkYXRhLCBfa2V5LCBuYW1lW19rZXldKSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5oYXNRdWVyeSgpIGFjY2VwdHMgYSBzdHJpbmcsIHJlZ3VsYXIgZXhwcmVzc2lvbiBvciBvYmplY3QgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7CiAgICB9CgogICAgc3dpdGNoIChnZXRUeXBlKHZhbHVlKSkgewogICAgICBjYXNlICdVbmRlZmluZWQnOgogICAgICAgIC8vIHRydWUgaWYgZXhpc3RzIChidXQgbWF5IGJlIGVtcHR5KQogICAgICAgIHJldHVybiBuYW1lIGluIGRhdGE7IC8vIGRhdGFbbmFtZV0gIT09IHVuZGVmaW5lZDsKCiAgICAgIGNhc2UgJ0Jvb2xlYW4nOgogICAgICAgIC8vIHRydWUgaWYgZXhpc3RzIGFuZCBub24tZW1wdHkKICAgICAgICB2YXIgX2Jvb2x5ID0gQm9vbGVhbihpc0FycmF5KGRhdGFbbmFtZV0pID8gZGF0YVtuYW1lXS5sZW5ndGggOiBkYXRhW25hbWVdKTsKICAgICAgICByZXR1cm4gdmFsdWUgPT09IF9ib29seTsKCiAgICAgIGNhc2UgJ0Z1bmN0aW9uJzoKICAgICAgICAvLyBhbGxvdyBjb21wbGV4IGNvbXBhcmlzb24KICAgICAgICByZXR1cm4gISF2YWx1ZShkYXRhW25hbWVdLCBuYW1lLCBkYXRhKTsKCiAgICAgIGNhc2UgJ0FycmF5JzoKICAgICAgICBpZiAoIWlzQXJyYXkoZGF0YVtuYW1lXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBvcCA9IHdpdGhpbkFycmF5ID8gYXJyYXlDb250YWlucyA6IGFycmF5c0VxdWFsOwogICAgICAgIHJldHVybiBvcChkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBjYXNlICdSZWdFeHAnOgogICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSkgewogICAgICAgICAgcmV0dXJuIEJvb2xlYW4oZGF0YVtuYW1lXSAmJiBkYXRhW25hbWVdLm1hdGNoKHZhbHVlKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXdpdGhpbkFycmF5KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYXJyYXlDb250YWlucyhkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBjYXNlICdOdW1iZXInOgogICAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKTsKICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICAgIGNhc2UgJ1N0cmluZyc6CiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pKSB7CiAgICAgICAgICByZXR1cm4gZGF0YVtuYW1lXSA9PT0gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXdpdGhpbkFycmF5KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYXJyYXlDb250YWlucyhkYXRhW25hbWVdLCB2YWx1ZSk7CgogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5oYXNRdWVyeSgpIGFjY2VwdHMgdW5kZWZpbmVkLCBib29sZWFuLCBzdHJpbmcsIG51bWJlciwgUmVnRXhwLCBGdW5jdGlvbiBhcyB0aGUgdmFsdWUgcGFyYW1ldGVyJyk7CiAgICB9CiAgfTsKCgogIFVSSS5qb2luUGF0aHMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBpbnB1dCA9IFtdOwogICAgdmFyIHNlZ21lbnRzID0gW107CiAgICB2YXIgbm9uRW1wdHlTZWdtZW50cyA9IDA7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHVybCA9IG5ldyBVUkkoYXJndW1lbnRzW2ldKTsKICAgICAgaW5wdXQucHVzaCh1cmwpOwogICAgICB2YXIgX3NlZ21lbnRzID0gdXJsLnNlZ21lbnQoKTsKICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBfc2VnbWVudHMubGVuZ3RoOyBzKyspIHsKICAgICAgICBpZiAodHlwZW9mIF9zZWdtZW50c1tzXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHNlZ21lbnRzLnB1c2goX3NlZ21lbnRzW3NdKTsKICAgICAgICB9CgogICAgICAgIGlmIChfc2VnbWVudHNbc10pIHsKICAgICAgICAgIG5vbkVtcHR5U2VnbWVudHMrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhbm9uRW1wdHlTZWdtZW50cykgewogICAgICByZXR1cm4gbmV3IFVSSSgnJyk7CiAgICB9CgogICAgdmFyIHVyaSA9IG5ldyBVUkkoJycpLnNlZ21lbnQoc2VnbWVudHMpOwoKICAgIGlmIChpbnB1dFswXS5wYXRoKCkgPT09ICcnIHx8IGlucHV0WzBdLnBhdGgoKS5zbGljZSgwLCAxKSA9PT0gJy8nKSB7CiAgICAgIHVyaS5wYXRoKCcvJyArIHVyaS5wYXRoKCkpOwogICAgfQoKICAgIHJldHVybiB1cmkubm9ybWFsaXplKCk7CiAgfTsKCiAgVVJJLmNvbW1vblBhdGggPSBmdW5jdGlvbihvbmUsIHR3bykgewogICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKG9uZS5sZW5ndGgsIHR3by5sZW5ndGgpOwogICAgdmFyIHBvczsKCiAgICAvLyBmaW5kIGZpcnN0IG5vbi1tYXRjaGluZyBjaGFyYWN0ZXIKICAgIGZvciAocG9zID0gMDsgcG9zIDwgbGVuZ3RoOyBwb3MrKykgewogICAgICBpZiAob25lLmNoYXJBdChwb3MpICE9PSB0d28uY2hhckF0KHBvcykpIHsKICAgICAgICBwb3MtLTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3MgPCAxKSB7CiAgICAgIHJldHVybiBvbmUuY2hhckF0KDApID09PSB0d28uY2hhckF0KDApICYmIG9uZS5jaGFyQXQoMCkgPT09ICcvJyA/ICcvJyA6ICcnOwogICAgfQoKICAgIC8vIHJldmVydCB0byBsYXN0IC8KICAgIGlmIChvbmUuY2hhckF0KHBvcykgIT09ICcvJyB8fCB0d28uY2hhckF0KHBvcykgIT09ICcvJykgewogICAgICBwb3MgPSBvbmUuc3Vic3RyaW5nKDAsIHBvcykubGFzdEluZGV4T2YoJy8nKTsKICAgIH0KCiAgICByZXR1cm4gb25lLnN1YnN0cmluZygwLCBwb3MgKyAxKTsKICB9OwoKICBVUkkud2l0aGluU3RyaW5nID0gZnVuY3Rpb24oc3RyaW5nLCBjYWxsYmFjaywgb3B0aW9ucykgewogICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTsKICAgIHZhciBfc3RhcnQgPSBvcHRpb25zLnN0YXJ0IHx8IFVSSS5maW5kVXJpLnN0YXJ0OwogICAgdmFyIF9lbmQgPSBvcHRpb25zLmVuZCB8fCBVUkkuZmluZFVyaS5lbmQ7CiAgICB2YXIgX3RyaW0gPSBvcHRpb25zLnRyaW0gfHwgVVJJLmZpbmRVcmkudHJpbTsKICAgIHZhciBfYXR0cmlidXRlT3BlbiA9IC9bYS16MC05LV09WyInXT8kL2k7CgogICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICB2YXIgbWF0Y2ggPSBfc3RhcnQuZXhlYyhzdHJpbmcpOwogICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHZhciBzdGFydCA9IG1hdGNoLmluZGV4OwogICAgICBpZiAob3B0aW9ucy5pZ25vcmVIdG1sKSB7CiAgICAgICAgLy8gYXR0cmlidXQoZT1bIiddPyQpCiAgICAgICAgdmFyIGF0dHJpYnV0ZU9wZW4gPSBzdHJpbmcuc2xpY2UoTWF0aC5tYXgoc3RhcnQgLSAzLCAwKSwgc3RhcnQpOwogICAgICAgIGlmIChhdHRyaWJ1dGVPcGVuICYmIF9hdHRyaWJ1dGVPcGVuLnRlc3QoYXR0cmlidXRlT3BlbikpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGVuZCA9IHN0YXJ0ICsgc3RyaW5nLnNsaWNlKHN0YXJ0KS5zZWFyY2goX2VuZCk7CiAgICAgIHZhciBzbGljZSA9IHN0cmluZy5zbGljZShzdGFydCwgZW5kKS5yZXBsYWNlKF90cmltLCAnJyk7CiAgICAgIGlmIChvcHRpb25zLmlnbm9yZSAmJiBvcHRpb25zLmlnbm9yZS50ZXN0KHNsaWNlKSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBlbmQgPSBzdGFydCArIHNsaWNlLmxlbmd0aDsKICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKHNsaWNlLCBzdGFydCwgZW5kLCBzdHJpbmcpOwogICAgICBzdHJpbmcgPSBzdHJpbmcuc2xpY2UoMCwgc3RhcnQpICsgcmVzdWx0ICsgc3RyaW5nLnNsaWNlKGVuZCk7CiAgICAgIF9zdGFydC5sYXN0SW5kZXggPSBzdGFydCArIHJlc3VsdC5sZW5ndGg7CiAgICB9CgogICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7CiAgICByZXR1cm4gc3RyaW5nOwogIH07CgogIFVSSS5lbnN1cmVWYWxpZEhvc3RuYW1lID0gZnVuY3Rpb24odikgewogICAgLy8gVGhlb3JldGljYWxseSBVUklzIGFsbG93IHBlcmNlbnQtZW5jb2RpbmcgaW4gSG9zdG5hbWVzIChhY2NvcmRpbmcgdG8gUkZDIDM5ODYpCiAgICAvLyB0aGV5IGFyZSBub3QgcGFydCBvZiBETlMgYW5kIHRoZXJlZm9yZSBpZ25vcmVkIGJ5IFVSSS5qcwoKICAgIGlmICh2Lm1hdGNoKFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKSB7CiAgICAgIC8vIHRlc3QgcHVueWNvZGUKICAgICAgaWYgKCFwdW55Y29kZSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dIGFuZCBQdW55Y29kZS5qcyBpcyBub3QgYXZhaWxhYmxlJyk7CiAgICAgIH0KCiAgICAgIGlmIChwdW55Y29kZS50b0FTQ0lJKHYpLm1hdGNoKFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTsKICAgICAgfQogICAgfQogIH07CgogIC8vIG5vQ29uZmxpY3QKICBVUkkubm9Db25mbGljdCA9IGZ1bmN0aW9uKHJlbW92ZUFsbCkgewogICAgaWYgKHJlbW92ZUFsbCkgewogICAgICB2YXIgdW5jb25mbGljdGVkID0gewogICAgICAgIFVSSTogdGhpcy5ub0NvbmZsaWN0KCkKICAgICAgfTsKCiAgICAgIGlmIChyb290LlVSSVRlbXBsYXRlICYmIHR5cGVvZiByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1bmNvbmZsaWN0ZWQuVVJJVGVtcGxhdGUgPSByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QoKTsKICAgICAgfQoKICAgICAgaWYgKHJvb3QuSVB2NiAmJiB0eXBlb2Ygcm9vdC5JUHY2Lm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1bmNvbmZsaWN0ZWQuSVB2NiA9IHJvb3QuSVB2Ni5ub0NvbmZsaWN0KCk7CiAgICAgIH0KCiAgICAgIGlmIChyb290LlNlY29uZExldmVsRG9tYWlucyAmJiB0eXBlb2Ygcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMubm9Db25mbGljdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHVuY29uZmxpY3RlZC5TZWNvbmRMZXZlbERvbWFpbnMgPSByb290LlNlY29uZExldmVsRG9tYWlucy5ub0NvbmZsaWN0KCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1bmNvbmZsaWN0ZWQ7CiAgICB9IGVsc2UgaWYgKHJvb3QuVVJJID09PSB0aGlzKSB7CiAgICAgIHJvb3QuVVJJID0gX1VSSTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLmJ1aWxkID0gZnVuY3Rpb24oZGVmZXJCdWlsZCkgewogICAgaWYgKGRlZmVyQnVpbGQgPT09IHRydWUpIHsKICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSB0cnVlOwogICAgfSBlbHNlIGlmIChkZWZlckJ1aWxkID09PSB1bmRlZmluZWQgfHwgdGhpcy5fZGVmZXJyZWRfYnVpbGQpIHsKICAgICAgdGhpcy5fc3RyaW5nID0gVVJJLmJ1aWxkKHRoaXMuX3BhcnRzKTsKICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLmNsb25lID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmV3IFVSSSh0aGlzKTsKICB9OwoKICBwLnZhbHVlT2YgPSBwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5idWlsZChmYWxzZSkuX3N0cmluZzsKICB9OwoKCiAgZnVuY3Rpb24gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcihfcGFydCl7CiAgICByZXR1cm4gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLl9wYXJ0c1tfcGFydF0gfHwgJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fcGFydHNbX3BhcnRdID0gdiB8fCBudWxsOwogICAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgfTsKICB9CgogIGZ1bmN0aW9uIGdlbmVyYXRlUHJlZml4QWNjZXNzb3IoX3BhcnQsIF9rZXkpewogICAgcmV0dXJuIGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcGFydHNbX3BhcnRdIHx8ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh2ICE9PSBudWxsKSB7CiAgICAgICAgICB2ID0gdiArICcnOwogICAgICAgICAgaWYgKHYuY2hhckF0KDApID09PSBfa2V5KSB7CiAgICAgICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuX3BhcnRzW19wYXJ0XSA9IHY7CiAgICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICB9OwogIH0KCiAgcC5wcm90b2NvbCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3Byb3RvY29sJyk7CiAgcC51c2VybmFtZSA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3VzZXJuYW1lJyk7CiAgcC5wYXNzd29yZCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3Bhc3N3b3JkJyk7CiAgcC5ob3N0bmFtZSA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ2hvc3RuYW1lJyk7CiAgcC5wb3J0ID0gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcigncG9ydCcpOwogIHAucXVlcnkgPSBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKCdxdWVyeScsICc/Jyk7CiAgcC5mcmFnbWVudCA9IGdlbmVyYXRlUHJlZml4QWNjZXNzb3IoJ2ZyYWdtZW50JywgJyMnKTsKCiAgcC5zZWFyY2ggPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgdmFyIHQgPSB0aGlzLnF1ZXJ5KHYsIGJ1aWxkKTsKICAgIHJldHVybiB0eXBlb2YgdCA9PT0gJ3N0cmluZycgJiYgdC5sZW5ndGggPyAoJz8nICsgdCkgOiB0OwogIH07CiAgcC5oYXNoID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIHZhciB0ID0gdGhpcy5mcmFnbWVudCh2LCBidWlsZCk7CiAgICByZXR1cm4gdHlwZW9mIHQgPT09ICdzdHJpbmcnICYmIHQubGVuZ3RoID8gKCcjJyArIHQpIDogdDsKICB9OwoKICBwLnBhdGhuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkgewogICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aCB8fCAodGhpcy5fcGFydHMuaG9zdG5hbWUgPyAnLycgOiAnJyk7CiAgICAgIHJldHVybiB2ID8gKHRoaXMuX3BhcnRzLnVybiA/IFVSSS5kZWNvZGVVcm5QYXRoIDogVVJJLmRlY29kZVBhdGgpKHJlcykgOiByZXM7CiAgICB9IGVsc2UgewogICAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHYgPyBVUkkucmVjb2RlVXJuUGF0aCh2KSA6ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB2ID8gVVJJLnJlY29kZVBhdGgodikgOiAnLyc7CiAgICAgIH0KICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAucGF0aCA9IHAucGF0aG5hbWU7CiAgcC5ocmVmID0gZnVuY3Rpb24oaHJlZiwgYnVpbGQpIHsKICAgIHZhciBrZXk7CgogICAgaWYgKGhyZWYgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpOwogICAgfQoKICAgIHRoaXMuX3N0cmluZyA9ICcnOwogICAgdGhpcy5fcGFydHMgPSBVUkkuX3BhcnRzKCk7CgogICAgdmFyIF9VUkkgPSBocmVmIGluc3RhbmNlb2YgVVJJOwogICAgdmFyIF9vYmplY3QgPSB0eXBlb2YgaHJlZiA9PT0gJ29iamVjdCcgJiYgKGhyZWYuaG9zdG5hbWUgfHwgaHJlZi5wYXRoIHx8IGhyZWYucGF0aG5hbWUpOwogICAgaWYgKGhyZWYubm9kZU5hbWUpIHsKICAgICAgdmFyIGF0dHJpYnV0ZSA9IFVSSS5nZXREb21BdHRyaWJ1dGUoaHJlZik7CiAgICAgIGhyZWYgPSBocmVmW2F0dHJpYnV0ZV0gfHwgJyc7CiAgICAgIF9vYmplY3QgPSBmYWxzZTsKICAgIH0KCiAgICAvLyB3aW5kb3cubG9jYXRpb24gaXMgcmVwb3J0ZWQgdG8gYmUgYW4gb2JqZWN0LCBidXQgaXQncyBub3QgdGhlIHNvcnQKICAgIC8vIG9mIG9iamVjdCB3ZSdyZSBsb29raW5nIGZvcjoKICAgIC8vICogbG9jYXRpb24ucHJvdG9jb2wgZW5kcyB3aXRoIGEgY29sb24KICAgIC8vICogbG9jYXRpb24ucXVlcnkgIT0gb2JqZWN0LnNlYXJjaAogICAgLy8gKiBsb2NhdGlvbi5oYXNoICE9IG9iamVjdC5mcmFnbWVudAogICAgLy8gc2ltcGx5IHNlcmlhbGl6aW5nIHRoZSB1bmtub3duIG9iamVjdCBzaG91bGQgZG8gdGhlIHRyaWNrCiAgICAvLyAoZm9yIGxvY2F0aW9uLCBub3QgZm9yIGV2ZXJ5dGhpbmcuLi4pCiAgICBpZiAoIV9VUkkgJiYgX29iamVjdCAmJiBocmVmLnBhdGhuYW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgaHJlZiA9IGhyZWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICBpZiAodHlwZW9mIGhyZWYgPT09ICdzdHJpbmcnIHx8IGhyZWYgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgICAgdGhpcy5fcGFydHMgPSBVUkkucGFyc2UoU3RyaW5nKGhyZWYpLCB0aGlzLl9wYXJ0cyk7CiAgICB9IGVsc2UgaWYgKF9VUkkgfHwgX29iamVjdCkgewogICAgICB2YXIgc3JjID0gX1VSSSA/IGhyZWYuX3BhcnRzIDogaHJlZjsKICAgICAgZm9yIChrZXkgaW4gc3JjKSB7CiAgICAgICAgaWYgKGhhc093bi5jYWxsKHRoaXMuX3BhcnRzLCBrZXkpKSB7CiAgICAgICAgICB0aGlzLl9wYXJ0c1trZXldID0gc3JjW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGlucHV0Jyk7CiAgICB9CgogICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gaWRlbnRpZmljYXRpb24gYWNjZXNzb3JzCiAgcC5pcyA9IGZ1bmN0aW9uKHdoYXQpIHsKICAgIHZhciBpcCA9IGZhbHNlOwogICAgdmFyIGlwNCA9IGZhbHNlOwogICAgdmFyIGlwNiA9IGZhbHNlOwogICAgdmFyIG5hbWUgPSBmYWxzZTsKICAgIHZhciBzbGQgPSBmYWxzZTsKICAgIHZhciBpZG4gPSBmYWxzZTsKICAgIHZhciBwdW55Y29kZSA9IGZhbHNlOwogICAgdmFyIHJlbGF0aXZlID0gIXRoaXMuX3BhcnRzLnVybjsKCiAgICBpZiAodGhpcy5fcGFydHMuaG9zdG5hbWUpIHsKICAgICAgcmVsYXRpdmUgPSBmYWxzZTsKICAgICAgaXA0ID0gVVJJLmlwNF9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICBpcDYgPSBVUkkuaXA2X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIGlwID0gaXA0IHx8IGlwNjsKICAgICAgbmFtZSA9ICFpcDsKICAgICAgc2xkID0gbmFtZSAmJiBTTEQgJiYgU0xELmhhcyh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIGlkbiA9IG5hbWUgJiYgVVJJLmlkbl9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpOwogICAgICBwdW55Y29kZSA9IG5hbWUgJiYgVVJJLnB1bnljb2RlX2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICB9CgogICAgc3dpdGNoICh3aGF0LnRvTG93ZXJDYXNlKCkpIHsKICAgICAgY2FzZSAncmVsYXRpdmUnOgogICAgICAgIHJldHVybiByZWxhdGl2ZTsKCiAgICAgIGNhc2UgJ2Fic29sdXRlJzoKICAgICAgICByZXR1cm4gIXJlbGF0aXZlOwoKICAgICAgLy8gaG9zdG5hbWUgaWRlbnRpZmljYXRpb24KICAgICAgY2FzZSAnZG9tYWluJzoKICAgICAgY2FzZSAnbmFtZSc6CiAgICAgICAgcmV0dXJuIG5hbWU7CgogICAgICBjYXNlICdzbGQnOgogICAgICAgIHJldHVybiBzbGQ7CgogICAgICBjYXNlICdpcCc6CiAgICAgICAgcmV0dXJuIGlwOwoKICAgICAgY2FzZSAnaXA0JzoKICAgICAgY2FzZSAnaXB2NCc6CiAgICAgIGNhc2UgJ2luZXQ0JzoKICAgICAgICByZXR1cm4gaXA0OwoKICAgICAgY2FzZSAnaXA2JzoKICAgICAgY2FzZSAnaXB2Nic6CiAgICAgIGNhc2UgJ2luZXQ2JzoKICAgICAgICByZXR1cm4gaXA2OwoKICAgICAgY2FzZSAnaWRuJzoKICAgICAgICByZXR1cm4gaWRuOwoKICAgICAgY2FzZSAndXJsJzoKICAgICAgICByZXR1cm4gIXRoaXMuX3BhcnRzLnVybjsKCiAgICAgIGNhc2UgJ3Vybic6CiAgICAgICAgcmV0dXJuICEhdGhpcy5fcGFydHMudXJuOwoKICAgICAgY2FzZSAncHVueWNvZGUnOgogICAgICAgIHJldHVybiBwdW55Y29kZTsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9OwoKICAvLyBjb21wb25lbnQgc3BlY2lmaWMgaW5wdXQgdmFsaWRhdGlvbgogIHZhciBfcHJvdG9jb2wgPSBwLnByb3RvY29sOwogIHZhciBfcG9ydCA9IHAucG9ydDsKICB2YXIgX2hvc3RuYW1lID0gcC5ob3N0bmFtZTsKCiAgcC5wcm90b2NvbCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICh2KSB7CiAgICAgICAgLy8gYWNjZXB0IHRyYWlsaW5nIDovLwogICAgICAgIHYgPSB2LnJlcGxhY2UoLzooXC9cLyk/JC8sICcnKTsKCiAgICAgICAgaWYgKCF2Lm1hdGNoKFVSSS5wcm90b2NvbF9leHByZXNzaW9uKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvdG9jb2wgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIG9yIGRvZXNuXCd0IHN0YXJ0IHdpdGggW0EtWl0nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfcHJvdG9jb2wuY2FsbCh0aGlzLCB2LCBidWlsZCk7CiAgfTsKICBwLnNjaGVtZSA9IHAucHJvdG9jb2w7CiAgcC5wb3J0ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICh2ID09PSAwKSB7CiAgICAgICAgdiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmICh2KSB7CiAgICAgICAgdiArPSAnJzsKICAgICAgICBpZiAodi5jaGFyQXQoMCkgPT09ICc6JykgewogICAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHYubWF0Y2goL1teMC05XS8pKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQb3J0ICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbMC05XScpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIF9wb3J0LmNhbGwodGhpcywgdiwgYnVpbGQpOwogIH07CiAgcC5ob3N0bmFtZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgeCA9IHt9OwogICAgICB2YXIgcmVzID0gVVJJLnBhcnNlSG9zdCh2LCB4KTsKICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgIicgKyB2ICsgJyIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTsKICAgICAgfQoKICAgICAgdiA9IHguaG9zdG5hbWU7CiAgICB9CiAgICByZXR1cm4gX2hvc3RuYW1lLmNhbGwodGhpcywgdiwgYnVpbGQpOwogIH07CgogIC8vIGNvbXBvdW5kIGFjY2Vzc29ycwogIHAub3JpZ2luID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2woKTsKICAgICAgdmFyIGF1dGhvcml0eSA9IHRoaXMuYXV0aG9yaXR5KCk7CiAgICAgIGlmICghYXV0aG9yaXR5KSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICByZXR1cm4gKHByb3RvY29sID8gcHJvdG9jb2wgKyAnOi8vJyA6ICcnKSArIHRoaXMuYXV0aG9yaXR5KCk7CiAgICB9IGVsc2UgewogICAgICB2YXIgb3JpZ2luID0gVVJJKHYpOwogICAgICB0aGlzCiAgICAgICAgLnByb3RvY29sKG9yaWdpbi5wcm90b2NvbCgpKQogICAgICAgIC5hdXRob3JpdHkob3JpZ2luLmF1dGhvcml0eSgpKQogICAgICAgIC5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuaG9zdCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUgPyBVUkkuYnVpbGRIb3N0KHRoaXMuX3BhcnRzKSA6ICcnOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUhvc3QodiwgdGhpcy5fcGFydHMpOwogICAgICBpZiAocmVzICE9PSAnLycpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSAiJyArIHYgKyAnIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5hdXRob3JpdHkgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gVVJJLmJ1aWxkQXV0aG9yaXR5KHRoaXMuX3BhcnRzKSA6ICcnOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUF1dGhvcml0eSh2LCB0aGlzLl9wYXJ0cyk7CiAgICAgIGlmIChyZXMgIT09ICcvJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dJyk7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnVzZXJpbmZvID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhciB0ID0gVVJJLmJ1aWxkVXNlcmluZm8odGhpcy5fcGFydHMpOwogICAgICByZXR1cm4gdCA/IHQuc3Vic3RyaW5nKDAsIHQubGVuZ3RoIC0xKSA6IHQ7CiAgICB9IGVsc2UgewogICAgICBpZiAodlt2Lmxlbmd0aC0xXSAhPT0gJ0AnKSB7CiAgICAgICAgdiArPSAnQCc7CiAgICAgIH0KCiAgICAgIFVSSS5wYXJzZVVzZXJpbmZvKHYsIHRoaXMuX3BhcnRzKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAucmVzb3VyY2UgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgdmFyIHBhcnRzOwoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHRoaXMucGF0aCgpICsgdGhpcy5zZWFyY2goKSArIHRoaXMuaGFzaCgpOwogICAgfQoKICAgIHBhcnRzID0gVVJJLnBhcnNlKHYpOwogICAgdGhpcy5fcGFydHMucGF0aCA9IHBhcnRzLnBhdGg7CiAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IHBhcnRzLnF1ZXJ5OwogICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBwYXJ0cy5mcmFnbWVudDsKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIGZyYWN0aW9uIGFjY2Vzc29ycwogIHAuc3ViZG9tYWluID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICAvLyBjb252ZW5pZW5jZSwgcmV0dXJuICJ3d3ciIGZyb20gInd3dy5leGFtcGxlLm9yZyIKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICAvLyBncmFiIGRvbWFpbiBhbmQgYWRkIGFub3RoZXIgc2VnbWVudAogICAgICB2YXIgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoIC0gdGhpcy5kb21haW4oKS5sZW5ndGggLSAxOwogICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGVuZCkgfHwgJyc7CiAgICB9IGVsc2UgewogICAgICB2YXIgZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aCAtIHRoaXMuZG9tYWluKCkubGVuZ3RoOwogICAgICB2YXIgc3ViID0gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGUpOwogICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoJ14nICsgZXNjYXBlUmVnRXgoc3ViKSk7CgogICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLicpIHsKICAgICAgICB2ICs9ICcuJzsKICAgICAgfQoKICAgICAgaWYgKHYpIHsKICAgICAgICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSh2KTsKICAgICAgfQoKICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5kb21haW4gPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgIGJ1aWxkID0gdjsKICAgICAgdiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICAvLyBjb252ZW5pZW5jZSwgcmV0dXJuICJleGFtcGxlLm9yZyIgZnJvbSAid3d3LmV4YW1wbGUub3JnIgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIC8vIGlmIGhvc3RuYW1lIGNvbnNpc3RzIG9mIDEgb3IgMiBzZWdtZW50cywgaXQgbXVzdCBiZSB0aGUgZG9tYWluCiAgICAgIHZhciB0ID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubWF0Y2goL1wuL2cpOwogICAgICBpZiAodCAmJiB0Lmxlbmd0aCA8IDIpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWU7CiAgICAgIH0KCiAgICAgIC8vIGdyYWIgdGxkIGFuZCBhZGQgYW5vdGhlciBzZWdtZW50CiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGggLSB0aGlzLnRsZChidWlsZCkubGVuZ3RoIC0gMTsKICAgICAgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGFzdEluZGV4T2YoJy4nLCBlbmQgLTEpICsgMTsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhlbmQpIHx8ICcnOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCF2KSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY2Fubm90IHNldCBkb21haW4gZW1wdHknKTsKICAgICAgfQoKICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodik7CgogICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMuZG9tYWluKCkpICsgJyQnKTsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnRsZCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHsKICAgICAgYnVpbGQgPSB2OwogICAgICB2ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIC8vIHJldHVybiAib3JnIiBmcm9tICJ3d3cuZXhhbXBsZS5vcmciCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgdmFyIHBvcyA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIHZhciB0bGQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcocG9zICsgMSk7CgogICAgICBpZiAoYnVpbGQgIT09IHRydWUgJiYgU0xEICYmIFNMRC5saXN0W3RsZC50b0xvd2VyQ2FzZSgpXSkgewogICAgICAgIHJldHVybiBTTEQuZ2V0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB8fCB0bGQ7CiAgICAgIH0KCiAgICAgIHJldHVybiB0bGQ7CiAgICB9IGVsc2UgewogICAgICB2YXIgcmVwbGFjZTsKCiAgICAgIGlmICghdikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Nhbm5vdCBzZXQgVExEIGVtcHR5Jyk7CiAgICAgIH0gZWxzZSBpZiAodi5tYXRjaCgvW15hLXpBLVowLTktXS8pKSB7CiAgICAgICAgaWYgKFNMRCAmJiBTTEQuaXModikpIHsKICAgICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMudGxkKCkpICsgJyQnKTsKICAgICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVExEICInICsgdiArICciIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05XScpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkgewogICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignY2Fubm90IHNldCBUTEQgb24gbm9uLWRvbWFpbiBob3N0Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy50bGQoKSkgKyAnJCcpOwogICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTsKICAgICAgfQoKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIHAuZGlyZWN0b3J5ID0gZnVuY3Rpb24odiwgYnVpbGQpIHsKICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHsKICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpczsKICAgIH0KCiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5wYXRoICYmICF0aGlzLl9wYXJ0cy5ob3N0bmFtZSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykgewogICAgICAgIHJldHVybiAnLyc7CiAgICAgIH0KCiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGggLSAxOwogICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCwgZW5kKSB8fCAodGhpcy5fcGFydHMuaG9zdG5hbWUgPyAnLycgOiAnJyk7CgogICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoKHJlcykgOiByZXM7CgogICAgfSBlbHNlIHsKICAgICAgdmFyIGUgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGg7CiAgICAgIHZhciBkaXJlY3RvcnkgPSB0aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZygwLCBlKTsKICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKCdeJyArIGVzY2FwZVJlZ0V4KGRpcmVjdG9yeSkpOwoKICAgICAgLy8gZnVsbHkgcXVhbGlmaWVyIGRpcmVjdG9yaWVzIGJlZ2luIHdpdGggYSBzbGFzaAogICAgICBpZiAoIXRoaXMuaXMoJ3JlbGF0aXZlJykpIHsKICAgICAgICBpZiAoIXYpIHsKICAgICAgICAgIHYgPSAnLyc7CiAgICAgICAgfQoKICAgICAgICBpZiAodi5jaGFyQXQoMCkgIT09ICcvJykgewogICAgICAgICAgdiA9ICcvJyArIHY7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBkaXJlY3RvcmllcyBhbHdheXMgZW5kIHdpdGggYSBzbGFzaAogICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLycpIHsKICAgICAgICB2ICs9ICcvJzsKICAgICAgfQoKICAgICAgdiA9IFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHJlcGxhY2UsIHYpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5maWxlbmFtZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSB0cnVlKSB7CiAgICAgIGlmICghdGhpcy5fcGFydHMucGF0aCB8fCB0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIHZhciBwb3MgPSB0aGlzLl9wYXJ0cy5wYXRoLmxhc3RJbmRleE9mKCcvJyk7CiAgICAgIHZhciByZXMgPSB0aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZyhwb3MrMSk7CgogICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoU2VnbWVudChyZXMpIDogcmVzOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG11dGF0ZWREaXJlY3RvcnkgPSBmYWxzZTsKCiAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJy8nKSB7CiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICB9CgogICAgICBpZiAodi5tYXRjaCgvXC4/XC8vKSkgewogICAgICAgIG11dGF0ZWREaXJlY3RvcnkgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy5maWxlbmFtZSgpKSArICckJyk7CiAgICAgIHYgPSBVUkkucmVjb2RlUGF0aCh2KTsKICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZShyZXBsYWNlLCB2KTsKCiAgICAgIGlmIChtdXRhdGVkRGlyZWN0b3J5KSB7CiAgICAgICAgdGhpcy5ub3JtYWxpemVQYXRoKGJ1aWxkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH07CiAgcC5zdWZmaXggPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkgewogICAgICBpZiAoIXRoaXMuX3BhcnRzLnBhdGggfHwgdGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICB2YXIgZmlsZW5hbWUgPSB0aGlzLmZpbGVuYW1lKCk7CiAgICAgIHZhciBwb3MgPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICB2YXIgcywgcmVzOwoKICAgICAgaWYgKHBvcyA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIC8vIHN1ZmZpeCBtYXkgb25seSBjb250YWluIGFsbnVtIGNoYXJhY3RlcnMgKHl1cCwgSSBtYWRlIHRoaXMgdXAuKQogICAgICBzID0gZmlsZW5hbWUuc3Vic3RyaW5nKHBvcysxKTsKICAgICAgcmVzID0gKC9eW2EtejAtOSVdKyQvaSkudGVzdChzKSA/IHMgOiAnJzsKICAgICAgcmV0dXJuIHYgPyBVUkkuZGVjb2RlUGF0aFNlZ21lbnQocmVzKSA6IHJlczsKICAgIH0gZWxzZSB7CiAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJy4nKSB7CiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpOwogICAgICB9CgogICAgICB2YXIgc3VmZml4ID0gdGhpcy5zdWZmaXgoKTsKICAgICAgdmFyIHJlcGxhY2U7CgogICAgICBpZiAoIXN1ZmZpeCkgewogICAgICAgIGlmICghdikgewogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9wYXJ0cy5wYXRoICs9ICcuJyArIFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICB9IGVsc2UgaWYgKCF2KSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgoJy4nICsgc3VmZml4KSArICckJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgoc3VmZml4KSArICckJyk7CiAgICAgIH0KCiAgICAgIGlmIChyZXBsYWNlKSB7CiAgICAgICAgdiA9IFVSSS5yZWNvZGVQYXRoKHYpOwogICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB0aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UocmVwbGFjZSwgdik7CiAgICAgIH0KCiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBwLnNlZ21lbnQgPSBmdW5jdGlvbihzZWdtZW50LCB2LCBidWlsZCkgewogICAgdmFyIHNlcGFyYXRvciA9IHRoaXMuX3BhcnRzLnVybiA/ICc6JyA6ICcvJzsKICAgIHZhciBwYXRoID0gdGhpcy5wYXRoKCk7CiAgICB2YXIgYWJzb2x1dGUgPSBwYXRoLnN1YnN0cmluZygwLCAxKSA9PT0gJy8nOwogICAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdChzZXBhcmF0b3IpOwoKICAgIGlmIChzZWdtZW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHNlZ21lbnQgIT09ICdudW1iZXInKSB7CiAgICAgIGJ1aWxkID0gdjsKICAgICAgdiA9IHNlZ21lbnQ7CiAgICAgIHNlZ21lbnQgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKHNlZ21lbnQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc2VnbWVudCAhPT0gJ251bWJlcicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdCYWQgc2VnbWVudCAiJyArIHNlZ21lbnQgKyAnIiwgbXVzdCBiZSAwLWJhc2VkIGludGVnZXInKTsKICAgIH0KCiAgICBpZiAoYWJzb2x1dGUpIHsKICAgICAgc2VnbWVudHMuc2hpZnQoKTsKICAgIH0KCiAgICBpZiAoc2VnbWVudCA8IDApIHsKICAgICAgLy8gYWxsb3cgbmVnYXRpdmUgaW5kZXhlcyB0byBhZGRyZXNzIGZyb20gdGhlIGVuZAogICAgICBzZWdtZW50ID0gTWF0aC5tYXgoc2VnbWVudHMubGVuZ3RoICsgc2VnbWVudCwgMCk7CiAgICB9CgogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICAvKmpzaGludCBsYXhicmVhazogdHJ1ZSAqLwogICAgICByZXR1cm4gc2VnbWVudCA9PT0gdW5kZWZpbmVkCiAgICAgICAgPyBzZWdtZW50cwogICAgICAgIDogc2VnbWVudHNbc2VnbWVudF07CiAgICAgIC8qanNoaW50IGxheGJyZWFrOiBmYWxzZSAqLwogICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSBudWxsIHx8IHNlZ21lbnRzW3NlZ21lbnRdID09PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKGlzQXJyYXkodikpIHsKICAgICAgICBzZWdtZW50cyA9IFtdOwogICAgICAgIC8vIGNvbGxhcHNlIGVtcHR5IGVsZW1lbnRzIHdpdGhpbiBhcnJheQogICAgICAgIGZvciAodmFyIGk9MCwgbD12Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgaWYgKCF2W2ldLmxlbmd0aCAmJiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXS5sZW5ndGgpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzZWdtZW50cy5sZW5ndGggJiYgIXNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtMV0ubGVuZ3RoKSB7CiAgICAgICAgICAgIHNlZ21lbnRzLnBvcCgpOwogICAgICAgICAgfQoKICAgICAgICAgIHNlZ21lbnRzLnB1c2godHJpbVNsYXNoZXModltpXSkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh2IHx8IHR5cGVvZiB2ID09PSAnc3RyaW5nJykgewogICAgICAgIHYgPSB0cmltU2xhc2hlcyh2KTsKICAgICAgICBpZiAoc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9PT0gJycpIHsKICAgICAgICAgIC8vIGVtcHR5IHRyYWlsaW5nIGVsZW1lbnRzIGhhdmUgdG8gYmUgb3ZlcndyaXR0ZW4KICAgICAgICAgIC8vIHRvIHByZXZlbnQgcmVzdWx0cyBzdWNoIGFzIC9mb28vL2JhcgogICAgICAgICAgc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9IHY7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlZ21lbnRzLnB1c2godik7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAodikgewogICAgICAgIHNlZ21lbnRzW3NlZ21lbnRdID0gdHJpbVNsYXNoZXModik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VnbWVudHMuc3BsaWNlKHNlZ21lbnQsIDEpOwogICAgICB9CiAgICB9CgogICAgaWYgKGFic29sdXRlKSB7CiAgICAgIHNlZ21lbnRzLnVuc2hpZnQoJycpOwogICAgfQoKICAgIHJldHVybiB0aGlzLnBhdGgoc2VnbWVudHMuam9pbihzZXBhcmF0b3IpLCBidWlsZCk7CiAgfTsKICBwLnNlZ21lbnRDb2RlZCA9IGZ1bmN0aW9uKHNlZ21lbnQsIHYsIGJ1aWxkKSB7CiAgICB2YXIgc2VnbWVudHMsIGksIGw7CgogICAgaWYgKHR5cGVvZiBzZWdtZW50ICE9PSAnbnVtYmVyJykgewogICAgICBidWlsZCA9IHY7CiAgICAgIHYgPSBzZWdtZW50OwogICAgICBzZWdtZW50ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgc2VnbWVudHMgPSB0aGlzLnNlZ21lbnQoc2VnbWVudCwgdiwgYnVpbGQpOwogICAgICBpZiAoIWlzQXJyYXkoc2VnbWVudHMpKSB7CiAgICAgICAgc2VnbWVudHMgPSBzZWdtZW50cyAhPT0gdW5kZWZpbmVkID8gVVJJLmRlY29kZShzZWdtZW50cykgOiB1bmRlZmluZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChpID0gMCwgbCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgc2VnbWVudHNbaV0gPSBVUkkuZGVjb2RlKHNlZ21lbnRzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzZWdtZW50czsKICAgIH0KCiAgICBpZiAoIWlzQXJyYXkodikpIHsKICAgICAgdiA9ICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgfHwgdiBpbnN0YW5jZW9mIFN0cmluZykgPyBVUkkuZW5jb2RlKHYpIDogdjsKICAgIH0gZWxzZSB7CiAgICAgIGZvciAoaSA9IDAsIGwgPSB2Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHZbaV0gPSBVUkkuZW5jb2RlKHZbaV0pOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc2VnbWVudChzZWdtZW50LCB2LCBidWlsZCk7CiAgfTsKCiAgLy8gbXV0YXRpbmcgcXVlcnkgc3RyaW5nCiAgdmFyIHEgPSBwLnF1ZXJ5OwogIHAucXVlcnkgPSBmdW5jdGlvbih2LCBidWlsZCkgewogICAgaWYgKHYgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09ICdmdW5jdGlvbicpIHsKICAgICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgIHZhciByZXN1bHQgPSB2LmNhbGwodGhpcywgZGF0YSk7CiAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkocmVzdWx0IHx8IGRhdGEsIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9IGVsc2UgaWYgKHYgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHsKICAgICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeSh2LCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHEuY2FsbCh0aGlzLCB2LCBidWlsZCk7CiAgICB9CiAgfTsKICBwLnNldFF1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGJ1aWxkKSB7CiAgICB2YXIgZGF0YSA9IFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKCiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnIHx8IG5hbWUgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgICAgZGF0YVtuYW1lXSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IG51bGw7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JykgewogICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkgewogICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7CiAgICAgICAgICBkYXRhW2tleV0gPSBuYW1lW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBuYW1lIHBhcmFtZXRlcicpOwogICAgfQoKICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkoZGF0YSwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHsKICAgICAgYnVpbGQgPSB2YWx1ZTsKICAgIH0KCiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICByZXR1cm4gdGhpczsKICB9OwogIHAuYWRkUXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYnVpbGQpIHsKICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWUpOwogICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgewogICAgICBidWlsZCA9IHZhbHVlOwogICAgfQoKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBidWlsZCkgewogICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICBVUkkucmVtb3ZlUXVlcnkoZGF0YSwgbmFtZSwgdmFsdWUpOwogICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpOwogICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgewogICAgICBidWlsZCA9IHZhbHVlOwogICAgfQoKICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5oYXNRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSkgewogICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICByZXR1cm4gVVJJLmhhc1F1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSk7CiAgfTsKICBwLnNldFNlYXJjaCA9IHAuc2V0UXVlcnk7CiAgcC5hZGRTZWFyY2ggPSBwLmFkZFF1ZXJ5OwogIHAucmVtb3ZlU2VhcmNoID0gcC5yZW1vdmVRdWVyeTsKICBwLmhhc1NlYXJjaCA9IHAuaGFzUXVlcnk7CgogIC8vIHNhbml0aXppbmcgVVJMcwogIHAubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHJldHVybiB0aGlzCiAgICAgICAgLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKQogICAgICAgIC5ub3JtYWxpemVQYXRoKGZhbHNlKQogICAgICAgIC5ub3JtYWxpemVRdWVyeShmYWxzZSkKICAgICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpCiAgICAgICAgLmJ1aWxkKCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMKICAgICAgLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKQogICAgICAubm9ybWFsaXplSG9zdG5hbWUoZmFsc2UpCiAgICAgIC5ub3JtYWxpemVQb3J0KGZhbHNlKQogICAgICAubm9ybWFsaXplUGF0aChmYWxzZSkKICAgICAgLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKQogICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpCiAgICAgIC5idWlsZCgpOwogIH07CiAgcC5ub3JtYWxpemVQcm90b2NvbCA9IGZ1bmN0aW9uKGJ1aWxkKSB7CiAgICBpZiAodHlwZW9mIHRoaXMuX3BhcnRzLnByb3RvY29sID09PSAnc3RyaW5nJykgewogICAgICB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9IHRoaXMuX3BhcnRzLnByb3RvY29sLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwogIHAubm9ybWFsaXplSG9zdG5hbWUgPSBmdW5jdGlvbihidWlsZCkgewogICAgaWYgKHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB7CiAgICAgIGlmICh0aGlzLmlzKCdJRE4nKSAmJiBwdW55Y29kZSkgewogICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pcygnSVB2NicpICYmIElQdjYpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IElQdjYuYmVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CiAgcC5ub3JtYWxpemVQb3J0ID0gZnVuY3Rpb24oYnVpbGQpIHsKICAgIC8vIHJlbW92ZSBwb3J0IG9mIGl0J3MgdGhlIHByb3RvY29sJ3MgZGVmYXVsdAogICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9PT0gJ3N0cmluZycgJiYgdGhpcy5fcGFydHMucG9ydCA9PT0gVVJJLmRlZmF1bHRQb3J0c1t0aGlzLl9wYXJ0cy5wcm90b2NvbF0pIHsKICAgICAgdGhpcy5fcGFydHMucG9ydCA9IG51bGw7CiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwogIHAubm9ybWFsaXplUGF0aCA9IGZ1bmN0aW9uKGJ1aWxkKSB7CiAgICB2YXIgX3BhdGggPSB0aGlzLl9wYXJ0cy5wYXRoOwogICAgaWYgKCFfcGF0aCkgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7CiAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSBVUkkucmVjb2RlVXJuUGF0aCh0aGlzLl9wYXJ0cy5wYXRoKTsKICAgICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBpZiAodGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIF9wYXRoID0gVVJJLnJlY29kZVBhdGgoX3BhdGgpOwoKICAgIHZhciBfd2FzX3JlbGF0aXZlOwogICAgdmFyIF9sZWFkaW5nUGFyZW50cyA9ICcnOwogICAgdmFyIF9wYXJlbnQsIF9wb3M7CgogICAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzCiAgICBpZiAoX3BhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgX3dhc19yZWxhdGl2ZSA9IHRydWU7CiAgICAgIF9wYXRoID0gJy8nICsgX3BhdGg7CiAgICB9CgogICAgLy8gaGFuZGxlIHJlbGF0aXZlIGZpbGVzIChhcyBvcHBvc2VkIHRvIGRpcmVjdG9yaWVzKQogICAgaWYgKF9wYXRoLnNsaWNlKC0zKSA9PT0gJy8uLicgfHwgX3BhdGguc2xpY2UoLTIpID09PSAnLy4nKSB7CiAgICAgIF9wYXRoICs9ICcvJzsKICAgIH0KCiAgICAvLyByZXNvbHZlIHNpbXBsZXMKICAgIF9wYXRoID0gX3BhdGgKICAgICAgLnJlcGxhY2UoLyhcLyhcLlwvKSspfChcL1wuJCkvZywgJy8nKQogICAgICAucmVwbGFjZSgvXC97Mix9L2csICcvJyk7CgogICAgLy8gcmVtZW1iZXIgbGVhZGluZyBwYXJlbnRzCiAgICBpZiAoX3dhc19yZWxhdGl2ZSkgewogICAgICBfbGVhZGluZ1BhcmVudHMgPSBfcGF0aC5zdWJzdHJpbmcoMSkubWF0Y2goL14oXC5cLlwvKSsvKSB8fCAnJzsKICAgICAgaWYgKF9sZWFkaW5nUGFyZW50cykgewogICAgICAgIF9sZWFkaW5nUGFyZW50cyA9IF9sZWFkaW5nUGFyZW50c1swXTsKICAgICAgfQogICAgfQoKICAgIC8vIHJlc29sdmUgcGFyZW50cwogICAgd2hpbGUgKHRydWUpIHsKICAgICAgX3BhcmVudCA9IF9wYXRoLnNlYXJjaCgvXC9cLlwuKFwvfCQpLyk7CiAgICAgIGlmIChfcGFyZW50ID09PSAtMSkgewogICAgICAgIC8vIG5vIG1vcmUgLi4vIHRvIHJlc29sdmUKICAgICAgICBicmVhazsKICAgICAgfSBlbHNlIGlmIChfcGFyZW50ID09PSAwKSB7CiAgICAgICAgLy8gdG9wIGxldmVsIGNhbm5vdCBiZSByZWxhdGl2ZSwgc2tpcCBpdAogICAgICAgIF9wYXRoID0gX3BhdGguc3Vic3RyaW5nKDMpOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBfcG9zID0gX3BhdGguc3Vic3RyaW5nKDAsIF9wYXJlbnQpLmxhc3RJbmRleE9mKCcvJyk7CiAgICAgIGlmIChfcG9zID09PSAtMSkgewogICAgICAgIF9wb3MgPSBfcGFyZW50OwogICAgICB9CiAgICAgIF9wYXRoID0gX3BhdGguc3Vic3RyaW5nKDAsIF9wb3MpICsgX3BhdGguc3Vic3RyaW5nKF9wYXJlbnQgKyAzKTsKICAgIH0KCiAgICAvLyByZXZlcnQgdG8gcmVsYXRpdmUKICAgIGlmIChfd2FzX3JlbGF0aXZlICYmIHRoaXMuaXMoJ3JlbGF0aXZlJykpIHsKICAgICAgX3BhdGggPSBfbGVhZGluZ1BhcmVudHMgKyBfcGF0aC5zdWJzdHJpbmcoMSk7CiAgICB9CgogICAgdGhpcy5fcGFydHMucGF0aCA9IF9wYXRoOwogICAgdGhpcy5idWlsZCghYnVpbGQpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZVBhdGhuYW1lID0gcC5ub3JtYWxpemVQYXRoOwogIHAubm9ybWFsaXplUXVlcnkgPSBmdW5jdGlvbihidWlsZCkgewogICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5xdWVyeSA9PT0gJ3N0cmluZycpIHsKICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5xdWVyeS5sZW5ndGgpIHsKICAgICAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5xdWVyeShVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkpOwogICAgICB9CgogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZUZyYWdtZW50ID0gZnVuY3Rpb24oYnVpbGQpIHsKICAgIGlmICghdGhpcy5fcGFydHMuZnJhZ21lbnQpIHsKICAgICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBudWxsOwogICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBwLm5vcm1hbGl6ZVNlYXJjaCA9IHAubm9ybWFsaXplUXVlcnk7CiAgcC5ub3JtYWxpemVIYXNoID0gcC5ub3JtYWxpemVGcmFnbWVudDsKCiAgcC5pc284ODU5ID0gZnVuY3Rpb24oKSB7CiAgICAvLyBleHBlY3QgdW5pY29kZSBpbnB1dCwgaXNvODg1OSBvdXRwdXQKICAgIHZhciBlID0gVVJJLmVuY29kZTsKICAgIHZhciBkID0gVVJJLmRlY29kZTsKCiAgICBVUkkuZW5jb2RlID0gZXNjYXBlOwogICAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDsKICAgIHRyeSB7CiAgICAgIHRoaXMubm9ybWFsaXplKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBVUkkuZW5jb2RlID0gZTsKICAgICAgVVJJLmRlY29kZSA9IGQ7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBwLnVuaWNvZGUgPSBmdW5jdGlvbigpIHsKICAgIC8vIGV4cGVjdCBpc284ODU5IGlucHV0LCB1bmljb2RlIG91dHB1dAogICAgdmFyIGUgPSBVUkkuZW5jb2RlOwogICAgdmFyIGQgPSBVUkkuZGVjb2RlOwoKICAgIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7CiAgICBVUkkuZGVjb2RlID0gdW5lc2NhcGU7CiAgICB0cnkgewogICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgVVJJLmVuY29kZSA9IGU7CiAgICAgIFVSSS5kZWNvZGUgPSBkOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcC5yZWFkYWJsZSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHVyaSA9IHRoaXMuY2xvbmUoKTsKICAgIC8vIHJlbW92aW5nIHVzZXJuYW1lLCBwYXNzd29yZCwgYmVjYXVzZSB0aGV5IHNob3VsZG4ndCBiZSBkaXNwbGF5ZWQgYWNjb3JkaW5nIHRvIFJGQyAzOTg2CiAgICB1cmkudXNlcm5hbWUoJycpLnBhc3N3b3JkKCcnKS5ub3JtYWxpemUoKTsKICAgIHZhciB0ID0gJyc7CiAgICBpZiAodXJpLl9wYXJ0cy5wcm90b2NvbCkgewogICAgICB0ICs9IHVyaS5fcGFydHMucHJvdG9jb2wgKyAnOi8vJzsKICAgIH0KCiAgICBpZiAodXJpLl9wYXJ0cy5ob3N0bmFtZSkgewogICAgICBpZiAodXJpLmlzKCdwdW55Y29kZScpICYmIHB1bnljb2RlKSB7CiAgICAgICAgdCArPSBwdW55Y29kZS50b1VuaWNvZGUodXJpLl9wYXJ0cy5ob3N0bmFtZSk7CiAgICAgICAgaWYgKHVyaS5fcGFydHMucG9ydCkgewogICAgICAgICAgdCArPSAnOicgKyB1cmkuX3BhcnRzLnBvcnQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHQgKz0gdXJpLmhvc3QoKTsKICAgICAgfQogICAgfQoKICAgIGlmICh1cmkuX3BhcnRzLmhvc3RuYW1lICYmIHVyaS5fcGFydHMucGF0aCAmJiB1cmkuX3BhcnRzLnBhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgdCArPSAnLyc7CiAgICB9CgogICAgdCArPSB1cmkucGF0aCh0cnVlKTsKICAgIGlmICh1cmkuX3BhcnRzLnF1ZXJ5KSB7CiAgICAgIHZhciBxID0gJyc7CiAgICAgIGZvciAodmFyIGkgPSAwLCBxcCA9IHVyaS5fcGFydHMucXVlcnkuc3BsaXQoJyYnKSwgbCA9IHFwLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHZhciBrdiA9IChxcFtpXSB8fCAnJykuc3BsaXQoJz0nKTsKICAgICAgICBxICs9ICcmJyArIFVSSS5kZWNvZGVRdWVyeShrdlswXSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkKICAgICAgICAgIC5yZXBsYWNlKC8mL2csICclMjYnKTsKCiAgICAgICAgaWYgKGt2WzFdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHEgKz0gJz0nICsgVVJJLmRlY29kZVF1ZXJ5KGt2WzFdLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKQogICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJTI2Jyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHQgKz0gJz8nICsgcS5zdWJzdHJpbmcoMSk7CiAgICB9CgogICAgdCArPSBVUkkuZGVjb2RlUXVlcnkodXJpLmhhc2goKSwgdHJ1ZSk7CiAgICByZXR1cm4gdDsKICB9OwoKICAvLyByZXNvbHZpbmcgcmVsYXRpdmUgYW5kIGFic29sdXRlIFVSTHMKICBwLmFic29sdXRlVG8gPSBmdW5jdGlvbihiYXNlKSB7CiAgICB2YXIgcmVzb2x2ZWQgPSB0aGlzLmNsb25lKCk7CiAgICB2YXIgcHJvcGVydGllcyA9IFsncHJvdG9jb2wnLCAndXNlcm5hbWUnLCAncGFzc3dvcmQnLCAnaG9zdG5hbWUnLCAncG9ydCddOwogICAgdmFyIGJhc2VkaXIsIGksIHA7CgogICAgaWYgKHRoaXMuX3BhcnRzLnVybikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSTnMgZG8gbm90IGhhdmUgYW55IGdlbmVyYWxseSBkZWZpbmVkIGhpZXJhcmNoaWNhbCBjb21wb25lbnRzJyk7CiAgICB9CgogICAgaWYgKCEoYmFzZSBpbnN0YW5jZW9mIFVSSSkpIHsKICAgICAgYmFzZSA9IG5ldyBVUkkoYmFzZSk7CiAgICB9CgogICAgaWYgKCFyZXNvbHZlZC5fcGFydHMucHJvdG9jb2wpIHsKICAgICAgcmVzb2x2ZWQuX3BhcnRzLnByb3RvY29sID0gYmFzZS5fcGFydHMucHJvdG9jb2w7CiAgICB9CgogICAgaWYgKHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB7CiAgICAgIHJldHVybiByZXNvbHZlZDsKICAgIH0KCiAgICBmb3IgKGkgPSAwOyAocCA9IHByb3BlcnRpZXNbaV0pOyBpKyspIHsKICAgICAgcmVzb2x2ZWQuX3BhcnRzW3BdID0gYmFzZS5fcGFydHNbcF07CiAgICB9CgogICAgaWYgKCFyZXNvbHZlZC5fcGFydHMucGF0aCkgewogICAgICByZXNvbHZlZC5fcGFydHMucGF0aCA9IGJhc2UuX3BhcnRzLnBhdGg7CiAgICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5KSB7CiAgICAgICAgcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5ID0gYmFzZS5fcGFydHMucXVlcnk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAocmVzb2x2ZWQuX3BhcnRzLnBhdGguc3Vic3RyaW5nKC0yKSA9PT0gJy4uJykgewogICAgICByZXNvbHZlZC5fcGFydHMucGF0aCArPSAnLyc7CiAgICB9CgogICAgaWYgKHJlc29sdmVkLnBhdGgoKS5jaGFyQXQoMCkgIT09ICcvJykgewogICAgICBiYXNlZGlyID0gYmFzZS5kaXJlY3RvcnkoKTsKICAgICAgYmFzZWRpciA9IGJhc2VkaXIgPyBiYXNlZGlyIDogYmFzZS5wYXRoKCkuaW5kZXhPZignLycpID09PSAwID8gJy8nIDogJyc7CiAgICAgIHJlc29sdmVkLl9wYXJ0cy5wYXRoID0gKGJhc2VkaXIgPyAoYmFzZWRpciArICcvJykgOiAnJykgKyByZXNvbHZlZC5fcGFydHMucGF0aDsKICAgICAgcmVzb2x2ZWQubm9ybWFsaXplUGF0aCgpOwogICAgfQoKICAgIHJlc29sdmVkLmJ1aWxkKCk7CiAgICByZXR1cm4gcmVzb2x2ZWQ7CiAgfTsKICBwLnJlbGF0aXZlVG8gPSBmdW5jdGlvbihiYXNlKSB7CiAgICB2YXIgcmVsYXRpdmUgPSB0aGlzLmNsb25lKCkubm9ybWFsaXplKCk7CiAgICB2YXIgcmVsYXRpdmVQYXJ0cywgYmFzZVBhcnRzLCBjb21tb24sIHJlbGF0aXZlUGF0aCwgYmFzZVBhdGg7CgogICAgaWYgKHJlbGF0aXZlLl9wYXJ0cy51cm4pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpOwogICAgfQoKICAgIGJhc2UgPSBuZXcgVVJJKGJhc2UpLm5vcm1hbGl6ZSgpOwogICAgcmVsYXRpdmVQYXJ0cyA9IHJlbGF0aXZlLl9wYXJ0czsKICAgIGJhc2VQYXJ0cyA9IGJhc2UuX3BhcnRzOwogICAgcmVsYXRpdmVQYXRoID0gcmVsYXRpdmUucGF0aCgpOwogICAgYmFzZVBhdGggPSBiYXNlLnBhdGgoKTsKCiAgICBpZiAocmVsYXRpdmVQYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignVVJJIGlzIGFscmVhZHkgcmVsYXRpdmUnKTsKICAgIH0KCiAgICBpZiAoYmFzZVBhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY2FsY3VsYXRlIGEgVVJJIHJlbGF0aXZlIHRvIGFub3RoZXIgcmVsYXRpdmUgVVJJJyk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGFydHMucHJvdG9jb2wgPT09IGJhc2VQYXJ0cy5wcm90b2NvbCkgewogICAgICByZWxhdGl2ZVBhcnRzLnByb3RvY29sID0gbnVsbDsKICAgIH0KCiAgICBpZiAocmVsYXRpdmVQYXJ0cy51c2VybmFtZSAhPT0gYmFzZVBhcnRzLnVzZXJuYW1lIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IGJhc2VQYXJ0cy5wYXNzd29yZCkgewogICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTsKICAgIH0KCiAgICBpZiAocmVsYXRpdmVQYXJ0cy5wcm90b2NvbCAhPT0gbnVsbCB8fCByZWxhdGl2ZVBhcnRzLnVzZXJuYW1lICE9PSBudWxsIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IG51bGwpIHsKICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGFydHMuaG9zdG5hbWUgPT09IGJhc2VQYXJ0cy5ob3N0bmFtZSAmJiByZWxhdGl2ZVBhcnRzLnBvcnQgPT09IGJhc2VQYXJ0cy5wb3J0KSB7CiAgICAgIHJlbGF0aXZlUGFydHMuaG9zdG5hbWUgPSBudWxsOwogICAgICByZWxhdGl2ZVBhcnRzLnBvcnQgPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7CiAgICB9CgogICAgaWYgKHJlbGF0aXZlUGF0aCA9PT0gYmFzZVBhdGgpIHsKICAgICAgcmVsYXRpdmVQYXJ0cy5wYXRoID0gJyc7CiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpOwogICAgfQoKICAgIC8vIGRldGVybWluZSBjb21tb24gc3ViIHBhdGgKICAgIGNvbW1vbiA9IFVSSS5jb21tb25QYXRoKHJlbGF0aXZlUGF0aCwgYmFzZVBhdGgpOwoKICAgIC8vIElmIHRoZSBwYXRocyBoYXZlIG5vdGhpbmcgaW4gY29tbW9uLCByZXR1cm4gYSByZWxhdGl2ZSBVUkwgd2l0aCB0aGUgYWJzb2x1dGUgcGF0aC4KICAgIGlmICghY29tbW9uKSB7CiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpOwogICAgfQoKICAgIHZhciBwYXJlbnRzID0gYmFzZVBhcnRzLnBhdGgKICAgICAgLnN1YnN0cmluZyhjb21tb24ubGVuZ3RoKQogICAgICAucmVwbGFjZSgvW15cL10qJC8sICcnKQogICAgICAucmVwbGFjZSgvLio/XC8vZywgJy4uLycpOwoKICAgIHJlbGF0aXZlUGFydHMucGF0aCA9IChwYXJlbnRzICsgcmVsYXRpdmVQYXJ0cy5wYXRoLnN1YnN0cmluZyhjb21tb24ubGVuZ3RoKSkgfHwgJy4vJzsKCiAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTsKICB9OwoKICAvLyBjb21wYXJpbmcgVVJJcwogIHAuZXF1YWxzID0gZnVuY3Rpb24odXJpKSB7CiAgICB2YXIgb25lID0gdGhpcy5jbG9uZSgpOwogICAgdmFyIHR3byA9IG5ldyBVUkkodXJpKTsKICAgIHZhciBvbmVfbWFwID0ge307CiAgICB2YXIgdHdvX21hcCA9IHt9OwogICAgdmFyIGNoZWNrZWQgPSB7fTsKICAgIHZhciBvbmVfcXVlcnksIHR3b19xdWVyeSwga2V5OwoKICAgIG9uZS5ub3JtYWxpemUoKTsKICAgIHR3by5ub3JtYWxpemUoKTsKCiAgICAvLyBleGFjdCBtYXRjaAogICAgaWYgKG9uZS50b1N0cmluZygpID09PSB0d28udG9TdHJpbmcoKSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBleHRyYWN0IHF1ZXJ5IHN0cmluZwogICAgb25lX3F1ZXJ5ID0gb25lLnF1ZXJ5KCk7CiAgICB0d29fcXVlcnkgPSB0d28ucXVlcnkoKTsKICAgIG9uZS5xdWVyeSgnJyk7CiAgICB0d28ucXVlcnkoJycpOwoKICAgIC8vIGRlZmluaXRlbHkgbm90IGVxdWFsIGlmIG5vdCBldmVuIG5vbi1xdWVyeSBwYXJ0cyBtYXRjaAogICAgaWYgKG9uZS50b1N0cmluZygpICE9PSB0d28udG9TdHJpbmcoKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gcXVlcnkgcGFyYW1ldGVycyBoYXZlIHRoZSBzYW1lIGxlbmd0aCwgZXZlbiBpZiB0aGV5J3JlIHBlcm11dGVkCiAgICBpZiAob25lX3F1ZXJ5Lmxlbmd0aCAhPT0gdHdvX3F1ZXJ5Lmxlbmd0aCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgb25lX21hcCA9IFVSSS5wYXJzZVF1ZXJ5KG9uZV9xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7CiAgICB0d29fbWFwID0gVVJJLnBhcnNlUXVlcnkodHdvX3F1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTsKCiAgICBmb3IgKGtleSBpbiBvbmVfbWFwKSB7CiAgICAgIGlmIChoYXNPd24uY2FsbChvbmVfbWFwLCBrZXkpKSB7CiAgICAgICAgaWYgKCFpc0FycmF5KG9uZV9tYXBba2V5XSkpIHsKICAgICAgICAgIGlmIChvbmVfbWFwW2tleV0gIT09IHR3b19tYXBba2V5XSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICghYXJyYXlzRXF1YWwob25lX21hcFtrZXldLCB0d29fbWFwW2tleV0pKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBjaGVja2VkW2tleV0gPSB0cnVlOwogICAgICB9CiAgICB9CgogICAgZm9yIChrZXkgaW4gdHdvX21hcCkgewogICAgICBpZiAoaGFzT3duLmNhbGwodHdvX21hcCwga2V5KSkgewogICAgICAgIGlmICghY2hlY2tlZFtrZXldKSB7CiAgICAgICAgICAvLyB0d28gY29udGFpbnMgYSBwYXJhbWV0ZXIgbm90IHByZXNlbnQgaW4gb25lCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLy8gc3RhdGUKICBwLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9IGZ1bmN0aW9uKHYpIHsKICAgIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9ICEhdjsKICAgIHJldHVybiB0aGlzOwogIH07CgogIHAuZXNjYXBlUXVlcnlTcGFjZSA9IGZ1bmN0aW9uKHYpIHsKICAgIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UgPSAhIXY7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICByZXR1cm4gVVJJOwp9KSk7Cgp9LHsiLi9JUHY2IjoyLCIuL1NlY29uZExldmVsRG9tYWlucyI6MywiLi9wdW55Y29kZSI6NX1dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7Ci8qISBodHRwczovL210aHMuYmUvcHVueWNvZGUgdjEuNC4wIGJ5IEBtYXRoaWFzICovCjsoZnVuY3Rpb24ocm9vdCkgewoKCS8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgKi8KCXZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiYKCQkhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzOwoJdmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJgoJCSFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlOwoJdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDsKCWlmICgKCQlmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fAoJCWZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8CgkJZnJlZUdsb2JhbC5zZWxmID09PSBmcmVlR2xvYmFsCgkpIHsKCQlyb290ID0gZnJlZUdsb2JhbDsKCX0KCgkvKioKCSAqIFRoZSBgcHVueWNvZGVgIG9iamVjdC4KCSAqIEBuYW1lIHB1bnljb2RlCgkgKiBAdHlwZSBPYmplY3QKCSAqLwoJdmFyIHB1bnljb2RlLAoKCS8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi8KCW1heEludCA9IDIxNDc0ODM2NDcsIC8vIGFrYS4gMHg3RkZGRkZGRiBvciAyXjMxLTEKCgkvKiogQm9vdHN0cmluZyBwYXJhbWV0ZXJzICovCgliYXNlID0gMzYsCgl0TWluID0gMSwKCXRNYXggPSAyNiwKCXNrZXcgPSAzOCwKCWRhbXAgPSA3MDAsCglpbml0aWFsQmlhcyA9IDcyLAoJaW5pdGlhbE4gPSAxMjgsIC8vIDB4ODAKCWRlbGltaXRlciA9ICctJywgLy8gJ1x4MkQnCgoJLyoqIFJlZ3VsYXIgZXhwcmVzc2lvbnMgKi8KCXJlZ2V4UHVueWNvZGUgPSAvXnhuLS0vLAoJcmVnZXhOb25BU0NJSSA9IC9bXlx4MjAtXHg3RV0vLCAvLyB1bnByaW50YWJsZSBBU0NJSSBjaGFycyArIG5vbi1BU0NJSSBjaGFycwoJcmVnZXhTZXBhcmF0b3JzID0gL1tceDJFXHUzMDAyXHVGRjBFXHVGRjYxXS9nLCAvLyBSRkMgMzQ5MCBzZXBhcmF0b3JzCgoJLyoqIEVycm9yIG1lc3NhZ2VzICovCgllcnJvcnMgPSB7CgkJJ292ZXJmbG93JzogJ092ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzJywKCQknbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLAoJCSdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnCgl9LAoKCS8qKiBDb252ZW5pZW5jZSBzaG9ydGN1dHMgKi8KCWJhc2VNaW51c1RNaW4gPSBiYXNlIC0gdE1pbiwKCWZsb29yID0gTWF0aC5mbG9vciwKCXN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUsCgoJLyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqLwoJa2V5OwoKCS8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKCS8qKgoJICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIGVycm9yIHR5cGUuCgkgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuCgkgKi8KCWZ1bmN0aW9uIGVycm9yKHR5cGUpIHsKCQl0aHJvdyBuZXcgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pOwoJfQoKCS8qKgoJICogQSBnZW5lcmljIGBBcnJheSNtYXBgIHV0aWxpdHkgZnVuY3Rpb24uCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci4KCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeSBhcnJheQoJICogaXRlbS4KCSAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi4KCSAqLwoJZnVuY3Rpb24gbWFwKGFycmF5LCBmbikgewoJCXZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7CgkJdmFyIHJlc3VsdCA9IFtdOwoJCXdoaWxlIChsZW5ndGgtLSkgewoJCQlyZXN1bHRbbGVuZ3RoXSA9IGZuKGFycmF5W2xlbmd0aF0pOwoJCX0KCQlyZXR1cm4gcmVzdWx0OwoJfQoKCS8qKgoJICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsCgkgKiBhZGRyZXNzZXMuCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy4KCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeQoJICogY2hhcmFjdGVyLgoJICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2sKCSAqIGZ1bmN0aW9uLgoJICovCglmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikgewoJCXZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpOwoJCXZhciByZXN1bHQgPSAnJzsKCQlpZiAocGFydHMubGVuZ3RoID4gMSkgewoJCQkvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlCgkJCS8vIHRoZSBsb2NhbCBwYXJ0IChpLmUuIGV2ZXJ5dGhpbmcgdXAgdG8gYEBgKSBpbnRhY3QuCgkJCXJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnOwoJCQlzdHJpbmcgPSBwYXJ0c1sxXTsKCQl9CgkJLy8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LgoJCXN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1x4MkUnKTsKCQl2YXIgbGFiZWxzID0gc3RyaW5nLnNwbGl0KCcuJyk7CgkJdmFyIGVuY29kZWQgPSBtYXAobGFiZWxzLCBmbikuam9pbignLicpOwoJCXJldHVybiByZXN1bHQgKyBlbmNvZGVkOwoJfQoKCS8qKgoJICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZQoJICogY2hhcmFjdGVyIGluIHRoZSBzdHJpbmcuIFdoaWxlIEphdmFTY3JpcHQgdXNlcyBVQ1MtMiBpbnRlcm5hbGx5LAoJICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2gKCSAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LAoJICogbWF0Y2hpbmcgVVRGLTE2LgoJICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgCgkgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyCgkgKiBAbmFtZSBkZWNvZGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuCgkgKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBuZXcgYXJyYXkgb2YgY29kZSBwb2ludHMuCgkgKi8KCWZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7CgkJdmFyIG91dHB1dCA9IFtdLAoJCSAgICBjb3VudGVyID0gMCwKCQkgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCwKCQkgICAgdmFsdWUsCgkJICAgIGV4dHJhOwoJCXdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7CgkJCXZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTsKCQkJaWYgKHZhbHVlID49IDB4RDgwMCAmJiB2YWx1ZSA8PSAweERCRkYgJiYgY291bnRlciA8IGxlbmd0aCkgewoJCQkJLy8gaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyCgkJCQlleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7CgkJCQlpZiAoKGV4dHJhICYgMHhGQzAwKSA9PSAweERDMDApIHsgLy8gbG93IHN1cnJvZ2F0ZQoJCQkJCW91dHB1dC5wdXNoKCgodmFsdWUgJiAweDNGRikgPDwgMTApICsgKGV4dHJhICYgMHgzRkYpICsgMHgxMDAwMCk7CgkJCQl9IGVsc2UgewoJCQkJCS8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0CgkJCQkJLy8gY29kZSB1bml0IGlzIHRoZSBoaWdoIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyCgkJCQkJb3V0cHV0LnB1c2godmFsdWUpOwoJCQkJCWNvdW50ZXItLTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCW91dHB1dC5wdXNoKHZhbHVlKTsKCQkJfQoJCX0KCQlyZXR1cm4gb3V0cHV0OwoJfQoKCS8qKgoJICogQ3JlYXRlcyBhIHN0cmluZyBiYXNlZCBvbiBhbiBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLgoJICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgCgkgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMgoJICogQG5hbWUgZW5jb2RlCgkgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLgoJICovCglmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7CgkJcmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJdmFyIG91dHB1dCA9ICcnOwoJCQlpZiAodmFsdWUgPiAweEZGRkYpIHsKCQkJCXZhbHVlIC09IDB4MTAwMDA7CgkJCQlvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTsKCQkJCXZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjsKCQkJfQoJCQlvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlKTsKCQkJcmV0dXJuIG91dHB1dDsKCQl9KS5qb2luKCcnKTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci4KCSAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS4KCSAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpbgoJICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpbiB0aGUgcmFuZ2UgYDBgIHRvIGBiYXNlIC0gMWAsIG9yIGBiYXNlYCBpZgoJICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuCgkgKi8KCWZ1bmN0aW9uIGJhc2ljVG9EaWdpdChjb2RlUG9pbnQpIHsKCQlpZiAoY29kZVBvaW50IC0gNDggPCAxMCkgewoJCQlyZXR1cm4gY29kZVBvaW50IC0gMjI7CgkJfQoJCWlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7CgkJCXJldHVybiBjb2RlUG9pbnQgLSA2NTsKCQl9CgkJaWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHsKCQkJcmV0dXJuIGNvZGVQb2ludCAtIDk3OwoJCX0KCQlyZXR1cm4gYmFzZTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC4KCSAqIEBzZWUgYGJhc2ljVG9EaWdpdCgpYAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuCgkgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYmFzaWMgY29kZSBwb2ludCB3aG9zZSB2YWx1ZSAod2hlbiB1c2VkIGZvcgoJICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpcyBgZGlnaXRgLCB3aGljaCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2UKCSAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpcwoJICogdXNlZDsgZWxzZSwgdGhlIGxvd2VyY2FzZSBmb3JtIGlzIHVzZWQuIFRoZSBiZWhhdmlvciBpcyB1bmRlZmluZWQKCSAqIGlmIGBmbGFnYCBpcyBub24temVybyBhbmQgYGRpZ2l0YCBoYXMgbm8gdXBwZXJjYXNlIGZvcm0uCgkgKi8KCWZ1bmN0aW9uIGRpZ2l0VG9CYXNpYyhkaWdpdCwgZmxhZykgewoJCS8vICAwLi4yNSBtYXAgdG8gQVNDSUkgYS4ueiBvciBBLi5aCgkJLy8gMjYuLjM1IG1hcCB0byBBU0NJSSAwLi45CgkJcmV0dXJuIGRpZ2l0ICsgMjIgKyA3NSAqIChkaWdpdCA8IDI2KSAtICgoZmxhZyAhPSAwKSA8PCA1KTsKCX0KCgkvKioKCSAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuCgkgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzQ5MiNzZWN0aW9uLTMuNAoJICogQHByaXZhdGUKCSAqLwoJZnVuY3Rpb24gYWRhcHQoZGVsdGEsIG51bVBvaW50cywgZmlyc3RUaW1lKSB7CgkJdmFyIGsgPSAwOwoJCWRlbHRhID0gZmlyc3RUaW1lID8gZmxvb3IoZGVsdGEgLyBkYW1wKSA6IGRlbHRhID4+IDE7CgkJZGVsdGEgKz0gZmxvb3IoZGVsdGEgLyBudW1Qb2ludHMpOwoJCWZvciAoLyogbm8gaW5pdGlhbGl6YXRpb24gKi87IGRlbHRhID4gYmFzZU1pbnVzVE1pbiAqIHRNYXggPj4gMTsgayArPSBiYXNlKSB7CgkJCWRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTsKCQl9CgkJcmV0dXJuIGZsb29yKGsgKyAoYmFzZU1pbnVzVE1pbiArIDEpICogZGVsdGEgLyAoZGVsdGEgKyBza2V3KSk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZQoJICogc3ltYm9scy4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLgoJICovCglmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHsKCQkvLyBEb24ndCB1c2UgVUNTLTIKCQl2YXIgb3V0cHV0ID0gW10sCgkJICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLAoJCSAgICBvdXQsCgkJICAgIGkgPSAwLAoJCSAgICBuID0gaW5pdGlhbE4sCgkJICAgIGJpYXMgPSBpbml0aWFsQmlhcywKCQkgICAgYmFzaWMsCgkJICAgIGosCgkJICAgIGluZGV4LAoJCSAgICBvbGRpLAoJCSAgICB3LAoJCSAgICBrLAoJCSAgICBkaWdpdCwKCQkgICAgdCwKCQkgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovCgkJICAgIGJhc2VNaW51c1Q7CgoJCS8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHM6IGxldCBgYmFzaWNgIGJlIHRoZSBudW1iZXIgb2YgaW5wdXQgY29kZQoJCS8vIHBvaW50cyBiZWZvcmUgdGhlIGxhc3QgZGVsaW1pdGVyLCBvciBgMGAgaWYgdGhlcmUgaXMgbm9uZSwgdGhlbiBjb3B5CgkJLy8gdGhlIGZpcnN0IGJhc2ljIGNvZGUgcG9pbnRzIHRvIHRoZSBvdXRwdXQuCgoJCWJhc2ljID0gaW5wdXQubGFzdEluZGV4T2YoZGVsaW1pdGVyKTsKCQlpZiAoYmFzaWMgPCAwKSB7CgkJCWJhc2ljID0gMDsKCQl9CgoJCWZvciAoaiA9IDA7IGogPCBiYXNpYzsgKytqKSB7CgkJCS8vIGlmIGl0J3Mgbm90IGEgYmFzaWMgY29kZSBwb2ludAoJCQlpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7CgkJCQllcnJvcignbm90LWJhc2ljJyk7CgkJCX0KCQkJb3V0cHV0LnB1c2goaW5wdXQuY2hhckNvZGVBdChqKSk7CgkJfQoKCQkvLyBNYWluIGRlY29kaW5nIGxvb3A6IHN0YXJ0IGp1c3QgYWZ0ZXIgdGhlIGxhc3QgZGVsaW1pdGVyIGlmIGFueSBiYXNpYyBjb2RlCgkJLy8gcG9pbnRzIHdlcmUgY29waWVkOyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nIG90aGVyd2lzZS4KCgkJZm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHsKCgkJCS8vIGBpbmRleGAgaXMgdGhlIGluZGV4IG9mIHRoZSBuZXh0IGNoYXJhY3RlciB0byBiZSBjb25zdW1lZC4KCQkJLy8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLAoJCQkvLyB3aGljaCBnZXRzIGFkZGVkIHRvIGBpYC4gVGhlIG92ZXJmbG93IGNoZWNraW5nIGlzIGVhc2llcgoJCQkvLyBpZiB3ZSBpbmNyZWFzZSBgaWAgYXMgd2UgZ28sIHRoZW4gc3VidHJhY3Qgb2ZmIGl0cyBzdGFydGluZwoJCQkvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLgoJCQlmb3IgKG9sZGkgPSBpLCB3ID0gMSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7CgoJCQkJaWYgKGluZGV4ID49IGlucHV0TGVuZ3RoKSB7CgkJCQkJZXJyb3IoJ2ludmFsaWQtaW5wdXQnKTsKCQkJCX0KCgkJCQlkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTsKCgkJCQlpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7CgkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQl9CgoJCQkJaSArPSBkaWdpdCAqIHc7CgkJCQl0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTsKCgkJCQlpZiAoZGlnaXQgPCB0KSB7CgkJCQkJYnJlYWs7CgkJCQl9CgoJCQkJYmFzZU1pbnVzVCA9IGJhc2UgLSB0OwoJCQkJaWYgKHcgPiBmbG9vcihtYXhJbnQgLyBiYXNlTWludXNUKSkgewoJCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQkJfQoKCQkJCXcgKj0gYmFzZU1pbnVzVDsKCgkJCX0KCgkJCW91dCA9IG91dHB1dC5sZW5ndGggKyAxOwoJCQliaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTsKCgkJCS8vIGBpYCB3YXMgc3VwcG9zZWQgdG8gd3JhcCBhcm91bmQgZnJvbSBgb3V0YCB0byBgMGAsCgkJCS8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6CgkJCWlmIChmbG9vcihpIC8gb3V0KSA+IG1heEludCAtIG4pIHsKCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQl9CgoJCQluICs9IGZsb29yKGkgLyBvdXQpOwoJCQlpICU9IG91dDsKCgkJCS8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXQKCQkJb3V0cHV0LnNwbGljZShpKyssIDAsIG4pOwoKCQl9CgoJCXJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMgKGUuZy4gYSBkb21haW4gbmFtZSBsYWJlbCkgdG8gYQoJICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLgoJICovCglmdW5jdGlvbiBlbmNvZGUoaW5wdXQpIHsKCQl2YXIgbiwKCQkgICAgZGVsdGEsCgkJICAgIGhhbmRsZWRDUENvdW50LAoJCSAgICBiYXNpY0xlbmd0aCwKCQkgICAgYmlhcywKCQkgICAgaiwKCQkgICAgbSwKCQkgICAgcSwKCQkgICAgaywKCQkgICAgdCwKCQkgICAgY3VycmVudFZhbHVlLAoJCSAgICBvdXRwdXQgPSBbXSwKCQkgICAgLyoqIGBpbnB1dExlbmd0aGAgd2lsbCBob2xkIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgaW4gYGlucHV0YC4gKi8KCQkgICAgaW5wdXRMZW5ndGgsCgkJICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqLwoJCSAgICBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsCgkJICAgIGJhc2VNaW51c1QsCgkJICAgIHFNaW51c1Q7CgoJCS8vIENvbnZlcnQgdGhlIGlucHV0IGluIFVDUy0yIHRvIFVuaWNvZGUKCQlpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpOwoKCQkvLyBDYWNoZSB0aGUgbGVuZ3RoCgkJaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7CgoJCS8vIEluaXRpYWxpemUgdGhlIHN0YXRlCgkJbiA9IGluaXRpYWxOOwoJCWRlbHRhID0gMDsKCQliaWFzID0gaW5pdGlhbEJpYXM7CgoJCS8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHMKCQlmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikgewoJCQljdXJyZW50VmFsdWUgPSBpbnB1dFtqXTsKCQkJaWYgKGN1cnJlbnRWYWx1ZSA8IDB4ODApIHsKCQkJCW91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTsKCQkJfQoJCX0KCgkJaGFuZGxlZENQQ291bnQgPSBiYXNpY0xlbmd0aCA9IG91dHB1dC5sZW5ndGg7CgoJCS8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkOwoJCS8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy4KCgkJLy8gRmluaXNoIHRoZSBiYXNpYyBzdHJpbmcgLSBpZiBpdCBpcyBub3QgZW1wdHkgLSB3aXRoIGEgZGVsaW1pdGVyCgkJaWYgKGJhc2ljTGVuZ3RoKSB7CgkJCW91dHB1dC5wdXNoKGRlbGltaXRlcik7CgkJfQoKCQkvLyBNYWluIGVuY29kaW5nIGxvb3A6CgkJd2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHsKCgkJCS8vIEFsbCBub24tYmFzaWMgY29kZSBwb2ludHMgPCBuIGhhdmUgYmVlbiBoYW5kbGVkIGFscmVhZHkuIEZpbmQgdGhlIG5leHQKCQkJLy8gbGFyZ2VyIG9uZToKCQkJZm9yIChtID0gbWF4SW50LCBqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHsKCQkJCWN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdOwoJCQkJaWYgKGN1cnJlbnRWYWx1ZSA+PSBuICYmIGN1cnJlbnRWYWx1ZSA8IG0pIHsKCQkJCQltID0gY3VycmVudFZhbHVlOwoJCQkJfQoJCQl9CgoJCQkvLyBJbmNyZWFzZSBgZGVsdGFgIGVub3VnaCB0byBhZHZhbmNlIHRoZSBkZWNvZGVyJ3MgPG4saT4gc3RhdGUgdG8gPG0sMD4sCgkJCS8vIGJ1dCBndWFyZCBhZ2FpbnN0IG92ZXJmbG93CgkJCWhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTsKCQkJaWYgKG0gLSBuID4gZmxvb3IoKG1heEludCAtIGRlbHRhKSAvIGhhbmRsZWRDUENvdW50UGx1c09uZSkpIHsKCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQl9CgoJCQlkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lOwoJCQluID0gbTsKCgkJCWZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7CgkJCQljdXJyZW50VmFsdWUgPSBpbnB1dFtqXTsKCgkJCQlpZiAoY3VycmVudFZhbHVlIDwgbiAmJiArK2RlbHRhID4gbWF4SW50KSB7CgkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQl9CgoJCQkJaWYgKGN1cnJlbnRWYWx1ZSA9PSBuKSB7CgkJCQkJLy8gUmVwcmVzZW50IGRlbHRhIGFzIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIKCQkJCQlmb3IgKHEgPSBkZWx0YSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7CgkJCQkJCXQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpOwoJCQkJCQlpZiAocSA8IHQpIHsKCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJCXFNaW51c1QgPSBxIC0gdDsKCQkJCQkJYmFzZU1pbnVzVCA9IGJhc2UgLSB0OwoJCQkJCQlvdXRwdXQucHVzaCgKCQkJCQkJCXN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNULCAwKSkKCQkJCQkJKTsKCQkJCQkJcSA9IGZsb29yKHFNaW51c1QgLyBiYXNlTWludXNUKTsKCQkJCQl9CgoJCQkJCW91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSwgMCkpKTsKCQkJCQliaWFzID0gYWRhcHQoZGVsdGEsIGhhbmRsZWRDUENvdW50UGx1c09uZSwgaGFuZGxlZENQQ291bnQgPT0gYmFzaWNMZW5ndGgpOwoJCQkJCWRlbHRhID0gMDsKCQkJCQkrK2hhbmRsZWRDUENvdW50OwoJCQkJfQoJCQl9CgoJCQkrK2RlbHRhOwoJCQkrK247CgoJCX0KCQlyZXR1cm4gb3V0cHV0LmpvaW4oJycpOwoJfQoKCS8qKgoJICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzcwoJICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLgoJICogaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgb24gYSBzdHJpbmcgdGhhdCBoYXMgYWxyZWFkeSBiZWVuCgkgKiBjb252ZXJ0ZWQgdG8gVW5pY29kZS4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZWQgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0bwoJICogY29udmVydCB0byBVbmljb2RlLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlCgkgKiBzdHJpbmcuCgkgKi8KCWZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkgewoJCXJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykgewoJCQlyZXR1cm4gcmVnZXhQdW55Y29kZS50ZXN0KHN0cmluZykKCQkJCT8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKQoJCQkJOiBzdHJpbmc7CgkJfSk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG8KCSAqIFB1bnljb2RlLiBPbmx5IHRoZSBub24tQVNDSUkgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHdpbGwgYmUgY29udmVydGVkLAoJICogaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQncyBhbHJlYWR5IGluCgkgKiBBU0NJSS4KCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvIGNvbnZlcnQsIGFzIGEKCSAqIFVuaWNvZGUgc3RyaW5nLgoJICogQHJldHVybnMge1N0cmluZ30gVGhlIFB1bnljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBkb21haW4gbmFtZSBvcgoJICogZW1haWwgYWRkcmVzcy4KCSAqLwoJZnVuY3Rpb24gdG9BU0NJSShpbnB1dCkgewoJCXJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykgewoJCQlyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZykKCQkJCT8gJ3huLS0nICsgZW5jb2RlKHN0cmluZykKCQkJCTogc3RyaW5nOwoJCX0pOwoJfQoKCS8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKCS8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi8KCXB1bnljb2RlID0gewoJCS8qKgoJCSAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBQdW55Y29kZS5qcyB2ZXJzaW9uIG51bWJlci4KCQkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCQkgKiBAdHlwZSBTdHJpbmcKCQkgKi8KCQkndmVyc2lvbic6ICcxLjMuMicsCgkJLyoqCgkJICogQW4gb2JqZWN0IG9mIG1ldGhvZHMgdG8gY29udmVydCBmcm9tIEphdmFTY3JpcHQncyBpbnRlcm5hbCBjaGFyYWN0ZXIKCQkgKiByZXByZXNlbnRhdGlvbiAoVUNTLTIpIHRvIFVuaWNvZGUgY29kZSBwb2ludHMsIGFuZCBiYWNrLgoJCSAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPgoJCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJCSAqIEB0eXBlIE9iamVjdAoJCSAqLwoJCSd1Y3MyJzogewoJCQknZGVjb2RlJzogdWNzMmRlY29kZSwKCQkJJ2VuY29kZSc6IHVjczJlbmNvZGUKCQl9LAoJCSdkZWNvZGUnOiBkZWNvZGUsCgkJJ2VuY29kZSc6IGVuY29kZSwKCQkndG9BU0NJSSc6IHRvQVNDSUksCgkJJ3RvVW5pY29kZSc6IHRvVW5pY29kZQoJfTsKCgkvKiogRXhwb3NlIGBwdW55Y29kZWAgKi8KCS8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMsIGxpa2Ugci5qcywgY2hlY2sgZm9yIHNwZWNpZmljIGNvbmRpdGlvbiBwYXR0ZXJucwoJLy8gbGlrZSB0aGUgZm9sbG93aW5nOgoJaWYgKAoJCXR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJgoJCXR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmCgkJZGVmaW5lLmFtZAoJKSB7CgkJZGVmaW5lKCdwdW55Y29kZScsIGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gcHVueWNvZGU7CgkJfSk7Cgl9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHsKCQlpZiAobW9kdWxlLmV4cG9ydHMgPT0gZnJlZUV4cG9ydHMpIHsKCQkJLy8gaW4gTm9kZS5qcywgaW8uanMsIG9yIFJpbmdvSlMgdjAuOC4wKwoJCQlmcmVlTW9kdWxlLmV4cG9ydHMgPSBwdW55Y29kZTsKCQl9IGVsc2UgewoJCQkvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLQoJCQlmb3IgKGtleSBpbiBwdW55Y29kZSkgewoJCQkJcHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pOwoJCQl9CgkJfQoJfSBlbHNlIHsKCQkvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyCgkJcm9vdC5wdW55Y29kZSA9IHB1bnljb2RlOwoJfQoKfSh0aGlzKSk7Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfdXJpanMgPSByZXF1aXJlKCd1cmlqcycpOwoKdmFyIF91cmlqczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91cmlqcyk7Cgp2YXIgX1N5bmNoZXIgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXInKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgTm90aWZpY2F0aW9uT2JzZXJ2ZXIgPSB7CiAgICBvbk5vdGlmaWNhdGlvbjogZnVuY3Rpb24gb25Ob3RpZmljYXRpb24oY2FsbGJhY2spIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB0aGlzLnN5bmNoZXIub25Ob3RpZmljYXRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGlmIChldmVudC5zY2hlbWEgPT09IF90aGlzLm9iamVjdERlc2NVUkwpIHsKICAgICAgICAgICAgICAgIF90aGlzLnN5bmNoZXIuc3Vic2NyaWJlKF90aGlzLm9iamVjdERlc2NVUkwsIGV2ZW50LnVybCkudGhlbihmdW5jdGlvbiAoZGF0YU9iamVjdCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdub3RpZmljYXRpb24gcmVjZWl2ZWQnLCBkYXRhT2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICBkYXRhT2JqZWN0Lm9uQWRkQ2hpbGQoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtZXNzYWdlIHJlY2VpdmVkJywgY2hpbGQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gY2hpbGQuZGF0YSA/IGNoaWxkLmRhdGEgOiBjaGlsZC52YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmaWNhdGlvbnMucHVzaChjaGlsZERhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhfdGhpcy5ub3RpZmljYXRpb25zW190aGlzLm5vdGlmaWNhdGlvbnMubGVuZ3RoIC0gMV0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KfTsKCnZhciBOb3RpZmljYXRpb25PYnNlcnZlckZhY3RvcnkgPSBmdW5jdGlvbiBOb3RpZmljYXRpb25PYnNlcnZlckZhY3RvcnkoaHlwZXJ0eVVSTCwgYnVzLCBjb25maWcpIHsKICAgIHZhciB1cmkgPSBuZXcgX3VyaWpzMi5kZWZhdWx0KGh5cGVydHlVUkwpOwogICAgdmFyIHN5bmNoZXIgPSBuZXcgX1N5bmNoZXIuU3luY2hlcihoeXBlcnR5VVJMLCBidXMsIGNvbmZpZyk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE5vdGlmaWNhdGlvbk9ic2VydmVyKSwgewogICAgICAgICdzeW5jaGVyJzogc3luY2hlciwKICAgICAgICAnb2JqZWN0RGVzY1VSTCc6ICdoeXBlcnR5LWNhdGFsb2d1ZTovLycgKyB1cmkuaG9zdG5hbWUoKSArICcvLndlbGwta25vd24vZGF0YXNjaGVtYXMvQ29tbXVuaWNhdGlvbicsCiAgICAgICAgJ2h5cGVydHlVUkwnOiBoeXBlcnR5VVJMLAogICAgICAgIG5vdGlmaWNhdGlvbnM6IFtdCiAgICB9KTsKfTsKCmZ1bmN0aW9uIGFjdGl2YXRlKGh5cGVydHlVUkwsIGJ1cywgY29uZmlnKSB7CiAgICByZXR1cm4gewogICAgICAgIG5hbWU6ICdOb3RpZmljYXRpb25PYnNlcnZlcicsCiAgICAgICAgaW5zdGFuY2U6IE5vdGlmaWNhdGlvbk9ic2VydmVyRmFjdG9yeShoeXBlcnR5VVJMLCBidXMsIGNvbmZpZykKICAgIH07Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsic2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyIjoxLCJ1cmlqcyI6NH1dfSx7fSxbNl0pKDYpCn0pOw==",
      "sourceCodeClassname": "NotificationObserver",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10011,
    "version": "0.1",
    "description": "Description of NotificationObserver",
    "objectName": "NotificationObserver",
    "configuration": {},
    "hypertyType": [],
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}