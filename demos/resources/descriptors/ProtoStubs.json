{
  "default": {
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of VertxProtoStub",
    "objectName": "VertxProtoStub",
    "sourcePackageURL": "/sourcePackage",
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9Cgp2YXIgVmVydHhQcm90b1N0dWIgPSAoZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9jb250aW51b3VzT3BlbjogYm9vbGVhbgogICAgIF9ydW50aW1lUHJvdG9TdHViVVJMOiBzdHJpbmcKICAgIF9idXM6IE1pbmlCdXMKICAgIF9tc2dDYWxsYmFjazogKE1lc3NhZ2UpID0+IHZvaWQKICAgIF9jb25maWc6IHsgdXJsLCBydW50aW1lVVJMIH0KICAgICBfc29jazogKFdlYlNvY2tldCB8IFNvY2tKUykKICAgIF9yZU9wZW46IGJvb2xlYW4KICAqLwoKICAvKioKICAgKiBWZXJ0eCBQcm90b1N0dWIgY3JlYXRpb24KICAgKiBAcGFyYW0gIHtzdHJpbmd9IHJ1bnRpbWVQcm90b1N0dWJVUkwgLSBVUkwgdXNlZCBpbnRlcm5hbGx5IGZvciBtZXNzYWdlIGRlbGl2ZXJ5IHBvaW50LiBOb3QgdXNlZCBmb3IgTWVzc2FnZU5vZGUgZGVsaXZlci4KICAgKiBAcGFyYW0gIHtNaW5pQnVzfSBidXMgLSBNaW5pQnVzIHVzZWQgdG8gc2VuZC9yZWNlaXZlIG1lc3NhZ2VzLiBOb3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIE1lc3NhZ2VCdXMuCiAgICogQHBhcmFtICB7T2JqZWN0fSBjb25maWcgLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKiBAcmV0dXJuIHtWZXJ0eFByb3RvU3R1Yn0KICAgKi8KCiAgZnVuY3Rpb24gVmVydHhQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZXJ0eFByb3RvU3R1Yik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLl9pZCA9IDA7CiAgICB0aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CgogICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICB0aGlzLl9idXMgPSBidXM7CiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7CgogICAgdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBjb25maWcucnVudGltZVVSTDsKICAgIHRoaXMuX3JlT3BlbiA9IGZhbHNlOwoKICAgIGJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgX3RoaXMuX29wZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpcy5fZmlsdGVyKG1zZykpIHsKICAgICAgICAgIF90aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBjb25maWd1cmF0aW9uIGZvciB0aGlzIFByb3RvU3R1YgogICAqIEByZXR1cm4ge09iamVjdH0gLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKi8KCiAgX2NyZWF0ZUNsYXNzKFZlcnR4UHJvdG9TdHViLCBbewogICAga2V5OiAnY29ubmVjdCcsCgogICAgLyoqCiAgICAgKiBUcnkgdG8gb3BlbiB0aGUgY29ubmVjdGlvbiB0byB0aGUgTWVzc2FnZU5vZGUuIENvbm5lY3Rpb24gaXMgYXV0byBtYW5hZ2VkLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgdGhpcyBleHBsaWNpdGx5LgogICAgICogSG93ZXZlciwgaWYgImRpc2Nvbm5lY3QoKSIgaXMgY2FsbGVkLCBpdCdzIG5lY2Vzc2FyeSB0byBjYWxsIHRoaXMgdG8gZW5hYmxlIGNvbm5lY3Rpb25zIGFnYWluLgogICAgICogQSBzdGF0dXMgbWVzc2FnZSBpcyBzZW50IHRvICJydW50aW1lUHJvdG9TdHViVVJML3N0YXR1cyIsIGNvbnRhaW5pbmcgdGhlIHZhbHVlICJjb25uZWN0ZWQiIGlmIHN1Y2Nlc3NmdWwsIG9yICJkaXNjb25uZWN0ZWQiIGlmIHNvbWUgZXJyb3Igb2NjdXJzLgogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CiAgICAgIF90aGlzLl9vcGVuKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEl0IHdpbGwgZGlzY29ubmVjdCBhbmQgb3JkZXIgdG8gc3RheSBkaXNjb25uZWN0ZWQuIFJlY29ubmVjdGlvbiB0cmllcywgd2lsbCBub3QgYmUgYXR0ZW1wdGVkLCB1bmxlc3MgImNvbm5lY3QoKSIgaXMgY2FsbGVkLgogICAgICogQSBzdGF0dXMgbWVzc2FnZSBpcyBzZW50IHRvICJydW50aW1lUHJvdG9TdHViVVJML3N0YXR1cyIgd2l0aCB2YWx1ZSAiZGlzY29ubmVjdGVkIi4KICAgICAqLwogIH0sIHsKICAgIGtleTogJ2Rpc2Nvbm5lY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY29udGludW91c09wZW4gPSBmYWxzZTsKICAgICAgaWYgKF90aGlzLl9zb2NrKSB7CiAgICAgICAgX3RoaXMuX3NlbmRDbG9zZSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRPcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZE9wZW4oY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9pZCsrOwogICAgICB2YXIgbXNnID0gewogICAgICAgIGlkOiBfdGhpcy5faWQsIHR5cGU6ICdvcGVuJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9yZU9wZW4pIHsKICAgICAgICBtc2cudHlwZSA9ICdyZS1vcGVuJzsKICAgICAgfQoKICAgICAgLy9yZWdpc3RlciBhbmQgd2FpdCBmb3Igb3BlbiByZXBseS4uLgogICAgICB2YXIgaGFzUmVzcG9uc2UgPSBmYWxzZTsKICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayA9IGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGlmIChyZXBseS50eXBlID09PSAncmVzcG9uc2UnICYgcmVwbHkuaWQgPT09IG1zZy5pZCkgewogICAgICAgICAgaGFzUmVzcG9uc2UgPSB0cnVlOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIGlmIChyZXBseS5ib2R5LnJ1bnRpbWVUb2tlbikgewogICAgICAgICAgICAgIC8vc2V0dXAgcnVudGltZVNlc3Npb24KICAgICAgICAgICAgICBfdGhpcy5fcmVPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLnJ1bnRpbWVVUkwgKyAnLycgKyByZXBseS5ib2R5LnJ1bnRpbWVUb2tlbjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Nvbm5lY3RlZCcpOwogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCFoYXNSZXNwb25zZSkgewogICAgICAgICAgLy9ubyByZXNwb25zZSBhZnRlciB4IHNlY29uZHMuLi4KICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdkaXNjb25uZWN0ZWQnLCAnVGltZW91dCBmcm9tIG1uOi9zZXNzaW9uJyk7CiAgICAgICAgfQogICAgICB9LCAzMDAwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZENsb3NlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZENsb3NlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2lkKys7CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgaWQ6IF90aGlzLl9pZCwgdHlwZTogJ2Nsb3NlJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICB9OwoKICAgICAgLy9pbnZhbGlkYXRlIHJ1bnRpbWVTZXNzaW9uCiAgICAgIF90aGlzLl9yZU9wZW4gPSBmYWxzZTsKICAgICAgX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMID0gX3RoaXMuX2NvbmZpZy5fcnVudGltZVVSTDsKCiAgICAgIF90aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRTdGF0dXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ3VwZGF0ZScsCiAgICAgICAgZnJvbTogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgdG86IF90aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLAogICAgICAgIGJvZHk6IHsKICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChyZWFzb24pIHsKICAgICAgICBtc2cuYm9keS5kZXNjID0gcmVhc29uOwogICAgICB9CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3dhaXRSZWFkeScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3dhaXRSZWFkeShjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLl9zb2NrLnJlYWR5U3RhdGUgPT09IDEpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuX3dhaXRSZWFkeShjYWxsYmFjayk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZmlsdGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlsdGVyKG1zZykgewogICAgICBpZiAobXNnLmJvZHkgJiYgbXNnLmJvZHkudmlhID09PSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogJ19kZWxpdmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsaXZlcihtc2cpIHsKICAgICAgaWYgKCFtc2cuYm9keSkgbXNnLmJvZHkgPSB7fTsKCiAgICAgIG1zZy5ib2R5LnZpYSA9IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkw7CiAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLl9jb250aW51b3VzT3BlbikgewogICAgICAgIC8vVE9ETzogc2VuZCBzdGF0dXMgKHNlbnQgbWVzc2FnZSBlcnJvciAtIGRpc2Nvbm5lY3RlZCkKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghX3RoaXMuX3NvY2spIHsKICAgICAgICBpZiAoX3RoaXMuX2NvbmZpZy51cmwuc3Vic3RyaW5nKDAsIDIpID09PSAnd3MnKSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBXZWJTb2NrZXQoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBTb2NrSlMoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuX3NvY2sub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuX3NlbmRPcGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShlLmRhdGEpOwogICAgICAgICAgaWYgKG1zZy5mcm9tID09PSAnbW46L3Nlc3Npb24nKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5fZGVsaXZlcihtc2cpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9uY2xvc2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHZhciByZWFzb24gPSB1bmRlZmluZWQ7CgogICAgICAgICAgLy9TZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY0NTUjc2VjdGlvbi03LjQKICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSAxMDAwKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdOb3JtYWwgY2xvc3VyZSwgbWVhbmluZyB0aGF0IHRoZSBwdXJwb3NlIGZvciB3aGljaCB0aGUgY29ubmVjdGlvbiB3YXMgZXN0YWJsaXNoZWQgaGFzIGJlZW4gZnVsZmlsbGVkLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDEpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIFwnZ29pbmcgYXdheVwnLCBzdWNoIGFzIGEgc2VydmVyIGdvaW5nIGRvd24gb3IgYSBicm93c2VyIGhhdmluZyBuYXZpZ2F0ZWQgYXdheSBmcm9tIGEgcGFnZS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAyKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBkdWUgdG8gYSBwcm90b2NvbCBlcnJvcic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDMpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgdHlwZSBvZiBkYXRhIGl0IGNhbm5vdCBhY2NlcHQgKGUuZy4sIGFuIGVuZHBvaW50IHRoYXQgdW5kZXJzdGFuZHMgb25seSB0ZXh0IGRhdGEgTUFZIHNlbmQgdGhpcyBpZiBpdCByZWNlaXZlcyBhIGJpbmFyeSBtZXNzYWdlKS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA0KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdSZXNlcnZlZC4gVGhlIHNwZWNpZmljIG1lYW5pbmcgbWlnaHQgYmUgZGVmaW5lZCBpbiB0aGUgZnV0dXJlLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDUpIHsKICAgICAgICAgICAgcmVhc29uID0gJ05vIHN0YXR1cyBjb2RlIHdhcyBhY3R1YWxseSBwcmVzZW50Lic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDYpIHsKICAgICAgICAgICAgcmVhc29uID0gJ1RoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgYWJub3JtYWxseSwgZS5nLiwgd2l0aG91dCBzZW5kaW5nIG9yIHJlY2VpdmluZyBhIENsb3NlIGNvbnRyb2wgZnJhbWUnOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA3KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBkYXRhIHdpdGhpbiBhIG1lc3NhZ2UgdGhhdCB3YXMgbm90IGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBvZiB0aGUgbWVzc2FnZSAoZS5nLiwgbm9uLVVURi04IFtodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNjI5XSBkYXRhIHdpdGhpbiBhIHRleHQgbWVzc2FnZSkuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwOCkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgInZpb2xhdGVzIGl0cyBwb2xpY3kiLiBUaGlzIHJlYXNvbiBpcyBnaXZlbiBlaXRoZXIgaWYgdGhlcmUgaXMgbm8gb3RoZXIgc3V0aWJsZSByZWFzb24sIG9yIGlmIHRoZXJlIGlzIGEgbmVlZCB0byBoaWRlIHNwZWNpZmljIGRldGFpbHMgYWJvdXQgdGhlIHBvbGljeS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA5KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBhIG1lc3NhZ2UgdGhhdCBpcyB0b28gYmlnIGZvciBpdCB0byBwcm9jZXNzLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTApIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IChjbGllbnQpIGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIGV4cGVjdGVkIHRoZSBzZXJ2ZXIgdG8gbmVnb3RpYXRlIG9uZSBvciBtb3JlIGV4dGVuc2lvbiwgYnV0IHRoZSBzZXJ2ZXIgZGlkblwndCByZXR1cm4gdGhlbSBpbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSBvZiB0aGUgV2ViU29ja2V0IGhhbmRzaGFrZS4gPGJyIC8+IFNwZWNpZmljYWxseSwgdGhlIGV4dGVuc2lvbnMgdGhhdCBhcmUgbmVlZGVkIGFyZTogJyArIGV2ZW50LnJlYXNvbjsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxMSkgewogICAgICAgICAgICByZWFzb24gPSAnQSBzZXJ2ZXIgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBlbmNvdW50ZXJlZCBhbiB1bmV4cGVjdGVkIGNvbmRpdGlvbiB0aGF0IHByZXZlbnRlZCBpdCBmcm9tIGZ1bGZpbGxpbmcgdGhlIHJlcXVlc3QuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxNSkgewogICAgICAgICAgICByZWFzb24gPSAnVGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBkdWUgdG8gYSBmYWlsdXJlIHRvIHBlcmZvcm0gYSBUTFMgaGFuZHNoYWtlIChlLmcuLCB0aGUgc2VydmVyIGNlcnRpZmljYXRlIGNhblwndCBiZSB2ZXJpZmllZCkuJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdVbmtub3duIHJlYXNvbic7CiAgICAgICAgICB9CgogICAgICAgICAgZGVsZXRlIF90aGlzLl9zb2NrOwogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIHJlYXNvbik7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ2NvbmZpZycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdydW50aW1lU2Vzc2lvbicsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFZlcnR4UHJvdG9TdHViOwp9KSgpOwoKZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogIHJldHVybiB7CiAgICBuYW1lOiAnVmVydHhQcm90b1N0dWInLAogICAgaW5zdGFuY2U6IG5ldyBWZXJ0eFByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KCi8qKgoqIENhbGxiYWNrIHVzZWQgdG8gc2VuZCBtZXNzYWdlcwoqIEBjYWxsYmFjayBQb3N0TWVzc2FnZQoqIEBwYXJhbSB7TWVzc2FnZX0gbXNnIC0gTWVzc2FnZSB0byBzZW5kCiovCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV19LHt9LFsxXSkoMSkKfSk7",
      "sourceCodeClassname": "VertxProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "configuration": {
      "url": "wss://msg-node.localhost:9090/ws"
    },
    "constraints": "",
    "hypertyCapabilities": "",
    "protocolCapabilities": "",
    "policies": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "mtproxy.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gU291cmNlIGh0dHBzOi8vbWFydGludGhvbXNvbi5naXRodWIuaW8vLndlbGwta25vd24vaWRwLXByb3h5L2lkcC5qcwoKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9CgpmdW5jdGlvbiBEQigpIHsKICB0aGlzLnN0b3JlXyA9IHt9Owp9CkRCLnByb3RvdHlwZSA9IHsKICBwdXQ6IGZ1bmN0aW9uIHB1dChrLCB2KSB7CiAgICB0aGlzLnN0b3JlX1trXSA9IHY7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgfSwKICBnZXQ6IGZ1bmN0aW9uIGdldChrKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuc3RvcmVfW2tdKTsKICB9Cn07CgovLyBCYXNlNjQgVVJMLiAgQWdhaW4uCnZhciBiYXNlNjQgPSB7CiAgX3N0cm1hcDogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LV8nLAogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKGRhdGEpIHsKICAgIGRhdGEgPSBuZXcgVWludDhBcnJheShkYXRhKTsKICAgIHZhciByID0gW107CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOykgewogICAgICByLnB1c2goZGF0YVtpXSA+Pj4gMik7CiAgICAgIHIucHVzaCgoZGF0YVtpKytdICYgMHgzKSA8PCA0IHwgZGF0YVtpXSA+Pj4gNCk7CiAgICAgIHIucHVzaCgoZGF0YVtpKytdICYgMHhmKSA8PCAyIHwgZGF0YVtpXSA+Pj4gNik7CiAgICAgIHIucHVzaChkYXRhW2krK10gJiAweDNmKTsKICAgIH0KICAgIHJldHVybiByLm1hcChmdW5jdGlvbiAodikgewogICAgICByZXR1cm4gYmFzZTY0Ll9zdHJtYXBbdl07CiAgICB9KS5qb2luKCcnKS5zbGljZSgwLCBNYXRoLmNlaWwoZGF0YS5sZW5ndGggKiA0IC8gMykpOwogIH0sCiAgX2xvb2t1cDogZnVuY3Rpb24gX2xvb2t1cChzLCBpKSB7CiAgICByZXR1cm4gYmFzZTY0Ll9zdHJtYXAuaW5kZXhPZihzLmNoYXJBdChpKSk7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShzdHIpIHsKICAgIHZhciB2ID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5mbG9vcihzdHIubGVuZ3RoICogMyAvIDQpKTsKICAgIHZhciB2aSA9IDA7CiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3RyLmxlbmd0aDspIHsKICAgICAgdmFyIHcgPSBiYXNlNjQuX2xvb2t1cChzdHIsIHNpKyspOwogICAgICB2YXIgeCA9IGJhc2U2NC5fbG9va3VwKHN0ciwgc2krKyk7CiAgICAgIHZhciB5ID0gYmFzZTY0Ll9sb29rdXAoc3RyLCBzaSsrKTsKICAgICAgdmFyIHogPSBiYXNlNjQuX2xvb2t1cChzdHIsIHNpKyspOwogICAgICB2W3ZpKytdID0gdyA8PCAyIHwgeCA+Pj4gNDsKICAgICAgdlt2aSsrXSA9IHggPDwgNCB8IHkgPj4+IDI7CiAgICAgIHZbdmkrK10gPSB5IDw8IDYgfCB6OwogICAgfQogICAgcmV0dXJuIHY7CiAgfQp9OwoKUHJvbWlzZS5hbGxtYXAgPSBmdW5jdGlvbiAobykgewogIHZhciByZXN1bHQgPSB7fTsKICByZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMobykubWFwKGZ1bmN0aW9uIChrKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9ba10pLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgcmV0dXJuIHJlc3VsdFtrXSA9IHI7CiAgICB9KTsKICB9KSkudGhlbihmdW5jdGlvbiAoXykgewogICAgcmV0dXJuIHJlc3VsdDsKICB9KTsKfTsKCnZhciBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7CnZhciBpZHBEZXRhaWxzID0gewogIHByb3RvY29sOiBwYXRoLnN1YnN0cmluZyhwYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKSArIGxvY2F0aW9uLmhhc2gsCiAgZG9tYWluOiBsb2NhdGlvbi5ob3N0Cn07CnZhciB1dGY4ID0gZnVuY3Rpb24gdXRmOChzKSB7CiAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigndXRmLTgnKS5lbmNvZGUocyk7Cn07Cgp2YXIgaWRwID0gewogIGdlbmVyYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cyAvKiwgb3JpZ2luLCBoaW50ICovKSB7CiAgICB2YXIgZGIgPSBuZXcgREIoJ2lkcGtleXN0b3JlJywgJ2tleXMnKTsKICAgIHJldHVybiBkYi5nZXQoJ2tleXBhaXInKS50aGVuKGZ1bmN0aW9uIChwYWlyKSB7CiAgICAgIHJldHVybiBwYWlyIHx8IGNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoeyBuYW1lOiAnRUNEU0EnLCBuYW1lZEN1cnZlOiAnUC0yNTYnIH0sIGZhbHNlLCBbJ3NpZ24nXSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChwYWlyKSB7CiAgICAgIHJldHVybiBQcm9taXNlLmFsbG1hcCh7CiAgICAgICAgLy8gVGhlIGlkZW50aXR5IGlzIHRoZSByYXcgcHVibGljIGtleS4KICAgICAgICBwdWI6IGNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KCdyYXcnLCBwYWlyLnB1YmxpY0tleSksCgogICAgICAgIC8vIFNpZ24gdGhlIGNvbnRlbnRzCiAgICAgICAgc2lnbmF0dXJlOiBjcnlwdG8uc3VidGxlLnNpZ24oeyBuYW1lOiAnRUNEU0EnLCBoYXNoOiAnU0hBLTI1NicgfSwgcGFpci5wcml2YXRlS2V5LCB1dGY4KGNvbnRlbnRzKSkKICAgICAgfSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgdmFyIHJ2YWwgPSB7CiAgICAgICAgaWRwOiBpZHBEZXRhaWxzLAogICAgICAgIGFzc2VydGlvbjogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgY29udGVudHM6IGNvbnRlbnRzLAogICAgICAgICAgcHViOiBiYXNlNjQuZW5jb2RlKHJlc3VsdC5wdWIpLAogICAgICAgICAgc2lnbmF0dXJlOiBiYXNlNjQuZW5jb2RlKHJlc3VsdC5zaWduYXR1cmUpCiAgICAgICAgfSkKICAgICAgfTsKICAgICAgZHVtcCgnYXNzZXJ0aW9uOiAnICsgSlNPTi5zdHJpbmdpZnkocnZhbCkgKyAnXG4nKTsKICAgICAgcmV0dXJuIHJ2YWw7CiAgICB9KTsKICB9LAoKICB2YWxpZGF0ZUFzc2VydGlvbjogZnVuY3Rpb24gdmFsaWRhdGVBc3NlcnRpb24oYXNzZXJ0aW9uIC8qLCBvcmlnaW4gKi8pIHsKICAgIHZhciBhc3NlcnRpb24gPSBKU09OLnBhcnNlKGFzc2VydGlvbik7IC8vIGxldCB0aGlzIHRocm93CiAgICByZXR1cm4gY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoJ3JhdycsIGJhc2U2NC5kZWNvZGUoYXNzZXJ0aW9uLnB1YiksIHsgbmFtZTogJ0VDRFNBJywgbmFtZWRDdXJ2ZTogJ1AtMjU2JyB9LCB0cnVlLCBbJ3ZlcmlmeSddKS50aGVuKGZ1bmN0aW9uIChwdWJLZXkpIHsKICAgICAgcmV0dXJuIFByb21pc2UuYWxsbWFwKHsKICAgICAgICAvLyBWZXJpZnkgdGhlIHNpZ25hdHVyZQogICAgICAgIG9rOiBjcnlwdG8uc3VidGxlLnZlcmlmeSh7IG5hbWU6ICdFQ0RTQScsIGhhc2g6ICdTSEEtMjU2JyB9LCBwdWJLZXksIGJhc2U2NC5kZWNvZGUoYXNzZXJ0aW9uLnNpZ25hdHVyZSksIHV0ZjgoYXNzZXJ0aW9uLmNvbnRlbnRzKSksCgogICAgICAgIC8vIE1ha2UgdGhlIGlkZW50aXR5IGEgY29tcHJlc3NlZCBmb3JtIG9mIHRoZSBwdWJsaWMga2V5LgogICAgICAgIGlkOiBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIHV0ZjgoYXNzZXJ0aW9uLnB1YikpLnRoZW4oZnVuY3Rpb24gKHJhdykgewogICAgICAgICAgcmV0dXJuIGJhc2U2NC5lbmNvZGUocmF3LnNsaWNlKDAsIDEyKSk7CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgaWYgKCFyZXN1bHQub2spIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2lnbmF0dXJlIG9uIGlkZW50aXR5IGFzc2VydGlvbicpOwogICAgICB9CiAgICAgIHZhciBydmFsID0gewogICAgICAgIGlkZW50aXR5OiByZXN1bHQuaWQgKyAnQCcgKyBpZHBEZXRhaWxzLmRvbWFpbiwKICAgICAgICBjb250ZW50czogYXNzZXJ0aW9uLmNvbnRlbnRzCiAgICAgIH07CiAgICAgIGR1bXAoJ2Fzc2VydGlvbjogJyArIEpTT04uc3RyaW5naWZ5KHJ2YWwpICsgJ1xuJyk7CiAgICAgIHJldHVybiBydmFsOwogICAgfSk7CiAgfQp9OwoKLyoKaWYgKHJ0Y0lkZW50aXR5UHJvdmlkZXIpIHsKICBydGNJZGVudGl0eVByb3ZpZGVyLnJlZ2lzdGVyKGlkcCk7Cn0gZWxzZSB7CiAgY29uc29sZS53YXJuKCdJZFAgbm90IHJ1bm5pbmcgaW4gdGhlIHJpZ2h0IHNhbmRib3gnKTsKfSovCgovKioKKiBJZGVudGl0eSBQcm92aWRlciBQcm94eSBQcm90b2NvbCBTdHViCiovCgp2YXIgTXRwcm94eVByb3RvU3R1YiA9IChmdW5jdGlvbiAoKSB7CgogIC8qKgogICogQ29uc3RydWN0b3Igb2YgdGhlIElkcFByb3h5IFN0dWIKICAqIFRoZSBjb25zdHJ1Y3RvciBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgbWVzc2FnZUJ1cyByZWNlaXZlZCBhbmQgc3RhcnQgYSB3ZWIgd29ya2VyIHdpdGggdGhlIGlkcFByb3h5IHJlY2VpdmVkCiAgKgogICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCiAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzUG9zdE1lc3NhZ2UgICAgIGNvbmZpZ3VyYXRpb24KICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogICovCgogIGZ1bmN0aW9uIE10cHJveHlQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNdHByb3h5UHJvdG9TdHViKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX3RoaXMucnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICBfdGhpcy5tZXNzYWdlQnVzID0gYnVzOwogICAgX3RoaXMuY29uZmlnID0gY29uZmlnOwoKICAgIF90aGlzLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGlmIChtc2cudG8gPT0gJ2RvbWFpbjovL210cHJveHkuY29tJykgewogICAgICAgIC8qbGV0IG5ld1ZhbHVlID0gSWRwUHJveHkuZ2VuZXJhdGVBc3NlcnRpb24oKTsKICAgICAgICBsZXQgbWVzc2FnZSA9IHtpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogbXNnLmZyb20sIGZyb206IG1zZy50bywKICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB7Y29kZTogMjAwLCB2YWx1ZTogbmV3VmFsdWUsIGJ1czogYnVzLCBydW50aW1lUHJvdG9TdHViVVJMOiBydW50aW1lUHJvdG9TdHViVVJMfX07CiAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSk7Ki8KICAgICAgICBfdGhpcy5yZXF1ZXN0VG9JZHAobXNnKTsKICAgICAgfQogICAgfSk7CiAgfQoKICAvLyBleHBvcnQgZGVmYXVsdCBJZHBQcm94eVByb3RvU3R1YjsKCiAgLyoqCiAgICogVG8gYWN0aXZhdGUgdGhpcyBwcm90b2NvbCBzdHViLCB1c2luZyB0aGUgc2FtZSBtZXRob2QgZm9yIGFsbCBwcm90b3N0dWIuCiAgICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCiAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uCiAgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uCiAgICogQHJldHVybiB7T2JqZWN0fSBPYmplY3Qgd2l0aCBuYW1lIGFuZCBpbnN0YW5jZSBvZiBQcm90b1N0dWIKICAgKi8KCiAgLyoqCiAgKiBGdW5jdGlvbiB0aGF0IHNlZSB0aGUgaW50ZW5kZWQgbWV0aG9kIGluIHRoZSBtZXNzYWdlIHJlY2VpdmVkIGFuZCBjYWxsIHRoZSByZXNwZWN0aXZlIGZ1bmN0aW9uCiAgKgogICogQHBhcmFtIHttZXNzYWdlfSAgbWVzc2FnZSByZWNlaXZlZCBpbiB0aGUgbWVzc2FnZUJ1cwogICovCgogIF9jcmVhdGVDbGFzcyhNdHByb3h5UHJvdG9TdHViLCBbewogICAga2V5OiAncmVxdWVzdFRvSWRwJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0VG9JZHAobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBwYXJhbXMgPSBtc2cuYm9keS5wYXJhbXM7CgogICAgICBzd2l0Y2ggKG1zZy5ib2R5Lm1ldGhvZCkgewogICAgICAgIGNhc2UgJ2dlbmVyYXRlQXNzZXJ0aW9uJzoKICAgICAgICAgIGlkcC5nZW5lcmF0ZUFzc2VydGlvbihwYXJhbXMuY29udGVudHMsIHBhcmFtcy5vcmlnaW4sIHBhcmFtcy51c2VybmFtZUhpbnQpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCBlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3ZhbGlkYXRlQXNzZXJ0aW9uJzoKICAgICAgICAgIGlkcC52YWxpZGF0ZUFzc2VydGlvbihwYXJhbXMuYXNzZXJ0aW9uLCBwYXJhbXMub3JpZ2luKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSk7CiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogVGhpcyBmdW5jdGlvbiByZWNlaXZlcyBhIG1lc3NhZ2UgYW5kIGEgdmFsdWUuIEl0IHJlcGxpZXMgdGhlIHZhbHVlIHRvIHRoZSBzZW5kZXIgb2YgdGhlIG1lc3NhZ2UgcmVjZWl2ZWQKICAgICoKICAgICogQHBhcmFtICB7bWVzc2FnZX0gICBtZXNzYWdlIHJlY2VpdmVkCiAgICAqIEBwYXJhbSAge3ZhbHVlfSAgICAgdmFsdWUgdG8gaW5jbHVkZSBpbiB0aGUgbmV3IG1lc3NhZ2UgdG8gc2VuZAogICAgKi8KICB9LCB7CiAgICBrZXk6ICdyZXBseU1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGx5TWVzc2FnZShtc2csIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbWVzc2FnZSA9IHsgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sCiAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHZhbHVlOiB2YWx1ZSB9IH07CgogICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE10cHJveHlQcm90b1N0dWI7Cn0pKCk7CgpmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdNdHByb3h5UHJvdG9TdHViJywKICAgIGluc3RhbmNlOiBuZXcgTXRwcm94eVByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV19LHt9LFsxXSkoMSkKfSk7",
      "sourceCodeClassname": "MtproxyProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of MtproxyProtoStub",
    "objectName": "MtproxyProtoStub",
    "configuration": {},
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "orange.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoqCiogSWRlbnRpdHlQcm94eSAtLSBOT0RFIE9QRU5JRCBDT05ORUNUIFNlcnZlcgoqCiogSW5pdGlhbCBzcGVjaWZpY2F0aW9uOiBENC4xCioKKiBUaGUgSWRlbnRpdHlNb2R1bGUgaXMgYSBjb21wb25lbnQgbWFuYWdpbmcgdXNlciBJZGVudGl0eS4gSXQgZG93bmxvYWRzLCBpbnN0YW50aWF0ZXMKKiBhbmQgbWFuYWdlIElkZW50aXR5IFByb3ZpZGVyIFByb3h5IChJZFApIGZvciBpdHMgb3duIHVzZXIgaWRlbnRpdHkgb3IgZm9yIGV4dGVybmFsCiogdXNlciBpZGVudGl0eSB2ZXJpZmljYXRpb24uCioKKiBUaGUgSWRQIGNvbnRhaW5zIG1ldGhvZHMgYW5kIHBhcmFtZXRlcnMgdG8gYWN0dWFsbHkgYWNjZXNzIGFuZCBtYWtlIHJlcXVlc3QKKiB0byB0aGUgSWRQIFNlcnZlci4gQWx0ZXJuYXRpdmVseSBzb21lIGZ1bmN0aW9ubmFsaXRpZXMgY2FuIGJlIGRvbmUgbG9jYWxseS4KKgoqLwoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpOwoKZXhwb3J0c1siZGVmYXVsdCJdID0gYWN0aXZhdGU7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBTT1VSQ0VVUkwgPSAiaHR0cHM6Ly9lbmVyZ3lxLmlkcC5yZXRoaW5rLm9yYW5nZS1sYWJzLmZyIiwKICAgIEFVVEhQQVRIID0gIi9wcm94eS9hdXRob3JpemUiLAogICAgVkVSSUZZUEFUSCA9ICIvcHJveHkvdmVyaWZ5IiwKICAgIERPTkVQQVRIID0gIi9wcm94eS9kb25lIiwKICAgIEtFWVBBVEggPSAnL3Byb3h5L2tleScsCiAgICBJRFBBVEggPSAnL3Byb3h5L2lkJywKICAgIFBST1hZVFlQRSA9ICJyZXRoaW5rLW9pZGMiLAogICAgSURTQ09QRSA9ICJvcGVuaWQiLAogICAgRlVMTFNDT1BFID0gIm9wZW5pZCB3ZWJydGMiLAogICAgVFlQRSA9ICdpZF90b2tlbiB0b2tlbic7Ci8vdmFyIFRZUEUgICAgICAgPSAgICdjb2RlJzsKCnZhciBpZHBfYWRkciA9IHsgJ2RvbWFpbic6ICJodHRwczovL2VuZXJneXEuaWRwLnJldGhpbmsub3JhbmdlLWxhYnMuZnIiLCAncHJvdG9jb2wnOiBQUk9YWVRZUEUgfTsKCmlmICh0eXBlb2YgY29uc29sZSA9PSAidW5kZWZpbmVkIikgewogIHVuZGVmaW5lZC5jb25zb2xlID0gewogICAgbG9nOiBmdW5jdGlvbiBsb2coKSB7fQogIH07Cn0KCmZ1bmN0aW9uIGdldFByb3h5S2V5KCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiB4bWxodHRwLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB2YXIgcmVzID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgcmVzLmVycm9yICE9IHVuZGVmaW5lZCA/IHJlamVjdChyZXMuZXJyb3IpIDogcmVzb2x2ZShyZXMpOwogICAgICB9CiAgICB9OwogICAgeG1saHR0cC5vcGVuKCJHRVQiLCBTT1VSQ0VVUkwgKyBLRVlQQVRILCB0cnVlKTsKICAgIHhtbGh0dHAuc2VuZCgpOwogIH0pOwp9ZnVuY3Rpb24gZ2V0UHJveHlJRCgpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeG1saHR0cC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgdmFyIHJlcyA9IEpTT04ucGFyc2UoeG1saHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgIHJlcy5lcnJvciAhPSB1bmRlZmluZWQgPyByZWplY3QocmVzLmVycm9yKSA6IHJlc29sdmUocmVzLmtleSk7CiAgICAgIH0KICAgIH07CiAgICB4bWxodHRwLm9wZW4oIkdFVCIsIFNPVVJDRVVSTCArIElEUEFUSCwgdHJ1ZSk7CiAgICB4bWxodHRwLnNlbmQoKTsKICB9KTsKfQpmdW5jdGlvbiBnZXRJZEFzc2VydGlvbigpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeG1saHR0cC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgdmFyIHJlcyA9IEpTT04ucGFyc2UoeG1saHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgIHJlcy5lcnJvciAhPSB1bmRlZmluZWQgPyByZWplY3QocmVzLmVycm9yKSA6IHJlc29sdmUocmVzLmtleSk7CiAgICAgIH0KICAgIH07CiAgICB4bWxodHRwLm9wZW4oIkdFVCIsIFNPVVJDRVVSTCArIElEUEFUSCwgdHJ1ZSk7CiAgICB4bWxodHRwLnNlbmQoKTsKICB9KTsKfQpmdW5jdGlvbiBzdHIyYWIoc3RyKSB7CiAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTsKICB2YXIgYnVmVmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7CiAgZm9yICh2YXIgaSA9IDAsIHN0ckxlbiA9IHN0ci5sZW5ndGg7IGkgPCBzdHJMZW47IGkrKykgewogICAgYnVmVmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpOwogIH0KICByZXR1cm4gYnVmOwp9CgpmdW5jdGlvbiBhYjJzdHIoYnVmKSB7CiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmKSk7Cn0KCi8vIElEUCBQcm94eSBjb2RlCnZhciBpZHAgPSB7CiAgLyoqCiAgKiBHZW5lcmF0aW9uIG9mIGFuIElkQXNzZXJ0aW9uIHRocm91Z2ggT0lEQyBJZFAKICAqLwogIGdlbmVyYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cyAvKiwgb3JpZ2luLCBoaW50ICovKSB7CiAgICAvLyBUT0RPIDogc2lnbiBjb250ZW50cyBpbiB0aGUgSWQgVG9rZW4KICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHJldHVybiBnZXRQcm94eUlEKCkudGhlbihmdW5jdGlvbiAoSUQpIHsKICAgICAgICB2YXIgX3VybCA9IFNPVVJDRVVSTCArIEFVVEhQQVRIICsgJz9zY29wZT0nICsgRlVMTFNDT1BFICsgJyZjbGllbnRfaWQ9JyArIElEICsgJyZyZWRpcmVjdF91cmk9JyArIFNPVVJDRVVSTCArIERPTkVQQVRIICsgJyZyZXNwb25zZV90eXBlPScgKyBUWVBFICsgJyZub25jZT0nICsgJ04tJyArIE1hdGgucmFuZG9tKCkgKyAnJnJ0Y3NkcD0nICsgYnRvYShjb250ZW50cyk7CiAgICAgICAgdmFyIG15SW5pdCA9IHsgbWV0aG9kOiAnR0VUJywKICAgICAgICAgIC8vaGVhZGVyczogbXlIZWFkZXJzLAogICAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsCiAgICAgICAgICAvLyB3ZSBkb24ndCBmb2xsb3cgcmVkaXJlY3Qgc28gdGhhdCBpZiB1c2VyIGlzIG5vdCBsb2dnZWQgKHJlZGlyZWN0KQogICAgICAgICAgLy8gd2UgZ2V0IGFuIGVycm9yIGFuIGNhbiByZXR1cm4gbG9naW4gVVJMIHRvIHRoZSBhcHBsaWNhdGlvbgogICAgICAgICAgcmVkaXJlY3Q6ICdlcnJvcicgfTsKICAgICAgICAvL3ZhciB1cmxXID0gJ2h0dHBzOi8vbG9jYWxob3N0OjgwODAvcHJveHkvYXV0aG9yaXplP3Njb3BlPW9wZW5pZCZjbGllbnRfaWQ9TFMwdExTMUNSVWRKVGlCUVZVSk1TVU1nUzBWWkxTMHRMUzBLVFVsSFprMUJNRWREVTNGSFUwbGlNMFJSUlVKQlVWVkJRVFJIVGtGRVEwSnBVVXRDWjFGRFkwVm5ja3gwV1ZSSVVIQXZkSEZDUTNCVUwxVXdTMWRKVFFvMGQybGthR05GV0VkMVVrWkNaRE4zVGxwUFkwaHVNblJGYW5aYVRraG1jM052VVhSMFVqQk9WRVExVVNzNVVHUjBUV1pKVEZoeFUzRTNWM2h0TWs1c0NrTmhOWEpUVkhwbVQxazVOV2haUW1zM1VWQlpkVE42ZEVWUVVIVk9RM0IxTWxkNlFsUTJaR2c0WVhwVk9HVXZSSFpZVjJSd2JIcFhkbXB1VG1kdVZHSUtTSFpPSzAxUFdVODRTR2hMTWtaV1IyRjNTVVJCVVVGQ0NpMHRMUzB0UlU1RUlGQlZRa3hKUXlCTFJWa3RMUzB0TFFvPSZyZWRpcmVjdF91cmk9aHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9wcm94eS9kb25lJnJlc3BvbnNlX3R5cGU9aWRfdG9rZW4lMjB0b2tlbiZub25jZT1OLTAuOTMxNjc4NTY5OTE2MjM0MicKCiAgICAgICAgZmV0Y2goX3VybCwgbXlJbml0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChoYXNoKSB7CiAgICAgICAgICBkdW1wKGhhc2gpOwogICAgICAgICAgdmFyIGpzb24gPSB7fTsKICAgICAgICAgIHZhciBkYXRhID0gaGFzaC5zcGxpdCgnJicpLnRvU3RyaW5nKCkuc3BsaXQoL1s9LF0rLyk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAganNvbltkYXRhW2ldXSA9IGRhdGFbaSArIDFdOwogICAgICAgICAgfQoKICAgICAgICAgIHJlc29sdmUoeyAnYXNzZXJ0aW9uJzoganNvbi5pZF90b2tlbiwgJ2lkcCc6IGlkcF9hZGRyIH0pOwogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAvLyBXZSBqdXN0IGxvZ2luIGJ1dCB3ZSBjb3VsZCBkbyBzb21ldGhpbmcgYmV0dGVyIG1heWJlPwogICAgICAgIC8vIEhhbmRsaW5nIGF1dGhvcml6YXRpb25zIGFuZCBzdWNoCiAgICAgICAgdmFyIGxvZ2luVVJMID0gU09VUkNFVVJMICsgJy9sb2dpbic7CiAgICAgICAgcmVqZWN0KHsgJ25hbWUnOiAnSWRQTG9naW5FcnJvcicsICdsb2dpblVybCc6IGxvZ2luVVJMIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8vICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgb3BlbiBhIHdpbmRvdyB3aXRoIHRoZSBVUkwgd2hpY2ggd2lsbCBvcGVuIGEgcGFnZQogICAgLy8gICAgICAgICAgICAgIC8vIHNlbnQgYnkgSWRQIGZvciB0aGUgdXNlciB0byBpbnNlcnQgdGhlIGNyZWRlbnRpYWxzCiAgICAvLyAgICAgICAgICAgICAgLy8gdGhlIElkUCB2YWxpZGF0ZXMgdGhlIGNyZWRlbnRpYWxzIHRoZW4gc2VuZCBhIGFjY2VzcyB0b2tlbgogICAgLy8gICAgICAgICAgd2luZG93Lm9wZW4oX3VybCwgJ29wZW5JRHJlcXVlc3QnLCAnd2lkdGg9ODAwLCBoZWlnaHQ9NjAwJykKICAgIC8vICAgICAgICAgICAgICAvLyByZXNwb25kIHRvIGV2ZW50cwogICAgLy8gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZXZlbnQgPT4gewogICAgLy8gICAgICAgICAgICBpZihldmVudC5vcmlnaW4gIT09IFNPVVJDRVVSTCkgcmV0dXJuOwogICAgLy8KICAgIC8vICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKGV2ZW50LmRhdGEpLmlkX3Rva2VuKQogICAgLy8gICAgICAgICAgICAvL2lkcC52YWxpZGF0ZUFzc2VydGlvbihyZXMuaWRfdG9rZW4pLnRoZW4oCiAgICAvLyAgICAgICAgICAgIC8vICAgIHJlc3BvbnNlID0+IHJlc29sdmUocmVzcG9uc2UpLCBlcnJvciA9PiByZWplY3QoZXJyb3IpKQogICAgLy8gICAgICAgICAgfSxmYWxzZSkKICAgICk7CiAgfSwKICAvKioKICAqIFZlcmlmaWNhdGlvbiBvZiBhIHJlY2VpdmVkIElkQXNzZXJ0aW9uIHZhbGlkaXR5CiAgKiBDYW4gYWxzbyBiZSB1c2VkIHRvIHZhbGlkYXRlIHRva2VuIHJlY2VpdmVkIGJ5IElkUAogICogQHBhcmFtICB7RE9NU3RyaW5nfSBhc3NlcnRpb24gYXNzZXJ0aW9uCiAgKi8KICB2YWxpZGF0ZUFzc2VydGlvbjogZnVuY3Rpb24gdmFsaWRhdGVBc3NlcnRpb24oYXNzZXJ0aW9uIC8qLCBvcmlnaW4gKi8pIHsKICAgIGFzc2VydGlvbiA9IGFzc2VydGlvbi5zcGxpdCgiLiIpOwogICAgdmFyIGhlYWRlciA9IGFzc2VydGlvblswXSwKICAgICAgICBwYXlsb2FkID0gYXNzZXJ0aW9uWzFdLAogICAgICAgIHNpZ25hdHVyZSA9IGFzc2VydGlvblsyXTsKICAgIC8vVE9ETyB0aGVyZSBpcyBwcm9iYWJseSBhIGJldHRlciB3YXkgdG8gZG8gdGhhdD8KICAgIHNpZ25hdHVyZSA9IHNpZ25hdHVyZS5yZXBsYWNlKC9fL2csICIvIikucmVwbGFjZSgvLS9nLCAiKyIpOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgcmV0dXJuIGdldFByb3h5S2V5KCkudGhlbihmdW5jdGlvbiAoS2V5KSB7CiAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdqd2snLCBLZXksIHsgbmFtZTogJ1JTQVNTQS1QS0NTMS12MV81JywgaGFzaDogeyBuYW1lOiAiU0hBLTI1NiIgfSB9LCB0cnVlLCBbJ3ZlcmlmeSddKS50aGVuKGZ1bmN0aW9uIChKV0spIHsKICAgICAgICAgIHJldHVybigKICAgICAgICAgICAgLy9jcnlwdG8udmVyaWZ5KGFsZ28sIGtleSwgc2lnbmF0dXJlLCB0ZXh0MnZlcmlmeSk7CiAgICAgICAgICAgIGNyeXB0by5zdWJ0bGUudmVyaWZ5KCdSU0FTU0EtUEtDUzEtdjFfNScsIEpXSywgc3RyMmFiKGF0b2Ioc2lnbmF0dXJlKSksIC8vQXJyYXlCdWZmZXIgb2YgdGhlIHNpZ25hdHVyZSwKICAgICAgICAgICAgc3RyMmFiKGhlYWRlciArICIuIiArIHBheWxvYWQpKSAvL0FycmF5QnVmZmVyIG9mIHRoZSBkYXRhCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBzaWduYXR1cmUgb24gaWRlbnRpdHkgYXNzZXJ0aW9uJykpO2Vsc2UgewogICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKGF0b2IocGF5bG9hZCkpOwogICAgICAgICAgICAgICAgLy8gaGFjayB0byBnZXQgb25seSB0aGUgbmFtZSBhbmQgcmVtb3ZlIGFueSBAbWFpbC5jb20KICAgICAgICAgICAgICAgIC8vIE1vemlsbGEgd2FudCB1cyB0byBwcm92aWRlIGEgdXNlcm5hbWUgd2l0aCBuYW1lQERPTUFJTgogICAgICAgICAgICAgICAgLy8gd2hlcmUgRE9NQUlOIGlzIElkUCBQcm94eSBET01BSU4KICAgICAgICAgICAgICAgIHZhciBuYW1lID0ganNvbi5zdWIuc3BsaXQoJ0AnKVswXTsKICAgICAgICAgICAgICAgIHJlc29sdmUoeyAnaWRlbnRpdHknOiBuYW1lICsgJ0AnICsgaWRwX2FkZHIuZG9tYWluLCAnY29udGVudHMnOiBhdG9iKGpzb24ucnRjc2RwKSB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogIH0KfTsKCi8qCmlmIChydGNJZGVudGl0eVByb3ZpZGVyKSB7CiAgcnRjSWRlbnRpdHlQcm92aWRlci5yZWdpc3RlcihpZHApOwogIGNvbnNvbGUubG9nKCJQcm94eSBsb2FkZWQiKQp9IGVsc2UgewogIGNvbnNvbGUud2FybignSWRQIG5vdCBydW5uaW5nIGluIHRoZSByaWdodCBzYW5kYm94Jyk7Cn0KKi8KCi8qKgoqIElkZW50aXR5IFByb3ZpZGVyIFByb3h5IFByb3RvY29sIFN0dWIKKi8KCnZhciBSZXRoaW5rT2lkY1Byb3RvU3R1YiA9IChmdW5jdGlvbiAoKSB7CgogIC8qKgogICogQ29uc3RydWN0b3Igb2YgdGhlIElkcFByb3h5IFN0dWIKICAqIFRoZSBjb25zdHJ1Y3RvciBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgbWVzc2FnZUJ1cyByZWNlaXZlZCBhbmQgc3RhcnQgYSB3ZWIgd29ya2VyIHdpdGggdGhlIGlkcFByb3h5IHJlY2VpdmVkCiAgKgogICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCiAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzUG9zdE1lc3NhZ2UgICAgIGNvbmZpZ3VyYXRpb24KICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogICovCgogIGZ1bmN0aW9uIFJldGhpbmtPaWRjUHJvdG9TdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsIGJ1cywgY29uZmlnKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmV0aGlua09pZGNQcm90b1N0dWIpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgIF90aGlzLm1lc3NhZ2VCdXMgPSBidXM7CiAgICBfdGhpcy5jb25maWcgPSBjb25maWc7CgogICAgX3RoaXMubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgaWYgKG1zZy50byA9PSAnZG9tYWluOi8vb3JhbmdlLmNvbScpIHsKICAgICAgICAvKmxldCBuZXdWYWx1ZSA9IElkcFByb3h5LmdlbmVyYXRlQXNzZXJ0aW9uKCk7CiAgICAgICAgbGV0IG1lc3NhZ2UgPSB7aWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sCiAgICAgICAgICAgICAgICAgICAgICAgYm9keToge2NvZGU6IDIwMCwgdmFsdWU6IG5ld1ZhbHVlLCBidXM6IGJ1cywgcnVudGltZVByb3RvU3R1YlVSTDogcnVudGltZVByb3RvU3R1YlVSTH19OwogICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOyovCiAgICAgICAgX3RoaXMucmVxdWVzdFRvSWRwKG1zZyk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgLy8gZXhwb3J0IGRlZmF1bHQgSWRwUHJveHlQcm90b1N0dWI7CgogIC8qKgogICAqIFRvIGFjdGl2YXRlIHRoaXMgcHJvdG9jb2wgc3R1YiwgdXNpbmcgdGhlIHNhbWUgbWV0aG9kIGZvciBhbGwgcHJvdG9zdHViLgogICAqIEBwYXJhbSAge1VSTC5SdW50aW1lVVJMfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMIHJ1bnRpbWVQcm90b1N1YlVSTAogICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbgogICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogICAqIEByZXR1cm4ge09iamVjdH0gT2JqZWN0IHdpdGggbmFtZSBhbmQgaW5zdGFuY2Ugb2YgUHJvdG9TdHViCiAgICovCgogIC8qKgogICogRnVuY3Rpb24gdGhhdCBzZWUgdGhlIGludGVuZGVkIG1ldGhvZCBpbiB0aGUgbWVzc2FnZSByZWNlaXZlZCBhbmQgY2FsbCB0aGUgcmVzcGVjdGl2ZSBmdW5jdGlvbgogICoKICAqIEBwYXJhbSB7bWVzc2FnZX0gIG1lc3NhZ2UgcmVjZWl2ZWQgaW4gdGhlIG1lc3NhZ2VCdXMKICAqLwoKICBfY3JlYXRlQ2xhc3MoUmV0aGlua09pZGNQcm90b1N0dWIsIFt7CiAgICBrZXk6ICJyZXF1ZXN0VG9JZHAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3RUb0lkcChtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHBhcmFtcyA9IG1zZy5ib2R5LnBhcmFtczsKCiAgICAgIHN3aXRjaCAobXNnLmJvZHkubWV0aG9kKSB7CiAgICAgICAgY2FzZSAnZ2VuZXJhdGVBc3NlcnRpb24nOgogICAgICAgICAgaWRwLmdlbmVyYXRlQXNzZXJ0aW9uKHBhcmFtcy5jb250ZW50cywgcGFyYW1zLm9yaWdpbiwgcGFyYW1zLnVzZXJuYW1lSGludCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpOwogICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIGVycm9yKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAndmFsaWRhdGVBc3NlcnRpb24nOgogICAgICAgICAgaWRwLnZhbGlkYXRlQXNzZXJ0aW9uKHBhcmFtcy5hc3NlcnRpb24sIHBhcmFtcy5vcmlnaW4pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCBlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBUaGlzIGZ1bmN0aW9uIHJlY2VpdmVzIGEgbWVzc2FnZSBhbmQgYSB2YWx1ZS4gSXQgcmVwbGllcyB0aGUgdmFsdWUgdG8gdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSByZWNlaXZlZAogICAgKgogICAgKiBAcGFyYW0gIHttZXNzYWdlfSAgIG1lc3NhZ2UgcmVjZWl2ZWQKICAgICogQHBhcmFtICB7dmFsdWV9ICAgICB2YWx1ZSB0byBpbmNsdWRlIGluIHRoZSBuZXcgbWVzc2FnZSB0byBzZW5kCiAgICAqLwogIH0sIHsKICAgIGtleTogInJlcGx5TWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtZXNzYWdlID0geyBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogbXNnLmZyb20sIGZyb206IG1zZy50bywKICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgdmFsdWU6IHZhbHVlIH0gfTsKCiAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmV0aGlua09pZGNQcm90b1N0dWI7Cn0pKCk7CgpmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdSZXRoaW5rT2lkY1Byb3RvU3R1YicsCiAgICBpbnN0YW5jZTogbmV3IFJldGhpbmtPaWRjUHJvdG9TdHViKHVybCwgYnVzLCBjb25maWcpCiAgfTsKfQoKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWyJkZWZhdWx0Il07Cgp9LHt9XX0se30sWzFdKSgxKQp9KTs=",
      "sourceCodeClassname": "RethinkOidcProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of RethinkOidcProtoStub",
    "objectName": "RethinkOidcProtoStub",
    "configuration": {},
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "google.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsNCid1c2Ugc3RyaWN0JzsNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7DQoNCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOw0KDQpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH0NCg0KdmFyIGlkZW50aXRpZXMgPSB7fTsNCnZhciBuSWRlbnRpdHkgPSAwOw0KDQp2YXIgZ29vZ2xlSW5mbyA9IHsNCiAgY2xpZW50U2VjcmV0OiAnWHg0ckt1Y2I1WllUYVhsY1pYOUhMZlpXJywNCiAgY2xpZW50SUQ6ICc4MDgzMjk1NjYwMTItdHFyOHFvaDExMTk0MmdkMmtnMDA3dDBzOGYyNzdyb2kuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nLA0KICByZWRpcmVjdFVSSTogbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCwgLy9sb2NhdGlvbi5vcmlnaW4sDQogIGlzc3VlcjogJ2h0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbScsDQogIHRva2VuRW5kcG9pbnQ6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjQvdG9rZW4/JywNCiAgandrc1VyaTogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My9jZXJ0cz8nLA0KICBhdXRob3Jpc2F0aW9uRW5kcG9pbnQ6ICdodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aD8nLA0KICB1c2VyaW5mbzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My91c2VyaW5mbz9hY2Nlc3NfdG9rZW49JywNCiAgdG9rZW5JbmZvOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YzL3Rva2VuaW5mbz9pZF90b2tlbj0nLA0KICBhY2Nlc3NUeXBlOiAnb2ZmbGluZScsDQogIHR5cGU6ICdjb2RlIHRva2VuIGlkX3Rva2VuJywNCiAgc2NvcGU6ICdvcGVuaWQlMjBlbWFpbCUyMHByb2ZpbGUnLA0KICBzdGF0ZTogJ3N0YXRlJw0KfTsNCg0KLy9mdW5jdGlvbiB0byBwYXJzZSB0aGUgcXVlcnkgc3RyaW5nIGluIHRoZSBnaXZlbiBVUkwgdG8gb2JhdGluIGNlcnRhaW4gdmFsdWVzDQpmdW5jdGlvbiB1cmxQYXJzZXIodXJsLCBuYW1lKSB7DQogIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcW10vLCAnXFxcWycpLnJlcGxhY2UoL1tcXV0vLCAnXFxcXScpOw0KICB2YXIgcmVnZXhTID0gJ1tcXCMmP10nICsgbmFtZSArICc9KFteJiNdKiknOw0KICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4Uyk7DQogIHZhciByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpOw0KICBpZiAocmVzdWx0cyA9PT0gbnVsbCkgcmV0dXJuICcnO2Vsc2UgcmV0dXJuIHJlc3VsdHNbMV07DQp9DQoNCmZ1bmN0aW9uIHNlbmRIVFRQUmVxdWVzdChtZXRob2QsIHVybCkgew0KICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogIGlmICgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpIHsNCiAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7DQogIH0gZWxzZSBpZiAodHlwZW9mIFhEb21haW5SZXF1ZXN0ICE9ICd1bmRlZmluZWQnKSB7DQogICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBpZiBYRG9tYWluUmVxdWVzdC4NCiAgICAvLyBYRG9tYWluUmVxdWVzdCBvbmx5IGV4aXN0cyBpbiBJRSwgYW5kIGlzIElFJ3Mgd2F5IG9mIG1ha2luZyBDT1JTIHJlcXVlc3RzLg0KICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpOw0KICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTsNCiAgfSBlbHNlIHsNCiAgICAvLyBPdGhlcndpc2UsIENPUlMgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4NCiAgICB4aHIgPSBudWxsOw0KICB9DQogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgaWYgKHhocikgew0KICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7DQogICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkgew0KICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgIHZhciBpbmZvID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTsNCiAgICAgICAgICAgIHJlc29sdmUoaW5mbyk7DQogICAgICAgICAgfSBlbHNlIGlmICh4aHIuc3RhdHVzID09PSA0MDApIHsNCiAgICAgICAgICAgIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRva2VuJyk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJlamVjdCgnc29tZXRoaW5nIGVsc2Ugb3RoZXIgdGhhbiAyMDAgd2FzIHJldHVybmVkJyk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9Ow0KICAgICAgeGhyLnNlbmQoKTsNCiAgICB9IGVsc2Ugew0KICAgICAgcmVqZWN0KCdDT1JTIG5vdCBzdXBwb3J0ZWQnKTsNCiAgICB9DQogIH0pOw0KfQ0KDQovKioNCiogRnVuY3Rpb24gdG8gZXhjaGFuZ2UgdGhlIGNvZGUgcmVjZWl2ZWQgdG8gdGhlIGlkIFRva2VuLCBhY2Nlc3MgdG9rZW4gYW5kIGEgcmVmcmVzaCB0b2tlbg0KKg0KKi8NCnZhciBleGNoYW5nZUNvZGUgPSBmdW5jdGlvbiBleGNoYW5nZUNvZGUoY29kZSkgew0KICB2YXIgaSA9IGdvb2dsZUluZm87DQoNCiAgdmFyIFVSTCA9IGkudG9rZW5FbmRwb2ludCArICdjb2RlPScgKyBjb2RlICsgJyZjbGllbnRfaWQ9JyArIGkuY2xpZW50SUQgKyAnJmNsaWVudF9zZWNyZXQ9JyArIGkuY2xpZW50U2VjcmV0ICsgJyZyZWRpcmVjdF91cmk9JyArIGkucmVkaXJlY3RVUkkgKyAnJmdyYW50X3R5cGU9YXV0aG9yaXphdGlvbl9jb2RlJzsNCg0KICAvL2xldCBVUkwgPSA9IGkudG9rZW5FbmRwb2ludCArICdjbGllbnRfaWQ9JyArIGkuY2xpZW50SUQgKyAnJmNsaWVudF9zZWNyZXQ9JyArIGkuY2xpZW50U2VjcmV0ICsgJyZyZWZyZXNoX3Rva2VuPScgKyBjb2RlICsgJyZncmFudF90eXBlPXJlZnJlc2hfdG9rZW4nOw0KDQogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgc2VuZEhUVFBSZXF1ZXN0KCdQT1NUJywgVVJMKS50aGVuKGZ1bmN0aW9uIChpbmZvKSB7DQogICAgICByZXNvbHZlKGluZm8pOw0KICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgew0KICAgICAgcmVqZWN0KGVycm9yKTsNCiAgICB9KTsNCiAgfSk7DQp9Ow0KDQovKioNCiogSWRlbnRpdHkgUHJvdmlkZXIgUHJveHkNCiovDQp2YXIgSWRwUHJveHkgPSB7DQoNCiAgLyoqDQogICogRnVuY3Rpb24gdG8gdmFsaWRhdGUgYW4gaWRlbnRpdHkgQXNzZXJ0aW9uIHJlY2VpdmVkDQogICogVE9ETyBhZGQgZGV0YWlscyBvZiB0aGUgaW1wbGVtZW50YXRpb24sIGFuZCBpbXByb3ZlIHRoZSBpbXBsZW1lbnRhdGlvbg0KICAqDQogICogQHBhcmFtICB7YXNzZXJ0aW9ufSAgICBJZGVudGl0eSBBc3NlcnRpb24gdG8gYmUgdmFsaWRhdGVkDQogICogQHBhcmFtICB7b3JpZ2lufSAgICAgICBPcmlnaW4gcGFyYW1ldGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgb3JpZ2luIG9mIHRoZSBSVENQZWVyQ29ubmVjdGlvbg0KICAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgaWRlbnRpdHkgYXNzZXJ0aW9uIHZhbGlkYXRpb24gcmVzdWx0DQogICovDQogIHZhbGlkYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiB2YWxpZGF0ZUFzc2VydGlvbihhc3NlcnRpb24sIG9yaWdpbikgew0KICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICB2YXIgaSA9IGdvb2dsZUluZm87DQoNCiAgICAgIHZhciBkZWNvZGVkQ29udGVudCA9IGF0b2IoYXNzZXJ0aW9uKTsNCiAgICAgIHZhciBjb250ZW50ID0gSlNPTi5wYXJzZShkZWNvZGVkQ29udGVudCk7DQogICAgICBzZW5kSFRUUFJlcXVlc3QoJ0dFVCcsIGkudG9rZW5JbmZvICsgY29udGVudC50b2tlbklEKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsNCg0KICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSA9PT0gSlNPTi5zdHJpbmdpZnkoY29udGVudC50b2tlbklESlNPTikpIHsNCiAgICAgICAgICByZXNvbHZlKHsgaWRlbnRpdHk6IGNvbnRlbnQudG9rZW5JREpTT04uZW1haWwsIGNvbnRlbnRzOiBjb250ZW50LnRva2VuSURKU09OIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlamVjdCgnaW52YWxpZCcpOw0KICAgICAgICB9DQogICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7DQoNCiAgICAgICAgcmVqZWN0KGVycik7DQogICAgICB9KTsNCiAgICB9KTsNCiAgfSwNCg0KICAvKioNCiAgKiBGdW5jdGlvbiB0byBnZW5lcmF0ZSBhbiBpZGVudGl0eSBBc3NlcnRpb24NCiAgKiBUT0RPIGFkZCBkZXRhaWxzIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiwgYW5kIGltcHJvdmUgaW1wbGVtZW50YXRpb24NCiAgKg0KICAqIEBwYXJhbSAge2NvbnRlbnRzfSBUaGUgY29udGVudHMgaW5jbHVkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGlkZW50aXR5IHJlY2VpdmVkDQogICogQHBhcmFtICB7b3JpZ2lufSBPcmlnaW4gcGFyYW1ldGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgb3JpZ2luIG9mIHRoZSBSVENQZWVyQ29ubmVjdGlvbg0KICAqIEBwYXJhbSAge3VzZXJuYW1lSGludH0gb3B0aW9uYWwgdXNlcm5hbWVIaW50IHBhcmFtZXRlcg0KICAqIEByZXR1cm4ge1Byb21pc2V9IHJldHVybnMgYSBwcm9taXNlIHdpdGggYW4gaWRlbnRpdHkgYXNzZXJ0aW9uDQogICovDQogIGdlbmVyYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cywgb3JpZ2luLCBoaW50KSB7DQogICAgdmFyIGkgPSBnb29nbGVJbmZvOw0KDQogICAgLy9zdGFydCB0aGUgbG9naW4gcGhhc2UNCiAgICAvL1RPRE8gbGF0ZXIgc2hvdWxkIGJlIGRlZmluZWQgYSBiZXR0ZXIgYXBwcm9hY2gNCiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgaWYgKCFjb250ZW50cykgew0KICAgICAgICAvKnRyeSB7DQogICAgICAgICAgaWYgKHdpbmRvdykgew0KICAgICAgICAgICAgcmVzb2x2ZSgndXJsJyk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlcnJvcikgeyovDQoNCiAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSBpLmF1dGhvcmlzYXRpb25FbmRwb2ludCArICdzY29wZT0nICsgaS5zY29wZSArICcmY2xpZW50X2lkPScgKyBpLmNsaWVudElEICsgJyZyZWRpcmVjdF91cmk9JyArIGkucmVkaXJlY3RVUkkgKyAnJnJlc3BvbnNlX3R5cGU9JyArIGkudHlwZSArICcmc3RhdGU9JyArIGkuc3RhdGUgKyAnJmFjY2Vzc190eXBlPScgKyBpLmFjY2Vzc1R5cGU7DQoNCiAgICAgICAgcmVqZWN0KHsgbmFtZTogJ0lkUExvZ2luRXJyb3InLCBsb2dpblVybDogcmVxdWVzdFVybCB9KTsNCg0KICAgICAgICAvLyAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBoYXZlIGFscmVhZHkgYmVlbiBtYWRlLCBzbyBpZHBQUm94eSB3aWxsIGV4Y2hhbmdlIHRoZSB0b2tlbnMgYWxvbmcgdG8gdGhlIGlkcCwgdG8gb2J0YWluIHRoZSBpbmZvcm1hdGlvbiBuZWNlc3NhcnkNCiAgICAgICAgICB2YXIgYWNjZXNzVG9rZW4gPSB1cmxQYXJzZXIoY29udGVudHMsICdhY2Nlc3NfdG9rZW4nKTsNCiAgICAgICAgICB2YXIgaWRUb2tlbiA9IHVybFBhcnNlcihjb250ZW50cywgJ2lkX3Rva2VuJyk7DQogICAgICAgICAgdmFyIGNvZGUgPSB1cmxQYXJzZXIoY29udGVudHMsICdjb2RlJyk7DQoNCiAgICAgICAgICBleGNoYW5nZUNvZGUoY29kZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsNCg0KICAgICAgICAgICAgLy9vYnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXINCiAgICAgICAgICAgIHZhciBpbmZvVG9rZW5VUkwgPSBpLnVzZXJpbmZvICsgdmFsdWUuYWNjZXNzX3Rva2VuOw0KICAgICAgICAgICAgc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBpbmZvVG9rZW5VUkwpLnRoZW4oZnVuY3Rpb24gKGluZm9Ub2tlbikgew0KDQogICAgICAgICAgICAgIHZhciBpZGVudGl0eUJ1bmRsZSA9IHsgYWNjZXNzVG9rZW46IHZhbHVlLmFjY2Vzc190b2tlbiwgaWRUb2tlbjogdmFsdWUuaWRfdG9rZW4sIHJlZnJlc2hUb2tlbjogdmFsdWUucmVmcmVzaF90b2tlbiwgdG9rZW5UeXBlOiB2YWx1ZS50b2tlbl90eXBlLCBpbmZvVG9rZW46IGluZm9Ub2tlbiB9Ow0KDQogICAgICAgICAgICAgIHZhciBpZFRva2VuVVJMID0gaS50b2tlbkluZm8gKyB2YWx1ZS5pZF90b2tlbjsNCg0KICAgICAgICAgICAgICAvL29idGFpbiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlciBpZFRva2VuDQogICAgICAgICAgICAgIHNlbmRIVFRQUmVxdWVzdCgnR0VUJywgaWRUb2tlblVSTCkudGhlbihmdW5jdGlvbiAoaWRUb2tlbikgew0KDQogICAgICAgICAgICAgICAgaWRlbnRpdHlCdW5kbGUudG9rZW5JREpTT04gPSBpZFRva2VuOw0KICAgICAgICAgICAgICAgIGlkZW50aXR5QnVuZGxlLmV4cGlyZXMgPSBpZFRva2VuLmV4cDsNCiAgICAgICAgICAgICAgICBpZGVudGl0eUJ1bmRsZS5lbWFpbCA9IGlkVG9rZW4uZW1haWw7DQoNCiAgICAgICAgICAgICAgICB2YXIgYXNzZXJ0aW9uID0gYnRvYShKU09OLnN0cmluZ2lmeSh7IHRva2VuSUQ6IHZhbHVlLmlkX3Rva2VuLCB0b2tlbklESlNPTjogaWRUb2tlbiB9KSk7DQogICAgICAgICAgICAgICAgdmFyIGlkcEJ1bmRsZSA9IHsgZG9tYWluOiAnZ29vZ2xlLmNvbScsIHByb3RvY29sOiAnT0lEQycgfTsNCg0KICAgICAgICAgICAgICAgIC8vVE9ETyBkZWxldGUgbGF0ZXIgdGhlIGZpZWxkIGluZm9Ub2tlbiwgYW5kIGRlbGV0ZSB0aGUgbmVlZCBpbiB0aGUgZXhhbXBsZQ0KICAgICAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHsgYXNzZXJ0aW9uOiBhc3NlcnRpb24sIGlkcDogaWRwQnVuZGxlLCBpbmZvOiBpZGVudGl0eUJ1bmRsZSwgaW5mb1Rva2VuOiBpbmZvVG9rZW4gfTsNCg0KICAgICAgICAgICAgICAgIGlkZW50aXRpZXNbbklkZW50aXR5XSA9IHJldHVyblZhbHVlOw0KICAgICAgICAgICAgICAgICsrbklkZW50aXR5Ow0KDQogICAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5WYWx1ZSk7DQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7DQoNCiAgICAgICAgICAgICAgICByZWplY3QoZSk7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7DQoNCiAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsNCg0KICAgICAgICAgICAgcmVqZWN0KGVycik7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgfQ0KfTsNCg0KLyoqDQoqIElkZW50aXR5IFByb3ZpZGVyIFByb3h5IFByb3RvY29sIFN0dWINCiovDQoNCnZhciBJZHBQcm94eVByb3RvU3R1YiA9IChmdW5jdGlvbiAoKSB7DQoNCiAgLyoqDQogICogQ29uc3RydWN0b3Igb2YgdGhlIElkcFByb3h5IFN0dWINCiAgKiBUaGUgY29uc3RydWN0b3IgYWRkIGEgbGlzdGVuZXIgaW4gdGhlIG1lc3NhZ2VCdXMgcmVjZWl2ZWQgYW5kIHN0YXJ0IGEgd2ViIHdvcmtlciB3aXRoIHRoZSBpZHBQcm94eSByZWNlaXZlZA0KICAqDQogICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMDQogICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uDQogICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uDQogICovDQoNCiAgZnVuY3Rpb24gSWRwUHJveHlQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsNCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSWRwUHJveHlQcm90b1N0dWIpOw0KDQogICAgdmFyIF90aGlzID0gdGhpczsNCiAgICBfdGhpcy5ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsNCiAgICBfdGhpcy5tZXNzYWdlQnVzID0gYnVzOw0KICAgIF90aGlzLmNvbmZpZyA9IGNvbmZpZzsNCg0KICAgIF90aGlzLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7DQogICAgICBpZiAobXNnLnRvID09PSAnZG9tYWluOi8vZ29vZ2xlLmNvbScpIHsNCg0KICAgICAgICBfdGhpcy5yZXF1ZXN0VG9JZHAobXNnKTsNCiAgICAgIH0NCiAgICB9KTsNCiAgfQ0KDQogIC8vIGV4cG9ydCBkZWZhdWx0IElkcFByb3h5UHJvdG9TdHViOw0KDQogIC8qKg0KICAgKiBUbyBhY3RpdmF0ZSB0aGlzIHByb3RvY29sIHN0dWIsIHVzaW5nIHRoZSBzYW1lIG1ldGhvZCBmb3IgYWxsIHByb3Rvc3R1Yi4NCiAgICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMDQogICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbg0KICAgKiBAcGFyYW0gIHtQcm90b1N0dWJEZXNjcmlwdG9yLkNvbmZpZ3VyYXRpb25EYXRhTGlzdH0gY29uZmlndXJhdGlvbiAgICAgIGNvbmZpZ3VyYXRpb24NCiAgICogQHJldHVybiB7T2JqZWN0fSBPYmplY3Qgd2l0aCBuYW1lIGFuZCBpbnN0YW5jZSBvZiBQcm90b1N0dWINCiAgICovDQoNCiAgLyoqDQogICogRnVuY3Rpb24gdGhhdCBzZWUgdGhlIGludGVuZGVkIG1ldGhvZCBpbiB0aGUgbWVzc2FnZSByZWNlaXZlZCBhbmQgY2FsbCB0aGUgcmVzcGVjdGl2ZSBmdW5jdGlvbg0KICAqDQogICogQHBhcmFtIHttZXNzYWdlfSAgbWVzc2FnZSByZWNlaXZlZCBpbiB0aGUgbWVzc2FnZUJ1cw0KICAqLw0KDQogIF9jcmVhdGVDbGFzcyhJZHBQcm94eVByb3RvU3R1YiwgW3sNCiAgICBrZXk6ICdyZXF1ZXN0VG9JZHAnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0VG9JZHAobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIHBhcmFtcyA9IG1zZy5ib2R5LnBhcmFtczsNCg0KICAgICAgc3dpdGNoIChtc2cuYm9keS5tZXRob2QpIHsNCiAgICAgICAgY2FzZSAnZ2VuZXJhdGVBc3NlcnRpb24nOg0KICAgICAgICAgIElkcFByb3h5LmdlbmVyYXRlQXNzZXJ0aW9uKHBhcmFtcy5jb250ZW50cywgcGFyYW1zLm9yaWdpbiwgcGFyYW1zLnVzZXJuYW1lSGludCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTsNCiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIGVycm9yKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAndmFsaWRhdGVBc3NlcnRpb24nOg0KICAgICAgICAgIElkcFByb3h5LnZhbGlkYXRlQXNzZXJ0aW9uKHBhcmFtcy5hc3NlcnRpb24sIHBhcmFtcy5vcmlnaW4pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSk7DQogICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCBlcnJvcik7DQogICAgICAgICAgfSk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBUaGlzIGZ1bmN0aW9uIHJlY2VpdmVzIGEgbWVzc2FnZSBhbmQgYSB2YWx1ZS4gSXQgcmVwbGllcyB0aGUgdmFsdWUgdG8gdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSByZWNlaXZlZA0KICAgICoNCiAgICAqIEBwYXJhbSAge21lc3NhZ2V9ICAgbWVzc2FnZSByZWNlaXZlZA0KICAgICogQHBhcmFtICB7dmFsdWV9ICAgICB2YWx1ZSB0byBpbmNsdWRlIGluIHRoZSBuZXcgbWVzc2FnZSB0byBzZW5kDQogICAgKi8NCiAgfSwgew0KICAgIGtleTogJ3JlcGx5TWVzc2FnZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGx5TWVzc2FnZShtc2csIHZhbHVlKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICB2YXIgbWVzc2FnZSA9IHsgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sDQogICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCB2YWx1ZTogdmFsdWUgfSB9Ow0KDQogICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOw0KICAgIH0NCiAgfV0pOw0KDQogIHJldHVybiBJZHBQcm94eVByb3RvU3R1YjsNCn0pKCk7DQoNCmZ1bmN0aW9uIGFjdGl2YXRlKHVybCwgYnVzLCBjb25maWcpIHsNCiAgcmV0dXJuIHsNCiAgICBuYW1lOiAnSWRwUHJveHlQcm90b1N0dWInLA0KICAgIGluc3RhbmNlOiBuZXcgSWRwUHJveHlQcm90b1N0dWIodXJsLCBidXMsIGNvbmZpZykNCiAgfTsNCn0NCg0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107DQoNCn0se31dfSx7fSxbMV0pKDEpDQp9KTs=",
      "sourceCodeClassname": "IdpProxyProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of IdpProxyProtoStub",
    "objectName": "IdpProxyProtoStub",
    "configuration": {},
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "IdpProxyProtoStub": {
    "sourcePackage": {
      "sourceCode": "bGV0IGlkZW50aXRpZXMgPSB7fTsKbGV0IG5JZGVudGl0eSA9IDA7CgpsZXQgZ29vZ2xlSW5mbyA9IHsKICBjbGllbnRTZWNyZXQ6ICAgICAgICAgICdYeDRyS3VjYjVaWVRhWGxjWlg5SExmWlcnLAogIGNsaWVudElEOiAgICAgICAgICAgICAgJzgwODMyOTU2NjAxMi10cXI4cW9oMTExOTQyZ2Qya2cwMDd0MHM4ZjI3N3JvaS5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbScsCiAgcmVkaXJlY3RVUkk6ICAgICAgICAgICBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0LCAvL2xvY2F0aW9uLm9yaWdpbiwKICBpc3N1ZXI6ICAgICAgICAgICAgICAgICdodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20nLAogIHRva2VuRW5kcG9pbnQ6ICAgICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92NC90b2tlbj8nLAogIGp3a3NVcmk6ICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My9jZXJ0cz8nLAogIGF1dGhvcmlzYXRpb25FbmRwb2ludDogJ2h0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoPycsCiAgdXNlcmluZm86ICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YzL3VzZXJpbmZvP2FjY2Vzc190b2tlbj0nLAogIHRva2VuSW5mbzogICAgICAgICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My90b2tlbmluZm8/aWRfdG9rZW49JywKICBhY2Nlc3NUeXBlOiAgICAgICAgICAgICdvZmZsaW5lJywKICB0eXBlOiAgICAgICAgICAgICAgICAgICdjb2RlIHRva2VuIGlkX3Rva2VuJywKICBzY29wZTogICAgICAgICAgICAgICAgICdvcGVuaWQlMjBlbWFpbCUyMHByb2ZpbGUnLAogIHN0YXRlOiAgICAgICAgICAgICAgICAgJ3N0YXRlJwp9OwoKLy9mdW5jdGlvbiB0byBwYXJzZSB0aGUgcXVlcnkgc3RyaW5nIGluIHRoZSBnaXZlbiBVUkwgdG8gb2JhdGluIGNlcnRhaW4gdmFsdWVzCmZ1bmN0aW9uIHVybFBhcnNlcih1cmwsIG5hbWUpIHsKICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFtdLywgJ1xcXFsnKS5yZXBsYWNlKC9bXF1dLywgJ1xcXF0nKTsKICBsZXQgcmVnZXhTID0gJ1tcXCMmP10nICsgbmFtZSArICc9KFteJiNdKiknOwogIGxldCByZWdleCA9IG5ldyBSZWdFeHAocmVnZXhTKTsKICBsZXQgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTsKICBpZiAocmVzdWx0cyA9PT0gbnVsbCkKICByZXR1cm4gJyc7CiAgZWxzZQogIHJldHVybiByZXN1bHRzWzFdOwp9CgpmdW5jdGlvbiBzZW5kSFRUUFJlcXVlc3QobWV0aG9kLCB1cmwpIHsKICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikgewogICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpOwogIH0gZWxzZSBpZiAodHlwZW9mIFhEb21haW5SZXF1ZXN0ICE9ICd1bmRlZmluZWQnKSB7CiAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGlmIFhEb21haW5SZXF1ZXN0LgogICAgLy8gWERvbWFpblJlcXVlc3Qgb25seSBleGlzdHMgaW4gSUUsIGFuZCBpcyBJRSdzIHdheSBvZiBtYWtpbmcgQ09SUyByZXF1ZXN0cy4KICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpOwogICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpOwogIH0gZWxzZSB7CiAgICAvLyBPdGhlcndpc2UsIENPUlMgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4KICAgIHhociA9IG51bGw7CiAgfQogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCkgewogICAgaWYgKHhocikgewogICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oZSkgewogICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkgewogICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBsZXQgaW5mbyA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgIHJlc29sdmUoaW5mbyk7CiAgICAgICAgICB9IGVsc2UgaWYgKHhoci5zdGF0dXMgPT09IDQwMCkgewogICAgICAgICAgICByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciBwcm9jZXNzaW5nIHRoZSB0b2tlbicpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KCdzb21ldGhpbmcgZWxzZSBvdGhlciB0aGFuIDIwMCB3YXMgcmV0dXJuZWQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICAgIHhoci5zZW5kKCk7CiAgICB9IGVsc2UgewogICAgICByZWplY3QoJ0NPUlMgbm90IHN1cHBvcnRlZCcpOwogICAgfQogIH0pOwp9CgovKioKKiBGdW5jdGlvbiB0byBleGNoYW5nZSB0aGUgY29kZSByZWNlaXZlZCB0byB0aGUgaWQgVG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgYSByZWZyZXNoIHRva2VuCioKKi8KbGV0IGV4Y2hhbmdlQ29kZSA9IChmdW5jdGlvbihjb2RlKSB7CiAgbGV0IGkgPSBnb29nbGVJbmZvOwoKICBsZXQgVVJMID0gaS50b2tlbkVuZHBvaW50ICsgJ2NvZGU9JyArIGNvZGUgKyAnJmNsaWVudF9pZD0nICsgaS5jbGllbnRJRCArICcmY2xpZW50X3NlY3JldD0nICsgaS5jbGllbnRTZWNyZXQgKyAnJnJlZGlyZWN0X3VyaT0nICsgaS5yZWRpcmVjdFVSSSArICcmZ3JhbnRfdHlwZT1hdXRob3JpemF0aW9uX2NvZGUnOwoKICAvL2xldCBVUkwgPSA9IGkudG9rZW5FbmRwb2ludCArICdjbGllbnRfaWQ9JyArIGkuY2xpZW50SUQgKyAnJmNsaWVudF9zZWNyZXQ9JyArIGkuY2xpZW50U2VjcmV0ICsgJyZyZWZyZXNoX3Rva2VuPScgKyBjb2RlICsgJyZncmFudF90eXBlPXJlZnJlc2hfdG9rZW4nOwoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBzZW5kSFRUUFJlcXVlc3QoJ1BPU1QnLCBVUkwpLnRoZW4oZnVuY3Rpb24oaW5mbykgewogICAgICByZXNvbHZlKGluZm8pOwogICAgfSwgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgcmVqZWN0KGVycm9yKTsKICAgIH0pOwoKICB9KTsKfSk7CgovKioKKiBJZGVudGl0eSBQcm92aWRlciBQcm94eQoqLwpsZXQgSWRwUHJveHkgPSB7CgogIC8qKgogICogRnVuY3Rpb24gdG8gdmFsaWRhdGUgYW4gaWRlbnRpdHkgQXNzZXJ0aW9uIHJlY2VpdmVkCiAgKiBUT0RPIGFkZCBkZXRhaWxzIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiwgYW5kIGltcHJvdmUgdGhlIGltcGxlbWVudGF0aW9uCiAgKgogICogQHBhcmFtICB7YXNzZXJ0aW9ufSAgICBJZGVudGl0eSBBc3NlcnRpb24gdG8gYmUgdmFsaWRhdGVkCiAgKiBAcGFyYW0gIHtvcmlnaW59ICAgICAgIE9yaWdpbiBwYXJhbWV0ZXIgdGhhdCBpZGVudGlmaWVzIHRoZSBvcmlnaW4gb2YgdGhlIFJUQ1BlZXJDb25uZWN0aW9uCiAgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIGlkZW50aXR5IGFzc2VydGlvbiB2YWxpZGF0aW9uIHJlc3VsdAogICovCiAgdmFsaWRhdGVBc3NlcnRpb246IChhc3NlcnRpb24sIG9yaWdpbikgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KSB7CiAgICAgIGxldCBpID0gZ29vZ2xlSW5mbzsKCiAgICAgIGxldCBkZWNvZGVkQ29udGVudCA9IGF0b2IoYXNzZXJ0aW9uKTsKICAgICAgbGV0IGNvbnRlbnQgPSBKU09OLnBhcnNlKGRlY29kZWRDb250ZW50KTsKICAgICAgc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBpLnRva2VuSW5mbyArIGNvbnRlbnQudG9rZW5JRCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHsKCiAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkgPT09IEpTT04uc3RyaW5naWZ5KGNvbnRlbnQudG9rZW5JREpTT04pKSB7CiAgICAgICAgICByZXNvbHZlKHtpZGVudGl0eTogY29udGVudC50b2tlbklESlNPTi5lbWFpbCwgY29udGVudHM6IGNvbnRlbnQudG9rZW5JREpTT059KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqZWN0KCdpbnZhbGlkJyk7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbihlcnIpIHsKCiAgICAgICAgcmVqZWN0KGVycik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgKiBGdW5jdGlvbiB0byBnZW5lcmF0ZSBhbiBpZGVudGl0eSBBc3NlcnRpb24KICAqIFRPRE8gYWRkIGRldGFpbHMgb2YgdGhlIGltcGxlbWVudGF0aW9uLCBhbmQgaW1wcm92ZSBpbXBsZW1lbnRhdGlvbgogICoKICAqIEBwYXJhbSAge2NvbnRlbnRzfSBUaGUgY29udGVudHMgaW5jbHVkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGlkZW50aXR5IHJlY2VpdmVkCiAgKiBAcGFyYW0gIHtvcmlnaW59IE9yaWdpbiBwYXJhbWV0ZXIgdGhhdCBpZGVudGlmaWVzIHRoZSBvcmlnaW4gb2YgdGhlIFJUQ1BlZXJDb25uZWN0aW9uCiAgKiBAcGFyYW0gIHt1c2VybmFtZUhpbnR9IG9wdGlvbmFsIHVzZXJuYW1lSGludCBwYXJhbWV0ZXIKICAqIEByZXR1cm4ge1Byb21pc2V9IHJldHVybnMgYSBwcm9taXNlIHdpdGggYW4gaWRlbnRpdHkgYXNzZXJ0aW9uCiAgKi8KICBnZW5lcmF0ZUFzc2VydGlvbjogKGNvbnRlbnRzLCBvcmlnaW4sIGhpbnQpID0+IHsKICAgIGxldCBpID0gZ29vZ2xlSW5mbzsKCiAgICAvL3N0YXJ0IHRoZSBsb2dpbiBwaGFzZQogICAgLy9UT0RPIGxhdGVyIHNob3VsZCBiZSBkZWZpbmVkIGEgYmV0dGVyIGFwcHJvYWNoCiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGlmICghY29udGVudHMpIHsKICAgICAgICAvKnRyeSB7CiAgICAgICAgICBpZiAod2luZG93KSB7CiAgICAgICAgICAgIHJlc29sdmUoJ3VybCcpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7Ki8KCiAgICAgICAgbGV0IHJlcXVlc3RVcmwgPSBpLmF1dGhvcmlzYXRpb25FbmRwb2ludCArICdzY29wZT0nICsgaS5zY29wZSArICcmY2xpZW50X2lkPScgKyBpLmNsaWVudElEICsgJyZyZWRpcmVjdF91cmk9JyArIGkucmVkaXJlY3RVUkkgKyAnJnJlc3BvbnNlX3R5cGU9JyArIGkudHlwZSArICcmc3RhdGU9JyArIGkuc3RhdGUgKyAnJmFjY2Vzc190eXBlPScgKyBpLmFjY2Vzc1R5cGU7CgogICAgICAgIHJlamVjdCh7bmFtZTogJ0lkUExvZ2luRXJyb3InLCBsb2dpblVybDogcmVxdWVzdFVybH0pOwoKICAgICAgLy8gIH0KCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdGhlIHJlcXVlc3QgaGF2ZSBhbHJlYWR5IGJlZW4gbWFkZSwgc28gaWRwUFJveHkgd2lsbCBleGNoYW5nZSB0aGUgdG9rZW5zIGFsb25nIHRvIHRoZSBpZHAsIHRvIG9idGFpbiB0aGUgaW5mb3JtYXRpb24gbmVjZXNzYXJ5CiAgICAgICAgbGV0IGFjY2Vzc1Rva2VuID0gdXJsUGFyc2VyKGNvbnRlbnRzLCAnYWNjZXNzX3Rva2VuJyk7CiAgICAgICAgbGV0IGlkVG9rZW4gPSB1cmxQYXJzZXIoY29udGVudHMsICdpZF90b2tlbicpOwogICAgICAgIGxldCBjb2RlID0gdXJsUGFyc2VyKGNvbnRlbnRzLCAnY29kZScpOwoKICAgICAgICBleGNoYW5nZUNvZGUoY29kZSkudGhlbihmdW5jdGlvbih2YWx1ZSkgewoKICAgICAgICAgIC8vb2J0YWluIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyCiAgICAgICAgICBsZXQgaW5mb1Rva2VuVVJMID0gaS51c2VyaW5mbyArIHZhbHVlLmFjY2Vzc190b2tlbjsKICAgICAgICAgIHNlbmRIVFRQUmVxdWVzdCgnR0VUJywgaW5mb1Rva2VuVVJMKS50aGVuKGZ1bmN0aW9uKGluZm9Ub2tlbikgewoKICAgICAgICAgICAgbGV0IGlkZW50aXR5QnVuZGxlID0ge2FjY2Vzc1Rva2VuOiB2YWx1ZS5hY2Nlc3NfdG9rZW4sIGlkVG9rZW46IHZhbHVlLmlkX3Rva2VuLCByZWZyZXNoVG9rZW46IHZhbHVlLnJlZnJlc2hfdG9rZW4sIHRva2VuVHlwZTogdmFsdWUudG9rZW5fdHlwZSwgaW5mb1Rva2VuOiBpbmZvVG9rZW59OwoKICAgICAgICAgICAgbGV0IGlkVG9rZW5VUkwgPSBpLnRva2VuSW5mbyArIHZhbHVlLmlkX3Rva2VuOwoKICAgICAgICAgICAgLy9vYnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIgaWRUb2tlbgogICAgICAgICAgICBzZW5kSFRUUFJlcXVlc3QoJ0dFVCcsIGlkVG9rZW5VUkwpLnRoZW4oZnVuY3Rpb24oaWRUb2tlbikgewoKCgogICAgICAgICAgICAgIGlkZW50aXR5QnVuZGxlLnRva2VuSURKU09OID0gaWRUb2tlbjsKICAgICAgICAgICAgICBpZGVudGl0eUJ1bmRsZS5leHBpcmVzID0gaWRUb2tlbi5leHA7CiAgICAgICAgICAgICAgaWRlbnRpdHlCdW5kbGUuZW1haWwgPSBpZFRva2VuLmVtYWlsOwoKICAgICAgICAgICAgICBsZXQgYXNzZXJ0aW9uID0gYnRvYShKU09OLnN0cmluZ2lmeSh7dG9rZW5JRDogdmFsdWUuaWRfdG9rZW4sIHRva2VuSURKU09OOiBpZFRva2VufSkpOwogICAgICAgICAgICAgIGxldCBpZHBCdW5kbGUgPSB7ZG9tYWluOiAnZ29vZ2xlLmNvbScsIHByb3RvY29sOiAnT0lEQyd9OwoKICAgICAgICAgICAgICAvL1RPRE8gZGVsZXRlIGxhdGVyIHRoZSBmaWVsZCBpbmZvVG9rZW4sIGFuZCBkZWxldGUgdGhlIG5lZWQgaW4gdGhlIGV4YW1wbGUKICAgICAgICAgICAgICBsZXQgcmV0dXJuVmFsdWUgPSB7YXNzZXJ0aW9uOiBhc3NlcnRpb24sIGlkcDogaWRwQnVuZGxlLCBpbmZvOiBpZGVudGl0eUJ1bmRsZSwgaW5mb1Rva2VuOiBpbmZvVG9rZW59OwoKICAgICAgICAgICAgICBpZGVudGl0aWVzW25JZGVudGl0eV0gPSByZXR1cm5WYWx1ZTsKICAgICAgICAgICAgICArK25JZGVudGl0eTsKCiAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5WYWx1ZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHsKCiAgICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CgogICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7CgogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CgogICAgICB9CiAgICB9KTsKICB9Cn07CgovKioKKiBJZGVudGl0eSBQcm92aWRlciBQcm94eSBQcm90b2NvbCBTdHViCiovCmNsYXNzIElkcFByb3h5UHJvdG9TdHViIHsKCiAgLyoqCiAgKiBDb25zdHJ1Y3RvciBvZiB0aGUgSWRwUHJveHkgU3R1YgogICogVGhlIGNvbnN0cnVjdG9yIGFkZCBhIGxpc3RlbmVyIGluIHRoZSBtZXNzYWdlQnVzIHJlY2VpdmVkIGFuZCBzdGFydCBhIHdlYiB3b3JrZXIgd2l0aCB0aGUgaWRwUHJveHkgcmVjZWl2ZWQKICAqCiAgKiBAcGFyYW0gIHtVUkwuUnVudGltZVVSTH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCBydW50aW1lUHJvdG9TdWJVUkwKICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbgogICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uCiAgKi8KIGNvbnN0cnVjdG9yKHJ1bnRpbWVQcm90b1N0dWJVUkwsIGJ1cywgY29uZmlnKSB7CiAgIGxldCBfdGhpcyA9IHRoaXM7CiAgIF90aGlzLnJ1bnRpbWVQcm90b1N0dWJVUkwgPSBydW50aW1lUHJvdG9TdHViVVJMOwogICBfdGhpcy5tZXNzYWdlQnVzID0gYnVzOwogICBfdGhpcy5jb25maWcgPSBjb25maWc7CgogICBfdGhpcy5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24obXNnKSB7CiAgICAgaWYgKG1zZy50byA9PT0gJ2RvbWFpbjovL2dvb2dsZS5jb20nKSB7CgogICAgICAgX3RoaXMucmVxdWVzdFRvSWRwKG1zZyk7CiAgICAgfQogICB9KTsKIH0KCiAgLyoqCiAgKiBGdW5jdGlvbiB0aGF0IHNlZSB0aGUgaW50ZW5kZWQgbWV0aG9kIGluIHRoZSBtZXNzYWdlIHJlY2VpdmVkIGFuZCBjYWxsIHRoZSByZXNwZWN0aXZlIGZ1bmN0aW9uCiAgKgogICogQHBhcmFtIHttZXNzYWdlfSAgbWVzc2FnZSByZWNlaXZlZCBpbiB0aGUgbWVzc2FnZUJ1cwogICovCiAgcmVxdWVzdFRvSWRwKG1zZykgewogICAgbGV0IF90aGlzID0gdGhpczsKICAgIGxldCBwYXJhbXMgPSBtc2cuYm9keS5wYXJhbXM7CgogICAgc3dpdGNoIChtc2cuYm9keS5tZXRob2QpIHsKICAgICAgY2FzZSAnZ2VuZXJhdGVBc3NlcnRpb24nOgogICAgICAgIElkcFByb3h5LmdlbmVyYXRlQXNzZXJ0aW9uKHBhcmFtcy5jb250ZW50cywgcGFyYW1zLm9yaWdpbiwgcGFyYW1zLnVzZXJuYW1lSGludCkudGhlbigKICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7IF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTt9LAoKICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7IF90aGlzLnJlcGx5TWVzc2FnZShtc2csIGVycm9yKTt9CiAgICAgICAgKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAndmFsaWRhdGVBc3NlcnRpb24nOgogICAgICAgIElkcFByb3h5LnZhbGlkYXRlQXNzZXJ0aW9uKHBhcmFtcy5hc3NlcnRpb24sIHBhcmFtcy5vcmlnaW4pLnRoZW4oCiAgICAgICAgICBmdW5jdGlvbih2YWx1ZSkgeyBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSk7fSwKCiAgICAgICAgICBmdW5jdGlvbihlcnJvcikgeyBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCBlcnJvcik7fQogICAgICAgICk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICAvKioKICAqIFRoaXMgZnVuY3Rpb24gcmVjZWl2ZXMgYSBtZXNzYWdlIGFuZCBhIHZhbHVlLiBJdCByZXBsaWVzIHRoZSB2YWx1ZSB0byB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlIHJlY2VpdmVkCiAgKgogICogQHBhcmFtICB7bWVzc2FnZX0gICBtZXNzYWdlIHJlY2VpdmVkCiAgKiBAcGFyYW0gIHt2YWx1ZX0gICAgIHZhbHVlIHRvIGluY2x1ZGUgaW4gdGhlIG5ldyBtZXNzYWdlIHRvIHNlbmQKICAqLwogIHJlcGx5TWVzc2FnZShtc2csIHZhbHVlKSB7CiAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgIGxldCBtZXNzYWdlID0ge2lkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIHRvOiBtc2cuZnJvbSwgZnJvbTogbXNnLnRvLAogICAgICAgICAgICAgICAgICAgYm9keToge2NvZGU6IDIwMCwgdmFsdWU6IHZhbHVlfX07CgogICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtZXNzYWdlKTsKICB9Cn0KCi8vIGV4cG9ydCBkZWZhdWx0IElkcFByb3h5UHJvdG9TdHViOwoKLyoqCiAqIFRvIGFjdGl2YXRlIHRoaXMgcHJvdG9jb2wgc3R1YiwgdXNpbmcgdGhlIHNhbWUgbWV0aG9kIGZvciBhbGwgcHJvdG9zdHViLgogKiBAcGFyYW0gIHtVUkwuUnVudGltZVVSTH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCBydW50aW1lUHJvdG9TdWJVUkwKICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uCiAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogKiBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCB3aXRoIG5hbWUgYW5kIGluc3RhbmNlIG9mIFByb3RvU3R1YgogKi8KZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogIHJldHVybiB7CiAgICBuYW1lOiAnSWRwUHJveHlQcm90b1N0dWInLAogICAgaW5zdGFuY2U6IG5ldyBJZHBQcm94eVByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0K",
      "sourceCodeClassname": "IdpProxyProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of IdpProxyProtoStub",
    "objectName": "IdpProxyProtoStub",
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}
